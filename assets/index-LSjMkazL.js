var PY=Object.defineProperty;var xY=(t,e,i)=>e in t?PY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var rt=(t,e,i)=>xY(t,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function dk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function tT(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var i=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),i}var Ew={exports:{}},Bg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u4;function NY(){if(u4)return Bg;u4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(n,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var o in r)o!=="key"&&(s[o]=r[o])}else s=r;return r=s.ref,{$$typeof:t,type:n,key:a,ref:r!==void 0?r:null,props:s}}return Bg.Fragment=e,Bg.jsx=i,Bg.jsxs=i,Bg}var h4;function FY(){return h4||(h4=1,Ew.exports=NY()),Ew.exports}var wc=FY(),Bw={exports:{}},Og={},Ow={exports:{}},Rw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f4;function LY(){return f4||(f4=1,function(t){function e(H,k){var G=H.length;H.push(k);t:for(;0<G;){var lt=G-1>>>1,Q=H[lt];if(0<r(Q,k))H[lt]=k,H[G]=Q,G=lt;else break t}}function i(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var k=H[0],G=H.pop();if(G!==k){H[0]=G;t:for(var lt=0,Q=H.length,mt=Q>>>1;lt<mt;){var wt=2*(lt+1)-1,Dt=H[wt],te=wt+1,ie=H[te];if(0>r(Dt,G))te<Q&&0>r(ie,Dt)?(H[lt]=ie,H[te]=G,lt=te):(H[lt]=Dt,H[wt]=G,lt=wt);else if(te<Q&&0>r(ie,G))H[lt]=ie,H[te]=G,lt=te;else break t}}return k}function r(H,k){var G=H.sortIndex-k.sortIndex;return G!==0?G:H.id-k.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],c=[],h=1,A=null,m=3,b=!1,S=!1,M=!1,I=!1,O=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function P(H){for(var k=i(c);k!==null;){if(k.callback===null)n(c);else if(k.startTime<=H)n(c),k.sortIndex=k.expirationTime,e(l,k);else break;k=i(c)}}function j(H){if(M=!1,P(H),!S)if(i(l)!==null)S=!0,N||(N=!0,X());else{var k=i(c);k!==null&&Ot(j,k.startTime-H)}}var N=!1,F=-1,$=5,V=-1;function Z(){return I?!0:!(t.unstable_now()-V<$)}function nt(){if(I=!1,N){var H=t.unstable_now();V=H;var k=!0;try{t:{S=!1,M&&(M=!1,D(F),F=-1),b=!0;var G=m;try{e:{for(P(H),A=i(l);A!==null&&!(A.expirationTime>H&&Z());){var lt=A.callback;if(typeof lt=="function"){A.callback=null,m=A.priorityLevel;var Q=lt(A.expirationTime<=H);if(H=t.unstable_now(),typeof Q=="function"){A.callback=Q,P(H),k=!0;break e}A===i(l)&&n(l),P(H)}else n(l);A=i(l)}if(A!==null)k=!0;else{var mt=i(c);mt!==null&&Ot(j,mt.startTime-H),k=!1}}break t}finally{A=null,m=G,b=!1}k=void 0}}finally{k?X():N=!1}}}var X;if(typeof B=="function")X=function(){B(nt)};else if(typeof MessageChannel<"u"){var bt=new MessageChannel,Tt=bt.port2;bt.port1.onmessage=nt,X=function(){Tt.postMessage(null)}}else X=function(){O(nt,0)};function Ot(H,k){F=O(function(){H(t.unstable_now())},k)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var k=3;break;default:k=m}var G=m;m=k;try{return H()}finally{m=G}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(H,k){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var G=m;m=H;try{return k()}finally{m=G}},t.unstable_scheduleCallback=function(H,k,G){var lt=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?lt+G:lt):G=lt,H){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=G+Q,H={id:h++,callback:k,priorityLevel:H,startTime:G,expirationTime:Q,sortIndex:-1},G>lt?(H.sortIndex=G,e(c,H),i(l)===null&&H===i(c)&&(M?(D(F),F=-1):M=!0,Ot(j,G-lt))):(H.sortIndex=Q,e(l,H),S||b||(S=!0,N||(N=!0,X()))),H},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(H){var k=m;return function(){var G=m;m=k;try{return H.apply(this,arguments)}finally{m=G}}}}(Rw)),Rw}var d4;function UY(){return d4||(d4=1,Ow.exports=LY()),Ow.exports}var Dw={exports:{}},ji={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4;function kY(){if(A4)return ji;A4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),A=Symbol.iterator;function m(Q){return Q===null||typeof Q!="object"?null:(Q=A&&Q[A]||Q["@@iterator"],typeof Q=="function"?Q:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,M={};function I(Q,mt,wt){this.props=Q,this.context=mt,this.refs=M,this.updater=wt||b}I.prototype.isReactComponent={},I.prototype.setState=function(Q,mt){if(typeof Q!="object"&&typeof Q!="function"&&Q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Q,mt,"setState")},I.prototype.forceUpdate=function(Q){this.updater.enqueueForceUpdate(this,Q,"forceUpdate")};function O(){}O.prototype=I.prototype;function D(Q,mt,wt){this.props=Q,this.context=mt,this.refs=M,this.updater=wt||b}var B=D.prototype=new O;B.constructor=D,S(B,I.prototype),B.isPureReactComponent=!0;var P=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},N=Object.prototype.hasOwnProperty;function F(Q,mt,wt,Dt,te,ie){return wt=ie.ref,{$$typeof:t,type:Q,key:mt,ref:wt!==void 0?wt:null,props:ie}}function $(Q,mt){return F(Q.type,mt,void 0,void 0,void 0,Q.props)}function V(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===t}function Z(Q){var mt={"=":"=0",":":"=2"};return"$"+Q.replace(/[=:]/g,function(wt){return mt[wt]})}var nt=/\/+/g;function X(Q,mt){return typeof Q=="object"&&Q!==null&&Q.key!=null?Z(""+Q.key):mt.toString(36)}function bt(){}function Tt(Q){switch(Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason;default:switch(typeof Q.status=="string"?Q.then(bt,bt):(Q.status="pending",Q.then(function(mt){Q.status==="pending"&&(Q.status="fulfilled",Q.value=mt)},function(mt){Q.status==="pending"&&(Q.status="rejected",Q.reason=mt)})),Q.status){case"fulfilled":return Q.value;case"rejected":throw Q.reason}}throw Q}function Ot(Q,mt,wt,Dt,te){var ie=typeof Q;(ie==="undefined"||ie==="boolean")&&(Q=null);var ft=!1;if(Q===null)ft=!0;else switch(ie){case"bigint":case"string":case"number":ft=!0;break;case"object":switch(Q.$$typeof){case t:case e:ft=!0;break;case h:return ft=Q._init,Ot(ft(Q._payload),mt,wt,Dt,te)}}if(ft)return te=te(Q),ft=Dt===""?"."+X(Q,0):Dt,P(te)?(wt="",ft!=null&&(wt=ft.replace(nt,"$&/")+"/"),Ot(te,mt,wt,"",function(he){return he})):te!=null&&(V(te)&&(te=$(te,wt+(te.key==null||Q&&Q.key===te.key?"":(""+te.key).replace(nt,"$&/")+"/")+ft)),mt.push(te)),1;ft=0;var Ht=Dt===""?".":Dt+":";if(P(Q))for(var Nt=0;Nt<Q.length;Nt++)Dt=Q[Nt],ie=Ht+X(Dt,Nt),ft+=Ot(Dt,mt,wt,ie,te);else if(Nt=m(Q),typeof Nt=="function")for(Q=Nt.call(Q),Nt=0;!(Dt=Q.next()).done;)Dt=Dt.value,ie=Ht+X(Dt,Nt++),ft+=Ot(Dt,mt,wt,ie,te);else if(ie==="object"){if(typeof Q.then=="function")return Ot(Tt(Q),mt,wt,Dt,te);throw mt=String(Q),Error("Objects are not valid as a React child (found: "+(mt==="[object Object]"?"object with keys {"+Object.keys(Q).join(", ")+"}":mt)+"). If you meant to render a collection of children, use an array instead.")}return ft}function H(Q,mt,wt){if(Q==null)return Q;var Dt=[],te=0;return Ot(Q,Dt,"","",function(ie){return mt.call(wt,ie,te++)}),Dt}function k(Q){if(Q._status===-1){var mt=Q._result;mt=mt(),mt.then(function(wt){(Q._status===0||Q._status===-1)&&(Q._status=1,Q._result=wt)},function(wt){(Q._status===0||Q._status===-1)&&(Q._status=2,Q._result=wt)}),Q._status===-1&&(Q._status=0,Q._result=mt)}if(Q._status===1)return Q._result.default;throw Q._result}var G=typeof reportError=="function"?reportError:function(Q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var mt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Q=="object"&&Q!==null&&typeof Q.message=="string"?String(Q.message):String(Q),error:Q});if(!window.dispatchEvent(mt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Q);return}console.error(Q)};function lt(){}return ji.Children={map:H,forEach:function(Q,mt,wt){H(Q,function(){mt.apply(this,arguments)},wt)},count:function(Q){var mt=0;return H(Q,function(){mt++}),mt},toArray:function(Q){return H(Q,function(mt){return mt})||[]},only:function(Q){if(!V(Q))throw Error("React.Children.only expected to receive a single React element child.");return Q}},ji.Component=I,ji.Fragment=i,ji.Profiler=r,ji.PureComponent=D,ji.StrictMode=n,ji.Suspense=l,ji.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,ji.__COMPILER_RUNTIME={__proto__:null,c:function(Q){return j.H.useMemoCache(Q)}},ji.cache=function(Q){return function(){return Q.apply(null,arguments)}},ji.cloneElement=function(Q,mt,wt){if(Q==null)throw Error("The argument must be a React element, but you passed "+Q+".");var Dt=S({},Q.props),te=Q.key,ie=void 0;if(mt!=null)for(ft in mt.ref!==void 0&&(ie=void 0),mt.key!==void 0&&(te=""+mt.key),mt)!N.call(mt,ft)||ft==="key"||ft==="__self"||ft==="__source"||ft==="ref"&&mt.ref===void 0||(Dt[ft]=mt[ft]);var ft=arguments.length-2;if(ft===1)Dt.children=wt;else if(1<ft){for(var Ht=Array(ft),Nt=0;Nt<ft;Nt++)Ht[Nt]=arguments[Nt+2];Dt.children=Ht}return F(Q.type,te,void 0,void 0,ie,Dt)},ji.createContext=function(Q){return Q={$$typeof:a,_currentValue:Q,_currentValue2:Q,_threadCount:0,Provider:null,Consumer:null},Q.Provider=Q,Q.Consumer={$$typeof:s,_context:Q},Q},ji.createElement=function(Q,mt,wt){var Dt,te={},ie=null;if(mt!=null)for(Dt in mt.key!==void 0&&(ie=""+mt.key),mt)N.call(mt,Dt)&&Dt!=="key"&&Dt!=="__self"&&Dt!=="__source"&&(te[Dt]=mt[Dt]);var ft=arguments.length-2;if(ft===1)te.children=wt;else if(1<ft){for(var Ht=Array(ft),Nt=0;Nt<ft;Nt++)Ht[Nt]=arguments[Nt+2];te.children=Ht}if(Q&&Q.defaultProps)for(Dt in ft=Q.defaultProps,ft)te[Dt]===void 0&&(te[Dt]=ft[Dt]);return F(Q,ie,void 0,void 0,null,te)},ji.createRef=function(){return{current:null}},ji.forwardRef=function(Q){return{$$typeof:o,render:Q}},ji.isValidElement=V,ji.lazy=function(Q){return{$$typeof:h,_payload:{_status:-1,_result:Q},_init:k}},ji.memo=function(Q,mt){return{$$typeof:c,type:Q,compare:mt===void 0?null:mt}},ji.startTransition=function(Q){var mt=j.T,wt={};j.T=wt;try{var Dt=Q(),te=j.S;te!==null&&te(wt,Dt),typeof Dt=="object"&&Dt!==null&&typeof Dt.then=="function"&&Dt.then(lt,G)}catch(ie){G(ie)}finally{j.T=mt}},ji.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},ji.use=function(Q){return j.H.use(Q)},ji.useActionState=function(Q,mt,wt){return j.H.useActionState(Q,mt,wt)},ji.useCallback=function(Q,mt){return j.H.useCallback(Q,mt)},ji.useContext=function(Q){return j.H.useContext(Q)},ji.useDebugValue=function(){},ji.useDeferredValue=function(Q,mt){return j.H.useDeferredValue(Q,mt)},ji.useEffect=function(Q,mt,wt){var Dt=j.H;if(typeof wt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Dt.useEffect(Q,mt)},ji.useId=function(){return j.H.useId()},ji.useImperativeHandle=function(Q,mt,wt){return j.H.useImperativeHandle(Q,mt,wt)},ji.useInsertionEffect=function(Q,mt){return j.H.useInsertionEffect(Q,mt)},ji.useLayoutEffect=function(Q,mt){return j.H.useLayoutEffect(Q,mt)},ji.useMemo=function(Q,mt){return j.H.useMemo(Q,mt)},ji.useOptimistic=function(Q,mt){return j.H.useOptimistic(Q,mt)},ji.useReducer=function(Q,mt,wt){return j.H.useReducer(Q,mt,wt)},ji.useRef=function(Q){return j.H.useRef(Q)},ji.useState=function(Q){return j.H.useState(Q)},ji.useSyncExternalStore=function(Q,mt,wt){return j.H.useSyncExternalStore(Q,mt,wt)},ji.useTransition=function(){return j.H.useTransition()},ji.version="19.1.0",ji}var g4;function sE(){return g4||(g4=1,Dw.exports=kY()),Dw.exports}var Cw={exports:{}},ts={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y4;function jY(){if(y4)return ts;y4=1;var t=sE();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(l,c,h){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:A==null?null:""+A,children:l,containerInfo:c,implementation:h}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return ts.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ts.createPortal=function(l,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return s(l,c,null,h)},ts.flushSync=function(l){var c=a.T,h=n.p;try{if(a.T=null,n.p=2,l)return l()}finally{a.T=c,n.p=h,n.d.f()}},ts.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,n.d.C(l,c))},ts.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},ts.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var h=c.as,A=o(h,c.crossOrigin),m=typeof c.integrity=="string"?c.integrity:void 0,b=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;h==="style"?n.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:A,integrity:m,fetchPriority:b}):h==="script"&&n.d.X(l,{crossOrigin:A,integrity:m,fetchPriority:b,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},ts.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var h=o(c.as,c.crossOrigin);n.d.M(l,{crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&n.d.M(l)},ts.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var h=c.as,A=o(h,c.crossOrigin);n.d.L(l,h,{crossOrigin:A,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},ts.preloadModule=function(l,c){if(typeof l=="string")if(c){var h=o(c.as,c.crossOrigin);n.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:h,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else n.d.m(l)},ts.requestFormReset=function(l){n.d.r(l)},ts.unstable_batchedUpdates=function(l,c){return l(c)},ts.useFormState=function(l,c,h){return a.H.useFormState(l,c,h)},ts.useFormStatus=function(){return a.H.useHostTransitionStatus()},ts.version="19.1.0",ts}var p4;function Ak(){if(p4)return Cw.exports;p4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Cw.exports=jY(),Cw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m4;function zY(){if(m4)return Og;m4=1;var t=UY(),e=sE(),i=Ak();function n(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)f+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function s(u){var f=u,_=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(_=f.return),u=f.return;while(u)}return f.tag===3?_:null}function a(u){if(u.tag===13){var f=u.memoizedState;if(f===null&&(u=u.alternate,u!==null&&(f=u.memoizedState)),f!==null)return f.dehydrated}return null}function o(u){if(s(u)!==u)throw Error(n(188))}function l(u){var f=u.alternate;if(!f){if(f=s(u),f===null)throw Error(n(188));return f!==u?null:u}for(var _=u,w=f;;){var x=_.return;if(x===null)break;var U=x.alternate;if(U===null){if(w=x.return,w!==null){_=w;continue}break}if(x.child===U.child){for(U=x.child;U;){if(U===_)return o(x),u;if(U===w)return o(x),f;U=U.sibling}throw Error(n(188))}if(_.return!==w.return)_=x,w=U;else{for(var tt=!1,at=x.child;at;){if(at===_){tt=!0,_=x,w=U;break}if(at===w){tt=!0,w=x,_=U;break}at=at.sibling}if(!tt){for(at=U.child;at;){if(at===_){tt=!0,_=U,w=x;break}if(at===w){tt=!0,w=U,_=x;break}at=at.sibling}if(!tt)throw Error(n(189))}}if(_.alternate!==w)throw Error(n(190))}if(_.tag!==3)throw Error(n(188));return _.stateNode.current===_?u:f}function c(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=c(u),f!==null)return f;u=u.sibling}return null}var h=Object.assign,A=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),B=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),nt=Symbol.iterator;function X(u){return u===null||typeof u!="object"?null:(u=nt&&u[nt]||u["@@iterator"],typeof u=="function"?u:null)}var bt=Symbol.for("react.client.reference");function Tt(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===bt?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case S:return"Fragment";case I:return"Profiler";case M:return"StrictMode";case j:return"Suspense";case N:return"SuspenseList";case V:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case b:return"Portal";case B:return(u.displayName||"Context")+".Provider";case D:return(u._context.displayName||"Context")+".Consumer";case P:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case F:return f=u.displayName||null,f!==null?f:Tt(u.type)||"Memo";case $:f=u._payload,u=u._init;try{return Tt(u(f))}catch{}}return null}var Ot=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},lt=[],Q=-1;function mt(u){return{current:u}}function wt(u){0>Q||(u.current=lt[Q],lt[Q]=null,Q--)}function Dt(u,f){Q++,lt[Q]=u.current,u.current=f}var te=mt(null),ie=mt(null),ft=mt(null),Ht=mt(null);function Nt(u,f){switch(Dt(ft,f),Dt(ie,u),Dt(te,null),f.nodeType){case 9:case 11:u=(u=f.documentElement)&&(u=u.namespaceURI)?UD(u):0;break;default:if(u=f.tagName,f=f.namespaceURI)f=UD(f),u=kD(f,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}wt(te),Dt(te,u)}function he(){wt(te),wt(ie),wt(ft)}function me(u){u.memoizedState!==null&&Dt(Ht,u);var f=te.current,_=kD(f,u.type);f!==_&&(Dt(ie,u),Dt(te,_))}function Me(u){ie.current===u&&(wt(te),wt(ie)),Ht.current===u&&(wt(Ht),Sg._currentValue=G)}var pe=Object.prototype.hasOwnProperty,Oe=t.unstable_scheduleCallback,Ye=t.unstable_cancelCallback,Ee=t.unstable_shouldYield,qe=t.unstable_requestPaint,dt=t.unstable_now,Y=t.unstable_getCurrentPriorityLevel,K=t.unstable_ImmediatePriority,Ct=t.unstable_UserBlockingPriority,ee=t.unstable_NormalPriority,Ft=t.unstable_LowPriority,J=t.unstable_IdlePriority,ut=t.log,vt=t.unstable_setDisableYieldValue,Mt=null,re=null;function be(u){if(typeof ut=="function"&&vt(u),re&&typeof re.setStrictMode=="function")try{re.setStrictMode(Mt,u)}catch{}}var Be=Math.clz32?Math.clz32:Xt,q=Math.log,Bt=Math.LN2;function Xt(u){return u>>>=0,u===0?32:31-(q(u)/Bt|0)|0}var ke=256,qi=4194304;function Tn(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function xn(u,f,_){var w=u.pendingLanes;if(w===0)return 0;var x=0,U=u.suspendedLanes,tt=u.pingedLanes;u=u.warmLanes;var at=w&134217727;return at!==0?(w=at&~U,w!==0?x=Tn(w):(tt&=at,tt!==0?x=Tn(tt):_||(_=at&~u,_!==0&&(x=Tn(_))))):(at=w&~U,at!==0?x=Tn(at):tt!==0?x=Tn(tt):_||(_=w&~u,_!==0&&(x=Tn(_)))),x===0?0:f!==0&&f!==x&&(f&U)===0&&(U=x&-x,_=f&-f,U>=_||U===32&&(_&4194048)!==0)?f:x}function os(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function Ku(u,f){switch(u){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function de(){var u=ke;return ke<<=1,(ke&4194048)===0&&(ke=256),u}function Nc(){var u=qi;return qi<<=1,(qi&62914560)===0&&(qi=4194304),u}function yt(u){for(var f=[],_=0;31>_;_++)f.push(u);return f}function ct(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function Mi(u,f,_,w,x,U){var tt=u.pendingLanes;u.pendingLanes=_,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=_,u.entangledLanes&=_,u.errorRecoveryDisabledLanes&=_,u.shellSuspendCounter=0;var at=u.entanglements,St=u.expirationTimes,Kt=u.hiddenUpdates;for(_=tt&~_;0<_;){var se=31-Be(_),oe=1<<se;at[se]=0,St[se]=-1;var Zt=Kt[se];if(Zt!==null)for(Kt[se]=null,se=0;se<Zt.length;se++){var Jt=Zt[se];Jt!==null&&(Jt.lane&=-536870913)}_&=~oe}w!==0&&yn(u,w,0),U!==0&&x===0&&u.tag!==0&&(u.suspendedLanes|=U&~(tt&~f))}function yn(u,f,_){u.pendingLanes|=f,u.suspendedLanes&=~f;var w=31-Be(f);u.entangledLanes|=f,u.entanglements[w]=u.entanglements[w]|1073741824|_&4194090}function On(u,f){var _=u.entangledLanes|=f;for(u=u.entanglements;_;){var w=31-Be(_),x=1<<w;x&f|u[w]&f&&(u[w]|=f),_&=~x}}function Sr(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Kr(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function $s(){var u=k.p;return u!==0?u:(u=window.event,u===void 0?32:r4(u.type))}function T0(u,f){var _=k.p;try{return k.p=u,f()}finally{k.p=_}}var ls=Math.random().toString(36).slice(2),Gt="__reactFiber$"+ls,ne="__reactProps$"+ls,Ie="__reactContainer$"+ls,ce="__reactEvents$"+ls,g="__reactListeners$"+ls,et="__reactHandles$"+ls,Yi="__reactResources$"+ls,Qi="__reactMarker$"+ls;function Gn(u){delete u[Gt],delete u[ne],delete u[ce],delete u[g],delete u[et]}function bi(u){var f=u[Gt];if(f)return f;for(var _=u.parentNode;_;){if(f=_[Ie]||_[Gt]){if(_=f.alternate,f.child!==null||_!==null&&_.child!==null)for(u=$D(u);u!==null;){if(_=u[Gt])return _;u=$D(u)}return f}u=_,_=u.parentNode}return null}function ki(u){if(u=u[Gt]||u[Ie]){var f=u.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return u}return null}function Ts(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u.stateNode;throw Error(n(33))}function $i(u){var f=u[Yi];return f||(f=u[Yi]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Xe(u){u[Qi]=!0}var cs=new Set,Zu={};function _l(u,f){Lo(u,f),Lo(u+"Capture",f)}function Lo(u,f){for(Zu[u]=f,u=0;u<f.length;u++)cs.add(f[u])}var Ss=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bl={},Ws={};function S0(u){return pe.call(Ws,u)?!0:pe.call(bl,u)?!1:Ss.test(u)?Ws[u]=!0:(bl[u]=!0,!1)}function Gf(u,f,_){if(S0(f))if(_===null)u.removeAttribute(f);else{switch(typeof _){case"undefined":case"function":case"symbol":u.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){u.removeAttribute(f);return}}u.setAttribute(f,""+_)}}function ws(u,f,_){if(_===null)u.removeAttribute(f);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(f);return}u.setAttribute(f,""+_)}}function Ze(u,f,_,w){if(w===null)u.removeAttribute(_);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(_);return}u.setAttributeNS(f,_,""+w)}}var ot,ti;function vl(u){if(ot===void 0)try{throw Error()}catch(_){var f=_.stack.trim().match(/\n( *(at )?)/);ot=f&&f[1]||"",ti=-1<_.stack.indexOf(`
    at`)?" (<anonymous>)":-1<_.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+u+ti}var w0=!1;function M0(u,f){if(!u||w0)return"";w0=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(Jt){var Zt=Jt}Reflect.construct(u,[],oe)}else{try{oe.call()}catch(Jt){Zt=Jt}u.call(oe.prototype)}}else{try{throw Error()}catch(Jt){Zt=Jt}(oe=u())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(Jt){if(Jt&&Zt&&typeof Jt.stack=="string")return[Jt.stack,Zt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=w.DetermineComponentFrameRoot(),tt=U[0],at=U[1];if(tt&&at){var St=tt.split(`
`),Kt=at.split(`
`);for(x=w=0;w<St.length&&!St[w].includes("DetermineComponentFrameRoot");)w++;for(;x<Kt.length&&!Kt[x].includes("DetermineComponentFrameRoot");)x++;if(w===St.length||x===Kt.length)for(w=St.length-1,x=Kt.length-1;1<=w&&0<=x&&St[w]!==Kt[x];)x--;for(;1<=w&&0<=x;w--,x--)if(St[w]!==Kt[x]){if(w!==1||x!==1)do if(w--,x--,0>x||St[w]!==Kt[x]){var se=`
`+St[w].replace(" at new "," at ");return u.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",u.displayName)),se}while(1<=w&&0<=x);break}}}finally{w0=!1,Error.prepareStackTrace=_}return(_=u?u.displayName||u.name:"")?vl(_):""}function qT(u){switch(u.tag){case 26:case 27:case 5:return vl(u.type);case 16:return vl("Lazy");case 13:return vl("Suspense");case 19:return vl("SuspenseList");case 0:case 15:return M0(u.type,!1);case 11:return M0(u.type.render,!1);case 1:return M0(u.type,!0);case 31:return vl("Activity");default:return""}}function A1(u){try{var f="";do f+=qT(u),u=u.return;while(u);return f}catch(_){return`
Error generating stack: `+_.message+`
`+_.stack}}function it(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function g1(u){var f=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function YT(u){var f=g1(u)?"checked":"value",_=Object.getOwnPropertyDescriptor(u.constructor.prototype,f),w=""+u[f];if(!u.hasOwnProperty(f)&&typeof _<"u"&&typeof _.get=="function"&&typeof _.set=="function"){var x=_.get,U=_.set;return Object.defineProperty(u,f,{configurable:!0,get:function(){return x.call(this)},set:function(tt){w=""+tt,U.call(this,tt)}}),Object.defineProperty(u,f,{enumerable:_.enumerable}),{getValue:function(){return w},setValue:function(tt){w=""+tt},stopTracking:function(){u._valueTracker=null,delete u[f]}}}}function Xf(u){u._valueTracker||(u._valueTracker=YT(u))}function y1(u){if(!u)return!1;var f=u._valueTracker;if(!f)return!0;var _=f.getValue(),w="";return u&&(w=g1(u)?u.checked?"true":"false":u.value),u=w,u!==_?(f.setValue(u),!0):!1}function Qf(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var GT=/[\n"\\]/g;function us(u){return u.replace(GT,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Kf(u,f,_,w,x,U,tt,at){u.name="",tt!=null&&typeof tt!="function"&&typeof tt!="symbol"&&typeof tt!="boolean"?u.type=tt:u.removeAttribute("type"),f!=null?tt==="number"?(f===0&&u.value===""||u.value!=f)&&(u.value=""+it(f)):u.value!==""+it(f)&&(u.value=""+it(f)):tt!=="submit"&&tt!=="reset"||u.removeAttribute("value"),f!=null?Hs(u,tt,it(f)):_!=null?Hs(u,tt,it(_)):w!=null&&u.removeAttribute("value"),x==null&&U!=null&&(u.defaultChecked=!!U),x!=null&&(u.checked=x&&typeof x!="function"&&typeof x!="symbol"),at!=null&&typeof at!="function"&&typeof at!="symbol"&&typeof at!="boolean"?u.name=""+it(at):u.removeAttribute("name")}function I0(u,f,_,w,x,U,tt,at){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(u.type=U),f!=null||_!=null){if(!(U!=="submit"&&U!=="reset"||f!=null))return;_=_!=null?""+it(_):"",f=f!=null?""+it(f):_,at||f===u.value||(u.value=f),u.defaultValue=f}w=w??x,w=typeof w!="function"&&typeof w!="symbol"&&!!w,u.checked=at?u.checked:!!w,u.defaultChecked=!!w,tt!=null&&typeof tt!="function"&&typeof tt!="symbol"&&typeof tt!="boolean"&&(u.name=tt)}function Hs(u,f,_){f==="number"&&Qf(u.ownerDocument)===u||u.defaultValue===""+_||(u.defaultValue=""+_)}function Rn(u,f,_,w){if(u=u.options,f){f={};for(var x=0;x<_.length;x++)f["$"+_[x]]=!0;for(_=0;_<u.length;_++)x=f.hasOwnProperty("$"+u[_].value),u[_].selected!==x&&(u[_].selected=x),x&&w&&(u[_].defaultSelected=!0)}else{for(_=""+it(_),f=null,x=0;x<u.length;x++){if(u[x].value===_){u[x].selected=!0,w&&(u[x].defaultSelected=!0);return}f!==null||u[x].disabled||(f=u[x])}f!==null&&(f.selected=!0)}}function Zf(u,f,_){if(f!=null&&(f=""+it(f),f!==u.value&&(u.value=f),_==null)){u.defaultValue!==f&&(u.defaultValue=f);return}u.defaultValue=_!=null?""+it(_):""}function p1(u,f,_,w){if(f==null){if(w!=null){if(_!=null)throw Error(n(92));if(Ot(w)){if(1<w.length)throw Error(n(93));w=w[0]}_=w}_==null&&(_=""),f=_}_=it(f),u.defaultValue=_,w=u.textContent,w===_&&w!==""&&w!==null&&(u.value=w)}function Fc(u,f){if(f){var _=u.firstChild;if(_&&_===u.lastChild&&_.nodeType===3){_.nodeValue=f;return}}u.textContent=f}var m1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _1(u,f,_){var w=f.indexOf("--")===0;_==null||typeof _=="boolean"||_===""?w?u.setProperty(f,""):f==="float"?u.cssFloat="":u[f]="":w?u.setProperty(f,_):typeof _!="number"||_===0||m1.has(f)?f==="float"?u.cssFloat=_:u[f]=(""+_).trim():u[f]=_+"px"}function b1(u,f,_){if(f!=null&&typeof f!="object")throw Error(n(62));if(u=u.style,_!=null){for(var w in _)!_.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?u.setProperty(w,""):w==="float"?u.cssFloat="":u[w]="");for(var x in f)w=f[x],f.hasOwnProperty(x)&&_[x]!==w&&_1(u,x,w)}else for(var U in f)f.hasOwnProperty(U)&&_1(u,U,f[U])}function E0(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sn=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),B0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ju(u){return B0.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var O0=null;function R0(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Lc=null,Tl=null;function Jf(u){var f=ki(u);if(f&&(u=f.stateNode)){var _=u[ne]||null;t:switch(u=f.stateNode,f.type){case"input":if(Kf(u,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name),f=_.name,_.type==="radio"&&f!=null){for(_=u;_.parentNode;)_=_.parentNode;for(_=_.querySelectorAll('input[name="'+us(""+f)+'"][type="radio"]'),f=0;f<_.length;f++){var w=_[f];if(w!==u&&w.form===u.form){var x=w[ne]||null;if(!x)throw Error(n(90));Kf(w,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(f=0;f<_.length;f++)w=_[f],w.form===u.form&&y1(w)}break t;case"textarea":Zf(u,_.value,_.defaultValue);break t;case"select":f=_.value,f!=null&&Rn(u,!!_.multiple,f,!1)}}}var th=!1;function v1(u,f,_){if(th)return u(f,_);th=!0;try{var w=u(f);return w}finally{if(th=!1,(Lc!==null||Tl!==null)&&(hb(),Lc&&(f=Lc,u=Tl,Tl=Lc=null,Jf(f),u)))for(f=0;f<u.length;f++)Jf(u[f])}}function eh(u,f){var _=u.stateNode;if(_===null)return null;var w=_[ne]||null;if(w===null)return null;_=w[f];t:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(u=u.type,w=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!w;break t;default:u=!1}if(u)return null;if(_&&typeof _!="function")throw Error(n(231,f,typeof _));return _}var Ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),td=!1;if(Ja)try{var ih={};Object.defineProperty(ih,"passive",{get:function(){td=!0}}),window.addEventListener("test",ih,ih),window.removeEventListener("test",ih,ih)}catch{td=!1}var Ia=null,nh=null,ed=null;function D0(){if(ed)return ed;var u,f=nh,_=f.length,w,x="value"in Ia?Ia.value:Ia.textContent,U=x.length;for(u=0;u<_&&f[u]===x[u];u++);var tt=_-u;for(w=1;w<=tt&&f[_-w]===x[U-w];w++);return ed=x.slice(u,1<w?1-w:void 0)}function rh(u){var f=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&f===13&&(u=13)):u=f,u===10&&(u=13),32<=u||u===13?u:0}function sh(){return!0}function T1(){return!1}function Zr(u){function f(_,w,x,U,tt){this._reactName=_,this._targetInst=x,this.type=w,this.nativeEvent=U,this.target=tt,this.currentTarget=null;for(var at in u)u.hasOwnProperty(at)&&(_=u[at],this[at]=_?_(U):U[at]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?sh:T1,this.isPropagationStopped=T1,this}return h(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var _=this.nativeEvent;_&&(_.preventDefault?_.preventDefault():typeof _.returnValue!="unknown"&&(_.returnValue=!1),this.isDefaultPrevented=sh)},stopPropagation:function(){var _=this.nativeEvent;_&&(_.stopPropagation?_.stopPropagation():typeof _.cancelBubble!="unknown"&&(_.cancelBubble=!0),this.isPropagationStopped=sh)},persist:function(){},isPersistent:sh}),f}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},id=Zr(Sl),Xn=h({},Sl,{view:0,detail:0}),wl=Zr(Xn),yr,ah,Uc,Ml=h({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P0,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Uc&&(Uc&&u.type==="mousemove"?(yr=u.screenX-Uc.screenX,ah=u.screenY-Uc.screenY):ah=yr=0,Uc=u),yr)},movementY:function(u){return"movementY"in u?u.movementY:ah}}),S1=Zr(Ml),XT=h({},Ml,{dataTransfer:0}),QT=Zr(XT),w1=h({},Xn,{relatedTarget:0}),kc=Zr(w1),Il=h({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),M1=Zr(Il),I1=h({},Sl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),nd=Zr(I1),El=h({},Sl,{data:0}),to=Zr(El),E1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},C0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KT(u){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(u):(u=C0[u])?!!f[u]:!1}function P0(){return KT}var O1=h({},Xn,{key:function(u){if(u.key){var f=E1[u.key]||u.key;if(f!=="Unidentified")return f}return u.type==="keypress"?(u=rh(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?B1[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P0,charCode:function(u){return u.type==="keypress"?rh(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?rh(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),ZT=Zr(O1),JT=h({},Ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R1=Zr(JT),tS=h({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P0}),eS=Zr(tS),iS=h({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),nS=Zr(iS),rS=h({},Ml,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),rd=Zr(rS),sS=h({},Sl,{newState:0,oldState:0}),aS=Zr(sS),oS=[9,13,27,32],Bl=Ja&&"CompositionEvent"in window,oh=null;Ja&&"documentMode"in document&&(oh=document.documentMode);var x0=Ja&&"TextEvent"in window&&!oh,N0=Ja&&(!Bl||oh&&8<oh&&11>=oh),Ol=" ",D1=!1;function sd(u,f){switch(u){case"keyup":return oS.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F0(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var jc=!1;function C1(u,f){switch(u){case"compositionend":return F0(f);case"keypress":return f.which!==32?null:(D1=!0,Ol);case"textInput":return u=f.data,u===Ol&&D1?null:u;default:return null}}function L0(u,f){if(jc)return u==="compositionend"||!Bl&&sd(u,f)?(u=D0(),ed=nh=Ia=null,jc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return N0&&f.locale!=="ko"?null:f.data;default:return null}}var U0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ad(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f==="input"?!!U0[u.type]:f==="textarea"}function zc(u,f,_,w){Lc?Tl?Tl.push(w):Tl=[w]:Lc=w,f=pb(f,"onChange"),0<f.length&&(_=new id("onChange","change",null,_,w),u.push({event:_,listeners:f}))}var tn=null,lh=null;function P1(u){PD(u,0)}function ch(u){var f=Ts(u);if(y1(f))return u}function x1(u,f){if(u==="change")return f}var N1=!1;if(Ja){var k0;if(Ja){var j0="oninput"in document;if(!j0){var Pr=document.createElement("div");Pr.setAttribute("oninput","return;"),j0=typeof Pr.oninput=="function"}k0=j0}else k0=!1;N1=k0&&(!document.documentMode||9<document.documentMode)}function od(){tn&&(tn.detachEvent("onpropertychange",Uo),lh=tn=null)}function Uo(u){if(u.propertyName==="value"&&ch(lh)){var f=[];zc(f,lh,u,R0(u)),v1(P1,f)}}function lS(u,f,_){u==="focusin"?(od(),tn=f,lh=_,tn.attachEvent("onpropertychange",Uo)):u==="focusout"&&od()}function z0(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return ch(lh)}function cS(u,f){if(u==="click")return ch(f)}function Ms(u,f){if(u==="input"||u==="change")return ch(f)}function V0(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}var xr=typeof Object.is=="function"?Object.is:V0;function Ea(u,f){if(xr(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var _=Object.keys(u),w=Object.keys(f);if(_.length!==w.length)return!1;for(w=0;w<_.length;w++){var x=_[w];if(!pe.call(f,x)||!xr(u[x],f[x]))return!1}return!0}function ko(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function Rl(u,f){var _=ko(u);u=0;for(var w;_;){if(_.nodeType===3){if(w=u+_.textContent.length,u<=f&&w>=f)return{node:_,offset:f-u};u=w}t:{for(;_;){if(_.nextSibling){_=_.nextSibling;break t}_=_.parentNode}_=void 0}_=ko(_)}}function F1(u,f){return u&&f?u===f?!0:u&&u.nodeType===3?!1:f&&f.nodeType===3?F1(u,f.parentNode):"contains"in u?u.contains(f):u.compareDocumentPosition?!!(u.compareDocumentPosition(f)&16):!1:!1}function $0(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var f=Qf(u.document);f instanceof u.HTMLIFrameElement;){try{var _=typeof f.contentWindow.location.href=="string"}catch{_=!1}if(_)u=f.contentWindow;else break;f=Qf(u.document)}return f}function W0(u){var f=u&&u.nodeName&&u.nodeName.toLowerCase();return f&&(f==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||f==="textarea"||u.contentEditable==="true")}var H0=Ja&&"documentMode"in document&&11>=document.documentMode,Vc=null,q0=null,Dl=null,ld=!1;function cd(u,f,_){var w=_.window===_?_.document:_.nodeType===9?_:_.ownerDocument;ld||Vc==null||Vc!==Qf(w)||(w=Vc,"selectionStart"in w&&W0(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Dl&&Ea(Dl,w)||(Dl=w,w=pb(q0,"onSelect"),0<w.length&&(f=new id("onSelect","select",null,f,_),u.push({event:f,listeners:w}),f.target=Vc)))}function qs(u,f){var _={};return _[u.toLowerCase()]=f.toLowerCase(),_["Webkit"+u]="webkit"+f,_["Moz"+u]="moz"+f,_}var Ys={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Nr={},L1={};Ja&&(L1=document.createElement("div").style,"AnimationEvent"in window||(delete Ys.animationend.animation,delete Ys.animationiteration.animation,delete Ys.animationstart.animation),"TransitionEvent"in window||delete Ys.transitionend.transition);function Gs(u){if(Nr[u])return Nr[u];if(!Ys[u])return u;var f=Ys[u],_;for(_ in f)if(f.hasOwnProperty(_)&&_ in L1)return Nr[u]=f[_];return u}var U1=Gs("animationend"),k1=Gs("animationiteration"),j1=Gs("animationstart"),z1=Gs("transitionrun"),uS=Gs("transitionstart"),hS=Gs("transitioncancel"),V1=Gs("transitionend"),ud=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function hs(u,f){ud.set(u,f),_l(f,[u])}var $1=new WeakMap;function Is(u,f){if(typeof u=="object"&&u!==null){var _=$1.get(u);return _!==void 0?_:(f={value:u,source:f,stack:A1(f)},$1.set(u,f),f)}return{value:u,source:f,stack:A1(f)}}var Es=[],$c=0,Y0=0;function fd(){for(var u=$c,f=Y0=$c=0;f<u;){var _=Es[f];Es[f++]=null;var w=Es[f];Es[f++]=null;var x=Es[f];Es[f++]=null;var U=Es[f];if(Es[f++]=null,w!==null&&x!==null){var tt=w.pending;tt===null?x.next=x:(x.next=tt.next,tt.next=x),w.pending=x}U!==0&&G0(_,x,U)}}function dd(u,f,_,w){Es[$c++]=u,Es[$c++]=f,Es[$c++]=_,Es[$c++]=w,Y0|=w,u.lanes|=w,u=u.alternate,u!==null&&(u.lanes|=w)}function Ad(u,f,_,w){return dd(u,f,_,w),Bs(u)}function Wc(u,f){return dd(u,null,null,f),Bs(u)}function G0(u,f,_){u.lanes|=_;var w=u.alternate;w!==null&&(w.lanes|=_);for(var x=!1,U=u.return;U!==null;)U.childLanes|=_,w=U.alternate,w!==null&&(w.childLanes|=_),U.tag===22&&(u=U.stateNode,u===null||u._visibility&1||(x=!0)),u=U,U=U.return;return u.tag===3?(U=u.stateNode,x&&f!==null&&(x=31-Be(_),u=U.hiddenUpdates,w=u[x],w===null?u[x]=[f]:w.push(f),f.lane=_|536870912),U):null}function Bs(u){if(50<gg)throw gg=0,KS=null,Error(n(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}var Cl={};function fS(u,f,_,w){this.tag=u,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(u,f,_,w){return new fS(u,f,_,w)}function X0(u){return u=u.prototype,!(!u||!u.isReactComponent)}function eo(u,f){var _=u.alternate;return _===null?(_=fs(u.tag,f,u.key,u.mode),_.elementType=u.elementType,_.type=u.type,_.stateNode=u.stateNode,_.alternate=u,u.alternate=_):(_.pendingProps=f,_.type=u.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=u.flags&65011712,_.childLanes=u.childLanes,_.lanes=u.lanes,_.child=u.child,_.memoizedProps=u.memoizedProps,_.memoizedState=u.memoizedState,_.updateQueue=u.updateQueue,f=u.dependencies,_.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},_.sibling=u.sibling,_.index=u.index,_.ref=u.ref,_.refCleanup=u.refCleanup,_}function W1(u,f){u.flags&=65011714;var _=u.alternate;return _===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=_.childLanes,u.lanes=_.lanes,u.child=_.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=_.memoizedProps,u.memoizedState=_.memoizedState,u.updateQueue=_.updateQueue,u.type=_.type,f=_.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function Xs(u,f,_,w,x,U){var tt=0;if(w=u,typeof u=="function")X0(u)&&(tt=1);else if(typeof u=="string")tt=bY(u,_,te.current)?26:u==="html"||u==="head"||u==="body"?27:5;else t:switch(u){case V:return u=fs(31,_,f,x),u.elementType=V,u.lanes=U,u;case S:return io(_.children,x,U,f);case M:tt=8,x|=24;break;case I:return u=fs(12,_,f,x|2),u.elementType=I,u.lanes=U,u;case j:return u=fs(13,_,f,x),u.elementType=j,u.lanes=U,u;case N:return u=fs(19,_,f,x),u.elementType=N,u.lanes=U,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case O:case B:tt=10;break t;case D:tt=9;break t;case P:tt=11;break t;case F:tt=14;break t;case $:tt=16,w=null;break t}tt=29,_=Error(n(130,u===null?"null":typeof u,"")),w=null}return f=fs(tt,_,f,x),f.elementType=u,f.type=w,f.lanes=U,f}function io(u,f,_,w){return u=fs(7,u,w,f),u.lanes=_,u}function Q0(u,f,_){return u=fs(6,u,null,f),u.lanes=_,u}function Hc(u,f,_){return f=fs(4,u.children!==null?u.children:[],u.key,f),f.lanes=_,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}var Pl=[],qc=0,gd=null,jo=0,ds=[],wr=0,no=null,Qs=1,Ba="";function Oa(u,f){Pl[qc++]=jo,Pl[qc++]=gd,gd=u,jo=f}function K0(u,f,_){ds[wr++]=Qs,ds[wr++]=Ba,ds[wr++]=no,no=u;var w=Qs;u=Ba;var x=32-Be(w)-1;w&=~(1<<x),_+=1;var U=32-Be(f)+x;if(30<U){var tt=x-x%5;U=(w&(1<<tt)-1).toString(32),w>>=tt,x-=tt,Qs=1<<32-Be(f)+x|_<<x|w,Ba=U+u}else Qs=1<<U|_<<x|w,Ba=u}function Z0(u){u.return!==null&&(Oa(u,1),K0(u,1,0))}function J0(u){for(;u===gd;)gd=Pl[--qc],Pl[qc]=null,jo=Pl[--qc],Pl[qc]=null;for(;u===no;)no=ds[--wr],ds[wr]=null,Ba=ds[--wr],ds[wr]=null,Qs=ds[--wr],ds[wr]=null}var Fr=null,Nn=null,rn=!1,xl=null,Ra=!1,tg=Error(n(519));function Nl(u){var f=Error(n(418,""));throw ro(Is(f,u)),tg}function eg(u){var f=u.stateNode,_=u.type,w=u.memoizedProps;switch(f[Gt]=u,f[ne]=w,_){case"dialog":Xi("cancel",f),Xi("close",f);break;case"iframe":case"object":case"embed":Xi("load",f);break;case"video":case"audio":for(_=0;_<pg.length;_++)Xi(pg[_],f);break;case"source":Xi("error",f);break;case"img":case"image":case"link":Xi("error",f),Xi("load",f);break;case"details":Xi("toggle",f);break;case"input":Xi("invalid",f),I0(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),Xf(f);break;case"select":Xi("invalid",f);break;case"textarea":Xi("invalid",f),p1(f,w.value,w.defaultValue,w.children),Xf(f)}_=w.children,typeof _!="string"&&typeof _!="number"&&typeof _!="bigint"||f.textContent===""+_||w.suppressHydrationWarning===!0||LD(f.textContent,_)?(w.popover!=null&&(Xi("beforetoggle",f),Xi("toggle",f)),w.onScroll!=null&&Xi("scroll",f),w.onScrollEnd!=null&&Xi("scrollend",f),w.onClick!=null&&(f.onclick=mb),f=!0):f=!1,f||Nl(u)}function ig(u){for(Fr=u.return;Fr;)switch(Fr.tag){case 5:case 13:Ra=!1;return;case 27:case 3:Ra=!0;return;default:Fr=Fr.return}}function In(u){if(u!==Fr)return!1;if(!rn)return ig(u),rn=!0,!1;var f=u.tag,_;if((_=f!==3&&f!==27)&&((_=f===5)&&(_=u.type,_=!(_!=="form"&&_!=="button")||dw(u.type,u.memoizedProps)),_=!_),_&&Nn&&Nl(u),ig(u),f===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(n(317));t:{for(u=u.nextSibling,f=0;u;){if(u.nodeType===8)if(_=u.data,_==="/$"){if(f===0){Nn=co(u.nextSibling);break t}f--}else _!=="$"&&_!=="$!"&&_!=="$?"||f++;u=u.nextSibling}Nn=null}}else f===27?(f=Nn,ou(u.type)?(u=pw,pw=null,Nn=u):Nn=f):Nn=Fr?co(u.stateNode.nextSibling):null;return!0}function uh(){Nn=Fr=null,rn=!1}function H1(){var u=xl;return u!==null&&(Cs===null?Cs=u:Cs.push.apply(Cs,u),xl=null),u}function ro(u){xl===null?xl=[u]:xl.push(u)}var Jr=mt(null),Fl=null,so=null;function zo(u,f,_){Dt(Jr,f._currentValue),f._currentValue=_}function Da(u){u._currentValue=Jr.current,wt(Jr)}function yd(u,f,_){for(;u!==null;){var w=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),u===_)break;u=u.return}}function pd(u,f,_,w){var x=u.child;for(x!==null&&(x.return=u);x!==null;){var U=x.dependencies;if(U!==null){var tt=x.child;U=U.firstContext;t:for(;U!==null;){var at=U;U=x;for(var St=0;St<f.length;St++)if(at.context===f[St]){U.lanes|=_,at=U.alternate,at!==null&&(at.lanes|=_),yd(U.return,_,u),w||(tt=null);break t}U=at.next}}else if(x.tag===18){if(tt=x.return,tt===null)throw Error(n(341));tt.lanes|=_,U=tt.alternate,U!==null&&(U.lanes|=_),yd(tt,_,u),tt=null}else tt=x.child;if(tt!==null)tt.return=x;else for(tt=x;tt!==null;){if(tt===u){tt=null;break}if(x=tt.sibling,x!==null){x.return=tt.return,tt=x;break}tt=tt.return}x=tt}}function Yc(u,f,_,w){u=null;for(var x=f,U=!1;x!==null;){if(!U){if((x.flags&524288)!==0)U=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var tt=x.alternate;if(tt===null)throw Error(n(387));if(tt=tt.memoizedProps,tt!==null){var at=x.type;xr(x.pendingProps.value,tt.value)||(u!==null?u.push(at):u=[at])}}else if(x===Ht.current){if(tt=x.alternate,tt===null)throw Error(n(387));tt.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(u!==null?u.push(Sg):u=[Sg])}x=x.return}u!==null&&pd(f,u,_,w),f.flags|=262144}function md(u){for(u=u.firstContext;u!==null;){if(!xr(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Ll(u){Fl=u,so=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Mr(u){return ao(Fl,u)}function _d(u,f){return Fl===null&&Ll(u),ao(u,f)}function ao(u,f){var _=f._currentValue;if(f={context:f,memoizedValue:_,next:null},so===null){if(u===null)throw Error(n(308));so=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else so=so.next=f;return _}var Ca=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(_,w){u.push(w)}};this.abort=function(){f.aborted=!0,u.forEach(function(_){return _()})}},Je=t.unstable_scheduleCallback,Os=t.unstable_NormalPriority,Pe={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function rr(){return{controller:new Ca,data:new Map,refCount:0}}function Gc(u){u.refCount--,u.refCount===0&&Je(Os,function(){u.controller.abort()})}var Ul=null,Pa=0,Xc=0,Un=null;function Qc(u,f){if(Ul===null){var _=Ul=[];Pa=0,Xc=rw(),Un={status:"pending",value:void 0,then:function(w){_.push(w)}}}return Pa++,f.then(kl,kl),f}function kl(){if(--Pa===0&&Ul!==null){Un!==null&&(Un.status="fulfilled");var u=Ul;Ul=null,Xc=0,Un=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function q1(u,f){var _=[],w={status:"pending",value:null,reason:null,then:function(x){_.push(x)}};return u.then(function(){w.status="fulfilled",w.value=f;for(var x=0;x<_.length;x++)(0,_[x])(f)},function(x){for(w.status="rejected",w.reason=x,x=0;x<_.length;x++)(0,_[x])(void 0)}),w}var ue=H.S;H.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Qc(u,f),ue!==null&&ue(u,f)};var _e=mt(null);function bd(){var u=_e.current;return u!==null?u:En.pooledCache}function hh(u,f){f===null?Dt(_e,_e.current):Dt(_e,f.pool)}function fh(){var u=bd();return u===null?null:{parent:Pe._currentValue,pool:u}}var Vo=Error(n(460)),jl=Error(n(474)),xa=Error(n(542)),vd={then:function(){}};function oo(u){return u=u.status,u==="fulfilled"||u==="rejected"}function d(){}function y(u,f,_){switch(_=u[_],_===void 0?u.push(f):_!==f&&(f.then(d,d),f=_),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,T(u),u;default:if(typeof f.status=="string")f.then(d,d);else{if(u=En,u!==null&&100<u.shellSuspendCounter)throw Error(n(482));u=f,u.status="pending",u.then(function(w){if(f.status==="pending"){var x=f;x.status="fulfilled",x.value=w}},function(w){if(f.status==="pending"){var x=f;x.status="rejected",x.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,T(u),u}throw p=f,Vo}}var p=null;function v(){if(p===null)throw Error(n(459));var u=p;return p=null,u}function T(u){if(u===Vo||u===xa)throw Error(n(483))}var E=!1;function R(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function C(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function L(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function z(u,f,_){var w=u.updateQueue;if(w===null)return null;if(w=w.shared,(An&2)!==0){var x=w.pending;return x===null?f.next=f:(f.next=x.next,x.next=f),w.pending=f,f=Bs(u),G0(u,null,_),f}return dd(u,w,f,_),Bs(u)}function W(u,f,_){if(f=f.updateQueue,f!==null&&(f=f.shared,(_&4194048)!==0)){var w=f.lanes;w&=u.pendingLanes,_|=w,f.lanes=_,On(u,_)}}function st(u,f){var _=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,_===w)){var x=null,U=null;if(_=_.firstBaseUpdate,_!==null){do{var tt={lane:_.lane,tag:_.tag,payload:_.payload,callback:null,next:null};U===null?x=U=tt:U=U.next=tt,_=_.next}while(_!==null);U===null?x=U=f:U=U.next=f}else x=U=f;_={baseState:w.baseState,firstBaseUpdate:x,lastBaseUpdate:U,shared:w.shared,callbacks:w.callbacks},u.updateQueue=_;return}u=_.lastBaseUpdate,u===null?_.firstBaseUpdate=f:u.next=f,_.lastBaseUpdate=f}var pt=!1;function At(){if(pt){var u=Un;if(u!==null)throw u}}function gt(u,f,_,w){pt=!1;var x=u.updateQueue;E=!1;var U=x.firstBaseUpdate,tt=x.lastBaseUpdate,at=x.shared.pending;if(at!==null){x.shared.pending=null;var St=at,Kt=St.next;St.next=null,tt===null?U=Kt:tt.next=Kt,tt=St;var se=u.alternate;se!==null&&(se=se.updateQueue,at=se.lastBaseUpdate,at!==tt&&(at===null?se.firstBaseUpdate=Kt:at.next=Kt,se.lastBaseUpdate=St))}if(U!==null){var oe=x.baseState;tt=0,se=Kt=St=null,at=U;do{var Zt=at.lane&-536870913,Jt=Zt!==at.lane;if(Jt?(en&Zt)===Zt:(w&Zt)===Zt){Zt!==0&&Zt===Xc&&(pt=!0),se!==null&&(se=se.next={lane:0,tag:at.tag,payload:at.payload,callback:null,next:null});t:{var wi=u,ii=at;Zt=f;var mn=_;switch(ii.tag){case 1:if(wi=ii.payload,typeof wi=="function"){oe=wi.call(mn,oe,Zt);break t}oe=wi;break t;case 3:wi.flags=wi.flags&-65537|128;case 0:if(wi=ii.payload,Zt=typeof wi=="function"?wi.call(mn,oe,Zt):wi,Zt==null)break t;oe=h({},oe,Zt);break t;case 2:E=!0}}Zt=at.callback,Zt!==null&&(u.flags|=64,Jt&&(u.flags|=8192),Jt=x.callbacks,Jt===null?x.callbacks=[Zt]:Jt.push(Zt))}else Jt={lane:Zt,tag:at.tag,payload:at.payload,callback:at.callback,next:null},se===null?(Kt=se=Jt,St=oe):se=se.next=Jt,tt|=Zt;if(at=at.next,at===null){if(at=x.shared.pending,at===null)break;Jt=at,at=Jt.next,Jt.next=null,x.lastBaseUpdate=Jt,x.shared.pending=null}}while(!0);se===null&&(St=oe),x.baseState=St,x.firstBaseUpdate=Kt,x.lastBaseUpdate=se,U===null&&(x.shared.lanes=0),nu|=tt,u.lanes=tt,u.memoizedState=oe}}function It(u,f){if(typeof u!="function")throw Error(n(191,u));u.call(f)}function xt(u,f){var _=u.callbacks;if(_!==null)for(u.callbacks=null,u=0;u<_.length;u++)It(_[u],f)}var Qt=mt(null),$t=mt(0);function zt(u,f){u=Yl,Dt($t,u),Dt(Qt,f),Yl=u|f.baseLanes}function Et(){Dt($t,Yl),Dt(Qt,Qt.current)}function ve(){Yl=$t.current,wt(Qt),wt($t)}var ze=0,fe=null,Ce=null,We=null,Ni=!1,Qe=!1,Ve=!1,ye=0,vi=0,Ki=null,Ii=0;function ei(){throw Error(n(321))}function pr(u,f){if(f===null)return!1;for(var _=0;_<f.length&&_<u.length;_++)if(!xr(u[_],f[_]))return!1;return!0}function Td(u,f,_,w,x,U){return ze=U,fe=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,H.H=u===null||u.memoizedState===null?pR:mR,Ve=!1,U=_(w,x),Ve=!1,Qe&&(U=FO(f,_,w,x)),NO(u),U}function NO(u){H.H=Z1;var f=Ce!==null&&Ce.next!==null;if(ze=0,We=Ce=fe=null,Ni=!1,vi=0,Ki=null,f)throw Error(n(300));u===null||Ir||(u=u.dependencies,u!==null&&md(u)&&(Ir=!0))}function FO(u,f,_,w){fe=u;var x=0;do{if(Qe&&(Ki=null),vi=0,Qe=!1,25<=x)throw Error(n(301));if(x+=1,We=Ce=null,u.updateQueue!=null){var U=u.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}H.H=Dq,U=f(_,w)}while(Qe);return U}function Mq(){var u=H.H,f=u.useState()[0];return f=typeof f.then=="function"?ng(f):f,u=u.useState()[0],(Ce!==null?Ce.memoizedState:null)!==u&&(fe.flags|=1024),f}function dS(){var u=ye!==0;return ye=0,u}function AS(u,f,_){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~_}function gS(u){if(Ni){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Ni=!1}ze=0,We=Ce=fe=null,Qe=!1,vi=ye=0,Ki=null}function Rs(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?fe.memoizedState=We=u:We=We.next=u,We}function hr(){if(Ce===null){var u=fe.alternate;u=u!==null?u.memoizedState:null}else u=Ce.next;var f=We===null?fe.memoizedState:We.next;if(f!==null)We=f,Ce=u;else{if(u===null)throw fe.alternate===null?Error(n(467)):Error(n(310));Ce=u,u={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},We===null?fe.memoizedState=We=u:We=We.next=u}return We}function yS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ng(u){var f=vi;return vi+=1,Ki===null&&(Ki=[]),u=y(Ki,u,f),f=fe,(We===null?f.memoizedState:We.next)===null&&(f=f.alternate,H.H=f===null||f.memoizedState===null?pR:mR),u}function Y1(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ng(u);if(u.$$typeof===B)return Mr(u)}throw Error(n(438,String(u)))}function pS(u){var f=null,_=fe.updateQueue;if(_!==null&&(f=_.memoCache),f==null){var w=fe.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(x){return x.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),_===null&&(_=yS(),fe.updateQueue=_),_.memoCache=f,_=f.data[f.index],_===void 0)for(_=f.data[f.index]=Array(u),w=0;w<u;w++)_[w]=Z;return f.index++,_}function zl(u,f){return typeof f=="function"?f(u):f}function G1(u){var f=hr();return mS(f,Ce,u)}function mS(u,f,_){var w=u.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=_;var x=u.baseQueue,U=w.pending;if(U!==null){if(x!==null){var tt=x.next;x.next=U.next,U.next=tt}f.baseQueue=x=U,w.pending=null}if(U=u.baseState,x===null)u.memoizedState=U;else{f=x.next;var at=tt=null,St=null,Kt=f,se=!1;do{var oe=Kt.lane&-536870913;if(oe!==Kt.lane?(en&oe)===oe:(ze&oe)===oe){var Zt=Kt.revertLane;if(Zt===0)St!==null&&(St=St.next={lane:0,revertLane:0,action:Kt.action,hasEagerState:Kt.hasEagerState,eagerState:Kt.eagerState,next:null}),oe===Xc&&(se=!0);else if((ze&Zt)===Zt){Kt=Kt.next,Zt===Xc&&(se=!0);continue}else oe={lane:0,revertLane:Kt.revertLane,action:Kt.action,hasEagerState:Kt.hasEagerState,eagerState:Kt.eagerState,next:null},St===null?(at=St=oe,tt=U):St=St.next=oe,fe.lanes|=Zt,nu|=Zt;oe=Kt.action,Ve&&_(U,oe),U=Kt.hasEagerState?Kt.eagerState:_(U,oe)}else Zt={lane:oe,revertLane:Kt.revertLane,action:Kt.action,hasEagerState:Kt.hasEagerState,eagerState:Kt.eagerState,next:null},St===null?(at=St=Zt,tt=U):St=St.next=Zt,fe.lanes|=oe,nu|=oe;Kt=Kt.next}while(Kt!==null&&Kt!==f);if(St===null?tt=U:St.next=at,!xr(U,u.memoizedState)&&(Ir=!0,se&&(_=Un,_!==null)))throw _;u.memoizedState=U,u.baseState=tt,u.baseQueue=St,w.lastRenderedState=U}return x===null&&(w.lanes=0),[u.memoizedState,w.dispatch]}function _S(u){var f=hr(),_=f.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=u;var w=_.dispatch,x=_.pending,U=f.memoizedState;if(x!==null){_.pending=null;var tt=x=x.next;do U=u(U,tt.action),tt=tt.next;while(tt!==x);xr(U,f.memoizedState)||(Ir=!0),f.memoizedState=U,f.baseQueue===null&&(f.baseState=U),_.lastRenderedState=U}return[U,w]}function LO(u,f,_){var w=fe,x=hr(),U=rn;if(U){if(_===void 0)throw Error(n(407));_=_()}else _=f();var tt=!xr((Ce||x).memoizedState,_);tt&&(x.memoizedState=_,Ir=!0),x=x.queue;var at=jO.bind(null,w,x,u);if(rg(2048,8,at,[u]),x.getSnapshot!==f||tt||We!==null&&We.memoizedState.tag&1){if(w.flags|=2048,Sd(9,X1(),kO.bind(null,w,x,_,f),null),En===null)throw Error(n(349));U||(ze&124)!==0||UO(w,f,_)}return _}function UO(u,f,_){u.flags|=16384,u={getSnapshot:f,value:_},f=fe.updateQueue,f===null?(f=yS(),fe.updateQueue=f,f.stores=[u]):(_=f.stores,_===null?f.stores=[u]:_.push(u))}function kO(u,f,_,w){f.value=_,f.getSnapshot=w,zO(f)&&VO(u)}function jO(u,f,_){return _(function(){zO(f)&&VO(u)})}function zO(u){var f=u.getSnapshot;u=u.value;try{var _=f();return!xr(u,_)}catch{return!0}}function VO(u){var f=Wc(u,2);f!==null&&ea(f,u,2)}function bS(u){var f=Rs();if(typeof u=="function"){var _=u;if(u=_(),Ve){be(!0);try{_()}finally{be(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:u},f}function $O(u,f,_,w){return u.baseState=_,mS(u,Ce,typeof w=="function"?w:zl)}function Iq(u,f,_,w,x){if(K1(u))throw Error(n(485));if(u=f.action,u!==null){var U={payload:x,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(tt){U.listeners.push(tt)}};H.T!==null?_(!0):U.isTransition=!1,w(U),_=f.pending,_===null?(U.next=f.pending=U,WO(f,U)):(U.next=_.next,f.pending=_.next=U)}}function WO(u,f){var _=f.action,w=f.payload,x=u.state;if(f.isTransition){var U=H.T,tt={};H.T=tt;try{var at=_(x,w),St=H.S;St!==null&&St(tt,at),HO(u,f,at)}catch(Kt){vS(u,f,Kt)}finally{H.T=U}}else try{U=_(x,w),HO(u,f,U)}catch(Kt){vS(u,f,Kt)}}function HO(u,f,_){_!==null&&typeof _=="object"&&typeof _.then=="function"?_.then(function(w){qO(u,f,w)},function(w){return vS(u,f,w)}):qO(u,f,_)}function qO(u,f,_){f.status="fulfilled",f.value=_,YO(f),u.state=_,f=u.pending,f!==null&&(_=f.next,_===f?u.pending=null:(_=_.next,f.next=_,WO(u,_)))}function vS(u,f,_){var w=u.pending;if(u.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=_,YO(f),f=f.next;while(f!==w)}u.action=null}function YO(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function GO(u,f){return f}function XO(u,f){if(rn){var _=En.formState;if(_!==null){t:{var w=fe;if(rn){if(Nn){e:{for(var x=Nn,U=Ra;x.nodeType!==8;){if(!U){x=null;break e}if(x=co(x.nextSibling),x===null){x=null;break e}}U=x.data,x=U==="F!"||U==="F"?x:null}if(x){Nn=co(x.nextSibling),w=x.data==="F!";break t}}Nl(w)}w=!1}w&&(f=_[0])}}return _=Rs(),_.memoizedState=_.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:GO,lastRenderedState:f},_.queue=w,_=AR.bind(null,fe,w),w.dispatch=_,w=bS(!1),U=IS.bind(null,fe,!1,w.queue),w=Rs(),x={state:f,dispatch:null,action:u,pending:null},w.queue=x,_=Iq.bind(null,fe,x,U,_),x.dispatch=_,w.memoizedState=u,[f,_,!1]}function QO(u){var f=hr();return KO(f,Ce,u)}function KO(u,f,_){if(f=mS(u,f,GO)[0],u=G1(zl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=ng(f)}catch(tt){throw tt===Vo?xa:tt}else w=f;f=hr();var x=f.queue,U=x.dispatch;return _!==f.memoizedState&&(fe.flags|=2048,Sd(9,X1(),Eq.bind(null,x,_),null)),[w,U,u]}function Eq(u,f){u.action=f}function ZO(u){var f=hr(),_=Ce;if(_!==null)return KO(f,_,u);hr(),f=f.memoizedState,_=hr();var w=_.queue.dispatch;return _.memoizedState=u,[f,w,!1]}function Sd(u,f,_,w){return u={tag:u,create:_,deps:w,inst:f,next:null},f=fe.updateQueue,f===null&&(f=yS(),fe.updateQueue=f),_=f.lastEffect,_===null?f.lastEffect=u.next=u:(w=_.next,_.next=u,u.next=w,f.lastEffect=u),u}function X1(){return{destroy:void 0,resource:void 0}}function JO(){return hr().memoizedState}function Q1(u,f,_,w){var x=Rs();w=w===void 0?null:w,fe.flags|=u,x.memoizedState=Sd(1|f,X1(),_,w)}function rg(u,f,_,w){var x=hr();w=w===void 0?null:w;var U=x.memoizedState.inst;Ce!==null&&w!==null&&pr(w,Ce.memoizedState.deps)?x.memoizedState=Sd(f,U,_,w):(fe.flags|=u,x.memoizedState=Sd(1|f,U,_,w))}function tR(u,f){Q1(8390656,8,u,f)}function eR(u,f){rg(2048,8,u,f)}function iR(u,f){return rg(4,2,u,f)}function nR(u,f){return rg(4,4,u,f)}function rR(u,f){if(typeof f=="function"){u=u();var _=f(u);return function(){typeof _=="function"?_():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function sR(u,f,_){_=_!=null?_.concat([u]):null,rg(4,4,rR.bind(null,f,u),_)}function TS(){}function aR(u,f){var _=hr();f=f===void 0?null:f;var w=_.memoizedState;return f!==null&&pr(f,w[1])?w[0]:(_.memoizedState=[u,f],u)}function oR(u,f){var _=hr();f=f===void 0?null:f;var w=_.memoizedState;if(f!==null&&pr(f,w[1]))return w[0];if(w=u(),Ve){be(!0);try{u()}finally{be(!1)}}return _.memoizedState=[w,f],w}function SS(u,f,_){return _===void 0||(ze&1073741824)!==0?u.memoizedState=f:(u.memoizedState=_,u=uD(),fe.lanes|=u,nu|=u,_)}function lR(u,f,_,w){return xr(_,f)?_:Qt.current!==null?(u=SS(u,_,w),xr(u,f)||(Ir=!0),u):(ze&42)===0?(Ir=!0,u.memoizedState=_):(u=uD(),fe.lanes|=u,nu|=u,f)}function cR(u,f,_,w,x){var U=k.p;k.p=U!==0&&8>U?U:8;var tt=H.T,at={};H.T=at,IS(u,!1,f,_);try{var St=x(),Kt=H.S;if(Kt!==null&&Kt(at,St),St!==null&&typeof St=="object"&&typeof St.then=="function"){var se=q1(St,w);sg(u,f,se,ta(u))}else sg(u,f,w,ta(u))}catch(oe){sg(u,f,{then:function(){},status:"rejected",reason:oe},ta())}finally{k.p=U,H.T=tt}}function Bq(){}function wS(u,f,_,w){if(u.tag!==5)throw Error(n(476));var x=uR(u).queue;cR(u,x,f,G,_===null?Bq:function(){return hR(u),_(w)})}function uR(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:G},next:null};var _={};return f.next={memoizedState:_,baseState:_,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zl,lastRenderedState:_},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function hR(u){var f=uR(u).next.queue;sg(u,f,{},ta())}function MS(){return Mr(Sg)}function fR(){return hr().memoizedState}function dR(){return hr().memoizedState}function Oq(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var _=ta();u=L(_);var w=z(f,u,_);w!==null&&(ea(w,f,_),W(w,f,_)),f={cache:rr()},u.payload=f;return}f=f.return}}function Rq(u,f,_){var w=ta();_={lane:w,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null},K1(u)?gR(f,_):(_=Ad(u,f,_,w),_!==null&&(ea(_,u,w),yR(_,f,w)))}function AR(u,f,_){var w=ta();sg(u,f,_,w)}function sg(u,f,_,w){var x={lane:w,revertLane:0,action:_,hasEagerState:!1,eagerState:null,next:null};if(K1(u))gR(f,x);else{var U=u.alternate;if(u.lanes===0&&(U===null||U.lanes===0)&&(U=f.lastRenderedReducer,U!==null))try{var tt=f.lastRenderedState,at=U(tt,_);if(x.hasEagerState=!0,x.eagerState=at,xr(at,tt))return dd(u,f,x,0),En===null&&fd(),!1}catch{}finally{}if(_=Ad(u,f,x,w),_!==null)return ea(_,u,w),yR(_,f,w),!0}return!1}function IS(u,f,_,w){if(w={lane:2,revertLane:rw(),action:w,hasEagerState:!1,eagerState:null,next:null},K1(u)){if(f)throw Error(n(479))}else f=Ad(u,_,w,2),f!==null&&ea(f,u,2)}function K1(u){var f=u.alternate;return u===fe||f!==null&&f===fe}function gR(u,f){Qe=Ni=!0;var _=u.pending;_===null?f.next=f:(f.next=_.next,_.next=f),u.pending=f}function yR(u,f,_){if((_&4194048)!==0){var w=f.lanes;w&=u.pendingLanes,_|=w,f.lanes=_,On(u,_)}}var Z1={readContext:Mr,use:Y1,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useLayoutEffect:ei,useInsertionEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useSyncExternalStore:ei,useId:ei,useHostTransitionStatus:ei,useFormState:ei,useActionState:ei,useOptimistic:ei,useMemoCache:ei,useCacheRefresh:ei},pR={readContext:Mr,use:Y1,useCallback:function(u,f){return Rs().memoizedState=[u,f===void 0?null:f],u},useContext:Mr,useEffect:tR,useImperativeHandle:function(u,f,_){_=_!=null?_.concat([u]):null,Q1(4194308,4,rR.bind(null,f,u),_)},useLayoutEffect:function(u,f){return Q1(4194308,4,u,f)},useInsertionEffect:function(u,f){Q1(4,2,u,f)},useMemo:function(u,f){var _=Rs();f=f===void 0?null:f;var w=u();if(Ve){be(!0);try{u()}finally{be(!1)}}return _.memoizedState=[w,f],w},useReducer:function(u,f,_){var w=Rs();if(_!==void 0){var x=_(f);if(Ve){be(!0);try{_(f)}finally{be(!1)}}}else x=f;return w.memoizedState=w.baseState=x,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:x},w.queue=u,u=u.dispatch=Rq.bind(null,fe,u),[w.memoizedState,u]},useRef:function(u){var f=Rs();return u={current:u},f.memoizedState=u},useState:function(u){u=bS(u);var f=u.queue,_=AR.bind(null,fe,f);return f.dispatch=_,[u.memoizedState,_]},useDebugValue:TS,useDeferredValue:function(u,f){var _=Rs();return SS(_,u,f)},useTransition:function(){var u=bS(!1);return u=cR.bind(null,fe,u.queue,!0,!1),Rs().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,_){var w=fe,x=Rs();if(rn){if(_===void 0)throw Error(n(407));_=_()}else{if(_=f(),En===null)throw Error(n(349));(en&124)!==0||UO(w,f,_)}x.memoizedState=_;var U={value:_,getSnapshot:f};return x.queue=U,tR(jO.bind(null,w,U,u),[u]),w.flags|=2048,Sd(9,X1(),kO.bind(null,w,U,_,f),null),_},useId:function(){var u=Rs(),f=En.identifierPrefix;if(rn){var _=Ba,w=Qs;_=(w&~(1<<32-Be(w)-1)).toString(32)+_,f=""+f+"R"+_,_=ye++,0<_&&(f+="H"+_.toString(32)),f+=""}else _=Ii++,f=""+f+"r"+_.toString(32)+"";return u.memoizedState=f},useHostTransitionStatus:MS,useFormState:XO,useActionState:XO,useOptimistic:function(u){var f=Rs();f.memoizedState=f.baseState=u;var _={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=_,f=IS.bind(null,fe,!0,_),_.dispatch=f,[u,f]},useMemoCache:pS,useCacheRefresh:function(){return Rs().memoizedState=Oq.bind(null,fe)}},mR={readContext:Mr,use:Y1,useCallback:aR,useContext:Mr,useEffect:eR,useImperativeHandle:sR,useInsertionEffect:iR,useLayoutEffect:nR,useMemo:oR,useReducer:G1,useRef:JO,useState:function(){return G1(zl)},useDebugValue:TS,useDeferredValue:function(u,f){var _=hr();return lR(_,Ce.memoizedState,u,f)},useTransition:function(){var u=G1(zl)[0],f=hr().memoizedState;return[typeof u=="boolean"?u:ng(u),f]},useSyncExternalStore:LO,useId:fR,useHostTransitionStatus:MS,useFormState:QO,useActionState:QO,useOptimistic:function(u,f){var _=hr();return $O(_,Ce,u,f)},useMemoCache:pS,useCacheRefresh:dR},Dq={readContext:Mr,use:Y1,useCallback:aR,useContext:Mr,useEffect:eR,useImperativeHandle:sR,useInsertionEffect:iR,useLayoutEffect:nR,useMemo:oR,useReducer:_S,useRef:JO,useState:function(){return _S(zl)},useDebugValue:TS,useDeferredValue:function(u,f){var _=hr();return Ce===null?SS(_,u,f):lR(_,Ce.memoizedState,u,f)},useTransition:function(){var u=_S(zl)[0],f=hr().memoizedState;return[typeof u=="boolean"?u:ng(u),f]},useSyncExternalStore:LO,useId:fR,useHostTransitionStatus:MS,useFormState:ZO,useActionState:ZO,useOptimistic:function(u,f){var _=hr();return Ce!==null?$O(_,Ce,u,f):(_.baseState=u,[u,_.queue.dispatch])},useMemoCache:pS,useCacheRefresh:dR},wd=null,ag=0;function J1(u){var f=ag;return ag+=1,wd===null&&(wd=[]),y(wd,u,f)}function og(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function tb(u,f){throw f.$$typeof===A?Error(n(525)):(u=Object.prototype.toString.call(f),Error(n(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function _R(u){var f=u._init;return f(u._payload)}function bR(u){function f(Vt,Pt){if(u){var Yt=Vt.deletions;Yt===null?(Vt.deletions=[Pt],Vt.flags|=16):Yt.push(Pt)}}function _(Vt,Pt){if(!u)return null;for(;Pt!==null;)f(Vt,Pt),Pt=Pt.sibling;return null}function w(Vt){for(var Pt=new Map;Vt!==null;)Vt.key!==null?Pt.set(Vt.key,Vt):Pt.set(Vt.index,Vt),Vt=Vt.sibling;return Pt}function x(Vt,Pt){return Vt=eo(Vt,Pt),Vt.index=0,Vt.sibling=null,Vt}function U(Vt,Pt,Yt){return Vt.index=Yt,u?(Yt=Vt.alternate,Yt!==null?(Yt=Yt.index,Yt<Pt?(Vt.flags|=67108866,Pt):Yt):(Vt.flags|=67108866,Pt)):(Vt.flags|=1048576,Pt)}function tt(Vt){return u&&Vt.alternate===null&&(Vt.flags|=67108866),Vt}function at(Vt,Pt,Yt,ae){return Pt===null||Pt.tag!==6?(Pt=Q0(Yt,Vt.mode,ae),Pt.return=Vt,Pt):(Pt=x(Pt,Yt),Pt.return=Vt,Pt)}function St(Vt,Pt,Yt,ae){var Ge=Yt.type;return Ge===S?se(Vt,Pt,Yt.props.children,ae,Yt.key):Pt!==null&&(Pt.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===$&&_R(Ge)===Pt.type)?(Pt=x(Pt,Yt.props),og(Pt,Yt),Pt.return=Vt,Pt):(Pt=Xs(Yt.type,Yt.key,Yt.props,null,Vt.mode,ae),og(Pt,Yt),Pt.return=Vt,Pt)}function Kt(Vt,Pt,Yt,ae){return Pt===null||Pt.tag!==4||Pt.stateNode.containerInfo!==Yt.containerInfo||Pt.stateNode.implementation!==Yt.implementation?(Pt=Hc(Yt,Vt.mode,ae),Pt.return=Vt,Pt):(Pt=x(Pt,Yt.children||[]),Pt.return=Vt,Pt)}function se(Vt,Pt,Yt,ae,Ge){return Pt===null||Pt.tag!==7?(Pt=io(Yt,Vt.mode,ae,Ge),Pt.return=Vt,Pt):(Pt=x(Pt,Yt),Pt.return=Vt,Pt)}function oe(Vt,Pt,Yt){if(typeof Pt=="string"&&Pt!==""||typeof Pt=="number"||typeof Pt=="bigint")return Pt=Q0(""+Pt,Vt.mode,Yt),Pt.return=Vt,Pt;if(typeof Pt=="object"&&Pt!==null){switch(Pt.$$typeof){case m:return Yt=Xs(Pt.type,Pt.key,Pt.props,null,Vt.mode,Yt),og(Yt,Pt),Yt.return=Vt,Yt;case b:return Pt=Hc(Pt,Vt.mode,Yt),Pt.return=Vt,Pt;case $:var ae=Pt._init;return Pt=ae(Pt._payload),oe(Vt,Pt,Yt)}if(Ot(Pt)||X(Pt))return Pt=io(Pt,Vt.mode,Yt,null),Pt.return=Vt,Pt;if(typeof Pt.then=="function")return oe(Vt,J1(Pt),Yt);if(Pt.$$typeof===B)return oe(Vt,_d(Vt,Pt),Yt);tb(Vt,Pt)}return null}function Zt(Vt,Pt,Yt,ae){var Ge=Pt!==null?Pt.key:null;if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number"||typeof Yt=="bigint")return Ge!==null?null:at(Vt,Pt,""+Yt,ae);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case m:return Yt.key===Ge?St(Vt,Pt,Yt,ae):null;case b:return Yt.key===Ge?Kt(Vt,Pt,Yt,ae):null;case $:return Ge=Yt._init,Yt=Ge(Yt._payload),Zt(Vt,Pt,Yt,ae)}if(Ot(Yt)||X(Yt))return Ge!==null?null:se(Vt,Pt,Yt,ae,null);if(typeof Yt.then=="function")return Zt(Vt,Pt,J1(Yt),ae);if(Yt.$$typeof===B)return Zt(Vt,Pt,_d(Vt,Yt),ae);tb(Vt,Yt)}return null}function Jt(Vt,Pt,Yt,ae,Ge){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Vt=Vt.get(Yt)||null,at(Pt,Vt,""+ae,Ge);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case m:return Vt=Vt.get(ae.key===null?Yt:ae.key)||null,St(Pt,Vt,ae,Ge);case b:return Vt=Vt.get(ae.key===null?Yt:ae.key)||null,Kt(Pt,Vt,ae,Ge);case $:var Wi=ae._init;return ae=Wi(ae._payload),Jt(Vt,Pt,Yt,ae,Ge)}if(Ot(ae)||X(ae))return Vt=Vt.get(Yt)||null,se(Pt,Vt,ae,Ge,null);if(typeof ae.then=="function")return Jt(Vt,Pt,Yt,J1(ae),Ge);if(ae.$$typeof===B)return Jt(Vt,Pt,Yt,_d(Pt,ae),Ge);tb(Pt,ae)}return null}function wi(Vt,Pt,Yt,ae){for(var Ge=null,Wi=null,Ke=Pt,hi=Pt=0,Br=null;Ke!==null&&hi<Yt.length;hi++){Ke.index>hi?(Br=Ke,Ke=null):Br=Ke.sibling;var an=Zt(Vt,Ke,Yt[hi],ae);if(an===null){Ke===null&&(Ke=Br);break}u&&Ke&&an.alternate===null&&f(Vt,Ke),Pt=U(an,Pt,hi),Wi===null?Ge=an:Wi.sibling=an,Wi=an,Ke=Br}if(hi===Yt.length)return _(Vt,Ke),rn&&Oa(Vt,hi),Ge;if(Ke===null){for(;hi<Yt.length;hi++)Ke=oe(Vt,Yt[hi],ae),Ke!==null&&(Pt=U(Ke,Pt,hi),Wi===null?Ge=Ke:Wi.sibling=Ke,Wi=Ke);return rn&&Oa(Vt,hi),Ge}for(Ke=w(Ke);hi<Yt.length;hi++)Br=Jt(Ke,Vt,hi,Yt[hi],ae),Br!==null&&(u&&Br.alternate!==null&&Ke.delete(Br.key===null?hi:Br.key),Pt=U(Br,Pt,hi),Wi===null?Ge=Br:Wi.sibling=Br,Wi=Br);return u&&Ke.forEach(function(fu){return f(Vt,fu)}),rn&&Oa(Vt,hi),Ge}function ii(Vt,Pt,Yt,ae){if(Yt==null)throw Error(n(151));for(var Ge=null,Wi=null,Ke=Pt,hi=Pt=0,Br=null,an=Yt.next();Ke!==null&&!an.done;hi++,an=Yt.next()){Ke.index>hi?(Br=Ke,Ke=null):Br=Ke.sibling;var fu=Zt(Vt,Ke,an.value,ae);if(fu===null){Ke===null&&(Ke=Br);break}u&&Ke&&fu.alternate===null&&f(Vt,Ke),Pt=U(fu,Pt,hi),Wi===null?Ge=fu:Wi.sibling=fu,Wi=fu,Ke=Br}if(an.done)return _(Vt,Ke),rn&&Oa(Vt,hi),Ge;if(Ke===null){for(;!an.done;hi++,an=Yt.next())an=oe(Vt,an.value,ae),an!==null&&(Pt=U(an,Pt,hi),Wi===null?Ge=an:Wi.sibling=an,Wi=an);return rn&&Oa(Vt,hi),Ge}for(Ke=w(Ke);!an.done;hi++,an=Yt.next())an=Jt(Ke,Vt,hi,an.value,ae),an!==null&&(u&&an.alternate!==null&&Ke.delete(an.key===null?hi:an.key),Pt=U(an,Pt,hi),Wi===null?Ge=an:Wi.sibling=an,Wi=an);return u&&Ke.forEach(function(CY){return f(Vt,CY)}),rn&&Oa(Vt,hi),Ge}function mn(Vt,Pt,Yt,ae){if(typeof Yt=="object"&&Yt!==null&&Yt.type===S&&Yt.key===null&&(Yt=Yt.props.children),typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case m:t:{for(var Ge=Yt.key;Pt!==null;){if(Pt.key===Ge){if(Ge=Yt.type,Ge===S){if(Pt.tag===7){_(Vt,Pt.sibling),ae=x(Pt,Yt.props.children),ae.return=Vt,Vt=ae;break t}}else if(Pt.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===$&&_R(Ge)===Pt.type){_(Vt,Pt.sibling),ae=x(Pt,Yt.props),og(ae,Yt),ae.return=Vt,Vt=ae;break t}_(Vt,Pt);break}else f(Vt,Pt);Pt=Pt.sibling}Yt.type===S?(ae=io(Yt.props.children,Vt.mode,ae,Yt.key),ae.return=Vt,Vt=ae):(ae=Xs(Yt.type,Yt.key,Yt.props,null,Vt.mode,ae),og(ae,Yt),ae.return=Vt,Vt=ae)}return tt(Vt);case b:t:{for(Ge=Yt.key;Pt!==null;){if(Pt.key===Ge)if(Pt.tag===4&&Pt.stateNode.containerInfo===Yt.containerInfo&&Pt.stateNode.implementation===Yt.implementation){_(Vt,Pt.sibling),ae=x(Pt,Yt.children||[]),ae.return=Vt,Vt=ae;break t}else{_(Vt,Pt);break}else f(Vt,Pt);Pt=Pt.sibling}ae=Hc(Yt,Vt.mode,ae),ae.return=Vt,Vt=ae}return tt(Vt);case $:return Ge=Yt._init,Yt=Ge(Yt._payload),mn(Vt,Pt,Yt,ae)}if(Ot(Yt))return wi(Vt,Pt,Yt,ae);if(X(Yt)){if(Ge=X(Yt),typeof Ge!="function")throw Error(n(150));return Yt=Ge.call(Yt),ii(Vt,Pt,Yt,ae)}if(typeof Yt.then=="function")return mn(Vt,Pt,J1(Yt),ae);if(Yt.$$typeof===B)return mn(Vt,Pt,_d(Vt,Yt),ae);tb(Vt,Yt)}return typeof Yt=="string"&&Yt!==""||typeof Yt=="number"||typeof Yt=="bigint"?(Yt=""+Yt,Pt!==null&&Pt.tag===6?(_(Vt,Pt.sibling),ae=x(Pt,Yt),ae.return=Vt,Vt=ae):(_(Vt,Pt),ae=Q0(Yt,Vt.mode,ae),ae.return=Vt,Vt=ae),tt(Vt)):_(Vt,Pt)}return function(Vt,Pt,Yt,ae){try{ag=0;var Ge=mn(Vt,Pt,Yt,ae);return wd=null,Ge}catch(Ke){if(Ke===Vo||Ke===xa)throw Ke;var Wi=fs(29,Ke,null,Vt.mode);return Wi.lanes=ae,Wi.return=Vt,Wi}finally{}}}var Md=bR(!0),vR=bR(!1),Na=mt(null),$o=null;function Kc(u){var f=u.alternate;Dt(mr,mr.current&1),Dt(Na,u),$o===null&&(f===null||Qt.current!==null||f.memoizedState!==null)&&($o=u)}function TR(u){if(u.tag===22){if(Dt(mr,mr.current),Dt(Na,u),$o===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&($o=u)}}else Zc()}function Zc(){Dt(mr,mr.current),Dt(Na,Na.current)}function Vl(u){wt(Na),$o===u&&($o=null),wt(mr)}var mr=mt(0);function eb(u){for(var f=u;f!==null;){if(f.tag===13){var _=f.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||_.data==="$?"||yw(_)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function ES(u,f,_,w){f=u.memoizedState,_=_(w,f),_=_==null?f:h({},f,_),u.memoizedState=_,u.lanes===0&&(u.updateQueue.baseState=_)}var BS={enqueueSetState:function(u,f,_){u=u._reactInternals;var w=ta(),x=L(w);x.payload=f,_!=null&&(x.callback=_),f=z(u,x,w),f!==null&&(ea(f,u,w),W(f,u,w))},enqueueReplaceState:function(u,f,_){u=u._reactInternals;var w=ta(),x=L(w);x.tag=1,x.payload=f,_!=null&&(x.callback=_),f=z(u,x,w),f!==null&&(ea(f,u,w),W(f,u,w))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var _=ta(),w=L(_);w.tag=2,f!=null&&(w.callback=f),f=z(u,w,_),f!==null&&(ea(f,u,_),W(f,u,_))}};function SR(u,f,_,w,x,U,tt){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,U,tt):f.prototype&&f.prototype.isPureReactComponent?!Ea(_,w)||!Ea(x,U):!0}function wR(u,f,_,w){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(_,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(_,w),f.state!==u&&BS.enqueueReplaceState(f,f.state,null)}function dh(u,f){var _=f;if("ref"in f){_={};for(var w in f)w!=="ref"&&(_[w]=f[w])}if(u=u.defaultProps){_===f&&(_=h({},_));for(var x in u)_[x]===void 0&&(_[x]=u[x])}return _}var ib=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function MR(u){ib(u)}function IR(u){console.error(u)}function ER(u){ib(u)}function nb(u,f){try{var _=u.onUncaughtError;_(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function BR(u,f,_){try{var w=u.onCaughtError;w(_.value,{componentStack:_.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function OS(u,f,_){return _=L(_),_.tag=3,_.payload={element:null},_.callback=function(){nb(u,f)},_}function OR(u){return u=L(u),u.tag=3,u}function RR(u,f,_,w){var x=_.type.getDerivedStateFromError;if(typeof x=="function"){var U=w.value;u.payload=function(){return x(U)},u.callback=function(){BR(f,_,w)}}var tt=_.stateNode;tt!==null&&typeof tt.componentDidCatch=="function"&&(u.callback=function(){BR(f,_,w),typeof x!="function"&&(ru===null?ru=new Set([this]):ru.add(this));var at=w.stack;this.componentDidCatch(w.value,{componentStack:at!==null?at:""})})}function Cq(u,f,_,w,x){if(_.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=_.alternate,f!==null&&Yc(f,_,x,!0),_=Na.current,_!==null){switch(_.tag){case 13:return $o===null?JS():_.alternate===null&&Qn===0&&(Qn=3),_.flags&=-257,_.flags|=65536,_.lanes=x,w===vd?_.flags|=16384:(f=_.updateQueue,f===null?_.updateQueue=new Set([w]):f.add(w),ew(u,w,x)),!1;case 22:return _.flags|=65536,w===vd?_.flags|=16384:(f=_.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},_.updateQueue=f):(_=f.retryQueue,_===null?f.retryQueue=new Set([w]):_.add(w)),ew(u,w,x)),!1}throw Error(n(435,_.tag))}return ew(u,w,x),JS(),!1}if(rn)return f=Na.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=x,w!==tg&&(u=Error(n(422),{cause:w}),ro(Is(u,_)))):(w!==tg&&(f=Error(n(423),{cause:w}),ro(Is(f,_))),u=u.current.alternate,u.flags|=65536,x&=-x,u.lanes|=x,w=Is(w,_),x=OS(u.stateNode,w,x),st(u,x),Qn!==4&&(Qn=2)),!1;var U=Error(n(520),{cause:w});if(U=Is(U,_),Ag===null?Ag=[U]:Ag.push(U),Qn!==4&&(Qn=2),f===null)return!0;w=Is(w,_),_=f;do{switch(_.tag){case 3:return _.flags|=65536,u=x&-x,_.lanes|=u,u=OS(_.stateNode,w,u),st(_,u),!1;case 1:if(f=_.type,U=_.stateNode,(_.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(ru===null||!ru.has(U))))return _.flags|=65536,x&=-x,_.lanes|=x,x=OR(x),RR(x,u,_,w),st(_,x),!1}_=_.return}while(_!==null);return!1}var DR=Error(n(461)),Ir=!1;function Lr(u,f,_,w){f.child=u===null?vR(f,null,_,w):Md(f,u.child,_,w)}function CR(u,f,_,w,x){_=_.render;var U=f.ref;if("ref"in w){var tt={};for(var at in w)at!=="ref"&&(tt[at]=w[at])}else tt=w;return Ll(f),w=Td(u,f,_,tt,U,x),at=dS(),u!==null&&!Ir?(AS(u,f,x),$l(u,f,x)):(rn&&at&&Z0(f),f.flags|=1,Lr(u,f,w,x),f.child)}function PR(u,f,_,w,x){if(u===null){var U=_.type;return typeof U=="function"&&!X0(U)&&U.defaultProps===void 0&&_.compare===null?(f.tag=15,f.type=U,xR(u,f,U,w,x)):(u=Xs(_.type,null,w,f,f.mode,x),u.ref=f.ref,u.return=f,f.child=u)}if(U=u.child,!LS(u,x)){var tt=U.memoizedProps;if(_=_.compare,_=_!==null?_:Ea,_(tt,w)&&u.ref===f.ref)return $l(u,f,x)}return f.flags|=1,u=eo(U,w),u.ref=f.ref,u.return=f,f.child=u}function xR(u,f,_,w,x){if(u!==null){var U=u.memoizedProps;if(Ea(U,w)&&u.ref===f.ref)if(Ir=!1,f.pendingProps=w=U,LS(u,x))(u.flags&131072)!==0&&(Ir=!0);else return f.lanes=u.lanes,$l(u,f,x)}return RS(u,f,_,w,x)}function NR(u,f,_){var w=f.pendingProps,x=w.children,U=u!==null?u.memoizedState:null;if(w.mode==="hidden"){if((f.flags&128)!==0){if(w=U!==null?U.baseLanes|_:_,u!==null){for(x=f.child=u.child,U=0;x!==null;)U=U|x.lanes|x.childLanes,x=x.sibling;f.childLanes=U&~w}else f.childLanes=0,f.child=null;return FR(u,f,w,_)}if((_&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&hh(f,U!==null?U.cachePool:null),U!==null?zt(f,U):Et(),TR(f);else return f.lanes=f.childLanes=536870912,FR(u,f,U!==null?U.baseLanes|_:_,_)}else U!==null?(hh(f,U.cachePool),zt(f,U),Zc(),f.memoizedState=null):(u!==null&&hh(f,null),Et(),Zc());return Lr(u,f,x,_),f.child}function FR(u,f,_,w){var x=bd();return x=x===null?null:{parent:Pe._currentValue,pool:x},f.memoizedState={baseLanes:_,cachePool:x},u!==null&&hh(f,null),Et(),TR(f),u!==null&&Yc(u,f,w,!0),null}function rb(u,f){var _=f.ref;if(_===null)u!==null&&u.ref!==null&&(f.flags|=4194816);else{if(typeof _!="function"&&typeof _!="object")throw Error(n(284));(u===null||u.ref!==_)&&(f.flags|=4194816)}}function RS(u,f,_,w,x){return Ll(f),_=Td(u,f,_,w,void 0,x),w=dS(),u!==null&&!Ir?(AS(u,f,x),$l(u,f,x)):(rn&&w&&Z0(f),f.flags|=1,Lr(u,f,_,x),f.child)}function LR(u,f,_,w,x,U){return Ll(f),f.updateQueue=null,_=FO(f,w,_,x),NO(u),w=dS(),u!==null&&!Ir?(AS(u,f,U),$l(u,f,U)):(rn&&w&&Z0(f),f.flags|=1,Lr(u,f,_,U),f.child)}function UR(u,f,_,w,x){if(Ll(f),f.stateNode===null){var U=Cl,tt=_.contextType;typeof tt=="object"&&tt!==null&&(U=Mr(tt)),U=new _(w,U),f.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=BS,f.stateNode=U,U._reactInternals=f,U=f.stateNode,U.props=w,U.state=f.memoizedState,U.refs={},R(f),tt=_.contextType,U.context=typeof tt=="object"&&tt!==null?Mr(tt):Cl,U.state=f.memoizedState,tt=_.getDerivedStateFromProps,typeof tt=="function"&&(ES(f,_,tt,w),U.state=f.memoizedState),typeof _.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(tt=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),tt!==U.state&&BS.enqueueReplaceState(U,U.state,null),gt(f,w,U,x),At(),U.state=f.memoizedState),typeof U.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(u===null){U=f.stateNode;var at=f.memoizedProps,St=dh(_,at);U.props=St;var Kt=U.context,se=_.contextType;tt=Cl,typeof se=="object"&&se!==null&&(tt=Mr(se));var oe=_.getDerivedStateFromProps;se=typeof oe=="function"||typeof U.getSnapshotBeforeUpdate=="function",at=f.pendingProps!==at,se||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(at||Kt!==tt)&&wR(f,U,w,tt),E=!1;var Zt=f.memoizedState;U.state=Zt,gt(f,w,U,x),At(),Kt=f.memoizedState,at||Zt!==Kt||E?(typeof oe=="function"&&(ES(f,_,oe,w),Kt=f.memoizedState),(St=E||SR(f,_,St,w,Zt,Kt,tt))?(se||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(f.flags|=4194308)):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=Kt),U.props=w,U.state=Kt,U.context=tt,w=St):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{U=f.stateNode,C(u,f),tt=f.memoizedProps,se=dh(_,tt),U.props=se,oe=f.pendingProps,Zt=U.context,Kt=_.contextType,St=Cl,typeof Kt=="object"&&Kt!==null&&(St=Mr(Kt)),at=_.getDerivedStateFromProps,(Kt=typeof at=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(tt!==oe||Zt!==St)&&wR(f,U,w,St),E=!1,Zt=f.memoizedState,U.state=Zt,gt(f,w,U,x),At();var Jt=f.memoizedState;tt!==oe||Zt!==Jt||E||u!==null&&u.dependencies!==null&&md(u.dependencies)?(typeof at=="function"&&(ES(f,_,at,w),Jt=f.memoizedState),(se=E||SR(f,_,se,w,Zt,Jt,St)||u!==null&&u.dependencies!==null&&md(u.dependencies))?(Kt||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(w,Jt,St),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(w,Jt,St)),typeof U.componentDidUpdate=="function"&&(f.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof U.componentDidUpdate!="function"||tt===u.memoizedProps&&Zt===u.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||tt===u.memoizedProps&&Zt===u.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=Jt),U.props=w,U.state=Jt,U.context=St,w=se):(typeof U.componentDidUpdate!="function"||tt===u.memoizedProps&&Zt===u.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||tt===u.memoizedProps&&Zt===u.memoizedState||(f.flags|=1024),w=!1)}return U=w,rb(u,f),w=(f.flags&128)!==0,U||w?(U=f.stateNode,_=w&&typeof _.getDerivedStateFromError!="function"?null:U.render(),f.flags|=1,u!==null&&w?(f.child=Md(f,u.child,null,x),f.child=Md(f,null,_,x)):Lr(u,f,_,x),f.memoizedState=U.state,u=f.child):u=$l(u,f,x),u}function kR(u,f,_,w){return uh(),f.flags|=256,Lr(u,f,_,w),f.child}var DS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function CS(u){return{baseLanes:u,cachePool:fh()}}function PS(u,f,_){return u=u!==null?u.childLanes&~_:0,f&&(u|=Fa),u}function jR(u,f,_){var w=f.pendingProps,x=!1,U=(f.flags&128)!==0,tt;if((tt=U)||(tt=u!==null&&u.memoizedState===null?!1:(mr.current&2)!==0),tt&&(x=!0,f.flags&=-129),tt=(f.flags&32)!==0,f.flags&=-33,u===null){if(rn){if(x?Kc(f):Zc(),rn){var at=Nn,St;if(St=at){t:{for(St=at,at=Ra;St.nodeType!==8;){if(!at){at=null;break t}if(St=co(St.nextSibling),St===null){at=null;break t}}at=St}at!==null?(f.memoizedState={dehydrated:at,treeContext:no!==null?{id:Qs,overflow:Ba}:null,retryLane:536870912,hydrationErrors:null},St=fs(18,null,null,0),St.stateNode=at,St.return=f,f.child=St,Fr=f,Nn=null,St=!0):St=!1}St||Nl(f)}if(at=f.memoizedState,at!==null&&(at=at.dehydrated,at!==null))return yw(at)?f.lanes=32:f.lanes=536870912,null;Vl(f)}return at=w.children,w=w.fallback,x?(Zc(),x=f.mode,at=sb({mode:"hidden",children:at},x),w=io(w,x,_,null),at.return=f,w.return=f,at.sibling=w,f.child=at,x=f.child,x.memoizedState=CS(_),x.childLanes=PS(u,tt,_),f.memoizedState=DS,w):(Kc(f),xS(f,at))}if(St=u.memoizedState,St!==null&&(at=St.dehydrated,at!==null)){if(U)f.flags&256?(Kc(f),f.flags&=-257,f=NS(u,f,_)):f.memoizedState!==null?(Zc(),f.child=u.child,f.flags|=128,f=null):(Zc(),x=w.fallback,at=f.mode,w=sb({mode:"visible",children:w.children},at),x=io(x,at,_,null),x.flags|=2,w.return=f,x.return=f,w.sibling=x,f.child=w,Md(f,u.child,null,_),w=f.child,w.memoizedState=CS(_),w.childLanes=PS(u,tt,_),f.memoizedState=DS,f=x);else if(Kc(f),yw(at)){if(tt=at.nextSibling&&at.nextSibling.dataset,tt)var Kt=tt.dgst;tt=Kt,w=Error(n(419)),w.stack="",w.digest=tt,ro({value:w,source:null,stack:null}),f=NS(u,f,_)}else if(Ir||Yc(u,f,_,!1),tt=(_&u.childLanes)!==0,Ir||tt){if(tt=En,tt!==null&&(w=_&-_,w=(w&42)!==0?1:Sr(w),w=(w&(tt.suspendedLanes|_))!==0?0:w,w!==0&&w!==St.retryLane))throw St.retryLane=w,Wc(u,w),ea(tt,u,w),DR;at.data==="$?"||JS(),f=NS(u,f,_)}else at.data==="$?"?(f.flags|=192,f.child=u.child,f=null):(u=St.treeContext,Nn=co(at.nextSibling),Fr=f,rn=!0,xl=null,Ra=!1,u!==null&&(ds[wr++]=Qs,ds[wr++]=Ba,ds[wr++]=no,Qs=u.id,Ba=u.overflow,no=f),f=xS(f,w.children),f.flags|=4096);return f}return x?(Zc(),x=w.fallback,at=f.mode,St=u.child,Kt=St.sibling,w=eo(St,{mode:"hidden",children:w.children}),w.subtreeFlags=St.subtreeFlags&65011712,Kt!==null?x=eo(Kt,x):(x=io(x,at,_,null),x.flags|=2),x.return=f,w.return=f,w.sibling=x,f.child=w,w=x,x=f.child,at=u.child.memoizedState,at===null?at=CS(_):(St=at.cachePool,St!==null?(Kt=Pe._currentValue,St=St.parent!==Kt?{parent:Kt,pool:Kt}:St):St=fh(),at={baseLanes:at.baseLanes|_,cachePool:St}),x.memoizedState=at,x.childLanes=PS(u,tt,_),f.memoizedState=DS,w):(Kc(f),_=u.child,u=_.sibling,_=eo(_,{mode:"visible",children:w.children}),_.return=f,_.sibling=null,u!==null&&(tt=f.deletions,tt===null?(f.deletions=[u],f.flags|=16):tt.push(u)),f.child=_,f.memoizedState=null,_)}function xS(u,f){return f=sb({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function sb(u,f){return u=fs(22,u,null,f),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function NS(u,f,_){return Md(f,u.child,null,_),u=xS(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function zR(u,f,_){u.lanes|=f;var w=u.alternate;w!==null&&(w.lanes|=f),yd(u.return,f,_)}function FS(u,f,_,w,x){var U=u.memoizedState;U===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:_,tailMode:x}:(U.isBackwards=f,U.rendering=null,U.renderingStartTime=0,U.last=w,U.tail=_,U.tailMode=x)}function VR(u,f,_){var w=f.pendingProps,x=w.revealOrder,U=w.tail;if(Lr(u,f,w.children,_),w=mr.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)t:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&zR(u,_,f);else if(u.tag===19)zR(u,_,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break t;for(;u.sibling===null;){if(u.return===null||u.return===f)break t;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}switch(Dt(mr,w),x){case"forwards":for(_=f.child,x=null;_!==null;)u=_.alternate,u!==null&&eb(u)===null&&(x=_),_=_.sibling;_=x,_===null?(x=f.child,f.child=null):(x=_.sibling,_.sibling=null),FS(f,!1,x,_,U);break;case"backwards":for(_=null,x=f.child,f.child=null;x!==null;){if(u=x.alternate,u!==null&&eb(u)===null){f.child=x;break}u=x.sibling,x.sibling=_,_=x,x=u}FS(f,!0,_,null,U);break;case"together":FS(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function $l(u,f,_){if(u!==null&&(f.dependencies=u.dependencies),nu|=f.lanes,(_&f.childLanes)===0)if(u!==null){if(Yc(u,f,_,!1),(_&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(n(153));if(f.child!==null){for(u=f.child,_=eo(u,u.pendingProps),f.child=_,_.return=f;u.sibling!==null;)u=u.sibling,_=_.sibling=eo(u,u.pendingProps),_.return=f;_.sibling=null}return f.child}function LS(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&md(u)))}function Pq(u,f,_){switch(f.tag){case 3:Nt(f,f.stateNode.containerInfo),zo(f,Pe,u.memoizedState.cache),uh();break;case 27:case 5:me(f);break;case 4:Nt(f,f.stateNode.containerInfo);break;case 10:zo(f,f.type,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(Kc(f),f.flags|=128,null):(_&f.child.childLanes)!==0?jR(u,f,_):(Kc(f),u=$l(u,f,_),u!==null?u.sibling:null);Kc(f);break;case 19:var x=(u.flags&128)!==0;if(w=(_&f.childLanes)!==0,w||(Yc(u,f,_,!1),w=(_&f.childLanes)!==0),x){if(w)return VR(u,f,_);f.flags|=128}if(x=f.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),Dt(mr,mr.current),w)break;return null;case 22:case 23:return f.lanes=0,NR(u,f,_);case 24:zo(f,Pe,u.memoizedState.cache)}return $l(u,f,_)}function $R(u,f,_){if(u!==null)if(u.memoizedProps!==f.pendingProps)Ir=!0;else{if(!LS(u,_)&&(f.flags&128)===0)return Ir=!1,Pq(u,f,_);Ir=(u.flags&131072)!==0}else Ir=!1,rn&&(f.flags&1048576)!==0&&K0(f,jo,f.index);switch(f.lanes=0,f.tag){case 16:t:{u=f.pendingProps;var w=f.elementType,x=w._init;if(w=x(w._payload),f.type=w,typeof w=="function")X0(w)?(u=dh(w,u),f.tag=1,f=UR(null,f,w,u,_)):(f.tag=0,f=RS(null,f,w,u,_));else{if(w!=null){if(x=w.$$typeof,x===P){f.tag=11,f=CR(null,f,w,u,_);break t}else if(x===F){f.tag=14,f=PR(null,f,w,u,_);break t}}throw f=Tt(w)||w,Error(n(306,f,""))}}return f;case 0:return RS(u,f,f.type,f.pendingProps,_);case 1:return w=f.type,x=dh(w,f.pendingProps),UR(u,f,w,x,_);case 3:t:{if(Nt(f,f.stateNode.containerInfo),u===null)throw Error(n(387));w=f.pendingProps;var U=f.memoizedState;x=U.element,C(u,f),gt(f,w,null,_);var tt=f.memoizedState;if(w=tt.cache,zo(f,Pe,w),w!==U.cache&&pd(f,[Pe],_,!0),At(),w=tt.element,U.isDehydrated)if(U={element:w,isDehydrated:!1,cache:tt.cache},f.updateQueue.baseState=U,f.memoizedState=U,f.flags&256){f=kR(u,f,w,_);break t}else if(w!==x){x=Is(Error(n(424)),f),ro(x),f=kR(u,f,w,_);break t}else{switch(u=f.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Nn=co(u.firstChild),Fr=f,rn=!0,xl=null,Ra=!0,_=vR(f,null,w,_),f.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling}else{if(uh(),w===x){f=$l(u,f,_);break t}Lr(u,f,w,_)}f=f.child}return f;case 26:return rb(u,f),u===null?(_=YD(f.type,null,f.pendingProps,null))?f.memoizedState=_:rn||(_=f.type,u=f.pendingProps,w=_b(ft.current).createElement(_),w[Gt]=f,w[ne]=u,kr(w,_,u),Xe(w),f.stateNode=w):f.memoizedState=YD(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:return me(f),u===null&&rn&&(w=f.stateNode=WD(f.type,f.pendingProps,ft.current),Fr=f,Ra=!0,x=Nn,ou(f.type)?(pw=x,Nn=co(w.firstChild)):Nn=x),Lr(u,f,f.pendingProps.children,_),rb(u,f),u===null&&(f.flags|=4194304),f.child;case 5:return u===null&&rn&&((x=w=Nn)&&(w=oY(w,f.type,f.pendingProps,Ra),w!==null?(f.stateNode=w,Fr=f,Nn=co(w.firstChild),Ra=!1,x=!0):x=!1),x||Nl(f)),me(f),x=f.type,U=f.pendingProps,tt=u!==null?u.memoizedProps:null,w=U.children,dw(x,U)?w=null:tt!==null&&dw(x,tt)&&(f.flags|=32),f.memoizedState!==null&&(x=Td(u,f,Mq,null,null,_),Sg._currentValue=x),rb(u,f),Lr(u,f,w,_),f.child;case 6:return u===null&&rn&&((u=_=Nn)&&(_=lY(_,f.pendingProps,Ra),_!==null?(f.stateNode=_,Fr=f,Nn=null,u=!0):u=!1),u||Nl(f)),null;case 13:return jR(u,f,_);case 4:return Nt(f,f.stateNode.containerInfo),w=f.pendingProps,u===null?f.child=Md(f,null,w,_):Lr(u,f,w,_),f.child;case 11:return CR(u,f,f.type,f.pendingProps,_);case 7:return Lr(u,f,f.pendingProps,_),f.child;case 8:return Lr(u,f,f.pendingProps.children,_),f.child;case 12:return Lr(u,f,f.pendingProps.children,_),f.child;case 10:return w=f.pendingProps,zo(f,f.type,w.value),Lr(u,f,w.children,_),f.child;case 9:return x=f.type._context,w=f.pendingProps.children,Ll(f),x=Mr(x),w=w(x),f.flags|=1,Lr(u,f,w,_),f.child;case 14:return PR(u,f,f.type,f.pendingProps,_);case 15:return xR(u,f,f.type,f.pendingProps,_);case 19:return VR(u,f,_);case 31:return w=f.pendingProps,_=f.mode,w={mode:w.mode,children:w.children},u===null?(_=sb(w,_),_.ref=f.ref,f.child=_,_.return=f,f=_):(_=eo(u.child,w),_.ref=f.ref,f.child=_,_.return=f,f=_),f;case 22:return NR(u,f,_);case 24:return Ll(f),w=Mr(Pe),u===null?(x=bd(),x===null&&(x=En,U=rr(),x.pooledCache=U,U.refCount++,U!==null&&(x.pooledCacheLanes|=_),x=U),f.memoizedState={parent:w,cache:x},R(f),zo(f,Pe,x)):((u.lanes&_)!==0&&(C(u,f),gt(f,null,null,_),At()),x=u.memoizedState,U=f.memoizedState,x.parent!==w?(x={parent:w,cache:w},f.memoizedState=x,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=x),zo(f,Pe,w)):(w=U.cache,zo(f,Pe,w),w!==x.cache&&pd(f,[Pe],_,!0))),Lr(u,f,f.pendingProps.children,_),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function Wl(u){u.flags|=4}function WR(u,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!ZD(f)){if(f=Na.current,f!==null&&((en&4194048)===en?$o!==null:(en&62914560)!==en&&(en&536870912)===0||f!==$o))throw p=vd,jl;u.flags|=8192}}function ab(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?Nc():536870912,u.lanes|=f,Od|=f)}function lg(u,f){if(!rn)switch(u.tailMode){case"hidden":f=u.tail;for(var _=null;f!==null;)f.alternate!==null&&(_=f),f=f.sibling;_===null?u.tail=null:_.sibling=null;break;case"collapsed":_=u.tail;for(var w=null;_!==null;)_.alternate!==null&&(w=_),_=_.sibling;w===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function kn(u){var f=u.alternate!==null&&u.alternate.child===u.child,_=0,w=0;if(f)for(var x=u.child;x!==null;)_|=x.lanes|x.childLanes,w|=x.subtreeFlags&65011712,w|=x.flags&65011712,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)_|=x.lanes|x.childLanes,w|=x.subtreeFlags,w|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=w,u.childLanes=_,f}function xq(u,f,_){var w=f.pendingProps;switch(J0(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kn(f),null;case 1:return kn(f),null;case 3:return _=f.stateNode,w=null,u!==null&&(w=u.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),Da(Pe),he(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(u===null||u.child===null)&&(In(f)?Wl(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,H1())),kn(f),null;case 26:return _=f.memoizedState,u===null?(Wl(f),_!==null?(kn(f),WR(f,_)):(kn(f),f.flags&=-16777217)):_?_!==u.memoizedState?(Wl(f),kn(f),WR(f,_)):(kn(f),f.flags&=-16777217):(u.memoizedProps!==w&&Wl(f),kn(f),f.flags&=-16777217),null;case 27:Me(f),_=ft.current;var x=f.type;if(u!==null&&f.stateNode!=null)u.memoizedProps!==w&&Wl(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return kn(f),null}u=te.current,In(f)?eg(f):(u=WD(x,w,_),f.stateNode=u,Wl(f))}return kn(f),null;case 5:if(Me(f),_=f.type,u!==null&&f.stateNode!=null)u.memoizedProps!==w&&Wl(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return kn(f),null}if(u=te.current,In(f))eg(f);else{switch(x=_b(ft.current),u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof w.is=="string"?x.createElement("select",{is:w.is}):x.createElement("select"),w.multiple?u.multiple=!0:w.size&&(u.size=w.size);break;default:u=typeof w.is=="string"?x.createElement(_,{is:w.is}):x.createElement(_)}}u[Gt]=f,u[ne]=w;t:for(x=f.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break t;for(;x.sibling===null;){if(x.return===null||x.return===f)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}f.stateNode=u;t:switch(kr(u,_,w),_){case"button":case"input":case"select":case"textarea":u=!!w.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&Wl(f)}}return kn(f),f.flags&=-16777217,null;case 6:if(u&&f.stateNode!=null)u.memoizedProps!==w&&Wl(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(n(166));if(u=ft.current,In(f)){if(u=f.stateNode,_=f.memoizedProps,w=null,x=Fr,x!==null)switch(x.tag){case 27:case 5:w=x.memoizedProps}u[Gt]=f,u=!!(u.nodeValue===_||w!==null&&w.suppressHydrationWarning===!0||LD(u.nodeValue,_)),u||Nl(f)}else u=_b(u).createTextNode(w),u[Gt]=f,f.stateNode=u}return kn(f),null;case 13:if(w=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(x=In(f),w!==null&&w.dehydrated!==null){if(u===null){if(!x)throw Error(n(318));if(x=f.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(n(317));x[Gt]=f}else uh(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;kn(f),x=!1}else x=H1(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=x),x=!0;if(!x)return f.flags&256?(Vl(f),f):(Vl(f),null)}if(Vl(f),(f.flags&128)!==0)return f.lanes=_,f;if(_=w!==null,u=u!==null&&u.memoizedState!==null,_){w=f.child,x=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(x=w.alternate.memoizedState.cachePool.pool);var U=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(U=w.memoizedState.cachePool.pool),U!==x&&(w.flags|=2048)}return _!==u&&_&&(f.child.flags|=8192),ab(f,f.updateQueue),kn(f),null;case 4:return he(),u===null&&lw(f.stateNode.containerInfo),kn(f),null;case 10:return Da(f.type),kn(f),null;case 19:if(wt(mr),x=f.memoizedState,x===null)return kn(f),null;if(w=(f.flags&128)!==0,U=x.rendering,U===null)if(w)lg(x,!1);else{if(Qn!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(U=eb(u),U!==null){for(f.flags|=128,lg(x,!1),u=U.updateQueue,f.updateQueue=u,ab(f,u),f.subtreeFlags=0,u=_,_=f.child;_!==null;)W1(_,u),_=_.sibling;return Dt(mr,mr.current&1|2),f.child}u=u.sibling}x.tail!==null&&dt()>cb&&(f.flags|=128,w=!0,lg(x,!1),f.lanes=4194304)}else{if(!w)if(u=eb(U),u!==null){if(f.flags|=128,w=!0,u=u.updateQueue,f.updateQueue=u,ab(f,u),lg(x,!0),x.tail===null&&x.tailMode==="hidden"&&!U.alternate&&!rn)return kn(f),null}else 2*dt()-x.renderingStartTime>cb&&_!==536870912&&(f.flags|=128,w=!0,lg(x,!1),f.lanes=4194304);x.isBackwards?(U.sibling=f.child,f.child=U):(u=x.last,u!==null?u.sibling=U:f.child=U,x.last=U)}return x.tail!==null?(f=x.tail,x.rendering=f,x.tail=f.sibling,x.renderingStartTime=dt(),f.sibling=null,u=mr.current,Dt(mr,w?u&1|2:u&1),f):(kn(f),null);case 22:case 23:return Vl(f),ve(),w=f.memoizedState!==null,u!==null?u.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(_&536870912)!==0&&(f.flags&128)===0&&(kn(f),f.subtreeFlags&6&&(f.flags|=8192)):kn(f),_=f.updateQueue,_!==null&&ab(f,_.retryQueue),_=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==_&&(f.flags|=2048),u!==null&&wt(_e),null;case 24:return _=null,u!==null&&(_=u.memoizedState.cache),f.memoizedState.cache!==_&&(f.flags|=2048),Da(Pe),kn(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function Nq(u,f){switch(J0(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return Da(Pe),he(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return Me(f),null;case 13:if(Vl(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(n(340));uh()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return wt(mr),null;case 4:return he(),null;case 10:return Da(f.type),null;case 22:case 23:return Vl(f),ve(),u!==null&&wt(_e),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return Da(Pe),null;case 25:return null;default:return null}}function HR(u,f){switch(J0(f),f.tag){case 3:Da(Pe),he();break;case 26:case 27:case 5:Me(f);break;case 4:he();break;case 13:Vl(f);break;case 19:wt(mr);break;case 10:Da(f.type);break;case 22:case 23:Vl(f),ve(),u!==null&&wt(_e);break;case 24:Da(Pe)}}function cg(u,f){try{var _=f.updateQueue,w=_!==null?_.lastEffect:null;if(w!==null){var x=w.next;_=x;do{if((_.tag&u)===u){w=void 0;var U=_.create,tt=_.inst;w=U(),tt.destroy=w}_=_.next}while(_!==x)}}catch(at){wn(f,f.return,at)}}function Jc(u,f,_){try{var w=f.updateQueue,x=w!==null?w.lastEffect:null;if(x!==null){var U=x.next;w=U;do{if((w.tag&u)===u){var tt=w.inst,at=tt.destroy;if(at!==void 0){tt.destroy=void 0,x=f;var St=_,Kt=at;try{Kt()}catch(se){wn(x,St,se)}}}w=w.next}while(w!==U)}}catch(se){wn(f,f.return,se)}}function qR(u){var f=u.updateQueue;if(f!==null){var _=u.stateNode;try{xt(f,_)}catch(w){wn(u,u.return,w)}}}function YR(u,f,_){_.props=dh(u.type,u.memoizedProps),_.state=u.memoizedState;try{_.componentWillUnmount()}catch(w){wn(u,f,w)}}function ug(u,f){try{var _=u.ref;if(_!==null){switch(u.tag){case 26:case 27:case 5:var w=u.stateNode;break;case 30:w=u.stateNode;break;default:w=u.stateNode}typeof _=="function"?u.refCleanup=_(w):_.current=w}}catch(x){wn(u,f,x)}}function Wo(u,f){var _=u.ref,w=u.refCleanup;if(_!==null)if(typeof w=="function")try{w()}catch(x){wn(u,f,x)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof _=="function")try{_(null)}catch(x){wn(u,f,x)}else _.current=null}function GR(u){var f=u.type,_=u.memoizedProps,w=u.stateNode;try{t:switch(f){case"button":case"input":case"select":case"textarea":_.autoFocus&&w.focus();break t;case"img":_.src?w.src=_.src:_.srcSet&&(w.srcset=_.srcSet)}}catch(x){wn(u,u.return,x)}}function US(u,f,_){try{var w=u.stateNode;iY(w,u.type,_,f),w[ne]=f}catch(x){wn(u,u.return,x)}}function XR(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&ou(u.type)||u.tag===4}function kS(u){t:for(;;){for(;u.sibling===null;){if(u.return===null||XR(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&ou(u.type)||u.flags&2||u.child===null||u.tag===4)continue t;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function jS(u,f,_){var w=u.tag;if(w===5||w===6)u=u.stateNode,f?(_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_).insertBefore(u,f):(f=_.nodeType===9?_.body:_.nodeName==="HTML"?_.ownerDocument.body:_,f.appendChild(u),_=_._reactRootContainer,_!=null||f.onclick!==null||(f.onclick=mb));else if(w!==4&&(w===27&&ou(u.type)&&(_=u.stateNode,f=null),u=u.child,u!==null))for(jS(u,f,_),u=u.sibling;u!==null;)jS(u,f,_),u=u.sibling}function ob(u,f,_){var w=u.tag;if(w===5||w===6)u=u.stateNode,f?_.insertBefore(u,f):_.appendChild(u);else if(w!==4&&(w===27&&ou(u.type)&&(_=u.stateNode),u=u.child,u!==null))for(ob(u,f,_),u=u.sibling;u!==null;)ob(u,f,_),u=u.sibling}function QR(u){var f=u.stateNode,_=u.memoizedProps;try{for(var w=u.type,x=f.attributes;x.length;)f.removeAttributeNode(x[0]);kr(f,w,_),f[Gt]=u,f[ne]=_}catch(U){wn(u,u.return,U)}}var Hl=!1,sr=!1,zS=!1,KR=typeof WeakSet=="function"?WeakSet:Set,Er=null;function Fq(u,f){if(u=u.containerInfo,hw=Mb,u=$0(u),W0(u)){if("selectionStart"in u)var _={start:u.selectionStart,end:u.selectionEnd};else t:{_=(_=u.ownerDocument)&&_.defaultView||window;var w=_.getSelection&&_.getSelection();if(w&&w.rangeCount!==0){_=w.anchorNode;var x=w.anchorOffset,U=w.focusNode;w=w.focusOffset;try{_.nodeType,U.nodeType}catch{_=null;break t}var tt=0,at=-1,St=-1,Kt=0,se=0,oe=u,Zt=null;e:for(;;){for(var Jt;oe!==_||x!==0&&oe.nodeType!==3||(at=tt+x),oe!==U||w!==0&&oe.nodeType!==3||(St=tt+w),oe.nodeType===3&&(tt+=oe.nodeValue.length),(Jt=oe.firstChild)!==null;)Zt=oe,oe=Jt;for(;;){if(oe===u)break e;if(Zt===_&&++Kt===x&&(at=tt),Zt===U&&++se===w&&(St=tt),(Jt=oe.nextSibling)!==null)break;oe=Zt,Zt=oe.parentNode}oe=Jt}_=at===-1||St===-1?null:{start:at,end:St}}else _=null}_=_||{start:0,end:0}}else _=null;for(fw={focusedElem:u,selectionRange:_},Mb=!1,Er=f;Er!==null;)if(f=Er,u=f.child,(f.subtreeFlags&1024)!==0&&u!==null)u.return=f,Er=u;else for(;Er!==null;){switch(f=Er,U=f.alternate,u=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&U!==null){u=void 0,_=f,x=U.memoizedProps,U=U.memoizedState,w=_.stateNode;try{var wi=dh(_.type,x,_.elementType===_.type);u=w.getSnapshotBeforeUpdate(wi,U),w.__reactInternalSnapshotBeforeUpdate=u}catch(ii){wn(_,_.return,ii)}}break;case 3:if((u&1024)!==0){if(u=f.stateNode.containerInfo,_=u.nodeType,_===9)gw(u);else if(_===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":gw(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(n(163))}if(u=f.sibling,u!==null){u.return=f.return,Er=u;break}Er=f.return}}function ZR(u,f,_){var w=_.flags;switch(_.tag){case 0:case 11:case 15:tu(u,_),w&4&&cg(5,_);break;case 1:if(tu(u,_),w&4)if(u=_.stateNode,f===null)try{u.componentDidMount()}catch(tt){wn(_,_.return,tt)}else{var x=dh(_.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(x,f,u.__reactInternalSnapshotBeforeUpdate)}catch(tt){wn(_,_.return,tt)}}w&64&&qR(_),w&512&&ug(_,_.return);break;case 3:if(tu(u,_),w&64&&(u=_.updateQueue,u!==null)){if(f=null,_.child!==null)switch(_.child.tag){case 27:case 5:f=_.child.stateNode;break;case 1:f=_.child.stateNode}try{xt(u,f)}catch(tt){wn(_,_.return,tt)}}break;case 27:f===null&&w&4&&QR(_);case 26:case 5:tu(u,_),f===null&&w&4&&GR(_),w&512&&ug(_,_.return);break;case 12:tu(u,_);break;case 13:tu(u,_),w&4&&eD(u,_),w&64&&(u=_.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(_=Hq.bind(null,_),cY(u,_))));break;case 22:if(w=_.memoizedState!==null||Hl,!w){f=f!==null&&f.memoizedState!==null||sr,x=Hl;var U=sr;Hl=w,(sr=f)&&!U?eu(u,_,(_.subtreeFlags&8772)!==0):tu(u,_),Hl=x,sr=U}break;case 30:break;default:tu(u,_)}}function JR(u){var f=u.alternate;f!==null&&(u.alternate=null,JR(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&Gn(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Fn=null,Ds=!1;function ql(u,f,_){for(_=_.child;_!==null;)tD(u,f,_),_=_.sibling}function tD(u,f,_){if(re&&typeof re.onCommitFiberUnmount=="function")try{re.onCommitFiberUnmount(Mt,_)}catch{}switch(_.tag){case 26:sr||Wo(_,f),ql(u,f,_),_.memoizedState?_.memoizedState.count--:_.stateNode&&(_=_.stateNode,_.parentNode.removeChild(_));break;case 27:sr||Wo(_,f);var w=Fn,x=Ds;ou(_.type)&&(Fn=_.stateNode,Ds=!1),ql(u,f,_),_g(_.stateNode),Fn=w,Ds=x;break;case 5:sr||Wo(_,f);case 6:if(w=Fn,x=Ds,Fn=null,ql(u,f,_),Fn=w,Ds=x,Fn!==null)if(Ds)try{(Fn.nodeType===9?Fn.body:Fn.nodeName==="HTML"?Fn.ownerDocument.body:Fn).removeChild(_.stateNode)}catch(U){wn(_,f,U)}else try{Fn.removeChild(_.stateNode)}catch(U){wn(_,f,U)}break;case 18:Fn!==null&&(Ds?(u=Fn,VD(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,_.stateNode),Eg(u)):VD(Fn,_.stateNode));break;case 4:w=Fn,x=Ds,Fn=_.stateNode.containerInfo,Ds=!0,ql(u,f,_),Fn=w,Ds=x;break;case 0:case 11:case 14:case 15:sr||Jc(2,_,f),sr||Jc(4,_,f),ql(u,f,_);break;case 1:sr||(Wo(_,f),w=_.stateNode,typeof w.componentWillUnmount=="function"&&YR(_,f,w)),ql(u,f,_);break;case 21:ql(u,f,_);break;case 22:sr=(w=sr)||_.memoizedState!==null,ql(u,f,_),sr=w;break;default:ql(u,f,_)}}function eD(u,f){if(f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Eg(u)}catch(_){wn(f,f.return,_)}}function Lq(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new KR),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new KR),f;default:throw Error(n(435,u.tag))}}function VS(u,f){var _=Lq(u);f.forEach(function(w){var x=qq.bind(null,u,w);_.has(w)||(_.add(w),w.then(x,x))})}function Ks(u,f){var _=f.deletions;if(_!==null)for(var w=0;w<_.length;w++){var x=_[w],U=u,tt=f,at=tt;t:for(;at!==null;){switch(at.tag){case 27:if(ou(at.type)){Fn=at.stateNode,Ds=!1;break t}break;case 5:Fn=at.stateNode,Ds=!1;break t;case 3:case 4:Fn=at.stateNode.containerInfo,Ds=!0;break t}at=at.return}if(Fn===null)throw Error(n(160));tD(U,tt,x),Fn=null,Ds=!1,U=x.alternate,U!==null&&(U.return=null),x.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)iD(f,u),f=f.sibling}var lo=null;function iD(u,f){var _=u.alternate,w=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Ks(f,u),Zs(u),w&4&&(Jc(3,u,u.return),cg(3,u),Jc(5,u,u.return));break;case 1:Ks(f,u),Zs(u),w&512&&(sr||_===null||Wo(_,_.return)),w&64&&Hl&&(u=u.updateQueue,u!==null&&(w=u.callbacks,w!==null&&(_=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=_===null?w:_.concat(w))));break;case 26:var x=lo;if(Ks(f,u),Zs(u),w&512&&(sr||_===null||Wo(_,_.return)),w&4){var U=_!==null?_.memoizedState:null;if(w=u.memoizedState,_===null)if(w===null)if(u.stateNode===null){t:{w=u.type,_=u.memoizedProps,x=x.ownerDocument||x;e:switch(w){case"title":U=x.getElementsByTagName("title")[0],(!U||U[Qi]||U[Gt]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=x.createElement(w),x.head.insertBefore(U,x.querySelector("head > title"))),kr(U,w,_),U[Gt]=u,Xe(U),w=U;break t;case"link":var tt=QD("link","href",x).get(w+(_.href||""));if(tt){for(var at=0;at<tt.length;at++)if(U=tt[at],U.getAttribute("href")===(_.href==null||_.href===""?null:_.href)&&U.getAttribute("rel")===(_.rel==null?null:_.rel)&&U.getAttribute("title")===(_.title==null?null:_.title)&&U.getAttribute("crossorigin")===(_.crossOrigin==null?null:_.crossOrigin)){tt.splice(at,1);break e}}U=x.createElement(w),kr(U,w,_),x.head.appendChild(U);break;case"meta":if(tt=QD("meta","content",x).get(w+(_.content||""))){for(at=0;at<tt.length;at++)if(U=tt[at],U.getAttribute("content")===(_.content==null?null:""+_.content)&&U.getAttribute("name")===(_.name==null?null:_.name)&&U.getAttribute("property")===(_.property==null?null:_.property)&&U.getAttribute("http-equiv")===(_.httpEquiv==null?null:_.httpEquiv)&&U.getAttribute("charset")===(_.charSet==null?null:_.charSet)){tt.splice(at,1);break e}}U=x.createElement(w),kr(U,w,_),x.head.appendChild(U);break;default:throw Error(n(468,w))}U[Gt]=u,Xe(U),w=U}u.stateNode=w}else KD(x,u.type,u.stateNode);else u.stateNode=XD(x,w,u.memoizedProps);else U!==w?(U===null?_.stateNode!==null&&(_=_.stateNode,_.parentNode.removeChild(_)):U.count--,w===null?KD(x,u.type,u.stateNode):XD(x,w,u.memoizedProps)):w===null&&u.stateNode!==null&&US(u,u.memoizedProps,_.memoizedProps)}break;case 27:Ks(f,u),Zs(u),w&512&&(sr||_===null||Wo(_,_.return)),_!==null&&w&4&&US(u,u.memoizedProps,_.memoizedProps);break;case 5:if(Ks(f,u),Zs(u),w&512&&(sr||_===null||Wo(_,_.return)),u.flags&32){x=u.stateNode;try{Fc(x,"")}catch(Jt){wn(u,u.return,Jt)}}w&4&&u.stateNode!=null&&(x=u.memoizedProps,US(u,x,_!==null?_.memoizedProps:x)),w&1024&&(zS=!0);break;case 6:if(Ks(f,u),Zs(u),w&4){if(u.stateNode===null)throw Error(n(162));w=u.memoizedProps,_=u.stateNode;try{_.nodeValue=w}catch(Jt){wn(u,u.return,Jt)}}break;case 3:if(Tb=null,x=lo,lo=bb(f.containerInfo),Ks(f,u),lo=x,Zs(u),w&4&&_!==null&&_.memoizedState.isDehydrated)try{Eg(f.containerInfo)}catch(Jt){wn(u,u.return,Jt)}zS&&(zS=!1,nD(u));break;case 4:w=lo,lo=bb(u.stateNode.containerInfo),Ks(f,u),Zs(u),lo=w;break;case 12:Ks(f,u),Zs(u);break;case 13:Ks(f,u),Zs(u),u.child.flags&8192&&u.memoizedState!==null!=(_!==null&&_.memoizedState!==null)&&(GS=dt()),w&4&&(w=u.updateQueue,w!==null&&(u.updateQueue=null,VS(u,w)));break;case 22:x=u.memoizedState!==null;var St=_!==null&&_.memoizedState!==null,Kt=Hl,se=sr;if(Hl=Kt||x,sr=se||St,Ks(f,u),sr=se,Hl=Kt,Zs(u),w&8192)t:for(f=u.stateNode,f._visibility=x?f._visibility&-2:f._visibility|1,x&&(_===null||St||Hl||sr||Ah(u)),_=null,f=u;;){if(f.tag===5||f.tag===26){if(_===null){St=_=f;try{if(U=St.stateNode,x)tt=U.style,typeof tt.setProperty=="function"?tt.setProperty("display","none","important"):tt.display="none";else{at=St.stateNode;var oe=St.memoizedProps.style,Zt=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;at.style.display=Zt==null||typeof Zt=="boolean"?"":(""+Zt).trim()}}catch(Jt){wn(St,St.return,Jt)}}}else if(f.tag===6){if(_===null){St=f;try{St.stateNode.nodeValue=x?"":St.memoizedProps}catch(Jt){wn(St,St.return,Jt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break t;for(;f.sibling===null;){if(f.return===null||f.return===u)break t;_===f&&(_=null),f=f.return}_===f&&(_=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=u.updateQueue,w!==null&&(_=w.retryQueue,_!==null&&(w.retryQueue=null,VS(u,_))));break;case 19:Ks(f,u),Zs(u),w&4&&(w=u.updateQueue,w!==null&&(u.updateQueue=null,VS(u,w)));break;case 30:break;case 21:break;default:Ks(f,u),Zs(u)}}function Zs(u){var f=u.flags;if(f&2){try{for(var _,w=u.return;w!==null;){if(XR(w)){_=w;break}w=w.return}if(_==null)throw Error(n(160));switch(_.tag){case 27:var x=_.stateNode,U=kS(u);ob(u,U,x);break;case 5:var tt=_.stateNode;_.flags&32&&(Fc(tt,""),_.flags&=-33);var at=kS(u);ob(u,at,tt);break;case 3:case 4:var St=_.stateNode.containerInfo,Kt=kS(u);jS(u,Kt,St);break;default:throw Error(n(161))}}catch(se){wn(u,u.return,se)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function nD(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;nD(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),u=u.sibling}}function tu(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)ZR(u,f.alternate,f),f=f.sibling}function Ah(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Jc(4,f,f.return),Ah(f);break;case 1:Wo(f,f.return);var _=f.stateNode;typeof _.componentWillUnmount=="function"&&YR(f,f.return,_),Ah(f);break;case 27:_g(f.stateNode);case 26:case 5:Wo(f,f.return),Ah(f);break;case 22:f.memoizedState===null&&Ah(f);break;case 30:Ah(f);break;default:Ah(f)}u=u.sibling}}function eu(u,f,_){for(_=_&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,x=u,U=f,tt=U.flags;switch(U.tag){case 0:case 11:case 15:eu(x,U,_),cg(4,U);break;case 1:if(eu(x,U,_),w=U,x=w.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Kt){wn(w,w.return,Kt)}if(w=U,x=w.updateQueue,x!==null){var at=w.stateNode;try{var St=x.shared.hiddenCallbacks;if(St!==null)for(x.shared.hiddenCallbacks=null,x=0;x<St.length;x++)It(St[x],at)}catch(Kt){wn(w,w.return,Kt)}}_&&tt&64&&qR(U),ug(U,U.return);break;case 27:QR(U);case 26:case 5:eu(x,U,_),_&&w===null&&tt&4&&GR(U),ug(U,U.return);break;case 12:eu(x,U,_);break;case 13:eu(x,U,_),_&&tt&4&&eD(x,U);break;case 22:U.memoizedState===null&&eu(x,U,_),ug(U,U.return);break;case 30:break;default:eu(x,U,_)}f=f.sibling}}function $S(u,f){var _=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==_&&(u!=null&&u.refCount++,_!=null&&Gc(_))}function WS(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Gc(u))}function Ho(u,f,_,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)rD(u,f,_,w),f=f.sibling}function rD(u,f,_,w){var x=f.flags;switch(f.tag){case 0:case 11:case 15:Ho(u,f,_,w),x&2048&&cg(9,f);break;case 1:Ho(u,f,_,w);break;case 3:Ho(u,f,_,w),x&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Gc(u)));break;case 12:if(x&2048){Ho(u,f,_,w),u=f.stateNode;try{var U=f.memoizedProps,tt=U.id,at=U.onPostCommit;typeof at=="function"&&at(tt,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(St){wn(f,f.return,St)}}else Ho(u,f,_,w);break;case 13:Ho(u,f,_,w);break;case 23:break;case 22:U=f.stateNode,tt=f.alternate,f.memoizedState!==null?U._visibility&2?Ho(u,f,_,w):hg(u,f):U._visibility&2?Ho(u,f,_,w):(U._visibility|=2,Id(u,f,_,w,(f.subtreeFlags&10256)!==0)),x&2048&&$S(tt,f);break;case 24:Ho(u,f,_,w),x&2048&&WS(f.alternate,f);break;default:Ho(u,f,_,w)}}function Id(u,f,_,w,x){for(x=x&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var U=u,tt=f,at=_,St=w,Kt=tt.flags;switch(tt.tag){case 0:case 11:case 15:Id(U,tt,at,St,x),cg(8,tt);break;case 23:break;case 22:var se=tt.stateNode;tt.memoizedState!==null?se._visibility&2?Id(U,tt,at,St,x):hg(U,tt):(se._visibility|=2,Id(U,tt,at,St,x)),x&&Kt&2048&&$S(tt.alternate,tt);break;case 24:Id(U,tt,at,St,x),x&&Kt&2048&&WS(tt.alternate,tt);break;default:Id(U,tt,at,St,x)}f=f.sibling}}function hg(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var _=u,w=f,x=w.flags;switch(w.tag){case 22:hg(_,w),x&2048&&$S(w.alternate,w);break;case 24:hg(_,w),x&2048&&WS(w.alternate,w);break;default:hg(_,w)}f=f.sibling}}var fg=8192;function Ed(u){if(u.subtreeFlags&fg)for(u=u.child;u!==null;)sD(u),u=u.sibling}function sD(u){switch(u.tag){case 26:Ed(u),u.flags&fg&&u.memoizedState!==null&&TY(lo,u.memoizedState,u.memoizedProps);break;case 5:Ed(u);break;case 3:case 4:var f=lo;lo=bb(u.stateNode.containerInfo),Ed(u),lo=f;break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=fg,fg=16777216,Ed(u),fg=f):Ed(u));break;default:Ed(u)}}function aD(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function dg(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var _=0;_<f.length;_++){var w=f[_];Er=w,lD(w,u)}aD(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)oD(u),u=u.sibling}function oD(u){switch(u.tag){case 0:case 11:case 15:dg(u),u.flags&2048&&Jc(9,u,u.return);break;case 3:dg(u);break;case 12:dg(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&2&&(u.return===null||u.return.tag!==13)?(f._visibility&=-3,lb(u)):dg(u);break;default:dg(u)}}function lb(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var _=0;_<f.length;_++){var w=f[_];Er=w,lD(w,u)}aD(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Jc(8,f,f.return),lb(f);break;case 22:_=f.stateNode,_._visibility&2&&(_._visibility&=-3,lb(f));break;default:lb(f)}u=u.sibling}}function lD(u,f){for(;Er!==null;){var _=Er;switch(_.tag){case 0:case 11:case 15:Jc(8,_,f);break;case 23:case 22:if(_.memoizedState!==null&&_.memoizedState.cachePool!==null){var w=_.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Gc(_.memoizedState.cache)}if(w=_.child,w!==null)w.return=_,Er=w;else t:for(_=u;Er!==null;){w=Er;var x=w.sibling,U=w.return;if(JR(w),w===_){Er=null;break t}if(x!==null){x.return=U,Er=x;break t}Er=U}}}var Uq={getCacheForType:function(u){var f=Mr(Pe),_=f.data.get(u);return _===void 0&&(_=u(),f.data.set(u,_)),_}},kq=typeof WeakMap=="function"?WeakMap:Map,An=0,En=null,Gi=null,en=0,gn=0,Js=null,iu=!1,Bd=!1,HS=!1,Yl=0,Qn=0,nu=0,gh=0,qS=0,Fa=0,Od=0,Ag=null,Cs=null,YS=!1,GS=0,cb=1/0,ub=null,ru=null,Ur=0,su=null,Rd=null,Dd=0,XS=0,QS=null,cD=null,gg=0,KS=null;function ta(){if((An&2)!==0&&en!==0)return en&-en;if(H.T!==null){var u=Xc;return u!==0?u:rw()}return $s()}function uD(){Fa===0&&(Fa=(en&536870912)===0||rn?de():536870912);var u=Na.current;return u!==null&&(u.flags|=32),Fa}function ea(u,f,_){(u===En&&(gn===2||gn===9)||u.cancelPendingCommit!==null)&&(Cd(u,0),au(u,en,Fa,!1)),ct(u,_),((An&2)===0||u!==En)&&(u===En&&((An&2)===0&&(gh|=_),Qn===4&&au(u,en,Fa,!1)),qo(u))}function hD(u,f,_){if((An&6)!==0)throw Error(n(327));var w=!_&&(f&124)===0&&(f&u.expiredLanes)===0||os(u,f),x=w?Vq(u,f):tw(u,f,!0),U=w;do{if(x===0){Bd&&!w&&au(u,f,0,!1);break}else{if(_=u.current.alternate,U&&!jq(_)){x=tw(u,f,!1),U=!1;continue}if(x===2){if(U=f,u.errorRecoveryDisabledLanes&U)var tt=0;else tt=u.pendingLanes&-536870913,tt=tt!==0?tt:tt&536870912?536870912:0;if(tt!==0){f=tt;t:{var at=u;x=Ag;var St=at.current.memoizedState.isDehydrated;if(St&&(Cd(at,tt).flags|=256),tt=tw(at,tt,!1),tt!==2){if(HS&&!St){at.errorRecoveryDisabledLanes|=U,gh|=U,x=4;break t}U=Cs,Cs=x,U!==null&&(Cs===null?Cs=U:Cs.push.apply(Cs,U))}x=tt}if(U=!1,x!==2)continue}}if(x===1){Cd(u,0),au(u,f,0,!0);break}t:{switch(w=u,U=x,U){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:au(w,f,Fa,!iu);break t;case 2:Cs=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(x=GS+300-dt(),10<x)){if(au(w,f,Fa,!iu),xn(w,0,!0)!==0)break t;w.timeoutHandle=jD(fD.bind(null,w,_,Cs,ub,YS,f,Fa,gh,Od,iu,U,2,-0,0),x);break t}fD(w,_,Cs,ub,YS,f,Fa,gh,Od,iu,U,0,-0,0)}}break}while(!0);qo(u)}function fD(u,f,_,w,x,U,tt,at,St,Kt,se,oe,Zt,Jt){if(u.timeoutHandle=-1,oe=f.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Tg={stylesheets:null,count:0,unsuspend:vY},sD(f),oe=SY(),oe!==null)){u.cancelPendingCommit=oe(_D.bind(null,u,f,U,_,w,x,tt,at,St,se,1,Zt,Jt)),au(u,U,tt,!Kt);return}_D(u,f,U,_,w,x,tt,at,St)}function jq(u){for(var f=u;;){var _=f.tag;if((_===0||_===11||_===15)&&f.flags&16384&&(_=f.updateQueue,_!==null&&(_=_.stores,_!==null)))for(var w=0;w<_.length;w++){var x=_[w],U=x.getSnapshot;x=x.value;try{if(!xr(U(),x))return!1}catch{return!1}}if(_=f.child,f.subtreeFlags&16384&&_!==null)_.return=f,f=_;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function au(u,f,_,w){f&=~qS,f&=~gh,u.suspendedLanes|=f,u.pingedLanes&=~f,w&&(u.warmLanes|=f),w=u.expirationTimes;for(var x=f;0<x;){var U=31-Be(x),tt=1<<U;w[U]=-1,x&=~tt}_!==0&&yn(u,_,f)}function hb(){return(An&6)===0?(yg(0),!1):!0}function ZS(){if(Gi!==null){if(gn===0)var u=Gi.return;else u=Gi,so=Fl=null,gS(u),wd=null,ag=0,u=Gi;for(;u!==null;)HR(u.alternate,u),u=u.return;Gi=null}}function Cd(u,f){var _=u.timeoutHandle;_!==-1&&(u.timeoutHandle=-1,rY(_)),_=u.cancelPendingCommit,_!==null&&(u.cancelPendingCommit=null,_()),ZS(),En=u,Gi=_=eo(u.current,null),en=f,gn=0,Js=null,iu=!1,Bd=os(u,f),HS=!1,Od=Fa=qS=gh=nu=Qn=0,Cs=Ag=null,YS=!1,(f&8)!==0&&(f|=f&32);var w=u.entangledLanes;if(w!==0)for(u=u.entanglements,w&=f;0<w;){var x=31-Be(w),U=1<<x;f|=u[x],w&=~U}return Yl=f,fd(),_}function dD(u,f){fe=null,H.H=Z1,f===Vo||f===xa?(f=v(),gn=3):f===jl?(f=v(),gn=4):gn=f===DR?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Js=f,Gi===null&&(Qn=1,nb(u,Is(f,u.current)))}function AD(){var u=H.H;return H.H=Z1,u===null?Z1:u}function gD(){var u=H.A;return H.A=Uq,u}function JS(){Qn=4,iu||(en&4194048)!==en&&Na.current!==null||(Bd=!0),(nu&134217727)===0&&(gh&134217727)===0||En===null||au(En,en,Fa,!1)}function tw(u,f,_){var w=An;An|=2;var x=AD(),U=gD();(En!==u||en!==f)&&(ub=null,Cd(u,f)),f=!1;var tt=Qn;t:do try{if(gn!==0&&Gi!==null){var at=Gi,St=Js;switch(gn){case 8:ZS(),tt=6;break t;case 3:case 2:case 9:case 6:Na.current===null&&(f=!0);var Kt=gn;if(gn=0,Js=null,Pd(u,at,St,Kt),_&&Bd){tt=0;break t}break;default:Kt=gn,gn=0,Js=null,Pd(u,at,St,Kt)}}zq(),tt=Qn;break}catch(se){dD(u,se)}while(!0);return f&&u.shellSuspendCounter++,so=Fl=null,An=w,H.H=x,H.A=U,Gi===null&&(En=null,en=0,fd()),tt}function zq(){for(;Gi!==null;)yD(Gi)}function Vq(u,f){var _=An;An|=2;var w=AD(),x=gD();En!==u||en!==f?(ub=null,cb=dt()+500,Cd(u,f)):Bd=os(u,f);t:do try{if(gn!==0&&Gi!==null){f=Gi;var U=Js;e:switch(gn){case 1:gn=0,Js=null,Pd(u,f,U,1);break;case 2:case 9:if(oo(U)){gn=0,Js=null,pD(f);break}f=function(){gn!==2&&gn!==9||En!==u||(gn=7),qo(u)},U.then(f,f);break t;case 3:gn=7;break t;case 4:gn=5;break t;case 7:oo(U)?(gn=0,Js=null,pD(f)):(gn=0,Js=null,Pd(u,f,U,7));break;case 5:var tt=null;switch(Gi.tag){case 26:tt=Gi.memoizedState;case 5:case 27:var at=Gi;if(!tt||ZD(tt)){gn=0,Js=null;var St=at.sibling;if(St!==null)Gi=St;else{var Kt=at.return;Kt!==null?(Gi=Kt,fb(Kt)):Gi=null}break e}}gn=0,Js=null,Pd(u,f,U,5);break;case 6:gn=0,Js=null,Pd(u,f,U,6);break;case 8:ZS(),Qn=6;break t;default:throw Error(n(462))}}$q();break}catch(se){dD(u,se)}while(!0);return so=Fl=null,H.H=w,H.A=x,An=_,Gi!==null?0:(En=null,en=0,fd(),Qn)}function $q(){for(;Gi!==null&&!Ee();)yD(Gi)}function yD(u){var f=$R(u.alternate,u,Yl);u.memoizedProps=u.pendingProps,f===null?fb(u):Gi=f}function pD(u){var f=u,_=f.alternate;switch(f.tag){case 15:case 0:f=LR(_,f,f.pendingProps,f.type,void 0,en);break;case 11:f=LR(_,f,f.pendingProps,f.type.render,f.ref,en);break;case 5:gS(f);default:HR(_,f),f=Gi=W1(f,Yl),f=$R(_,f,Yl)}u.memoizedProps=u.pendingProps,f===null?fb(u):Gi=f}function Pd(u,f,_,w){so=Fl=null,gS(f),wd=null,ag=0;var x=f.return;try{if(Cq(u,x,f,_,en)){Qn=1,nb(u,Is(_,u.current)),Gi=null;return}}catch(U){if(x!==null)throw Gi=x,U;Qn=1,nb(u,Is(_,u.current)),Gi=null;return}f.flags&32768?(rn||w===1?u=!0:Bd||(en&536870912)!==0?u=!1:(iu=u=!0,(w===2||w===9||w===3||w===6)&&(w=Na.current,w!==null&&w.tag===13&&(w.flags|=16384))),mD(f,u)):fb(f)}function fb(u){var f=u;do{if((f.flags&32768)!==0){mD(f,iu);return}u=f.return;var _=xq(f.alternate,f,Yl);if(_!==null){Gi=_;return}if(f=f.sibling,f!==null){Gi=f;return}Gi=f=u}while(f!==null);Qn===0&&(Qn=5)}function mD(u,f){do{var _=Nq(u.alternate,u);if(_!==null){_.flags&=32767,Gi=_;return}if(_=u.return,_!==null&&(_.flags|=32768,_.subtreeFlags=0,_.deletions=null),!f&&(u=u.sibling,u!==null)){Gi=u;return}Gi=u=_}while(u!==null);Qn=6,Gi=null}function _D(u,f,_,w,x,U,tt,at,St){u.cancelPendingCommit=null;do db();while(Ur!==0);if((An&6)!==0)throw Error(n(327));if(f!==null){if(f===u.current)throw Error(n(177));if(U=f.lanes|f.childLanes,U|=Y0,Mi(u,_,U,tt,at,St),u===En&&(Gi=En=null,en=0),Rd=f,su=u,Dd=_,XS=U,QS=x,cD=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,Yq(ee,function(){return wD(),null})):(u.callbackNode=null,u.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=H.T,H.T=null,x=k.p,k.p=2,tt=An,An|=4;try{Fq(u,f,_)}finally{An=tt,k.p=x,H.T=w}}Ur=1,bD(),vD(),TD()}}function bD(){if(Ur===1){Ur=0;var u=su,f=Rd,_=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||_){_=H.T,H.T=null;var w=k.p;k.p=2;var x=An;An|=4;try{iD(f,u);var U=fw,tt=$0(u.containerInfo),at=U.focusedElem,St=U.selectionRange;if(tt!==at&&at&&at.ownerDocument&&F1(at.ownerDocument.documentElement,at)){if(St!==null&&W0(at)){var Kt=St.start,se=St.end;if(se===void 0&&(se=Kt),"selectionStart"in at)at.selectionStart=Kt,at.selectionEnd=Math.min(se,at.value.length);else{var oe=at.ownerDocument||document,Zt=oe&&oe.defaultView||window;if(Zt.getSelection){var Jt=Zt.getSelection(),wi=at.textContent.length,ii=Math.min(St.start,wi),mn=St.end===void 0?ii:Math.min(St.end,wi);!Jt.extend&&ii>mn&&(tt=mn,mn=ii,ii=tt);var Vt=Rl(at,ii),Pt=Rl(at,mn);if(Vt&&Pt&&(Jt.rangeCount!==1||Jt.anchorNode!==Vt.node||Jt.anchorOffset!==Vt.offset||Jt.focusNode!==Pt.node||Jt.focusOffset!==Pt.offset)){var Yt=oe.createRange();Yt.setStart(Vt.node,Vt.offset),Jt.removeAllRanges(),ii>mn?(Jt.addRange(Yt),Jt.extend(Pt.node,Pt.offset)):(Yt.setEnd(Pt.node,Pt.offset),Jt.addRange(Yt))}}}}for(oe=[],Jt=at;Jt=Jt.parentNode;)Jt.nodeType===1&&oe.push({element:Jt,left:Jt.scrollLeft,top:Jt.scrollTop});for(typeof at.focus=="function"&&at.focus(),at=0;at<oe.length;at++){var ae=oe[at];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Mb=!!hw,fw=hw=null}finally{An=x,k.p=w,H.T=_}}u.current=f,Ur=2}}function vD(){if(Ur===2){Ur=0;var u=su,f=Rd,_=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||_){_=H.T,H.T=null;var w=k.p;k.p=2;var x=An;An|=4;try{ZR(u,f.alternate,f)}finally{An=x,k.p=w,H.T=_}}Ur=3}}function TD(){if(Ur===4||Ur===3){Ur=0,qe();var u=su,f=Rd,_=Dd,w=cD;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Ur=5:(Ur=0,Rd=su=null,SD(u,u.pendingLanes));var x=u.pendingLanes;if(x===0&&(ru=null),Kr(_),f=f.stateNode,re&&typeof re.onCommitFiberRoot=="function")try{re.onCommitFiberRoot(Mt,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=H.T,x=k.p,k.p=2,H.T=null;try{for(var U=u.onRecoverableError,tt=0;tt<w.length;tt++){var at=w[tt];U(at.value,{componentStack:at.stack})}}finally{H.T=f,k.p=x}}(Dd&3)!==0&&db(),qo(u),x=u.pendingLanes,(_&4194090)!==0&&(x&42)!==0?u===KS?gg++:(gg=0,KS=u):gg=0,yg(0)}}function SD(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Gc(f)))}function db(u){return bD(),vD(),TD(),wD()}function wD(){if(Ur!==5)return!1;var u=su,f=XS;XS=0;var _=Kr(Dd),w=H.T,x=k.p;try{k.p=32>_?32:_,H.T=null,_=QS,QS=null;var U=su,tt=Dd;if(Ur=0,Rd=su=null,Dd=0,(An&6)!==0)throw Error(n(331));var at=An;if(An|=4,oD(U.current),rD(U,U.current,tt,_),An=at,yg(0,!1),re&&typeof re.onPostCommitFiberRoot=="function")try{re.onPostCommitFiberRoot(Mt,U)}catch{}return!0}finally{k.p=x,H.T=w,SD(u,f)}}function MD(u,f,_){f=Is(_,f),f=OS(u.stateNode,f,2),u=z(u,f,2),u!==null&&(ct(u,2),qo(u))}function wn(u,f,_){if(u.tag===3)MD(u,u,_);else for(;f!==null;){if(f.tag===3){MD(f,u,_);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(ru===null||!ru.has(w))){u=Is(_,u),_=OR(2),w=z(f,_,2),w!==null&&(RR(_,w,f,u),ct(w,2),qo(w));break}}f=f.return}}function ew(u,f,_){var w=u.pingCache;if(w===null){w=u.pingCache=new kq;var x=new Set;w.set(f,x)}else x=w.get(f),x===void 0&&(x=new Set,w.set(f,x));x.has(_)||(HS=!0,x.add(_),u=Wq.bind(null,u,f,_),f.then(u,u))}function Wq(u,f,_){var w=u.pingCache;w!==null&&w.delete(f),u.pingedLanes|=u.suspendedLanes&_,u.warmLanes&=~_,En===u&&(en&_)===_&&(Qn===4||Qn===3&&(en&62914560)===en&&300>dt()-GS?(An&2)===0&&Cd(u,0):qS|=_,Od===en&&(Od=0)),qo(u)}function ID(u,f){f===0&&(f=Nc()),u=Wc(u,f),u!==null&&(ct(u,f),qo(u))}function Hq(u){var f=u.memoizedState,_=0;f!==null&&(_=f.retryLane),ID(u,_)}function qq(u,f){var _=0;switch(u.tag){case 13:var w=u.stateNode,x=u.memoizedState;x!==null&&(_=x.retryLane);break;case 19:w=u.stateNode;break;case 22:w=u.stateNode._retryCache;break;default:throw Error(n(314))}w!==null&&w.delete(f),ID(u,_)}function Yq(u,f){return Oe(u,f)}var Ab=null,xd=null,iw=!1,gb=!1,nw=!1,yh=0;function qo(u){u!==xd&&u.next===null&&(xd===null?Ab=xd=u:xd=xd.next=u),gb=!0,iw||(iw=!0,Xq())}function yg(u,f){if(!nw&&gb){nw=!0;do for(var _=!1,w=Ab;w!==null;){if(u!==0){var x=w.pendingLanes;if(x===0)var U=0;else{var tt=w.suspendedLanes,at=w.pingedLanes;U=(1<<31-Be(42|u)+1)-1,U&=x&~(tt&~at),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(_=!0,RD(w,U))}else U=en,U=xn(w,w===En?U:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(U&3)===0||os(w,U)||(_=!0,RD(w,U));w=w.next}while(_);nw=!1}}function Gq(){ED()}function ED(){gb=iw=!1;var u=0;yh!==0&&(nY()&&(u=yh),yh=0);for(var f=dt(),_=null,w=Ab;w!==null;){var x=w.next,U=BD(w,f);U===0?(w.next=null,_===null?Ab=x:_.next=x,x===null&&(xd=_)):(_=w,(u!==0||(U&3)!==0)&&(gb=!0)),w=x}yg(u)}function BD(u,f){for(var _=u.suspendedLanes,w=u.pingedLanes,x=u.expirationTimes,U=u.pendingLanes&-62914561;0<U;){var tt=31-Be(U),at=1<<tt,St=x[tt];St===-1?((at&_)===0||(at&w)!==0)&&(x[tt]=Ku(at,f)):St<=f&&(u.expiredLanes|=at),U&=~at}if(f=En,_=en,_=xn(u,u===f?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),w=u.callbackNode,_===0||u===f&&(gn===2||gn===9)||u.cancelPendingCommit!==null)return w!==null&&w!==null&&Ye(w),u.callbackNode=null,u.callbackPriority=0;if((_&3)===0||os(u,_)){if(f=_&-_,f===u.callbackPriority)return f;switch(w!==null&&Ye(w),Kr(_)){case 2:case 8:_=Ct;break;case 32:_=ee;break;case 268435456:_=J;break;default:_=ee}return w=OD.bind(null,u),_=Oe(_,w),u.callbackPriority=f,u.callbackNode=_,f}return w!==null&&w!==null&&Ye(w),u.callbackPriority=2,u.callbackNode=null,2}function OD(u,f){if(Ur!==0&&Ur!==5)return u.callbackNode=null,u.callbackPriority=0,null;var _=u.callbackNode;if(db()&&u.callbackNode!==_)return null;var w=en;return w=xn(u,u===En?w:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),w===0?null:(hD(u,w,f),BD(u,dt()),u.callbackNode!=null&&u.callbackNode===_?OD.bind(null,u):null)}function RD(u,f){if(db())return null;hD(u,f,!0)}function Xq(){sY(function(){(An&6)!==0?Oe(K,Gq):ED()})}function rw(){return yh===0&&(yh=de()),yh}function DD(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:Ju(""+u)}function CD(u,f){var _=f.ownerDocument.createElement("input");return _.name=f.name,_.value=f.value,u.id&&_.setAttribute("form",u.id),f.parentNode.insertBefore(_,f),u=new FormData(u),_.parentNode.removeChild(_),u}function Qq(u,f,_,w,x){if(f==="submit"&&_&&_.stateNode===x){var U=DD((x[ne]||null).action),tt=w.submitter;tt&&(f=(f=tt[ne]||null)?DD(f.formAction):tt.getAttribute("formAction"),f!==null&&(U=f,tt=null));var at=new id("action","action",null,w,x);u.push({event:at,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(yh!==0){var St=tt?CD(x,tt):new FormData(x);wS(_,{pending:!0,data:St,method:x.method,action:U},null,St)}}else typeof U=="function"&&(at.preventDefault(),St=tt?CD(x,tt):new FormData(x),wS(_,{pending:!0,data:St,method:x.method,action:U},U,St))},currentTarget:x}]})}}for(var sw=0;sw<hd.length;sw++){var aw=hd[sw],Kq=aw.toLowerCase(),Zq=aw[0].toUpperCase()+aw.slice(1);hs(Kq,"on"+Zq)}hs(U1,"onAnimationEnd"),hs(k1,"onAnimationIteration"),hs(j1,"onAnimationStart"),hs("dblclick","onDoubleClick"),hs("focusin","onFocus"),hs("focusout","onBlur"),hs(z1,"onTransitionRun"),hs(uS,"onTransitionStart"),hs(hS,"onTransitionCancel"),hs(V1,"onTransitionEnd"),Lo("onMouseEnter",["mouseout","mouseover"]),Lo("onMouseLeave",["mouseout","mouseover"]),Lo("onPointerEnter",["pointerout","pointerover"]),Lo("onPointerLeave",["pointerout","pointerover"]),_l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_l("onBeforeInput",["compositionend","keypress","textInput","paste"]),_l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Jq=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pg));function PD(u,f){f=(f&4)!==0;for(var _=0;_<u.length;_++){var w=u[_],x=w.event;w=w.listeners;t:{var U=void 0;if(f)for(var tt=w.length-1;0<=tt;tt--){var at=w[tt],St=at.instance,Kt=at.currentTarget;if(at=at.listener,St!==U&&x.isPropagationStopped())break t;U=at,x.currentTarget=Kt;try{U(x)}catch(se){ib(se)}x.currentTarget=null,U=St}else for(tt=0;tt<w.length;tt++){if(at=w[tt],St=at.instance,Kt=at.currentTarget,at=at.listener,St!==U&&x.isPropagationStopped())break t;U=at,x.currentTarget=Kt;try{U(x)}catch(se){ib(se)}x.currentTarget=null,U=St}}}}function Xi(u,f){var _=f[ce];_===void 0&&(_=f[ce]=new Set);var w=u+"__bubble";_.has(w)||(xD(f,u,2,!1),_.add(w))}function ow(u,f,_){var w=0;f&&(w|=4),xD(_,u,w,f)}var yb="_reactListening"+Math.random().toString(36).slice(2);function lw(u){if(!u[yb]){u[yb]=!0,cs.forEach(function(_){_!=="selectionchange"&&(Jq.has(_)||ow(_,!1,u),ow(_,!0,u))});var f=u.nodeType===9?u:u.ownerDocument;f===null||f[yb]||(f[yb]=!0,ow("selectionchange",!1,f))}}function xD(u,f,_,w){switch(r4(f)){case 2:var x=IY;break;case 8:x=EY;break;default:x=Tw}_=x.bind(null,f,_,u),x=void 0,!td||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(x=!0),w?x!==void 0?u.addEventListener(f,_,{capture:!0,passive:x}):u.addEventListener(f,_,!0):x!==void 0?u.addEventListener(f,_,{passive:x}):u.addEventListener(f,_,!1)}function cw(u,f,_,w,x){var U=w;if((f&1)===0&&(f&2)===0&&w!==null)t:for(;;){if(w===null)return;var tt=w.tag;if(tt===3||tt===4){var at=w.stateNode.containerInfo;if(at===x)break;if(tt===4)for(tt=w.return;tt!==null;){var St=tt.tag;if((St===3||St===4)&&tt.stateNode.containerInfo===x)return;tt=tt.return}for(;at!==null;){if(tt=bi(at),tt===null)return;if(St=tt.tag,St===5||St===6||St===26||St===27){w=U=tt;continue t}at=at.parentNode}}w=w.return}v1(function(){var Kt=U,se=R0(_),oe=[];t:{var Zt=ud.get(u);if(Zt!==void 0){var Jt=id,wi=u;switch(u){case"keypress":if(rh(_)===0)break t;case"keydown":case"keyup":Jt=ZT;break;case"focusin":wi="focus",Jt=kc;break;case"focusout":wi="blur",Jt=kc;break;case"beforeblur":case"afterblur":Jt=kc;break;case"click":if(_.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Jt=S1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Jt=QT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Jt=eS;break;case U1:case k1:case j1:Jt=M1;break;case V1:Jt=nS;break;case"scroll":case"scrollend":Jt=wl;break;case"wheel":Jt=rd;break;case"copy":case"cut":case"paste":Jt=nd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Jt=R1;break;case"toggle":case"beforetoggle":Jt=aS}var ii=(f&4)!==0,mn=!ii&&(u==="scroll"||u==="scrollend"),Vt=ii?Zt!==null?Zt+"Capture":null:Zt;ii=[];for(var Pt=Kt,Yt;Pt!==null;){var ae=Pt;if(Yt=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Yt===null||Vt===null||(ae=eh(Pt,Vt),ae!=null&&ii.push(mg(Pt,ae,Yt))),mn)break;Pt=Pt.return}0<ii.length&&(Zt=new Jt(Zt,wi,null,_,se),oe.push({event:Zt,listeners:ii}))}}if((f&7)===0){t:{if(Zt=u==="mouseover"||u==="pointerover",Jt=u==="mouseout"||u==="pointerout",Zt&&_!==O0&&(wi=_.relatedTarget||_.fromElement)&&(bi(wi)||wi[Ie]))break t;if((Jt||Zt)&&(Zt=se.window===se?se:(Zt=se.ownerDocument)?Zt.defaultView||Zt.parentWindow:window,Jt?(wi=_.relatedTarget||_.toElement,Jt=Kt,wi=wi?bi(wi):null,wi!==null&&(mn=s(wi),ii=wi.tag,wi!==mn||ii!==5&&ii!==27&&ii!==6)&&(wi=null)):(Jt=null,wi=Kt),Jt!==wi)){if(ii=S1,ae="onMouseLeave",Vt="onMouseEnter",Pt="mouse",(u==="pointerout"||u==="pointerover")&&(ii=R1,ae="onPointerLeave",Vt="onPointerEnter",Pt="pointer"),mn=Jt==null?Zt:Ts(Jt),Yt=wi==null?Zt:Ts(wi),Zt=new ii(ae,Pt+"leave",Jt,_,se),Zt.target=mn,Zt.relatedTarget=Yt,ae=null,bi(se)===Kt&&(ii=new ii(Vt,Pt+"enter",wi,_,se),ii.target=Yt,ii.relatedTarget=mn,ae=ii),mn=ae,Jt&&wi)e:{for(ii=Jt,Vt=wi,Pt=0,Yt=ii;Yt;Yt=Nd(Yt))Pt++;for(Yt=0,ae=Vt;ae;ae=Nd(ae))Yt++;for(;0<Pt-Yt;)ii=Nd(ii),Pt--;for(;0<Yt-Pt;)Vt=Nd(Vt),Yt--;for(;Pt--;){if(ii===Vt||Vt!==null&&ii===Vt.alternate)break e;ii=Nd(ii),Vt=Nd(Vt)}ii=null}else ii=null;Jt!==null&&ND(oe,Zt,Jt,ii,!1),wi!==null&&mn!==null&&ND(oe,mn,wi,ii,!0)}}t:{if(Zt=Kt?Ts(Kt):window,Jt=Zt.nodeName&&Zt.nodeName.toLowerCase(),Jt==="select"||Jt==="input"&&Zt.type==="file")var Ge=x1;else if(ad(Zt))if(N1)Ge=Ms;else{Ge=z0;var Wi=lS}else Jt=Zt.nodeName,!Jt||Jt.toLowerCase()!=="input"||Zt.type!=="checkbox"&&Zt.type!=="radio"?Kt&&E0(Kt.elementType)&&(Ge=x1):Ge=cS;if(Ge&&(Ge=Ge(u,Kt))){zc(oe,Ge,_,se);break t}Wi&&Wi(u,Zt,Kt),u==="focusout"&&Kt&&Zt.type==="number"&&Kt.memoizedProps.value!=null&&Hs(Zt,"number",Zt.value)}switch(Wi=Kt?Ts(Kt):window,u){case"focusin":(ad(Wi)||Wi.contentEditable==="true")&&(Vc=Wi,q0=Kt,Dl=null);break;case"focusout":Dl=q0=Vc=null;break;case"mousedown":ld=!0;break;case"contextmenu":case"mouseup":case"dragend":ld=!1,cd(oe,_,se);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":cd(oe,_,se)}var Ke;if(Bl)t:{switch(u){case"compositionstart":var hi="onCompositionStart";break t;case"compositionend":hi="onCompositionEnd";break t;case"compositionupdate":hi="onCompositionUpdate";break t}hi=void 0}else jc?sd(u,_)&&(hi="onCompositionEnd"):u==="keydown"&&_.keyCode===229&&(hi="onCompositionStart");hi&&(N0&&_.locale!=="ko"&&(jc||hi!=="onCompositionStart"?hi==="onCompositionEnd"&&jc&&(Ke=D0()):(Ia=se,nh="value"in Ia?Ia.value:Ia.textContent,jc=!0)),Wi=pb(Kt,hi),0<Wi.length&&(hi=new to(hi,u,null,_,se),oe.push({event:hi,listeners:Wi}),Ke?hi.data=Ke:(Ke=F0(_),Ke!==null&&(hi.data=Ke)))),(Ke=x0?C1(u,_):L0(u,_))&&(hi=pb(Kt,"onBeforeInput"),0<hi.length&&(Wi=new to("onBeforeInput","beforeinput",null,_,se),oe.push({event:Wi,listeners:hi}),Wi.data=Ke)),Qq(oe,u,Kt,_,se)}PD(oe,f)})}function mg(u,f,_){return{instance:u,listener:f,currentTarget:_}}function pb(u,f){for(var _=f+"Capture",w=[];u!==null;){var x=u,U=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||U===null||(x=eh(u,_),x!=null&&w.unshift(mg(u,x,U)),x=eh(u,f),x!=null&&w.push(mg(u,x,U))),u.tag===3)return w;u=u.return}return[]}function Nd(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function ND(u,f,_,w,x){for(var U=f._reactName,tt=[];_!==null&&_!==w;){var at=_,St=at.alternate,Kt=at.stateNode;if(at=at.tag,St!==null&&St===w)break;at!==5&&at!==26&&at!==27||Kt===null||(St=Kt,x?(Kt=eh(_,U),Kt!=null&&tt.unshift(mg(_,Kt,St))):x||(Kt=eh(_,U),Kt!=null&&tt.push(mg(_,Kt,St)))),_=_.return}tt.length!==0&&u.push({event:f,listeners:tt})}var tY=/\r\n?/g,eY=/\u0000|\uFFFD/g;function FD(u){return(typeof u=="string"?u:""+u).replace(tY,`
`).replace(eY,"")}function LD(u,f){return f=FD(f),FD(u)===f}function mb(){}function pn(u,f,_,w,x,U){switch(_){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||Fc(u,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&Fc(u,""+w);break;case"className":ws(u,"class",w);break;case"tabIndex":ws(u,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":ws(u,_,w);break;case"style":b1(u,w,U);break;case"data":if(f!=="object"){ws(u,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||_!=="href")){u.removeAttribute(_);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){u.removeAttribute(_);break}w=Ju(""+w),u.setAttribute(_,w);break;case"action":case"formAction":if(typeof w=="function"){u.setAttribute(_,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(_==="formAction"?(f!=="input"&&pn(u,f,"name",x.name,x,null),pn(u,f,"formEncType",x.formEncType,x,null),pn(u,f,"formMethod",x.formMethod,x,null),pn(u,f,"formTarget",x.formTarget,x,null)):(pn(u,f,"encType",x.encType,x,null),pn(u,f,"method",x.method,x,null),pn(u,f,"target",x.target,x,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){u.removeAttribute(_);break}w=Ju(""+w),u.setAttribute(_,w);break;case"onClick":w!=null&&(u.onclick=mb);break;case"onScroll":w!=null&&Xi("scroll",u);break;case"onScrollEnd":w!=null&&Xi("scrollend",u);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(_=w.__html,_!=null){if(x.children!=null)throw Error(n(60));u.innerHTML=_}}break;case"multiple":u.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":u.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){u.removeAttribute("xlink:href");break}_=Ju(""+w),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",_);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(_,""+w):u.removeAttribute(_);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(_,""):u.removeAttribute(_);break;case"capture":case"download":w===!0?u.setAttribute(_,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?u.setAttribute(_,w):u.removeAttribute(_);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?u.setAttribute(_,w):u.removeAttribute(_);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?u.removeAttribute(_):u.setAttribute(_,w);break;case"popover":Xi("beforetoggle",u),Xi("toggle",u),Gf(u,"popover",w);break;case"xlinkActuate":Ze(u,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":Ze(u,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":Ze(u,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":Ze(u,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":Ze(u,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":Ze(u,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":Ze(u,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":Ze(u,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":Ze(u,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Gf(u,"is",w);break;case"innerText":case"textContent":break;default:(!(2<_.length)||_[0]!=="o"&&_[0]!=="O"||_[1]!=="n"&&_[1]!=="N")&&(_=Sn.get(_)||_,Gf(u,_,w))}}function uw(u,f,_,w,x,U){switch(_){case"style":b1(u,w,U);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(_=w.__html,_!=null){if(x.children!=null)throw Error(n(60));u.innerHTML=_}}break;case"children":typeof w=="string"?Fc(u,w):(typeof w=="number"||typeof w=="bigint")&&Fc(u,""+w);break;case"onScroll":w!=null&&Xi("scroll",u);break;case"onScrollEnd":w!=null&&Xi("scrollend",u);break;case"onClick":w!=null&&(u.onclick=mb);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zu.hasOwnProperty(_))t:{if(_[0]==="o"&&_[1]==="n"&&(x=_.endsWith("Capture"),f=_.slice(2,x?_.length-7:void 0),U=u[ne]||null,U=U!=null?U[_]:null,typeof U=="function"&&u.removeEventListener(f,U,x),typeof w=="function")){typeof U!="function"&&U!==null&&(_ in u?u[_]=null:u.hasAttribute(_)&&u.removeAttribute(_)),u.addEventListener(f,w,x);break t}_ in u?u[_]=w:w===!0?u.setAttribute(_,""):Gf(u,_,w)}}}function kr(u,f,_){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xi("error",u),Xi("load",u);var w=!1,x=!1,U;for(U in _)if(_.hasOwnProperty(U)){var tt=_[U];if(tt!=null)switch(U){case"src":w=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:pn(u,f,U,tt,_,null)}}x&&pn(u,f,"srcSet",_.srcSet,_,null),w&&pn(u,f,"src",_.src,_,null);return;case"input":Xi("invalid",u);var at=U=tt=x=null,St=null,Kt=null;for(w in _)if(_.hasOwnProperty(w)){var se=_[w];if(se!=null)switch(w){case"name":x=se;break;case"type":tt=se;break;case"checked":St=se;break;case"defaultChecked":Kt=se;break;case"value":U=se;break;case"defaultValue":at=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(n(137,f));break;default:pn(u,f,w,se,_,null)}}I0(u,U,at,St,Kt,tt,x,!1),Xf(u);return;case"select":Xi("invalid",u),w=tt=U=null;for(x in _)if(_.hasOwnProperty(x)&&(at=_[x],at!=null))switch(x){case"value":U=at;break;case"defaultValue":tt=at;break;case"multiple":w=at;default:pn(u,f,x,at,_,null)}f=U,_=tt,u.multiple=!!w,f!=null?Rn(u,!!w,f,!1):_!=null&&Rn(u,!!w,_,!0);return;case"textarea":Xi("invalid",u),U=x=w=null;for(tt in _)if(_.hasOwnProperty(tt)&&(at=_[tt],at!=null))switch(tt){case"value":w=at;break;case"defaultValue":x=at;break;case"children":U=at;break;case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(91));break;default:pn(u,f,tt,at,_,null)}p1(u,w,x,U),Xf(u);return;case"option":for(St in _)if(_.hasOwnProperty(St)&&(w=_[St],w!=null))switch(St){case"selected":u.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:pn(u,f,St,w,_,null)}return;case"dialog":Xi("beforetoggle",u),Xi("toggle",u),Xi("cancel",u),Xi("close",u);break;case"iframe":case"object":Xi("load",u);break;case"video":case"audio":for(w=0;w<pg.length;w++)Xi(pg[w],u);break;case"image":Xi("error",u),Xi("load",u);break;case"details":Xi("toggle",u);break;case"embed":case"source":case"link":Xi("error",u),Xi("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Kt in _)if(_.hasOwnProperty(Kt)&&(w=_[Kt],w!=null))switch(Kt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:pn(u,f,Kt,w,_,null)}return;default:if(E0(f)){for(se in _)_.hasOwnProperty(se)&&(w=_[se],w!==void 0&&uw(u,f,se,w,_,void 0));return}}for(at in _)_.hasOwnProperty(at)&&(w=_[at],w!=null&&pn(u,f,at,w,_,null))}function iY(u,f,_,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,U=null,tt=null,at=null,St=null,Kt=null,se=null;for(Jt in _){var oe=_[Jt];if(_.hasOwnProperty(Jt)&&oe!=null)switch(Jt){case"checked":break;case"value":break;case"defaultValue":St=oe;default:w.hasOwnProperty(Jt)||pn(u,f,Jt,null,w,oe)}}for(var Zt in w){var Jt=w[Zt];if(oe=_[Zt],w.hasOwnProperty(Zt)&&(Jt!=null||oe!=null))switch(Zt){case"type":U=Jt;break;case"name":x=Jt;break;case"checked":Kt=Jt;break;case"defaultChecked":se=Jt;break;case"value":tt=Jt;break;case"defaultValue":at=Jt;break;case"children":case"dangerouslySetInnerHTML":if(Jt!=null)throw Error(n(137,f));break;default:Jt!==oe&&pn(u,f,Zt,Jt,w,oe)}}Kf(u,tt,at,St,Kt,se,U,x);return;case"select":Jt=tt=at=Zt=null;for(U in _)if(St=_[U],_.hasOwnProperty(U)&&St!=null)switch(U){case"value":break;case"multiple":Jt=St;default:w.hasOwnProperty(U)||pn(u,f,U,null,w,St)}for(x in w)if(U=w[x],St=_[x],w.hasOwnProperty(x)&&(U!=null||St!=null))switch(x){case"value":Zt=U;break;case"defaultValue":at=U;break;case"multiple":tt=U;default:U!==St&&pn(u,f,x,U,w,St)}f=at,_=tt,w=Jt,Zt!=null?Rn(u,!!_,Zt,!1):!!w!=!!_&&(f!=null?Rn(u,!!_,f,!0):Rn(u,!!_,_?[]:"",!1));return;case"textarea":Jt=Zt=null;for(at in _)if(x=_[at],_.hasOwnProperty(at)&&x!=null&&!w.hasOwnProperty(at))switch(at){case"value":break;case"children":break;default:pn(u,f,at,null,w,x)}for(tt in w)if(x=w[tt],U=_[tt],w.hasOwnProperty(tt)&&(x!=null||U!=null))switch(tt){case"value":Zt=x;break;case"defaultValue":Jt=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(n(91));break;default:x!==U&&pn(u,f,tt,x,w,U)}Zf(u,Zt,Jt);return;case"option":for(var wi in _)if(Zt=_[wi],_.hasOwnProperty(wi)&&Zt!=null&&!w.hasOwnProperty(wi))switch(wi){case"selected":u.selected=!1;break;default:pn(u,f,wi,null,w,Zt)}for(St in w)if(Zt=w[St],Jt=_[St],w.hasOwnProperty(St)&&Zt!==Jt&&(Zt!=null||Jt!=null))switch(St){case"selected":u.selected=Zt&&typeof Zt!="function"&&typeof Zt!="symbol";break;default:pn(u,f,St,Zt,w,Jt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ii in _)Zt=_[ii],_.hasOwnProperty(ii)&&Zt!=null&&!w.hasOwnProperty(ii)&&pn(u,f,ii,null,w,Zt);for(Kt in w)if(Zt=w[Kt],Jt=_[Kt],w.hasOwnProperty(Kt)&&Zt!==Jt&&(Zt!=null||Jt!=null))switch(Kt){case"children":case"dangerouslySetInnerHTML":if(Zt!=null)throw Error(n(137,f));break;default:pn(u,f,Kt,Zt,w,Jt)}return;default:if(E0(f)){for(var mn in _)Zt=_[mn],_.hasOwnProperty(mn)&&Zt!==void 0&&!w.hasOwnProperty(mn)&&uw(u,f,mn,void 0,w,Zt);for(se in w)Zt=w[se],Jt=_[se],!w.hasOwnProperty(se)||Zt===Jt||Zt===void 0&&Jt===void 0||uw(u,f,se,Zt,w,Jt);return}}for(var Vt in _)Zt=_[Vt],_.hasOwnProperty(Vt)&&Zt!=null&&!w.hasOwnProperty(Vt)&&pn(u,f,Vt,null,w,Zt);for(oe in w)Zt=w[oe],Jt=_[oe],!w.hasOwnProperty(oe)||Zt===Jt||Zt==null&&Jt==null||pn(u,f,oe,Zt,w,Jt)}var hw=null,fw=null;function _b(u){return u.nodeType===9?u:u.ownerDocument}function UD(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kD(u,f){if(u===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&f==="foreignObject"?0:u}function dw(u,f){return u==="textarea"||u==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var Aw=null;function nY(){var u=window.event;return u&&u.type==="popstate"?u===Aw?!1:(Aw=u,!0):(Aw=null,!1)}var jD=typeof setTimeout=="function"?setTimeout:void 0,rY=typeof clearTimeout=="function"?clearTimeout:void 0,zD=typeof Promise=="function"?Promise:void 0,sY=typeof queueMicrotask=="function"?queueMicrotask:typeof zD<"u"?function(u){return zD.resolve(null).then(u).catch(aY)}:jD;function aY(u){setTimeout(function(){throw u})}function ou(u){return u==="head"}function VD(u,f){var _=f,w=0,x=0;do{var U=_.nextSibling;if(u.removeChild(_),U&&U.nodeType===8)if(_=U.data,_==="/$"){if(0<w&&8>w){_=w;var tt=u.ownerDocument;if(_&1&&_g(tt.documentElement),_&2&&_g(tt.body),_&4)for(_=tt.head,_g(_),tt=_.firstChild;tt;){var at=tt.nextSibling,St=tt.nodeName;tt[Qi]||St==="SCRIPT"||St==="STYLE"||St==="LINK"&&tt.rel.toLowerCase()==="stylesheet"||_.removeChild(tt),tt=at}}if(x===0){u.removeChild(U),Eg(f);return}x--}else _==="$"||_==="$?"||_==="$!"?x++:w=_.charCodeAt(0)-48;else w=0;_=U}while(_);Eg(f)}function gw(u){var f=u.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var _=f;switch(f=f.nextSibling,_.nodeName){case"HTML":case"HEAD":case"BODY":gw(_),Gn(_);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(_.rel.toLowerCase()==="stylesheet")continue}u.removeChild(_)}}function oY(u,f,_,w){for(;u.nodeType===1;){var x=_;if(u.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(w){if(!u[Qi])switch(f){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(U=u.getAttribute("rel"),U==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(U!==x.rel||u.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||u.getAttribute("title")!==(x.title==null?null:x.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(U=u.getAttribute("src"),(U!==(x.src==null?null:x.src)||u.getAttribute("type")!==(x.type==null?null:x.type)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&U&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(f==="input"&&u.type==="hidden"){var U=x.name==null?null:""+x.name;if(x.type==="hidden"&&u.getAttribute("name")===U)return u}else return u;if(u=co(u.nextSibling),u===null)break}return null}function lY(u,f,_){if(f==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!_||(u=co(u.nextSibling),u===null))return null;return u}function yw(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function cY(u,f){var _=u.ownerDocument;if(u.data!=="$?"||_.readyState==="complete")f();else{var w=function(){f(),_.removeEventListener("DOMContentLoaded",w)};_.addEventListener("DOMContentLoaded",w),u._reactRetry=w}}function co(u){for(;u!=null;u=u.nextSibling){var f=u.nodeType;if(f===1||f===3)break;if(f===8){if(f=u.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return u}var pw=null;function $D(u){u=u.previousSibling;for(var f=0;u;){if(u.nodeType===8){var _=u.data;if(_==="$"||_==="$!"||_==="$?"){if(f===0)return u;f--}else _==="/$"&&f++}u=u.previousSibling}return null}function WD(u,f,_){switch(f=_b(_),u){case"html":if(u=f.documentElement,!u)throw Error(n(452));return u;case"head":if(u=f.head,!u)throw Error(n(453));return u;case"body":if(u=f.body,!u)throw Error(n(454));return u;default:throw Error(n(451))}}function _g(u){for(var f=u.attributes;f.length;)u.removeAttributeNode(f[0]);Gn(u)}var La=new Map,HD=new Set;function bb(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var Gl=k.d;k.d={f:uY,r:hY,D:fY,C:dY,L:AY,m:gY,X:pY,S:yY,M:mY};function uY(){var u=Gl.f(),f=hb();return u||f}function hY(u){var f=ki(u);f!==null&&f.tag===5&&f.type==="form"?hR(f):Gl.r(u)}var Fd=typeof document>"u"?null:document;function qD(u,f,_){var w=Fd;if(w&&typeof f=="string"&&f){var x=us(f);x='link[rel="'+u+'"][href="'+x+'"]',typeof _=="string"&&(x+='[crossorigin="'+_+'"]'),HD.has(x)||(HD.add(x),u={rel:u,crossOrigin:_,href:f},w.querySelector(x)===null&&(f=w.createElement("link"),kr(f,"link",u),Xe(f),w.head.appendChild(f)))}}function fY(u){Gl.D(u),qD("dns-prefetch",u,null)}function dY(u,f){Gl.C(u,f),qD("preconnect",u,f)}function AY(u,f,_){Gl.L(u,f,_);var w=Fd;if(w&&u&&f){var x='link[rel="preload"][as="'+us(f)+'"]';f==="image"&&_&&_.imageSrcSet?(x+='[imagesrcset="'+us(_.imageSrcSet)+'"]',typeof _.imageSizes=="string"&&(x+='[imagesizes="'+us(_.imageSizes)+'"]')):x+='[href="'+us(u)+'"]';var U=x;switch(f){case"style":U=Ld(u);break;case"script":U=Ud(u)}La.has(U)||(u=h({rel:"preload",href:f==="image"&&_&&_.imageSrcSet?void 0:u,as:f},_),La.set(U,u),w.querySelector(x)!==null||f==="style"&&w.querySelector(bg(U))||f==="script"&&w.querySelector(vg(U))||(f=w.createElement("link"),kr(f,"link",u),Xe(f),w.head.appendChild(f)))}}function gY(u,f){Gl.m(u,f);var _=Fd;if(_&&u){var w=f&&typeof f.as=="string"?f.as:"script",x='link[rel="modulepreload"][as="'+us(w)+'"][href="'+us(u)+'"]',U=x;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=Ud(u)}if(!La.has(U)&&(u=h({rel:"modulepreload",href:u},f),La.set(U,u),_.querySelector(x)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(_.querySelector(vg(U)))return}w=_.createElement("link"),kr(w,"link",u),Xe(w),_.head.appendChild(w)}}}function yY(u,f,_){Gl.S(u,f,_);var w=Fd;if(w&&u){var x=$i(w).hoistableStyles,U=Ld(u);f=f||"default";var tt=x.get(U);if(!tt){var at={loading:0,preload:null};if(tt=w.querySelector(bg(U)))at.loading=5;else{u=h({rel:"stylesheet",href:u,"data-precedence":f},_),(_=La.get(U))&&mw(u,_);var St=tt=w.createElement("link");Xe(St),kr(St,"link",u),St._p=new Promise(function(Kt,se){St.onload=Kt,St.onerror=se}),St.addEventListener("load",function(){at.loading|=1}),St.addEventListener("error",function(){at.loading|=2}),at.loading|=4,vb(tt,f,w)}tt={type:"stylesheet",instance:tt,count:1,state:at},x.set(U,tt)}}}function pY(u,f){Gl.X(u,f);var _=Fd;if(_&&u){var w=$i(_).hoistableScripts,x=Ud(u),U=w.get(x);U||(U=_.querySelector(vg(x)),U||(u=h({src:u,async:!0},f),(f=La.get(x))&&_w(u,f),U=_.createElement("script"),Xe(U),kr(U,"link",u),_.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},w.set(x,U))}}function mY(u,f){Gl.M(u,f);var _=Fd;if(_&&u){var w=$i(_).hoistableScripts,x=Ud(u),U=w.get(x);U||(U=_.querySelector(vg(x)),U||(u=h({src:u,async:!0,type:"module"},f),(f=La.get(x))&&_w(u,f),U=_.createElement("script"),Xe(U),kr(U,"link",u),_.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},w.set(x,U))}}function YD(u,f,_,w){var x=(x=ft.current)?bb(x):null;if(!x)throw Error(n(446));switch(u){case"meta":case"title":return null;case"style":return typeof _.precedence=="string"&&typeof _.href=="string"?(f=Ld(_.href),_=$i(x).hoistableStyles,w=_.get(f),w||(w={type:"style",instance:null,count:0,state:null},_.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(_.rel==="stylesheet"&&typeof _.href=="string"&&typeof _.precedence=="string"){u=Ld(_.href);var U=$i(x).hoistableStyles,tt=U.get(u);if(tt||(x=x.ownerDocument||x,tt={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(u,tt),(U=x.querySelector(bg(u)))&&!U._p&&(tt.instance=U,tt.state.loading=5),La.has(u)||(_={rel:"preload",as:"style",href:_.href,crossOrigin:_.crossOrigin,integrity:_.integrity,media:_.media,hrefLang:_.hrefLang,referrerPolicy:_.referrerPolicy},La.set(u,_),U||_Y(x,u,_,tt.state))),f&&w===null)throw Error(n(528,""));return tt}if(f&&w!==null)throw Error(n(529,""));return null;case"script":return f=_.async,_=_.src,typeof _=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Ud(_),_=$i(x).hoistableScripts,w=_.get(f),w||(w={type:"script",instance:null,count:0,state:null},_.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,u))}}function Ld(u){return'href="'+us(u)+'"'}function bg(u){return'link[rel="stylesheet"]['+u+"]"}function GD(u){return h({},u,{"data-precedence":u.precedence,precedence:null})}function _Y(u,f,_,w){u.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=u.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),kr(f,"link",_),Xe(f),u.head.appendChild(f))}function Ud(u){return'[src="'+us(u)+'"]'}function vg(u){return"script[async]"+u}function XD(u,f,_){if(f.count++,f.instance===null)switch(f.type){case"style":var w=u.querySelector('style[data-href~="'+us(_.href)+'"]');if(w)return f.instance=w,Xe(w),w;var x=h({},_,{"data-href":_.href,"data-precedence":_.precedence,href:null,precedence:null});return w=(u.ownerDocument||u).createElement("style"),Xe(w),kr(w,"style",x),vb(w,_.precedence,u),f.instance=w;case"stylesheet":x=Ld(_.href);var U=u.querySelector(bg(x));if(U)return f.state.loading|=4,f.instance=U,Xe(U),U;w=GD(_),(x=La.get(x))&&mw(w,x),U=(u.ownerDocument||u).createElement("link"),Xe(U);var tt=U;return tt._p=new Promise(function(at,St){tt.onload=at,tt.onerror=St}),kr(U,"link",w),f.state.loading|=4,vb(U,_.precedence,u),f.instance=U;case"script":return U=Ud(_.src),(x=u.querySelector(vg(U)))?(f.instance=x,Xe(x),x):(w=_,(x=La.get(U))&&(w=h({},_),_w(w,x)),u=u.ownerDocument||u,x=u.createElement("script"),Xe(x),kr(x,"link",w),u.head.appendChild(x),f.instance=x);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,vb(w,_.precedence,u));return f.instance}function vb(u,f,_){for(var w=_.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=w.length?w[w.length-1]:null,U=x,tt=0;tt<w.length;tt++){var at=w[tt];if(at.dataset.precedence===f)U=at;else if(U!==x)break}U?U.parentNode.insertBefore(u,U.nextSibling):(f=_.nodeType===9?_.head:_,f.insertBefore(u,f.firstChild))}function mw(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.title==null&&(u.title=f.title)}function _w(u,f){u.crossOrigin==null&&(u.crossOrigin=f.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=f.referrerPolicy),u.integrity==null&&(u.integrity=f.integrity)}var Tb=null;function QD(u,f,_){if(Tb===null){var w=new Map,x=Tb=new Map;x.set(_,w)}else x=Tb,w=x.get(_),w||(w=new Map,x.set(_,w));if(w.has(u))return w;for(w.set(u,null),_=_.getElementsByTagName(u),x=0;x<_.length;x++){var U=_[x];if(!(U[Qi]||U[Gt]||u==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var tt=U.getAttribute(f)||"";tt=u+tt;var at=w.get(tt);at?at.push(U):w.set(tt,[U])}}return w}function KD(u,f,_){u=u.ownerDocument||u,u.head.insertBefore(_,f==="title"?u.querySelector("head > title"):null)}function bY(u,f,_){if(_===1||f.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return u=f.disabled,typeof f.precedence=="string"&&u==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function ZD(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Tg=null;function vY(){}function TY(u,f,_){if(Tg===null)throw Error(n(475));var w=Tg;if(f.type==="stylesheet"&&(typeof _.media!="string"||matchMedia(_.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var x=Ld(_.href),U=u.querySelector(bg(x));if(U){u=U._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(w.count++,w=Sb.bind(w),u.then(w,w)),f.state.loading|=4,f.instance=U,Xe(U);return}U=u.ownerDocument||u,_=GD(_),(x=La.get(x))&&mw(_,x),U=U.createElement("link"),Xe(U);var tt=U;tt._p=new Promise(function(at,St){tt.onload=at,tt.onerror=St}),kr(U,"link",_),f.instance=U}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(f,u),(u=f.state.preload)&&(f.state.loading&3)===0&&(w.count++,f=Sb.bind(w),u.addEventListener("load",f),u.addEventListener("error",f))}}function SY(){if(Tg===null)throw Error(n(475));var u=Tg;return u.stylesheets&&u.count===0&&bw(u,u.stylesheets),0<u.count?function(f){var _=setTimeout(function(){if(u.stylesheets&&bw(u,u.stylesheets),u.unsuspend){var w=u.unsuspend;u.unsuspend=null,w()}},6e4);return u.unsuspend=f,function(){u.unsuspend=null,clearTimeout(_)}}:null}function Sb(){if(this.count--,this.count===0){if(this.stylesheets)bw(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var wb=null;function bw(u,f){u.stylesheets=null,u.unsuspend!==null&&(u.count++,wb=new Map,f.forEach(wY,u),wb=null,Sb.call(u))}function wY(u,f){if(!(f.state.loading&4)){var _=wb.get(u);if(_)var w=_.get(null);else{_=new Map,wb.set(u,_);for(var x=u.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<x.length;U++){var tt=x[U];(tt.nodeName==="LINK"||tt.getAttribute("media")!=="not all")&&(_.set(tt.dataset.precedence,tt),w=tt)}w&&_.set(null,w)}x=f.instance,tt=x.getAttribute("data-precedence"),U=_.get(tt)||w,U===w&&_.set(null,x),_.set(tt,x),this.count++,w=Sb.bind(this),x.addEventListener("load",w),x.addEventListener("error",w),U?U.parentNode.insertBefore(x,U.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(x,u.firstChild)),f.state.loading|=4}}var Sg={$$typeof:B,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function MY(u,f,_,w,x,U,tt,at){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.hiddenUpdates=yt(null),this.identifierPrefix=w,this.onUncaughtError=x,this.onCaughtError=U,this.onRecoverableError=tt,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=at,this.incompleteTransitions=new Map}function JD(u,f,_,w,x,U,tt,at,St,Kt,se,oe){return u=new MY(u,f,_,tt,at,St,Kt,oe),f=1,U===!0&&(f|=24),U=fs(3,null,null,f),u.current=U,U.stateNode=u,f=rr(),f.refCount++,u.pooledCache=f,f.refCount++,U.memoizedState={element:w,isDehydrated:_,cache:f},R(U),u}function t4(u){return u?(u=Cl,u):Cl}function e4(u,f,_,w,x,U){x=t4(x),w.context===null?w.context=x:w.pendingContext=x,w=L(f),w.payload={element:_},U=U===void 0?null:U,U!==null&&(w.callback=U),_=z(u,w,f),_!==null&&(ea(_,u,f),W(_,u,f))}function i4(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var _=u.retryLane;u.retryLane=_!==0&&_<f?_:f}}function vw(u,f){i4(u,f),(u=u.alternate)&&i4(u,f)}function n4(u){if(u.tag===13){var f=Wc(u,67108864);f!==null&&ea(f,u,67108864),vw(u,67108864)}}var Mb=!0;function IY(u,f,_,w){var x=H.T;H.T=null;var U=k.p;try{k.p=2,Tw(u,f,_,w)}finally{k.p=U,H.T=x}}function EY(u,f,_,w){var x=H.T;H.T=null;var U=k.p;try{k.p=8,Tw(u,f,_,w)}finally{k.p=U,H.T=x}}function Tw(u,f,_,w){if(Mb){var x=Sw(w);if(x===null)cw(u,f,w,Ib,_),s4(u,w);else if(OY(x,u,f,_,w))w.stopPropagation();else if(s4(u,w),f&4&&-1<BY.indexOf(u)){for(;x!==null;){var U=ki(x);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var tt=Tn(U.pendingLanes);if(tt!==0){var at=U;for(at.pendingLanes|=2,at.entangledLanes|=2;tt;){var St=1<<31-Be(tt);at.entanglements[1]|=St,tt&=~St}qo(U),(An&6)===0&&(cb=dt()+500,yg(0))}}break;case 13:at=Wc(U,2),at!==null&&ea(at,U,2),hb(),vw(U,2)}if(U=Sw(w),U===null&&cw(u,f,w,Ib,_),U===x)break;x=U}x!==null&&w.stopPropagation()}else cw(u,f,w,null,_)}}function Sw(u){return u=R0(u),ww(u)}var Ib=null;function ww(u){if(Ib=null,u=bi(u),u!==null){var f=s(u);if(f===null)u=null;else{var _=f.tag;if(_===13){if(u=a(f),u!==null)return u;u=null}else if(_===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;u=null}else f!==u&&(u=null)}}return Ib=u,null}function r4(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Y()){case K:return 2;case Ct:return 8;case ee:case Ft:return 32;case J:return 268435456;default:return 32}default:return 32}}var Mw=!1,lu=null,cu=null,uu=null,wg=new Map,Mg=new Map,hu=[],BY="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s4(u,f){switch(u){case"focusin":case"focusout":lu=null;break;case"dragenter":case"dragleave":cu=null;break;case"mouseover":case"mouseout":uu=null;break;case"pointerover":case"pointerout":wg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mg.delete(f.pointerId)}}function Ig(u,f,_,w,x,U){return u===null||u.nativeEvent!==U?(u={blockedOn:f,domEventName:_,eventSystemFlags:w,nativeEvent:U,targetContainers:[x]},f!==null&&(f=ki(f),f!==null&&n4(f)),u):(u.eventSystemFlags|=w,f=u.targetContainers,x!==null&&f.indexOf(x)===-1&&f.push(x),u)}function OY(u,f,_,w,x){switch(f){case"focusin":return lu=Ig(lu,u,f,_,w,x),!0;case"dragenter":return cu=Ig(cu,u,f,_,w,x),!0;case"mouseover":return uu=Ig(uu,u,f,_,w,x),!0;case"pointerover":var U=x.pointerId;return wg.set(U,Ig(wg.get(U)||null,u,f,_,w,x)),!0;case"gotpointercapture":return U=x.pointerId,Mg.set(U,Ig(Mg.get(U)||null,u,f,_,w,x)),!0}return!1}function a4(u){var f=bi(u.target);if(f!==null){var _=s(f);if(_!==null){if(f=_.tag,f===13){if(f=a(_),f!==null){u.blockedOn=f,T0(u.priority,function(){if(_.tag===13){var w=ta();w=Sr(w);var x=Wc(_,w);x!==null&&ea(x,_,w),vw(_,w)}});return}}else if(f===3&&_.stateNode.current.memoizedState.isDehydrated){u.blockedOn=_.tag===3?_.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Eb(u){if(u.blockedOn!==null)return!1;for(var f=u.targetContainers;0<f.length;){var _=Sw(u.nativeEvent);if(_===null){_=u.nativeEvent;var w=new _.constructor(_.type,_);O0=w,_.target.dispatchEvent(w),O0=null}else return f=ki(_),f!==null&&n4(f),u.blockedOn=_,!1;f.shift()}return!0}function o4(u,f,_){Eb(u)&&_.delete(f)}function RY(){Mw=!1,lu!==null&&Eb(lu)&&(lu=null),cu!==null&&Eb(cu)&&(cu=null),uu!==null&&Eb(uu)&&(uu=null),wg.forEach(o4),Mg.forEach(o4)}function Bb(u,f){u.blockedOn===f&&(u.blockedOn=null,Mw||(Mw=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,RY)))}var Ob=null;function l4(u){Ob!==u&&(Ob=u,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ob===u&&(Ob=null);for(var f=0;f<u.length;f+=3){var _=u[f],w=u[f+1],x=u[f+2];if(typeof w!="function"){if(ww(w||_)===null)continue;break}var U=ki(_);U!==null&&(u.splice(f,3),f-=3,wS(U,{pending:!0,data:x,method:_.method,action:w},w,x))}}))}function Eg(u){function f(St){return Bb(St,u)}lu!==null&&Bb(lu,u),cu!==null&&Bb(cu,u),uu!==null&&Bb(uu,u),wg.forEach(f),Mg.forEach(f);for(var _=0;_<hu.length;_++){var w=hu[_];w.blockedOn===u&&(w.blockedOn=null)}for(;0<hu.length&&(_=hu[0],_.blockedOn===null);)a4(_),_.blockedOn===null&&hu.shift();if(_=(u.ownerDocument||u).$$reactFormReplay,_!=null)for(w=0;w<_.length;w+=3){var x=_[w],U=_[w+1],tt=x[ne]||null;if(typeof U=="function")tt||l4(_);else if(tt){var at=null;if(U&&U.hasAttribute("formAction")){if(x=U,tt=U[ne]||null)at=tt.formAction;else if(ww(x)!==null)continue}else at=tt.action;typeof at=="function"?_[w+1]=at:(_.splice(w,3),w-=3),l4(_)}}}function Iw(u){this._internalRoot=u}Rb.prototype.render=Iw.prototype.render=function(u){var f=this._internalRoot;if(f===null)throw Error(n(409));var _=f.current,w=ta();e4(_,w,u,f,null,null)},Rb.prototype.unmount=Iw.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var f=u.containerInfo;e4(u.current,2,null,u,null,null),hb(),f[Ie]=null}};function Rb(u){this._internalRoot=u}Rb.prototype.unstable_scheduleHydration=function(u){if(u){var f=$s();u={blockedOn:null,target:u,priority:f};for(var _=0;_<hu.length&&f!==0&&f<hu[_].priority;_++);hu.splice(_,0,u),_===0&&a4(u)}};var c4=e.version;if(c4!=="19.1.0")throw Error(n(527,c4,"19.1.0"));k.findDOMNode=function(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(n(188)):(u=Object.keys(u).join(","),Error(n(268,u)));return u=l(f),u=u!==null?c(u):null,u=u===null?null:u.stateNode,u};var DY={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Db=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Db.isDisabled&&Db.supportsFiber)try{Mt=Db.inject(DY),re=Db}catch{}}return Og.createRoot=function(u,f){if(!r(u))throw Error(n(299));var _=!1,w="",x=MR,U=IR,tt=ER,at=null;return f!=null&&(f.unstable_strictMode===!0&&(_=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(x=f.onUncaughtError),f.onCaughtError!==void 0&&(U=f.onCaughtError),f.onRecoverableError!==void 0&&(tt=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(at=f.unstable_transitionCallbacks)),f=JD(u,1,!1,null,null,_,w,x,U,tt,at,null),u[Ie]=f.current,lw(u),new Iw(f)},Og.hydrateRoot=function(u,f,_){if(!r(u))throw Error(n(299));var w=!1,x="",U=MR,tt=IR,at=ER,St=null,Kt=null;return _!=null&&(_.unstable_strictMode===!0&&(w=!0),_.identifierPrefix!==void 0&&(x=_.identifierPrefix),_.onUncaughtError!==void 0&&(U=_.onUncaughtError),_.onCaughtError!==void 0&&(tt=_.onCaughtError),_.onRecoverableError!==void 0&&(at=_.onRecoverableError),_.unstable_transitionCallbacks!==void 0&&(St=_.unstable_transitionCallbacks),_.formState!==void 0&&(Kt=_.formState)),f=JD(u,1,!0,f,_??null,w,x,U,tt,at,St,Kt),f.context=t4(null),_=f.current,w=ta(),w=Sr(w),x=L(w),x.callback=null,z(_,x,w),_=w,f.current.lanes=_,ct(f,_),qo(f),u[Ie]=f.current,lw(u),new Rb(f)},Og.version="19.1.0",Og}var _4;function VY(){if(_4)return Bw.exports;_4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Bw.exports=zY(),Bw.exports}var $Y=VY(),Fe=sE(),AM=function(t,e){return AM=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},AM(t,e)};function gk(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");AM(t,e);function i(){this.constructor=t}t.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}var xv=function(){return xv=Object.assign||function(e){for(var i,n=1,r=arguments.length;n<r;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},xv.apply(this,arguments)};function yk(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i}function pk(t,e,i,n){var r=arguments.length,s=r<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,i,n);else for(var o=t.length-1;o>=0;o--)(a=t[o])&&(s=(r<3?a(s):r>3?a(e,i,s):a(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function mk(t,e){return function(i,n){e(i,n,t)}}function _k(t,e,i,n,r,s){function a(O){if(O!==void 0&&typeof O!="function")throw new TypeError("Function expected");return O}for(var o=n.kind,l=o==="getter"?"get":o==="setter"?"set":"value",c=!e&&t?n.static?t:t.prototype:null,h=e||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),A,m=!1,b=i.length-1;b>=0;b--){var S={};for(var M in n)S[M]=M==="access"?{}:n[M];for(var M in n.access)S.access[M]=n.access[M];S.addInitializer=function(O){if(m)throw new TypeError("Cannot add initializers after decoration has completed");s.push(a(O||null))};var I=(0,i[b])(o==="accessor"?{get:h.get,set:h.set}:h[l],S);if(o==="accessor"){if(I===void 0)continue;if(I===null||typeof I!="object")throw new TypeError("Object expected");(A=a(I.get))&&(h.get=A),(A=a(I.set))&&(h.set=A),(A=a(I.init))&&r.unshift(A)}else(A=a(I))&&(o==="field"?r.unshift(A):h[l]=A)}c&&Object.defineProperty(c,n.name,h),m=!0}function bk(t,e,i){for(var n=arguments.length>2,r=0;r<e.length;r++)i=n?e[r].call(t,i):e[r].call(t);return n?i:void 0}function vk(t){return typeof t=="symbol"?t:"".concat(t)}function Tk(t,e,i){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:i?"".concat(i," ",e):e})}function Sk(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function wk(t,e,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(n.next(h))}catch(A){a(A)}}function l(h){try{c(n.throw(h))}catch(A){a(A)}}function c(h){h.done?s(h.value):r(h.value).then(o,l)}c((n=n.apply(t,e||[])).next())})}function Mk(t,e){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,r,s,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(h){return l([c,h])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(s=c[0]&2?r.return:c[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,c[1])).done)return s;switch(r=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(s=i.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){i=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){i.label=c[1];break}if(c[0]===6&&i.label<s[1]){i.label=s[1],s=c;break}if(s&&i.label<s[2]){i.label=s[2],i.ops.push(c);break}s[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(h){c=[6,h],r=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var eT=Object.create?function(t,e,i,n){n===void 0&&(n=i);var r=Object.getOwnPropertyDescriptor(e,i);(!r||("get"in r?!e.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,r)}:function(t,e,i,n){n===void 0&&(n=i),t[n]=e[i]};function Ik(t,e){for(var i in t)i!=="default"&&!Object.prototype.hasOwnProperty.call(e,i)&&eT(e,t,i)}function Nv(t){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&t[e],n=0;if(i)return i.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function aE(t,e){var i=typeof Symbol=="function"&&t[Symbol.iterator];if(!i)return t;var n=i.call(t),r,s=[],a;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(o){a={error:o}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(a)throw a.error}}return s}function Ek(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(aE(arguments[e]));return t}function Bk(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;for(var n=Array(t),r=0,e=0;e<i;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,r++)n[r]=s[a];return n}function Ok(t,e,i){if(i||arguments.length===2)for(var n=0,r=e.length,s;n<r;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}function NA(t){return this instanceof NA?(this.v=t,this):new NA(t)}function Rk(t,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=i.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(b){return function(S){return Promise.resolve(S).then(b,A)}}function o(b,S){n[b]&&(r[b]=function(M){return new Promise(function(I,O){s.push([b,M,I,O])>1||l(b,M)})},S&&(r[b]=S(r[b])))}function l(b,S){try{c(n[b](S))}catch(M){m(s[0][3],M)}}function c(b){b.value instanceof NA?Promise.resolve(b.value.v).then(h,A):m(s[0][2],b)}function h(b){l("next",b)}function A(b){l("throw",b)}function m(b,S){b(S),s.shift(),s.length&&l(s[0][0],s[0][1])}}function Dk(t){var e,i;return e={},n("next"),n("throw",function(r){throw r}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(r,s){e[r]=t[r]?function(a){return(i=!i)?{value:NA(t[r](a)),done:!1}:s?s(a):a}:s}}function Ck(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof Nv=="function"?Nv(t):t[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(s){i[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),r(o,l,a.done,a.value)})}}function r(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}}function Pk(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var WY=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},gM=function(t){return gM=Object.getOwnPropertyNames||function(e){var i=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[i.length]=n);return i},gM(t)};function xk(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var i=gM(t),n=0;n<i.length;n++)i[n]!=="default"&&eT(e,t,i[n]);return WY(e,t),e}function Nk(t){return t&&t.__esModule?t:{default:t}}function Fk(t,e,i,n){if(i==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?n:i==="a"?n.call(t):n?n.value:e.get(t)}function Lk(t,e,i,n,r){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?r.call(t,i):r?r.value=i:e.set(t,i),i}function Uk(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function kk(t,e,i){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,r;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],i&&(r=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");r&&(n=function(){try{r.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:n,async:i})}else i&&t.stack.push({async:!0});return e}var HY=typeof SuppressedError=="function"?SuppressedError:function(t,e,i){var n=new Error(i);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function jk(t){function e(s){t.error=t.hasError?new HY(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var i,n=0;function r(){for(;i=t.stack.pop();)try{if(!i.async&&n===1)return n=0,t.stack.push(i),Promise.resolve().then(r);if(i.dispose){var s=i.dispose.call(i.value);if(i.async)return n|=2,Promise.resolve(s).then(r,function(a){return e(a),r()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return r()}function zk(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(i,n,r,s,a){return n?e?".jsx":".js":r&&(!s||!a)?i:r+s+"."+a.toLowerCase()+"js"}):t}const qY={__extends:gk,__assign:xv,__rest:yk,__decorate:pk,__param:mk,__esDecorate:_k,__runInitializers:bk,__propKey:vk,__setFunctionName:Tk,__metadata:Sk,__awaiter:wk,__generator:Mk,__createBinding:eT,__exportStar:Ik,__values:Nv,__read:aE,__spread:Ek,__spreadArrays:Bk,__spreadArray:Ok,__await:NA,__asyncGenerator:Rk,__asyncDelegator:Dk,__asyncValues:Ck,__makeTemplateObject:Pk,__importStar:xk,__importDefault:Nk,__classPrivateFieldGet:Fk,__classPrivateFieldSet:Lk,__classPrivateFieldIn:Uk,__addDisposableResource:kk,__disposeResources:jk,__rewriteRelativeImportExtension:zk},YY=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:kk,get __assign(){return xv},__asyncDelegator:Dk,__asyncGenerator:Rk,__asyncValues:Ck,__await:NA,__awaiter:wk,__classPrivateFieldGet:Fk,__classPrivateFieldIn:Uk,__classPrivateFieldSet:Lk,__createBinding:eT,__decorate:pk,__disposeResources:jk,__esDecorate:_k,__exportStar:Ik,__extends:gk,__generator:Mk,__importDefault:Nk,__importStar:xk,__makeTemplateObject:Pk,__metadata:Sk,__param:mk,__propKey:vk,__read:aE,__rest:yk,__rewriteRelativeImportExtension:zk,__runInitializers:bk,__setFunctionName:Tk,__spread:Ek,__spreadArray:Ok,__spreadArrays:Bk,__values:Nv,default:qY},Symbol.toStringTag,{value:"Module"})),GY=new TextDecoder("utf-8"),XY=t=>GY.decode(t),QY=new TextEncoder,Vk=t=>QY.encode(t),ph=t=>typeof t=="function",$k=t=>t!=null&&Object(t)===t,KY=t=>$k(t)&&"done"in t&&"value"in t,ZY=t=>$k(t)&&ph(t.clear)&&ph(t.bytes)&&ph(t.position)&&ph(t.setPosition)&&ph(t.capacity)&&ph(t.getBufferIdentifier)&&ph(t.createLong),JY=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function tG(t,e,i=0,n=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(n,r));return s.set(a,i),t}function Vr(t,e){let i=KY(e)?e.value:e;return i instanceof t?t===Uint8Array?new t(i.buffer,i.byteOffset,i.byteLength):i:i?(typeof i=="string"&&(i=Vk(i)),i instanceof ArrayBuffer?new t(i):i instanceof JY?new t(i):ZY(i)?Vr(t,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new t(0):new t(i.buffer,i.byteOffset,i.byteLength/t.BYTES_PER_ELEMENT):t.from(i)):new t(0)}const Rg=t=>Vr(Int32Array,t),b4=t=>Vr(BigInt64Array,t),jn=t=>Vr(Uint8Array,t);function eG(t,e){let i=0;const n=t.length;if(n!==e.length)return!1;if(n>0)do if(t[i]!==e[i])return!1;while(++i<n);return!0}var yM;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(yM||(yM={}));var hl;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(hl||(hl={}));var qr;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(qr||(qr={}));var Cu;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Cu||(Cu={}));var zi;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(zi||(zi={}));var ff;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(ff||(ff={}));const hv=2,Eo=4,tl=4,Wk=4,bc=new Int32Array(2),pM=new Float32Array(bc.buffer),mM=new Float64Array(bc.buffer),Cm=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Fv;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(Fv||(Fv={}));class u_{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new u_(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return bc[0]=this.readInt32(e),pM[0]}readFloat64(e){return bc[Cm?0:1]=this.readInt32(e),bc[Cm?1:0]=this.readInt32(e+4),mM[0]}writeInt8(e,i){this.bytes_[e]=i}writeUint8(e,i){this.bytes_[e]=i}writeInt16(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8}writeUint16(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8}writeInt32(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24}writeUint32(e,i){this.bytes_[e]=i,this.bytes_[e+1]=i>>8,this.bytes_[e+2]=i>>16,this.bytes_[e+3]=i>>24}writeInt64(e,i){this.writeInt32(e,Number(BigInt.asIntN(32,i))),this.writeInt32(e+4,Number(BigInt.asIntN(32,i>>BigInt(32))))}writeUint64(e,i){this.writeUint32(e,Number(BigInt.asUintN(32,i))),this.writeUint32(e+4,Number(BigInt.asUintN(32,i>>BigInt(32))))}writeFloat32(e,i){pM[0]=i,this.writeInt32(e,bc[0])}writeFloat64(e,i){mM[0]=i,this.writeInt32(e,bc[Cm?0:1]),this.writeInt32(e+4,bc[Cm?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Eo+tl)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let i=0;i<tl;i++)e+=String.fromCharCode(this.readInt8(this.position_+Eo+i));return e}__offset(e,i){const n=e-this.readInt32(e);return i<this.readInt16(n)?this.readInt16(n+i):0}__union(e,i){return e.bb_pos=i+this.readInt32(i),e.bb=this,e}__string(e,i){e+=this.readInt32(e);const n=this.readInt32(e);e+=Eo;const r=this.bytes_.subarray(e,e+n);return i===Fv.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,i){return typeof e=="string"?this.__string(i):this.__union(e,i)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Eo}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=tl)throw new Error("FlatBuffers: file identifier must be length "+tl);for(let i=0;i<tl;i++)if(e.charCodeAt(i)!=this.readInt8(this.position()+Eo+i))return!1;return!0}createScalarList(e,i){const n=[];for(let r=0;r<i;++r){const s=e(r);s!==null&&n.push(s)}return n}createObjList(e,i){const n=[];for(let r=0;r<i;++r){const s=e(r);s!==null&&n.push(s.unpack())}return n}}let iG=class Hk{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let i;e?i=e:i=1024,this.bb=u_.allocate(i),this.space=i}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,i){e>this.minalign&&(this.minalign=e);const n=~(this.bb.capacity()-this.space+i)+1&e-1;for(;this.space<n+e+i;){const r=this.bb.capacity();this.bb=Hk.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(n)}pad(e){for(let i=0;i<e;i++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,i,n){(this.force_defaults||i!=n)&&(this.addInt8(i),this.slot(e))}addFieldInt16(e,i,n){(this.force_defaults||i!=n)&&(this.addInt16(i),this.slot(e))}addFieldInt32(e,i,n){(this.force_defaults||i!=n)&&(this.addInt32(i),this.slot(e))}addFieldInt64(e,i,n){(this.force_defaults||i!==n)&&(this.addInt64(i),this.slot(e))}addFieldFloat32(e,i,n){(this.force_defaults||i!=n)&&(this.addFloat32(i),this.slot(e))}addFieldFloat64(e,i,n){(this.force_defaults||i!=n)&&(this.addFloat64(i),this.slot(e))}addFieldOffset(e,i,n){(this.force_defaults||i!=n)&&(this.addOffset(i),this.slot(e))}addFieldStruct(e,i,n){i!=n&&(this.nested(i),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const i=e.capacity();if(i&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=i<<1,r=u_.allocate(n);return r.setPosition(n-i),r.bytes().set(e.bytes(),n-i),r}addOffset(e){this.prep(Eo,0),this.writeInt32(this.offset()-e+Eo)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let i=0;i<e;i++)this.vtable[i]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let i=this.vtable_in_use-1;for(;i>=0&&this.vtable[i]==0;i--);const n=i+1;for(;i>=0;i--)this.addInt16(this.vtable[i]!=0?e-this.vtable[i]:0);const r=2;this.addInt16(e-this.object_start);const s=(n+r)*hv;this.addInt16(s);let a=0;const o=this.space;t:for(i=0;i<this.vtables.length;i++){const l=this.bb.capacity()-this.vtables[i];if(s==this.bb.readInt16(l)){for(let c=hv;c<s;c+=hv)if(this.bb.readInt16(o+c)!=this.bb.readInt16(l+c))continue t;a=this.vtables[i];break}}return a?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,a-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,i,n){const r=n?Wk:0;if(i){const s=i;if(this.prep(this.minalign,Eo+tl+r),s.length!=tl)throw new TypeError("FlatBuffers: file identifier must be length "+tl);for(let a=tl-1;a>=0;a--)this.writeInt8(s.charCodeAt(a))}this.prep(this.minalign,Eo+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,i){this.finish(e,i,!0)}requiredField(e,i){const n=this.bb.capacity()-e,r=n-this.bb.readInt32(n);if(!(i<this.bb.readInt16(r)&&this.bb.readInt16(r+i)!=0))throw new TypeError("FlatBuffers: field "+i+" must be set")}startVector(e,i,n){this.notNested(),this.vector_num_elems=i,this.prep(Eo,e*i),this.prep(n,e*i)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const i=this.createString(e);return this.string_maps.set(e,i),i}createString(e){if(e==null)return 0;let i;return e instanceof Uint8Array?i=e:i=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,i.length,1),this.bb.setPosition(this.space-=i.length),this.bb.bytes().set(i,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const i=[];for(let n=0;n<e.length;++n){const r=e[n];if(r!==null)i.push(this.createObjectOffset(r));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return i}createStructOffsetList(e,i){return i(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};const nG=Object.freeze(Object.defineProperty({__proto__:null,Builder:iG,ByteBuffer:u_,get Encoding(){return Fv},FILE_IDENTIFIER_LENGTH:tl,SIZEOF_INT:Eo,SIZEOF_SHORT:hv,SIZE_PREFIX_LENGTH:Wk,float32:pM,float64:mM,int32:bc,isLittleEndian:Cm},Symbol.toStringTag,{value:"Module"}));var Ut;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"})(Ut||(Ut={}));var _c;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(_c||(_c={}));const rG=void 0;function df(t){if(t===null)return"null";if(t===rG)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>df(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,i)=>typeof i=="bigint"?`${i}`:i)}function ps(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}function qk(t,e){return ps(t/e)+ps(t%e)/ps(e)}const sG=Symbol.for("isArrowBigNum");function xo(t,...e){return e.length===0?Object.setPrototypeOf(Vr(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}xo.prototype[sG]=!0;xo.prototype.toJSON=function(){return`"${f_(this)}"`};xo.prototype.valueOf=function(t){return Yk(this,t)};xo.prototype.toString=function(){return f_(this)};xo.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Yk(this);case"string":return f_(this);case"default":return lG(this)}return f_(this)};function _A(...t){return xo.apply(this,t)}function bA(...t){return xo.apply(this,t)}function h_(...t){return xo.apply(this,t)}Object.setPrototypeOf(_A.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(bA.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(h_.prototype,Object.create(Uint32Array.prototype));Object.assign(_A.prototype,xo.prototype,{constructor:_A,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(bA.prototype,xo.prototype,{constructor:bA,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(h_.prototype,xo.prototype,{constructor:h_,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const aG=BigInt(4294967296)*BigInt(4294967296),oG=aG-BigInt(1);function Yk(t,e){const{buffer:i,byteOffset:n,byteLength:r,signed:s}=t,a=new BigUint64Array(i,n,r/8),o=s&&a.at(-1)&BigInt(1)<<BigInt(63);let l=BigInt(0),c=0;if(o){for(const h of a)l|=(h^oG)*(BigInt(1)<<BigInt(64*c++));l*=BigInt(-1),l-=BigInt(1)}else for(const h of a)l|=h*(BigInt(1)<<BigInt(64*c++));if(typeof e=="number"){const h=BigInt(Math.pow(10,e)),A=l/h,m=l%h;return ps(A)+ps(m)/ps(h)}return ps(l)}function f_(t){if(t.byteLength===8)return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`;if(!t.signed)return Pw(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return Pw(t);e=e.slice();let n=1;for(let s=0;s<e.length;s++){const a=e[s],o=~a+n;e[s]=o,n&=a===0?1:0}return`-${Pw(e)}`}function lG(t){return t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:f_(t)}function Pw(t){let e="";const i=new Uint32Array(2);let n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let s=-1;const a=n.length-1;do{for(i[0]=n[s=0];s<a;)n[s++]=i[1]=i[0]/10,i[0]=(i[0]-i[1]*10<<16)+n[s];n[s]=i[1]=i[0]/10,i[0]=i[0]-i[1]*10,e=`${i[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e??"0"}let cG=class Gk{static new(e,i){switch(i){case!0:return new _A(e);case!1:return new bA(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new _A(e)}return e.byteLength===16?new h_(e):new bA(e)}static signed(e){return new _A(e)}static unsigned(e){return new bA(e)}static decimal(e){return new h_(e)}constructor(e,i){return Gk.new(e,i)}};var Xk,Qk,Kk,Zk,Jk,tj,ej,ij,nj,rj,sj,aj,oj,lj,cj,uj,hj,fj,dj,Aj,gj,yj;let di=class _M{static isNull(e){return(e==null?void 0:e.typeId)===Ut.Null}static isInt(e){return(e==null?void 0:e.typeId)===Ut.Int}static isFloat(e){return(e==null?void 0:e.typeId)===Ut.Float}static isBinary(e){return(e==null?void 0:e.typeId)===Ut.Binary}static isLargeBinary(e){return(e==null?void 0:e.typeId)===Ut.LargeBinary}static isUtf8(e){return(e==null?void 0:e.typeId)===Ut.Utf8}static isLargeUtf8(e){return(e==null?void 0:e.typeId)===Ut.LargeUtf8}static isBool(e){return(e==null?void 0:e.typeId)===Ut.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===Ut.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===Ut.Date}static isTime(e){return(e==null?void 0:e.typeId)===Ut.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===Ut.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===Ut.Interval}static isDuration(e){return(e==null?void 0:e.typeId)===Ut.Duration}static isList(e){return(e==null?void 0:e.typeId)===Ut.List}static isStruct(e){return(e==null?void 0:e.typeId)===Ut.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===Ut.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===Ut.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===Ut.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===Ut.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===Ut.Dictionary}static isDenseUnion(e){return _M.isUnion(e)&&e.mode===hl.Dense}static isSparseUnion(e){return _M.isUnion(e)&&e.mode===hl.Sparse}constructor(e){this.typeId=e}};Xk=Symbol.toStringTag;di[Xk]=(t=>(t.children=null,t.ArrayType=Array,t.OffsetArrayType=Int32Array,t[Symbol.toStringTag]="DataType"))(di.prototype);let Lv=class extends di{constructor(){super(Ut.Null)}toString(){return"Null"}};Qk=Symbol.toStringTag;Lv[Qk]=(t=>t[Symbol.toStringTag]="Null")(Lv.prototype);let fl=class extends di{constructor(e,i){super(Ut.Int),this.isSigned=e,this.bitWidth=i}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}};Kk=Symbol.toStringTag;fl[Kk]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(fl.prototype);class pj extends fl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class mj extends fl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class _j extends fl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class bj extends fl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class vj extends fl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Tj extends fl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Sj extends fl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class wj extends fl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(pj.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(mj.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(_j.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(bj.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(vj.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Tj.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Sj.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(wj.prototype,"ArrayType",{value:BigUint64Array});let FA=class extends di{constructor(e){super(Ut.Float),this.precision=e}get ArrayType(){switch(this.precision){case qr.HALF:return Uint16Array;case qr.SINGLE:return Float32Array;case qr.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}};Zk=Symbol.toStringTag;FA[Zk]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(FA.prototype);class Mj extends FA{constructor(){super(qr.SINGLE)}}class Af extends FA{constructor(){super(qr.DOUBLE)}}Object.defineProperty(Mj.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Af.prototype,"ArrayType",{value:Float64Array});let bM=class extends di{constructor(){super(Ut.Binary)}toString(){return"Binary"}};Jk=Symbol.toStringTag;bM[Jk]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(bM.prototype);let v4=class extends di{constructor(){super(Ut.LargeBinary)}toString(){return"LargeBinary"}};tj=Symbol.toStringTag;v4[tj]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(v4.prototype);let T4=class extends di{constructor(){super(Ut.Utf8)}toString(){return"Utf8"}};ej=Symbol.toStringTag;T4[ej]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(T4.prototype);let S4=class extends di{constructor(){super(Ut.LargeUtf8)}toString(){return"LargeUtf8"}};ij=Symbol.toStringTag;S4[ij]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(S4.prototype);let vM=class extends di{constructor(){super(Ut.Bool)}toString(){return"Bool"}};nj=Symbol.toStringTag;vM[nj]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(vM.prototype);let w4=class extends di{constructor(e,i,n=128){super(Ut.Decimal),this.scale=e,this.precision=i,this.bitWidth=n}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};rj=Symbol.toStringTag;w4[rj]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(w4.prototype);let M4=class extends di{constructor(e){super(Ut.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${Cu[this.unit]}>`}get ArrayType(){return this.unit===Cu.DAY?Int32Array:BigInt64Array}};sj=Symbol.toStringTag;M4[sj]=(t=>(t.unit=null,t[Symbol.toStringTag]="Date"))(M4.prototype);let I4=class extends di{constructor(e,i){super(Ut.Time),this.unit=e,this.bitWidth=i}toString(){return`Time${this.bitWidth}<${zi[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}};aj=Symbol.toStringTag;I4[aj]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(I4.prototype);let E4=class extends di{constructor(e,i){super(Ut.Timestamp),this.unit=e,this.timezone=i}toString(){return`Timestamp<${zi[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}};oj=Symbol.toStringTag;E4[oj]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Timestamp"))(E4.prototype);let B4=class extends di{constructor(e){super(Ut.Interval),this.unit=e}toString(){return`Interval<${ff[this.unit]}>`}};lj=Symbol.toStringTag;B4[lj]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(B4.prototype);let O4=class extends di{constructor(e){super(Ut.Duration),this.unit=e}toString(){return`Duration<${zi[this.unit]}>`}};cj=Symbol.toStringTag;O4[cj]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(O4.prototype);let Pu=class extends di{constructor(e){super(Ut.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};uj=Symbol.toStringTag;Pu[uj]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(Pu.prototype);let el=class extends di{constructor(e){super(Ut.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}};hj=Symbol.toStringTag;el[hj]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(el.prototype);let R4=class extends di{constructor(e,i,n){super(Ut.Union),this.mode=e,this.children=n,this.typeIds=i=Int32Array.from(i),this.typeIdToChildIndex=i.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}};fj=Symbol.toStringTag;R4[fj]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(R4.prototype);let D4=class extends di{constructor(e){super(Ut.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};dj=Symbol.toStringTag;D4[dj]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(D4.prototype);let LA=class extends di{constructor(e,i){super(Ut.FixedSizeList),this.listSize=e,this.children=[i]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Aj=Symbol.toStringTag;LA[Aj]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(LA.prototype);let C4=class extends di{constructor(e,i=!1){var n,r,s;if(super(Ut.Map),this.children=[e],this.keysSorted=i,e&&(e.name="entries",!((n=e==null?void 0:e.type)===null||n===void 0)&&n.children)){const a=(r=e==null?void 0:e.type)===null||r===void 0?void 0:r.children[0];a&&(a.name="key");const o=(s=e==null?void 0:e.type)===null||s===void 0?void 0:s.children[1];o&&(o.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}};gj=Symbol.toStringTag;C4[gj]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(C4.prototype);const uG=(t=>()=>++t)(-1);let P4=class extends di{constructor(e,i,n,r){super(Ut.Dictionary),this.indices=i,this.dictionary=e,this.isOrdered=r||!1,this.id=n==null?uG():ps(n)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}};yj=Symbol.toStringTag;P4[yj]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(P4.prototype);function Ko(t){const e=t;switch(t.typeId){case Ut.Decimal:return t.bitWidth/32;case Ut.Interval:return 1+e.unit;case Ut.FixedSizeList:return e.listSize;case Ut.FixedSizeBinary:return e.byteWidth;default:return 1}}let Zi=class{visitMany(e,...i){return e.map((n,r)=>this.visit(n,...i.map(s=>s[r])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,i=!0){return hG(this,e,i)}getVisitFnByTypeId(e,i=!0){return Xd(this,e,i)}visitNull(e,...i){return null}visitBool(e,...i){return null}visitInt(e,...i){return null}visitFloat(e,...i){return null}visitUtf8(e,...i){return null}visitLargeUtf8(e,...i){return null}visitBinary(e,...i){return null}visitLargeBinary(e,...i){return null}visitFixedSizeBinary(e,...i){return null}visitDate(e,...i){return null}visitTimestamp(e,...i){return null}visitTime(e,...i){return null}visitDecimal(e,...i){return null}visitList(e,...i){return null}visitStruct(e,...i){return null}visitUnion(e,...i){return null}visitDictionary(e,...i){return null}visitInterval(e,...i){return null}visitDuration(e,...i){return null}visitFixedSizeList(e,...i){return null}visitMap(e,...i){return null}};function hG(t,e,i=!0){return typeof e=="number"?Xd(t,e,i):typeof e=="string"&&e in Ut?Xd(t,Ut[e],i):e&&e instanceof di?Xd(t,x4(e),i):e!=null&&e.type&&e.type instanceof di?Xd(t,x4(e.type),i):Xd(t,Ut.NONE,i)}function Xd(t,e,i=!0){let n=null;switch(e){case Ut.Null:n=t.visitNull;break;case Ut.Bool:n=t.visitBool;break;case Ut.Int:n=t.visitInt;break;case Ut.Int8:n=t.visitInt8||t.visitInt;break;case Ut.Int16:n=t.visitInt16||t.visitInt;break;case Ut.Int32:n=t.visitInt32||t.visitInt;break;case Ut.Int64:n=t.visitInt64||t.visitInt;break;case Ut.Uint8:n=t.visitUint8||t.visitInt;break;case Ut.Uint16:n=t.visitUint16||t.visitInt;break;case Ut.Uint32:n=t.visitUint32||t.visitInt;break;case Ut.Uint64:n=t.visitUint64||t.visitInt;break;case Ut.Float:n=t.visitFloat;break;case Ut.Float16:n=t.visitFloat16||t.visitFloat;break;case Ut.Float32:n=t.visitFloat32||t.visitFloat;break;case Ut.Float64:n=t.visitFloat64||t.visitFloat;break;case Ut.Utf8:n=t.visitUtf8;break;case Ut.LargeUtf8:n=t.visitLargeUtf8;break;case Ut.Binary:n=t.visitBinary;break;case Ut.LargeBinary:n=t.visitLargeBinary;break;case Ut.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case Ut.Date:n=t.visitDate;break;case Ut.DateDay:n=t.visitDateDay||t.visitDate;break;case Ut.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case Ut.Timestamp:n=t.visitTimestamp;break;case Ut.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case Ut.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case Ut.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case Ut.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case Ut.Time:n=t.visitTime;break;case Ut.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case Ut.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case Ut.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case Ut.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case Ut.Decimal:n=t.visitDecimal;break;case Ut.List:n=t.visitList;break;case Ut.Struct:n=t.visitStruct;break;case Ut.Union:n=t.visitUnion;break;case Ut.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case Ut.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case Ut.Dictionary:n=t.visitDictionary;break;case Ut.Interval:n=t.visitInterval;break;case Ut.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case Ut.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case Ut.Duration:n=t.visitDuration;break;case Ut.DurationSecond:n=t.visitDurationSecond||t.visitDuration;break;case Ut.DurationMillisecond:n=t.visitDurationMillisecond||t.visitDuration;break;case Ut.DurationMicrosecond:n=t.visitDurationMicrosecond||t.visitDuration;break;case Ut.DurationNanosecond:n=t.visitDurationNanosecond||t.visitDuration;break;case Ut.FixedSizeList:n=t.visitFixedSizeList;break;case Ut.Map:n=t.visitMap;break}if(typeof n=="function")return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${Ut[e]}'`)}function x4(t){switch(t.typeId){case Ut.Null:return Ut.Null;case Ut.Int:{const{bitWidth:e,isSigned:i}=t;switch(e){case 8:return i?Ut.Int8:Ut.Uint8;case 16:return i?Ut.Int16:Ut.Uint16;case 32:return i?Ut.Int32:Ut.Uint32;case 64:return i?Ut.Int64:Ut.Uint64}return Ut.Int}case Ut.Float:switch(t.precision){case qr.HALF:return Ut.Float16;case qr.SINGLE:return Ut.Float32;case qr.DOUBLE:return Ut.Float64}return Ut.Float;case Ut.Binary:return Ut.Binary;case Ut.LargeBinary:return Ut.LargeBinary;case Ut.Utf8:return Ut.Utf8;case Ut.LargeUtf8:return Ut.LargeUtf8;case Ut.Bool:return Ut.Bool;case Ut.Decimal:return Ut.Decimal;case Ut.Time:switch(t.unit){case zi.SECOND:return Ut.TimeSecond;case zi.MILLISECOND:return Ut.TimeMillisecond;case zi.MICROSECOND:return Ut.TimeMicrosecond;case zi.NANOSECOND:return Ut.TimeNanosecond}return Ut.Time;case Ut.Timestamp:switch(t.unit){case zi.SECOND:return Ut.TimestampSecond;case zi.MILLISECOND:return Ut.TimestampMillisecond;case zi.MICROSECOND:return Ut.TimestampMicrosecond;case zi.NANOSECOND:return Ut.TimestampNanosecond}return Ut.Timestamp;case Ut.Date:switch(t.unit){case Cu.DAY:return Ut.DateDay;case Cu.MILLISECOND:return Ut.DateMillisecond}return Ut.Date;case Ut.Interval:switch(t.unit){case ff.DAY_TIME:return Ut.IntervalDayTime;case ff.YEAR_MONTH:return Ut.IntervalYearMonth}return Ut.Interval;case Ut.Duration:switch(t.unit){case zi.SECOND:return Ut.DurationSecond;case zi.MILLISECOND:return Ut.DurationMillisecond;case zi.MICROSECOND:return Ut.DurationMicrosecond;case zi.NANOSECOND:return Ut.DurationNanosecond}return Ut.Duration;case Ut.Map:return Ut.Map;case Ut.List:return Ut.List;case Ut.Struct:return Ut.Struct;case Ut.Union:switch(t.mode){case hl.Dense:return Ut.DenseUnion;case hl.Sparse:return Ut.SparseUnion}return Ut.Union;case Ut.FixedSizeBinary:return Ut.FixedSizeBinary;case Ut.FixedSizeList:return Ut.FixedSizeList;case Ut.Dictionary:return Ut.Dictionary}throw new Error(`Unrecognized type '${Ut[t.typeId]}'`)}Zi.prototype.visitInt8=null;Zi.prototype.visitInt16=null;Zi.prototype.visitInt32=null;Zi.prototype.visitInt64=null;Zi.prototype.visitUint8=null;Zi.prototype.visitUint16=null;Zi.prototype.visitUint32=null;Zi.prototype.visitUint64=null;Zi.prototype.visitFloat16=null;Zi.prototype.visitFloat32=null;Zi.prototype.visitFloat64=null;Zi.prototype.visitDateDay=null;Zi.prototype.visitDateMillisecond=null;Zi.prototype.visitTimestampSecond=null;Zi.prototype.visitTimestampMillisecond=null;Zi.prototype.visitTimestampMicrosecond=null;Zi.prototype.visitTimestampNanosecond=null;Zi.prototype.visitTimeSecond=null;Zi.prototype.visitTimeMillisecond=null;Zi.prototype.visitTimeMicrosecond=null;Zi.prototype.visitTimeNanosecond=null;Zi.prototype.visitDenseUnion=null;Zi.prototype.visitSparseUnion=null;Zi.prototype.visitIntervalDayTime=null;Zi.prototype.visitIntervalYearMonth=null;Zi.prototype.visitDuration=null;Zi.prototype.visitDurationSecond=null;Zi.prototype.visitDurationMillisecond=null;Zi.prototype.visitDurationMicrosecond=null;Zi.prototype.visitDurationNanosecond=null;const Ij=new Float64Array(1),kd=new Uint32Array(Ij.buffer);function Ej(t){const e=(t&31744)>>10,i=(t&1023)/1024,n=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,e-15)*(1+i)}function fG(t){if(t!==t)return 32256;Ij[0]=t;const e=(kd[1]&2147483648)>>16&65535;let i=kd[1]&2146435072,n=0;return i>=1089470464?kd[0]>0?i=31744:(i=(i&2080374784)>>16,n=(kd[1]&1048575)>>10):i<=1056964608?(n=1048576+(kd[1]&1048575),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=(kd[1]&1048575)+512>>10),e|i|n&65535}let Ai=class extends Zi{};function Ti(t){return(e,i,n)=>{if(e.setValid(i,n!=null))return t(e,i,n)}}const dG=(t,e,i)=>{t[e]=Math.floor(i/864e5)},Bj=(t,e,i,n)=>{if(i+1<e.length){const r=ps(e[i]),s=ps(e[i+1]);t.set(n.subarray(0,s-r),r)}},AG=({offset:t,values:e},i,n)=>{const r=t+i;n?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)},Ec=({values:t},e,i)=>{t[e]=i},oE=({values:t},e,i)=>{t[e]=i},Oj=({values:t},e,i)=>{t[e]=fG(i)},gG=(t,e,i)=>{switch(t.type.precision){case qr.HALF:return Oj(t,e,i);case qr.SINGLE:case qr.DOUBLE:return oE(t,e,i)}},Rj=({values:t},e,i)=>{dG(t,e,i.valueOf())},Dj=({values:t},e,i)=>{t[e]=BigInt(i)},yG=({stride:t,values:e},i,n)=>{e.set(n.subarray(0,t),t*i)},Cj=({values:t,valueOffsets:e},i,n)=>Bj(t,e,i,n),Pj=({values:t,valueOffsets:e},i,n)=>Bj(t,e,i,Vk(n)),pG=(t,e,i)=>{t.type.unit===Cu.DAY?Rj(t,e,i):Dj(t,e,i)},xj=({values:t},e,i)=>{t[e]=BigInt(i/1e3)},Nj=({values:t},e,i)=>{t[e]=BigInt(i)},Fj=({values:t},e,i)=>{t[e]=BigInt(i*1e3)},Lj=({values:t},e,i)=>{t[e]=BigInt(i*1e6)},mG=(t,e,i)=>{switch(t.type.unit){case zi.SECOND:return xj(t,e,i);case zi.MILLISECOND:return Nj(t,e,i);case zi.MICROSECOND:return Fj(t,e,i);case zi.NANOSECOND:return Lj(t,e,i)}},Uj=({values:t},e,i)=>{t[e]=i},kj=({values:t},e,i)=>{t[e]=i},jj=({values:t},e,i)=>{t[e]=i},zj=({values:t},e,i)=>{t[e]=i},_G=(t,e,i)=>{switch(t.type.unit){case zi.SECOND:return Uj(t,e,i);case zi.MILLISECOND:return kj(t,e,i);case zi.MICROSECOND:return jj(t,e,i);case zi.NANOSECOND:return zj(t,e,i)}},bG=({values:t,stride:e},i,n)=>{t.set(n.subarray(0,e),e*i)},vG=(t,e,i)=>{const n=t.children[0],r=t.valueOffsets,s=Ha.getVisitFn(n);if(Array.isArray(i))for(let a=-1,o=r[e],l=r[e+1];o<l;)s(n,o++,i[++a]);else for(let a=-1,o=r[e],l=r[e+1];o<l;)s(n,o++,i.get(++a))},TG=(t,e,i)=>{const n=t.children[0],{valueOffsets:r}=t,s=Ha.getVisitFn(n);let{[e]:a,[e+1]:o}=r;const l=i instanceof Map?i.entries():Object.entries(i);for(const c of l)if(s(n,a,c),++a>=o)break},SG=(t,e)=>(i,n,r,s)=>n&&i(n,t,e[s]),wG=(t,e)=>(i,n,r,s)=>n&&i(n,t,e.get(s)),MG=(t,e)=>(i,n,r,s)=>n&&i(n,t,e.get(r.name)),IG=(t,e)=>(i,n,r,s)=>n&&i(n,t,e[r.name]),EG=(t,e,i)=>{const n=t.type.children.map(s=>Ha.getVisitFn(s.type)),r=i instanceof Map?MG(e,i):i instanceof Pi?wG(e,i):Array.isArray(i)?SG(e,i):IG(e,i);t.type.children.forEach((s,a)=>r(n[a],t.children[a],s,a))},BG=(t,e,i)=>{t.type.mode===hl.Dense?Vj(t,e,i):$j(t,e,i)},Vj=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];Ha.visit(r,t.valueOffsets[e],i)},$j=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];Ha.visit(r,e,i)},OG=(t,e,i)=>{var n;(n=t.dictionary)===null||n===void 0||n.set(t.values[e],i)},RG=(t,e,i)=>{t.type.unit===ff.DAY_TIME?Wj(t,e,i):Hj(t,e,i)},Wj=({values:t},e,i)=>{t.set(i.subarray(0,2),2*e)},Hj=({values:t},e,i)=>{t[e]=i[0]*12+i[1]%12},qj=({values:t},e,i)=>{t[e]=i},Yj=({values:t},e,i)=>{t[e]=i},Gj=({values:t},e,i)=>{t[e]=i},Xj=({values:t},e,i)=>{t[e]=i},DG=(t,e,i)=>{switch(t.type.unit){case zi.SECOND:return qj(t,e,i);case zi.MILLISECOND:return Yj(t,e,i);case zi.MICROSECOND:return Gj(t,e,i);case zi.NANOSECOND:return Xj(t,e,i)}},CG=(t,e,i)=>{const{stride:n}=t,r=t.children[0],s=Ha.getVisitFn(r);if(Array.isArray(i))for(let a=-1,o=e*n;++a<n;)s(r,o+a,i[a]);else for(let a=-1,o=e*n;++a<n;)s(r,o+a,i.get(a))};Ai.prototype.visitBool=Ti(AG);Ai.prototype.visitInt=Ti(Ec);Ai.prototype.visitInt8=Ti(Ec);Ai.prototype.visitInt16=Ti(Ec);Ai.prototype.visitInt32=Ti(Ec);Ai.prototype.visitInt64=Ti(Ec);Ai.prototype.visitUint8=Ti(Ec);Ai.prototype.visitUint16=Ti(Ec);Ai.prototype.visitUint32=Ti(Ec);Ai.prototype.visitUint64=Ti(Ec);Ai.prototype.visitFloat=Ti(gG);Ai.prototype.visitFloat16=Ti(Oj);Ai.prototype.visitFloat32=Ti(oE);Ai.prototype.visitFloat64=Ti(oE);Ai.prototype.visitUtf8=Ti(Pj);Ai.prototype.visitLargeUtf8=Ti(Pj);Ai.prototype.visitBinary=Ti(Cj);Ai.prototype.visitLargeBinary=Ti(Cj);Ai.prototype.visitFixedSizeBinary=Ti(yG);Ai.prototype.visitDate=Ti(pG);Ai.prototype.visitDateDay=Ti(Rj);Ai.prototype.visitDateMillisecond=Ti(Dj);Ai.prototype.visitTimestamp=Ti(mG);Ai.prototype.visitTimestampSecond=Ti(xj);Ai.prototype.visitTimestampMillisecond=Ti(Nj);Ai.prototype.visitTimestampMicrosecond=Ti(Fj);Ai.prototype.visitTimestampNanosecond=Ti(Lj);Ai.prototype.visitTime=Ti(_G);Ai.prototype.visitTimeSecond=Ti(Uj);Ai.prototype.visitTimeMillisecond=Ti(kj);Ai.prototype.visitTimeMicrosecond=Ti(jj);Ai.prototype.visitTimeNanosecond=Ti(zj);Ai.prototype.visitDecimal=Ti(bG);Ai.prototype.visitList=Ti(vG);Ai.prototype.visitStruct=Ti(EG);Ai.prototype.visitUnion=Ti(BG);Ai.prototype.visitDenseUnion=Ti(Vj);Ai.prototype.visitSparseUnion=Ti($j);Ai.prototype.visitDictionary=Ti(OG);Ai.prototype.visitInterval=Ti(RG);Ai.prototype.visitIntervalDayTime=Ti(Wj);Ai.prototype.visitIntervalYearMonth=Ti(Hj);Ai.prototype.visitDuration=Ti(DG);Ai.prototype.visitDurationSecond=Ti(qj);Ai.prototype.visitDurationMillisecond=Ti(Yj);Ai.prototype.visitDurationMicrosecond=Ti(Gj);Ai.prototype.visitDurationNanosecond=Ti(Xj);Ai.prototype.visitFixedSizeList=Ti(CG);Ai.prototype.visitMap=Ti(TG);const Ha=new Ai,wo=Symbol.for("parent"),vA=Symbol.for("rowIndex");let lE=class{constructor(e,i){return this[wo]=e,this[vA]=i,new Proxy(this,NG)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[vA],i=this[wo],n=i.type.children,r={};for(let s=-1,a=n.length;++s<a;)r[n[s].name]=Us.visit(i.children[s],e);return r}toString(){return`{${[...this].map(([e,i])=>`${df(e)}: ${df(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new PG(this[wo],this[vA])}},PG=class{constructor(e,i){this.childIndex=0,this.children=e.children,this.rowIndex=i,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Us.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}};Object.defineProperties(lE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[wo]:{writable:!0,enumerable:!1,configurable:!1,value:null},[vA]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});let xG=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[wo].type.children.map(i=>i.name)}has(e,i){return e[wo].type.children.some(n=>n.name===i)}getOwnPropertyDescriptor(e,i){if(e[wo].type.children.some(n=>n.name===i))return{writable:!0,enumerable:!0,configurable:!0}}get(e,i){if(Reflect.has(e,i))return e[i];const n=e[wo].type.children.findIndex(r=>r.name===i);if(n!==-1){const r=Us.visit(e[wo].children[n],e[vA]);return Reflect.set(e,i,r),r}}set(e,i,n){const r=e[wo].type.children.findIndex(s=>s.name===i);return r!==-1?(Ha.visit(e[wo].children[r],e[vA],n),Reflect.set(e,i,n)):Reflect.has(e,i)||typeof i=="symbol"?Reflect.set(e,i,n):!1}};const NG=new xG;let ri=class extends Zi{};function gi(t){return(e,i)=>e.getValid(i)?t(e,i):null}const FG=(t,e)=>864e5*t[e],LG=(t,e)=>null,Qj=(t,e,i)=>{if(i+1>=e.length)return null;const n=ps(e[i]),r=ps(e[i+1]);return t.subarray(n,r)},UG=({offset:t,values:e},i)=>{const n=t+i;return(e[n>>3]&1<<n%8)!==0},Kj=({values:t},e)=>FG(t,e),Zj=({values:t},e)=>ps(t[e]),Vu=({stride:t,values:e},i)=>e[t*i],kG=({stride:t,values:e},i)=>Ej(e[t*i]),Jj=({values:t},e)=>t[e],jG=({stride:t,values:e},i)=>e.subarray(t*i,t*(i+1)),t5=({values:t,valueOffsets:e},i)=>Qj(t,e,i),e5=({values:t,valueOffsets:e},i)=>{const n=Qj(t,e,i);return n!==null?XY(n):null},zG=({values:t},e)=>t[e],VG=({type:t,values:e},i)=>t.precision!==qr.HALF?e[i]:Ej(e[i]),$G=(t,e)=>t.type.unit===Cu.DAY?Kj(t,e):Zj(t,e),i5=({values:t},e)=>1e3*ps(t[e]),n5=({values:t},e)=>ps(t[e]),r5=({values:t},e)=>qk(t[e],BigInt(1e3)),s5=({values:t},e)=>qk(t[e],BigInt(1e6)),WG=(t,e)=>{switch(t.type.unit){case zi.SECOND:return i5(t,e);case zi.MILLISECOND:return n5(t,e);case zi.MICROSECOND:return r5(t,e);case zi.NANOSECOND:return s5(t,e)}},a5=({values:t},e)=>t[e],o5=({values:t},e)=>t[e],l5=({values:t},e)=>t[e],c5=({values:t},e)=>t[e],HG=(t,e)=>{switch(t.type.unit){case zi.SECOND:return a5(t,e);case zi.MILLISECOND:return o5(t,e);case zi.MICROSECOND:return l5(t,e);case zi.NANOSECOND:return c5(t,e)}},qG=({values:t,stride:e},i)=>cG.decimal(t.subarray(e*i,e*(i+1))),YG=(t,e)=>{const{valueOffsets:i,stride:n,children:r}=t,{[e*n]:s,[e*n+1]:a}=i,l=r[0].slice(s,a-s);return new Pi([l])},GG=(t,e)=>{const{valueOffsets:i,children:n}=t,{[e]:r,[e+1]:s}=i,a=n[0];return new cE(a.slice(r,s-r))},XG=(t,e)=>new lE(t,e),QG=(t,e)=>t.type.mode===hl.Dense?u5(t,e):h5(t,e),u5=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return Us.visit(n,t.valueOffsets[e])},h5=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return Us.visit(n,e)},KG=(t,e)=>{var i;return(i=t.dictionary)===null||i===void 0?void 0:i.get(t.values[e])},ZG=(t,e)=>t.type.unit===ff.DAY_TIME?f5(t,e):d5(t,e),f5=({values:t},e)=>t.subarray(2*e,2*(e+1)),d5=({values:t},e)=>{const i=t[e],n=new Int32Array(2);return n[0]=Math.trunc(i/12),n[1]=Math.trunc(i%12),n},A5=({values:t},e)=>t[e],g5=({values:t},e)=>t[e],y5=({values:t},e)=>t[e],p5=({values:t},e)=>t[e],JG=(t,e)=>{switch(t.type.unit){case zi.SECOND:return A5(t,e);case zi.MILLISECOND:return g5(t,e);case zi.MICROSECOND:return y5(t,e);case zi.NANOSECOND:return p5(t,e)}},tX=(t,e)=>{const{stride:i,children:n}=t,s=n[0].slice(e*i,i);return new Pi([s])};ri.prototype.visitNull=gi(LG);ri.prototype.visitBool=gi(UG);ri.prototype.visitInt=gi(zG);ri.prototype.visitInt8=gi(Vu);ri.prototype.visitInt16=gi(Vu);ri.prototype.visitInt32=gi(Vu);ri.prototype.visitInt64=gi(Jj);ri.prototype.visitUint8=gi(Vu);ri.prototype.visitUint16=gi(Vu);ri.prototype.visitUint32=gi(Vu);ri.prototype.visitUint64=gi(Jj);ri.prototype.visitFloat=gi(VG);ri.prototype.visitFloat16=gi(kG);ri.prototype.visitFloat32=gi(Vu);ri.prototype.visitFloat64=gi(Vu);ri.prototype.visitUtf8=gi(e5);ri.prototype.visitLargeUtf8=gi(e5);ri.prototype.visitBinary=gi(t5);ri.prototype.visitLargeBinary=gi(t5);ri.prototype.visitFixedSizeBinary=gi(jG);ri.prototype.visitDate=gi($G);ri.prototype.visitDateDay=gi(Kj);ri.prototype.visitDateMillisecond=gi(Zj);ri.prototype.visitTimestamp=gi(WG);ri.prototype.visitTimestampSecond=gi(i5);ri.prototype.visitTimestampMillisecond=gi(n5);ri.prototype.visitTimestampMicrosecond=gi(r5);ri.prototype.visitTimestampNanosecond=gi(s5);ri.prototype.visitTime=gi(HG);ri.prototype.visitTimeSecond=gi(a5);ri.prototype.visitTimeMillisecond=gi(o5);ri.prototype.visitTimeMicrosecond=gi(l5);ri.prototype.visitTimeNanosecond=gi(c5);ri.prototype.visitDecimal=gi(qG);ri.prototype.visitList=gi(YG);ri.prototype.visitStruct=gi(XG);ri.prototype.visitUnion=gi(QG);ri.prototype.visitDenseUnion=gi(u5);ri.prototype.visitSparseUnion=gi(h5);ri.prototype.visitDictionary=gi(KG);ri.prototype.visitInterval=gi(ZG);ri.prototype.visitIntervalDayTime=gi(f5);ri.prototype.visitIntervalYearMonth=gi(d5);ri.prototype.visitDuration=gi(JG);ri.prototype.visitDurationSecond=gi(A5);ri.prototype.visitDurationMillisecond=gi(g5);ri.prototype.visitDurationMicrosecond=gi(y5);ri.prototype.visitDurationNanosecond=gi(p5);ri.prototype.visitFixedSizeList=gi(tX);ri.prototype.visitMap=gi(GG);const Us=new ri,Qd=Symbol.for("keys"),TA=Symbol.for("vals"),Kd=Symbol.for("kKeysAsStrings"),TM=Symbol.for("_kKeysAsStrings");let cE=class{constructor(e){return this[Qd]=new Pi([e.children[0]]).memoize(),this[TA]=e.children[1],new Proxy(this,new iX)}get[Kd](){return this[TM]||(this[TM]=Array.from(this[Qd].toArray(),String))}[Symbol.iterator](){return new eX(this[Qd],this[TA])}get size(){return this[Qd].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Qd],i=this[TA],n={};for(let r=-1,s=e.length;++r<s;)n[e.get(r)]=Us.visit(i,r);return n}toString(){return`{${[...this].map(([e,i])=>`${df(e)}: ${df(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}},eX=class{constructor(e,i){this.keys=e,this.vals=i,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Us.visit(this.vals,e)]})}},iX=class{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Kd]}has(e,i){return e[Kd].includes(i)}getOwnPropertyDescriptor(e,i){if(e[Kd].indexOf(i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,i){if(Reflect.has(e,i))return e[i];const n=e[Kd].indexOf(i);if(n!==-1){const r=Us.visit(Reflect.get(e,TA),n);return Reflect.set(e,i,r),r}}set(e,i,n){const r=e[Kd].indexOf(i);return r!==-1?(Ha.visit(Reflect.get(e,TA),r,n),Reflect.set(e,i,n)):Reflect.has(e,i)?Reflect.set(e,i,n):!1}};Object.defineProperties(cE.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Qd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[TA]:{writable:!0,enumerable:!1,configurable:!1,value:null},[TM]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let N4;function m5(t,e,i,n){const{length:r=0}=t;let s=typeof e!="number"?0:e,a=typeof i!="number"?r:i;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(N4=s,s=a,a=N4),a>r&&(a=r),n?n(t,s,a):[s,a]}const uE=(t,e)=>t<0?e+t:t,F4=t=>t!==t;function l0(t){if(typeof t!=="object"||t===null)return F4(t)?F4:i=>i===t;if(t instanceof Date){const i=t.valueOf();return n=>n instanceof Date?n.valueOf()===i:!1}return ArrayBuffer.isView(t)?i=>i?eG(t,i):!1:t instanceof Map?rX(t):Array.isArray(t)?nX(t):t instanceof Pi?sX(t):aX(t,!0)}function nX(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=l0(t[i]);return iT(e)}function rX(t){let e=-1;const i=[];for(const n of t.values())i[++e]=l0(n);return iT(i)}function sX(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=l0(t.get(i));return iT(e)}function aX(t,e=!1){const i=Object.keys(t);if(!e&&i.length===0)return()=>!1;const n=[];for(let r=-1,s=i.length;++r<s;)n[r]=l0(t[i[r]]);return iT(n,i)}function iT(t,e){return i=>{if(!i||typeof i!="object")return!1;switch(i.constructor){case Array:return oX(t,i);case Map:return L4(t,i,i.keys());case cE:case lE:case Object:case void 0:return L4(t,i,e||Object.keys(i))}return i instanceof Pi?lX(t,i):!1}}function oX(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e[n]))return!1;return!0}function lX(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e.get(n)))return!1;return!0}function L4(t,e,i){const n=i[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const o=t.length;let l=s.next(),c=n.next(),h=r.next();for(;a<o&&!c.done&&!h.done&&!l.done&&!(c.value!==h.value||!t[a](l.value));++a,c=n.next(),h=r.next(),l=s.next());return a===o&&c.done&&h.done&&l.done?!0:(n.return&&n.return(),r.return&&r.return(),s.return&&s.return(),!1)}function _5(t,e,i,n){return(i&1<<n)!==0}function cX(t,e,i,n){return(i&1<<n)>>n}function U4(t,e,i){const n=i.byteLength+7&-8;if(t>0||i.byteLength<n){const r=new Uint8Array(n);return r.set(t%8===0?i.subarray(t>>3):uX(new hE(i,t,e,null,_5)).subarray(0,n)),r}return i}function uX(t){const e=[];let i=0,n=0,r=0;for(const a of t)a&&(r|=1<<n),++n===8&&(e[i++]=r,r=n=0);(i===0||n>0)&&(e[i++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}let hE=class{constructor(e,i,n,r,s){this.bytes=e,this.length=n,this.context=r,this.get=s,this.bit=i%8,this.byteIndex=i>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}};function SM(t,e,i){if(i-e<=0)return 0;if(i-e<8){let s=0;for(const a of new hE(t,e,i-e,t,cX))s+=a;return s}const n=i>>3<<3,r=e+(e%8===0?0:8-e%8);return SM(t,e,r)+SM(t,n,i)+hX(t,r>>3,n-r>>3)}function hX(t,e,i){let n=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=i===void 0?t.byteLength:r+i;for(;a-r>=4;)n+=xw(s.getUint32(r)),r+=4;for(;a-r>=2;)n+=xw(s.getUint16(r)),r+=2;for(;a-r>=1;)n+=xw(s.getUint8(r)),r+=1;return n}function xw(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const fX=-1;let bn=class wM{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return di.isSparseUnion(e)?this.children.some(i=>i.nullable):di.isDenseUnion(e)?this.children.some(i=>i.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:i,values:n,nullBitmap:r,typeIds:s}=this;return i&&(e+=i.byteLength),n&&(e+=n.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,e)}get nullCount(){if(di.isUnion(this.type))return this.children.reduce((n,r)=>n+r.nullCount,0);let e=this._nullCount,i;return e<=fX&&(i=this.nullBitmap)&&(this._nullCount=e=i.length===0?0:this.length-SM(i,this.offset,this.offset+this.length)),e}constructor(e,i,n,r,s,a=[],o){this.type=e,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(i||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let l;s instanceof wM?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Ko(e),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(e){const{type:i}=this;if(di.isUnion(i)){const n=i,r=this.children[n.typeIdToChildIndex[this.typeIds[e]]],s=n.mode===hl.Dense?this.valueOffsets[e]:e;return r.getValid(s)}if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,i){let n;const{type:r}=this;if(di.isUnion(r)){const s=r,a=this.children[s.typeIdToChildIndex[this.typeIds[e]]],o=s.mode===hl.Dense?this.valueOffsets[e]:e;n=a.getValid(o),a.setValid(o,i)}else{let{nullBitmap:s}=this;const{offset:a,length:o}=this,l=a+e,c=1<<l%8,h=l>>3;(!s||s.byteLength<=h)&&(s=new Uint8Array((a+o+63&-64)>>3).fill(255),this.nullCount>0?(s.set(U4(a,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:s})):Object.assign(this,{nullBitmap:s,_nullCount:0}));const A=s[h];n=(A&c)!==0,s[h]=i?A|c:A&~c}return n!==!!i&&(this._nullCount=this.nullCount+(i?-1:1)),i}clone(e=this.type,i=this.offset,n=this.length,r=this._nullCount,s=this,a=this.children){return new wM(e,i,n,r,s,a,this.dictionary)}slice(e,i){const{stride:n,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?n:1,l=this._sliceBuffers(e,i,n,r);return this.clone(this.type,this.offset+e,i,a,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*e,o*i))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===Ut.Null)return this.clone(this.type,0,e,0);const{length:i,nullCount:n}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,i>>3);r[i>>3]=(1<<i-(i&-8))-1,n>0&&r.set(U4(this.offset,i,this.nullBitmap),0);const s=this.buffers;return s[_c.VALIDITY]=r,this.clone(this.type,0,e,n+(e-i),s)}_sliceBuffers(e,i,n,r){let s;const{buffers:a}=this;return(s=a[_c.TYPE])&&(a[_c.TYPE]=s.subarray(e,e+i)),(s=a[_c.OFFSET])&&(a[_c.OFFSET]=s.subarray(e,e+i+1))||(s=a[_c.DATA])&&(a[_c.DATA]=r===6?s:s.subarray(n*e,n*(e+i))),a}_sliceChildren(e,i,n){return e.map(r=>r.slice(i,n))}};bn.prototype.children=Object.freeze([]);class Hm extends Zi{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:i,["offset"]:n=0,["length"]:r=0}=e;return new bn(i,n,r,r)}visitBool(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length>>3,["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitInt(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length,["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitFloat(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length,["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitUtf8(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.data),s=jn(e.nullBitmap),a=Rg(e.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new bn(i,n,o,l,[a,r,s])}visitLargeUtf8(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.data),s=jn(e.nullBitmap),a=b4(e.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new bn(i,n,o,l,[a,r,s])}visitBinary(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.data),s=jn(e.nullBitmap),a=Rg(e.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new bn(i,n,o,l,[a,r,s])}visitLargeBinary(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.data),s=jn(e.nullBitmap),a=b4(e.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new bn(i,n,o,l,[a,r,s])}visitFixedSizeBinary(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length/Ko(i),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitDate(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length/Ko(i),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitTimestamp(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length/Ko(i),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitTime(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length/Ko(i),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitDecimal(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length/Ko(i),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitList(e){const{["type"]:i,["offset"]:n=0,["child"]:r}=e,s=jn(e.nullBitmap),a=Rg(e.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new bn(i,n,o,l,[a,void 0,s],[r])}visitStruct(e){const{["type"]:i,["offset"]:n=0,["children"]:r=[]}=e,s=jn(e.nullBitmap),{length:a=r.reduce((l,{length:c})=>Math.max(l,c),0),nullCount:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,void 0,s],r)}visitUnion(e){const{["type"]:i,["offset"]:n=0,["children"]:r=[]}=e,s=Vr(i.ArrayType,e.typeIds),{["length"]:a=s.length,["nullCount"]:o=-1}=e;if(di.isSparseUnion(i))return new bn(i,n,a,o,[void 0,void 0,void 0,s],r);const l=Rg(e.valueOffsets);return new bn(i,n,a,o,[l,void 0,void 0,s],r)}visitDictionary(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.indices.ArrayType,e.data),{["dictionary"]:a=new Pi([new Hm().visit({type:i.dictionary})])}=e,{["length"]:o=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new bn(i,n,o,l,[void 0,s,r],[],a)}visitInterval(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length/Ko(i),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitDuration(e){const{["type"]:i,["offset"]:n=0}=e,r=jn(e.nullBitmap),s=Vr(i.ArrayType,e.data),{["length"]:a=s.length,["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,s,r])}visitFixedSizeList(e){const{["type"]:i,["offset"]:n=0,["child"]:r=new Hm().visit({type:i.valueType})}=e,s=jn(e.nullBitmap),{["length"]:a=r.length/Ko(i),["nullCount"]:o=e.nullBitmap?-1:0}=e;return new bn(i,n,a,o,[void 0,void 0,s],[r])}visitMap(e){const{["type"]:i,["offset"]:n=0,["child"]:r=new Hm().visit({type:i.childType})}=e,s=jn(e.nullBitmap),a=Rg(e.valueOffsets),{["length"]:o=a.length-1,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new bn(i,n,o,l,[a,void 0,s],[r])}}const dX=new Hm;function Ri(t){return dX.visit(t)}let k4=class{constructor(e=0,i){this.numChunks=e,this.getChunkIterator=i,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}};function AX(t){return t.some(e=>e.nullable)}function b5(t){return t.reduce((e,i)=>e+i.nullCount,0)}function v5(t){return t.reduce((e,i,n)=>(e[n+1]=e[n]+i.length,e),new Uint32Array(t.length+1))}function T5(t,e,i,n){const r=[];for(let s=-1,a=t.length;++s<a;){const o=t[s],l=e[s],{length:c}=o;if(l>=n)break;if(i>=l+c)continue;if(l>=i&&l+c<=n){r.push(o);continue}const h=Math.max(0,i-l),A=Math.min(n-l,c);r.push(o.slice(h,A-h))}return r.length===0&&r.push(t[0].slice(0,0)),r}function fE(t,e,i,n){let r=0,s=0,a=e.length-1;do{if(r>=a-1)return i<e[a]?n(t,r,i-e[r]):null;s=r+Math.trunc((a-r)*.5),i<e[s]?a=s:r=s}while(r<a)}function dE(t,e){return t.getValid(e)}function Uv(t){function e(i,n,r){return t(i[n],r)}return function(i){const n=this.data;return fE(n,this._offsets,i,e)}}function S5(t){let e;function i(n,r,s){return t(n[r],s,e)}return function(n,r){const s=this.data;e=r;const a=fE(s,this._offsets,n,i);return e=void 0,a}}function w5(t){let e;function i(n,r,s){let a=s,o=0,l=0;for(let c=r-1,h=n.length;++c<h;){const A=n[c];if(~(o=t(A,e,a)))return l+o;a=0,l+=A.length}return-1}return function(n,r){e=n;const s=this.data,a=typeof r!="number"?i(s,0,0):fE(s,this._offsets,r,i);return e=void 0,a}}let si=class extends Zi{};function gX(t,e){return e===null&&t.length>0?0:-1}function yX(t,e){const{nullBitmap:i}=t;if(!i||t.nullCount<=0)return-1;let n=0;for(const r of new hE(i,t.offset+(e||0),t.length,i,_5)){if(!r)return n;++n}return-1}function Di(t,e,i){if(e===void 0)return-1;if(e===null)switch(t.typeId){case Ut.Union:break;case Ut.Dictionary:break;default:return yX(t,i)}const n=Us.getVisitFn(t),r=l0(e);for(let s=(i||0)-1,a=t.length;++s<a;)if(r(n(t,s)))return s;return-1}function M5(t,e,i){const n=Us.getVisitFn(t),r=l0(e);for(let s=(i||0)-1,a=t.length;++s<a;)if(r(n(t,s)))return s;return-1}si.prototype.visitNull=gX;si.prototype.visitBool=Di;si.prototype.visitInt=Di;si.prototype.visitInt8=Di;si.prototype.visitInt16=Di;si.prototype.visitInt32=Di;si.prototype.visitInt64=Di;si.prototype.visitUint8=Di;si.prototype.visitUint16=Di;si.prototype.visitUint32=Di;si.prototype.visitUint64=Di;si.prototype.visitFloat=Di;si.prototype.visitFloat16=Di;si.prototype.visitFloat32=Di;si.prototype.visitFloat64=Di;si.prototype.visitUtf8=Di;si.prototype.visitLargeUtf8=Di;si.prototype.visitBinary=Di;si.prototype.visitLargeBinary=Di;si.prototype.visitFixedSizeBinary=Di;si.prototype.visitDate=Di;si.prototype.visitDateDay=Di;si.prototype.visitDateMillisecond=Di;si.prototype.visitTimestamp=Di;si.prototype.visitTimestampSecond=Di;si.prototype.visitTimestampMillisecond=Di;si.prototype.visitTimestampMicrosecond=Di;si.prototype.visitTimestampNanosecond=Di;si.prototype.visitTime=Di;si.prototype.visitTimeSecond=Di;si.prototype.visitTimeMillisecond=Di;si.prototype.visitTimeMicrosecond=Di;si.prototype.visitTimeNanosecond=Di;si.prototype.visitDecimal=Di;si.prototype.visitList=Di;si.prototype.visitStruct=Di;si.prototype.visitUnion=Di;si.prototype.visitDenseUnion=M5;si.prototype.visitSparseUnion=M5;si.prototype.visitDictionary=Di;si.prototype.visitInterval=Di;si.prototype.visitIntervalDayTime=Di;si.prototype.visitIntervalYearMonth=Di;si.prototype.visitDuration=Di;si.prototype.visitDurationSecond=Di;si.prototype.visitDurationMillisecond=Di;si.prototype.visitDurationMicrosecond=Di;si.prototype.visitDurationNanosecond=Di;si.prototype.visitFixedSizeList=Di;si.prototype.visitMap=Di;const kv=new si;let ai=class extends Zi{};function yi(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(di.isInt(e)&&e.bitWidth!==64||di.isTime(e)&&e.bitWidth!==64||di.isFloat(e)&&e.precision!==qr.HALF))return new k4(t.data.length,n=>{const r=t.data[n];return r.values.subarray(0,r.length)[Symbol.iterator]()});let i=0;return new k4(t.data.length,n=>{const s=t.data[n].length,a=t.slice(i,i+s);return i+=s,new pX(a)})}let pX=class{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}};ai.prototype.visitNull=yi;ai.prototype.visitBool=yi;ai.prototype.visitInt=yi;ai.prototype.visitInt8=yi;ai.prototype.visitInt16=yi;ai.prototype.visitInt32=yi;ai.prototype.visitInt64=yi;ai.prototype.visitUint8=yi;ai.prototype.visitUint16=yi;ai.prototype.visitUint32=yi;ai.prototype.visitUint64=yi;ai.prototype.visitFloat=yi;ai.prototype.visitFloat16=yi;ai.prototype.visitFloat32=yi;ai.prototype.visitFloat64=yi;ai.prototype.visitUtf8=yi;ai.prototype.visitLargeUtf8=yi;ai.prototype.visitBinary=yi;ai.prototype.visitLargeBinary=yi;ai.prototype.visitFixedSizeBinary=yi;ai.prototype.visitDate=yi;ai.prototype.visitDateDay=yi;ai.prototype.visitDateMillisecond=yi;ai.prototype.visitTimestamp=yi;ai.prototype.visitTimestampSecond=yi;ai.prototype.visitTimestampMillisecond=yi;ai.prototype.visitTimestampMicrosecond=yi;ai.prototype.visitTimestampNanosecond=yi;ai.prototype.visitTime=yi;ai.prototype.visitTimeSecond=yi;ai.prototype.visitTimeMillisecond=yi;ai.prototype.visitTimeMicrosecond=yi;ai.prototype.visitTimeNanosecond=yi;ai.prototype.visitDecimal=yi;ai.prototype.visitList=yi;ai.prototype.visitStruct=yi;ai.prototype.visitUnion=yi;ai.prototype.visitDenseUnion=yi;ai.prototype.visitSparseUnion=yi;ai.prototype.visitDictionary=yi;ai.prototype.visitInterval=yi;ai.prototype.visitIntervalDayTime=yi;ai.prototype.visitIntervalYearMonth=yi;ai.prototype.visitDuration=yi;ai.prototype.visitDurationSecond=yi;ai.prototype.visitDurationMillisecond=yi;ai.prototype.visitDurationMicrosecond=yi;ai.prototype.visitDurationNanosecond=yi;ai.prototype.visitFixedSizeList=yi;ai.prototype.visitMap=yi;const AE=new ai;var I5;const E5={},B5={};let Pi=class sf{constructor(e){var i,n,r;const s=e[0]instanceof sf?e.flatMap(o=>o.data):e;if(s.length===0||s.some(o=>!(o instanceof bn)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(i=s[0])===null||i===void 0?void 0:i.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:l,indexOf:c}=E5[a.typeId],h=s[0];this.isValid=A=>dE(h,A),this.get=A=>o(h,A),this.set=(A,m)=>l(h,A,m),this.indexOf=A=>c(h,A),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,B5[a.typeId]),this._offsets=v5(s);break}this.data=s,this.type=a,this.stride=Ko(a),this.numChildren=(r=(n=a.children)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,i)=>e+i.byteLength,0)}get nullable(){return AX(this.data)}get nullCount(){return b5(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${Ut[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(uE(e,this.length))}set(e,i){}indexOf(e,i){return-1}includes(e,i){return this.indexOf(e,i)>-1}[Symbol.iterator](){return AE.visit(this)}concat(...e){return new sf(this.data.concat(e.flatMap(i=>i.data).flat(Number.POSITIVE_INFINITY)))}slice(e,i){return new sf(m5(this,e,i,({data:n,_offsets:r},s,a)=>T5(n,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:e,data:i,length:n,stride:r,ArrayType:s}=this;switch(e.typeId){case Ut.Int:case Ut.Float:case Ut.Decimal:case Ut.Time:case Ut.Timestamp:switch(i.length){case 0:return new s;case 1:return i[0].values.subarray(0,n*r);default:return i.reduce((a,{values:o,length:l})=>(a.array.set(o.subarray(0,l*r),a.offset),a.offset+=l*r,a),{array:new s(n*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var i;return this.getChildAt((i=this.type.children)===null||i===void 0?void 0:i.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new sf(this.data.map(({children:i})=>i[e])):null}get isMemoized(){return di.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(di.isDictionary(this.type)){const e=new j4(this.data[0].dictionary),i=this.data.map(n=>{const r=n.clone();return r.dictionary=e,r});return new sf(i)}return new j4(this)}unmemoize(){if(di.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),i=this.data.map(n=>{const r=n.clone();return r.dictionary=e,r});return new sf(i)}return this}};I5=Symbol.toStringTag;Pi[I5]=(t=>{t.type=di.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(Ut).map(i=>Ut[i]).filter(i=>typeof i=="number"&&i!==Ut.NONE);for(const i of e){const n=Us.getVisitFnByTypeId(i),r=Ha.getVisitFnByTypeId(i),s=kv.getVisitFnByTypeId(i);E5[i]={get:n,set:r,indexOf:s},B5[i]=Object.create(t,{isValid:{value:Uv(dE)},get:{value:Uv(Us.getVisitFnByTypeId(i))},set:{value:S5(Ha.getVisitFnByTypeId(i))},indexOf:{value:w5(kv.getVisitFnByTypeId(i))}})}return"Vector"})(Pi.prototype);let j4=class O5 extends Pi{constructor(e){super(e.data);const i=this.get,n=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const l=i.call(this,a);return s[a]=l,l}}),Object.defineProperty(this,"set",{value(a,o){n.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new O5(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Pi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}};function MM(t){if(t){if(t instanceof bn)return new Pi([t]);if(t instanceof Pi)return new Pi(t.data);if(t.type instanceof di)return new Pi([Ri(t)]);if(Array.isArray(t))return new Pi(t.flatMap(e=>mX(e)));if(ArrayBuffer.isView(t)){t instanceof DataView&&(t=new Uint8Array(t.buffer));const e={offset:0,length:t.length,nullCount:-1,data:t};if(t instanceof Int8Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new pj}))]);if(t instanceof Int16Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new mj}))]);if(t instanceof Int32Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new _j}))]);if(t instanceof BigInt64Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new bj}))]);if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new vj}))]);if(t instanceof Uint16Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new Tj}))]);if(t instanceof Uint32Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new Sj}))]);if(t instanceof BigUint64Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new wj}))]);if(t instanceof Float32Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new Mj}))]);if(t instanceof Float64Array)return new Pi([Ri(Object.assign(Object.assign({},e),{type:new Af}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}function mX(t){return t instanceof bn?[t]:t instanceof Pi?t.data:MM(t).data}function _X(t){if(!t||t.length<=0)return function(r){return!0};let e="";const i=t.filter(n=>n===n);return i.length>0&&(e=`
    switch (x) {${i.map(n=>`
        case ${bX(n)}:`).join("")}
            return false;
    }`),t.length!==i.length&&(e=`if (x !== x) return false;
${e}`),new Function("x",`${e}
return true;`)}function bX(t){return typeof t!="bigint"?df(t):`${df(t)}n`}function Nw(t,e){const i=Math.ceil(t)*e-1;return(i-i%64+64||64)/e}function z4(t,e=0){return t.length>=e?t.subarray(0,e):tG(new t.constructor(e),t,0)}class vX{constructor(e,i=0,n=1){this.length=Math.ceil(i/n),this.buffer=new e(this.length),this.stride=n,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,i){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const i=this.stride,n=this.length*i,r=this.buffer.length;n>=r&&this._resize(r===0?Nw(n*1,this.BYTES_PER_ELEMENT):Nw(n*2,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=Nw(e*this.stride,this.BYTES_PER_ELEMENT);const i=z4(this.buffer,e);return this.clear(),i}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(e){return this.buffer=z4(this.buffer,e)}}class TX extends vX{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,i){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=i,this}}class R5 extends TX{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,i){const{buffer:n}=this.reserve(e-this.length+1),r=e>>3,s=e%8,a=n[r]>>s&1;return i?a===0&&(n[r]|=1<<s,++this.numValid):a===1&&(n[r]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Bf{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}constructor({type:e,nullValues:i}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=i,this.stride=Ko(e),this._nulls=new R5,i&&i.length>0&&(this._isValid=_X(i))}toVector(){return new Pi([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:i,_values:n,_nulls:r,_typeIds:s,children:a}=this;return i&&(e+=i.byteLength),n&&(e+=n.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),a.reduce((o,l)=>o+l.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((i,n)=>i+n.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,i){return this.setValid(e,this.isValid(i))&&this.setValue(e,i),this}setValue(e,i){this._setValue(this,e,i)}setValid(e,i){return this.length=this._nulls.set(e,+i).length,i}addChild(e,i=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,i,n,r;const{type:s,length:a,nullCount:o,_typeIds:l,_offsets:c,_values:h,_nulls:A}=this;(i=l==null?void 0:l.flush(a))?r=c==null?void 0:c.flush(a):(r=c==null?void 0:c.flush(a))?e=h==null?void 0:h.flush(c.last()):e=h==null?void 0:h.flush(a),o>0&&(n=A==null?void 0:A.flush(a));const m=this.children.map(b=>b.flush());return this.clear(),Ri({type:s,length:a,nullCount:o,children:m,child:m[0],data:e,typeIds:i,nullBitmap:n,valueOffsets:r})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,i,n,r;this.length=0,(e=this._nulls)===null||e===void 0||e.clear(),(i=this._values)===null||i===void 0||i.clear(),(n=this._offsets)===null||n===void 0||n.clear(),(r=this._typeIds)===null||r===void 0||r.clear();for(const s of this.children)s.clear();return this}}Bf.prototype.length=1;Bf.prototype.stride=1;Bf.prototype.children=null;Bf.prototype.finished=!1;Bf.prototype.nullValues=null;Bf.prototype._isValid=()=>!0;class vr{constructor(e=[],i,n,r=yM.V5){this.fields=e||[],this.metadata=i||new Map,n||(n=EM(this.fields)),this.dictionaries=n,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,i)=>`${i}: ${e}`).join(", ")} }>`}select(e){const i=new Set(e),n=this.fields.filter(r=>i.has(r.name));return new vr(n,this.metadata)}selectAt(e){const i=e.map(n=>this.fields[n]).filter(Boolean);return new vr(i,this.metadata)}assign(...e){const i=e[0]instanceof vr?e[0]:Array.isArray(e[0])?new vr(e[0]):new vr(e),n=[...this.fields],r=Cb(Cb(new Map,this.metadata),i.metadata),s=i.fields.filter(o=>{const l=n.findIndex(c=>c.name===o.name);return~l?(n[l]=o.clone({metadata:Cb(Cb(new Map,n[l].metadata),o.metadata)}))&&!1:!0}),a=EM(s,new Map);return new vr([...n,...s],r,new Map([...this.dictionaries,...a]))}}vr.prototype.fields=null;vr.prototype.metadata=null;vr.prototype.dictionaries=null;let bs=class IM{static new(...e){let[i,n,r,s]=e;return e[0]&&typeof e[0]=="object"&&({name:i}=e[0],n===void 0&&(n=e[0].type),r===void 0&&(r=e[0].nullable),s===void 0&&(s=e[0].metadata)),new IM(`${i}`,n,r,s)}constructor(e,i,n=!1,r){this.name=e,this.type=i,this.nullable=n,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[i,n,r,s]=e;return!e[0]||typeof e[0]!="object"?[i=this.name,n=this.type,r=this.nullable,s=this.metadata]=e:{name:i=this.name,type:n=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=e[0],IM.new(i,n,r,s)}};bs.prototype.type=null;bs.prototype.name=null;bs.prototype.nullable=null;bs.prototype.metadata=null;function Cb(t,e){return new Map([...t||new Map,...e||new Map])}function EM(t,e=new Map){for(let i=-1,n=t.length;++i<n;){const s=t[i].type;if(di.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&EM(s.children,e)}return e}class SX extends Bf{constructor(e){super(e),this._values=new R5}setValue(e,i){this._values.set(e,+i)}}class oi extends Zi{compareSchemas(e,i){return e===i||i instanceof e.constructor&&this.compareManyFields(e.fields,i.fields)}compareManyFields(e,i){return e===i||Array.isArray(e)&&Array.isArray(i)&&e.length===i.length&&e.every((n,r)=>this.compareFields(n,i[r]))}compareFields(e,i){return e===i||i instanceof e.constructor&&e.name===i.name&&e.nullable===i.nullable&&this.visit(e.type,i.type)}}function vs(t,e){return e instanceof t.constructor}function Of(t,e){return t===e||vs(t,e)}function Bc(t,e){return t===e||vs(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function nT(t,e){return t===e||vs(t,e)&&t.precision===e.precision}function wX(t,e){return t===e||vs(t,e)&&t.byteWidth===e.byteWidth}function gE(t,e){return t===e||vs(t,e)&&t.unit===e.unit}function k_(t,e){return t===e||vs(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function j_(t,e){return t===e||vs(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function MX(t,e){return t===e||vs(t,e)&&t.children.length===e.children.length&&xu.compareManyFields(t.children,e.children)}function IX(t,e){return t===e||vs(t,e)&&t.children.length===e.children.length&&xu.compareManyFields(t.children,e.children)}function yE(t,e){return t===e||vs(t,e)&&t.mode===e.mode&&t.typeIds.every((i,n)=>i===e.typeIds[n])&&xu.compareManyFields(t.children,e.children)}function EX(t,e){return t===e||vs(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&xu.visit(t.indices,e.indices)&&xu.visit(t.dictionary,e.dictionary)}function pE(t,e){return t===e||vs(t,e)&&t.unit===e.unit}function z_(t,e){return t===e||vs(t,e)&&t.unit===e.unit}function BX(t,e){return t===e||vs(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&xu.compareManyFields(t.children,e.children)}function OX(t,e){return t===e||vs(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&xu.compareManyFields(t.children,e.children)}oi.prototype.visitNull=Of;oi.prototype.visitBool=Of;oi.prototype.visitInt=Bc;oi.prototype.visitInt8=Bc;oi.prototype.visitInt16=Bc;oi.prototype.visitInt32=Bc;oi.prototype.visitInt64=Bc;oi.prototype.visitUint8=Bc;oi.prototype.visitUint16=Bc;oi.prototype.visitUint32=Bc;oi.prototype.visitUint64=Bc;oi.prototype.visitFloat=nT;oi.prototype.visitFloat16=nT;oi.prototype.visitFloat32=nT;oi.prototype.visitFloat64=nT;oi.prototype.visitUtf8=Of;oi.prototype.visitLargeUtf8=Of;oi.prototype.visitBinary=Of;oi.prototype.visitLargeBinary=Of;oi.prototype.visitFixedSizeBinary=wX;oi.prototype.visitDate=gE;oi.prototype.visitDateDay=gE;oi.prototype.visitDateMillisecond=gE;oi.prototype.visitTimestamp=k_;oi.prototype.visitTimestampSecond=k_;oi.prototype.visitTimestampMillisecond=k_;oi.prototype.visitTimestampMicrosecond=k_;oi.prototype.visitTimestampNanosecond=k_;oi.prototype.visitTime=j_;oi.prototype.visitTimeSecond=j_;oi.prototype.visitTimeMillisecond=j_;oi.prototype.visitTimeMicrosecond=j_;oi.prototype.visitTimeNanosecond=j_;oi.prototype.visitDecimal=Of;oi.prototype.visitList=MX;oi.prototype.visitStruct=IX;oi.prototype.visitUnion=yE;oi.prototype.visitDenseUnion=yE;oi.prototype.visitSparseUnion=yE;oi.prototype.visitDictionary=EX;oi.prototype.visitInterval=pE;oi.prototype.visitIntervalDayTime=pE;oi.prototype.visitIntervalYearMonth=pE;oi.prototype.visitDuration=z_;oi.prototype.visitDurationSecond=z_;oi.prototype.visitDurationMillisecond=z_;oi.prototype.visitDurationMicrosecond=z_;oi.prototype.visitDurationNanosecond=z_;oi.prototype.visitFixedSizeList=BX;oi.prototype.visitMap=OX;const xu=new oi;function RX(t,e){return xu.compareSchemas(t,e)}function Fw(t,e){return DX(t,e.map(i=>i.data.concat()))}function DX(t,e){const i=[...t.fields],n=[],r={numBatches:e.reduce((A,m)=>Math.max(A,m.length),0)};let s=0,a=0,o=-1;const l=e.length;let c,h=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<l;)h[o]=c=e[o].shift(),a=Math.min(a,c?c.length:a);Number.isFinite(a)&&(h=CX(i,a,h,e,r),a>0&&(n[s++]=Ri({type:new el(i),length:a,nullCount:0,children:h.slice()})))}return[t=t.assign(i),n.map(A=>new Ns(t,A))]}function CX(t,e,i,n,r){var s;const a=(e+63&-64)>>3;for(let o=-1,l=n.length;++o<l;){const c=i[o],h=c==null?void 0:c.length;if(h>=e)h===e?i[o]=c:(i[o]=c.slice(0,e),r.numBatches=Math.max(r.numBatches,n[o].unshift(c.slice(e,h-e))));else{const A=t[o];t[o]=A.clone({nullable:!0}),i[o]=(s=c==null?void 0:c._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:Ri({type:A.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return i}var D5;class Io{constructor(...e){var i,n;if(e.length===0)return this.batches=[],this.schema=new vr([]),this._offsets=[0],this;let r,s;e[0]instanceof vr&&(r=e.shift()),e.at(-1)instanceof Uint32Array&&(s=e.pop());const a=l=>{if(l){if(l instanceof Ns)return[l];if(l instanceof Io)return l.batches;if(l instanceof bn){if(l.type instanceof el)return[new Ns(new vr(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(c=>a(c));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(c=>a(c));if(typeof l=="object"){const c=Object.keys(l),h=c.map(b=>new Pi([l[b]])),A=r??new vr(c.map((b,S)=>new bs(String(b),h[S].type,h[S].nullable))),[,m]=Fw(A,h);return m.length===0?[new Ns(l)]:m}}}return[]},o=e.flatMap(l=>a(l));if(r=(n=r??((i=o[0])===null||i===void 0?void 0:i.schema))!==null&&n!==void 0?n:new vr([]),!(r instanceof vr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of o){if(!(l instanceof Ns))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!RX(r,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=o,this._offsets=s??v5(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,i)=>e+i.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=b5(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(uE(e,this.numRows))}set(e,i){}indexOf(e,i){return-1}[Symbol.iterator](){return this.batches.length>0?AE.visit(new Pi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const i=this.schema,n=this.data.concat(e.flatMap(({data:r})=>r));return new Io(i,n.map(r=>new Ns(i,r)))}slice(e,i){const n=this.schema;[e,i]=m5({length:this.numRows},e,i);const r=T5(this.data,this._offsets,e,i);return new Io(n,r.map(s=>new Ns(n,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(i=>i.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const i=this.data.map(n=>n.children[e]);if(i.length===0){const{type:n}=this.schema.fields[e],r=Ri({type:n,length:0,nullCount:0});i.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new Pi(i)}return null}setChild(e,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===e),i)}setChildAt(e,i){let n=this.schema,r=[...this.batches];if(e>-1&&e<this.numCols){i||(i=new Pi([Ri({type:new Lv,length:this.numRows})]));const s=n.fields.slice(),a=s[e].clone({type:i.type}),o=this.schema.fields.map((l,c)=>this.getChildAt(c));[s[e],o[e]]=[a,i],[n,r]=Fw(n,o)}return new Io(n,r)}select(e){const i=this.schema.fields.reduce((n,r,s)=>n.set(r.name,s),new Map);return this.selectAt(e.map(n=>i.get(n)).filter(n=>n>-1))}selectAt(e){const i=this.schema.selectAt(e),n=this.batches.map(r=>r.selectAt(e));return new Io(i,n)}assign(e){const i=this.schema.fields,[n,r]=e.schema.fields.reduce((o,l,c)=>{const[h,A]=o,m=i.findIndex(b=>b.name===l.name);return~m?A[m]=c:h.push(c),o},[[],[]]),s=this.schema.assign(e.schema),a=[...i.map((o,l)=>[l,r[l]]).map(([o,l])=>l===void 0?this.getChildAt(o):e.getChildAt(l)),...n.map(o=>e.getChildAt(o))].filter(Boolean);return new Io(...Fw(s,a))}}D5=Symbol.toStringTag;Io[D5]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Uv(dE),t.get=Uv(Us.getVisitFn(Ut.Struct)),t.set=S5(Ha.getVisitFn(Ut.Struct)),t.indexOf=w5(kv.getVisitFn(Ut.Struct)),"Table"))(Io.prototype);var C5;class Ns{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof vr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Ri({nullCount:0,type:new el(this.schema.fields),children:this.schema.fields.map(i=>Ri({type:i.type,nullCount:0}))})]=e,!(this.data instanceof bn))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=V4(this.schema,this.data.children);break}case 1:{const[i]=e,{fields:n,children:r,length:s}=Object.keys(i).reduce((l,c,h)=>(l.children[h]=i[c],l.length=Math.max(l.length,i[c].length),l.fields[h]=bs.new({name:c,type:i[c].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),a=new vr(n),o=Ri({type:new el(n),length:s,children:r,nullCount:0});[this.schema,this.data]=V4(a,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=P5(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Us.visit(this.data,e)}at(e){return this.get(uE(e,this.numRows))}set(e,i){return Ha.visit(this.data,e,i)}indexOf(e,i){return kv.visit(this.data,e,i)}[Symbol.iterator](){return AE.visit(new Pi([this.data]))}toArray(){return[...this]}concat(...e){return new Io(this.schema,[this,...e])}slice(e,i){const[n]=new Pi([this.data]).slice(e,i).data;return new Ns(this.schema,n)}getChild(e){var i;return this.getChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Pi([this.data.children[e]]):null}setChild(e,i){var n;return this.setChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===e),i)}setChildAt(e,i){let n=this.schema,r=this.data;if(e>-1&&e<this.numCols){i||(i=new Pi([Ri({type:new Lv,length:this.numRows})]));const s=n.fields.slice(),a=r.children.slice(),o=s[e].clone({type:i.type});[s[e],a[e]]=[o,i.data[0]],n=new vr(s,new Map(this.schema.metadata)),r=Ri({type:new el(s),children:a})}return new Ns(n,r)}select(e){const i=this.schema.select(e),n=new el(i.fields),r=[];for(const s of e){const a=this.schema.fields.findIndex(o=>o.name===s);~a&&(r[a]=this.data.children[a])}return new Ns(i,Ri({type:n,length:this.numRows,children:r}))}selectAt(e){const i=this.schema.selectAt(e),n=e.map(s=>this.data.children[s]).filter(Boolean),r=Ri({type:new el(i.fields),length:this.numRows,children:n});return new Ns(i,r)}}C5=Symbol.toStringTag;Ns[C5]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ns.prototype);function V4(t,e,i=e.reduce((n,r)=>Math.max(n,r.length),0)){var n;const r=[...t.fields],s=[...e],a=(i+63&-64)>>3;for(const[o,l]of t.fields.entries()){const c=e[o];(!c||c.length!==i)&&(r[o]=l.clone({nullable:!0}),s[o]=(n=c==null?void 0:c._changeLengthAndBackfillNullBitmap(i))!==null&&n!==void 0?n:Ri({type:l.type,length:i,nullCount:i,nullBitmap:new Uint8Array(a)}))}return[t.assign(r),Ri({type:new el(r),length:i,children:s})]}function P5(t,e,i=new Map){var n,r;if(((n=t==null?void 0:t.length)!==null&&n!==void 0?n:0)>0&&(t==null?void 0:t.length)===(e==null?void 0:e.length))for(let s=-1,a=t.length;++s<a;){const{type:o}=t[s],l=e[s];for(const c of[l,...((r=l==null?void 0:l.dictionary)===null||r===void 0?void 0:r.data)||[]])P5(o.children,c==null?void 0:c.children,i);if(di.isDictionary(o)){const{id:c}=o;if(!i.has(c))l!=null&&l.dictionary&&i.set(c,l.dictionary);else if(i.get(c)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return i}const PX={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...PX}};globalThis.mathgl.config;const $4={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function rT(t,e){if(!t)throw new Error(`assertion failed ${e}`)}function x5(t){throw new Error(`assertion failed ${t}`)}function xX(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var gf=1,yf=2,SA=3,NX=4,BM=5,W4=6378137,FX=6356752314e-3,H4=.0066943799901413165,qm=484813681109536e-20,Te=Math.PI/2,LX=.16666666666666666,UX=.04722222222222222,kX=.022156084656084655,Le=1e-10,$r=.017453292519943295,rl=57.29577951308232,un=Math.PI/4,d_=Math.PI*2,Hr=3.14159265359,ks={};ks.greenwich=0;ks.lisbon=-9.131906111111;ks.paris=2.337229166667;ks.bogota=-74.080916666667;ks.madrid=-3.687938888889;ks.rome=12.452333333333;ks.bern=7.439583333333;ks.jakarta=106.807719444444;ks.ferro=-17.666666666667;ks.brussels=4.367975;ks.stockholm=18.058277777778;ks.athens=23.7163375;ks.oslo=10.722916666667;var jX={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},q4=/[\s_\-\/\(\)]/g;function Nu(t,e){if(t[e])return t[e];for(var i=Object.keys(t),n=e.toLowerCase().replace(q4,""),r=-1,s,a;++r<i.length;)if(s=i[r],a=s.toLowerCase().replace(q4,""),a===n)return t[s]}function OM(t){var e={},i=t.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var c=l.split("=");return c.push(!0),o[c[0].toLowerCase()]=c[1],o},{}),n,r,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*$r},lat_1:function(o){e.lat1=o*$r},lat_2:function(o){e.lat2=o*$r},lat_ts:function(o){e.lat_ts=o*$r},lon_0:function(o){e.long0=o*$r},lon_1:function(o){e.long1=o*$r},lon_2:function(o){e.long2=o*$r},alpha:function(o){e.alpha=parseFloat(o)*$r},gamma:function(o){e.rectified_grid_angle=parseFloat(o)},lonc:function(o){e.longc=o*$r},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r:function(o){e.a=e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=Nu(jX,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*$r},pm:function(o){var l=Nu(ks,o);e.from_greenwich=(l||parseFloat(o))*$r},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0}};for(n in i)r=i[n],n in a?(s=a[n],typeof s=="function"?s(r):e[s]=r):e[n]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var A_=1,N5=2,F5=3,jv=4,L5=5,mE=-1,zX=/\s/,VX=/[A-Za-z]/,$X=/[A-Za-z84_]/,sT=/[,\]]/,U5=/[\d\.E\-\+]/;function Oc(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=A_}Oc.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==jv)for(;zX.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case A_:return this.neutral(t);case N5:return this.keyword(t);case jv:return this.quoted(t);case L5:return this.afterquote(t);case F5:return this.number(t);case mE:return}};Oc.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=jv;return}if(sT.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Oc.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=A_;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=A_,this.currentObject=this.stack.pop(),this.currentObject||(this.state=mE);return}};Oc.prototype.number=function(t){if(U5.test(t)){this.word+=t;return}if(sT.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Oc.prototype.quoted=function(t){if(t==='"'){this.state=L5;return}this.word+=t};Oc.prototype.keyword=function(t){if($X.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=A_;return}if(sT.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Oc.prototype.neutral=function(t){if(VX.test(t)){this.word=t,this.state=N5;return}if(t==='"'){this.word="",this.state=jv;return}if(U5.test(t)){this.word=t,this.state=F5;return}if(sT.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Oc.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===mE)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function WX(t){var e=new Oc(t);return e.output()}function Lw(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,r=i.reduce(function(s,a){return iA(a,s),s},n);e&&(t[e]=r)}function iA(t,e){if(!Array.isArray(t)){e[t]=!0;return}var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1){if(Array.isArray(t[0])){e[i]={},iA(t[0],e[i]);return}e[i]=t[0];return}if(!t.length){e[i]=!0;return}if(i==="TOWGS84"){e[i]=t;return}if(i==="AXIS"){i in e||(e[i]=[]),e[i].push(t);return}Array.isArray(i)||(e[i]={});var n;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[i]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&iA(t[2],e[i]);return;case"SPHEROID":case"ELLIPSOID":e[i]={name:t[0],a:t[1],rf:t[2]},t.length===4&&iA(t[3],e[i]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],Lw(e,i,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],Lw(e,i,t),e[i].type=i;return;default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return iA(t,e[i]);return Lw(e,i,t)}}var HX=.017453292519943295,qX=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function YX(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],e.length===3&&(t[i]=e[2](t[i])))}function Yo(t){return t*HX}function k5(t){for(var e=Object.keys(t),i=0,n=e.length;i<n;++i){var r=e[i];qX.indexOf(r)!==-1&&GX(t[r]),typeof t[r]=="object"&&k5(t[r])}}function GX(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var i="",n=0,r=t.AXIS.length;n<r;++n){var s=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?i+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?i+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?i+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(i+="w")}i.length===2&&(i+="u"),i.length===3&&(t.axis=i)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var a=t.GEOGCS;t.type==="GEOGCS"&&(a=t),a&&(a.DATUM?t.datumCode=a.DATUM.name.toLowerCase():t.datumCode=a.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(t.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=a.DATUM.SPHEROID.a,t.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(t.datum_params=a.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function o(h){var A=t.to_meter||1;return h*A}var l=function(h){return YX(t,h)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Yo],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Yo],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Yo],["lat0","latitude_of_origin",Yo],["lat0","standard_parallel_1",Yo],["lat1","standard_parallel_1",Yo],["lat2","standard_parallel_2",Yo],["azimuth","Azimuth"],["alpha","azimuth",Yo],["srsCode","name"]];c.forEach(l),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Yo(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Yo(t.lat0>0?90:-90))}function j5(t){var e=WX(t),i=e[0],n={};return iA(e,n),k5(n),n[i]}function gs(t){var e=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?gs[t]=OM(arguments[1]):gs[t]=j5(arguments[1]):gs[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(n){Array.isArray(n)?gs.apply(e,n):gs(n)});if(typeof t=="string"){if(t in gs)return gs[t]}else"EPSG"in t?gs["EPSG:"+t.EPSG]=t:"ESRI"in t?gs["ESRI:"+t.ESRI]=t:"IAU2000"in t?gs["IAU2000:"+t.IAU2000]=t:console.log(t);return}}xX(gs);function XX(t){return typeof t=="string"}function QX(t){return t in gs}var KX=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function ZX(t){return KX.some(function(e){return t.indexOf(e)>-1})}var JX=["3857","900913","3785","102113"];function tQ(t){var e=Nu(t,"authority");if(e){var i=Nu(e,"epsg");return i&&JX.indexOf(i)>-1}}function eQ(t){var e=Nu(t,"extension");if(e)return Nu(e,"proj4")}function iQ(t){return t[0]==="+"}function nQ(t){if(XX(t)){if(QX(t))return gs[t];if(ZX(t)){var e=j5(t);if(tQ(e))return gs["EPSG:3857"];var i=eQ(e);return i?OM(i):e}if(iQ(t))return OM(t)}else return t}function Y4(t,e){t=t||{};var i,n;if(!e)return t;for(n in e)i=e[n],i!==void 0&&(t[n]=i);return t}function dl(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function V_(t){return t<0?-1:1}function je(t){return Math.abs(t)<=Hr?t:t-V_(t)*d_}function Do(t,e,i){var n=t*i,r=.5*t;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(Te-e))/n}function g_(t,e){for(var i=.5*t,n,r,s=Te-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(s),r=Te-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999}function rQ(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=dl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function sQ(t){var e=t.x,i=t.y;if(i*rl>90&&i*rl<-90&&e*rl>180&&e*rl<-180)return null;var n,r;if(Math.abs(Math.abs(i)-Te)<=Le)return null;if(this.sphere)n=this.x0+this.a*this.k0*je(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(un+.5*i));else{var s=Math.sin(i),a=Do(this.e,i,s);n=this.x0+this.a*this.k0*je(e-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=n,t.y=r,t}function aQ(t){var e=t.x-this.x0,i=t.y-this.y0,n,r;if(this.sphere)r=Te-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var s=Math.exp(-i/(this.a*this.k0));if(r=g_(this.e,s),r===-9999)return null}return n=je(this.long0+e/(this.a*this.k0)),t.x=n,t.y=r,t}var oQ=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],lQ={init:rQ,forward:sQ,inverse:aQ,names:oQ};function cQ(){}function G4(t){return t}var uQ=["longlat","identity"],hQ={init:cQ,forward:G4,inverse:G4,names:uQ},fQ=[lQ,hQ],fv={},zv=[];function z5(t,e){var i=zv.length;return t.names?(zv[i]=t,t.names.forEach(function(n){fv[n.toLowerCase()]=i}),this):(console.log(e),!0)}function dQ(t){if(!t)return!1;var e=t.toLowerCase();if(typeof fv[e]<"u"&&zv[fv[e]])return zv[fv[e]]}function AQ(){fQ.forEach(z5)}var gQ={start:AQ,add:z5,get:dQ},Fi={};Fi.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Fi.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Fi.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Fi.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Fi.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Fi.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Fi.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Fi.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Fi.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Fi.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Fi.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Fi.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Fi.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Fi.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Fi.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Fi.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Fi.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Fi.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Fi.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Fi.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Fi.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Fi.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Fi.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Fi.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Fi.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Fi.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Fi.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Fi.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Fi.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Fi.hough={a:6378270,rf:297,ellipseName:"Hough"};Fi.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Fi.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Fi.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Fi.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Fi.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Fi.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Fi.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Fi.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Fi.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Fi.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Fi.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Fi.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var yQ=Fi.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Fi.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function pQ(t,e,i,n){var r=t*t,s=e*e,a=(r-s)/r,o=0;n?(t*=1-a*(LX+a*(UX+a*kX)),r=t*t,a=0):o=Math.sqrt(a);var l=(r-s)/s;return{es:a,e:o,ep2:l}}function mQ(t,e,i,n,r){if(!t){var s=Nu(Fi,n);s||(s=yQ),t=s.a,e=s.b,i=s.rf}return i&&!e&&(e=(1-1/i)*t),(i===0||Math.abs(t-e)<Le)&&(r=!0,e=t),{a:t,b:e,rf:i,sphere:r}}var dv={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var _Q in dv){var X4=dv[_Q];dv[X4.datumName]=X4}function bQ(t,e,i,n,r,s,a){var o={};return t===void 0||t==="none"?o.datum_type=BM:o.datum_type=NX,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=gf),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=yf,o.datum_params[3]*=qm,o.datum_params[4]*=qm,o.datum_params[5]*=qm,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=SA,o.grids=a),o.a=i,o.b=n,o.es=r,o.ep2=s,o}var V5={};function vQ(t,e){var i=new DataView(e),n=wQ(i),r=MQ(i,n),s=IQ(i,r,n),a={header:r,subgrids:s};return V5[t]=a,a}function TQ(t){if(t===void 0)return null;var e=t.split(",");return e.map(SQ)}function SQ(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:V5[t]||null,isNull:!1}}function nA(t){return t/3600*Math.PI/180}function wQ(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function MQ(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:RM(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function RM(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function IQ(t,e,i){for(var n=176,r=[],s=0;s<e.nSubgrids;s++){var a=BQ(t,n,i),o=OQ(t,n,a,i),l=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),c=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);r.push({ll:[nA(a.lowerLongitude),nA(a.lowerLatitude)],del:[nA(a.longitudeInterval),nA(a.latitudeInterval)],lim:[l,c],count:a.gridNodeCount,cvs:EQ(o)}),n+=176+a.gridNodeCount*16}return r}function EQ(t){return t.map(function(e){return[nA(e.longitudeShift),nA(e.latitudeShift)]})}function BQ(t,e,i){return{name:RM(t,e+8,e+16).trim(),parent:RM(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function OQ(t,e,i,n){for(var r=e+176,s=16,a=[],o=0;o<i.gridNodeCount;o++){var l={latitudeShift:t.getFloat32(r+o*s,n),longitudeShift:t.getFloat32(r+o*s+4,n),latitudeAccuracy:t.getFloat32(r+o*s+8,n),longitudeAccuracy:t.getFloat32(r+o*s+12,n)};a.push(l)}return a}function cl(t,e){if(!(this instanceof cl))return new cl(t);e=e||function(c){if(c)throw c};var i=nQ(t);if(typeof i!="object"){e("Could not parse to valid json: "+t);return}var n=cl.projections.get(i.projName);if(!n){e("Could not get projection name from: "+t);return}if(i.datumCode&&i.datumCode!=="none"){var r=Nu(dv,i.datumCode);r&&(i.datum_params=i.datum_params||(r.towgs84?r.towgs84.split(","):null),i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var s=mQ(i.a,i.b,i.rf,i.ellps,i.sphere),a=pQ(s.a,s.b,s.rf,i.R_A),o=TQ(i.nadgrids),l=i.datum||bQ(i.datumCode,i.datum_params,s.a,s.b,a.es,a.ep2,o);Y4(this,i),Y4(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),e(null,this)}cl.projections=gQ;cl.projections.start();function RQ(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===gf?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===yf?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function $5(t,e,i){var n=t.x,r=t.y,s=t.z?t.z:0,a,o,l,c;if(r<-Te&&r>-1.001*Te)r=-Te;else if(r>Te&&r<1.001*Te)r=Te;else{if(r<-Te)return{x:-1/0,y:-1/0,z:t.z};if(r>Te)return{x:1/0,y:1/0,z:t.z}}return n>Math.PI&&(n-=2*Math.PI),o=Math.sin(r),c=Math.cos(r),l=o*o,a=i/Math.sqrt(1-e*l),{x:(a+s)*c*Math.cos(n),y:(a+s)*c*Math.sin(n),z:(a*(1-e)+s)*o}}function W5(t,e,i,n){var r=1e-12,s=r*r,a=30,o,l,c,h,A,m,b,S,M,I,O,D,B,P=t.x,j=t.y,N=t.z?t.z:0,F,$,V;if(o=Math.sqrt(P*P+j*j),l=Math.sqrt(P*P+j*j+N*N),o/i<r){if(F=0,l/i<r)return $=Te,V=-n,{x:t.x,y:t.y,z:t.z}}else F=Math.atan2(j,P);c=N/l,h=o/l,A=1/Math.sqrt(1-e*(2-e)*h*h),S=h*(1-e)*A,M=c*A,B=0;do B++,b=i/Math.sqrt(1-e*M*M),V=o*S+N*M-b*(1-e*M*M),m=e*b/(b+V),A=1/Math.sqrt(1-m*(2-m)*h*h),I=h*(1-m)*A,O=c*A,D=O*S-I*M,S=I,M=O;while(D*D>s&&B<a);return $=Math.atan(O/Math.abs(I)),{x:F,y:$,z:V}}function DQ(t,e,i){if(e===gf)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===yf){var n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5],c=i[6];return{x:c*(t.x-l*t.y+o*t.z)+n,y:c*(l*t.x+t.y-a*t.z)+r,z:c*(-o*t.x+a*t.y+t.z)+s}}}function CQ(t,e,i){if(e===gf)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===yf){var n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5],c=i[6],h=(t.x-n)/c,A=(t.y-r)/c,m=(t.z-s)/c;return{x:h+l*A-o*m,y:-l*h+A+a*m,z:o*h-a*A+m}}}function Pb(t){return t===gf||t===yf}function PQ(t,e,i){if(RQ(t,e)||t.datum_type===BM||e.datum_type===BM)return i;var n=t.a,r=t.es;if(t.datum_type===SA){var s=Q4(t,!1,i);if(s!==0)return;n=W4,r=H4}var a=e.a,o=e.b,l=e.es;if(e.datum_type===SA&&(a=W4,o=FX,l=H4),r===l&&n===a&&!Pb(t.datum_type)&&!Pb(e.datum_type))return i;if(i=$5(i,r,n),Pb(t.datum_type)&&(i=DQ(i,t.datum_type,t.datum_params)),Pb(e.datum_type)&&(i=CQ(i,e.datum_type,e.datum_params)),i=W5(i,l,a,o),e.datum_type===SA){var c=Q4(e,!0,i);if(c!==0)return}return i}function Q4(t,e,i){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-i.x,y:i.y},r={x:Number.NaN,y:Number.NaN},s=[];t:for(var a=0;a<t.grids.length;a++){var o=t.grids[a];if(s.push(o.name),o.isNull){r=n;break}if(o.mandatory,o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,c=0,h=l.length;c<h;c++){var A=l[c],m=(Math.abs(A.del[1])+Math.abs(A.del[0]))/1e4,b=A.ll[0]-m,S=A.ll[1]-m,M=A.ll[0]+(A.lim[0]-1)*A.del[0]+m,I=A.ll[1]+(A.lim[1]-1)*A.del[1]+m;if(!(S>n.y||b>n.x||I<n.y||M<n.x)&&(r=xQ(n,e,A),!isNaN(r.x)))break t}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*rl+" "+n.y*rl+" tried: '"+s+"'"),-1):(i.x=-r.x,i.y=r.y,0)}function xQ(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var r={x:t.x,y:t.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=je(r.x-Math.PI)+Math.PI;var s=K4(r,i);if(e){if(isNaN(s.x))return n;s.x=r.x-s.x,s.y=r.y-s.y;var a=9,o=1e-12,l,c;do{if(c=K4(s,i),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:r.x-(c.x+s.x),y:r.y-(c.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=je(s.x+i.ll[0]),n.y=s.y+i.ll[1]}else isNaN(s.x)||(n.x=t.x+s.x,n.y=t.y+s.y);return n}function K4(t,e){var i={x:t.x/e.del[0],y:t.y/e.del[1]},n={x:Math.floor(i.x),y:Math.floor(i.y)},r={x:i.x-1*n.x,y:i.y-1*n.y},s={x:Number.NaN,y:Number.NaN},a;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return s;a=n.y*e.lim[0]+n.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var c={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var h={x:e.cvs[a][0],y:e.cvs[a][1]},A=r.x*r.y,m=r.x*(1-r.y),b=(1-r.x)*(1-r.y),S=(1-r.x)*r.y;return s.x=b*o.x+m*l.x+S*h.x+A*c.x,s.y=b*o.y+m*l.y+S*h.y+A*c.y,s}function Z4(t,e,i){var n=i.x,r=i.y,s=i.z||0,a,o,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&i.z===void 0))switch(l===0?(a=n,"ew".indexOf(t.axis[l])!==-1?o="x":o="y"):l===1?(a=r,"ns".indexOf(t.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),t.axis[l]){case"e":c[o]=a;break;case"w":c[o]=-a;break;case"n":c[o]=a;break;case"s":c[o]=-a;break;case"u":i[o]!==void 0&&(c.z=a);break;case"d":i[o]!==void 0&&(c.z=-a);break;default:return null}return c}function H5(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function NQ(t){J4(t.x),J4(t.y)}function J4(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function FQ(t,e){return(t.datum.datum_type===gf||t.datum.datum_type===yf||t.datum.datum_type===SA)&&e.datumCode!=="WGS84"||(e.datum.datum_type===gf||e.datum.datum_type===yf||e.datum.datum_type===SA)&&t.datumCode!=="WGS84"}function Vv(t,e,i,n){var r;Array.isArray(i)?i=H5(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var s=i.z!==void 0;if(NQ(i),t.datum&&e.datum&&FQ(t,e)&&(r=new cl("WGS84"),i=Vv(t,r,i,n),t=r),n&&t.axis!=="enu"&&(i=Z4(t,!1,i)),t.projName==="longlat")i={x:i.x*$r,y:i.y*$r,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),i=t.inverse(i),!i)return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=PQ(t.datum,e.datum,i),!!i)return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),e.projName==="longlat"?i={x:i.x*rl,y:i.y*rl,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&e.axis!=="enu"?Z4(e,!0,i):(i&&!s&&delete i.z,i)}var tC=cl("WGS84");function Uw(t,e,i,n){var r,s,a;return Array.isArray(i)?(r=Vv(t,e,i,n)||{x:NaN,y:NaN},i.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(i.slice(3)):[r.x,r.y,i[2]].concat(i.slice(3)):[r.x,r.y].concat(i.slice(2)):[r.x,r.y]):(s=Vv(t,e,i,n),a=Object.keys(i),a.length===2||a.forEach(function(o){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=i[o]}),s)}function eC(t){return t instanceof cl?t:t.oProj?t.oProj:cl(t)}function qa(t,e,i){t=eC(t);var n=!1,r;return typeof e>"u"?(e=t,t=tC,n=!0):(typeof e.x<"u"||Array.isArray(e))&&(i=e,e=t,t=tC,n=!0),e=eC(e),i?Uw(t,e,i):(r={forward:function(s,a){return Uw(t,e,s,a)},inverse:function(s,a){return Uw(e,t,s,a)}},n&&(r.oProj=e),r)}var iC=6,q5="AJSAJS",Y5="AFAFAF",rA=65,Ps=73,Ua=79,Pm=86,xm=90,LQ={forward:G5,inverse:UQ,toPoint:X5};function G5(t,e){return e=e||5,zQ(kQ({lat:t[1],lon:t[0]}),e)}function UQ(t){var e=_E(K5(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function X5(t){var e=_E(K5(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function kw(t){return t*(Math.PI/180)}function nC(t){return 180*(t/Math.PI)}function kQ(t){var e=t.lat,i=t.lon,n=6378137,r=.00669438,s=.9996,a,o,l,c,h,A,m,b=kw(e),S=kw(i),M,I;I=Math.floor((i+180)/6)+1,i===180&&(I=60),e>=56&&e<64&&i>=3&&i<12&&(I=32),e>=72&&e<84&&(i>=0&&i<9?I=31:i>=9&&i<21?I=33:i>=21&&i<33?I=35:i>=33&&i<42&&(I=37)),a=(I-1)*6-180+3,M=kw(a),o=r/(1-r),l=n/Math.sqrt(1-r*Math.sin(b)*Math.sin(b)),c=Math.tan(b)*Math.tan(b),h=o*Math.cos(b)*Math.cos(b),A=Math.cos(b)*(S-M),m=n*((1-r/4-3*r*r/64-5*r*r*r/256)*b-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*b)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*b)-35*r*r*r/3072*Math.sin(6*b));var O=s*l*(A+(1-c+h)*A*A*A/6+(5-18*c+c*c+72*h-58*o)*A*A*A*A*A/120)+5e5,D=s*(m+l*Math.tan(b)*(A*A/2+(5-c+9*h+4*h*h)*A*A*A*A/24+(61-58*c+c*c+600*h-330*o)*A*A*A*A*A*A/720));return e<0&&(D+=1e7),{northing:Math.round(D),easting:Math.round(O),zoneNumber:I,zoneLetter:jQ(e)}}function _E(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s=.9996,a=6378137,o=.00669438,l,c=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),h,A,m,b,S,M,I,O,D,B=i-5e5,P=e;n<"N"&&(P-=1e7),I=(r-1)*6-180+3,l=o/(1-o),M=P/s,O=M/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),D=O+(3*c/2-27*c*c*c/32)*Math.sin(2*O)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*O)+151*c*c*c/96*Math.sin(6*O),h=a/Math.sqrt(1-o*Math.sin(D)*Math.sin(D)),A=Math.tan(D)*Math.tan(D),m=l*Math.cos(D)*Math.cos(D),b=a*(1-o)/Math.pow(1-o*Math.sin(D)*Math.sin(D),1.5),S=B/(h*s);var j=D-h*Math.tan(D)/b*(S*S/2-(5+3*A+10*m-4*m*m-9*l)*S*S*S*S/24+(61+90*A+298*m+45*A*A-252*l-3*m*m)*S*S*S*S*S*S/720);j=nC(j);var N=(S-(1+2*A+m)*S*S*S/6+(5-2*m+28*A-3*m*m+8*l+24*A*A)*S*S*S*S*S/120)/Math.cos(D);N=I+nC(N);var F;if(t.accuracy){var $=_E({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});F={top:$.lat,right:$.lon,bottom:j,left:N}}else F={lat:j,lon:N};return F}function jQ(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function zQ(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+VQ(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+n.substr(n.length-5,e)}function VQ(t,e,i){var n=Q5(i),r=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return $Q(r,s,n)}function Q5(t){var e=t%iC;return e===0&&(e=iC),e}function $Q(t,e,i){var n=i-1,r=q5.charCodeAt(n),s=Y5.charCodeAt(n),a=r+t-1,o=s+e,l=!1;a>xm&&(a=a-xm+rA-1,l=!0),(a===Ps||r<Ps&&a>Ps||(a>Ps||r<Ps)&&l)&&a++,(a===Ua||r<Ua&&a>Ua||(a>Ua||r<Ua)&&l)&&(a++,a===Ps&&a++),a>xm&&(a=a-xm+rA-1),o>Pm?(o=o-Pm+rA-1,l=!0):l=!1,(o===Ps||s<Ps&&o>Ps||(o>Ps||s<Ps)&&l)&&o++,(o===Ua||s<Ua&&o>Ua||(o>Ua||s<Ua)&&l)&&(o++,o===Ps&&o++),o>Pm&&(o=o-Pm+rA-1);var c=String.fromCharCode(a)+String.fromCharCode(o);return c}function K5(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,i=null,n="",r,s=0;!/[A-Z]/.test(r=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;n+=r,s++}var a=parseInt(n,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+t;i=t.substring(s,s+=2);for(var l=Q5(a),c=WQ(i.charAt(0),l),h=HQ(i.charAt(1),l);h<qQ(o);)h+=2e6;var A=e-s;if(A%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var m=A/2,b=0,S=0,M,I,O,D,B;return m>0&&(M=1e5/Math.pow(10,m),I=t.substring(s,s+m),b=parseFloat(I)*M,O=t.substring(s+m),S=parseFloat(O)*M),D=b+c,B=S+h,{easting:D,northing:B,zoneLetter:o,zoneNumber:a,accuracy:M}}function WQ(t,e){for(var i=q5.charCodeAt(e-1),n=1e5,r=!1;i!==t.charCodeAt(0);){if(i++,i===Ps&&i++,i===Ua&&i++,i>xm){if(r)throw"Bad character: "+t;i=rA,r=!0}n+=1e5}return n}function HQ(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=Y5.charCodeAt(e-1),n=0,r=!1;i!==t.charCodeAt(0);){if(i++,i===Ps&&i++,i===Ua&&i++,i>Pm){if(r)throw"Bad character: "+t;i=rA,r=!0}n+=1e5}return n}function qQ(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function UA(t,e,i){if(!(this instanceof UA))return new UA(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}UA.fromMGRS=function(t){return new UA(X5(t))};UA.prototype.toMGRS=function(t){return G5([this.x,this.y],t)};var YQ=1,GQ=.25,rC=.046875,sC=.01953125,aC=.01068115234375,XQ=.75,QQ=.46875,KQ=.013020833333333334,ZQ=.007120768229166667,JQ=.3645833333333333,tK=.005696614583333333,eK=.3076171875;function bE(t){var e=[];e[0]=YQ-t*(GQ+t*(rC+t*(sC+t*aC))),e[1]=t*(XQ-t*(rC+t*(sC+t*aC)));var i=t*t;return e[2]=i*(QQ-t*(KQ+t*ZQ)),i*=t,e[3]=i*(JQ-t*tK),e[4]=i*t*eK,e}function c0(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var iK=20;function vE(t,e,i){for(var n=1/(1-e),r=t,s=iK;s;--s){var a=Math.sin(r),o=1-e*a*a;if(o=(c0(r,a,Math.cos(r),i)-t)*(o*Math.sqrt(o))*n,r-=o,Math.abs(o)<Le)return r}return r}function nK(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=bE(this.es),this.ml0=c0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function rK(t){var e=t.x,i=t.y,n=je(e-this.long0),r,s,a,o=Math.sin(i),l=Math.cos(i);if(this.es){var h=l*n,A=Math.pow(h,2),m=this.ep2*Math.pow(l,2),b=Math.pow(m,2),S=Math.abs(l)>Le?Math.tan(i):0,M=Math.pow(S,2),I=Math.pow(M,2);r=1-this.es*Math.pow(o,2),h=h/Math.sqrt(r);var O=c0(i,o,l,this.en);s=this.a*(this.k0*h*(1+A/6*(1-M+m+A/20*(5-18*M+I+14*m-58*M*m+A/42*(61+179*I-I*M-479*M)))))+this.x0,a=this.a*(this.k0*(O-this.ml0+o*n*h/2*(1+A/12*(5-M+9*m+4*b+A/30*(61+I-58*M+270*m-330*M*m+A/56*(1385+543*I-I*M-3111*M))))))+this.y0}else{var c=l*Math.sin(n);if(Math.abs(Math.abs(c)-1)<Le)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,a=l*Math.cos(n)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(a),c>=1){if(c-1>Le)return 93;a=0}else a=Math.acos(a);i<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=s,t.y=a,t}function sK(t){var e,i,n,r,s=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,i=vE(e,this.es,this.en),Math.abs(i)<Te){var A=Math.sin(i),m=Math.cos(i),b=Math.abs(m)>Le?Math.tan(i):0,S=this.ep2*Math.pow(m,2),M=Math.pow(S,2),I=Math.pow(b,2),O=Math.pow(I,2);e=1-this.es*Math.pow(A,2);var D=s*Math.sqrt(e)/this.k0,B=Math.pow(D,2);e=e*b,n=i-e*B/(1-this.es)*.5*(1-B/12*(5+3*I-9*S*I+S-4*M-B/30*(61+90*I-252*S*I+45*O+46*S-B/56*(1385+3633*I+4095*O+1574*O*I)))),r=je(this.long0+D*(1-B/6*(1+2*I+S-B/20*(5+28*I+24*O+8*S*I+6*S-B/42*(61+662*I+1320*O+720*O*I))))/m)}else n=Te*V_(a),r=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),c=this.lat0+a/this.k0,h=Math.cos(c);e=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),n=Math.asin(e),a<0&&(n=-n),l===0&&h===0?r=0:r=je(Math.atan2(l,h)+this.long0)}return t.x=r,t.y=n,t}var aK=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Av={init:nK,forward:rK,inverse:sK,names:aK};function Z5(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Ls(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function oK(t){var e=1+t,i=e-1;return i===0?t:t*Math.log(e)/i}function lK(t){var e=Math.abs(t);return e=oK(e*(1+e/(Ls(1,e)+1))),t<0?-e:e}function TE(t,e){for(var i=2*Math.cos(2*e),n=t.length-1,r=t[n],s=0,a;--n>=0;)a=-s+i*r+t[n],s=r,r=a;return e+a*Math.sin(2*e)}function cK(t,e){for(var i=2*Math.cos(e),n=t.length-1,r=t[n],s=0,a;--n>=0;)a=-s+i*r+t[n],s=r,r=a;return Math.sin(e)*a}function uK(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function J5(t,e,i){for(var n=Math.sin(e),r=Math.cos(e),s=Z5(i),a=uK(i),o=2*r*a,l=-2*n*s,c=t.length-1,h=t[c],A=0,m=0,b=0,S,M;--c>=0;)S=m,M=A,m=h,A=b,h=-S+o*m-l*A+t[c],b=-M+l*m+o*A;return o=n*a,l=r*s,[o*h-l*b,o*b+l*h]}function hK(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Av.init.apply(this),this.forward=Av.forward,this.inverse=Av.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),i=i*e,this.cgb[1]=i*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i=i*e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),i=i*e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(-12/5+e*(-24832/14175))),i=i*e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i=i*e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),i=i*e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i=i*e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i=i*e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i=i*e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var n=TE(this.cbg,this.lat0);this.Zb=-this.Qn*(n+cK(this.gtu,2*n))}function fK(t){var e=je(t.x-this.long0),i=t.y;i=TE(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),s=Math.sin(e),a=Math.cos(e);i=Math.atan2(n,a*r),e=Math.atan2(s*r,Ls(n,r*a)),e=lK(Math.tan(e));var o=J5(this.gtu,2*i,2*e);i=i+o[0],e=e+o[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,c=1/0),t.x=l,t.y=c,t}function dK(t){var e=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,e=e/this.Qn;var n,r;if(Math.abs(e)<=2.623395162778){var s=J5(this.utg,2*i,2*e);i=i+s[0],e=e+s[1],e=Math.atan(Z5(e));var a=Math.sin(i),o=Math.cos(i),l=Math.sin(e),c=Math.cos(e);i=Math.atan2(a*c,Ls(l,c*o)),e=Math.atan2(l,c*o),n=je(e+this.long0),r=TE(this.cgb,i)}else n=1/0,r=1/0;return t.x=n,t.y=r,t}var AK=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],gv={init:hK,forward:fK,inverse:dK,names:AK};function gK(t,e){if(t===void 0){if(t=Math.floor((je(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var yK="etmerc";function pK(){var t=gK(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*$r,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,gv.init.apply(this),this.forward=gv.forward,this.inverse=gv.inverse}var mK=["Universal Transverse Mercator System","utm"],_K={init:pK,names:mK,dependsOn:yK};function SE(t,e){return Math.pow((1-t)/(1+t),e)}var bK=20;function vK(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+un)/(Math.pow(Math.tan(.5*this.lat0+un),this.C)*SE(this.e*t,this.ratexp))}function TK(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+un),this.C)*SE(this.e*Math.sin(i),this.ratexp))-Te,t.x=this.C*e,t}function SK(t){for(var e=1e-14,i=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+un)/this.K,1/this.C),s=bK;s>0&&(n=2*Math.atan(r*SE(this.e*Math.sin(t.y),-.5*this.e))-Te,!(Math.abs(n-t.y)<e));--s)t.y=n;return s?(t.x=i,t.y=n,t):null}var wE={init:vK,forward:TK,inverse:SK};function wK(){wE.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function MK(t){var e,i,n,r;return t.x=je(t.x-this.long0),wE.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function IK(t){var e,i,n,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Ls(t.x,t.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),i=Math.cos(a),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,n=0;return t.x=n,t.y=r,wE.inverse.apply(this,[t]),t.x=je(t.x+this.long0),t}var EK=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],BK={init:wK,forward:MK,inverse:IK,names:EK};function OK(t,e,i){return e*=i,Math.tan(.5*(Te+t))*Math.pow((1-e)/(1+e),.5*i)}function RK(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Le&&(this.k0=.5*(1+V_(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Le&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Le&&Math.abs(Math.cos(this.lat_ts))>Le&&(this.k0=.5*this.cons*dl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Do(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=dl(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Te,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function DK(t){var e=t.x,i=t.y,n=Math.sin(i),r=Math.cos(i),s,a,o,l,c,h,A=je(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Le&&Math.abs(i+this.lat0)<=Le?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*n+this.coslat0*r*Math.cos(A)),t.x=this.a*s*r*Math.sin(A)+this.x0,t.y=this.a*s*(this.coslat0*n-this.sinlat0*r*Math.cos(A))+this.y0,t):(a=2*Math.atan(this.ssfn_(i,n,this.e))-Te,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=Le?(c=Do(this.e,i*this.con,this.con*n),h=2*this.a*this.k0*c/this.cons,t.x=this.x0+h*Math.sin(e-this.long0),t.y=this.y0-this.con*h*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Le?(s=2*this.a*this.k0/(1+l*Math.cos(A)),t.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(A))),t.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(A))+this.y0),t.x=s*l*Math.sin(A)+this.x0,t))}function CK(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,s,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,i=this.lat0,a<=Le?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<Le?this.lat0>0?e=je(this.long0+Math.atan2(t.x,-1*t.y)):e=je(this.long0+Math.atan2(t.x,t.y)):e=je(this.long0+Math.atan2(t.x*Math.sin(o),a*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=i,t)}else if(Math.abs(this.coslat0)<=Le){if(a<=Le)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),i=this.con*g_(this.e,n),e=this.con*je(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Le?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/a),e=je(this.long0+Math.atan2(t.x*Math.sin(r),a*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*g_(this.e,Math.tan(.5*(Te+s)));return t.x=e,t.y=i,t}var PK=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],xK={init:RK,forward:DK,inverse:CK,names:PK,ssfn_:OK};function NK(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=this.rf,r=1/n,s=2*r-Math.pow(r,2),a=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*c}function FK(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*a+this.x0,t}function LK(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),o=this.lambda0+a/this.alpha,l=0,c=s,h=-1e3,A=0;Math.abs(c-h)>1e-7;){if(++A>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),h=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=o,t.y=c,t}var UK=["somerc"],kK={init:NK,forward:FK,inverse:LK,names:UK},Zd=1e-7;function jK(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(i)!==-1}function zK(){var t,e,i,n,r,s,a,o,l,c,h=0,A,m=0,b=0,S=0,M=0,I=0,O=0;this.no_off=jK(this),this.no_rot="no_rot"in this;var D=!1;"alpha"in this&&(D=!0);var B=!1;if("rectified_grid_angle"in this&&(B=!0),D&&(O=this.alpha),B&&(h=this.rectified_grid_angle*$r),D||B)m=this.longc;else if(b=this.long1,M=this.lat1,S=this.long2,I=this.lat2,Math.abs(M-I)<=Zd||(t=Math.abs(M))<=Zd||Math.abs(t-Te)<=Zd||Math.abs(Math.abs(this.lat0)-Te)<=Zd||Math.abs(Math.abs(I)-Te)<=Zd)throw new Error;var P=1-this.es;e=Math.sqrt(P),Math.abs(this.lat0)>Le?(o=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*o*o,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/P),this.A=this.B*this.k0*e/t,n=this.B*e/(i*Math.sqrt(t)),r=n*n-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(Do(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),D||B?(D?(A=Math.asin(Math.sin(O)/n),B||(h=O)):(A=h,O=Math.asin(n*Math.sin(A))),this.lam0=m-Math.asin(.5*(r-1/r)*Math.tan(A))/this.B):(s=Math.pow(Do(this.e,M,Math.sin(M)),this.B),a=Math.pow(Do(this.e,I,Math.sin(I)),this.B),r=this.E/s,l=(a-s)/(a+s),c=this.E*this.E,c=(c-a*s)/(c+a*s),t=b-S,t<-Math.pi?S-=d_:t>Math.pi&&(S+=d_),this.lam0=je(.5*(b+S)-Math.atan(c*Math.tan(.5*this.B*(b-S))/l)/this.B),A=Math.atan(2*Math.sin(this.B*je(b-this.lam0))/(r-1/r)),h=O=Math.asin(n*Math.sin(A))),this.singam=Math.sin(A),this.cosgam=Math.cos(A),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(O))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*A,this.v_pole_n=this.ArB*Math.log(Math.tan(un-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(un+r))}function VK(t){var e={},i,n,r,s,a,o,l,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Te)>Le){if(a=this.E/Math.pow(Do(this.e,t.y,Math.sin(t.y)),this.B),o=1/a,i=.5*(a-o),n=.5*(a+o),s=Math.sin(this.B*t.x),r=(i*this.singam-s*this.cosgam)/n,Math.abs(Math.abs(r)-1)<Le)throw new Error;c=.5*this.ArB*Math.log((1-r)/(1+r)),o=Math.cos(this.B*t.x),Math.abs(o)<Zd?l=this.A*t.x:l=this.ArB*Math.atan2(i*this.cosgam+s*this.singam,o)}else c=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function $K(t){var e,i,n,r,s,a,o,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*i),r=.5*(n-1/n),s=.5*(n+1/n),a=Math.sin(this.BrA*e),o=(a*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(o)-1)<Le)l.x=0,l.y=o<0?-Te:Te;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=g_(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var WK=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],HK={init:zK,forward:VK,inverse:$K,names:WK};function qK(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Le)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=dl(this.e,e,i),r=Do(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=dl(this.e,s,a),l=Do(this.e,this.lat2,s),c=Do(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Le?this.ns=Math.log(n/o)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function YK(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=Le&&(i=V_(i)*(Te-2*Le));var n=Math.abs(Math.abs(i)-Te),r,s;if(n>Le)r=Do(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(r,this.ns);else{if(n=i*this.ns,n<=0)return null;s=0}var a=this.ns*je(e-this.long0);return t.x=this.k0*(s*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,t}function GK(t){var e,i,n,r,s,a=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),i=1):(e=-Math.sqrt(a*a+o*o),i=-1);var l=0;if(e!==0&&(l=Math.atan2(i*a,i*o)),e!==0||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),r=g_(this.e,n),r===-9999)return null}else r=-Te;return s=je(l/this.ns+this.long0),t.x=s,t.y=r,t}var XK=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],QK={init:qK,forward:YK,inverse:GK,names:XK};function KK(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function ZK(t){var e,i,n,r,s,a,o,l=t.x,c=t.y,h=je(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),n=-h*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),s=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=o*Math.cos(a)/1,t.x=o*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function JK(t){var e,i,n,r,s,a,o,l,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),r=s/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,l=0;var h=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(l=1),o=t.y,h+=1;while(l===0&&h<15);return h>=15?null:t}var tZ=["Krovak","krovak"],eZ={init:KK,forward:ZK,inverse:JK,names:tZ};function ms(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}function $_(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function W_(t){return .375*t*(1+.25*t*(1+.46875*t))}function H_(t){return .05859375*t*t*(1+.75*t)}function q_(t){return t*t*t*(35/3072)}function kA(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function $u(t){return Math.abs(t)<Te?t:t-V_(t)*Math.PI}function $v(t,e,i,n,r){var s,a;s=t/e;for(var o=0;o<15;o++)if(a=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function iZ(){this.sphere||(this.e0=$_(this.es),this.e1=W_(this.es),this.e2=H_(this.es),this.e3=q_(this.es),this.ml0=this.a*ms(this.e0,this.e1,this.e2,this.e3,this.lat0))}function nZ(t){var e,i,n=t.x,r=t.y;if(n=je(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var s=Math.sin(r),a=Math.cos(r),o=kA(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),c=n*Math.cos(r),h=c*c,A=this.es*a*a/(1-this.es),m=this.a*ms(this.e0,this.e1,this.e2,this.e3,r);e=o*c*(1-h*l*(1/6-(8-l+8*A)*h/120)),i=m-this.ml0+o*s/a*h*(.5+(5-l+6*A)*h/24)}return t.x=e+this.x0,t.y=i+this.y0,t}function rZ(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,n,r;if(this.sphere){var s=i+this.lat0;n=Math.asin(Math.sin(s)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+i,o=$v(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Te)<=Le)return t.x=this.long0,t.y=Te,i<0&&(t.y*=-1),t;var l=kA(this.a,this.e,Math.sin(o)),c=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(o),2),A=e*this.a/l,m=A*A;n=o-l*Math.tan(o)/c*A*A*(.5-(1+3*h)*A*A/24),r=A*(1-m*(h/3+(1+3*h)*h*m/15))/Math.cos(o)}return t.x=je(r+this.long0),t.y=$u(n),t}var sZ=["Cassini","Cassini_Soldner","cass"],aZ={init:iZ,forward:nZ,inverse:rZ,names:sZ};function Eu(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e}var oZ=1,lZ=2,cZ=3,uZ=4;function hZ(){var t=Math.abs(this.lat0);if(Math.abs(t-Te)<Le?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Le?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Eu(this.e,1),this.mmf=.5/(1-this.es),this.apa=bZ(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Eu(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function fZ(t){var e,i,n,r,s,a,o,l,c,h,A=t.x,m=t.y;if(A=je(A-this.long0),this.sphere){if(s=Math.sin(m),h=Math.cos(m),n=Math.cos(A),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+h*n:1+this.sinph0*s+this.cosph0*h*n,i<=Le)return null;i=Math.sqrt(2/i),e=i*h*Math.sin(A),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(m+this.lat0)<Le)return null;i=un-m*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),e=i*Math.sin(A),i*=n}}else{switch(o=0,l=0,c=0,n=Math.cos(A),r=Math.sin(A),s=Math.sin(m),a=Eu(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:c=1+this.sinb1*o+this.cosb1*l*n;break;case this.EQUIT:c=1+l*n;break;case this.N_POLE:c=Te+m,a=this.qp-a;break;case this.S_POLE:c=m-Te,a=this.qp+a;break}if(Math.abs(c)<Le)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?i=this.ymf*c*(this.cosb1*o-this.sinb1*l*n):i=(c=Math.sqrt(2/(1+l*n)))*o*this.ymf,e=this.xmf*c*l*r;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*r,i=n*(this.mode===this.S_POLE?c:-c)):e=i=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t}function dZ(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,n,r,s,a,o,l,c;if(this.sphere){var h=0,A,m=0;if(A=Math.sqrt(e*e+i*i),r=A*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=Math.sin(r),h=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(A)<=Le?0:Math.asin(i*m/A),e*=m,i=h*A;break;case this.OBLIQ:r=Math.abs(A)<=Le?this.lat0:Math.asin(h*this.sinph0+i*m*this.cosph0/A),e*=m*this.cosph0,i=(h-Math.sin(r)*this.sinph0)*A;break;case this.N_POLE:i=-i,r=Te-r;break;case this.S_POLE:r-=Te;break}n=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,i)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,i*=this.dd,l=Math.sqrt(e*e+i*i),l<Le)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(c=s*this.sinb1+i*a*this.cosb1/l,o=this.qp*c,i=l*this.cosb1*s-i*this.sinb1*a):(c=i*a/l,o=this.qp*c,i=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),o=e*e+i*i,!o)return t.x=this.long0,t.y=this.lat0,t;c=1-o/this.qp,this.mode===this.S_POLE&&(c=-c)}n=Math.atan2(e,i),r=vZ(Math.asin(c),this.apa)}return t.x=je(this.long0+n),t.y=r,t}var AZ=.3333333333333333,gZ=.17222222222222222,yZ=.10257936507936508,pZ=.06388888888888888,mZ=.0664021164021164,_Z=.016415012942191543;function bZ(t){var e,i=[];return i[0]=t*AZ,e=t*t,i[0]+=e*gZ,i[1]=e*pZ,e*=t,i[0]+=e*yZ,i[1]+=e*mZ,i[2]=e*_Z,i}function vZ(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var TZ=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],SZ={init:hZ,forward:fZ,inverse:dZ,names:TZ,S_POLE:oZ,N_POLE:lZ,EQUIT:cZ,OBLIQ:uZ};function Fu(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function wZ(){Math.abs(this.lat1+this.lat2)<Le||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=dl(this.e3,this.sin_po,this.cos_po),this.qs1=Eu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=dl(this.e3,this.sin_po,this.cos_po),this.qs2=Eu(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Eu(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Le?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function MZ(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=Eu(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*je(e-this.long0),a=r*Math.sin(s)+this.x0,o=this.rh-r*Math.cos(s)+this.y0;return t.x=a,t.y=o,t}function IZ(t){var e,i,n,r,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,e!==0&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,i)),s=je(r/this.ns0+this.long0),t.x=s,t.y=a,t}function EZ(t,e){var i,n,r,s,a,o=Fu(.5*e);if(t<Le)return o;for(var l=t*t,c=1;c<=25;c++)if(i=Math.sin(o),n=Math.cos(o),r=t*i,s=1-r*r,a=.5*s*s/n*(e/(1-l)-i/s+.5/t*Math.log((1-r)/(1+r))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var BZ=["Albers_Conic_Equal_Area","Albers","aea"],OZ={init:wZ,forward:MZ,inverse:IZ,names:BZ,phi1z:EZ};function RZ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function DZ(t){var e,i,n,r,s,a,o,l,c=t.x,h=t.y;return n=je(c-this.long0),e=Math.sin(h),i=Math.cos(h),r=Math.cos(n),a=this.sin_p14*e+this.cos_p14*i*r,s=1,a>0||Math.abs(a)<=Le?(o=this.x0+this.a*s*i*Math.sin(n)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*i*r)/a):(o=this.x0+this.infinity_dist*i*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=o,t.y=l,t}function CZ(t){var e,i,n,r,s,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),n=Math.cos(r),a=Fu(n*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),s=je(this.long0+s)):(a=this.phic0,s=0),t.x=s,t.y=a,t}var PZ=["gnom"],xZ={init:RZ,forward:DZ,inverse:CZ,names:PZ};function NZ(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*Te:Te;for(var n=Math.asin(.5*e),r,s,a,o,l=0;l<30;l++)if(s=Math.sin(n),a=Math.cos(n),o=t*s,r=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-s/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),n+=r,Math.abs(r)<=1e-10)return n;return NaN}function FZ(){this.sphere||(this.k0=dl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function LZ(t){var e=t.x,i=t.y,n,r,s=je(e-this.long0);if(this.sphere)n=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Eu(this.e,Math.sin(i));n=this.x0+this.a*this.k0*s,r=this.y0+this.a*a*.5/this.k0}return t.x=n,t.y=r,t}function UZ(t){t.x-=this.x0,t.y-=this.y0;var e,i;return this.sphere?(e=je(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=NZ(this.e,2*t.y*this.k0/this.a),e=je(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t}var kZ=["cea"],jZ={init:FZ,forward:LZ,inverse:UZ,names:kZ};function zZ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function VZ(t){var e=t.x,i=t.y,n=je(e-this.long0),r=$u(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*r,t}function $Z(t){var e=t.x,i=t.y;return t.x=je(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=$u(this.lat0+(i-this.y0)/this.a),t}var WZ=["Equirectangular","Equidistant_Cylindrical","eqc"],HZ={init:zZ,forward:VZ,inverse:$Z,names:WZ},oC=20;function qZ(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=$_(this.es),this.e1=W_(this.es),this.e2=H_(this.es),this.e3=q_(this.es),this.ml0=this.a*ms(this.e0,this.e1,this.e2,this.e3,this.lat0)}function YZ(t){var e=t.x,i=t.y,n,r,s,a=je(e-this.long0);if(s=a*Math.sin(i),this.sphere)Math.abs(i)<=Le?(n=this.a*a,r=-1*this.a*this.lat0):(n=this.a*Math.sin(s)/Math.tan(i),r=this.a*($u(i-this.lat0)+(1-Math.cos(s))/Math.tan(i)));else if(Math.abs(i)<=Le)n=this.a*a,r=-1*this.ml0;else{var o=kA(this.a,this.e,Math.sin(i))/Math.tan(i);n=o*Math.sin(s),r=this.a*ms(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+o*(1-Math.cos(s))}return t.x=n+this.x0,t.y=r+this.y0,t}function GZ(t){var e,i,n,r,s,a,o,l,c;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Le)e=je(n/this.a+this.long0),i=0;else{a=this.lat0+r/this.a,o=n*n/this.a/this.a+a*a,l=a;var h;for(s=oC;s;--s)if(h=Math.tan(l),c=-1*(a*(l*h+1)-l-.5*(l*l+o)*h)/((l-a)/h-1),l+=c,Math.abs(c)<=Le){i=l;break}e=je(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=Le)i=0,e=je(this.long0+n/this.a);else{a=(this.ml0+r)/this.a,o=n*n/this.a/this.a+a*a,l=a;var A,m,b,S,M;for(s=oC;s;--s)if(M=this.e*Math.sin(l),A=Math.sqrt(1-M*M)*Math.tan(l),m=this.a*ms(this.e0,this.e1,this.e2,this.e3,l),b=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),S=m/this.a,c=(a*(A*S+1)-S-.5*A*(S*S+o))/(this.es*Math.sin(2*l)*(S*S+o-2*a*S)/(4*A)+(a-S)*(A*b-2/Math.sin(2*l))-b),l-=c,Math.abs(c)<=Le){i=l;break}A=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=je(this.long0+Math.asin(n*A/this.a)/Math.sin(i))}return t.x=e,t.y=i,t}var XZ=["Polyconic","poly"],QZ={init:qZ,forward:YZ,inverse:GZ,names:XZ};function KZ(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function ZZ(t){var e,i=t.x,n=t.y,r=n-this.lat0,s=i-this.long0,a=r/qm*1e-5,o=s,l=1,c=0;for(e=1;e<=10;e++)l=l*a,c=c+this.A[e]*l;var h=c,A=o,m=1,b=0,S,M,I=0,O=0;for(e=1;e<=6;e++)S=m*h-b*A,M=b*h+m*A,m=S,b=M,I=I+this.B_re[e]*m-this.B_im[e]*b,O=O+this.B_im[e]*m+this.B_re[e]*b;return t.x=O*this.a+this.x0,t.y=I*this.a+this.y0,t}function JZ(t){var e,i=t.x,n=t.y,r=i-this.x0,s=n-this.y0,a=s/this.a,o=r/this.a,l=1,c=0,h,A,m=0,b=0;for(e=1;e<=6;e++)h=l*a-c*o,A=c*a+l*o,l=h,c=A,m=m+this.C_re[e]*l-this.C_im[e]*c,b=b+this.C_im[e]*l+this.C_re[e]*c;for(var S=0;S<this.iterations;S++){var M=m,I=b,O,D,B=a,P=o;for(e=2;e<=6;e++)O=M*m-I*b,D=I*m+M*b,M=O,I=D,B=B+(e-1)*(this.B_re[e]*M-this.B_im[e]*I),P=P+(e-1)*(this.B_im[e]*M+this.B_re[e]*I);M=1,I=0;var j=this.B_re[1],N=this.B_im[1];for(e=2;e<=6;e++)O=M*m-I*b,D=I*m+M*b,M=O,I=D,j=j+e*(this.B_re[e]*M-this.B_im[e]*I),N=N+e*(this.B_im[e]*M+this.B_re[e]*I);var F=j*j+N*N;m=(B*j+P*N)/F,b=(P*j-B*N)/F}var $=m,V=b,Z=1,nt=0;for(e=1;e<=9;e++)Z=Z*$,nt=nt+this.D[e]*Z;var X=this.lat0+nt*qm*1e5,bt=this.long0+V;return t.x=bt,t.y=X,t}var tJ=["New_Zealand_Map_Grid","nzmg"],eJ={init:KZ,forward:ZZ,inverse:JZ,names:tJ};function iJ(){}function nJ(t){var e=t.x,i=t.y,n=je(e-this.long0),r=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=r,t.y=s,t}function rJ(t){t.x-=this.x0,t.y-=this.y0;var e=je(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t}var sJ=["Miller_Cylindrical","mill"],aJ={init:iJ,forward:nJ,inverse:rJ,names:sJ},oJ=20;function lJ(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=bE(this.es)}function cJ(t){var e,i,n=t.x,r=t.y;if(n=je(n-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var s=this.n*Math.sin(r),a=oJ;a;--a){var o=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=o,Math.abs(o)<Le)break}e=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var l=Math.sin(r),c=Math.cos(r);i=this.a*c0(r,l,c,this.en),e=this.a*n*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t}function uJ(t){var e,i,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(e))),this.m?e=Fu((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Fu(Math.sin(e)/this.n)),n=je(n+this.long0),e=$u(e)):(e=vE(t.y/this.a,this.es,this.en),r=Math.abs(e),r<Te?(r=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),n=je(i)):r-Le<Te&&(n=this.long0)),t.x=n,t.y=e,t}var hJ=["Sinusoidal","sinu"],fJ={init:lJ,forward:cJ,inverse:uJ,names:hJ};function dJ(){}function AJ(t){for(var e=t.x,i=t.y,n=je(e-this.long0),r=i,s=Math.PI*Math.sin(i);;){var a=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=a,Math.abs(a)<Le)break}r/=2,Math.PI/2-Math.abs(i)<Le&&(n=0);var o=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=o,t.y=l,t}function gJ(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=je(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=n,t.y=r,t}var yJ=["Mollweide","moll"],pJ={init:dJ,forward:AJ,inverse:gJ,names:yJ};function mJ(){Math.abs(this.lat1+this.lat2)<Le||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=$_(this.es),this.e1=W_(this.es),this.e2=H_(this.es),this.e3=q_(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=dl(this.e,this.sinphi,this.cosphi),this.ml1=ms(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Le?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=dl(this.e,this.sinphi,this.cosphi),this.ml2=ms(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ms(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function _J(t){var e=t.x,i=t.y,n;if(this.sphere)n=this.a*(this.g-i);else{var r=ms(this.e0,this.e1,this.e2,this.e3,i);n=this.a*(this.g-r)}var s=this.ns*je(e-this.long0),a=this.x0+n*Math.sin(s),o=this.y0+this.rh-n*Math.cos(s);return t.x=a,t.y=o,t}function bJ(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,i,n,r;this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(i!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=je(this.long0+s/this.ns),n=$u(this.g-i/this.a),t.x=r,t.y=n,t;var a=this.g-i/this.a;return n=$v(a,this.e0,this.e1,this.e2,this.e3),r=je(this.long0+s/this.ns),t.x=r,t.y=n,t}var vJ=["Equidistant_Conic","eqdc"],TJ={init:mJ,forward:_J,inverse:bJ,names:vJ};function SJ(){this.R=this.a}function wJ(t){var e=t.x,i=t.y,n=je(e-this.long0),r,s;Math.abs(i)<=Le&&(r=this.x0+this.R*n,s=this.y0);var a=Fu(2*Math.abs(i/Math.PI));(Math.abs(n)<=Le||Math.abs(Math.abs(i)-Te)<=Le)&&(r=this.x0,i>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/n-n/Math.PI),l=o*o,c=Math.sin(a),h=Math.cos(a),A=h/(c+h-1),m=A*A,b=A*(2/c-1),S=b*b,M=Math.PI*this.R*(o*(A-S)+Math.sqrt(l*(A-S)*(A-S)-(S+l)*(m-S)))/(S+l);n<0&&(M=-M),r=this.x0+M;var I=l+A;return M=Math.PI*this.R*(b*I-o*Math.sqrt((S+l)*(l+1)-I*I))/(S+l),i>=0?s=this.y0+M:s=this.y0-M,t.x=r,t.y=s,t}function MJ(t){var e,i,n,r,s,a,o,l,c,h,A,m,b;return t.x-=this.x0,t.y-=this.y0,A=Math.PI*this.R,n=t.x/A,r=t.y/A,s=n*n+r*r,a=-Math.abs(r)*(1+s),o=a-2*r*r+n*n,l=-2*a+1+2*r*r+s*s,b=r*r/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,c=(a-o*o/3/l)/l,h=2*Math.sqrt(-c/3),A=3*b/c/h,Math.abs(A)>1&&(A>=0?A=1:A=-1),m=Math.acos(A)/3,t.y>=0?i=(-h*Math.cos(m+Math.PI/3)-o/3/l)*Math.PI:i=-(-h*Math.cos(m+Math.PI/3)-o/3/l)*Math.PI,Math.abs(n)<Le?e=this.long0:e=je(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-r*r)+s*s))/2/n),t.x=e,t.y=i,t}var IJ=["Van_der_Grinten_I","VanDerGrinten","vandg"],EJ={init:SJ,forward:wJ,inverse:MJ,names:IJ};function BJ(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function OJ(t){var e=t.x,i=t.y,n=Math.sin(t.y),r=Math.cos(t.y),s=je(e-this.long0),a,o,l,c,h,A,m,b,S,M,I,O,D,B,P,j,N,F,$,V,Z,nt,X;return this.sphere?Math.abs(this.sin_p12-1)<=Le?(t.x=this.x0+this.a*(Te-i)*Math.sin(s),t.y=this.y0-this.a*(Te-i)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=Le?(t.x=this.x0+this.a*(Te+i)*Math.sin(s),t.y=this.y0+this.a*(Te+i)*Math.cos(s),t):(F=this.sin_p12*n+this.cos_p12*r*Math.cos(s),j=Math.acos(F),N=j?j/Math.sin(j):1,t.x=this.x0+this.a*N*r*Math.sin(s),t.y=this.y0+this.a*N*(this.cos_p12*n-this.sin_p12*r*Math.cos(s)),t):(a=$_(this.es),o=W_(this.es),l=H_(this.es),c=q_(this.es),Math.abs(this.sin_p12-1)<=Le?(h=this.a*ms(a,o,l,c,Te),A=this.a*ms(a,o,l,c,i),t.x=this.x0+(h-A)*Math.sin(s),t.y=this.y0-(h-A)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=Le?(h=this.a*ms(a,o,l,c,Te),A=this.a*ms(a,o,l,c,i),t.x=this.x0+(h+A)*Math.sin(s),t.y=this.y0+(h+A)*Math.cos(s),t):(m=n/r,b=kA(this.a,this.e,this.sin_p12),S=kA(this.a,this.e,n),M=Math.atan((1-this.es)*m+this.es*b*this.sin_p12/(S*r)),I=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(M)-this.sin_p12*Math.cos(s)),I===0?$=Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.abs(Math.abs(I)-Math.PI)<=Le?$=-Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):$=Math.asin(Math.sin(s)*Math.cos(M)/Math.sin(I)),O=this.e*this.sin_p12/Math.sqrt(1-this.es),D=this.e*this.cos_p12*Math.cos(I)/Math.sqrt(1-this.es),B=O*D,P=D*D,V=$*$,Z=V*$,nt=Z*$,X=nt*$,j=b*$*(1-V*P*(1-P)/6+Z/8*B*(1-2*P)+nt/120*(P*(4-7*P)-3*O*O*(1-7*P))-X/48*B),t.x=this.x0+j*Math.sin(I),t.y=this.y0+j*Math.cos(I),t))}function RJ(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,s,a,o,l,c,h,A,m,b,S,M,I,O,D,B,P,j,N,F,$;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*Te*this.a?void 0:(i=e/this.a,n=Math.sin(i),r=Math.cos(i),s=this.long0,Math.abs(e)<=Le?a=this.lat0:(a=Fu(r*this.sin_p12+t.y*n*this.cos_p12/e),o=Math.abs(this.lat0)-Te,Math.abs(o)<=Le?this.lat0>=0?s=je(this.long0+Math.atan2(t.x,-t.y)):s=je(this.long0-Math.atan2(-t.x,t.y)):s=je(this.long0+Math.atan2(t.x*n,e*this.cos_p12*r-t.y*this.sin_p12*n))),t.x=s,t.y=a,t)):(l=$_(this.es),c=W_(this.es),h=H_(this.es),A=q_(this.es),Math.abs(this.sin_p12-1)<=Le?(m=this.a*ms(l,c,h,A,Te),e=Math.sqrt(t.x*t.x+t.y*t.y),b=m-e,a=$v(b/this.a,l,c,h,A),s=je(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=a,t):Math.abs(this.sin_p12+1)<=Le?(m=this.a*ms(l,c,h,A,Te),e=Math.sqrt(t.x*t.x+t.y*t.y),b=e-m,a=$v(b/this.a,l,c,h,A),s=je(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),I=Math.atan2(t.x,t.y),S=kA(this.a,this.e,this.sin_p12),O=Math.cos(I),D=this.e*this.cos_p12*O,B=-D*D/(1-this.es),P=3*this.es*(1-B)*this.sin_p12*this.cos_p12*O/(1-this.es),j=e/S,N=j-B*(1+B)*Math.pow(j,3)/6-P*(1+3*B)*Math.pow(j,4)/24,F=1-B*N*N/2-j*N*N*N/6,M=Math.asin(this.sin_p12*Math.cos(N)+this.cos_p12*Math.sin(N)*O),s=je(this.long0+Math.asin(Math.sin(I)*Math.sin(N)/Math.cos(M))),$=Math.sin(M),a=Math.atan2(($-this.es*F*this.sin_p12)*Math.tan(M),$*(1-this.es)),t.x=s,t.y=a,t))}var DJ=["Azimuthal_Equidistant","aeqd"],CJ={init:BJ,forward:OJ,inverse:RJ,names:DJ};function PJ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function xJ(t){var e,i,n,r,s,a,o,l,c=t.x,h=t.y;return n=je(c-this.long0),e=Math.sin(h),i=Math.cos(h),r=Math.cos(n),a=this.sin_p14*e+this.cos_p14*i*r,s=1,(a>0||Math.abs(a)<=Le)&&(o=this.a*s*i*Math.sin(n),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*i*r)),t.x=o,t.y=l,t}function NJ(t){var e,i,n,r,s,a,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=Fu(e/this.a),n=Math.sin(i),r=Math.cos(i),a=this.long0,Math.abs(e)<=Le?(o=this.lat0,t.x=a,t.y=o,t):(o=Fu(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-Te,Math.abs(s)<=Le?(this.lat0>=0?a=je(this.long0+Math.atan2(t.x,-t.y)):a=je(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=o,t):(a=je(this.long0+Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n)),t.x=a,t.y=o,t))}var FJ=["ortho"],LJ={init:PJ,forward:xJ,inverse:NJ,names:FJ},$n={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},hn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function UJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Te-un/2?this.face=$n.TOP:this.lat0<=-(Te-un/2)?this.face=$n.BOTTOM:Math.abs(this.long0)<=un?this.face=$n.FRONT:Math.abs(this.long0)<=Te+un?this.face=this.long0>0?$n.RIGHT:$n.LEFT:this.face=$n.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function kJ(t){var e={x:0,y:0},i,n,r,s,a,o,l={value:0};if(t.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):i=t.y,n=t.x,this.face===$n.TOP)s=Te-i,n>=un&&n<=Te+un?(l.value=hn.AREA_0,r=n-Te):n>Te+un||n<=-(Te+un)?(l.value=hn.AREA_1,r=n>0?n-Hr:n+Hr):n>-(Te+un)&&n<=-un?(l.value=hn.AREA_2,r=n+Te):(l.value=hn.AREA_3,r=n);else if(this.face===$n.BOTTOM)s=Te+i,n>=un&&n<=Te+un?(l.value=hn.AREA_0,r=-n+Te):n<un&&n>=-un?(l.value=hn.AREA_1,r=-n):n<-un&&n>=-(Te+un)?(l.value=hn.AREA_2,r=-n-Te):(l.value=hn.AREA_3,r=n>0?-n+Hr:-n-Hr);else{var c,h,A,m,b,S,M;this.face===$n.RIGHT?n=wA(n,+Te):this.face===$n.BACK?n=wA(n,3.14159265359):this.face===$n.LEFT&&(n=wA(n,-Te)),m=Math.sin(i),b=Math.cos(i),S=Math.sin(n),M=Math.cos(n),c=b*M,h=b*S,A=m,this.face===$n.FRONT?(s=Math.acos(c),r=xb(s,A,h,l)):this.face===$n.RIGHT?(s=Math.acos(h),r=xb(s,A,-c,l)):this.face===$n.BACK?(s=Math.acos(-c),r=xb(s,A,-h,l)):this.face===$n.LEFT?(s=Math.acos(-h),r=xb(s,A,c,l)):(s=r=0,l.value=hn.AREA_0)}return o=Math.atan(12/Hr*(r+Math.acos(Math.sin(r)*Math.cos(un))-Te)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===hn.AREA_1?o+=Te:l.value===hn.AREA_2?o+=Hr:l.value===hn.AREA_3&&(o+=1.5*Hr),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function jJ(t){var e={lam:0,phi:0},i,n,r,s,a,o,l,c,h,A={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?A.value=hn.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(A.value=hn.AREA_1,i-=Te):t.x<0&&-t.x>=Math.abs(t.y)?(A.value=hn.AREA_2,i=i<0?i+Hr:i-Hr):(A.value=hn.AREA_3,i+=Te),h=Hr/12*Math.tan(i),a=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),o=Math.atan(a),r=Math.cos(i),s=Math.tan(n),l=1-r*r*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===$n.TOP)c=Math.acos(l),e.phi=Te-c,A.value===hn.AREA_0?e.lam=o+Te:A.value===hn.AREA_1?e.lam=o<0?o+Hr:o-Hr:A.value===hn.AREA_2?e.lam=o-Te:e.lam=o;else if(this.face===$n.BOTTOM)c=Math.acos(l),e.phi=c-Te,A.value===hn.AREA_0?e.lam=-o+Te:A.value===hn.AREA_1?e.lam=-o:A.value===hn.AREA_2?e.lam=-o-Te:e.lam=o<0?-o-Hr:-o+Hr;else{var m,b,S;m=l,h=m*m,h>=1?S=0:S=Math.sqrt(1-h)*Math.sin(o),h+=S*S,h>=1?b=0:b=Math.sqrt(1-h),A.value===hn.AREA_1?(h=b,b=-S,S=h):A.value===hn.AREA_2?(b=-b,S=-S):A.value===hn.AREA_3&&(h=b,b=S,S=-h),this.face===$n.RIGHT?(h=m,m=-b,b=h):this.face===$n.BACK?(m=-m,b=-b):this.face===$n.LEFT&&(h=m,m=b,b=-h),e.phi=Math.acos(-S)-Te,e.lam=Math.atan2(b,m),this.face===$n.RIGHT?e.lam=wA(e.lam,-Te):this.face===$n.BACK?e.lam=wA(e.lam,-3.14159265359):this.face===$n.LEFT&&(e.lam=wA(e.lam,+Te))}if(this.es!==0){var M,I,O;M=e.phi<0?1:0,I=Math.tan(e.phi),O=this.b/Math.sqrt(I*I+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-O*O)/(this.one_minus_f*O)),M&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function xb(t,e,i,n){var r;return t<Le?(n.value=hn.AREA_0,r=0):(r=Math.atan2(e,i),Math.abs(r)<=un?n.value=hn.AREA_0:r>un&&r<=Te+un?(n.value=hn.AREA_1,r-=Te):r>Te+un||r<=-(Te+un)?(n.value=hn.AREA_2,r=r>=0?r-Hr:r+Hr):(n.value=hn.AREA_3,r+=Te)),r}function wA(t,e){var i=t+e;return i<-3.14159265359?i+=d_:i>3.14159265359&&(i-=d_),i}var zJ=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],VJ={init:UJ,forward:kJ,inverse:jJ,names:zJ},DM=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Nm=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],t7=.8487,e7=1.3523,i7=rl/5,$J=1/i7,sA=18,Wv=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},WJ=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function HJ(t,e,i,n){for(var r=e;n;--n){var s=t(r);if(r-=s,Math.abs(s)<i)break}return r}function qJ(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function YJ(t){var e=je(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*i7);n<0?n=0:n>=sA&&(n=sA-1),i=rl*(i-$J*n);var r={x:Wv(DM[n],i)*e,y:Wv(Nm[n],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*t7+this.x0,r.y=r.y*this.a*e7+this.y0,r}function GJ(t){var e={x:(t.x-this.x0)/(this.a*t7),y:Math.abs(t.y-this.y0)/(this.a*e7)};if(e.y>=1)e.x/=DM[sA][0],e.y=t.y<0?-Te:Te;else{var i=Math.floor(e.y*sA);for(i<0?i=0:i>=sA&&(i=sA-1);;)if(Nm[i][0]>e.y)--i;else if(Nm[i+1][0]<=e.y)++i;else break;var n=Nm[i],r=5*(e.y-n[0])/(Nm[i+1][0]-n[0]);r=HJ(function(s){return(Wv(n,s)-e.y)/WJ(n,s)},r,Le,100),e.x/=Wv(DM[i],r),e.y=(5*i+r)*$r,t.y<0&&(e.y=-e.y)}return e.x=je(e.x+this.long0),e}var XJ=["Robinson","robin"],QJ={init:qJ,forward:YJ,inverse:GJ,names:XJ};function KJ(){this.name="geocent"}function ZJ(t){var e=$5(t,this.es,this.a);return e}function JJ(t){var e=W5(t,this.es,this.a,this.b);return e}var ttt=["Geocentric","geocentric","geocent","Geocent"],ett={init:KJ,forward:ZJ,inverse:JJ,names:ttt},rs={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Dg={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function itt(){if(Object.keys(Dg).forEach((function(i){if(typeof this[i]>"u")this[i]=Dg[i].def;else{if(Dg[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);Dg[i].num&&(this[i]=parseFloat(this[i]))}Dg[i].degrees&&(this[i]=this[i]*$r)}).bind(this)),Math.abs(Math.abs(this.lat0)-Te)<Le?this.mode=this.lat0<0?rs.S_POLE:rs.N_POLE:Math.abs(this.lat0)<Le?this.mode=rs.EQUIT:(this.mode=rs.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function ntt(t){t.x-=this.long0;var e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r,s;switch(this.mode){case rs.OBLIQ:s=this.sinph0*e+this.cosph0*i*n;break;case rs.EQUIT:s=i*n;break;case rs.S_POLE:s=-e;break;case rs.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),r=s*i*Math.sin(t.x),this.mode){case rs.OBLIQ:s*=this.cosph0*e-this.sinph0*i*n;break;case rs.EQUIT:s*=e;break;case rs.N_POLE:s*=-(i*n);break;case rs.S_POLE:s*=i*n;break}var a,o;return a=s*this.cg+r*this.sg,o=1/(a*this.sw*this.h1+this.cw),r=(r*this.cg-s*this.sg)*this.cw*o,s=a*o,t.x=r*this.a,t.y=s*this.a,t}function rtt(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},i,n,r;r=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=i*this.cg+n*this.sg,t.y=n*this.cg-i*this.sg;var s=Ls(t.x,t.y);if(Math.abs(s)<Le)e.x=0,e.y=t.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case rs.OBLIQ:e.y=Math.asin(a*this.sinph0+t.y*o*this.cosph0/s),t.y=(a-this.sinph0*Math.sin(e.y))*s,t.x*=o*this.cosph0;break;case rs.EQUIT:e.y=Math.asin(t.y*o/s),t.y=a*s,t.x*=o;break;case rs.N_POLE:e.y=Math.asin(a),t.y=-t.y;break;case rs.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var stt=["Tilted_Perspective","tpers"],att={init:itt,forward:ntt,inverse:rtt,names:stt};function ott(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function ltt(t){var e=t.x,i=t.y,n,r,s,a;if(e=e-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var o=this.radius_p/Ls(this.radius_p*Math.cos(i),Math.sin(i));if(r=o*Math.cos(e)*Math.cos(i),s=o*Math.sin(e)*Math.cos(i),a=o*Math.sin(i),(this.radius_g-r)*r-s*s-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/Ls(a,n)),t.y=this.radius_g_1*Math.atan(a/n)):(t.x=this.radius_g_1*Math.atan(s/n),t.y=this.radius_g_1*Math.atan(a/Ls(s,n)))}else this.shape==="sphere"&&(n=Math.cos(i),r=Math.cos(e)*n,s=Math.sin(e)*n,a=Math.sin(i),n=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/Ls(a,n)),t.y=this.radius_g_1*Math.atan(a/n)):(t.x=this.radius_g_1*Math.atan(s/n),t.y=this.radius_g_1*Math.atan(a/Ls(s,n))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function ctt(t){var e=-1,i=0,n=0,r,s,a,o;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Ls(1,n)):(i=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*Ls(1,i));var l=n/this.radius_p;if(r=i*i+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*r*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-s-Math.sqrt(a))/(2*r),e=this.radius_g+o*e,i*=o,n*=o,t.x=Math.atan2(i,e),t.y=Math.atan(n*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+n*n)):(i=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+i*i)),r=i*i+n*n+e*e,s=2*this.radius_g*e,a=s*s-4*r*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-s-Math.sqrt(a))/(2*r),e=this.radius_g+o*e,i*=o,n*=o,t.x=Math.atan2(i,e),t.y=Math.atan(n*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var utt=["Geostationary Satellite View","Geostationary_Satellite","geos"],htt={init:ott,forward:ltt,inverse:ctt,names:utt},Ym=1.340264,Gm=-.081106,Xm=893e-6,Qm=.003796,Hv=Math.sqrt(3)/2;function ftt(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function dtt(t){var e=je(t.x-this.long0),i=t.y,n=Math.asin(Hv*Math.sin(i)),r=n*n,s=r*r*r;return t.x=e*Math.cos(n)/(Hv*(Ym+3*Gm*r+s*(7*Xm+9*Qm*r))),t.y=n*(Ym+Gm*r+s*(Xm+Qm*r)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Att(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,i=12,n=t.y,r,s,a,o,l,c;for(c=0;c<i&&(r=n*n,s=r*r*r,a=n*(Ym+Gm*r+s*(Xm+Qm*r))-t.y,o=Ym+3*Gm*r+s*(7*Xm+9*Qm*r),n-=l=a/o,!(Math.abs(l)<e));++c);return r=n*n,s=r*r*r,t.x=Hv*t.x*(Ym+3*Gm*r+s*(7*Xm+9*Qm*r))/Math.cos(n),t.y=Math.asin(Math.sin(n)/Hv),t.x=je(t.x+this.long0),t}var gtt=["eqearth","Equal Earth","Equal_Earth"],ytt={init:ftt,forward:dtt,inverse:Att,names:gtt},y_=1e-10;function ptt(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<y_)throw new Error;this.es?(this.en=bE(this.es),this.m1=c0(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=_tt,this.forward=mtt):(Math.abs(this.phi1)+y_>=Te?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=vtt,this.forward=btt)}function mtt(t){var e=je(t.x-(this.long0||0)),i=t.y,n,r,s;return n=this.am1+this.m1-c0(i,r=Math.sin(i),s=Math.cos(i),this.en),r=s*e/(n*Math.sqrt(1-this.es*r*r)),t.x=n*Math.sin(r),t.y=this.am1-n*Math.cos(r),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function _tt(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,i,n,r;if(i=Ls(t.x,t.y=this.am1-t.y),r=vE(this.am1+this.m1-i,this.es,this.en),(e=Math.abs(r))<Te)e=Math.sin(r),n=i*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(r);else if(Math.abs(e-Te)<=y_)n=0;else throw new Error;return t.x=je(n+(this.long0||0)),t.y=$u(r),t}function btt(t){var e=je(t.x-(this.long0||0)),i=t.y,n,r;return r=this.cphi1+this.phi1-i,Math.abs(r)>y_?(t.x=r*Math.sin(n=e*Math.cos(i)/r),t.y=this.cphi1-r*Math.cos(n)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function vtt(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,i,n=Ls(t.x,t.y=this.cphi1-t.y);if(i=this.cphi1+this.phi1-n,Math.abs(i)>Te)throw new Error;return Math.abs(Math.abs(i)-Te)<=y_?e=0:e=n*Math.atan2(t.x,t.y)/Math.cos(i),t.x=je(e+(this.long0||0)),t.y=$u(i),t}var Ttt=["bonne","Bonne (Werner lat_1=90)"],Stt={init:ptt,names:Ttt};function wtt(t){t.Proj.projections.add(Av),t.Proj.projections.add(gv),t.Proj.projections.add(_K),t.Proj.projections.add(BK),t.Proj.projections.add(xK),t.Proj.projections.add(kK),t.Proj.projections.add(HK),t.Proj.projections.add(QK),t.Proj.projections.add(eZ),t.Proj.projections.add(aZ),t.Proj.projections.add(SZ),t.Proj.projections.add(OZ),t.Proj.projections.add(xZ),t.Proj.projections.add(jZ),t.Proj.projections.add(HZ),t.Proj.projections.add(QZ),t.Proj.projections.add(eJ),t.Proj.projections.add(aJ),t.Proj.projections.add(fJ),t.Proj.projections.add(pJ),t.Proj.projections.add(TJ),t.Proj.projections.add(EJ),t.Proj.projections.add(CJ),t.Proj.projections.add(LJ),t.Proj.projections.add(VJ),t.Proj.projections.add(QJ),t.Proj.projections.add(ett),t.Proj.projections.add(att),t.Proj.projections.add(htt),t.Proj.projections.add(ytt),t.Proj.projections.add(Stt)}qa.defaultDatum="WGS84";qa.Proj=cl;qa.WGS84=new qa.Proj("WGS84");qa.Point=UA;qa.toPoint=H5;qa.defs=gs;qa.nadgrid=vQ;qa.transform=Vv;qa.mgrs=LQ;qa.version="__VERSION__";wtt(qa);var lC;(function(t){t.POINT="geoarrow.point",t.LINESTRING="geoarrow.linestring",t.POLYGON="geoarrow.polygon",t.MULTIPOINT="geoarrow.multipoint",t.MULTILINESTRING="geoarrow.multilinestring",t.MULTIPOLYGON="geoarrow.multipolygon"})(lC||(lC={}));var cC;(function(t){t[t.CLOCKWISE=$4.CLOCKWISE]="CLOCKWISE",t[t.COUNTER_CLOCKWISE=$4.COUNTER_CLOCKWISE]="COUNTER_CLOCKWISE"})(cC||(cC={}));const Mtt="4.3.2";function uC(t,e,i){switch(t.type){case"Point":return Ett(t,e,i);case"LineString":return Itt(t,e,i);case"Polygon":return n7(t,e,i);default:const n=t;throw new Error(`Unsupported geometry type: ${n==null?void 0:n.type}`)}}function n7(t,e=-1/0,i=1/0){const{positions:n}=t,r=t.polygonIndices.value.filter(l=>l>=e&&l<=i),s=t.primitivePolygonIndices.value.filter(l=>l>=e&&l<=i);if(!(r.length>2)){const l=[];for(let c=0;c<s.length-1;c++){const h=s[c],A=s[c+1],m=qv(n,h,A);l.push(m)}return{type:"Polygon",coordinates:l}}const o=[];for(let l=0;l<r.length-1;l++){const c=r[l],h=r[l+1],A=n7(t,c,h).coordinates;o.push(A)}return{type:"MultiPolygon",coordinates:o}}function Itt(t,e=-1/0,i=1/0){const{positions:n}=t,r=t.pathIndices.value.filter(o=>o>=e&&o<=i);if(!(r.length>2))return{type:"LineString",coordinates:qv(n,r[0],r[1])};const a=[];for(let o=0;o<r.length-1;o++){const l=qv(n,r[o],r[o+1]);a.push(l)}return{type:"MultiLineString",coordinates:a}}function Ett(t,e,i){const{positions:n}=t,r=qv(n,e,i);return r.length>1?{type:"MultiPoint",coordinates:r}:{type:"Point",coordinates:r[0]}}function qv(t,e,i){e=e||0,i=i||t.value.length/t.size;const n=[];for(let r=e;r<i;r++){const s=Array();for(let a=r*t.size;a<(r+1)*t.size;a++)s.push(Number(t.value[a]));n.push(s)}return n}const Btt=2147483648,Ott=1073741824,r7=536870912,Rtt=1e4;var pu;(function(t){t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection"})(pu||(pu={}));function Dtt(t){const e=new DataView(t);let i=0;const n=e.getUint8(i);if(i+=1,n>1)return!1;const r=n===1,s=e.getUint32(i,r);i+=4;const a=s&7;if(a===0||a>7)return!1;const o=s-a;if(o===0||o===1e3||o===2e3||o===3e3)return!0;if((o&536870911)!==0)return!1;if(o&r7){const l=e.getUint32(i,r);if(i+=4,l>Rtt)return!1}return!0}function Ctt(t,e){const i=Object.assign({},{type:"wkb",geometryType:1,dimensions:2,coordinates:"xy",littleEndian:!0,byteOffset:0});i.littleEndian=t.getUint8(i.byteOffset)===1,i.byteOffset++;const n=t.getUint32(i.byteOffset,i.littleEndian);i.byteOffset+=4,i.geometryType=n&7;const r=(n-i.geometryType)/1e3;switch(r){case 0:break;case 1:i.type="iso-wkb",i.dimensions=3,i.coordinates="xyz";break;case 2:i.type="iso-wkb",i.dimensions=3,i.coordinates="xym";break;case 3:i.type="iso-wkb",i.dimensions=4,i.coordinates="xyzm";break;default:throw new Error(`WKB: Unsupported iso-wkb type: ${r}`)}const s=n&Btt,a=n&Ott,o=n&r7;return s&&a?(i.type="ewkb",i.dimensions=4,i.coordinates="xyzm"):s?(i.type="ewkb",i.dimensions=3,i.coordinates="xyz"):a&&(i.type="ewkb",i.dimensions=3,i.coordinates="xym"),o&&(i.type="ewkb",i.srid=t.getUint32(i.byteOffset,i.littleEndian),i.byteOffset+=4),i}function hC(t,e){var r;const i=Ptt(t),n=((r=e==null?void 0:e.wkb)==null?void 0:r.shape)||"binary-geometry";switch(n){case"binary-geometry":return i;case"geojson-geometry":return uC(i);case"geometry":return console.error('WKBLoader: "geometry" shape is deprecated, use "binary-geometry" instead'),uC(i);default:throw new Error(n)}}function Ptt(t,e){const i=new DataView(t),n=Ctt(i),{geometryType:r,dimensions:s,littleEndian:a}=n,o=n.byteOffset;switch(r){case pu.Point:return s7(i,o,s,a).geometry;case pu.LineString:return ME(i,o,s,a).geometry;case pu.Polygon:return a7(i,o,s,a).geometry;case pu.MultiPoint:const A=xtt(i,o,s,a);return A.type="Point",A;case pu.MultiLineString:const m=Ntt(i,o,s,a);return m.type="LineString",m;case pu.MultiPolygon:const b=Ftt(i,o,s,a);return b.type="Polygon",b;default:throw new Error(`WKB: Unsupported geometry type: ${r}`)}}function s7(t,e,i,n){const r=new Float64Array(i);for(let s=0;s<i;s++)r[s]=t.getFloat64(e,n),e+=8;return{geometry:{type:"Point",positions:{value:r,size:i}},offset:e}}function ME(t,e,i,n){const r=t.getUint32(e,n);e+=4;const s=new Float64Array(r*i);for(let o=0;o<r*i;o++)s[o]=t.getFloat64(e,n),e+=8;const a=[0];return r>0&&a.push(r),{geometry:{type:"LineString",positions:{value:s,size:i},pathIndices:{value:new Uint32Array(a),size:1}},offset:e}}const IE=t=>e=>t+=e;function a7(t,e,i,n){const r=t.getUint32(e,n);e+=4;const s=[];for(let c=0;c<r;c++){const h=ME(t,e,i,n),{positions:A}=h.geometry;e=h.offset,s.push(A.value)}const a=new Float64Array(aT(s).buffer),o=[0];a.length>0&&o.push(a.length/i);const l=s.map(c=>c.length/i).map(IE(0));return l.unshift(0),{geometry:{type:"Polygon",positions:{value:a,size:i},polygonIndices:{value:new Uint32Array(o),size:1},primitivePolygonIndices:{value:new Uint32Array(l),size:1}},offset:e}}function xtt(t,e,i,n){const r=t.getUint32(e,n);e+=4;const s=[];for(let a=0;a<r;a++){const o=t.getUint8(e)===1;if(e++,t.getUint32(e,o)%1e3!==1)throw new Error("WKB: Inner geometries of MultiPoint not of type Point");e+=4;const l=s7(t,e,i,o);e=l.offset,s.push(l.geometry)}return Ltt(s,i)}function Ntt(t,e,i,n){const r=t.getUint32(e,n);e+=4;const s=[];for(let a=0;a<r;a++){const o=t.getUint8(e)===1;if(e++,t.getUint32(e,o)%1e3!==2)throw new Error("WKB: Inner geometries of MultiLineString not of type LineString");e+=4;const l=ME(t,e,i,o);e=l.offset,s.push(l.geometry)}return Utt(s,i)}function Ftt(t,e,i,n){const r=t.getUint32(e,n);e+=4;const s=[];for(let a=0;a<r;a++){const o=t.getUint8(e)===1;if(e++,t.getUint32(e,o)%1e3!==3)throw new Error("WKB: Inner geometries of MultiPolygon not of type Polygon");e+=4;const l=a7(t,e,i,o);e=l.offset,s.push(l.geometry)}return ktt(s,i)}function Ltt(t,e){const i=t.map(r=>r.positions.value);return{type:"Point",positions:{value:new Float64Array(aT(i).buffer),size:e}}}function Utt(t,e){const i=t.map(s=>s.positions.value),n=new Float64Array(aT(i).buffer),r=i.map(s=>s.length/e).map(IE(0));return r.unshift(0),{type:"LineString",positions:{value:n,size:e},pathIndices:{value:new Uint32Array(r),size:1}}}function ktt(t,e){const i=[],n=[];for(const o of t){const{positions:l,primitivePolygonIndices:c}=o;i.push(l.value),n.push(c.value)}const r=new Float64Array(aT(i).buffer),s=i.map(o=>o.length/e).map(IE(0));s.unshift(0);const a=[0];for(const o of n)a.push(...o.filter(l=>l>0).map(l=>l+a[a.length-1]));return{type:"Polygon",positions:{value:r,size:e},polygonIndices:{value:new Uint32Array(s),size:1},primitivePolygonIndices:{value:new Uint32Array(a),size:1}}}function aT(t){let e=0;for(let r=0;r<t.length;++r)e+=t[r].byteLength;const i=new Uint8Array(e);let n=0;for(let r=0;r<t.length;++r){const s=new Uint8Array(t[r].buffer);e=s.length;for(let a=0;a<e;++a)i[n++]=s[a]}return i}const jtt={dataType:null,batchType:null,name:"WKB",id:"wkb",module:"wkt",version:Mtt,worker:!0,category:"geometry",extensions:["wkb"],mimeTypes:[],tests:[Dtt],options:{wkb:{shape:"binary-geometry"}}},ztt={...jtt,parse:async t=>hC(t),parseSync:hC};var MA;(function(t){t[t.Point=0]="Point",t[t.LineString=1]="LineString",t[t.Polygon=2]="Polygon",t[t.MultiPoint=3]="MultiPoint",t[t.MultiLineString=4]="MultiLineString",t[t.MultiPolygon=5]="MultiPolygon"})(MA||(MA={}));function Vtt(t,e,i){const n=[];for(const r of $tt(t)){if(r===null)throw new Error("Null entries are not currently supported");const s=Wtt(r),a=ztt.parseSync(s,{wkb:{shape:"binary-geometry"}});n.push(a)}switch(e){case MA.Point:return Htt(n,i);case MA.LineString:return qtt(n,i);case MA.Polygon:return Gtt(n,i);default:x5("Not yet implemented for this geometry type")}}function*$tt(t){const e=t.values,i=t.valueOffsets;for(let n=0;n<t.length;n++)if(!t.getValid(n))yield null;else{const r=i[n],s=i[n+1];yield e.subarray(r,s)}}function Wtt(t){const e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(t),e}function Htt(t,e){const i=t.length,n=new Float64Array(i*e);let r=0;for(const a of t)rT(a.positions.value instanceof Float64Array),n.set(a.positions.value,r*e),r+=1;const s=Ri({type:new Af,data:n});return Ri({type:new LA(e,new bs(EE(e),new Af,!1)),child:s})}function qtt(t,e){const i=Ytt(t),n=new Float64Array(i.coordCapacty*e),r=new Int32Array(i.geomCapacity+1);let s=0,a=0;for(const c of t){rT(c.positions.value instanceof Float64Array);const h=c.positions.value.length/c.positions.size;n.set(c.positions.value,a*e),s+=1,a+=h,r[s]=a}const o=Ri({type:new Af,data:n}),l=Ri({type:new LA(e,new bs(EE(e),o.type,!1)),child:o});return Ri({type:new Pu(new bs("vertices",l.type,!1)),valueOffsets:r,child:l})}function Ytt(t){let e={coordCapacty:0,geomCapacity:0};for(const i of t)e.geomCapacity+=1,e.coordCapacty+=i.positions.value.length/i.positions.size;return e}function Gtt(t,e){const i=Xtt(t),n=new Float64Array(i.coordCapacty*e),r=new Int32Array(i.ringCapacity+1),s=new Int32Array(i.geomCapacity+1);let a=0,o=0,l=0;for(const m of t){rT(m.positions.value instanceof Float64Array);const b=m.positions.value.length/m.positions.size;n.set(m.positions.value,o*e),o+=b;for(let S=0;S<m.primitivePolygonIndices.value.length-1;S++)r[l+1]=r[l]+(m.primitivePolygonIndices.value[S+1]-m.primitivePolygonIndices.value[S]),l+=1;s[a+1]=l,a+=1}const c=Ri({type:new Af,data:n}),h=Ri({type:new LA(e,new bs(EE(e),c.type,!1)),child:c}),A=Ri({type:new Pu(new bs("vertices",h.type,!1)),valueOffsets:r,child:h});return Ri({type:new Pu(new bs("rings",A.type,!1)),valueOffsets:s,child:A})}function Xtt(t){let e={coordCapacty:0,ringCapacity:0,geomCapacity:0};for(const i of t)e.geomCapacity+=1,rT(i.primitivePolygonIndices.value.length>=1,"Expected primitivePolygonIndices to always have length at least 1"),e.ringCapacity+=i.primitivePolygonIndices.value.length-1,e.coordCapacty+=i.positions.value.length/i.positions.size;return e}function EE(t){if(t===2)return"xy";if(t===3)return"xyz";x5("expected dimension of 2 or 3")}var fC=Object.freeze({__proto__:null,get WKBType(){return MA},parseWkb:Vtt}),jw={},Nb={};const Bn=tT(YY);var xe={},mh={},dC;function Rf(){if(dC)return mh;dC=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.encodeUtf8=mh.decodeUtf8=void 0;const t=new TextDecoder("utf-8"),e=r=>t.decode(r);mh.decodeUtf8=e;const i=new TextEncoder,n=r=>i.encode(r);return mh.encodeUtf8=n,mh}var zw={},AC;function Df(){return AC||(AC=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFlatbuffersByteBuffer=t.isReadableNodeStream=t.isWritableNodeStream=t.isReadableDOMStream=t.isWritableDOMStream=t.isFetchResponse=t.isFSReadStream=t.isFileHandle=t.isUnderlyingSink=t.isIteratorResult=t.isArrayLike=t.isArrowJSON=t.isAsyncIterable=t.isIterable=t.isObservable=t.isPromise=t.isObject=void 0;const e=N=>typeof N=="number",i=N=>typeof N=="boolean",n=N=>typeof N=="function",r=N=>N!=null&&Object(N)===N;t.isObject=r;const s=N=>(0,t.isObject)(N)&&n(N.then);t.isPromise=s;const a=N=>(0,t.isObject)(N)&&n(N.subscribe);t.isObservable=a;const o=N=>(0,t.isObject)(N)&&n(N[Symbol.iterator]);t.isIterable=o;const l=N=>(0,t.isObject)(N)&&n(N[Symbol.asyncIterator]);t.isAsyncIterable=l;const c=N=>(0,t.isObject)(N)&&(0,t.isObject)(N.schema);t.isArrowJSON=c;const h=N=>(0,t.isObject)(N)&&e(N.length);t.isArrayLike=h;const A=N=>(0,t.isObject)(N)&&"done"in N&&"value"in N;t.isIteratorResult=A;const m=N=>(0,t.isObject)(N)&&n(N.abort)&&n(N.close)&&n(N.start)&&n(N.write);t.isUnderlyingSink=m;const b=N=>(0,t.isObject)(N)&&n(N.stat)&&e(N.fd);t.isFileHandle=b;const S=N=>(0,t.isReadableNodeStream)(N)&&e(N.bytesRead);t.isFSReadStream=S;const M=N=>(0,t.isObject)(N)&&(0,t.isReadableDOMStream)(N.body);t.isFetchResponse=M;const I=N=>"_getDOMStream"in N&&"_getNodeStream"in N,O=N=>(0,t.isObject)(N)&&n(N.abort)&&n(N.getWriter)&&!I(N);t.isWritableDOMStream=O;const D=N=>(0,t.isObject)(N)&&n(N.cancel)&&n(N.getReader)&&!I(N);t.isReadableDOMStream=D;const B=N=>(0,t.isObject)(N)&&n(N.end)&&n(N.write)&&i(N.writable)&&!I(N);t.isWritableNodeStream=B;const P=N=>(0,t.isObject)(N)&&n(N.read)&&n(N.pipe)&&i(N.readable)&&!I(N);t.isReadableNodeStream=P;const j=N=>(0,t.isObject)(N)&&n(N.clear)&&n(N.bytes)&&n(N.position)&&n(N.setPosition)&&n(N.capacity)&&n(N.getBufferIdentifier)&&n(N.createLong);t.isFlatbuffersByteBuffer=j}(zw)),zw}var gC;function Gr(){if(gC)return xe;gC=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.compareArrayLike=xe.rebaseValueOffsets=xe.toUint8ClampedArrayAsyncIterator=xe.toFloat64ArrayAsyncIterator=xe.toFloat32ArrayAsyncIterator=xe.toUint32ArrayAsyncIterator=xe.toUint16ArrayAsyncIterator=xe.toUint8ArrayAsyncIterator=xe.toInt32ArrayAsyncIterator=xe.toInt16ArrayAsyncIterator=xe.toInt8ArrayAsyncIterator=xe.toArrayBufferViewAsyncIterator=xe.toUint8ClampedArrayIterator=xe.toFloat64ArrayIterator=xe.toFloat32ArrayIterator=xe.toUint32ArrayIterator=xe.toUint16ArrayIterator=xe.toUint8ArrayIterator=xe.toInt32ArrayIterator=xe.toInt16ArrayIterator=xe.toInt8ArrayIterator=xe.toArrayBufferViewIterator=xe.toUint8ClampedArray=xe.toFloat64Array=xe.toFloat32Array=xe.toBigUint64Array=xe.toUint32Array=xe.toUint16Array=xe.toUint8Array=xe.toBigInt64Array=xe.toInt32Array=xe.toInt16Array=xe.toInt8Array=xe.toArrayBufferView=xe.joinUint8Arrays=xe.memcpy=void 0;const t=Bn,e=Rf(),i=Df(),n=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function r(ft){const Ht=ft[0]?[ft[0]]:[];let Nt,he,me,Me;for(let pe,Oe,Ye=0,Ee=0,qe=ft.length;++Ye<qe;){if(pe=Ht[Ee],Oe=ft[Ye],!pe||!Oe||pe.buffer!==Oe.buffer||Oe.byteOffset<pe.byteOffset){Oe&&(Ht[++Ee]=Oe);continue}if({byteOffset:Nt,byteLength:me}=pe,{byteOffset:he,byteLength:Me}=Oe,Nt+me<he||he+Me<Nt){Oe&&(Ht[++Ee]=Oe);continue}Ht[Ee]=new Uint8Array(pe.buffer,Nt,he-Nt+Me)}return Ht}function s(ft,Ht,Nt=0,he=Ht.byteLength){const me=ft.byteLength,Me=new Uint8Array(ft.buffer,ft.byteOffset,me),pe=new Uint8Array(Ht.buffer,Ht.byteOffset,Math.min(he,me));return Me.set(pe,Nt),ft}xe.memcpy=s;function a(ft,Ht){const Nt=r(ft),he=Nt.reduce((qe,dt)=>qe+dt.byteLength,0);let me,Me,pe,Oe=0,Ye=-1;const Ee=Math.min(Ht||Number.POSITIVE_INFINITY,he);for(const qe=Nt.length;++Ye<qe;){if(me=Nt[Ye],Me=me.subarray(0,Math.min(me.length,Ee-Oe)),Ee<=Oe+Me.length){Me.length<me.length?Nt[Ye]=me.subarray(Me.length):Me.length===me.length&&Ye++,pe?s(pe,Me,Oe):pe=Me;break}s(pe||(pe=new Uint8Array(Ee)),Me,Oe),Oe+=Me.length}return[pe||new Uint8Array(0),Nt.slice(Ye),he-(pe?pe.byteLength:0)]}xe.joinUint8Arrays=a;function o(ft,Ht){let Nt=(0,i.isIteratorResult)(Ht)?Ht.value:Ht;return Nt instanceof ft?ft===Uint8Array?new ft(Nt.buffer,Nt.byteOffset,Nt.byteLength):Nt:Nt?(typeof Nt=="string"&&(Nt=(0,e.encodeUtf8)(Nt)),Nt instanceof ArrayBuffer?new ft(Nt):Nt instanceof n?new ft(Nt):(0,i.isFlatbuffersByteBuffer)(Nt)?o(ft,Nt.bytes()):ArrayBuffer.isView(Nt)?Nt.byteLength<=0?new ft(0):new ft(Nt.buffer,Nt.byteOffset,Nt.byteLength/ft.BYTES_PER_ELEMENT):ft.from(Nt)):new ft(0)}xe.toArrayBufferView=o;const l=ft=>o(Int8Array,ft);xe.toInt8Array=l;const c=ft=>o(Int16Array,ft);xe.toInt16Array=c;const h=ft=>o(Int32Array,ft);xe.toInt32Array=h;const A=ft=>o(BigInt64Array,ft);xe.toBigInt64Array=A;const m=ft=>o(Uint8Array,ft);xe.toUint8Array=m;const b=ft=>o(Uint16Array,ft);xe.toUint16Array=b;const S=ft=>o(Uint32Array,ft);xe.toUint32Array=S;const M=ft=>o(BigUint64Array,ft);xe.toBigUint64Array=M;const I=ft=>o(Float32Array,ft);xe.toFloat32Array=I;const O=ft=>o(Float64Array,ft);xe.toFloat64Array=O;const D=ft=>o(Uint8ClampedArray,ft);xe.toUint8ClampedArray=D;const B=ft=>(ft.next(),ft);function*P(ft,Ht){const Nt=function*(me){yield me},he=typeof Ht=="string"||ArrayBuffer.isView(Ht)||Ht instanceof ArrayBuffer||Ht instanceof n?Nt(Ht):(0,i.isIterable)(Ht)?Ht:Nt(Ht);return yield*B(function*(me){let Me=null;do Me=me.next(yield o(ft,Me));while(!Me.done)}(he[Symbol.iterator]())),new ft}xe.toArrayBufferViewIterator=P;const j=ft=>P(Int8Array,ft);xe.toInt8ArrayIterator=j;const N=ft=>P(Int16Array,ft);xe.toInt16ArrayIterator=N;const F=ft=>P(Int32Array,ft);xe.toInt32ArrayIterator=F;const $=ft=>P(Uint8Array,ft);xe.toUint8ArrayIterator=$;const V=ft=>P(Uint16Array,ft);xe.toUint16ArrayIterator=V;const Z=ft=>P(Uint32Array,ft);xe.toUint32ArrayIterator=Z;const nt=ft=>P(Float32Array,ft);xe.toFloat32ArrayIterator=nt;const X=ft=>P(Float64Array,ft);xe.toFloat64ArrayIterator=X;const bt=ft=>P(Uint8ClampedArray,ft);xe.toUint8ClampedArrayIterator=bt;function Tt(ft,Ht){return t.__asyncGenerator(this,arguments,function*(){if((0,i.isPromise)(Ht))return yield t.__await(yield t.__await(yield*t.__asyncDelegator(t.__asyncValues(Tt(ft,yield t.__await(Ht))))));const he=function(pe){return t.__asyncGenerator(this,arguments,function*(){yield yield t.__await(yield t.__await(pe))})},me=function(pe){return t.__asyncGenerator(this,arguments,function*(){yield t.__await(yield*t.__asyncDelegator(t.__asyncValues(B(function*(Oe){let Ye=null;do Ye=Oe.next(yield Ye==null?void 0:Ye.value);while(!Ye.done)}(pe[Symbol.iterator]())))))})},Me=typeof Ht=="string"||ArrayBuffer.isView(Ht)||Ht instanceof ArrayBuffer||Ht instanceof n?he(Ht):(0,i.isIterable)(Ht)?me(Ht):(0,i.isAsyncIterable)(Ht)?Ht:he(Ht);return yield t.__await(yield*t.__asyncDelegator(t.__asyncValues(B(function(pe){return t.__asyncGenerator(this,arguments,function*(){let Oe=null;do Oe=yield t.__await(pe.next(yield yield t.__await(o(ft,Oe))));while(!Oe.done)})}(Me[Symbol.asyncIterator]()))))),yield t.__await(new ft)})}xe.toArrayBufferViewAsyncIterator=Tt;const Ot=ft=>Tt(Int8Array,ft);xe.toInt8ArrayAsyncIterator=Ot;const H=ft=>Tt(Int16Array,ft);xe.toInt16ArrayAsyncIterator=H;const k=ft=>Tt(Int32Array,ft);xe.toInt32ArrayAsyncIterator=k;const G=ft=>Tt(Uint8Array,ft);xe.toUint8ArrayAsyncIterator=G;const lt=ft=>Tt(Uint16Array,ft);xe.toUint16ArrayAsyncIterator=lt;const Q=ft=>Tt(Uint32Array,ft);xe.toUint32ArrayAsyncIterator=Q;const mt=ft=>Tt(Float32Array,ft);xe.toFloat32ArrayAsyncIterator=mt;const wt=ft=>Tt(Float64Array,ft);xe.toFloat64ArrayAsyncIterator=wt;const Dt=ft=>Tt(Uint8ClampedArray,ft);xe.toUint8ClampedArrayAsyncIterator=Dt;function te(ft,Ht,Nt){if(ft!==0){Nt=Nt.slice(0,Ht);for(let he=-1,me=Nt.length;++he<me;)Nt[he]+=ft}return Nt.subarray(0,Ht)}xe.rebaseValueOffsets=te;function ie(ft,Ht){let Nt=0;const he=ft.length;if(he!==Ht.length)return!1;if(he>0)do if(ft[Nt]!==Ht[Nt])return!1;while(++Nt<he);return!0}return xe.compareArrayLike=ie,xe}var yC;function oT(){if(yC)return Nb;yC=1,Object.defineProperty(Nb,"__esModule",{value:!0});const t=Bn,e=Gr();Nb.default={fromIterable(c){return i(n(c))},fromAsyncIterable(c){return i(r(c))},fromDOMStream(c){return i(s(c))},fromNodeStream(c){return i(l(c))},toDOMStream(c,h){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(c,h){throw new Error('"toNodeStream" not available in this environment')}};const i=c=>(c.next(),c);function*n(c){let h,A=!1,m=[],b,S,M,I=0;function O(){return S==="peek"?(0,e.joinUint8Arrays)(m,M)[0]:([b,m,I]=(0,e.joinUint8Arrays)(m,M),b)}({cmd:S,size:M}=(yield null)||{cmd:"read",size:0});const D=(0,e.toUint8ArrayIterator)(c)[Symbol.iterator]();try{do if({done:h,value:b}=Number.isNaN(M-I)?D.next():D.next(M-I),!h&&b.byteLength>0&&(m.push(b),I+=b.byteLength),h||M<=I)do({cmd:S,size:M}=yield O());while(M<I);while(!h)}catch(B){(A=!0)&&typeof D.throw=="function"&&D.throw(B)}finally{A===!1&&typeof D.return=="function"&&D.return(null)}return null}function r(c){return t.__asyncGenerator(this,arguments,function*(){let A,m=!1,b=[],S,M,I,O=0;function D(){return M==="peek"?(0,e.joinUint8Arrays)(b,I)[0]:([S,b,O]=(0,e.joinUint8Arrays)(b,I),S)}({cmd:M,size:I}=(yield yield t.__await(null))||{cmd:"read",size:0});const B=(0,e.toUint8ArrayAsyncIterator)(c)[Symbol.asyncIterator]();try{do if({done:A,value:S}=Number.isNaN(I-O)?yield t.__await(B.next()):yield t.__await(B.next(I-O)),!A&&S.byteLength>0&&(b.push(S),O+=S.byteLength),A||I<=O)do({cmd:M,size:I}=yield yield t.__await(D()));while(I<O);while(!A)}catch(P){(m=!0)&&typeof B.throw=="function"&&(yield t.__await(B.throw(P)))}finally{m===!1&&typeof B.return=="function"&&(yield t.__await(B.return(new Uint8Array(0))))}return yield t.__await(null)})}function s(c){return t.__asyncGenerator(this,arguments,function*(){let A=!1,m=!1,b=[],S,M,I,O=0;function D(){return M==="peek"?(0,e.joinUint8Arrays)(b,I)[0]:([S,b,O]=(0,e.joinUint8Arrays)(b,I),S)}({cmd:M,size:I}=(yield yield t.__await(null))||{cmd:"read",size:0});const B=new a(c);try{do if({done:A,value:S}=Number.isNaN(I-O)?yield t.__await(B.read()):yield t.__await(B.read(I-O)),!A&&S.byteLength>0&&(b.push((0,e.toUint8Array)(S)),O+=S.byteLength),A||I<=O)do({cmd:M,size:I}=yield yield t.__await(D()));while(I<O);while(!A)}catch(P){(m=!0)&&(yield t.__await(B.cancel(P)))}finally{m===!1?yield t.__await(B.cancel()):c.locked&&B.releaseLock()}return yield t.__await(null)})}class a{constructor(h){this.source=h,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(h){return t.__awaiter(this,void 0,void 0,function*(){const{reader:A,source:m}=this;A&&(yield A.cancel(h).catch(()=>{})),m&&m.locked&&this.releaseLock()})}read(h){return t.__awaiter(this,void 0,void 0,function*(){if(h===0)return{done:this.reader==null,value:new Uint8Array(0)};const A=yield this.reader.read();return!A.done&&(A.value=(0,e.toUint8Array)(A)),A})}}const o=(c,h)=>{const A=b=>m([h,b]);let m;return[h,A,new Promise(b=>(m=b)&&c.once(h,A))]};function l(c){return t.__asyncGenerator(this,arguments,function*(){const A=[];let m="error",b=!1,S=null,M,I,O=0,D=[],B;function P(){return M==="peek"?(0,e.joinUint8Arrays)(D,I)[0]:([B,D,O]=(0,e.joinUint8Arrays)(D,I),B)}if({cmd:M,size:I}=(yield yield t.__await(null))||{cmd:"read",size:0},c.isTTY)return yield yield t.__await(new Uint8Array(0)),yield t.__await(null);try{A[0]=o(c,"end"),A[1]=o(c,"error");do{if(A[2]=o(c,"readable"),[m,S]=yield t.__await(Promise.race(A.map(N=>N[2]))),m==="error")break;if((b=m==="end")||(Number.isFinite(I-O)?(B=(0,e.toUint8Array)(c.read(I-O)),B.byteLength<I-O&&(B=(0,e.toUint8Array)(c.read()))):B=(0,e.toUint8Array)(c.read()),B.byteLength>0&&(D.push(B),O+=B.byteLength)),b||I<=O)do({cmd:M,size:I}=yield yield t.__await(P()));while(I<O)}while(!b)}finally{yield t.__await(j(A,m==="error"?S:null))}return yield t.__await(null);function j(N,F){return B=D=null,new Promise(($,V)=>{for(const[Z,nt]of N)c.off(Z,nt);try{const Z=c.destroy;Z&&Z.call(c,F),F=void 0}catch(Z){F=Z||F}finally{F!=null?V(F):$()}})}})}return Nb}var Xl={},_h={},Vw={},Cg={},pC;function BE(){if(pC)return Cg;pC=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.MetadataVersion=void 0;var t;return function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"}(t||(Cg.MetadataVersion=t={})),Cg}var Pg={},mC;function o7(){if(mC)return Pg;mC=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.UnionMode=void 0;var t;return function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"}(t||(Pg.UnionMode=t={})),Pg}var xg={},_C;function l7(){if(_C)return xg;_C=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.Precision=void 0;var t;return function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"}(t||(xg.Precision=t={})),xg}var Ng={},bC;function c7(){if(bC)return Ng;bC=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.DateUnit=void 0;var t;return function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"}(t||(Ng.DateUnit=t={})),Ng}var Fg={},vC;function lT(){if(vC)return Fg;vC=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.TimeUnit=void 0;var t;return function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"}(t||(Fg.TimeUnit=t={})),Fg}var Lg={},TC;function u7(){if(TC)return Lg;TC=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.IntervalUnit=void 0;var t;return function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(t||(Lg.IntervalUnit=t={})),Lg}var Ql={},Ug={};const Re=tT(nG);var kg={},jg={},zg={},SC;function Qtt(){if(SC)return zg;SC=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.BodyCompressionMethod=void 0;var t;return function(e){e[e.BUFFER=0]="BUFFER"}(t||(zg.BodyCompressionMethod=t={})),zg}var Vg={},wC;function Ktt(){if(wC)return Vg;wC=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.CompressionType=void 0;var t;return function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"}(t||(Vg.CompressionType=t={})),Vg}var MC;function Ztt(){if(MC)return jg;MC=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.BodyCompression=void 0;const t=Re,e=Qtt(),i=Ktt();class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsBodyCompression(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsBodyCompression(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}codec(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt8(this.bb_pos+s):i.CompressionType.LZ4_FRAME}method(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt8(this.bb_pos+s):e.BodyCompressionMethod.BUFFER}static startBodyCompression(s){s.startObject(2)}static addCodec(s,a){s.addFieldInt8(0,a,i.CompressionType.LZ4_FRAME)}static addMethod(s,a){s.addFieldInt8(1,a,e.BodyCompressionMethod.BUFFER)}static endBodyCompression(s){return s.endObject()}static createBodyCompression(s,a,o){return n.startBodyCompression(s),n.addCodec(s,a),n.addMethod(s,o),n.endBodyCompression(s)}}return jg.BodyCompression=n,jg}var $g={},IC;function Cf(){if(IC)return $g;IC=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.Buffer=void 0;class t{constructor(){this.bb=null,this.bb_pos=0}__init(i,n){return this.bb_pos=i,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(i,n,r){return i.prep(8,16),i.writeInt64(BigInt(r??0)),i.writeInt64(BigInt(n??0)),i.offset()}}return $g.Buffer=t,$g}var Wg={},EC;function h7(){if(EC)return Wg;EC=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.FieldNode=void 0;class t{constructor(){this.bb=null,this.bb_pos=0}__init(i,n){return this.bb_pos=i,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(i,n,r){return i.prep(8,16),i.writeInt64(BigInt(r??0)),i.writeInt64(BigInt(n??0)),i.offset()}}return Wg.FieldNode=t,Wg}var BC;function OE(){if(BC)return kg;BC=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.RecordBatch=void 0;const t=Re,e=Ztt(),i=Cf(),n=h7();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsRecordBatch(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsRecordBatch(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}length(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}nodes(a,o){const l=this.bb.__offset(this.bb_pos,6);return l?(o||new n.FieldNode).__init(this.bb.__vector(this.bb_pos+l)+a*16,this.bb):null}nodesLength(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}buffers(a,o){const l=this.bb.__offset(this.bb_pos,8);return l?(o||new i.Buffer).__init(this.bb.__vector(this.bb_pos+l)+a*16,this.bb):null}buffersLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}compression(a){const o=this.bb.__offset(this.bb_pos,10);return o?(a||new e.BodyCompression).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startRecordBatch(a){a.startObject(4)}static addLength(a,o){a.addFieldInt64(0,o,BigInt("0"))}static addNodes(a,o){a.addFieldOffset(1,o,0)}static startNodesVector(a,o){a.startVector(16,o,8)}static addBuffers(a,o){a.addFieldOffset(2,o,0)}static startBuffersVector(a,o){a.startVector(16,o,8)}static addCompression(a,o){a.addFieldOffset(3,o,0)}static endRecordBatch(a){return a.endObject()}}return kg.RecordBatch=r,kg}var OC;function f7(){if(OC)return Ug;OC=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.DictionaryBatch=void 0;const t=Re,e=OE();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsDictionaryBatch(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsDictionaryBatch(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}id(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt64(this.bb_pos+r):BigInt("0")}data(r){const s=this.bb.__offset(this.bb_pos,6);return s?(r||new e.RecordBatch).__init(this.bb.__indirect(this.bb_pos+s),this.bb):null}isDelta(){const r=this.bb.__offset(this.bb_pos,8);return r?!!this.bb.readInt8(this.bb_pos+r):!1}static startDictionaryBatch(r){r.startObject(3)}static addId(r,s){r.addFieldInt64(0,s,BigInt("0"))}static addData(r,s){r.addFieldOffset(1,s,0)}static addIsDelta(r,s){r.addFieldInt8(2,+s,0)}static endDictionaryBatch(r){return r.endObject()}}return Ug.DictionaryBatch=i,Ug}var Hg={},qg={},RC;function d7(){if(RC)return qg;RC=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.Endianness=void 0;var t;return function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(t||(qg.Endianness=t={})),qg}var Yg={},Gg={},Xg={},DC;function Jtt(){if(DC)return Xg;DC=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.DictionaryKind=void 0;var t;return function(e){e[e.DenseArray=0]="DenseArray"}(t||(Xg.DictionaryKind=t={})),Xg}var Qg={},CC;function Pf(){if(CC)return Qg;CC=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.Int=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsInt(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsInt(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}bitWidth(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}isSigned(){const n=this.bb.__offset(this.bb_pos,6);return n?!!this.bb.readInt8(this.bb_pos+n):!1}static startInt(n){n.startObject(2)}static addBitWidth(n,r){n.addFieldInt32(0,r,0)}static addIsSigned(n,r){n.addFieldInt8(1,+r,0)}static endInt(n){return n.endObject()}static createInt(n,r,s){return e.startInt(n),e.addBitWidth(n,r),e.addIsSigned(n,s),e.endInt(n)}}return Qg.Int=e,Qg}var PC;function A7(){if(PC)return Gg;PC=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.DictionaryEncoding=void 0;const t=Re,e=Jtt(),i=Pf();class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsDictionaryEncoding(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDictionaryEncoding(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}id(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):BigInt("0")}indexType(s){const a=this.bb.__offset(this.bb_pos,6);return a?(s||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}isOrdered(){const s=this.bb.__offset(this.bb_pos,8);return s?!!this.bb.readInt8(this.bb_pos+s):!1}dictionaryKind(){const s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt16(this.bb_pos+s):e.DictionaryKind.DenseArray}static startDictionaryEncoding(s){s.startObject(4)}static addId(s,a){s.addFieldInt64(0,a,BigInt("0"))}static addIndexType(s,a){s.addFieldOffset(1,a,0)}static addIsOrdered(s,a){s.addFieldInt8(2,+a,0)}static addDictionaryKind(s,a){s.addFieldInt16(3,a,e.DictionaryKind.DenseArray)}static endDictionaryEncoding(s){return s.endObject()}}return Gg.DictionaryEncoding=n,Gg}var Kg={},xC;function Y_(){if(xC)return Kg;xC=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.KeyValue=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsKeyValue(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsKeyValue(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}key(n){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,n):null}value(n){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,n):null}static startKeyValue(n){n.startObject(2)}static addKey(n,r){n.addFieldOffset(0,r,0)}static addValue(n,r){n.addFieldOffset(1,r,0)}static endKeyValue(n){return n.endObject()}static createKeyValue(n,r,s){return e.startKeyValue(n),e.addKey(n,r),e.addValue(n,s),e.endKeyValue(n)}}return Kg.KeyValue=e,Kg}var Kl={},Zg={},NC;function g7(){if(NC)return Zg;NC=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.Binary=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsBinary(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsBinary(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startBinary(n){n.startObject(0)}static endBinary(n){return n.endObject()}static createBinary(n){return e.startBinary(n),e.endBinary(n)}}return Zg.Binary=e,Zg}var Jg={},FC;function y7(){if(FC)return Jg;FC=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.Bool=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsBool(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsBool(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startBool(n){n.startObject(0)}static endBool(n){return n.endObject()}static createBool(n){return e.startBool(n),e.endBool(n)}}return Jg.Bool=e,Jg}var ty={},LC;function RE(){if(LC)return ty;LC=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.Date=void 0;const t=Re,e=c7();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsDate(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsDate(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.DateUnit.MILLISECOND}static startDate(r){r.startObject(1)}static addUnit(r,s){r.addFieldInt16(0,s,e.DateUnit.MILLISECOND)}static endDate(r){return r.endObject()}static createDate(r,s){return i.startDate(r),i.addUnit(r,s),i.endDate(r)}}return ty.Date=i,ty}var ey={},UC;function DE(){if(UC)return ey;UC=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.Decimal=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsDecimal(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsDecimal(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}precision(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}scale(){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb_pos+n):0}bitWidth(){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readInt32(this.bb_pos+n):128}static startDecimal(n){n.startObject(3)}static addPrecision(n,r){n.addFieldInt32(0,r,0)}static addScale(n,r){n.addFieldInt32(1,r,0)}static addBitWidth(n,r){n.addFieldInt32(2,r,128)}static endDecimal(n){return n.endObject()}static createDecimal(n,r,s,a){return e.startDecimal(n),e.addPrecision(n,r),e.addScale(n,s),e.addBitWidth(n,a),e.endDecimal(n)}}return ey.Decimal=e,ey}var iy={},kC;function CE(){if(kC)return iy;kC=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.Duration=void 0;const t=Re,e=lT();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsDuration(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsDuration(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.TimeUnit.MILLISECOND}static startDuration(r){r.startObject(1)}static addUnit(r,s){r.addFieldInt16(0,s,e.TimeUnit.MILLISECOND)}static endDuration(r){return r.endObject()}static createDuration(r,s){return i.startDuration(r),i.addUnit(r,s),i.endDuration(r)}}return iy.Duration=i,iy}var ny={},jC;function PE(){if(jC)return ny;jC=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.FixedSizeBinary=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsFixedSizeBinary(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsFixedSizeBinary(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}byteWidth(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}static startFixedSizeBinary(n){n.startObject(1)}static addByteWidth(n,r){n.addFieldInt32(0,r,0)}static endFixedSizeBinary(n){return n.endObject()}static createFixedSizeBinary(n,r){return e.startFixedSizeBinary(n),e.addByteWidth(n,r),e.endFixedSizeBinary(n)}}return ny.FixedSizeBinary=e,ny}var ry={},zC;function xE(){if(zC)return ry;zC=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.FixedSizeList=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsFixedSizeList(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsFixedSizeList(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}listSize(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}static startFixedSizeList(n){n.startObject(1)}static addListSize(n,r){n.addFieldInt32(0,r,0)}static endFixedSizeList(n){return n.endObject()}static createFixedSizeList(n,r){return e.startFixedSizeList(n),e.addListSize(n,r),e.endFixedSizeList(n)}}return ry.FixedSizeList=e,ry}var sy={},VC;function NE(){if(VC)return sy;VC=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.FloatingPoint=void 0;const t=Re,e=l7();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsFloatingPoint(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsFloatingPoint(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}precision(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.Precision.HALF}static startFloatingPoint(r){r.startObject(1)}static addPrecision(r,s){r.addFieldInt16(0,s,e.Precision.HALF)}static endFloatingPoint(r){return r.endObject()}static createFloatingPoint(r,s){return i.startFloatingPoint(r),i.addPrecision(r,s),i.endFloatingPoint(r)}}return sy.FloatingPoint=i,sy}var ay={},$C;function FE(){if($C)return ay;$C=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.Interval=void 0;const t=Re,e=u7();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsInterval(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsInterval(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.IntervalUnit.YEAR_MONTH}static startInterval(r){r.startObject(1)}static addUnit(r,s){r.addFieldInt16(0,s,e.IntervalUnit.YEAR_MONTH)}static endInterval(r){return r.endObject()}static createInterval(r,s){return i.startInterval(r),i.addUnit(r,s),i.endInterval(r)}}return ay.Interval=i,ay}var oy={},WC;function p7(){if(WC)return oy;WC=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.LargeBinary=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsLargeBinary(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsLargeBinary(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startLargeBinary(n){n.startObject(0)}static endLargeBinary(n){return n.endObject()}static createLargeBinary(n){return e.startLargeBinary(n),e.endLargeBinary(n)}}return oy.LargeBinary=e,oy}var ly={},HC;function tet(){if(HC)return ly;HC=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.LargeList=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsLargeList(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsLargeList(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startLargeList(n){n.startObject(0)}static endLargeList(n){return n.endObject()}static createLargeList(n){return e.startLargeList(n),e.endLargeList(n)}}return ly.LargeList=e,ly}var cy={},qC;function m7(){if(qC)return cy;qC=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.LargeUtf8=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsLargeUtf8(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsLargeUtf8(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startLargeUtf8(n){n.startObject(0)}static endLargeUtf8(n){return n.endObject()}static createLargeUtf8(n){return e.startLargeUtf8(n),e.endLargeUtf8(n)}}return cy.LargeUtf8=e,cy}var uy={},YC;function _7(){if(YC)return uy;YC=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.List=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsList(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsList(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startList(n){n.startObject(0)}static endList(n){return n.endObject()}static createList(n){return e.startList(n),e.endList(n)}}return uy.List=e,uy}var hy={},GC;function LE(){if(GC)return hy;GC=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.Map=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsMap(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsMap(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}keysSorted(){const n=this.bb.__offset(this.bb_pos,4);return n?!!this.bb.readInt8(this.bb_pos+n):!1}static startMap(n){n.startObject(1)}static addKeysSorted(n,r){n.addFieldInt8(0,+r,0)}static endMap(n){return n.endObject()}static createMap(n,r){return e.startMap(n),e.addKeysSorted(n,r),e.endMap(n)}}return hy.Map=e,hy}var fy={},XC;function b7(){if(XC)return fy;XC=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.Null=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsNull(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsNull(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startNull(n){n.startObject(0)}static endNull(n){return n.endObject()}static createNull(n){return e.startNull(n),e.endNull(n)}}return fy.Null=e,fy}var dy={},QC;function eet(){if(QC)return dy;QC=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.RunEndEncoded=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsRunEndEncoded(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsRunEndEncoded(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startRunEndEncoded(n){n.startObject(0)}static endRunEndEncoded(n){return n.endObject()}static createRunEndEncoded(n){return e.startRunEndEncoded(n),e.endRunEndEncoded(n)}}return dy.RunEndEncoded=e,dy}var Ay={},KC;function v7(){if(KC)return Ay;KC=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.Struct_=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsStruct_(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsStruct_(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startStruct_(n){n.startObject(0)}static endStruct_(n){return n.endObject()}static createStruct_(n){return e.startStruct_(n),e.endStruct_(n)}}return Ay.Struct_=e,Ay}var gy={},ZC;function UE(){if(ZC)return gy;ZC=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.Time=void 0;const t=Re,e=lT();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsTime(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsTime(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.TimeUnit.MILLISECOND}bitWidth(){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb_pos+r):32}static startTime(r){r.startObject(2)}static addUnit(r,s){r.addFieldInt16(0,s,e.TimeUnit.MILLISECOND)}static addBitWidth(r,s){r.addFieldInt32(1,s,32)}static endTime(r){return r.endObject()}static createTime(r,s,a){return i.startTime(r),i.addUnit(r,s),i.addBitWidth(r,a),i.endTime(r)}}return gy.Time=i,gy}var yy={},JC;function kE(){if(JC)return yy;JC=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.Timestamp=void 0;const t=Re,e=lT();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsTimestamp(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsTimestamp(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.TimeUnit.SECOND}timezone(r){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__string(this.bb_pos+s,r):null}static startTimestamp(r){r.startObject(2)}static addUnit(r,s){r.addFieldInt16(0,s,e.TimeUnit.SECOND)}static addTimezone(r,s){r.addFieldOffset(1,s,0)}static endTimestamp(r){return r.endObject()}static createTimestamp(r,s,a){return i.startTimestamp(r),i.addUnit(r,s),i.addTimezone(r,a),i.endTimestamp(r)}}return yy.Timestamp=i,yy}var py={},tP;function jE(){if(tP)return py;tP=1,Object.defineProperty(py,"__esModule",{value:!0}),py.Union=void 0;const t=Re,e=o7();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsUnion(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsUnion(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}mode(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.UnionMode.Sparse}typeIds(r){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt32(this.bb.__vector(this.bb_pos+s)+r*4):0}typeIdsLength(){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__vector_len(this.bb_pos+r):0}typeIdsArray(){const r=this.bb.__offset(this.bb_pos,6);return r?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+r),this.bb.__vector_len(this.bb_pos+r)):null}static startUnion(r){r.startObject(2)}static addMode(r,s){r.addFieldInt16(0,s,e.UnionMode.Sparse)}static addTypeIds(r,s){r.addFieldOffset(1,s,0)}static createTypeIdsVector(r,s){r.startVector(4,s.length,4);for(let a=s.length-1;a>=0;a--)r.addInt32(s[a]);return r.endVector()}static startTypeIdsVector(r,s){r.startVector(4,s,4)}static endUnion(r){return r.endObject()}static createUnion(r,s,a){return i.startUnion(r),i.addMode(r,s),i.addTypeIds(r,a),i.endUnion(r)}}return py.Union=i,py}var my={},eP;function T7(){if(eP)return my;eP=1,Object.defineProperty(my,"__esModule",{value:!0}),my.Utf8=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsUtf8(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsUtf8(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startUtf8(n){n.startObject(0)}static endUtf8(n){return n.endObject()}static createUtf8(n){return e.startUtf8(n),e.endUtf8(n)}}return my.Utf8=e,my}var iP;function G_(){if(iP)return Kl;iP=1,Object.defineProperty(Kl,"__esModule",{value:!0}),Kl.unionListToType=Kl.unionToType=Kl.Type=void 0;const t=g7(),e=y7(),i=RE(),n=DE(),r=CE(),s=PE(),a=xE(),o=NE(),l=Pf(),c=FE(),h=p7(),A=tet(),m=m7(),b=_7(),S=LE(),M=b7(),I=eet(),O=v7(),D=UE(),B=kE(),P=jE(),j=T7();var N;(function(V){V[V.NONE=0]="NONE",V[V.Null=1]="Null",V[V.Int=2]="Int",V[V.FloatingPoint=3]="FloatingPoint",V[V.Binary=4]="Binary",V[V.Utf8=5]="Utf8",V[V.Bool=6]="Bool",V[V.Decimal=7]="Decimal",V[V.Date=8]="Date",V[V.Time=9]="Time",V[V.Timestamp=10]="Timestamp",V[V.Interval=11]="Interval",V[V.List=12]="List",V[V.Struct_=13]="Struct_",V[V.Union=14]="Union",V[V.FixedSizeBinary=15]="FixedSizeBinary",V[V.FixedSizeList=16]="FixedSizeList",V[V.Map=17]="Map",V[V.Duration=18]="Duration",V[V.LargeBinary=19]="LargeBinary",V[V.LargeUtf8=20]="LargeUtf8",V[V.LargeList=21]="LargeList",V[V.RunEndEncoded=22]="RunEndEncoded"})(N||(Kl.Type=N={}));function F(V,Z){switch(N[V]){case"NONE":return null;case"Null":return Z(new M.Null);case"Int":return Z(new l.Int);case"FloatingPoint":return Z(new o.FloatingPoint);case"Binary":return Z(new t.Binary);case"Utf8":return Z(new j.Utf8);case"Bool":return Z(new e.Bool);case"Decimal":return Z(new n.Decimal);case"Date":return Z(new i.Date);case"Time":return Z(new D.Time);case"Timestamp":return Z(new B.Timestamp);case"Interval":return Z(new c.Interval);case"List":return Z(new b.List);case"Struct_":return Z(new O.Struct_);case"Union":return Z(new P.Union);case"FixedSizeBinary":return Z(new s.FixedSizeBinary);case"FixedSizeList":return Z(new a.FixedSizeList);case"Map":return Z(new S.Map);case"Duration":return Z(new r.Duration);case"LargeBinary":return Z(new h.LargeBinary);case"LargeUtf8":return Z(new m.LargeUtf8);case"LargeList":return Z(new A.LargeList);case"RunEndEncoded":return Z(new I.RunEndEncoded);default:return null}}Kl.unionToType=F;function $(V,Z,nt){switch(N[V]){case"NONE":return null;case"Null":return Z(nt,new M.Null);case"Int":return Z(nt,new l.Int);case"FloatingPoint":return Z(nt,new o.FloatingPoint);case"Binary":return Z(nt,new t.Binary);case"Utf8":return Z(nt,new j.Utf8);case"Bool":return Z(nt,new e.Bool);case"Decimal":return Z(nt,new n.Decimal);case"Date":return Z(nt,new i.Date);case"Time":return Z(nt,new D.Time);case"Timestamp":return Z(nt,new B.Timestamp);case"Interval":return Z(nt,new c.Interval);case"List":return Z(nt,new b.List);case"Struct_":return Z(nt,new O.Struct_);case"Union":return Z(nt,new P.Union);case"FixedSizeBinary":return Z(nt,new s.FixedSizeBinary);case"FixedSizeList":return Z(nt,new a.FixedSizeList);case"Map":return Z(nt,new S.Map);case"Duration":return Z(nt,new r.Duration);case"LargeBinary":return Z(nt,new h.LargeBinary);case"LargeUtf8":return Z(nt,new m.LargeUtf8);case"LargeList":return Z(nt,new A.LargeList);case"RunEndEncoded":return Z(nt,new I.RunEndEncoded);default:return null}}return Kl.unionListToType=$,Kl}var nP;function S7(){if(nP)return Yg;nP=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.Field=void 0;const t=Re,e=A7(),i=Y_(),n=G_();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsField(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsField(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}name(a){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,a):null}nullable(){const a=this.bb.__offset(this.bb_pos,6);return a?!!this.bb.readInt8(this.bb_pos+a):!1}typeType(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readUint8(this.bb_pos+a):n.Type.NONE}type(a){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__union(a,this.bb_pos+o):null}dictionary(a){const o=this.bb.__offset(this.bb_pos,12);return o?(a||new e.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}children(a,o){const l=this.bb.__offset(this.bb_pos,14);return l?(o||new r).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}childrenLength(){const a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__vector_len(this.bb_pos+a):0}customMetadata(a,o){const l=this.bb.__offset(this.bb_pos,16);return l?(o||new i.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,16);return a?this.bb.__vector_len(this.bb_pos+a):0}static startField(a){a.startObject(7)}static addName(a,o){a.addFieldOffset(0,o,0)}static addNullable(a,o){a.addFieldInt8(1,+o,0)}static addTypeType(a,o){a.addFieldInt8(2,o,n.Type.NONE)}static addType(a,o){a.addFieldOffset(3,o,0)}static addDictionary(a,o){a.addFieldOffset(4,o,0)}static addChildren(a,o){a.addFieldOffset(5,o,0)}static createChildrenVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startChildrenVector(a,o){a.startVector(4,o,4)}static addCustomMetadata(a,o){a.addFieldOffset(6,o,0)}static createCustomMetadataVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startCustomMetadataVector(a,o){a.startVector(4,o,4)}static endField(a){return a.endObject()}}return Yg.Field=r,Yg}var rP;function zE(){if(rP)return Hg;rP=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.Schema=void 0;const t=Re,e=d7(),i=S7(),n=Y_();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsSchema(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSchema(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}endianness(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):e.Endianness.Little}fields(a,o){const l=this.bb.__offset(this.bb_pos,6);return l?(o||new i.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}fieldsLength(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}customMetadata(a,o){const l=this.bb.__offset(this.bb_pos,8);return l?(o||new n.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}features(a){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+a*8):BigInt(0)}featuresLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0}static startSchema(a){a.startObject(4)}static addEndianness(a,o){a.addFieldInt16(0,o,e.Endianness.Little)}static addFields(a,o){a.addFieldOffset(1,o,0)}static createFieldsVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startFieldsVector(a,o){a.startVector(4,o,4)}static addCustomMetadata(a,o){a.addFieldOffset(2,o,0)}static createCustomMetadataVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startCustomMetadataVector(a,o){a.startVector(4,o,4)}static addFeatures(a,o){a.addFieldOffset(3,o,0)}static createFeaturesVector(a,o){a.startVector(8,o.length,8);for(let l=o.length-1;l>=0;l--)a.addInt64(o[l]);return a.endVector()}static startFeaturesVector(a,o){a.startVector(8,o,8)}static endSchema(a){return a.endObject()}static finishSchemaBuffer(a,o){a.finish(o)}static finishSizePrefixedSchemaBuffer(a,o){a.finish(o,void 0,!0)}static createSchema(a,o,l,c,h){return r.startSchema(a),r.addEndianness(a,o),r.addFields(a,l),r.addCustomMetadata(a,c),r.addFeatures(a,h),r.endSchema(a)}}return Hg.Schema=r,Hg}var _y={},Zl={},by={},vy={},sP;function iet(){if(sP)return vy;sP=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.SparseMatrixCompressedAxis=void 0;var t;return function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(t||(vy.SparseMatrixCompressedAxis=t={})),vy}var aP;function net(){if(aP)return by;aP=1,Object.defineProperty(by,"__esModule",{value:!0}),by.SparseMatrixIndexCSX=void 0;const t=Re,e=Cf(),i=Pf(),n=iet();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsSparseMatrixIndexCSX(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSparseMatrixIndexCSX(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}compressedAxis(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.SparseMatrixCompressedAxis.Row}indptrType(a){const o=this.bb.__offset(this.bb_pos,6);return o?(a||new i.Int).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}indptrBuffer(a){const o=this.bb.__offset(this.bb_pos,8);return o?(a||new e.Buffer).__init(this.bb_pos+o,this.bb):null}indicesType(a){const o=this.bb.__offset(this.bb_pos,10);return o?(a||new i.Int).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}indicesBuffer(a){const o=this.bb.__offset(this.bb_pos,12);return o?(a||new e.Buffer).__init(this.bb_pos+o,this.bb):null}static startSparseMatrixIndexCSX(a){a.startObject(5)}static addCompressedAxis(a,o){a.addFieldInt16(0,o,n.SparseMatrixCompressedAxis.Row)}static addIndptrType(a,o){a.addFieldOffset(1,o,0)}static addIndptrBuffer(a,o){a.addFieldStruct(2,o,0)}static addIndicesType(a,o){a.addFieldOffset(3,o,0)}static addIndicesBuffer(a,o){a.addFieldStruct(4,o,0)}static endSparseMatrixIndexCSX(a){const o=a.endObject();return a.requiredField(o,6),a.requiredField(o,8),a.requiredField(o,10),a.requiredField(o,12),o}}return by.SparseMatrixIndexCSX=r,by}var Ty={},oP;function ret(){if(oP)return Ty;oP=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.SparseTensorIndexCOO=void 0;const t=Re,e=Cf(),i=Pf();class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsSparseTensorIndexCOO(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensorIndexCOO(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}indicesType(s){const a=this.bb.__offset(this.bb_pos,4);return a?(s||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indicesStrides(s){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt64(this.bb.__vector(this.bb_pos+a)+s*8):BigInt(0)}indicesStridesLength(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}indicesBuffer(s){const a=this.bb.__offset(this.bb_pos,8);return a?(s||new e.Buffer).__init(this.bb_pos+a,this.bb):null}isCanonical(){const s=this.bb.__offset(this.bb_pos,10);return s?!!this.bb.readInt8(this.bb_pos+s):!1}static startSparseTensorIndexCOO(s){s.startObject(4)}static addIndicesType(s,a){s.addFieldOffset(0,a,0)}static addIndicesStrides(s,a){s.addFieldOffset(1,a,0)}static createIndicesStridesVector(s,a){s.startVector(8,a.length,8);for(let o=a.length-1;o>=0;o--)s.addInt64(a[o]);return s.endVector()}static startIndicesStridesVector(s,a){s.startVector(8,a,8)}static addIndicesBuffer(s,a){s.addFieldStruct(2,a,0)}static addIsCanonical(s,a){s.addFieldInt8(3,+a,0)}static endSparseTensorIndexCOO(s){const a=s.endObject();return s.requiredField(a,4),s.requiredField(a,8),a}}return Ty.SparseTensorIndexCOO=n,Ty}var Sy={},lP;function set(){if(lP)return Sy;lP=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.SparseTensorIndexCSF=void 0;const t=Re,e=Cf(),i=Pf();class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsSparseTensorIndexCSF(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensorIndexCSF(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}indptrType(s){const a=this.bb.__offset(this.bb_pos,4);return a?(s||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indptrBuffers(s,a){const o=this.bb.__offset(this.bb_pos,6);return o?(a||new e.Buffer).__init(this.bb.__vector(this.bb_pos+o)+s*16,this.bb):null}indptrBuffersLength(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}indicesType(s){const a=this.bb.__offset(this.bb_pos,8);return a?(s||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indicesBuffers(s,a){const o=this.bb.__offset(this.bb_pos,10);return o?(a||new e.Buffer).__init(this.bb.__vector(this.bb_pos+o)+s*16,this.bb):null}indicesBuffersLength(){const s=this.bb.__offset(this.bb_pos,10);return s?this.bb.__vector_len(this.bb_pos+s):0}axisOrder(s){const a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readInt32(this.bb.__vector(this.bb_pos+a)+s*4):0}axisOrderLength(){const s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}axisOrderArray(){const s=this.bb.__offset(this.bb_pos,12);return s?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}static startSparseTensorIndexCSF(s){s.startObject(5)}static addIndptrType(s,a){s.addFieldOffset(0,a,0)}static addIndptrBuffers(s,a){s.addFieldOffset(1,a,0)}static startIndptrBuffersVector(s,a){s.startVector(16,a,8)}static addIndicesType(s,a){s.addFieldOffset(2,a,0)}static addIndicesBuffers(s,a){s.addFieldOffset(3,a,0)}static startIndicesBuffersVector(s,a){s.startVector(16,a,8)}static addAxisOrder(s,a){s.addFieldOffset(4,a,0)}static createAxisOrderVector(s,a){s.startVector(4,a.length,4);for(let o=a.length-1;o>=0;o--)s.addInt32(a[o]);return s.endVector()}static startAxisOrderVector(s,a){s.startVector(4,a,4)}static endSparseTensorIndexCSF(s){const a=s.endObject();return s.requiredField(a,4),s.requiredField(a,6),s.requiredField(a,8),s.requiredField(a,10),s.requiredField(a,12),a}}return Sy.SparseTensorIndexCSF=n,Sy}var cP;function aet(){if(cP)return Zl;cP=1,Object.defineProperty(Zl,"__esModule",{value:!0}),Zl.unionListToSparseTensorIndex=Zl.unionToSparseTensorIndex=Zl.SparseTensorIndex=void 0;const t=net(),e=ret(),i=set();var n;(function(a){a[a.NONE=0]="NONE",a[a.SparseTensorIndexCOO=1]="SparseTensorIndexCOO",a[a.SparseMatrixIndexCSX=2]="SparseMatrixIndexCSX",a[a.SparseTensorIndexCSF=3]="SparseTensorIndexCSF"})(n||(Zl.SparseTensorIndex=n={}));function r(a,o){switch(n[a]){case"NONE":return null;case"SparseTensorIndexCOO":return o(new e.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return o(new t.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return o(new i.SparseTensorIndexCSF);default:return null}}Zl.unionToSparseTensorIndex=r;function s(a,o,l){switch(n[a]){case"NONE":return null;case"SparseTensorIndexCOO":return o(l,new e.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return o(l,new t.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return o(l,new i.SparseTensorIndexCSF);default:return null}}return Zl.unionListToSparseTensorIndex=s,Zl}var wy={},uP;function w7(){if(uP)return wy;uP=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.TensorDim=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsTensorDim(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTensorDim(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}size(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt64(this.bb_pos+n):BigInt("0")}name(n){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,n):null}static startTensorDim(n){n.startObject(2)}static addSize(n,r){n.addFieldInt64(0,r,BigInt("0"))}static addName(n,r){n.addFieldOffset(1,r,0)}static endTensorDim(n){return n.endObject()}static createTensorDim(n,r,s){return e.startTensorDim(n),e.addSize(n,r),e.addName(n,s),e.endTensorDim(n)}}return wy.TensorDim=e,wy}var hP;function oet(){if(hP)return _y;hP=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.SparseTensor=void 0;const t=Re,e=Cf(),i=aet(),n=w7(),r=G_();class s{constructor(){this.bb=null,this.bb_pos=0}__init(o,l){return this.bb_pos=o,this.bb=l,this}static getRootAsSparseTensor(o,l){return(l||new s).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsSparseTensor(o,l){return o.setPosition(o.position()+t.SIZE_PREFIX_LENGTH),(l||new s).__init(o.readInt32(o.position())+o.position(),o)}typeType(){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readUint8(this.bb_pos+o):r.Type.NONE}type(o){const l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__union(o,this.bb_pos+l):null}shape(o,l){const c=this.bb.__offset(this.bb_pos,8);return c?(l||new n.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+o*4),this.bb):null}shapeLength(){const o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__vector_len(this.bb_pos+o):0}nonZeroLength(){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt64(this.bb_pos+o):BigInt("0")}sparseIndexType(){const o=this.bb.__offset(this.bb_pos,12);return o?this.bb.readUint8(this.bb_pos+o):i.SparseTensorIndex.NONE}sparseIndex(o){const l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__union(o,this.bb_pos+l):null}data(o){const l=this.bb.__offset(this.bb_pos,16);return l?(o||new e.Buffer).__init(this.bb_pos+l,this.bb):null}static startSparseTensor(o){o.startObject(7)}static addTypeType(o,l){o.addFieldInt8(0,l,r.Type.NONE)}static addType(o,l){o.addFieldOffset(1,l,0)}static addShape(o,l){o.addFieldOffset(2,l,0)}static createShapeVector(o,l){o.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)o.addOffset(l[c]);return o.endVector()}static startShapeVector(o,l){o.startVector(4,l,4)}static addNonZeroLength(o,l){o.addFieldInt64(3,l,BigInt("0"))}static addSparseIndexType(o,l){o.addFieldInt8(4,l,i.SparseTensorIndex.NONE)}static addSparseIndex(o,l){o.addFieldOffset(5,l,0)}static addData(o,l){o.addFieldStruct(6,l,0)}static endSparseTensor(o){const l=o.endObject();return o.requiredField(l,6),o.requiredField(l,8),o.requiredField(l,14),o.requiredField(l,16),l}static finishSparseTensorBuffer(o,l){o.finish(l)}static finishSizePrefixedSparseTensorBuffer(o,l){o.finish(l,void 0,!0)}}return _y.SparseTensor=s,_y}var My={},fP;function cet(){if(fP)return My;fP=1,Object.defineProperty(My,"__esModule",{value:!0}),My.Tensor=void 0;const t=Re,e=Cf(),i=w7(),n=G_();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsTensor(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTensor(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}typeType(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readUint8(this.bb_pos+a):n.Type.NONE}type(a){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__union(a,this.bb_pos+o):null}shape(a,o){const l=this.bb.__offset(this.bb_pos,8);return l?(o||new i.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}shapeLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}strides(a){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+a*8):BigInt(0)}stridesLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0}data(a){const o=this.bb.__offset(this.bb_pos,12);return o?(a||new e.Buffer).__init(this.bb_pos+o,this.bb):null}static startTensor(a){a.startObject(5)}static addTypeType(a,o){a.addFieldInt8(0,o,n.Type.NONE)}static addType(a,o){a.addFieldOffset(1,o,0)}static addShape(a,o){a.addFieldOffset(2,o,0)}static createShapeVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startShapeVector(a,o){a.startVector(4,o,4)}static addStrides(a,o){a.addFieldOffset(3,o,0)}static createStridesVector(a,o){a.startVector(8,o.length,8);for(let l=o.length-1;l>=0;l--)a.addInt64(o[l]);return a.endVector()}static startStridesVector(a,o){a.startVector(8,o,8)}static addData(a,o){a.addFieldStruct(4,o,0)}static endTensor(a){const o=a.endObject();return a.requiredField(o,6),a.requiredField(o,8),a.requiredField(o,12),o}static finishTensorBuffer(a,o){a.finish(o)}static finishSizePrefixedTensorBuffer(a,o){a.finish(o,void 0,!0)}}return My.Tensor=r,My}var dP;function VE(){if(dP)return Ql;dP=1,Object.defineProperty(Ql,"__esModule",{value:!0}),Ql.unionListToMessageHeader=Ql.unionToMessageHeader=Ql.MessageHeader=void 0;const t=f7(),e=OE(),i=zE(),n=oet(),r=cet();var s;(function(l){l[l.NONE=0]="NONE",l[l.Schema=1]="Schema",l[l.DictionaryBatch=2]="DictionaryBatch",l[l.RecordBatch=3]="RecordBatch",l[l.Tensor=4]="Tensor",l[l.SparseTensor=5]="SparseTensor"})(s||(Ql.MessageHeader=s={}));function a(l,c){switch(s[l]){case"NONE":return null;case"Schema":return c(new i.Schema);case"DictionaryBatch":return c(new t.DictionaryBatch);case"RecordBatch":return c(new e.RecordBatch);case"Tensor":return c(new r.Tensor);case"SparseTensor":return c(new n.SparseTensor);default:return null}}Ql.unionToMessageHeader=a;function o(l,c,h){switch(s[l]){case"NONE":return null;case"Schema":return c(h,new i.Schema);case"DictionaryBatch":return c(h,new t.DictionaryBatch);case"RecordBatch":return c(h,new e.RecordBatch);case"Tensor":return c(h,new r.Tensor);case"SparseTensor":return c(h,new n.SparseTensor);default:return null}}return Ql.unionListToMessageHeader=o,Ql}var AP;function ir(){return AP||(AP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferType=t.Type=t.MessageHeader=t.IntervalUnit=t.TimeUnit=t.DateUnit=t.Precision=t.UnionMode=t.MetadataVersion=void 0;var e=BE();Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return e.MetadataVersion}});var i=o7();Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return i.UnionMode}});var n=l7();Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return n.Precision}});var r=c7();Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return r.DateUnit}});var s=lT();Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return s.TimeUnit}});var a=u7();Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return a.IntervalUnit}});var o=VE();Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return o.MessageHeader}});var l;(function(h){h[h.NONE=0]="NONE",h[h.Null=1]="Null",h[h.Int=2]="Int",h[h.Float=3]="Float",h[h.Binary=4]="Binary",h[h.Utf8=5]="Utf8",h[h.Bool=6]="Bool",h[h.Decimal=7]="Decimal",h[h.Date=8]="Date",h[h.Time=9]="Time",h[h.Timestamp=10]="Timestamp",h[h.Interval=11]="Interval",h[h.List=12]="List",h[h.Struct=13]="Struct",h[h.Union=14]="Union",h[h.FixedSizeBinary=15]="FixedSizeBinary",h[h.FixedSizeList=16]="FixedSizeList",h[h.Map=17]="Map",h[h.Duration=18]="Duration",h[h.LargeBinary=19]="LargeBinary",h[h.LargeUtf8=20]="LargeUtf8",h[h.Dictionary=-1]="Dictionary",h[h.Int8=-2]="Int8",h[h.Int16=-3]="Int16",h[h.Int32=-4]="Int32",h[h.Int64=-5]="Int64",h[h.Uint8=-6]="Uint8",h[h.Uint16=-7]="Uint16",h[h.Uint32=-8]="Uint32",h[h.Uint64=-9]="Uint64",h[h.Float16=-10]="Float16",h[h.Float32=-11]="Float32",h[h.Float64=-12]="Float64",h[h.DateDay=-13]="DateDay",h[h.DateMillisecond=-14]="DateMillisecond",h[h.TimestampSecond=-15]="TimestampSecond",h[h.TimestampMillisecond=-16]="TimestampMillisecond",h[h.TimestampMicrosecond=-17]="TimestampMicrosecond",h[h.TimestampNanosecond=-18]="TimestampNanosecond",h[h.TimeSecond=-19]="TimeSecond",h[h.TimeMillisecond=-20]="TimeMillisecond",h[h.TimeMicrosecond=-21]="TimeMicrosecond",h[h.TimeNanosecond=-22]="TimeNanosecond",h[h.DenseUnion=-23]="DenseUnion",h[h.SparseUnion=-24]="SparseUnion",h[h.IntervalDayTime=-25]="IntervalDayTime",h[h.IntervalYearMonth=-26]="IntervalYearMonth",h[h.DurationSecond=-27]="DurationSecond",h[h.DurationMillisecond=-28]="DurationMillisecond",h[h.DurationMicrosecond=-29]="DurationMicrosecond",h[h.DurationNanosecond=-30]="DurationNanosecond"})(l||(t.Type=l={}));var c;(function(h){h[h.OFFSET=0]="OFFSET",h[h.DATA=1]="DATA",h[h.VALIDITY=2]="VALIDITY",h[h.TYPE=3]="TYPE"})(c||(t.BufferType=c={}))}(Vw)),Vw}var Jl={},$w={},Iy={},gP;function cT(){if(gP)return Iy;gP=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.valueToString=void 0;const t=void 0;function e(i){if(i===null)return"null";if(i===t)return"undefined";switch(typeof i){case"number":return`${i}`;case"bigint":return`${i}`;case"string":return`"${i}"`}return typeof i[Symbol.toPrimitive]=="function"?i[Symbol.toPrimitive]("string"):ArrayBuffer.isView(i)?i instanceof BigInt64Array||i instanceof BigUint64Array?`[${[...i].map(n=>e(n))}]`:`[${i}]`:ArrayBuffer.isView(i)?`[${i}]`:JSON.stringify(i,(n,r)=>typeof r=="bigint"?`${r}`:r)}return Iy.valueToString=e,Iy}var Ww={},Hw={},bh={},yP;function xf(){if(yP)return bh;yP=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.divideBigInts=bh.bigIntToNumber=void 0;function t(i){if(typeof i=="bigint"&&(i<Number.MIN_SAFE_INTEGER||i>Number.MAX_SAFE_INTEGER))throw new TypeError(`${i} is not safe to convert to a number.`);return Number(i)}bh.bigIntToNumber=t;function e(i,n){return t(i/n)+t(i%n)/t(n)}return bh.divideBigInts=e,bh}var pP;function $E(){return pP||(pP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BN=t.bigNumToBigInt=t.bigNumToString=t.bigNumToNumber=t.isArrowBigNumSymbol=void 0;const e=Gr(),i=xf();t.isArrowBigNumSymbol=Symbol.for("isArrowBigNum");function n(S,...M){return M.length===0?Object.setPrototypeOf((0,e.toArrayBufferView)(this.TypedArray,S),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(S,...M),this.constructor.prototype)}n.prototype[t.isArrowBigNumSymbol]=!0,n.prototype.toJSON=function(){return`"${h(this)}"`},n.prototype.valueOf=function(S){return c(this,S)},n.prototype.toString=function(){return h(this)},n.prototype[Symbol.toPrimitive]=function(S="default"){switch(S){case"number":return c(this);case"string":return h(this);case"default":return A(this)}return h(this)};function r(...S){return n.apply(this,S)}function s(...S){return n.apply(this,S)}function a(...S){return n.apply(this,S)}Object.setPrototypeOf(r.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(s.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(a.prototype,Object.create(Uint32Array.prototype)),Object.assign(r.prototype,n.prototype,{constructor:r,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(s.prototype,n.prototype,{constructor:s,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(a.prototype,n.prototype,{constructor:a,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const l=BigInt(4294967296)*BigInt(4294967296)-BigInt(1);function c(S,M){const{buffer:I,byteOffset:O,byteLength:D,signed:B}=S,P=new BigUint64Array(I,O,D/8),j=B&&P.at(-1)&BigInt(1)<<BigInt(63);let N=BigInt(0),F=0;if(j){for(const $ of P)N|=($^l)*(BigInt(1)<<BigInt(64*F++));N*=BigInt(-1),N-=BigInt(1)}else for(const $ of P)N|=$*(BigInt(1)<<BigInt(64*F++));if(typeof M=="number"){const $=BigInt(Math.pow(10,M)),V=N/$,Z=N%$;return(0,i.bigIntToNumber)(V)+(0,i.bigIntToNumber)(Z)/(0,i.bigIntToNumber)($)}return(0,i.bigIntToNumber)(N)}t.bigNumToNumber=c;function h(S){if(S.byteLength===8)return`${new S.BigIntArray(S.buffer,S.byteOffset,1)[0]}`;if(!S.signed)return m(S);let M=new Uint16Array(S.buffer,S.byteOffset,S.byteLength/2);if(new Int16Array([M.at(-1)])[0]>=0)return m(S);M=M.slice();let O=1;for(let B=0;B<M.length;B++){const P=M[B],j=~P+O;M[B]=j,O&=P===0?1:0}return`-${m(M)}`}t.bigNumToString=h;function A(S){return S.byteLength===8?new S.BigIntArray(S.buffer,S.byteOffset,1)[0]:h(S)}t.bigNumToBigInt=A;function m(S){let M="";const I=new Uint32Array(2);let O=new Uint16Array(S.buffer,S.byteOffset,S.byteLength/2);const D=new Uint32Array((O=new Uint16Array(O).reverse()).buffer);let B=-1;const P=O.length-1;do{for(I[0]=O[B=0];B<P;)O[B++]=I[1]=I[0]/10,I[0]=(I[0]-I[1]*10<<16)+O[B];O[B]=I[1]=I[0]/10,I[0]=I[0]-I[1]*10,M=`${I[0]}${M}`}while(D[0]||D[1]||D[2]||D[3]);return M??"0"}class b{static new(M,I){switch(I){case!0:return new r(M);case!1:return new s(M)}switch(M.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new r(M)}return M.byteLength===16?new a(M):new s(M)}static signed(M){return new r(M)}static unsigned(M){return new s(M)}static decimal(M){return new a(M)}constructor(M,I){return b.new(M,I)}}t.BN=b}(Hw)),Hw}var Ey={},Ae={},mP;function Cn(){if(mP)return Ae;mP=1;var t,e,i,n,r,s,a,o,l,c,h,A,m,b,S,M,I,O,D,B,P,j;Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.Map_=Ae.FixedSizeList=Ae.FixedSizeBinary=Ae.SparseUnion=Ae.DenseUnion=Ae.Union=Ae.Struct=Ae.List=Ae.DurationNanosecond=Ae.DurationMicrosecond=Ae.DurationMillisecond=Ae.DurationSecond=Ae.Duration=Ae.IntervalYearMonth=Ae.IntervalDayTime=Ae.Interval=Ae.TimestampNanosecond=Ae.TimestampMicrosecond=Ae.TimestampMillisecond=Ae.TimestampSecond=Ae.Timestamp=Ae.TimeNanosecond=Ae.TimeMicrosecond=Ae.TimeMillisecond=Ae.TimeSecond=Ae.Time=Ae.DateMillisecond=Ae.DateDay=Ae.Date_=Ae.Decimal=Ae.Bool=Ae.LargeUtf8=Ae.Utf8=Ae.LargeBinary=Ae.Binary=Ae.Float64=Ae.Float32=Ae.Float16=Ae.Float=Ae.Uint64=Ae.Uint32=Ae.Uint16=Ae.Uint8=Ae.Int64=Ae.Int32=Ae.Int16=Ae.Int8=Ae.Int=Ae.Null=Ae.DataType=void 0,Ae.strideForType=Ae.Dictionary=void 0;const N=xf(),F=ir();class ${static isNull(ct){return(ct==null?void 0:ct.typeId)===F.Type.Null}static isInt(ct){return(ct==null?void 0:ct.typeId)===F.Type.Int}static isFloat(ct){return(ct==null?void 0:ct.typeId)===F.Type.Float}static isBinary(ct){return(ct==null?void 0:ct.typeId)===F.Type.Binary}static isLargeBinary(ct){return(ct==null?void 0:ct.typeId)===F.Type.LargeBinary}static isUtf8(ct){return(ct==null?void 0:ct.typeId)===F.Type.Utf8}static isLargeUtf8(ct){return(ct==null?void 0:ct.typeId)===F.Type.LargeUtf8}static isBool(ct){return(ct==null?void 0:ct.typeId)===F.Type.Bool}static isDecimal(ct){return(ct==null?void 0:ct.typeId)===F.Type.Decimal}static isDate(ct){return(ct==null?void 0:ct.typeId)===F.Type.Date}static isTime(ct){return(ct==null?void 0:ct.typeId)===F.Type.Time}static isTimestamp(ct){return(ct==null?void 0:ct.typeId)===F.Type.Timestamp}static isInterval(ct){return(ct==null?void 0:ct.typeId)===F.Type.Interval}static isDuration(ct){return(ct==null?void 0:ct.typeId)===F.Type.Duration}static isList(ct){return(ct==null?void 0:ct.typeId)===F.Type.List}static isStruct(ct){return(ct==null?void 0:ct.typeId)===F.Type.Struct}static isUnion(ct){return(ct==null?void 0:ct.typeId)===F.Type.Union}static isFixedSizeBinary(ct){return(ct==null?void 0:ct.typeId)===F.Type.FixedSizeBinary}static isFixedSizeList(ct){return(ct==null?void 0:ct.typeId)===F.Type.FixedSizeList}static isMap(ct){return(ct==null?void 0:ct.typeId)===F.Type.Map}static isDictionary(ct){return(ct==null?void 0:ct.typeId)===F.Type.Dictionary}static isDenseUnion(ct){return $.isUnion(ct)&&ct.mode===F.UnionMode.Dense}static isSparseUnion(ct){return $.isUnion(ct)&&ct.mode===F.UnionMode.Sparse}constructor(ct){this.typeId=ct}}Ae.DataType=$,t=Symbol.toStringTag,$[t]=(yt=>(yt.children=null,yt.ArrayType=Array,yt.OffsetArrayType=Int32Array,yt[Symbol.toStringTag]="DataType"))($.prototype);class V extends ${constructor(){super(F.Type.Null)}toString(){return"Null"}}Ae.Null=V,e=Symbol.toStringTag,V[e]=(yt=>yt[Symbol.toStringTag]="Null")(V.prototype);class Z extends ${constructor(ct,Mi){super(F.Type.Int),this.isSigned=ct,this.bitWidth=Mi}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Ae.Int=Z,i=Symbol.toStringTag,Z[i]=(yt=>(yt.isSigned=null,yt.bitWidth=null,yt[Symbol.toStringTag]="Int"))(Z.prototype);class nt extends Z{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}Ae.Int8=nt;class X extends Z{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}Ae.Int16=X;class bt extends Z{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Ae.Int32=bt;class Tt extends Z{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}Ae.Int64=Tt;class Ot extends Z{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}Ae.Uint8=Ot;class H extends Z{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}Ae.Uint16=H;class k extends Z{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}Ae.Uint32=k;class G extends Z{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Ae.Uint64=G,Object.defineProperty(nt.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(X.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(bt.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Tt.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(Ot.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(H.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(k.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(G.prototype,"ArrayType",{value:BigUint64Array});class lt extends ${constructor(ct){super(F.Type.Float),this.precision=ct}get ArrayType(){switch(this.precision){case F.Precision.HALF:return Uint16Array;case F.Precision.SINGLE:return Float32Array;case F.Precision.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Ae.Float=lt,n=Symbol.toStringTag,lt[n]=(yt=>(yt.precision=null,yt[Symbol.toStringTag]="Float"))(lt.prototype);class Q extends lt{constructor(){super(F.Precision.HALF)}}Ae.Float16=Q;class mt extends lt{constructor(){super(F.Precision.SINGLE)}}Ae.Float32=mt;class wt extends lt{constructor(){super(F.Precision.DOUBLE)}}Ae.Float64=wt,Object.defineProperty(Q.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(mt.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(wt.prototype,"ArrayType",{value:Float64Array});class Dt extends ${constructor(){super(F.Type.Binary)}toString(){return"Binary"}}Ae.Binary=Dt,r=Symbol.toStringTag,Dt[r]=(yt=>(yt.ArrayType=Uint8Array,yt[Symbol.toStringTag]="Binary"))(Dt.prototype);class te extends ${constructor(){super(F.Type.LargeBinary)}toString(){return"LargeBinary"}}Ae.LargeBinary=te,s=Symbol.toStringTag,te[s]=(yt=>(yt.ArrayType=Uint8Array,yt.OffsetArrayType=BigInt64Array,yt[Symbol.toStringTag]="LargeBinary"))(te.prototype);class ie extends ${constructor(){super(F.Type.Utf8)}toString(){return"Utf8"}}Ae.Utf8=ie,a=Symbol.toStringTag,ie[a]=(yt=>(yt.ArrayType=Uint8Array,yt[Symbol.toStringTag]="Utf8"))(ie.prototype);class ft extends ${constructor(){super(F.Type.LargeUtf8)}toString(){return"LargeUtf8"}}Ae.LargeUtf8=ft,o=Symbol.toStringTag,ft[o]=(yt=>(yt.ArrayType=Uint8Array,yt.OffsetArrayType=BigInt64Array,yt[Symbol.toStringTag]="LargeUtf8"))(ft.prototype);class Ht extends ${constructor(){super(F.Type.Bool)}toString(){return"Bool"}}Ae.Bool=Ht,l=Symbol.toStringTag,Ht[l]=(yt=>(yt.ArrayType=Uint8Array,yt[Symbol.toStringTag]="Bool"))(Ht.prototype);class Nt extends ${constructor(ct,Mi,yn=128){super(F.Type.Decimal),this.scale=ct,this.precision=Mi,this.bitWidth=yn}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Ae.Decimal=Nt,c=Symbol.toStringTag,Nt[c]=(yt=>(yt.scale=null,yt.precision=null,yt.ArrayType=Uint32Array,yt[Symbol.toStringTag]="Decimal"))(Nt.prototype);class he extends ${constructor(ct){super(F.Type.Date),this.unit=ct}toString(){return`Date${(this.unit+1)*32}<${F.DateUnit[this.unit]}>`}get ArrayType(){return this.unit===F.DateUnit.DAY?Int32Array:BigInt64Array}}Ae.Date_=he,h=Symbol.toStringTag,he[h]=(yt=>(yt.unit=null,yt[Symbol.toStringTag]="Date"))(he.prototype);class me extends he{constructor(){super(F.DateUnit.DAY)}}Ae.DateDay=me;class Me extends he{constructor(){super(F.DateUnit.MILLISECOND)}}Ae.DateMillisecond=Me;class pe extends ${constructor(ct,Mi){super(F.Type.Time),this.unit=ct,this.bitWidth=Mi}toString(){return`Time${this.bitWidth}<${F.TimeUnit[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Ae.Time=pe,A=Symbol.toStringTag,pe[A]=(yt=>(yt.unit=null,yt.bitWidth=null,yt[Symbol.toStringTag]="Time"))(pe.prototype);class Oe extends pe{constructor(){super(F.TimeUnit.SECOND,32)}}Ae.TimeSecond=Oe;class Ye extends pe{constructor(){super(F.TimeUnit.MILLISECOND,32)}}Ae.TimeMillisecond=Ye;class Ee extends pe{constructor(){super(F.TimeUnit.MICROSECOND,64)}}Ae.TimeMicrosecond=Ee;class qe extends pe{constructor(){super(F.TimeUnit.NANOSECOND,64)}}Ae.TimeNanosecond=qe;class dt extends ${constructor(ct,Mi){super(F.Type.Timestamp),this.unit=ct,this.timezone=Mi}toString(){return`Timestamp<${F.TimeUnit[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Ae.Timestamp=dt,m=Symbol.toStringTag,dt[m]=(yt=>(yt.unit=null,yt.timezone=null,yt.ArrayType=BigInt64Array,yt[Symbol.toStringTag]="Timestamp"))(dt.prototype);class Y extends dt{constructor(ct){super(F.TimeUnit.SECOND,ct)}}Ae.TimestampSecond=Y;class K extends dt{constructor(ct){super(F.TimeUnit.MILLISECOND,ct)}}Ae.TimestampMillisecond=K;class Ct extends dt{constructor(ct){super(F.TimeUnit.MICROSECOND,ct)}}Ae.TimestampMicrosecond=Ct;class ee extends dt{constructor(ct){super(F.TimeUnit.NANOSECOND,ct)}}Ae.TimestampNanosecond=ee;class Ft extends ${constructor(ct){super(F.Type.Interval),this.unit=ct}toString(){return`Interval<${F.IntervalUnit[this.unit]}>`}}Ae.Interval=Ft,b=Symbol.toStringTag,Ft[b]=(yt=>(yt.unit=null,yt.ArrayType=Int32Array,yt[Symbol.toStringTag]="Interval"))(Ft.prototype);class J extends Ft{constructor(){super(F.IntervalUnit.DAY_TIME)}}Ae.IntervalDayTime=J;class ut extends Ft{constructor(){super(F.IntervalUnit.YEAR_MONTH)}}Ae.IntervalYearMonth=ut;class vt extends ${constructor(ct){super(F.Type.Duration),this.unit=ct}toString(){return`Duration<${F.TimeUnit[this.unit]}>`}}Ae.Duration=vt,S=Symbol.toStringTag,vt[S]=(yt=>(yt.unit=null,yt.ArrayType=BigInt64Array,yt[Symbol.toStringTag]="Duration"))(vt.prototype);class Mt extends vt{constructor(){super(F.TimeUnit.SECOND)}}Ae.DurationSecond=Mt;class re extends vt{constructor(){super(F.TimeUnit.MILLISECOND)}}Ae.DurationMillisecond=re;class be extends vt{constructor(){super(F.TimeUnit.MICROSECOND)}}Ae.DurationMicrosecond=be;class Be extends vt{constructor(){super(F.TimeUnit.NANOSECOND)}}Ae.DurationNanosecond=Be;class q extends ${constructor(ct){super(F.Type.List),this.children=[ct]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Ae.List=q,M=Symbol.toStringTag,q[M]=(yt=>(yt.children=null,yt[Symbol.toStringTag]="List"))(q.prototype);class Bt extends ${constructor(ct){super(F.Type.Struct),this.children=ct}toString(){return`Struct<{${this.children.map(ct=>`${ct.name}:${ct.type}`).join(", ")}}>`}}Ae.Struct=Bt,I=Symbol.toStringTag,Bt[I]=(yt=>(yt.children=null,yt[Symbol.toStringTag]="Struct"))(Bt.prototype);class Xt extends ${constructor(ct,Mi,yn){super(F.Type.Union),this.mode=ct,this.children=yn,this.typeIds=Mi=Int32Array.from(Mi),this.typeIdToChildIndex=Mi.reduce((On,Sr,Kr)=>(On[Sr]=Kr)&&On||On,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(ct=>`${ct.type}`).join(" | ")}>`}}Ae.Union=Xt,O=Symbol.toStringTag,Xt[O]=(yt=>(yt.mode=null,yt.typeIds=null,yt.children=null,yt.typeIdToChildIndex=null,yt.ArrayType=Int8Array,yt[Symbol.toStringTag]="Union"))(Xt.prototype);class ke extends Xt{constructor(ct,Mi){super(F.UnionMode.Dense,ct,Mi)}}Ae.DenseUnion=ke;class qi extends Xt{constructor(ct,Mi){super(F.UnionMode.Sparse,ct,Mi)}}Ae.SparseUnion=qi;class Tn extends ${constructor(ct){super(F.Type.FixedSizeBinary),this.byteWidth=ct}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Ae.FixedSizeBinary=Tn,D=Symbol.toStringTag,Tn[D]=(yt=>(yt.byteWidth=null,yt.ArrayType=Uint8Array,yt[Symbol.toStringTag]="FixedSizeBinary"))(Tn.prototype);class xn extends ${constructor(ct,Mi){super(F.Type.FixedSizeList),this.listSize=ct,this.children=[Mi]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Ae.FixedSizeList=xn,B=Symbol.toStringTag,xn[B]=(yt=>(yt.children=null,yt.listSize=null,yt[Symbol.toStringTag]="FixedSizeList"))(xn.prototype);class os extends ${constructor(ct,Mi=!1){var yn,On,Sr;if(super(F.Type.Map),this.children=[ct],this.keysSorted=Mi,ct&&(ct.name="entries",!((yn=ct==null?void 0:ct.type)===null||yn===void 0)&&yn.children)){const Kr=(On=ct==null?void 0:ct.type)===null||On===void 0?void 0:On.children[0];Kr&&(Kr.name="key");const $s=(Sr=ct==null?void 0:ct.type)===null||Sr===void 0?void 0:Sr.children[1];$s&&($s.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(ct=>`${ct.name}:${ct.type}`).join(", ")}}>`}}Ae.Map_=os,P=Symbol.toStringTag,os[P]=(yt=>(yt.children=null,yt.keysSorted=null,yt[Symbol.toStringTag]="Map_"))(os.prototype);const Ku=(yt=>()=>++yt)(-1);class de extends ${constructor(ct,Mi,yn,On){super(F.Type.Dictionary),this.indices=Mi,this.dictionary=ct,this.isOrdered=On||!1,this.id=yn==null?Ku():(0,N.bigIntToNumber)(yn)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Ae.Dictionary=de,j=Symbol.toStringTag,de[j]=(yt=>(yt.id=null,yt.indices=null,yt.isOrdered=null,yt.dictionary=null,yt[Symbol.toStringTag]="Dictionary"))(de.prototype);function Nc(yt){const ct=yt;switch(yt.typeId){case F.Type.Decimal:return yt.bitWidth/32;case F.Type.Interval:return 1+ct.unit;case F.Type.FixedSizeList:return ct.listSize;case F.Type.FixedSizeBinary:return ct.byteWidth;default:return 1}}return Ae.strideForType=Nc,Ae}var _P;function Ta(){if(_P)return Ey;_P=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.Visitor=void 0;const t=ir(),e=Cn();class i{visitMany(o,...l){return o.map((c,h)=>this.visit(c,...l.map(A=>A[h])))}visit(...o){return this.getVisitFn(o[0],!1).apply(this,o)}getVisitFn(o,l=!0){return n(this,o,l)}getVisitFnByTypeId(o,l=!0){return r(this,o,l)}visitNull(o,...l){return null}visitBool(o,...l){return null}visitInt(o,...l){return null}visitFloat(o,...l){return null}visitUtf8(o,...l){return null}visitLargeUtf8(o,...l){return null}visitBinary(o,...l){return null}visitLargeBinary(o,...l){return null}visitFixedSizeBinary(o,...l){return null}visitDate(o,...l){return null}visitTimestamp(o,...l){return null}visitTime(o,...l){return null}visitDecimal(o,...l){return null}visitList(o,...l){return null}visitStruct(o,...l){return null}visitUnion(o,...l){return null}visitDictionary(o,...l){return null}visitInterval(o,...l){return null}visitDuration(o,...l){return null}visitFixedSizeList(o,...l){return null}visitMap(o,...l){return null}}Ey.Visitor=i;function n(a,o,l=!0){return typeof o=="number"?r(a,o,l):typeof o=="string"&&o in t.Type?r(a,t.Type[o],l):o&&o instanceof e.DataType?r(a,s(o),l):o!=null&&o.type&&o.type instanceof e.DataType?r(a,s(o.type),l):r(a,t.Type.NONE,l)}function r(a,o,l=!0){let c=null;switch(o){case t.Type.Null:c=a.visitNull;break;case t.Type.Bool:c=a.visitBool;break;case t.Type.Int:c=a.visitInt;break;case t.Type.Int8:c=a.visitInt8||a.visitInt;break;case t.Type.Int16:c=a.visitInt16||a.visitInt;break;case t.Type.Int32:c=a.visitInt32||a.visitInt;break;case t.Type.Int64:c=a.visitInt64||a.visitInt;break;case t.Type.Uint8:c=a.visitUint8||a.visitInt;break;case t.Type.Uint16:c=a.visitUint16||a.visitInt;break;case t.Type.Uint32:c=a.visitUint32||a.visitInt;break;case t.Type.Uint64:c=a.visitUint64||a.visitInt;break;case t.Type.Float:c=a.visitFloat;break;case t.Type.Float16:c=a.visitFloat16||a.visitFloat;break;case t.Type.Float32:c=a.visitFloat32||a.visitFloat;break;case t.Type.Float64:c=a.visitFloat64||a.visitFloat;break;case t.Type.Utf8:c=a.visitUtf8;break;case t.Type.LargeUtf8:c=a.visitLargeUtf8;break;case t.Type.Binary:c=a.visitBinary;break;case t.Type.LargeBinary:c=a.visitLargeBinary;break;case t.Type.FixedSizeBinary:c=a.visitFixedSizeBinary;break;case t.Type.Date:c=a.visitDate;break;case t.Type.DateDay:c=a.visitDateDay||a.visitDate;break;case t.Type.DateMillisecond:c=a.visitDateMillisecond||a.visitDate;break;case t.Type.Timestamp:c=a.visitTimestamp;break;case t.Type.TimestampSecond:c=a.visitTimestampSecond||a.visitTimestamp;break;case t.Type.TimestampMillisecond:c=a.visitTimestampMillisecond||a.visitTimestamp;break;case t.Type.TimestampMicrosecond:c=a.visitTimestampMicrosecond||a.visitTimestamp;break;case t.Type.TimestampNanosecond:c=a.visitTimestampNanosecond||a.visitTimestamp;break;case t.Type.Time:c=a.visitTime;break;case t.Type.TimeSecond:c=a.visitTimeSecond||a.visitTime;break;case t.Type.TimeMillisecond:c=a.visitTimeMillisecond||a.visitTime;break;case t.Type.TimeMicrosecond:c=a.visitTimeMicrosecond||a.visitTime;break;case t.Type.TimeNanosecond:c=a.visitTimeNanosecond||a.visitTime;break;case t.Type.Decimal:c=a.visitDecimal;break;case t.Type.List:c=a.visitList;break;case t.Type.Struct:c=a.visitStruct;break;case t.Type.Union:c=a.visitUnion;break;case t.Type.DenseUnion:c=a.visitDenseUnion||a.visitUnion;break;case t.Type.SparseUnion:c=a.visitSparseUnion||a.visitUnion;break;case t.Type.Dictionary:c=a.visitDictionary;break;case t.Type.Interval:c=a.visitInterval;break;case t.Type.IntervalDayTime:c=a.visitIntervalDayTime||a.visitInterval;break;case t.Type.IntervalYearMonth:c=a.visitIntervalYearMonth||a.visitInterval;break;case t.Type.Duration:c=a.visitDuration;break;case t.Type.DurationSecond:c=a.visitDurationSecond||a.visitDuration;break;case t.Type.DurationMillisecond:c=a.visitDurationMillisecond||a.visitDuration;break;case t.Type.DurationMicrosecond:c=a.visitDurationMicrosecond||a.visitDuration;break;case t.Type.DurationNanosecond:c=a.visitDurationNanosecond||a.visitDuration;break;case t.Type.FixedSizeList:c=a.visitFixedSizeList;break;case t.Type.Map:c=a.visitMap;break}if(typeof c=="function")return c;if(!l)return()=>null;throw new Error(`Unrecognized type '${t.Type[o]}'`)}function s(a){switch(a.typeId){case t.Type.Null:return t.Type.Null;case t.Type.Int:{const{bitWidth:o,isSigned:l}=a;switch(o){case 8:return l?t.Type.Int8:t.Type.Uint8;case 16:return l?t.Type.Int16:t.Type.Uint16;case 32:return l?t.Type.Int32:t.Type.Uint32;case 64:return l?t.Type.Int64:t.Type.Uint64}return t.Type.Int}case t.Type.Float:switch(a.precision){case t.Precision.HALF:return t.Type.Float16;case t.Precision.SINGLE:return t.Type.Float32;case t.Precision.DOUBLE:return t.Type.Float64}return t.Type.Float;case t.Type.Binary:return t.Type.Binary;case t.Type.LargeBinary:return t.Type.LargeBinary;case t.Type.Utf8:return t.Type.Utf8;case t.Type.LargeUtf8:return t.Type.LargeUtf8;case t.Type.Bool:return t.Type.Bool;case t.Type.Decimal:return t.Type.Decimal;case t.Type.Time:switch(a.unit){case t.TimeUnit.SECOND:return t.Type.TimeSecond;case t.TimeUnit.MILLISECOND:return t.Type.TimeMillisecond;case t.TimeUnit.MICROSECOND:return t.Type.TimeMicrosecond;case t.TimeUnit.NANOSECOND:return t.Type.TimeNanosecond}return t.Type.Time;case t.Type.Timestamp:switch(a.unit){case t.TimeUnit.SECOND:return t.Type.TimestampSecond;case t.TimeUnit.MILLISECOND:return t.Type.TimestampMillisecond;case t.TimeUnit.MICROSECOND:return t.Type.TimestampMicrosecond;case t.TimeUnit.NANOSECOND:return t.Type.TimestampNanosecond}return t.Type.Timestamp;case t.Type.Date:switch(a.unit){case t.DateUnit.DAY:return t.Type.DateDay;case t.DateUnit.MILLISECOND:return t.Type.DateMillisecond}return t.Type.Date;case t.Type.Interval:switch(a.unit){case t.IntervalUnit.DAY_TIME:return t.Type.IntervalDayTime;case t.IntervalUnit.YEAR_MONTH:return t.Type.IntervalYearMonth}return t.Type.Interval;case t.Type.Duration:switch(a.unit){case t.TimeUnit.SECOND:return t.Type.DurationSecond;case t.TimeUnit.MILLISECOND:return t.Type.DurationMillisecond;case t.TimeUnit.MICROSECOND:return t.Type.DurationMicrosecond;case t.TimeUnit.NANOSECOND:return t.Type.DurationNanosecond}return t.Type.Duration;case t.Type.Map:return t.Type.Map;case t.Type.List:return t.Type.List;case t.Type.Struct:return t.Type.Struct;case t.Type.Union:switch(a.mode){case t.UnionMode.Dense:return t.Type.DenseUnion;case t.UnionMode.Sparse:return t.Type.SparseUnion}return t.Type.Union;case t.Type.FixedSizeBinary:return t.Type.FixedSizeBinary;case t.Type.FixedSizeList:return t.Type.FixedSizeList;case t.Type.Dictionary:return t.Type.Dictionary}throw new Error(`Unrecognized type '${t.Type[a.typeId]}'`)}return i.prototype.visitInt8=null,i.prototype.visitInt16=null,i.prototype.visitInt32=null,i.prototype.visitInt64=null,i.prototype.visitUint8=null,i.prototype.visitUint16=null,i.prototype.visitUint32=null,i.prototype.visitUint64=null,i.prototype.visitFloat16=null,i.prototype.visitFloat32=null,i.prototype.visitFloat64=null,i.prototype.visitDateDay=null,i.prototype.visitDateMillisecond=null,i.prototype.visitTimestampSecond=null,i.prototype.visitTimestampMillisecond=null,i.prototype.visitTimestampMicrosecond=null,i.prototype.visitTimestampNanosecond=null,i.prototype.visitTimeSecond=null,i.prototype.visitTimeMillisecond=null,i.prototype.visitTimeMicrosecond=null,i.prototype.visitTimeNanosecond=null,i.prototype.visitDenseUnion=null,i.prototype.visitSparseUnion=null,i.prototype.visitIntervalDayTime=null,i.prototype.visitIntervalYearMonth=null,i.prototype.visitDuration=null,i.prototype.visitDurationSecond=null,i.prototype.visitDurationMillisecond=null,i.prototype.visitDurationMicrosecond=null,i.prototype.visitDurationNanosecond=null,Ey}var By={},qw={},vh={},bP;function uT(){if(bP)return vh;bP=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.float64ToUint16=vh.uint16ToFloat64=void 0;const t=new Float64Array(1),e=new Uint32Array(t.buffer);function i(r){const s=(r&31744)>>10,a=(r&1023)/1024,o=Math.pow(-1,(r&32768)>>15);switch(s){case 31:return o*(a?Number.NaN:1/0);case 0:return o*(a?6103515625e-14*a:0)}return o*Math.pow(2,s-15)*(1+a)}vh.uint16ToFloat64=i;function n(r){if(r!==r)return 32256;t[0]=r;const s=(e[1]&2147483648)>>16&65535;let a=e[1]&2146435072,o=0;return a>=1089470464?e[0]>0?a=31744:(a=(a&2080374784)>>16,o=(e[1]&1048575)>>10):a<=1056964608?(o=1048576+(e[1]&1048575),o=1048576+(o<<(a>>20)-998)>>21,a=0):(a=a-1056964608>>10,o=(e[1]&1048575)+512>>10),s|a|o&65535}return vh.float64ToUint16=n,vh}var vP;function Xa(){return vP||(vP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.setDuration=t.setDurationNanosecond=t.setDurationMicrosecond=t.setDurationMillisecond=t.setDurationSecond=t.setIntervalYearMonth=t.setIntervalDayTime=t.setIntervalValue=t.setDecimal=t.setTime=t.setTimeNanosecond=t.setTimeMicrosecond=t.setTimeMillisecond=t.setTimeSecond=t.setTimestamp=t.setTimestampNanosecond=t.setTimestampMicrosecond=t.setTimestampMillisecond=t.setTimestampSecond=t.setDate=t.setFixedSizeBinary=t.setDateMillisecond=t.setDateDay=t.setAnyFloat=t.setFloat16=t.setFloat=t.setInt=t.setVariableWidthBytes=t.setEpochMsToDays=t.SetVisitor=void 0;const e=js(),i=Ta(),n=xf(),r=Rf(),s=uT(),a=ir();class o extends i.Visitor{}t.SetVisitor=o;function l(dt){return(Y,K,Ct)=>{if(Y.setValid(K,Ct!=null))return dt(Y,K,Ct)}}const c=(dt,Y,K)=>{dt[Y]=Math.floor(K/864e5)};t.setEpochMsToDays=c;const h=(dt,Y,K,Ct)=>{if(K+1<Y.length){const ee=(0,n.bigIntToNumber)(Y[K]),Ft=(0,n.bigIntToNumber)(Y[K+1]);dt.set(Ct.subarray(0,Ft-ee),ee)}};t.setVariableWidthBytes=h;const A=({offset:dt,values:Y},K,Ct)=>{const ee=dt+K;Ct?Y[ee>>3]|=1<<ee%8:Y[ee>>3]&=~(1<<ee%8)},m=({values:dt},Y,K)=>{dt[Y]=K};t.setInt=m;const b=({values:dt},Y,K)=>{dt[Y]=K};t.setFloat=b;const S=({values:dt},Y,K)=>{dt[Y]=(0,s.float64ToUint16)(K)};t.setFloat16=S;const M=(dt,Y,K)=>{switch(dt.type.precision){case a.Precision.HALF:return(0,t.setFloat16)(dt,Y,K);case a.Precision.SINGLE:case a.Precision.DOUBLE:return(0,t.setFloat)(dt,Y,K)}};t.setAnyFloat=M;const I=({values:dt},Y,K)=>{(0,t.setEpochMsToDays)(dt,Y,K.valueOf())};t.setDateDay=I;const O=({values:dt},Y,K)=>{dt[Y]=BigInt(K)};t.setDateMillisecond=O;const D=({stride:dt,values:Y},K,Ct)=>{Y.set(Ct.subarray(0,dt),dt*K)};t.setFixedSizeBinary=D;const B=({values:dt,valueOffsets:Y},K,Ct)=>(0,t.setVariableWidthBytes)(dt,Y,K,Ct),P=({values:dt,valueOffsets:Y},K,Ct)=>(0,t.setVariableWidthBytes)(dt,Y,K,(0,r.encodeUtf8)(Ct)),j=(dt,Y,K)=>{dt.type.unit===a.DateUnit.DAY?(0,t.setDateDay)(dt,Y,K):(0,t.setDateMillisecond)(dt,Y,K)};t.setDate=j;const N=({values:dt},Y,K)=>{dt[Y]=BigInt(K/1e3)};t.setTimestampSecond=N;const F=({values:dt},Y,K)=>{dt[Y]=BigInt(K)};t.setTimestampMillisecond=F;const $=({values:dt},Y,K)=>{dt[Y]=BigInt(K*1e3)};t.setTimestampMicrosecond=$;const V=({values:dt},Y,K)=>{dt[Y]=BigInt(K*1e6)};t.setTimestampNanosecond=V;const Z=(dt,Y,K)=>{switch(dt.type.unit){case a.TimeUnit.SECOND:return(0,t.setTimestampSecond)(dt,Y,K);case a.TimeUnit.MILLISECOND:return(0,t.setTimestampMillisecond)(dt,Y,K);case a.TimeUnit.MICROSECOND:return(0,t.setTimestampMicrosecond)(dt,Y,K);case a.TimeUnit.NANOSECOND:return(0,t.setTimestampNanosecond)(dt,Y,K)}};t.setTimestamp=Z;const nt=({values:dt},Y,K)=>{dt[Y]=K};t.setTimeSecond=nt;const X=({values:dt},Y,K)=>{dt[Y]=K};t.setTimeMillisecond=X;const bt=({values:dt},Y,K)=>{dt[Y]=K};t.setTimeMicrosecond=bt;const Tt=({values:dt},Y,K)=>{dt[Y]=K};t.setTimeNanosecond=Tt;const Ot=(dt,Y,K)=>{switch(dt.type.unit){case a.TimeUnit.SECOND:return(0,t.setTimeSecond)(dt,Y,K);case a.TimeUnit.MILLISECOND:return(0,t.setTimeMillisecond)(dt,Y,K);case a.TimeUnit.MICROSECOND:return(0,t.setTimeMicrosecond)(dt,Y,K);case a.TimeUnit.NANOSECOND:return(0,t.setTimeNanosecond)(dt,Y,K)}};t.setTime=Ot;const H=({values:dt,stride:Y},K,Ct)=>{dt.set(Ct.subarray(0,Y),Y*K)};t.setDecimal=H;const k=(dt,Y,K)=>{const Ct=dt.children[0],ee=dt.valueOffsets,Ft=t.instance.getVisitFn(Ct);if(Array.isArray(K))for(let J=-1,ut=ee[Y],vt=ee[Y+1];ut<vt;)Ft(Ct,ut++,K[++J]);else for(let J=-1,ut=ee[Y],vt=ee[Y+1];ut<vt;)Ft(Ct,ut++,K.get(++J))},G=(dt,Y,K)=>{const Ct=dt.children[0],{valueOffsets:ee}=dt,Ft=t.instance.getVisitFn(Ct);let{[Y]:J,[Y+1]:ut}=ee;const vt=K instanceof Map?K.entries():Object.entries(K);for(const Mt of vt)if(Ft(Ct,J,Mt),++J>=ut)break},lt=(dt,Y)=>(K,Ct,ee,Ft)=>Ct&&K(Ct,dt,Y[Ft]),Q=(dt,Y)=>(K,Ct,ee,Ft)=>Ct&&K(Ct,dt,Y.get(Ft)),mt=(dt,Y)=>(K,Ct,ee,Ft)=>Ct&&K(Ct,dt,Y.get(ee.name)),wt=(dt,Y)=>(K,Ct,ee,Ft)=>Ct&&K(Ct,dt,Y[ee.name]),Dt=(dt,Y,K)=>{const Ct=dt.type.children.map(Ft=>t.instance.getVisitFn(Ft.type)),ee=K instanceof Map?mt(Y,K):K instanceof e.Vector?Q(Y,K):Array.isArray(K)?lt(Y,K):wt(Y,K);dt.type.children.forEach((Ft,J)=>ee(Ct[J],dt.children[J],Ft,J))},te=(dt,Y,K)=>{dt.type.mode===a.UnionMode.Dense?ie(dt,Y,K):ft(dt,Y,K)},ie=(dt,Y,K)=>{const Ct=dt.type.typeIdToChildIndex[dt.typeIds[Y]],ee=dt.children[Ct];t.instance.visit(ee,dt.valueOffsets[Y],K)},ft=(dt,Y,K)=>{const Ct=dt.type.typeIdToChildIndex[dt.typeIds[Y]],ee=dt.children[Ct];t.instance.visit(ee,Y,K)},Ht=(dt,Y,K)=>{var Ct;(Ct=dt.dictionary)===null||Ct===void 0||Ct.set(dt.values[Y],K)},Nt=(dt,Y,K)=>{dt.type.unit===a.IntervalUnit.DAY_TIME?(0,t.setIntervalDayTime)(dt,Y,K):(0,t.setIntervalYearMonth)(dt,Y,K)};t.setIntervalValue=Nt;const he=({values:dt},Y,K)=>{dt.set(K.subarray(0,2),2*Y)};t.setIntervalDayTime=he;const me=({values:dt},Y,K)=>{dt[Y]=K[0]*12+K[1]%12};t.setIntervalYearMonth=me;const Me=({values:dt},Y,K)=>{dt[Y]=K};t.setDurationSecond=Me;const pe=({values:dt},Y,K)=>{dt[Y]=K};t.setDurationMillisecond=pe;const Oe=({values:dt},Y,K)=>{dt[Y]=K};t.setDurationMicrosecond=Oe;const Ye=({values:dt},Y,K)=>{dt[Y]=K};t.setDurationNanosecond=Ye;const Ee=(dt,Y,K)=>{switch(dt.type.unit){case a.TimeUnit.SECOND:return(0,t.setDurationSecond)(dt,Y,K);case a.TimeUnit.MILLISECOND:return(0,t.setDurationMillisecond)(dt,Y,K);case a.TimeUnit.MICROSECOND:return(0,t.setDurationMicrosecond)(dt,Y,K);case a.TimeUnit.NANOSECOND:return(0,t.setDurationNanosecond)(dt,Y,K)}};t.setDuration=Ee;const qe=(dt,Y,K)=>{const{stride:Ct}=dt,ee=dt.children[0],Ft=t.instance.getVisitFn(ee);if(Array.isArray(K))for(let J=-1,ut=Y*Ct;++J<Ct;)Ft(ee,ut+J,K[J]);else for(let J=-1,ut=Y*Ct;++J<Ct;)Ft(ee,ut+J,K.get(J))};o.prototype.visitBool=l(A),o.prototype.visitInt=l(t.setInt),o.prototype.visitInt8=l(t.setInt),o.prototype.visitInt16=l(t.setInt),o.prototype.visitInt32=l(t.setInt),o.prototype.visitInt64=l(t.setInt),o.prototype.visitUint8=l(t.setInt),o.prototype.visitUint16=l(t.setInt),o.prototype.visitUint32=l(t.setInt),o.prototype.visitUint64=l(t.setInt),o.prototype.visitFloat=l(t.setAnyFloat),o.prototype.visitFloat16=l(t.setFloat16),o.prototype.visitFloat32=l(t.setFloat),o.prototype.visitFloat64=l(t.setFloat),o.prototype.visitUtf8=l(P),o.prototype.visitLargeUtf8=l(P),o.prototype.visitBinary=l(B),o.prototype.visitLargeBinary=l(B),o.prototype.visitFixedSizeBinary=l(t.setFixedSizeBinary),o.prototype.visitDate=l(t.setDate),o.prototype.visitDateDay=l(t.setDateDay),o.prototype.visitDateMillisecond=l(t.setDateMillisecond),o.prototype.visitTimestamp=l(t.setTimestamp),o.prototype.visitTimestampSecond=l(t.setTimestampSecond),o.prototype.visitTimestampMillisecond=l(t.setTimestampMillisecond),o.prototype.visitTimestampMicrosecond=l(t.setTimestampMicrosecond),o.prototype.visitTimestampNanosecond=l(t.setTimestampNanosecond),o.prototype.visitTime=l(t.setTime),o.prototype.visitTimeSecond=l(t.setTimeSecond),o.prototype.visitTimeMillisecond=l(t.setTimeMillisecond),o.prototype.visitTimeMicrosecond=l(t.setTimeMicrosecond),o.prototype.visitTimeNanosecond=l(t.setTimeNanosecond),o.prototype.visitDecimal=l(t.setDecimal),o.prototype.visitList=l(k),o.prototype.visitStruct=l(Dt),o.prototype.visitUnion=l(te),o.prototype.visitDenseUnion=l(ie),o.prototype.visitSparseUnion=l(ft),o.prototype.visitDictionary=l(Ht),o.prototype.visitInterval=l(t.setIntervalValue),o.prototype.visitIntervalDayTime=l(t.setIntervalDayTime),o.prototype.visitIntervalYearMonth=l(t.setIntervalYearMonth),o.prototype.visitDuration=l(t.setDuration),o.prototype.visitDurationSecond=l(t.setDurationSecond),o.prototype.visitDurationMillisecond=l(t.setDurationMillisecond),o.prototype.visitDurationMicrosecond=l(t.setDurationMicrosecond),o.prototype.visitDurationNanosecond=l(t.setDurationNanosecond),o.prototype.visitFixedSizeList=l(qe),o.prototype.visitMap=l(G),t.instance=new o}(qw)),qw}var TP;function WE(){if(TP)return By;TP=1,Object.defineProperty(By,"__esModule",{value:!0}),By.StructRow=void 0;const t=cT(),e=u0(),i=Xa(),n=Symbol.for("parent"),r=Symbol.for("rowIndex");class s{constructor(c,h){return this[n]=c,this[r]=h,new Proxy(this,new o)}toArray(){return Object.values(this.toJSON())}toJSON(){const c=this[r],h=this[n],A=h.type.children,m={};for(let b=-1,S=A.length;++b<S;)m[A[b].name]=e.instance.visit(h.children[b],c);return m}toString(){return`{${[...this].map(([c,h])=>`${(0,t.valueToString)(c)}: ${(0,t.valueToString)(h)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new a(this[n],this[r])}}By.StructRow=s;class a{constructor(c,h){this.childIndex=0,this.children=c.children,this.rowIndex=h,this.childFields=c.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const c=this.childIndex;return c<this.numChildren?(this.childIndex=c+1,{done:!1,value:[this.childFields[c].name,e.instance.visit(this.children[c],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[n]:{writable:!0,enumerable:!1,configurable:!1,value:null},[r]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class o{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(c){return c[n].type.children.map(h=>h.name)}has(c,h){return c[n].type.children.findIndex(A=>A.name===h)!==-1}getOwnPropertyDescriptor(c,h){if(c[n].type.children.findIndex(A=>A.name===h)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(c,h){if(Reflect.has(c,h))return c[h];const A=c[n].type.children.findIndex(m=>m.name===h);if(A!==-1){const m=e.instance.visit(c[n].children[A],c[r]);return Reflect.set(c,h,m),m}}set(c,h,A){const m=c[n].type.children.findIndex(b=>b.name===h);return m!==-1?(i.instance.visit(c[n].children[m],c[r],A),Reflect.set(c,h,A)):Reflect.has(c,h)||typeof h=="symbol"?Reflect.set(c,h,A):!1}}return By}var SP;function u0(){return SP||(SP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.GetVisitor=void 0;const e=$E(),i=js(),n=Ta(),r=hT(),s=WE(),a=xf(),o=Rf(),l=uT(),c=ir();class h extends n.Visitor{}t.GetVisitor=h;function A(Y){return(K,Ct)=>K.getValid(Ct)?Y(K,Ct):null}const m=(Y,K)=>864e5*Y[K],b=(Y,K)=>null,S=(Y,K,Ct)=>{if(Ct+1>=K.length)return null;const ee=(0,a.bigIntToNumber)(K[Ct]),Ft=(0,a.bigIntToNumber)(K[Ct+1]);return Y.subarray(ee,Ft)},M=({offset:Y,values:K},Ct)=>{const ee=Y+Ct;return(K[ee>>3]&1<<ee%8)!==0},I=({values:Y},K)=>m(Y,K),O=({values:Y},K)=>(0,a.bigIntToNumber)(Y[K]),D=({stride:Y,values:K},Ct)=>K[Y*Ct],B=({stride:Y,values:K},Ct)=>(0,l.uint16ToFloat64)(K[Y*Ct]),P=({values:Y},K)=>Y[K],j=({stride:Y,values:K},Ct)=>K.subarray(Y*Ct,Y*(Ct+1)),N=({values:Y,valueOffsets:K},Ct)=>S(Y,K,Ct),F=({values:Y,valueOffsets:K},Ct)=>{const ee=S(Y,K,Ct);return ee!==null?(0,o.decodeUtf8)(ee):null},$=({values:Y},K)=>Y[K],V=({type:Y,values:K},Ct)=>Y.precision!==c.Precision.HALF?K[Ct]:(0,l.uint16ToFloat64)(K[Ct]),Z=(Y,K)=>Y.type.unit===c.DateUnit.DAY?I(Y,K):O(Y,K),nt=({values:Y},K)=>1e3*(0,a.bigIntToNumber)(Y[K]),X=({values:Y},K)=>(0,a.bigIntToNumber)(Y[K]),bt=({values:Y},K)=>(0,a.divideBigInts)(Y[K],BigInt(1e3)),Tt=({values:Y},K)=>(0,a.divideBigInts)(Y[K],BigInt(1e6)),Ot=(Y,K)=>{switch(Y.type.unit){case c.TimeUnit.SECOND:return nt(Y,K);case c.TimeUnit.MILLISECOND:return X(Y,K);case c.TimeUnit.MICROSECOND:return bt(Y,K);case c.TimeUnit.NANOSECOND:return Tt(Y,K)}},H=({values:Y},K)=>Y[K],k=({values:Y},K)=>Y[K],G=({values:Y},K)=>Y[K],lt=({values:Y},K)=>Y[K],Q=(Y,K)=>{switch(Y.type.unit){case c.TimeUnit.SECOND:return H(Y,K);case c.TimeUnit.MILLISECOND:return k(Y,K);case c.TimeUnit.MICROSECOND:return G(Y,K);case c.TimeUnit.NANOSECOND:return lt(Y,K)}},mt=({values:Y,stride:K},Ct)=>e.BN.decimal(Y.subarray(K*Ct,K*(Ct+1))),wt=(Y,K)=>{const{valueOffsets:Ct,stride:ee,children:Ft}=Y,{[K*ee]:J,[K*ee+1]:ut}=Ct,Mt=Ft[0].slice(J,ut-J);return new i.Vector([Mt])},Dt=(Y,K)=>{const{valueOffsets:Ct,children:ee}=Y,{[K]:Ft,[K+1]:J}=Ct,ut=ee[0];return new r.MapRow(ut.slice(Ft,J-Ft))},te=(Y,K)=>new s.StructRow(Y,K),ie=(Y,K)=>Y.type.mode===c.UnionMode.Dense?ft(Y,K):Ht(Y,K),ft=(Y,K)=>{const Ct=Y.type.typeIdToChildIndex[Y.typeIds[K]],ee=Y.children[Ct];return t.instance.visit(ee,Y.valueOffsets[K])},Ht=(Y,K)=>{const Ct=Y.type.typeIdToChildIndex[Y.typeIds[K]],ee=Y.children[Ct];return t.instance.visit(ee,K)},Nt=(Y,K)=>{var Ct;return(Ct=Y.dictionary)===null||Ct===void 0?void 0:Ct.get(Y.values[K])},he=(Y,K)=>Y.type.unit===c.IntervalUnit.DAY_TIME?me(Y,K):Me(Y,K),me=({values:Y},K)=>Y.subarray(2*K,2*(K+1)),Me=({values:Y},K)=>{const Ct=Y[K],ee=new Int32Array(2);return ee[0]=Math.trunc(Ct/12),ee[1]=Math.trunc(Ct%12),ee},pe=({values:Y},K)=>Y[K],Oe=({values:Y},K)=>Y[K],Ye=({values:Y},K)=>Y[K],Ee=({values:Y},K)=>Y[K],qe=(Y,K)=>{switch(Y.type.unit){case c.TimeUnit.SECOND:return pe(Y,K);case c.TimeUnit.MILLISECOND:return Oe(Y,K);case c.TimeUnit.MICROSECOND:return Ye(Y,K);case c.TimeUnit.NANOSECOND:return Ee(Y,K)}},dt=(Y,K)=>{const{stride:Ct,children:ee}=Y,J=ee[0].slice(K*Ct,Ct);return new i.Vector([J])};h.prototype.visitNull=A(b),h.prototype.visitBool=A(M),h.prototype.visitInt=A($),h.prototype.visitInt8=A(D),h.prototype.visitInt16=A(D),h.prototype.visitInt32=A(D),h.prototype.visitInt64=A(P),h.prototype.visitUint8=A(D),h.prototype.visitUint16=A(D),h.prototype.visitUint32=A(D),h.prototype.visitUint64=A(P),h.prototype.visitFloat=A(V),h.prototype.visitFloat16=A(B),h.prototype.visitFloat32=A(D),h.prototype.visitFloat64=A(D),h.prototype.visitUtf8=A(F),h.prototype.visitLargeUtf8=A(F),h.prototype.visitBinary=A(N),h.prototype.visitLargeBinary=A(N),h.prototype.visitFixedSizeBinary=A(j),h.prototype.visitDate=A(Z),h.prototype.visitDateDay=A(I),h.prototype.visitDateMillisecond=A(O),h.prototype.visitTimestamp=A(Ot),h.prototype.visitTimestampSecond=A(nt),h.prototype.visitTimestampMillisecond=A(X),h.prototype.visitTimestampMicrosecond=A(bt),h.prototype.visitTimestampNanosecond=A(Tt),h.prototype.visitTime=A(Q),h.prototype.visitTimeSecond=A(H),h.prototype.visitTimeMillisecond=A(k),h.prototype.visitTimeMicrosecond=A(G),h.prototype.visitTimeNanosecond=A(lt),h.prototype.visitDecimal=A(mt),h.prototype.visitList=A(wt),h.prototype.visitStruct=A(te),h.prototype.visitUnion=A(ie),h.prototype.visitDenseUnion=A(ft),h.prototype.visitSparseUnion=A(Ht),h.prototype.visitDictionary=A(Nt),h.prototype.visitInterval=A(he),h.prototype.visitIntervalDayTime=A(me),h.prototype.visitIntervalYearMonth=A(Me),h.prototype.visitDuration=A(qe),h.prototype.visitDurationSecond=A(pe),h.prototype.visitDurationMillisecond=A(Oe),h.prototype.visitDurationMicrosecond=A(Ye),h.prototype.visitDurationNanosecond=A(Ee),h.prototype.visitFixedSizeList=A(dt),h.prototype.visitMap=A(Dt),t.instance=new h}(Ww)),Ww}var wP;function hT(){return wP||(wP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MapRow=t._kKeysAsStrings=t.kKeysAsStrings=t.kVals=t.kKeys=void 0;const e=js(),i=cT(),n=u0(),r=Xa();t.kKeys=Symbol.for("keys"),t.kVals=Symbol.for("vals"),t.kKeysAsStrings=Symbol.for("kKeysAsStrings"),t._kKeysAsStrings=Symbol.for("_kKeysAsStrings");class s{constructor(c){return this[t.kKeys]=new e.Vector([c.children[0]]).memoize(),this[t.kVals]=c.children[1],new Proxy(this,new o)}get[t.kKeysAsStrings](){return this[t._kKeysAsStrings]||(this[t._kKeysAsStrings]=Array.from(this[t.kKeys].toArray(),String))}[Symbol.iterator](){return new a(this[t.kKeys],this[t.kVals])}get size(){return this[t.kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const c=this[t.kKeys],h=this[t.kVals],A={};for(let m=-1,b=c.length;++m<b;)A[c.get(m)]=n.instance.visit(h,m);return A}toString(){return`{${[...this].map(([c,h])=>`${(0,i.valueToString)(c)}: ${(0,i.valueToString)(h)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}t.MapRow=s;class a{constructor(c,h){this.keys=c,this.vals=h,this.keyIndex=0,this.numKeys=c.length}[Symbol.iterator](){return this}next(){const c=this.keyIndex;return c===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(c),n.instance.visit(this.vals,c)]})}}class o{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(c){return c[t.kKeysAsStrings]}has(c,h){return c[t.kKeysAsStrings].includes(h)}getOwnPropertyDescriptor(c,h){if(c[t.kKeysAsStrings].indexOf(h)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(c,h){if(Reflect.has(c,h))return c[h];const A=c[t.kKeysAsStrings].indexOf(h);if(A!==-1){const m=n.instance.visit(Reflect.get(c,t.kVals),A);return Reflect.set(c,h,m),m}}set(c,h,A){const m=c[t.kKeysAsStrings].indexOf(h);return m!==-1?(r.instance.visit(Reflect.get(c,t.kVals),m,A),Reflect.set(c,h,A)):Reflect.has(c,h)?Reflect.set(c,h,A):!1}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[t.kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[t.kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null},[t._kKeysAsStrings]:{writable:!0,enumerable:!1,configurable:!1,value:null}})}($w)),$w}var MP;function X_(){if(MP)return Jl;MP=1,Object.defineProperty(Jl,"__esModule",{value:!0}),Jl.createElementComparator=Jl.wrapIndex=Jl.clampRange=void 0;const t=js(),e=hT(),i=WE(),n=Gr();let r;function s(O,D,B,P){const{length:j=0}=O;let N=typeof D!="number"?0:D,F=typeof B!="number"?j:B;return N<0&&(N=(N%j+j)%j),F<0&&(F=(F%j+j)%j),F<N&&(r=N,N=F,F=r),F>j&&(F=j),P?P(O,N,F):[N,F]}Jl.clampRange=s;const a=(O,D)=>O<0?D+O:O;Jl.wrapIndex=a;const o=O=>O!==O;function l(O){if(typeof O!=="object"||O===null)return o(O)?o:B=>B===O;if(O instanceof Date){const B=O.valueOf();return P=>P instanceof Date?P.valueOf()===B:!1}return ArrayBuffer.isView(O)?B=>B?(0,n.compareArrayLike)(O,B):!1:O instanceof Map?h(O):Array.isArray(O)?c(O):O instanceof t.Vector?A(O):m(O,!0)}Jl.createElementComparator=l;function c(O){const D=[];for(let B=-1,P=O.length;++B<P;)D[B]=l(O[B]);return b(D)}function h(O){let D=-1;const B=[];for(const P of O.values())B[++D]=l(P);return b(B)}function A(O){const D=[];for(let B=-1,P=O.length;++B<P;)D[B]=l(O.get(B));return b(D)}function m(O,D=!1){const B=Object.keys(O);if(!D&&B.length===0)return()=>!1;const P=[];for(let j=-1,N=B.length;++j<N;)P[j]=l(O[B[j]]);return b(P,B)}function b(O,D){return B=>{if(!B||typeof B!="object")return!1;switch(B.constructor){case Array:return S(O,B);case Map:return I(O,B,B.keys());case e.MapRow:case i.StructRow:case Object:case void 0:return I(O,B,D||Object.keys(B))}return B instanceof t.Vector?M(O,B):!1}}function S(O,D){const B=O.length;if(D.length!==B)return!1;for(let P=-1;++P<B;)if(!O[P](D[P]))return!1;return!0}function M(O,D){const B=O.length;if(D.length!==B)return!1;for(let P=-1;++P<B;)if(!O[P](D.get(P)))return!1;return!0}function I(O,D,B){const P=B[Symbol.iterator](),j=D instanceof Map?D.keys():Object.keys(D)[Symbol.iterator](),N=D instanceof Map?D.values():Object.values(D)[Symbol.iterator]();let F=0;const $=O.length;let V=N.next(),Z=P.next(),nt=j.next();for(;F<$&&!Z.done&&!nt.done&&!V.done&&!(Z.value!==nt.value||!O[F](V.value));++F,Z=P.next(),nt=j.next(),V=N.next());return F===$&&Z.done&&nt.done&&V.done?!0:(P.return&&P.return(),j.return&&j.return(),N.return&&N.return(),!1)}return Jl}var Yw={},ar={},IP;function h0(){if(IP)return ar;IP=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.popcnt_uint32=ar.popcnt_array=ar.popcnt_bit_range=ar.BitIterator=ar.packBools=ar.truncateBitmap=ar.setBool=ar.getBit=ar.getBool=void 0;function t(c,h,A,m){return(A&1<<m)!==0}ar.getBool=t;function e(c,h,A,m){return(A&1<<m)>>m}ar.getBit=e;function i(c,h,A){return A?!!(c[h>>3]|=1<<h%8)||!0:!(c[h>>3]&=~(1<<h%8))&&!1}ar.setBool=i;function n(c,h,A){const m=A.byteLength+7&-8;if(c>0||A.byteLength<m){const b=new Uint8Array(m);return b.set(c%8===0?A.subarray(c>>3):r(new s(A,c,h,null,t)).subarray(0,m)),b}return A}ar.truncateBitmap=n;function r(c){const h=[];let A=0,m=0,b=0;for(const M of c)M&&(b|=1<<m),++m===8&&(h[A++]=b,b=m=0);(A===0||m>0)&&(h[A++]=b);const S=new Uint8Array(h.length+7&-8);return S.set(h),S}ar.packBools=r;class s{constructor(h,A,m,b,S){this.bytes=h,this.length=m,this.context=b,this.get=S,this.bit=A%8,this.byteIndex=A>>3,this.byte=h[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}ar.BitIterator=s;function a(c,h,A){if(A-h<=0)return 0;if(A-h<8){let S=0;for(const M of new s(c,h,A-h,c,e))S+=M;return S}const m=A>>3<<3,b=h+(h%8===0?0:8-h%8);return a(c,h,b)+a(c,m,A)+o(c,b>>3,m-b>>3)}ar.popcnt_bit_range=a;function o(c,h,A){let m=0,b=Math.trunc(h);const S=new DataView(c.buffer,c.byteOffset,c.byteLength),M=A===void 0?c.byteLength:b+A;for(;M-b>=4;)m+=l(S.getUint32(b)),b+=4;for(;M-b>=2;)m+=l(S.getUint16(b)),b+=2;for(;M-b>=1;)m+=l(S.getUint8(b)),b+=1;return m}ar.popcnt_array=o;function l(c){let h=Math.trunc(c);return h=h-(h>>>1&1431655765),h=(h&858993459)+(h>>>2&858993459),(h+(h>>>4)&252645135)*16843009>>>24}return ar.popcnt_uint32=l,ar}var EP;function Rc(){return EP||(EP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeData=t.Data=t.kUnknownNullCount=void 0;const e=js(),i=ir(),n=Cn(),r=h0();t.kUnknownNullCount=-1;class s{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:m}=this;return n.DataType.isSparseUnion(m)?this.children.some(b=>b.nullable):n.DataType.isDenseUnion(m)?this.children.some(b=>b.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let m=0;const{valueOffsets:b,values:S,nullBitmap:M,typeIds:I}=this;return b&&(m+=b.byteLength),S&&(m+=S.byteLength),M&&(m+=M.byteLength),I&&(m+=I.byteLength),this.children.reduce((O,D)=>O+D.byteLength,m)}get nullCount(){if(n.DataType.isUnion(this.type))return this.children.reduce((S,M)=>S+M.nullCount,0);let m=this._nullCount,b;return m<=t.kUnknownNullCount&&(b=this.nullBitmap)&&(this._nullCount=m=b.length===0?0:this.length-(0,r.popcnt_bit_range)(b,this.offset,this.offset+this.length)),m}constructor(m,b,S,M,I,O=[],D){this.type=m,this.children=O,this.dictionary=D,this.offset=Math.floor(Math.max(b||0,0)),this.length=Math.floor(Math.max(S||0,0)),this._nullCount=Math.floor(Math.max(M||0,-1));let B;I instanceof s?(this.stride=I.stride,this.values=I.values,this.typeIds=I.typeIds,this.nullBitmap=I.nullBitmap,this.valueOffsets=I.valueOffsets):(this.stride=(0,n.strideForType)(m),I&&((B=I[0])&&(this.valueOffsets=B),(B=I[1])&&(this.values=B),(B=I[2])&&(this.nullBitmap=B),(B=I[3])&&(this.typeIds=B)))}getValid(m){const{type:b}=this;if(n.DataType.isUnion(b)){const S=b,M=this.children[S.typeIdToChildIndex[this.typeIds[m]]],I=S.mode===i.UnionMode.Dense?this.valueOffsets[m]:m;return M.getValid(I)}if(this.nullable&&this.nullCount>0){const S=this.offset+m;return(this.nullBitmap[S>>3]&1<<S%8)!==0}return!0}setValid(m,b){let S;const{type:M}=this;if(n.DataType.isUnion(M)){const I=M,O=this.children[I.typeIdToChildIndex[this.typeIds[m]]],D=I.mode===i.UnionMode.Dense?this.valueOffsets[m]:m;S=O.getValid(D),O.setValid(D,b)}else{let{nullBitmap:I}=this;const{offset:O,length:D}=this,B=O+m,P=1<<B%8,j=B>>3;(!I||I.byteLength<=j)&&(I=new Uint8Array((O+D+63&-64)>>3).fill(255),this.nullCount>0?(I.set((0,r.truncateBitmap)(O,D,this.nullBitmap),0),Object.assign(this,{nullBitmap:I})):Object.assign(this,{nullBitmap:I,_nullCount:0}));const N=I[j];S=(N&P)!==0,I[j]=b?N|P:N&~P}return S!==!!b&&(this._nullCount=this.nullCount+(b?-1:1)),b}clone(m=this.type,b=this.offset,S=this.length,M=this._nullCount,I=this,O=this.children){return new s(m,b,S,M,I,O,this.dictionary)}slice(m,b){const{stride:S,typeId:M,children:I}=this,O=+(this._nullCount===0)-1,D=M===16?S:1,B=this._sliceBuffers(m,b,S,M);return this.clone(this.type,this.offset+m,b,O,B,I.length===0||this.valueOffsets?I:this._sliceChildren(I,D*m,D*b))}_changeLengthAndBackfillNullBitmap(m){if(this.typeId===i.Type.Null)return this.clone(this.type,0,m,0);const{length:b,nullCount:S}=this,M=new Uint8Array((m+63&-64)>>3).fill(255,0,b>>3);M[b>>3]=(1<<b-(b&-8))-1,S>0&&M.set((0,r.truncateBitmap)(this.offset,b,this.nullBitmap),0);const I=this.buffers;return I[i.BufferType.VALIDITY]=M,this.clone(this.type,0,m,S+(m-b),I)}_sliceBuffers(m,b,S,M){let I;const{buffers:O}=this;return(I=O[i.BufferType.TYPE])&&(O[i.BufferType.TYPE]=I.subarray(m,m+b)),(I=O[i.BufferType.OFFSET])&&(O[i.BufferType.OFFSET]=I.subarray(m,m+b+1))||(I=O[i.BufferType.DATA])&&(O[i.BufferType.DATA]=M===6?I:I.subarray(S*m,S*(m+b))),O}_sliceChildren(m,b,S){return m.map(M=>M.slice(b,S))}}t.Data=s,s.prototype.children=Object.freeze([]);const a=Ta(),o=Gr();class l extends a.Visitor{visit(m){return this.getVisitFn(m.type).call(this,m)}visitNull(m){const{["type"]:b,["offset"]:S=0,["length"]:M=0}=m;return new s(b,S,M,M)}visitBool(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length>>3,["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitInt(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length,["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitFloat(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length,["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitUtf8(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.data),I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toInt32Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,M,I])}visitLargeUtf8(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.data),I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toBigInt64Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,M,I])}visitBinary(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.data),I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toInt32Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,M,I])}visitLargeBinary(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.data),I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toBigInt64Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,M,I])}visitFixedSizeBinary(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitDate(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitTimestamp(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitTime(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitDecimal(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitList(m){const{["type"]:b,["offset"]:S=0,["child"]:M}=m,I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toInt32Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,void 0,I],[M])}visitStruct(m){const{["type"]:b,["offset"]:S=0,["children"]:M=[]}=m,I=(0,o.toUint8Array)(m.nullBitmap),{length:O=M.reduce((B,{length:P})=>Math.max(B,P),0),nullCount:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,void 0,I],M)}visitUnion(m){const{["type"]:b,["offset"]:S=0,["children"]:M=[]}=m,I=(0,o.toArrayBufferView)(b.ArrayType,m.typeIds),{["length"]:O=I.length,["nullCount"]:D=-1}=m;if(n.DataType.isSparseUnion(b))return new s(b,S,O,D,[void 0,void 0,void 0,I],M);const B=(0,o.toInt32Array)(m.valueOffsets);return new s(b,S,O,D,[B,void 0,void 0,I],M)}visitDictionary(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.indices.ArrayType,m.data),{["dictionary"]:O=new e.Vector([new l().visit({type:b.dictionary})])}=m,{["length"]:D=I.length,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[void 0,I,M],[],O)}visitInterval(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitDuration(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length,["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitFixedSizeList(m){const{["type"]:b,["offset"]:S=0,["child"]:M=new l().visit({type:b.valueType})}=m,I=(0,o.toUint8Array)(m.nullBitmap),{["length"]:O=M.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,void 0,I],[M])}visitMap(m){const{["type"]:b,["offset"]:S=0,["child"]:M=new l().visit({type:b.childType})}=m,I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toInt32Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,void 0,I],[M])}}const c=new l;function h(A){return c.visit(A)}t.makeData=h}(Yw)),Yw}var zn={},BP;function HE(){if(BP)return zn;BP=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.wrapChunkedIndexOf=zn.wrapChunkedCall2=zn.wrapChunkedCall1=zn.isChunkedValid=zn.binarySearch=zn.sliceChunks=zn.computeChunkOffsets=zn.computeChunkNullCounts=zn.computeChunkNullable=zn.ChunkedIterator=void 0;class t{constructor(A=0,m){this.numChunks=A,this.getChunkIterator=m,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const A=this.chunkIterator.next();if(!A.done)return A;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}zn.ChunkedIterator=t;function e(h){return h.some(A=>A.nullable)}zn.computeChunkNullable=e;function i(h){return h.reduce((A,m)=>A+m.nullCount,0)}zn.computeChunkNullCounts=i;function n(h){return h.reduce((A,m,b)=>(A[b+1]=A[b]+m.length,A),new Uint32Array(h.length+1))}zn.computeChunkOffsets=n;function r(h,A,m,b){const S=[];for(let M=-1,I=h.length;++M<I;){const O=h[M],D=A[M],{length:B}=O;if(D>=b)break;if(m>=D+B)continue;if(D>=m&&D+B<=b){S.push(O);continue}const P=Math.max(0,m-D),j=Math.min(b-D,B);S.push(O.slice(P,j-P))}return S.length===0&&S.push(h[0].slice(0,0)),S}zn.sliceChunks=r;function s(h,A,m,b){let S=0,M=0,I=A.length-1;do{if(S>=I-1)return m<A[I]?b(h,S,m-A[S]):null;M=S+Math.trunc((I-S)*.5),m<A[M]?I=M:S=M}while(S<I)}zn.binarySearch=s;function a(h,A){return h.getValid(A)}zn.isChunkedValid=a;function o(h){function A(m,b,S){return h(m[b],S)}return function(m){const b=this.data;return s(b,this._offsets,m,A)}}zn.wrapChunkedCall1=o;function l(h){let A;function m(b,S,M){return h(b[S],M,A)}return function(b,S){const M=this.data;A=S;const I=s(M,this._offsets,b,m);return A=void 0,I}}zn.wrapChunkedCall2=l;function c(h){let A;function m(b,S,M){let I=M,O=0,D=0;for(let B=S-1,P=b.length;++B<P;){const j=b[B];if(~(O=h(j,A,I)))return D+O;I=0,D+=j.length}return-1}return function(b,S){A=b;const M=this.data,I=typeof S!="number"?m(M,0,0):s(M,this._offsets,S,m);return A=void 0,I}}return zn.wrapChunkedIndexOf=c,zn}var Th={},OP;function qE(){if(OP)return Th;OP=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.instance=Th.IndexOfVisitor=void 0;const t=ir(),e=Ta(),i=u0(),n=h0(),r=X_();class s extends e.Visitor{}Th.IndexOfVisitor=s;function a(h,A){return A===null&&h.length>0?0:-1}function o(h,A){const{nullBitmap:m}=h;if(!m||h.nullCount<=0)return-1;let b=0;for(const S of new n.BitIterator(m,h.offset+(A||0),h.length,m,n.getBool)){if(!S)return b;++b}return-1}function l(h,A,m){if(A===void 0)return-1;if(A===null)switch(h.typeId){case t.Type.Union:break;case t.Type.Dictionary:break;default:return o(h,m)}const b=i.instance.getVisitFn(h),S=(0,r.createElementComparator)(A);for(let M=(m||0)-1,I=h.length;++M<I;)if(S(b(h,M)))return M;return-1}function c(h,A,m){const b=i.instance.getVisitFn(h),S=(0,r.createElementComparator)(A);for(let M=(m||0)-1,I=h.length;++M<I;)if(S(b(h,M)))return M;return-1}return s.prototype.visitNull=a,s.prototype.visitBool=l,s.prototype.visitInt=l,s.prototype.visitInt8=l,s.prototype.visitInt16=l,s.prototype.visitInt32=l,s.prototype.visitInt64=l,s.prototype.visitUint8=l,s.prototype.visitUint16=l,s.prototype.visitUint32=l,s.prototype.visitUint64=l,s.prototype.visitFloat=l,s.prototype.visitFloat16=l,s.prototype.visitFloat32=l,s.prototype.visitFloat64=l,s.prototype.visitUtf8=l,s.prototype.visitLargeUtf8=l,s.prototype.visitBinary=l,s.prototype.visitLargeBinary=l,s.prototype.visitFixedSizeBinary=l,s.prototype.visitDate=l,s.prototype.visitDateDay=l,s.prototype.visitDateMillisecond=l,s.prototype.visitTimestamp=l,s.prototype.visitTimestampSecond=l,s.prototype.visitTimestampMillisecond=l,s.prototype.visitTimestampMicrosecond=l,s.prototype.visitTimestampNanosecond=l,s.prototype.visitTime=l,s.prototype.visitTimeSecond=l,s.prototype.visitTimeMillisecond=l,s.prototype.visitTimeMicrosecond=l,s.prototype.visitTimeNanosecond=l,s.prototype.visitDecimal=l,s.prototype.visitList=l,s.prototype.visitStruct=l,s.prototype.visitUnion=l,s.prototype.visitDenseUnion=c,s.prototype.visitSparseUnion=c,s.prototype.visitDictionary=l,s.prototype.visitInterval=l,s.prototype.visitIntervalDayTime=l,s.prototype.visitIntervalYearMonth=l,s.prototype.visitDuration=l,s.prototype.visitDurationSecond=l,s.prototype.visitDurationMillisecond=l,s.prototype.visitDurationMicrosecond=l,s.prototype.visitDurationNanosecond=l,s.prototype.visitFixedSizeList=l,s.prototype.visitMap=l,Th.instance=new s,Th}var Sh={},RP;function YE(){if(RP)return Sh;RP=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.instance=Sh.IteratorVisitor=void 0;const t=Ta(),e=ir(),i=Cn(),n=HE();class r extends t.Visitor{}Sh.IteratorVisitor=r;function s(o){const{type:l}=o;if(o.nullCount===0&&o.stride===1&&(i.DataType.isInt(l)&&l.bitWidth!==64||i.DataType.isTime(l)&&l.bitWidth!==64||i.DataType.isFloat(l)&&l.precision!==e.Precision.HALF))return new n.ChunkedIterator(o.data.length,h=>{const A=o.data[h];return A.values.subarray(0,A.length)[Symbol.iterator]()});let c=0;return new n.ChunkedIterator(o.data.length,h=>{const m=o.data[h].length,b=o.slice(c,c+m);return c+=m,new a(b)})}class a{constructor(l){this.vector=l,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}return r.prototype.visitNull=s,r.prototype.visitBool=s,r.prototype.visitInt=s,r.prototype.visitInt8=s,r.prototype.visitInt16=s,r.prototype.visitInt32=s,r.prototype.visitInt64=s,r.prototype.visitUint8=s,r.prototype.visitUint16=s,r.prototype.visitUint32=s,r.prototype.visitUint64=s,r.prototype.visitFloat=s,r.prototype.visitFloat16=s,r.prototype.visitFloat32=s,r.prototype.visitFloat64=s,r.prototype.visitUtf8=s,r.prototype.visitLargeUtf8=s,r.prototype.visitBinary=s,r.prototype.visitLargeBinary=s,r.prototype.visitFixedSizeBinary=s,r.prototype.visitDate=s,r.prototype.visitDateDay=s,r.prototype.visitDateMillisecond=s,r.prototype.visitTimestamp=s,r.prototype.visitTimestampSecond=s,r.prototype.visitTimestampMillisecond=s,r.prototype.visitTimestampMicrosecond=s,r.prototype.visitTimestampNanosecond=s,r.prototype.visitTime=s,r.prototype.visitTimeSecond=s,r.prototype.visitTimeMillisecond=s,r.prototype.visitTimeMicrosecond=s,r.prototype.visitTimeNanosecond=s,r.prototype.visitDecimal=s,r.prototype.visitList=s,r.prototype.visitStruct=s,r.prototype.visitUnion=s,r.prototype.visitDenseUnion=s,r.prototype.visitSparseUnion=s,r.prototype.visitDictionary=s,r.prototype.visitInterval=s,r.prototype.visitIntervalDayTime=s,r.prototype.visitIntervalYearMonth=s,r.prototype.visitDuration=s,r.prototype.visitDurationSecond=s,r.prototype.visitDurationMillisecond=s,r.prototype.visitDurationMicrosecond=s,r.prototype.visitDurationNanosecond=s,r.prototype.visitFixedSizeList=s,r.prototype.visitMap=s,Sh.instance=new r,Sh}var DP;function js(){if(DP)return _h;DP=1;var t;Object.defineProperty(_h,"__esModule",{value:!0}),_h.makeVector=_h.Vector=void 0;const e=ir(),i=X_(),n=Cn(),r=Rc(),s=HE(),a=u0(),o=Xa(),l=qE(),c=YE(),h={},A={};class m{constructor(D){var B,P,j;const N=D[0]instanceof m?D.flatMap($=>$.data):D;if(N.length===0||N.some($=>!($ instanceof r.Data)))throw new TypeError("Vector constructor expects an Array of Data instances.");const F=(B=N[0])===null||B===void 0?void 0:B.type;switch(N.length){case 0:this._offsets=[0];break;case 1:{const{get:$,set:V,indexOf:Z}=h[F.typeId],nt=N[0];this.isValid=X=>(0,s.isChunkedValid)(nt,X),this.get=X=>$(nt,X),this.set=(X,bt)=>V(nt,X,bt),this.indexOf=X=>Z(nt,X),this._offsets=[0,nt.length];break}default:Object.setPrototypeOf(this,A[F.typeId]),this._offsets=(0,s.computeChunkOffsets)(N);break}this.data=N,this.type=F,this.stride=(0,n.strideForType)(F),this.numChildren=(j=(P=F.children)===null||P===void 0?void 0:P.length)!==null&&j!==void 0?j:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((D,B)=>D+B.byteLength,0)}get nullable(){return(0,s.computeChunkNullable)(this.data)}get nullCount(){return(0,s.computeChunkNullCounts)(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${e.Type[this.type.typeId]}Vector`}isValid(D){return!1}get(D){return null}at(D){return this.get((0,i.wrapIndex)(D,this.length))}set(D,B){}indexOf(D,B){return-1}includes(D,B){return this.indexOf(D,B)>-1}[Symbol.iterator](){return c.instance.visit(this)}concat(...D){return new m(this.data.concat(D.flatMap(B=>B.data).flat(Number.POSITIVE_INFINITY)))}slice(D,B){return new m((0,i.clampRange)(this,D,B,({data:P,_offsets:j},N,F)=>(0,s.sliceChunks)(P,j,N,F)))}toJSON(){return[...this]}toArray(){const{type:D,data:B,length:P,stride:j,ArrayType:N}=this;switch(D.typeId){case e.Type.Int:case e.Type.Float:case e.Type.Decimal:case e.Type.Time:case e.Type.Timestamp:switch(B.length){case 0:return new N;case 1:return B[0].values.subarray(0,P*j);default:return B.reduce((F,{values:$,length:V})=>(F.array.set($.subarray(0,V*j),F.offset),F.offset+=V*j,F),{array:new N(P*j),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(D){var B;return this.getChildAt((B=this.type.children)===null||B===void 0?void 0:B.findIndex(P=>P.name===D))}getChildAt(D){return D>-1&&D<this.numChildren?new m(this.data.map(({children:B})=>B[D])):null}get isMemoized(){return n.DataType.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(n.DataType.isDictionary(this.type)){const D=new b(this.data[0].dictionary),B=this.data.map(P=>{const j=P.clone();return j.dictionary=D,j});return new m(B)}return new b(this)}unmemoize(){if(n.DataType.isDictionary(this.type)&&this.isMemoized){const D=this.data[0].dictionary.unmemoize(),B=this.data.map(P=>{const j=P.clone();return j.dictionary=D,j});return new m(B)}return this}}_h.Vector=m,t=Symbol.toStringTag,m[t]=(O=>{O.type=n.DataType.prototype,O.data=[],O.length=0,O.stride=1,O.numChildren=0,O._offsets=new Uint32Array([0]),O[Symbol.isConcatSpreadable]=!0;const D=Object.keys(e.Type).map(B=>e.Type[B]).filter(B=>typeof B=="number"&&B!==e.Type.NONE);for(const B of D){const P=a.instance.getVisitFnByTypeId(B),j=o.instance.getVisitFnByTypeId(B),N=l.instance.getVisitFnByTypeId(B);h[B]={get:P,set:j,indexOf:N},A[B]=Object.create(O,{isValid:{value:(0,s.wrapChunkedCall1)(s.isChunkedValid)},get:{value:(0,s.wrapChunkedCall1)(a.instance.getVisitFnByTypeId(B))},set:{value:(0,s.wrapChunkedCall2)(o.instance.getVisitFnByTypeId(B))},indexOf:{value:(0,s.wrapChunkedIndexOf)(l.instance.getVisitFnByTypeId(B))}})}return"Vector"})(m.prototype);class b extends m{constructor(D){super(D.data);const B=this.get,P=this.set,j=this.slice,N=new Array(this.length);Object.defineProperty(this,"get",{value(F){const $=N[F];if($!==void 0)return $;const V=B.call(this,F);return N[F]=V,V}}),Object.defineProperty(this,"set",{value(F,$){P.call(this,F,$),N[F]=$}}),Object.defineProperty(this,"slice",{value:(F,$)=>new b(j.call(this,F,$))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new m(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}const S=Cn();function M(O){if(O){if(O instanceof r.Data)return new m([O]);if(O instanceof m)return new m(O.data);if(O.type instanceof n.DataType)return new m([(0,r.makeData)(O)]);if(Array.isArray(O))return new m(O.flatMap(D=>I(D)));if(ArrayBuffer.isView(O)){O instanceof DataView&&(O=new Uint8Array(O.buffer));const D={offset:0,length:O.length,nullCount:-1,data:O};if(O instanceof Int8Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Int8}))]);if(O instanceof Int16Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Int16}))]);if(O instanceof Int32Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Int32}))]);if(O instanceof BigInt64Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Int64}))]);if(O instanceof Uint8Array||O instanceof Uint8ClampedArray)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Uint8}))]);if(O instanceof Uint16Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Uint16}))]);if(O instanceof Uint32Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Uint32}))]);if(O instanceof BigUint64Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Uint64}))]);if(O instanceof Float32Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Float32}))]);if(O instanceof Float64Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Float64}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}_h.makeVector=M;function I(O){return O instanceof r.Data?[O]:O instanceof m?O.data:M(O).data}return _h}var Oy={},CP;function uet(){if(CP)return Oy;CP=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.createIsValidFunction=void 0;const t=cT();function e(n){if(!n||n.length<=0)return function(o){return!0};let r="";const s=n.filter(a=>a===a);return s.length>0&&(r=`
    switch (x) {${s.map(a=>`
        case ${i(a)}:`).join("")}
            return false;
    }`),n.length!==s.length&&(r=`if (x !== x) return false;
${r}`),new Function("x",`${r}
return true;`)}Oy.createIsValidFunction=e;function i(n){return typeof n!="bigint"?(0,t.valueToString)(n):`${(0,t.valueToString)(n)}n`}return Oy}var uo={},PP;function Wu(){if(PP)return uo;PP=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.OffsetsBufferBuilder=uo.BitmapBufferBuilder=uo.DataBufferBuilder=uo.BufferBuilder=void 0;const t=Gr();function e(o,l){const c=Math.ceil(o)*l-1;return(c-c%64+64||64)/l}function i(o,l=0){return o.length>=l?o.subarray(0,l):(0,t.memcpy)(new o.constructor(l),o,0)}class n{constructor(l,c=0,h=1){this.length=Math.ceil(c/h),this.buffer=new l(this.length),this.stride=h,this.BYTES_PER_ELEMENT=l.BYTES_PER_ELEMENT,this.ArrayType=l}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(l,c){return this}append(l){return this.set(this.length,l)}reserve(l){if(l>0){this.length+=l;const c=this.stride,h=this.length*c,A=this.buffer.length;h>=A&&this._resize(A===0?e(h*1,this.BYTES_PER_ELEMENT):e(h*2,this.BYTES_PER_ELEMENT))}return this}flush(l=this.length){l=e(l*this.stride,this.BYTES_PER_ELEMENT);const c=i(this.buffer,l);return this.clear(),c}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(l){return this.buffer=i(this.buffer,l)}}uo.BufferBuilder=n;class r extends n{last(){return this.get(this.length-1)}get(l){return this.buffer[l]}set(l,c){return this.reserve(l-this.length+1),this.buffer[l*this.stride]=c,this}}uo.DataBufferBuilder=r;class s extends r{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(l){return this.buffer[l>>3]>>l%8&1}set(l,c){const{buffer:h}=this.reserve(l-this.length+1),A=l>>3,m=l%8,b=h[A]>>m&1;return c?b===0&&(h[A]|=1<<m,++this.numValid):b===1&&(h[A]&=~(1<<m),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}uo.BitmapBufferBuilder=s;class a extends r{constructor(l){super(l.OffsetArrayType,1,1)}append(l){return this.set(this.length-1,l)}set(l,c){const h=this.length-1,A=this.reserve(l-h+1).buffer;return h<l++&&h>=0&&A.fill(A[h],h,l),A[l]=A[l-1]+c,this}flush(l=this.length-1){return l>this.length&&this.set(l-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(l+1)}}return uo.OffsetsBufferBuilder=a,uo}var xP;function qn(){if(xP)return Xl;xP=1,Object.defineProperty(Xl,"__esModule",{value:!0}),Xl.VariableWidthBuilder=Xl.FixedWidthBuilder=Xl.Builder=void 0;const t=js(),e=Rc(),i=hT(),n=Cn(),r=uet(),s=Wu();class a{static throughNode(h){throw new Error('"throughNode" not available in this environment')}static throughDOM(h){throw new Error('"throughDOM" not available in this environment')}constructor({type:h,nullValues:A}){this.length=0,this.finished=!1,this.type=h,this.children=[],this.nullValues=A,this.stride=(0,n.strideForType)(h),this._nulls=new s.BitmapBufferBuilder,A&&A.length>0&&(this._isValid=(0,r.createIsValidFunction)(A))}toVector(){return new t.Vector([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let h=0;const{_offsets:A,_values:m,_nulls:b,_typeIds:S,children:M}=this;return A&&(h+=A.byteLength),m&&(h+=m.byteLength),b&&(h+=b.byteLength),S&&(h+=S.byteLength),M.reduce((I,O)=>I+O.byteLength,h)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let h=0;return this._offsets&&(h+=this._offsets.reservedByteLength),this._values&&(h+=this._values.reservedByteLength),this._nulls&&(h+=this._nulls.reservedByteLength),this._typeIds&&(h+=this._typeIds.reservedByteLength),this.children.reduce((A,m)=>A+m.reservedByteLength,h)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(h){return this.set(this.length,h)}isValid(h){return this._isValid(h)}set(h,A){return this.setValid(h,this.isValid(A))&&this.setValue(h,A),this}setValue(h,A){this._setValue(this,h,A)}setValid(h,A){return this.length=this._nulls.set(h,+A).length,A}addChild(h,A=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(h){return this.children[h]||null}flush(){let h,A,m,b;const{type:S,length:M,nullCount:I,_typeIds:O,_offsets:D,_values:B,_nulls:P}=this;(A=O==null?void 0:O.flush(M))?b=D==null?void 0:D.flush(M):(b=D==null?void 0:D.flush(M))?h=B==null?void 0:B.flush(D.last()):h=B==null?void 0:B.flush(M),I>0&&(m=P==null?void 0:P.flush(M));const j=this.children.map(N=>N.flush());return this.clear(),(0,e.makeData)({type:S,length:M,nullCount:I,children:j,child:j[0],data:h,typeIds:A,nullBitmap:m,valueOffsets:b})}finish(){this.finished=!0;for(const h of this.children)h.finish();return this}clear(){var h,A,m,b;this.length=0,(h=this._nulls)===null||h===void 0||h.clear(),(A=this._values)===null||A===void 0||A.clear(),(m=this._offsets)===null||m===void 0||m.clear(),(b=this._typeIds)===null||b===void 0||b.clear();for(const S of this.children)S.clear();return this}}Xl.Builder=a,a.prototype.length=1,a.prototype.stride=1,a.prototype.children=null,a.prototype.finished=!1,a.prototype.nullValues=null,a.prototype._isValid=()=>!0;class o extends a{constructor(h){super(h),this._values=new s.DataBufferBuilder(this.ArrayType,0,this.stride)}setValue(h,A){const m=this._values;return m.reserve(h-m.length+1),super.setValue(h,A)}}Xl.FixedWidthBuilder=o;class l extends a{constructor(h){super(h),this._pendingLength=0,this._offsets=new s.OffsetsBufferBuilder(h.type)}setValue(h,A){const m=this._pending||(this._pending=new Map),b=m.get(h);b&&(this._pendingLength-=b.length),this._pendingLength+=A instanceof i.MapRow?A[i.kKeys].length:A.length,m.set(h,A)}setValid(h,A){return super.setValid(h,A)?!0:((this._pending||(this._pending=new Map)).set(h,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const h=this._pending,A=this._pendingLength;return this._pendingLength=0,this._pending=void 0,h&&h.size>0&&this._flushPending(h,A),this}}return Xl.VariableWidthBuilder=l,Xl}var ia={},wh={},Ry={},NP;function M7(){if(NP)return Ry;NP=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.Block=void 0;class t{constructor(){this.bb=null,this.bb_pos=0}__init(i,n){return this.bb_pos=i,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(i,n,r,s){return i.prep(8,24),i.writeInt64(BigInt(s??0)),i.pad(4),i.writeInt32(r),i.writeInt64(BigInt(n??0)),i.offset()}}return Ry.Block=t,Ry}var Dy={},FP;function het(){if(FP)return Dy;FP=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.Footer=void 0;const t=Re,e=M7(),i=Y_(),n=BE(),r=zE();class s{constructor(){this.bb=null,this.bb_pos=0}__init(o,l){return this.bb_pos=o,this.bb=l,this}static getRootAsFooter(o,l){return(l||new s).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsFooter(o,l){return o.setPosition(o.position()+t.SIZE_PREFIX_LENGTH),(l||new s).__init(o.readInt32(o.position())+o.position(),o)}version(){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readInt16(this.bb_pos+o):n.MetadataVersion.V1}schema(o){const l=this.bb.__offset(this.bb_pos,6);return l?(o||new r.Schema).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dictionaries(o,l){const c=this.bb.__offset(this.bb_pos,8);return c?(l||new e.Block).__init(this.bb.__vector(this.bb_pos+c)+o*24,this.bb):null}dictionariesLength(){const o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__vector_len(this.bb_pos+o):0}recordBatches(o,l){const c=this.bb.__offset(this.bb_pos,10);return c?(l||new e.Block).__init(this.bb.__vector(this.bb_pos+c)+o*24,this.bb):null}recordBatchesLength(){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__vector_len(this.bb_pos+o):0}customMetadata(o,l){const c=this.bb.__offset(this.bb_pos,12);return c?(l||new i.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+o*4),this.bb):null}customMetadataLength(){const o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__vector_len(this.bb_pos+o):0}static startFooter(o){o.startObject(5)}static addVersion(o,l){o.addFieldInt16(0,l,n.MetadataVersion.V1)}static addSchema(o,l){o.addFieldOffset(1,l,0)}static addDictionaries(o,l){o.addFieldOffset(2,l,0)}static startDictionariesVector(o,l){o.startVector(24,l,8)}static addRecordBatches(o,l){o.addFieldOffset(3,l,0)}static startRecordBatchesVector(o,l){o.startVector(24,l,8)}static addCustomMetadata(o,l){o.addFieldOffset(4,l,0)}static createCustomMetadataVector(o,l){o.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)o.addOffset(l[c]);return o.endVector()}static startCustomMetadataVector(o,l){o.startVector(4,l,4)}static endFooter(o){return o.endObject()}static finishFooterBuffer(o,l){o.finish(l)}static finishSizePrefixedFooterBuffer(o,l){o.finish(l,void 0,!0)}}return Dy.Footer=s,Dy}var Mh={},LP;function Sa(){if(LP)return Mh;LP=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.Field=Mh.Schema=void 0;const t=ir(),e=Cn();class i{constructor(o=[],l,c,h=t.MetadataVersion.V5){this.fields=o||[],this.metadata=l||new Map,c||(c=s(this.fields)),this.dictionaries=c,this.metadataVersion=h}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(o=>o.name)}toString(){return`Schema<{ ${this.fields.map((o,l)=>`${l}: ${o}`).join(", ")} }>`}select(o){const l=new Set(o),c=this.fields.filter(h=>l.has(h.name));return new i(c,this.metadata)}selectAt(o){const l=o.map(c=>this.fields[c]).filter(Boolean);return new i(l,this.metadata)}assign(...o){const l=o[0]instanceof i?o[0]:Array.isArray(o[0])?new i(o[0]):new i(o),c=[...this.fields],h=r(r(new Map,this.metadata),l.metadata),A=l.fields.filter(b=>{const S=c.findIndex(M=>M.name===b.name);return~S?(c[S]=b.clone({metadata:r(r(new Map,c[S].metadata),b.metadata)}))&&!1:!0}),m=s(A,new Map);return new i([...c,...A],h,new Map([...this.dictionaries,...m]))}}Mh.Schema=i,i.prototype.fields=null,i.prototype.metadata=null,i.prototype.dictionaries=null;class n{static new(...o){let[l,c,h,A]=o;return o[0]&&typeof o[0]=="object"&&({name:l}=o[0],c===void 0&&(c=o[0].type),h===void 0&&(h=o[0].nullable),A===void 0&&(A=o[0].metadata)),new n(`${l}`,c,h,A)}constructor(o,l,c=!1,h){this.name=o,this.type=l,this.nullable=c,this.metadata=h||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...o){let[l,c,h,A]=o;return!o[0]||typeof o[0]!="object"?[l=this.name,c=this.type,h=this.nullable,A=this.metadata]=o:{name:l=this.name,type:c=this.type,nullable:h=this.nullable,metadata:A=this.metadata}=o[0],n.new(l,c,h,A)}}Mh.Field=n,n.prototype.type=null,n.prototype.name=null,n.prototype.nullable=null,n.prototype.metadata=null;function r(a,o){return new Map([...a||new Map,...o||new Map])}function s(a,o=new Map){for(let l=-1,c=a.length;++l<c;){const A=a[l].type;if(e.DataType.isDictionary(A)){if(!o.has(A.id))o.set(A.id,A.dictionary);else if(o.get(A.id)!==A.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}A.children&&A.children.length>0&&s(A.children,o)}return o}return Mh}var UP;function I7(){if(UP)return wh;UP=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.FileBlock=wh.Footer=void 0;const t=M7(),e=het(),i=Re;var n=i.Builder,r=i.ByteBuffer;const s=Sa(),a=ir(),o=Gr(),l=xf();class c{static decode(b){b=new r((0,o.toUint8Array)(b));const S=e.Footer.getRootAsFooter(b),M=s.Schema.decode(S.schema(),new Map,S.version());return new h(M,S)}static encode(b){const S=new n,M=s.Schema.encode(S,b.schema);e.Footer.startRecordBatchesVector(S,b.numRecordBatches);for(const D of[...b.recordBatches()].slice().reverse())A.encode(S,D);const I=S.endVector();e.Footer.startDictionariesVector(S,b.numDictionaries);for(const D of[...b.dictionaryBatches()].slice().reverse())A.encode(S,D);const O=S.endVector();return e.Footer.startFooter(S),e.Footer.addSchema(S,M),e.Footer.addVersion(S,a.MetadataVersion.V5),e.Footer.addRecordBatches(S,I),e.Footer.addDictionaries(S,O),e.Footer.finishFooterBuffer(S,e.Footer.endFooter(S)),S.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(b,S=a.MetadataVersion.V5,M,I){this.schema=b,this.version=S,M&&(this._recordBatches=M),I&&(this._dictionaryBatches=I)}*recordBatches(){for(let b,S=-1,M=this.numRecordBatches;++S<M;)(b=this.getRecordBatch(S))&&(yield b)}*dictionaryBatches(){for(let b,S=-1,M=this.numDictionaries;++S<M;)(b=this.getDictionaryBatch(S))&&(yield b)}getRecordBatch(b){return b>=0&&b<this.numRecordBatches&&this._recordBatches[b]||null}getDictionaryBatch(b){return b>=0&&b<this.numDictionaries&&this._dictionaryBatches[b]||null}}wh.Footer=c;class h extends c{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(b,S){super(b,S.version()),this._footer=S}getRecordBatch(b){if(b>=0&&b<this.numRecordBatches){const S=this._footer.recordBatches(b);if(S)return A.decode(S)}return null}getDictionaryBatch(b){if(b>=0&&b<this.numDictionaries){const S=this._footer.dictionaries(b);if(S)return A.decode(S)}return null}}class A{static decode(b){return new A(b.metaDataLength(),b.bodyLength(),b.offset())}static encode(b,S){const{metaDataLength:M}=S,I=BigInt(S.offset),O=BigInt(S.bodyLength);return t.Block.createBlock(b,I,M,O)}constructor(b,S,M){this.metaDataLength=b,this.offset=(0,l.bigIntToNumber)(M),this.bodyLength=(0,l.bigIntToNumber)(S)}}return wh.FileBlock=A,wh}var tc={},Gw={},kP;function fT(){return kP||(kP=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncQueue=t.ReadableInterop=t.ArrowJSON=t.ITERATOR_DONE=void 0;const e=Bn,i=oT();t.ITERATOR_DONE=Object.freeze({done:!0,value:void 0});class n{constructor(o){this._json=o}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}t.ArrowJSON=n;class r{tee(){return this._getDOMStream().tee()}pipe(o,l){return this._getNodeStream().pipe(o,l)}pipeTo(o,l){return this._getDOMStream().pipeTo(o,l)}pipeThrough(o,l){return this._getDOMStream().pipeThrough(o,l)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}t.ReadableInterop=r;class s extends r{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(o=>this._closedPromiseResolve=o)}get closed(){return this._closedPromise}cancel(o){return e.__awaiter(this,void 0,void 0,function*(){yield this.return(o)})}write(o){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(o):this.resolvers.shift().resolve({done:!1,value:o}))}abort(o){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:o}:this.resolvers.shift().reject({done:!0,value:o}))}close(){if(this._closedPromiseResolve){const{resolvers:o}=this;for(;o.length>0;)o.shift().resolve(t.ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(o){return i.default.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,o)}toNodeStream(o){return i.default.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,o)}throw(o){return e.__awaiter(this,void 0,void 0,function*(){return yield this.abort(o),t.ITERATOR_DONE})}return(o){return e.__awaiter(this,void 0,void 0,function*(){return yield this.close(),t.ITERATOR_DONE})}read(o){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(o,"read")).value})}peek(o){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(o,"peek")).value})}next(...o){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((l,c)=>{this.resolvers.push({resolve:l,reject:c})}):Promise.resolve(t.ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}t.AsyncQueue=s}(Gw)),Gw}var jP;function Nf(){if(jP)return tc;jP=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.AsyncByteStream=tc.ByteStream=tc.AsyncByteQueue=void 0;const t=Bn,e=oT(),i=Rf(),n=fT(),r=Gr(),s=Df();class a extends n.AsyncQueue{write(m){if((m=(0,r.toUint8Array)(m)).byteLength>0)return super.write(m)}toString(m=!1){return m?(0,i.decodeUtf8)(this.toUint8Array(!0)):this.toUint8Array(!1).then(i.decodeUtf8)}toUint8Array(m=!1){return m?(0,r.joinUint8Arrays)(this._values)[0]:t.__awaiter(this,void 0,void 0,function*(){var b,S,M,I;const O=[];let D=0;try{for(var B=!0,P=t.__asyncValues(this),j;j=yield P.next(),b=j.done,!b;B=!0){I=j.value,B=!1;const N=I;O.push(N),D+=N.byteLength}}catch(N){S={error:N}}finally{try{!B&&!b&&(M=P.return)&&(yield M.call(P))}finally{if(S)throw S.error}}return(0,r.joinUint8Arrays)(O,D)[0]})}}tc.AsyncByteQueue=a;class o{constructor(m){m&&(this.source=new c(e.default.fromIterable(m)))}[Symbol.iterator](){return this}next(m){return this.source.next(m)}throw(m){return this.source.throw(m)}return(m){return this.source.return(m)}peek(m){return this.source.peek(m)}read(m){return this.source.read(m)}}tc.ByteStream=o;class l{constructor(m){m instanceof l?this.source=m.source:m instanceof a?this.source=new h(e.default.fromAsyncIterable(m)):(0,s.isReadableNodeStream)(m)?this.source=new h(e.default.fromNodeStream(m)):(0,s.isReadableDOMStream)(m)?this.source=new h(e.default.fromDOMStream(m)):(0,s.isFetchResponse)(m)?this.source=new h(e.default.fromDOMStream(m.body)):(0,s.isIterable)(m)?this.source=new h(e.default.fromIterable(m)):(0,s.isPromise)(m)?this.source=new h(e.default.fromAsyncIterable(m)):(0,s.isAsyncIterable)(m)&&(this.source=new h(e.default.fromAsyncIterable(m)))}[Symbol.asyncIterator](){return this}next(m){return this.source.next(m)}throw(m){return this.source.throw(m)}return(m){return this.source.return(m)}get closed(){return this.source.closed}cancel(m){return this.source.cancel(m)}peek(m){return this.source.peek(m)}read(m){return this.source.read(m)}}tc.AsyncByteStream=l;class c{constructor(m){this.source=m}cancel(m){this.return(m)}peek(m){return this.next(m,"peek").value}read(m){return this.next(m,"read").value}next(m,b="read"){return this.source.next({cmd:b,size:m})}throw(m){return Object.create(this.source.throw&&this.source.throw(m)||n.ITERATOR_DONE)}return(m){return Object.create(this.source.return&&this.source.return(m)||n.ITERATOR_DONE)}}class h{constructor(m){this.source=m,this._closedPromise=new Promise(b=>this._closedPromiseResolve=b)}cancel(m){return t.__awaiter(this,void 0,void 0,function*(){yield this.return(m)})}get closed(){return this._closedPromise}read(m){return t.__awaiter(this,void 0,void 0,function*(){return(yield this.next(m,"read")).value})}peek(m){return t.__awaiter(this,void 0,void 0,function*(){return(yield this.next(m,"peek")).value})}next(m){return t.__awaiter(this,arguments,void 0,function*(b,S="read"){return yield this.source.next({cmd:S,size:b})})}throw(m){return t.__awaiter(this,void 0,void 0,function*(){const b=this.source.throw&&(yield this.source.throw(m))||n.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(b)})}return(m){return t.__awaiter(this,void 0,void 0,function*(){const b=this.source.return&&(yield this.source.return(m))||n.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(b)})}}return tc}var Ih={},zP;function E7(){if(zP)return Ih;zP=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.AsyncRandomAccessFile=Ih.RandomAccessFile=void 0;const t=Bn,e=Nf(),i=Gr();class n extends e.ByteStream{constructor(a,o){super(),this.position=0,this.buffer=(0,i.toUint8Array)(a),this.size=o===void 0?this.buffer.byteLength:o}readInt32(a){const{buffer:o,byteOffset:l}=this.readAt(a,4);return new DataView(o,l).getInt32(0,!0)}seek(a){return this.position=Math.min(a,this.size),a<this.size}read(a){const{buffer:o,size:l,position:c}=this;return o&&c<l?(typeof a!="number"&&(a=Number.POSITIVE_INFINITY),this.position=Math.min(l,c+Math.min(l-c,a)),o.subarray(c,this.position)):null}readAt(a,o){const l=this.buffer,c=Math.min(this.size,a+o);return l?l.subarray(a,c):new Uint8Array(o)}close(){this.buffer&&(this.buffer=null)}throw(a){return this.close(),{done:!0,value:a}}return(a){return this.close(),{done:!0,value:a}}}Ih.RandomAccessFile=n;class r extends e.AsyncByteStream{constructor(a,o){super(),this.position=0,this._handle=a,typeof o=="number"?this.size=o:this._pending=t.__awaiter(this,void 0,void 0,function*(){this.size=(yield a.stat()).size,delete this._pending})}readInt32(a){return t.__awaiter(this,void 0,void 0,function*(){const{buffer:o,byteOffset:l}=yield this.readAt(a,4);return new DataView(o,l).getInt32(0,!0)})}seek(a){return t.__awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(a,this.size),a<this.size})}read(a){return t.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:o,size:l,position:c}=this;if(o&&c<l){typeof a!="number"&&(a=Number.POSITIVE_INFINITY);let h=c,A=0,m=0;const b=Math.min(l,h+Math.min(l-h,a)),S=new Uint8Array(Math.max(0,(this.position=b)-h));for(;(h+=m)<b&&(A+=m)<S.byteLength;)({bytesRead:m}=yield o.read(S,A,S.byteLength-A,h));return S}return null})}readAt(a,o){return t.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:l,size:c}=this;if(l&&a+o<c){const h=Math.min(c,a+o),A=new Uint8Array(h-a);return(yield l.read(A,0,o,a)).buffer}return new Uint8Array(o)})}close(){return t.__awaiter(this,void 0,void 0,function*(){const a=this._handle;this._handle=null,a&&(yield a.close())})}throw(a){return t.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:a}})}return(a){return t.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:a}})}}return Ih.AsyncRandomAccessFile=r,Ih}var Eh={},ho={},VP;function B7(){if(VP)return ho;VP=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.Int128=ho.Int64=ho.Uint64=ho.BaseInt64=void 0;const t=65536;function e(l){return l<0&&(l=4294967295+l+1),`0x${l.toString(16)}`}const i=8,n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class r{constructor(c){this.buffer=c}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(c){const h=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),A=new Uint32Array([c.buffer[1]>>>16,c.buffer[1]&65535,c.buffer[0]>>>16,c.buffer[0]&65535]);let m=h[3]*A[3];this.buffer[0]=m&65535;let b=m>>>16;return m=h[2]*A[3],b+=m,m=h[3]*A[2]>>>0,b+=m,this.buffer[0]+=b<<16,this.buffer[1]=b>>>0<m?t:0,this.buffer[1]+=b>>>16,this.buffer[1]+=h[1]*A[3]+h[2]*A[2]+h[3]*A[1],this.buffer[1]+=h[0]*A[3]+h[1]*A[2]+h[2]*A[1]+h[3]*A[0]<<16,this}_plus(c){const h=this.buffer[0]+c.buffer[0]>>>0;this.buffer[1]+=c.buffer[1],h<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=h}lessThan(c){return this.buffer[1]<c.buffer[1]||this.buffer[1]===c.buffer[1]&&this.buffer[0]<c.buffer[0]}equals(c){return this.buffer[1]===c.buffer[1]&&this.buffer[0]==c.buffer[0]}greaterThan(c){return c.lessThan(this)}hex(){return`${e(this.buffer[1])} ${e(this.buffer[0])}`}}ho.BaseInt64=r;class s extends r{times(c){return this._times(c),this}plus(c){return this._plus(c),this}static from(c,h=new Uint32Array(2)){return s.fromString(typeof c=="string"?c:c.toString(),h)}static fromNumber(c,h=new Uint32Array(2)){return s.fromString(c.toString(),h)}static fromString(c,h=new Uint32Array(2)){const A=c.length,m=new s(h);for(let b=0;b<A;){const S=i<A-b?i:A-b,M=new s(new Uint32Array([Number.parseInt(c.slice(b,b+S),10),0])),I=new s(new Uint32Array([n[S],0]));m.times(I),m.plus(M),b+=S}return m}static convertArray(c){const h=new Uint32Array(c.length*2);for(let A=-1,m=c.length;++A<m;)s.from(c[A],new Uint32Array(h.buffer,h.byteOffset+2*A*4,2));return h}static multiply(c,h){return new s(new Uint32Array(c.buffer)).times(h)}static add(c,h){return new s(new Uint32Array(c.buffer)).plus(h)}}ho.Uint64=s;class a extends r{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(c){return this._times(c),this}plus(c){return this._plus(c),this}lessThan(c){const h=this.buffer[1]<<0,A=c.buffer[1]<<0;return h<A||h===A&&this.buffer[0]<c.buffer[0]}static from(c,h=new Uint32Array(2)){return a.fromString(typeof c=="string"?c:c.toString(),h)}static fromNumber(c,h=new Uint32Array(2)){return a.fromString(c.toString(),h)}static fromString(c,h=new Uint32Array(2)){const A=c.startsWith("-"),m=c.length,b=new a(h);for(let S=A?1:0;S<m;){const M=i<m-S?i:m-S,I=new a(new Uint32Array([Number.parseInt(c.slice(S,S+M),10),0])),O=new a(new Uint32Array([n[M],0]));b.times(O),b.plus(I),S+=M}return A?b.negate():b}static convertArray(c){const h=new Uint32Array(c.length*2);for(let A=-1,m=c.length;++A<m;)a.from(c[A],new Uint32Array(h.buffer,h.byteOffset+2*A*4,2));return h}static multiply(c,h){return new a(new Uint32Array(c.buffer)).times(h)}static add(c,h){return new a(new Uint32Array(c.buffer)).plus(h)}}ho.Int64=a;class o{constructor(c){this.buffer=c}high(){return new a(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new a(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(c){const h=new s(new Uint32Array([this.buffer[3],0])),A=new s(new Uint32Array([this.buffer[2],0])),m=new s(new Uint32Array([this.buffer[1],0])),b=new s(new Uint32Array([this.buffer[0],0])),S=new s(new Uint32Array([c.buffer[3],0])),M=new s(new Uint32Array([c.buffer[2],0])),I=new s(new Uint32Array([c.buffer[1],0])),O=new s(new Uint32Array([c.buffer[0],0]));let D=s.multiply(b,O);this.buffer[0]=D.low();const B=new s(new Uint32Array([D.high(),0]));return D=s.multiply(m,O),B.plus(D),D=s.multiply(b,I),B.plus(D),this.buffer[1]=B.low(),this.buffer[3]=B.lessThan(D)?1:0,this.buffer[2]=B.high(),new s(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(s.multiply(A,O)).plus(s.multiply(m,I)).plus(s.multiply(b,M)),this.buffer[3]+=s.multiply(h,O).plus(s.multiply(A,I)).plus(s.multiply(m,M)).plus(s.multiply(b,S)).low(),this}plus(c){const h=new Uint32Array(4);return h[3]=this.buffer[3]+c.buffer[3]>>>0,h[2]=this.buffer[2]+c.buffer[2]>>>0,h[1]=this.buffer[1]+c.buffer[1]>>>0,h[0]=this.buffer[0]+c.buffer[0]>>>0,h[0]<this.buffer[0]>>>0&&++h[1],h[1]<this.buffer[1]>>>0&&++h[2],h[2]<this.buffer[2]>>>0&&++h[3],this.buffer[3]=h[3],this.buffer[2]=h[2],this.buffer[1]=h[1],this.buffer[0]=h[0],this}hex(){return`${e(this.buffer[3])} ${e(this.buffer[2])} ${e(this.buffer[1])} ${e(this.buffer[0])}`}static multiply(c,h){return new o(new Uint32Array(c.buffer)).times(h)}static add(c,h){return new o(new Uint32Array(c.buffer)).plus(h)}static from(c,h=new Uint32Array(4)){return o.fromString(typeof c=="string"?c:c.toString(),h)}static fromNumber(c,h=new Uint32Array(4)){return o.fromString(c.toString(),h)}static fromString(c,h=new Uint32Array(4)){const A=c.startsWith("-"),m=c.length,b=new o(h);for(let S=A?1:0;S<m;){const M=i<m-S?i:m-S,I=new o(new Uint32Array([Number.parseInt(c.slice(S,S+M),10),0,0,0])),O=new o(new Uint32Array([n[M],0,0,0]));b.times(O),b.plus(I),S+=M}return A?b.negate():b}static convertArray(c){const h=new Uint32Array(c.length*4);for(let A=-1,m=c.length;++A<m;)o.from(c[A],new Uint32Array(h.buffer,h.byteOffset+4*4*A,4));return h}}return ho.Int128=o,ho}var $P;function fet(){if($P)return Eh;$P=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.JSONVectorLoader=Eh.VectorLoader=void 0;const t=Rc(),e=Sa(),i=Cn(),n=Ta(),r=h0(),s=Rf(),a=B7(),o=ir(),l=Gr();class c extends n.Visitor{constructor(b,S,M,I,O=o.MetadataVersion.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=b,this.nodes=S,this.buffers=M,this.dictionaries=I,this.metadataVersion=O}visit(b){return super.visit(b instanceof e.Field?b.type:b)}visitNull(b,{length:S}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S})}visitBool(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitInt(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitFloat(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitUtf8(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),data:this.readData(b)})}visitLargeUtf8(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),data:this.readData(b)})}visitBinary(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),data:this.readData(b)})}visitLargeBinary(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),data:this.readData(b)})}visitFixedSizeBinary(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitDate(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitTimestamp(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitTime(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitDecimal(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitList(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),child:this.visit(b.children[0])})}visitStruct(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),children:this.visitMany(b.children)})}visitUnion(b,{length:S,nullCount:M}=this.nextFieldNode()){return this.metadataVersion<o.MetadataVersion.V5&&this.readNullBitmap(b,M),b.mode===o.UnionMode.Sparse?this.visitSparseUnion(b,{length:S,nullCount:M}):this.visitDenseUnion(b,{length:S,nullCount:M})}visitDenseUnion(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,typeIds:this.readTypeIds(b),valueOffsets:this.readOffsets(b),children:this.visitMany(b.children)})}visitSparseUnion(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,typeIds:this.readTypeIds(b),children:this.visitMany(b.children)})}visitDictionary(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b.indices),dictionary:this.readDictionary(b)})}visitInterval(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitDuration(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitFixedSizeList(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),child:this.visit(b.children[0])})}visitMap(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),child:this.visit(b.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(b,S,M=this.nextBufferRange()){return S>0&&this.readData(b,M)||new Uint8Array(0)}readOffsets(b,S){return this.readData(b,S)}readTypeIds(b,S){return this.readData(b,S)}readData(b,{length:S,offset:M}=this.nextBufferRange()){return this.bytes.subarray(M,M+S)}readDictionary(b){return this.dictionaries.get(b.id)}}Eh.VectorLoader=c;class h extends c{constructor(b,S,M,I,O){super(new Uint8Array(0),S,M,I,O),this.sources=b}readNullBitmap(b,S,{offset:M}=this.nextBufferRange()){return S<=0?new Uint8Array(0):(0,r.packBools)(this.sources[M])}readOffsets(b,{offset:S}=this.nextBufferRange()){return(0,l.toArrayBufferView)(Uint8Array,(0,l.toArrayBufferView)(b.OffsetArrayType,this.sources[S]))}readTypeIds(b,{offset:S}=this.nextBufferRange()){return(0,l.toArrayBufferView)(Uint8Array,(0,l.toArrayBufferView)(b.ArrayType,this.sources[S]))}readData(b,{offset:S}=this.nextBufferRange()){const{sources:M}=this;return i.DataType.isTimestamp(b)||(i.DataType.isInt(b)||i.DataType.isTime(b))&&b.bitWidth===64||i.DataType.isDuration(b)||i.DataType.isDate(b)&&b.unit===o.DateUnit.MILLISECOND?(0,l.toArrayBufferView)(Uint8Array,a.Int64.convertArray(M[S])):i.DataType.isDecimal(b)?(0,l.toArrayBufferView)(Uint8Array,a.Int128.convertArray(M[S])):i.DataType.isBinary(b)||i.DataType.isLargeBinary(b)||i.DataType.isFixedSizeBinary(b)?A(M[S]):i.DataType.isBool(b)?(0,r.packBools)(M[S]):i.DataType.isUtf8(b)||i.DataType.isLargeUtf8(b)?(0,s.encodeUtf8)(M[S].join("")):(0,l.toArrayBufferView)(Uint8Array,(0,l.toArrayBufferView)(b.ArrayType,M[S].map(I=>+I)))}}Eh.JSONVectorLoader=h;function A(m){const b=m.join(""),S=new Uint8Array(b.length/2);for(let M=0;M<b.length;M+=2)S[M>>1]=Number.parseInt(b.slice(M,M+2),16);return S}return Eh}var Bh={},ec={},na={},Oh={},Cy={},WP;function GE(){if(WP)return Cy;WP=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.BinaryBuilder=void 0;const t=Wu(),e=qn(),i=Gr();class n extends e.VariableWidthBuilder{constructor(s){super(s),this._values=new t.BufferBuilder(Uint8Array)}get byteLength(){let s=this._pendingLength+this.length*4;return this._offsets&&(s+=this._offsets.byteLength),this._values&&(s+=this._values.byteLength),this._nulls&&(s+=this._nulls.byteLength),s}setValue(s,a){return super.setValue(s,(0,i.toUint8Array)(a))}_flushPending(s,a){const o=this._offsets,l=this._values.reserve(a).buffer;let c=0;for(const[h,A]of s)if(A===void 0)o.set(h,0);else{const m=A.length;l.set(A,c),o.set(h,m),c+=m}}}return Cy.BinaryBuilder=n,Cy}var Py={},HP;function XE(){if(HP)return Py;HP=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.LargeBinaryBuilder=void 0;const t=Gr(),e=Wu(),i=qn();class n extends i.VariableWidthBuilder{constructor(s){super(s),this._values=new e.BufferBuilder(Uint8Array)}get byteLength(){let s=this._pendingLength+this.length*4;return this._offsets&&(s+=this._offsets.byteLength),this._values&&(s+=this._values.byteLength),this._nulls&&(s+=this._nulls.byteLength),s}setValue(s,a){return super.setValue(s,(0,t.toUint8Array)(a))}_flushPending(s,a){const o=this._offsets,l=this._values.reserve(a).buffer;let c=0;for(const[h,A]of s)if(A===void 0)o.set(h,BigInt(0));else{const m=A.length;l.set(A,c),o.set(h,BigInt(m)),c+=m}}}return Py.LargeBinaryBuilder=n,Py}var xy={},qP;function O7(){if(qP)return xy;qP=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.BoolBuilder=void 0;const t=Wu(),e=qn();class i extends e.Builder{constructor(r){super(r),this._values=new t.BitmapBufferBuilder}setValue(r,s){this._values.set(r,+s)}}return xy.BoolBuilder=i,xy}var ic={},YP;function R7(){if(YP)return ic;YP=1,Object.defineProperty(ic,"__esModule",{value:!0}),ic.DateMillisecondBuilder=ic.DateDayBuilder=ic.DateBuilder=void 0;const t=qn(),e=Xa();class i extends t.FixedWidthBuilder{}ic.DateBuilder=i,i.prototype._setValue=e.setDate;class n extends i{}ic.DateDayBuilder=n,n.prototype._setValue=e.setDateDay;class r extends i{}return ic.DateMillisecondBuilder=r,r.prototype._setValue=e.setDateMillisecond,ic}var Ny={},GP;function D7(){if(GP)return Ny;GP=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.DecimalBuilder=void 0;const t=qn(),e=Xa();class i extends t.FixedWidthBuilder{}return Ny.DecimalBuilder=i,i.prototype._setValue=e.setDecimal,Ny}var Fy={},XP;function C7(){if(XP)return Fy;XP=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.DictionaryBuilder=void 0;const t=Cn(),e=qn(),i=AT();class n extends e.Builder{constructor({type:s,nullValues:a,dictionaryHashFunction:o}){super({type:new t.Dictionary(s.dictionary,s.indices,s.id,s.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=(0,i.makeBuilder)({type:this.type.indices,nullValues:a}),this.dictionary=(0,i.makeBuilder)({type:this.type.dictionary,nullValues:null}),typeof o=="function"&&(this.valueToKey=o)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(s){return this.indices.isValid(s)}setValid(s,a){const o=this.indices;return a=o.setValid(s,a),this.length=o.length,a}setValue(s,a){const o=this._keysToIndices,l=this.valueToKey(a);let c=o[l];return c===void 0&&(o[l]=c=this._dictionaryOffset+this.dictionary.append(a).length-1),this.indices.setValue(s,c)}flush(){const s=this.type,a=this._dictionary,o=this.dictionary.toVector(),l=this.indices.flush().clone(s);return l.dictionary=a?a.concat(o):o,this.finished||(this._dictionaryOffset+=o.length),this._dictionary=l.dictionary,this.clear(),l}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(s){return typeof s=="string"?s:`${s}`}}return Fy.DictionaryBuilder=n,Fy}var Ly={},QP;function P7(){if(QP)return Ly;QP=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.FixedSizeBinaryBuilder=void 0;const t=qn(),e=Xa();class i extends t.FixedWidthBuilder{}return Ly.FixedSizeBinaryBuilder=i,i.prototype._setValue=e.setFixedSizeBinary,Ly}var Uy={},KP;function x7(){if(KP)return Uy;KP=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.FixedSizeListBuilder=void 0;const t=Sa(),e=qn(),i=Cn();class n extends e.Builder{setValue(s,a){const[o]=this.children,l=s*this.stride;for(let c=-1,h=a.length;++c<h;)o.set(l+c,a[c])}addChild(s,a="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const o=this.children.push(s);return this.type=new i.FixedSizeList(this.type.listSize,new t.Field(a,s.type,!0)),o}}return Uy.FixedSizeListBuilder=n,Uy}var fo={},ZP;function N7(){if(ZP)return fo;ZP=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.Float64Builder=fo.Float32Builder=fo.Float16Builder=fo.FloatBuilder=void 0;const t=uT(),e=qn();class i extends e.FixedWidthBuilder{setValue(o,l){this._values.set(o,l)}}fo.FloatBuilder=i;class n extends i{setValue(o,l){super.setValue(o,(0,t.float64ToUint16)(l))}}fo.Float16Builder=n;class r extends i{}fo.Float32Builder=r;class s extends i{}return fo.Float64Builder=s,fo}var nc={},JP;function F7(){if(JP)return nc;JP=1,Object.defineProperty(nc,"__esModule",{value:!0}),nc.IntervalYearMonthBuilder=nc.IntervalDayTimeBuilder=nc.IntervalBuilder=void 0;const t=qn(),e=Xa();class i extends t.FixedWidthBuilder{}nc.IntervalBuilder=i,i.prototype._setValue=e.setIntervalValue;class n extends i{}nc.IntervalDayTimeBuilder=n,n.prototype._setValue=e.setIntervalDayTime;class r extends i{}return nc.IntervalYearMonthBuilder=r,r.prototype._setValue=e.setIntervalYearMonth,nc}var ra={},t6;function L7(){if(t6)return ra;t6=1,Object.defineProperty(ra,"__esModule",{value:!0}),ra.DurationNanosecondBuilder=ra.DurationMicrosecondBuilder=ra.DurationMillisecondBuilder=ra.DurationSecondBuilder=ra.DurationBuilder=void 0;const t=qn(),e=Xa();class i extends t.FixedWidthBuilder{}ra.DurationBuilder=i,i.prototype._setValue=e.setDuration;class n extends i{}ra.DurationSecondBuilder=n,n.prototype._setValue=e.setDurationSecond;class r extends i{}ra.DurationMillisecondBuilder=r,r.prototype._setValue=e.setDurationMillisecond;class s extends i{}ra.DurationMicrosecondBuilder=s,s.prototype._setValue=e.setDurationMicrosecond;class a extends i{}return ra.DurationNanosecondBuilder=a,a.prototype._setValue=e.setDurationNanosecond,ra}var or={},e6;function U7(){if(e6)return or;e6=1,Object.defineProperty(or,"__esModule",{value:!0}),or.Uint64Builder=or.Uint32Builder=or.Uint16Builder=or.Uint8Builder=or.Int64Builder=or.Int32Builder=or.Int16Builder=or.Int8Builder=or.IntBuilder=void 0;const t=qn();class e extends t.FixedWidthBuilder{setValue(A,m){this._values.set(A,m)}}or.IntBuilder=e;class i extends e{}or.Int8Builder=i;class n extends e{}or.Int16Builder=n;class r extends e{}or.Int32Builder=r;class s extends e{}or.Int64Builder=s;class a extends e{}or.Uint8Builder=a;class o extends e{}or.Uint16Builder=o;class l extends e{}or.Uint32Builder=l;class c extends e{}return or.Uint64Builder=c,or}var ky={},i6;function k7(){if(i6)return ky;i6=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.ListBuilder=void 0;const t=Sa(),e=Cn(),i=Wu(),n=qn();class r extends n.VariableWidthBuilder{constructor(a){super(a),this._offsets=new i.OffsetsBufferBuilder(a.type)}addChild(a,o="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=a,this.type=new e.List(new t.Field(o,a.type,!0)),this.numChildren-1}_flushPending(a){const o=this._offsets,[l]=this.children;for(const[c,h]of a)if(typeof h>"u")o.set(c,0);else{const A=h,m=A.length,b=o.set(c,m).buffer[c];for(let S=-1;++S<m;)l.set(b+S,A[S])}}}return ky.ListBuilder=r,ky}var jy={},n6;function j7(){if(n6)return jy;n6=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.MapBuilder=void 0;const t=Sa(),e=Cn(),i=qn();class n extends i.VariableWidthBuilder{set(s,a){return super.set(s,a)}setValue(s,a){const o=a instanceof Map?a:new Map(Object.entries(a)),l=this._pending||(this._pending=new Map),c=l.get(s);c&&(this._pendingLength-=c.size),this._pendingLength+=o.size,l.set(s,o)}addChild(s,a=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=s,this.type=new e.Map_(new t.Field(a,s.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(s){const a=this._offsets,[o]=this.children;for(const[l,c]of s)if(c===void 0)a.set(l,0);else{let{[l]:h,[l+1]:A}=a.set(l,c.size).buffer;for(const m of c.entries())if(o.set(h,m),++h>=A)break}}}return jy.MapBuilder=n,jy}var zy={},r6;function z7(){if(r6)return zy;r6=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.NullBuilder=void 0;const t=qn();class e extends t.Builder{setValue(n,r){}setValid(n,r){return this.length=Math.max(n+1,this.length),r}}return zy.NullBuilder=e,zy}var Vy={},s6;function V7(){if(s6)return Vy;s6=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.StructBuilder=void 0;const t=Sa(),e=qn(),i=Cn();class n extends e.Builder{setValue(s,a){const{children:o,type:l}=this;switch(Array.isArray(a)||a.constructor){case!0:return l.children.forEach((c,h)=>o[h].set(s,a[h]));case Map:return l.children.forEach((c,h)=>o[h].set(s,a.get(c.name)));default:return l.children.forEach((c,h)=>o[h].set(s,a[c.name]))}}setValid(s,a){return super.setValid(s,a)||this.children.forEach(o=>o.setValid(s,a)),a}addChild(s,a=`${this.numChildren}`){const o=this.children.push(s);return this.type=new i.Struct([...this.type.children,new t.Field(a,s.type,!0)]),o}}return Vy.StructBuilder=n,Vy}var sa={},a6;function $7(){if(a6)return sa;a6=1,Object.defineProperty(sa,"__esModule",{value:!0}),sa.TimestampNanosecondBuilder=sa.TimestampMicrosecondBuilder=sa.TimestampMillisecondBuilder=sa.TimestampSecondBuilder=sa.TimestampBuilder=void 0;const t=qn(),e=Xa();class i extends t.FixedWidthBuilder{}sa.TimestampBuilder=i,i.prototype._setValue=e.setTimestamp;class n extends i{}sa.TimestampSecondBuilder=n,n.prototype._setValue=e.setTimestampSecond;class r extends i{}sa.TimestampMillisecondBuilder=r,r.prototype._setValue=e.setTimestampMillisecond;class s extends i{}sa.TimestampMicrosecondBuilder=s,s.prototype._setValue=e.setTimestampMicrosecond;class a extends i{}return sa.TimestampNanosecondBuilder=a,a.prototype._setValue=e.setTimestampNanosecond,sa}var aa={},o6;function W7(){if(o6)return aa;o6=1,Object.defineProperty(aa,"__esModule",{value:!0}),aa.TimeNanosecondBuilder=aa.TimeMicrosecondBuilder=aa.TimeMillisecondBuilder=aa.TimeSecondBuilder=aa.TimeBuilder=void 0;const t=qn(),e=Xa();class i extends t.FixedWidthBuilder{}aa.TimeBuilder=i,i.prototype._setValue=e.setTime;class n extends i{}aa.TimeSecondBuilder=n,n.prototype._setValue=e.setTimeSecond;class r extends i{}aa.TimeMillisecondBuilder=r,r.prototype._setValue=e.setTimeMillisecond;class s extends i{}aa.TimeMicrosecondBuilder=s,s.prototype._setValue=e.setTimeMicrosecond;class a extends i{}return aa.TimeNanosecondBuilder=a,a.prototype._setValue=e.setTimeNanosecond,aa}var rc={},l6;function H7(){if(l6)return rc;l6=1,Object.defineProperty(rc,"__esModule",{value:!0}),rc.DenseUnionBuilder=rc.SparseUnionBuilder=rc.UnionBuilder=void 0;const t=Sa(),e=Wu(),i=qn(),n=Cn();class r extends i.Builder{constructor(l){super(l),this._typeIds=new e.DataBufferBuilder(Int8Array,0,1),typeof l.valueToChildTypeId=="function"&&(this._valueToChildTypeId=l.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(l,c){return this.set(this.length,l,c)}set(l,c,h){return h===void 0&&(h=this._valueToChildTypeId(this,c,l)),this.setValue(l,c,h),this}setValue(l,c,h){this._typeIds.set(l,h);const A=this.type.typeIdToChildIndex[h],m=this.children[A];m==null||m.set(l,c)}addChild(l,c=`${this.children.length}`){const h=this.children.push(l),{type:{children:A,mode:m,typeIds:b}}=this,S=[...A,new t.Field(c,l.type)];return this.type=new n.Union(m,[...b,h],S),h}_valueToChildTypeId(l,c,h){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}rc.UnionBuilder=r;class s extends r{}rc.SparseUnionBuilder=s;class a extends r{constructor(l){super(l),this._offsets=new e.DataBufferBuilder(Int32Array)}setValue(l,c,h){const A=this._typeIds.set(l,h).buffer[l],m=this.getChildAt(this.type.typeIdToChildIndex[A]),b=this._offsets.set(l,m.length).buffer[l];m==null||m.set(b,c)}}return rc.DenseUnionBuilder=a,rc}var $y={},c6;function q7(){if(c6)return $y;c6=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.Utf8Builder=void 0;const t=Rf(),e=GE(),i=Wu(),n=qn();class r extends n.VariableWidthBuilder{constructor(a){super(a),this._values=new i.BufferBuilder(Uint8Array)}get byteLength(){let a=this._pendingLength+this.length*4;return this._offsets&&(a+=this._offsets.byteLength),this._values&&(a+=this._values.byteLength),this._nulls&&(a+=this._nulls.byteLength),a}setValue(a,o){return super.setValue(a,(0,t.encodeUtf8)(o))}_flushPending(a,o){}}return $y.Utf8Builder=r,r.prototype._flushPending=e.BinaryBuilder.prototype._flushPending,$y}var Wy={},u6;function Y7(){if(u6)return Wy;u6=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.LargeUtf8Builder=void 0;const t=Rf(),e=Wu(),i=qn(),n=XE();class r extends i.VariableWidthBuilder{constructor(a){super(a),this._values=new e.BufferBuilder(Uint8Array)}get byteLength(){let a=this._pendingLength+this.length*4;return this._offsets&&(a+=this._offsets.byteLength),this._values&&(a+=this._values.byteLength),this._nulls&&(a+=this._nulls.byteLength),a}setValue(a,o){return super.setValue(a,(0,t.encodeUtf8)(o))}_flushPending(a,o){}}return Wy.LargeUtf8Builder=r,r.prototype._flushPending=n.LargeBinaryBuilder.prototype._flushPending,Wy}var h6;function det(){if(h6)return Oh;h6=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.instance=Oh.GetBuilderCtor=void 0;const t=Ta(),e=GE(),i=XE(),n=O7(),r=R7(),s=D7(),a=C7(),o=P7(),l=x7(),c=N7(),h=F7(),A=L7(),m=U7(),b=k7(),S=j7(),M=z7(),I=V7(),O=$7(),D=W7(),B=H7(),P=q7(),j=Y7();class N extends t.Visitor{visitNull(){return M.NullBuilder}visitBool(){return n.BoolBuilder}visitInt(){return m.IntBuilder}visitInt8(){return m.Int8Builder}visitInt16(){return m.Int16Builder}visitInt32(){return m.Int32Builder}visitInt64(){return m.Int64Builder}visitUint8(){return m.Uint8Builder}visitUint16(){return m.Uint16Builder}visitUint32(){return m.Uint32Builder}visitUint64(){return m.Uint64Builder}visitFloat(){return c.FloatBuilder}visitFloat16(){return c.Float16Builder}visitFloat32(){return c.Float32Builder}visitFloat64(){return c.Float64Builder}visitUtf8(){return P.Utf8Builder}visitLargeUtf8(){return j.LargeUtf8Builder}visitBinary(){return e.BinaryBuilder}visitLargeBinary(){return i.LargeBinaryBuilder}visitFixedSizeBinary(){return o.FixedSizeBinaryBuilder}visitDate(){return r.DateBuilder}visitDateDay(){return r.DateDayBuilder}visitDateMillisecond(){return r.DateMillisecondBuilder}visitTimestamp(){return O.TimestampBuilder}visitTimestampSecond(){return O.TimestampSecondBuilder}visitTimestampMillisecond(){return O.TimestampMillisecondBuilder}visitTimestampMicrosecond(){return O.TimestampMicrosecondBuilder}visitTimestampNanosecond(){return O.TimestampNanosecondBuilder}visitTime(){return D.TimeBuilder}visitTimeSecond(){return D.TimeSecondBuilder}visitTimeMillisecond(){return D.TimeMillisecondBuilder}visitTimeMicrosecond(){return D.TimeMicrosecondBuilder}visitTimeNanosecond(){return D.TimeNanosecondBuilder}visitDecimal(){return s.DecimalBuilder}visitList(){return b.ListBuilder}visitStruct(){return I.StructBuilder}visitUnion(){return B.UnionBuilder}visitDenseUnion(){return B.DenseUnionBuilder}visitSparseUnion(){return B.SparseUnionBuilder}visitDictionary(){return a.DictionaryBuilder}visitInterval(){return h.IntervalBuilder}visitIntervalDayTime(){return h.IntervalDayTimeBuilder}visitIntervalYearMonth(){return h.IntervalYearMonthBuilder}visitDuration(){return A.DurationBuilder}visitDurationSecond(){return A.DurationSecondBuilder}visitDurationMillisecond(){return A.DurationMillisecondBuilder}visitDurationMicrosecond(){return A.DurationMicrosecondBuilder}visitDurationNanosecond(){return A.DurationNanosecondBuilder}visitFixedSizeList(){return l.FixedSizeListBuilder}visitMap(){return S.MapBuilder}}return Oh.GetBuilderCtor=N,Oh.instance=new N,Oh}var Xw={},f6;function dT(){return f6||(f6=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.compareTypes=t.compareFields=t.compareSchemas=t.instance=t.TypeComparator=void 0;const e=Ta();class i extends e.Visitor{compareSchemas(F,$){return F===$||$ instanceof F.constructor&&this.compareManyFields(F.fields,$.fields)}compareManyFields(F,$){return F===$||Array.isArray(F)&&Array.isArray($)&&F.length===$.length&&F.every((V,Z)=>this.compareFields(V,$[Z]))}compareFields(F,$){return F===$||$ instanceof F.constructor&&F.name===$.name&&F.nullable===$.nullable&&this.visit(F.type,$.type)}}t.TypeComparator=i;function n(N,F){return F instanceof N.constructor}function r(N,F){return N===F||n(N,F)}function s(N,F){return N===F||n(N,F)&&N.bitWidth===F.bitWidth&&N.isSigned===F.isSigned}function a(N,F){return N===F||n(N,F)&&N.precision===F.precision}function o(N,F){return N===F||n(N,F)&&N.byteWidth===F.byteWidth}function l(N,F){return N===F||n(N,F)&&N.unit===F.unit}function c(N,F){return N===F||n(N,F)&&N.unit===F.unit&&N.timezone===F.timezone}function h(N,F){return N===F||n(N,F)&&N.unit===F.unit&&N.bitWidth===F.bitWidth}function A(N,F){return N===F||n(N,F)&&N.children.length===F.children.length&&t.instance.compareManyFields(N.children,F.children)}function m(N,F){return N===F||n(N,F)&&N.children.length===F.children.length&&t.instance.compareManyFields(N.children,F.children)}function b(N,F){return N===F||n(N,F)&&N.mode===F.mode&&N.typeIds.every(($,V)=>$===F.typeIds[V])&&t.instance.compareManyFields(N.children,F.children)}function S(N,F){return N===F||n(N,F)&&N.id===F.id&&N.isOrdered===F.isOrdered&&t.instance.visit(N.indices,F.indices)&&t.instance.visit(N.dictionary,F.dictionary)}function M(N,F){return N===F||n(N,F)&&N.unit===F.unit}function I(N,F){return N===F||n(N,F)&&N.unit===F.unit}function O(N,F){return N===F||n(N,F)&&N.listSize===F.listSize&&N.children.length===F.children.length&&t.instance.compareManyFields(N.children,F.children)}function D(N,F){return N===F||n(N,F)&&N.keysSorted===F.keysSorted&&N.children.length===F.children.length&&t.instance.compareManyFields(N.children,F.children)}i.prototype.visitNull=r,i.prototype.visitBool=r,i.prototype.visitInt=s,i.prototype.visitInt8=s,i.prototype.visitInt16=s,i.prototype.visitInt32=s,i.prototype.visitInt64=s,i.prototype.visitUint8=s,i.prototype.visitUint16=s,i.prototype.visitUint32=s,i.prototype.visitUint64=s,i.prototype.visitFloat=a,i.prototype.visitFloat16=a,i.prototype.visitFloat32=a,i.prototype.visitFloat64=a,i.prototype.visitUtf8=r,i.prototype.visitLargeUtf8=r,i.prototype.visitBinary=r,i.prototype.visitLargeBinary=r,i.prototype.visitFixedSizeBinary=o,i.prototype.visitDate=l,i.prototype.visitDateDay=l,i.prototype.visitDateMillisecond=l,i.prototype.visitTimestamp=c,i.prototype.visitTimestampSecond=c,i.prototype.visitTimestampMillisecond=c,i.prototype.visitTimestampMicrosecond=c,i.prototype.visitTimestampNanosecond=c,i.prototype.visitTime=h,i.prototype.visitTimeSecond=h,i.prototype.visitTimeMillisecond=h,i.prototype.visitTimeMicrosecond=h,i.prototype.visitTimeNanosecond=h,i.prototype.visitDecimal=r,i.prototype.visitList=A,i.prototype.visitStruct=m,i.prototype.visitUnion=b,i.prototype.visitDenseUnion=b,i.prototype.visitSparseUnion=b,i.prototype.visitDictionary=S,i.prototype.visitInterval=M,i.prototype.visitIntervalDayTime=M,i.prototype.visitIntervalYearMonth=M,i.prototype.visitDuration=I,i.prototype.visitDurationSecond=I,i.prototype.visitDurationMillisecond=I,i.prototype.visitDurationMicrosecond=I,i.prototype.visitDurationNanosecond=I,i.prototype.visitFixedSizeList=O,i.prototype.visitMap=D,t.instance=new i;function B(N,F){return t.instance.compareSchemas(N,F)}t.compareSchemas=B;function P(N,F){return t.instance.compareFields(N,F)}t.compareFields=P;function j(N,F){return t.instance.visit(N,F)}t.compareTypes=j}(Xw)),Xw}var d6;function AT(){if(d6)return na;d6=1,Object.defineProperty(na,"__esModule",{value:!0}),na.builderThroughAsyncIterable=na.builderThroughIterable=na.tableFromJSON=na.vectorFromArray=na.makeBuilder=void 0;const t=Bn,e=Sa(),i=Cn(),n=Rc(),r=js(),s=det(),a=Q_(),o=Ff(),l=dT();function c(M){const I=M.type,O=new(s.instance.getVisitFn(I)())(M);if(I.children&&I.children.length>0){const D=M.children||[],B={nullValues:M.nullValues},P=Array.isArray(D)?(j,N)=>D[N]||B:({name:j})=>D[j]||B;for(const[j,N]of I.children.entries()){const{type:F}=N,$=P(N,j);O.children.push(c(Object.assign(Object.assign({},$),{type:F})))}}return O}na.makeBuilder=c;function h(M,I){if(M instanceof n.Data||M instanceof r.Vector||M.type instanceof i.DataType||ArrayBuffer.isView(M))return(0,r.makeVector)(M);const O={type:I??m(M),nullValues:[null]},D=[...b(O)(M)],B=D.length===1?D[0]:D.reduce((P,j)=>P.concat(j));return i.DataType.isDictionary(B.type)?B.memoize():B}na.vectorFromArray=h;function A(M){const I=h(M),O=new o.RecordBatch(new e.Schema(I.type.children),I.data[0]);return new a.Table(O)}na.tableFromJSON=A;function m(M){if(M.length===0)return new i.Null;let I=0,O=0,D=0,B=0,P=0,j=0,N=0,F=0;for(const $ of M){if($==null){++I;continue}switch(typeof $){case"bigint":++j;continue;case"boolean":++N;continue;case"number":++B;continue;case"string":++P;continue;case"object":Array.isArray($)?++O:Object.prototype.toString.call($)==="[object Date]"?++F:++D;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}if(B+I===M.length)return new i.Float64;if(P+I===M.length)return new i.Dictionary(new i.Utf8,new i.Int32);if(j+I===M.length)return new i.Int64;if(N+I===M.length)return new i.Bool;if(F+I===M.length)return new i.TimestampMillisecond;if(O+I===M.length){const $=M,V=m($[$.findIndex(Z=>Z!=null)]);if($.every(Z=>Z==null||(0,l.compareTypes)(V,m(Z))))return new i.List(new e.Field("",V,!0))}else if(D+I===M.length){const $=new Map;for(const V of M)for(const Z of Object.keys(V))!$.has(Z)&&V[Z]!=null&&$.set(Z,new e.Field(Z,m([V[Z]]),!0));return new i.Struct([...$.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function b(M){const{["queueingStrategy"]:I="count"}=M,{["highWaterMark"]:O=I!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=M,D=I!=="bytes"?"length":"byteLength";return function*(B){let P=0;const j=c(M);for(const N of B)j.append(N)[D]>=O&&++P&&(yield j.toVector());(j.finish().length>0||P===0)&&(yield j.toVector())}}na.builderThroughIterable=b;function S(M){const{["queueingStrategy"]:I="count"}=M,{["highWaterMark"]:O=I!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=M,D=I!=="bytes"?"length":"byteLength";return function(B){return t.__asyncGenerator(this,arguments,function*(){var P,j,N,F;let $=0;const V=c(M);try{for(var Z=!0,nt=t.__asyncValues(B),X;X=yield t.__await(nt.next()),P=X.done,!P;Z=!0){F=X.value,Z=!1;const bt=F;V.append(bt)[D]>=O&&++$&&(yield yield t.__await(V.toVector()))}}catch(bt){j={error:bt}}finally{try{!Z&&!P&&(N=nt.return)&&(yield t.__await(N.call(nt)))}finally{if(j)throw j.error}}(V.finish().length>0||$===0)&&(yield yield t.__await(V.toVector()))})}}return na.builderThroughAsyncIterable=S,na}var Hy={},A6;function Aet(){if(A6)return Hy;A6=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.distributeVectorsIntoRecordBatches=void 0;const t=Rc(),e=Cn(),i=Ff();function n(a,o){return r(a,o.map(l=>l.data.concat()))}Hy.distributeVectorsIntoRecordBatches=n;function r(a,o){const l=[...a.fields],c=[],h={numBatches:o.reduce((O,D)=>Math.max(O,D.length),0)};let A=0,m=0,b=-1;const S=o.length;let M,I=[];for(;h.numBatches-- >0;){for(m=Number.POSITIVE_INFINITY,b=-1;++b<S;)I[b]=M=o[b].shift(),m=Math.min(m,M?M.length:m);Number.isFinite(m)&&(I=s(l,m,I,o,h),m>0&&(c[A++]=(0,t.makeData)({type:new e.Struct(l),length:m,nullCount:0,children:I.slice()})))}return[a=a.assign(l),c.map(O=>new i.RecordBatch(a,O))]}function s(a,o,l,c,h){var A;const m=(o+63&-64)>>3;for(let b=-1,S=c.length;++b<S;){const M=l[b],I=M==null?void 0:M.length;if(I>=o)I===o?l[b]=M:(l[b]=M.slice(0,o),h.numBatches=Math.max(h.numBatches,c[b].unshift(M.slice(o,I-o))));else{const O=a[b];a[b]=O.clone({nullable:!0}),l[b]=(A=M==null?void 0:M._changeLengthAndBackfillNullBitmap(o))!==null&&A!==void 0?A:(0,t.makeData)({type:O.type,length:o,nullCount:o,nullBitmap:new Uint8Array(m)})}}return l}return Hy}var g6;function Q_(){if(g6)return ec;g6=1;var t;Object.defineProperty(ec,"__esModule",{value:!0}),ec.tableFromArrays=ec.makeTable=ec.Table=void 0;const e=ir(),i=Rc(),n=AT(),r=js(),s=Sa(),a=Cn(),o=dT(),l=Aet(),c=HE(),h=u0(),A=Xa(),m=qE(),b=YE(),S=X_(),M=Ff();class I{constructor(...P){var j,N;if(P.length===0)return this.batches=[],this.schema=new s.Schema([]),this._offsets=[0],this;let F,$;P[0]instanceof s.Schema&&(F=P.shift()),P.at(-1)instanceof Uint32Array&&($=P.pop());const V=nt=>{if(nt){if(nt instanceof M.RecordBatch)return[nt];if(nt instanceof I)return nt.batches;if(nt instanceof i.Data){if(nt.type instanceof a.Struct)return[new M.RecordBatch(new s.Schema(nt.type.children),nt)]}else{if(Array.isArray(nt))return nt.flatMap(X=>V(X));if(typeof nt[Symbol.iterator]=="function")return[...nt].flatMap(X=>V(X));if(typeof nt=="object"){const X=Object.keys(nt),bt=X.map(H=>new r.Vector([nt[H]])),Tt=F??new s.Schema(X.map((H,k)=>new s.Field(String(H),bt[k].type,bt[k].nullable))),[,Ot]=(0,l.distributeVectorsIntoRecordBatches)(Tt,bt);return Ot.length===0?[new M.RecordBatch(nt)]:Ot}}}return[]},Z=P.flatMap(nt=>V(nt));if(F=(N=F??((j=Z[0])===null||j===void 0?void 0:j.schema))!==null&&N!==void 0?N:new s.Schema([]),!(F instanceof s.Schema))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const nt of Z){if(!(nt instanceof M.RecordBatch))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!(0,o.compareSchemas)(F,nt.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=F,this.batches=Z,this._offsets=$??(0,c.computeChunkOffsets)(this.data)}get data(){return this.batches.map(({data:P})=>P)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((P,j)=>P+j.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=(0,c.computeChunkNullCounts)(this.data)),this._nullCount}isValid(P){return!1}get(P){return null}at(P){return this.get((0,S.wrapIndex)(P,this.numRows))}set(P,j){}indexOf(P,j){return-1}[Symbol.iterator](){return this.batches.length>0?b.instance.visit(new r.Vector(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...P){const j=this.schema,N=this.data.concat(P.flatMap(({data:F})=>F));return new I(j,N.map(F=>new M.RecordBatch(j,F)))}slice(P,j){const N=this.schema;[P,j]=(0,S.clampRange)({length:this.numRows},P,j);const F=(0,c.sliceChunks)(this.data,this._offsets,P,j);return new I(N,F.map($=>new M.RecordBatch(N,$)))}getChild(P){return this.getChildAt(this.schema.fields.findIndex(j=>j.name===P))}getChildAt(P){if(P>-1&&P<this.schema.fields.length){const j=this.data.map(N=>N.children[P]);if(j.length===0){const{type:N}=this.schema.fields[P],F=(0,i.makeData)({type:N,length:0,nullCount:0});j.push(F._changeLengthAndBackfillNullBitmap(this.numRows))}return new r.Vector(j)}return null}setChild(P,j){var N;return this.setChildAt((N=this.schema.fields)===null||N===void 0?void 0:N.findIndex(F=>F.name===P),j)}setChildAt(P,j){let N=this.schema,F=[...this.batches];if(P>-1&&P<this.numCols){j||(j=new r.Vector([(0,i.makeData)({type:new a.Null,length:this.numRows})]));const $=N.fields.slice(),V=$[P].clone({type:j.type}),Z=this.schema.fields.map((nt,X)=>this.getChildAt(X));[$[P],Z[P]]=[V,j],[N,F]=(0,l.distributeVectorsIntoRecordBatches)(N,Z)}return new I(N,F)}select(P){const j=this.schema.fields.reduce((N,F,$)=>N.set(F.name,$),new Map);return this.selectAt(P.map(N=>j.get(N)).filter(N=>N>-1))}selectAt(P){const j=this.schema.selectAt(P),N=this.batches.map(F=>F.selectAt(P));return new I(j,N)}assign(P){const j=this.schema.fields,[N,F]=P.schema.fields.reduce((Z,nt,X)=>{const[bt,Tt]=Z,Ot=j.findIndex(H=>H.name===nt.name);return~Ot?Tt[Ot]=X:bt.push(X),Z},[[],[]]),$=this.schema.assign(P.schema),V=[...j.map((Z,nt)=>[nt,F[nt]]).map(([Z,nt])=>nt===void 0?this.getChildAt(Z):P.getChildAt(nt)),...N.map(Z=>P.getChildAt(Z))].filter(Boolean);return new I(...(0,l.distributeVectorsIntoRecordBatches)($,V))}}ec.Table=I,t=Symbol.toStringTag,I[t]=(B=>(B.schema=null,B.batches=[],B._offsets=new Uint32Array([0]),B._nullCount=-1,B[Symbol.isConcatSpreadable]=!0,B.isValid=(0,c.wrapChunkedCall1)(c.isChunkedValid),B.get=(0,c.wrapChunkedCall1)(h.instance.getVisitFn(e.Type.Struct)),B.set=(0,c.wrapChunkedCall2)(A.instance.getVisitFn(e.Type.Struct)),B.indexOf=(0,c.wrapChunkedIndexOf)(m.instance.getVisitFn(e.Type.Struct)),"Table"))(I.prototype);function O(B){const P={},j=Object.entries(B);for(const[N,F]of j)P[N]=(0,r.makeVector)(F);return new I(P)}ec.makeTable=O;function D(B){const P={},j=Object.entries(B);for(const[N,F]of j)P[N]=(0,n.vectorFromArray)(F);return new I(P)}return ec.tableFromArrays=D,ec}var y6;function Ff(){if(y6)return Bh;y6=1;var t;Object.defineProperty(Bh,"__esModule",{value:!0}),Bh._InternalEmptyPlaceholderRecordBatch=Bh.RecordBatch=void 0;const e=Rc(),i=Q_(),n=js(),r=Sa(),s=Cn(),a=X_(),o=u0(),l=Xa(),c=qE(),h=YE();class A{constructor(...I){switch(I.length){case 2:{if([this.schema]=I,!(this.schema instanceof r.Schema))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=(0,e.makeData)({nullCount:0,type:new s.Struct(this.schema.fields),children:this.schema.fields.map(O=>(0,e.makeData)({type:O.type,nullCount:0}))})]=I,!(this.data instanceof e.Data))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=m(this.schema,this.data.children);break}case 1:{const[O]=I,{fields:D,children:B,length:P}=Object.keys(O).reduce((F,$,V)=>(F.children[V]=O[$],F.length=Math.max(F.length,O[$].length),F.fields[V]=r.Field.new({name:$,type:O[$].type,nullable:!0}),F),{length:0,fields:new Array,children:new Array}),j=new r.Schema(D),N=(0,e.makeData)({type:new s.Struct(D),length:P,children:B,nullCount:0});[this.schema,this.data]=m(j,N.children,P);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=b(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(I){return this.data.getValid(I)}get(I){return o.instance.visit(this.data,I)}at(I){return this.get((0,a.wrapIndex)(I,this.numRows))}set(I,O){return l.instance.visit(this.data,I,O)}indexOf(I,O){return c.instance.visit(this.data,I,O)}[Symbol.iterator](){return h.instance.visit(new n.Vector([this.data]))}toArray(){return[...this]}concat(...I){return new i.Table(this.schema,[this,...I])}slice(I,O){const[D]=new n.Vector([this.data]).slice(I,O).data;return new A(this.schema,D)}getChild(I){var O;return this.getChildAt((O=this.schema.fields)===null||O===void 0?void 0:O.findIndex(D=>D.name===I))}getChildAt(I){return I>-1&&I<this.schema.fields.length?new n.Vector([this.data.children[I]]):null}setChild(I,O){var D;return this.setChildAt((D=this.schema.fields)===null||D===void 0?void 0:D.findIndex(B=>B.name===I),O)}setChildAt(I,O){let D=this.schema,B=this.data;if(I>-1&&I<this.numCols){O||(O=new n.Vector([(0,e.makeData)({type:new s.Null,length:this.numRows})]));const P=D.fields.slice(),j=B.children.slice(),N=P[I].clone({type:O.type});[P[I],j[I]]=[N,O.data[0]],D=new r.Schema(P,new Map(this.schema.metadata)),B=(0,e.makeData)({type:new s.Struct(P),children:j})}return new A(D,B)}select(I){const O=this.schema.select(I),D=new s.Struct(O.fields),B=[];for(const P of I){const j=this.schema.fields.findIndex(N=>N.name===P);~j&&(B[j]=this.data.children[j])}return new A(O,(0,e.makeData)({type:D,length:this.numRows,children:B}))}selectAt(I){const O=this.schema.selectAt(I),D=I.map(P=>this.data.children[P]).filter(Boolean),B=(0,e.makeData)({type:new s.Struct(O.fields),length:this.numRows,children:D});return new A(O,B)}}Bh.RecordBatch=A,t=Symbol.toStringTag,A[t]=(M=>(M._nullCount=-1,M[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(A.prototype);function m(M,I,O=I.reduce((D,B)=>Math.max(D,B.length),0)){var D;const B=[...M.fields],P=[...I],j=(O+63&-64)>>3;for(const[N,F]of M.fields.entries()){const $=I[N];(!$||$.length!==O)&&(B[N]=F.clone({nullable:!0}),P[N]=(D=$==null?void 0:$._changeLengthAndBackfillNullBitmap(O))!==null&&D!==void 0?D:(0,e.makeData)({type:F.type,length:O,nullCount:O,nullBitmap:new Uint8Array(j)}))}return[M.assign(B),(0,e.makeData)({type:new s.Struct(B),length:O,children:P})]}function b(M,I,O=new Map){var D,B;if(((D=M==null?void 0:M.length)!==null&&D!==void 0?D:0)>0&&(M==null?void 0:M.length)===(I==null?void 0:I.length))for(let P=-1,j=M.length;++P<j;){const{type:N}=M[P],F=I[P];for(const $ of[F,...((B=F==null?void 0:F.dictionary)===null||B===void 0?void 0:B.data)||[]])b(N.children,$==null?void 0:$.children,O);if(s.DataType.isDictionary(N)){const{id:$}=N;if(!O.has($))F!=null&&F.dictionary&&O.set($,F.dictionary);else if(O.get($)!==F.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return O}class S extends A{constructor(I){const O=I.fields.map(B=>(0,e.makeData)({type:B.type})),D=(0,e.makeData)({type:new s.Struct(I.fields),nullCount:0,children:O});super(I,D)}}return Bh._InternalEmptyPlaceholderRecordBatch=S,Bh}var Qw={},oa={},qy={},p6;function get(){if(p6)return qy;p6=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.Message=void 0;const t=Re,e=Y_(),i=VE(),n=BE();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsMessage(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsMessage(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}version(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.MetadataVersion.V1}headerType(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readUint8(this.bb_pos+a):i.MessageHeader.NONE}header(a){const o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__union(a,this.bb_pos+o):null}bodyLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}customMetadata(a,o){const l=this.bb.__offset(this.bb_pos,12);return l?(o||new e.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,12);return a?this.bb.__vector_len(this.bb_pos+a):0}static startMessage(a){a.startObject(5)}static addVersion(a,o){a.addFieldInt16(0,o,n.MetadataVersion.V1)}static addHeaderType(a,o){a.addFieldInt8(1,o,i.MessageHeader.NONE)}static addHeader(a,o){a.addFieldOffset(2,o,0)}static addBodyLength(a,o){a.addFieldInt64(3,o,BigInt("0"))}static addCustomMetadata(a,o){a.addFieldOffset(4,o,0)}static createCustomMetadataVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startCustomMetadataVector(a,o){a.startVector(4,o,4)}static endMessage(a){return a.endObject()}static finishMessageBuffer(a,o){a.finish(o)}static finishSizePrefixedMessageBuffer(a,o){a.finish(o,void 0,!0)}static createMessage(a,o,l,c,h,A){return r.startMessage(a),r.addVersion(a,o),r.addHeaderType(a,l),r.addHeader(a,c),r.addBodyLength(a,h),r.addCustomMetadata(a,A),r.endMessage(a)}}return qy.Message=r,qy}var Rh={},m6;function yet(){if(m6)return Rh;m6=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.instance=Rh.TypeAssembler=void 0;const t=Ta(),e=b7(),i=Pf(),n=NE(),r=g7(),s=p7(),a=y7(),o=T7(),l=m7(),c=DE(),h=RE(),A=UE(),m=kE(),b=FE(),S=CE(),M=_7(),I=v7(),O=jE(),D=A7(),B=PE(),P=xE(),j=LE();class N extends t.Visitor{visit($,V){return $==null||V==null?void 0:super.visit($,V)}visitNull($,V){return e.Null.startNull(V),e.Null.endNull(V)}visitInt($,V){return i.Int.startInt(V),i.Int.addBitWidth(V,$.bitWidth),i.Int.addIsSigned(V,$.isSigned),i.Int.endInt(V)}visitFloat($,V){return n.FloatingPoint.startFloatingPoint(V),n.FloatingPoint.addPrecision(V,$.precision),n.FloatingPoint.endFloatingPoint(V)}visitBinary($,V){return r.Binary.startBinary(V),r.Binary.endBinary(V)}visitLargeBinary($,V){return s.LargeBinary.startLargeBinary(V),s.LargeBinary.endLargeBinary(V)}visitBool($,V){return a.Bool.startBool(V),a.Bool.endBool(V)}visitUtf8($,V){return o.Utf8.startUtf8(V),o.Utf8.endUtf8(V)}visitLargeUtf8($,V){return l.LargeUtf8.startLargeUtf8(V),l.LargeUtf8.endLargeUtf8(V)}visitDecimal($,V){return c.Decimal.startDecimal(V),c.Decimal.addScale(V,$.scale),c.Decimal.addPrecision(V,$.precision),c.Decimal.addBitWidth(V,$.bitWidth),c.Decimal.endDecimal(V)}visitDate($,V){return h.Date.startDate(V),h.Date.addUnit(V,$.unit),h.Date.endDate(V)}visitTime($,V){return A.Time.startTime(V),A.Time.addUnit(V,$.unit),A.Time.addBitWidth(V,$.bitWidth),A.Time.endTime(V)}visitTimestamp($,V){const Z=$.timezone&&V.createString($.timezone)||void 0;return m.Timestamp.startTimestamp(V),m.Timestamp.addUnit(V,$.unit),Z!==void 0&&m.Timestamp.addTimezone(V,Z),m.Timestamp.endTimestamp(V)}visitInterval($,V){return b.Interval.startInterval(V),b.Interval.addUnit(V,$.unit),b.Interval.endInterval(V)}visitDuration($,V){return S.Duration.startDuration(V),S.Duration.addUnit(V,$.unit),S.Duration.endDuration(V)}visitList($,V){return M.List.startList(V),M.List.endList(V)}visitStruct($,V){return I.Struct_.startStruct_(V),I.Struct_.endStruct_(V)}visitUnion($,V){O.Union.startTypeIdsVector(V,$.typeIds.length);const Z=O.Union.createTypeIdsVector(V,$.typeIds);return O.Union.startUnion(V),O.Union.addMode(V,$.mode),O.Union.addTypeIds(V,Z),O.Union.endUnion(V)}visitDictionary($,V){const Z=this.visit($.indices,V);return D.DictionaryEncoding.startDictionaryEncoding(V),D.DictionaryEncoding.addId(V,BigInt($.id)),D.DictionaryEncoding.addIsOrdered(V,$.isOrdered),Z!==void 0&&D.DictionaryEncoding.addIndexType(V,Z),D.DictionaryEncoding.endDictionaryEncoding(V)}visitFixedSizeBinary($,V){return B.FixedSizeBinary.startFixedSizeBinary(V),B.FixedSizeBinary.addByteWidth(V,$.byteWidth),B.FixedSizeBinary.endFixedSizeBinary(V)}visitFixedSizeList($,V){return P.FixedSizeList.startFixedSizeList(V),P.FixedSizeList.addListSize(V,$.listSize),P.FixedSizeList.endFixedSizeList(V)}visitMap($,V){return j.Map.startMap(V),j.Map.addKeysSorted(V,$.keysSorted),j.Map.endMap(V)}}return Rh.TypeAssembler=N,Rh.instance=new N,Rh}var Ao={},_6;function pet(){if(_6)return Ao;_6=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.fieldFromJSON=Ao.dictionaryBatchFromJSON=Ao.recordBatchFromJSON=Ao.schemaFromJSON=void 0;const t=Sa(),e=Cn(),i=jA(),n=ir();function r(I,O=new Map){return new t.Schema(o(I,O),b(I.metadata),O)}Ao.schemaFromJSON=r;function s(I){return new i.RecordBatch(I.count,c(I.columns),h(I.columns))}Ao.recordBatchFromJSON=s;function a(I){return new i.DictionaryBatch(s(I.data),I.id,I.isDelta)}Ao.dictionaryBatchFromJSON=a;function o(I,O){return(I.fields||[]).filter(Boolean).map(D=>t.Field.fromJSON(D,O))}function l(I,O){return(I.children||[]).filter(Boolean).map(D=>t.Field.fromJSON(D,O))}function c(I){return(I||[]).reduce((O,D)=>[...O,new i.FieldNode(D.count,A(D.VALIDITY)),...c(D.children)],[])}function h(I,O=[]){for(let D=-1,B=(I||[]).length;++D<B;){const P=I[D];P.VALIDITY&&O.push(new i.BufferRegion(O.length,P.VALIDITY.length)),P.TYPE_ID&&O.push(new i.BufferRegion(O.length,P.TYPE_ID.length)),P.OFFSET&&O.push(new i.BufferRegion(O.length,P.OFFSET.length)),P.DATA&&O.push(new i.BufferRegion(O.length,P.DATA.length)),O=h(P.children,O)}return O}function A(I){return(I||[]).reduce((O,D)=>O+ +(D===0),0)}function m(I,O){let D,B,P,j,N,F;return!O||!(j=I.dictionary)?(N=M(I,l(I,O)),P=new t.Field(I.name,N,I.nullable,b(I.metadata))):O.has(D=j.id)?(B=(B=j.indexType)?S(B):new e.Int32,F=new e.Dictionary(O.get(D),B,D,j.isOrdered),P=new t.Field(I.name,F,I.nullable,b(I.metadata))):(B=(B=j.indexType)?S(B):new e.Int32,O.set(D,N=M(I,l(I,O))),F=new e.Dictionary(N,B,D,j.isOrdered),P=new t.Field(I.name,F,I.nullable,b(I.metadata))),P||null}Ao.fieldFromJSON=m;function b(I=[]){return new Map(I.map(({key:O,value:D})=>[O,D]))}function S(I){return new e.Int(I.isSigned,I.bitWidth)}function M(I,O){const D=I.type.name;switch(D){case"NONE":return new e.Null;case"null":return new e.Null;case"binary":return new e.Binary;case"largebinary":return new e.LargeBinary;case"utf8":return new e.Utf8;case"largeutf8":return new e.LargeUtf8;case"bool":return new e.Bool;case"list":return new e.List((O||[])[0]);case"struct":return new e.Struct(O||[]);case"struct_":return new e.Struct(O||[])}switch(D){case"int":{const B=I.type;return new e.Int(B.isSigned,B.bitWidth)}case"floatingpoint":{const B=I.type;return new e.Float(n.Precision[B.precision])}case"decimal":{const B=I.type;return new e.Decimal(B.scale,B.precision,B.bitWidth)}case"date":{const B=I.type;return new e.Date_(n.DateUnit[B.unit])}case"time":{const B=I.type;return new e.Time(n.TimeUnit[B.unit],B.bitWidth)}case"timestamp":{const B=I.type;return new e.Timestamp(n.TimeUnit[B.unit],B.timezone)}case"interval":{const B=I.type;return new e.Interval(n.IntervalUnit[B.unit])}case"duration":{const B=I.type;return new e.Duration(n.TimeUnit[B.unit])}case"union":{const B=I.type,[P,...j]=(B.mode+"").toLowerCase(),N=P.toUpperCase()+j.join("");return new e.Union(n.UnionMode[N],B.typeIds||[],O||[])}case"fixedsizebinary":{const B=I.type;return new e.FixedSizeBinary(B.byteWidth)}case"fixedsizelist":{const B=I.type;return new e.FixedSizeList(B.listSize,(O||[])[0])}case"map":{const B=I.type;return new e.Map_((O||[])[0],B.keysSorted)}}throw new Error(`Unrecognized type: "${D}"`)}return Ao}var b6;function jA(){if(b6)return oa;b6=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.FieldNode=oa.BufferRegion=oa.DictionaryBatch=oa.RecordBatch=oa.Message=void 0;const t=Re,e=zE(),i=Pf(),n=OE(),r=f7(),s=Cf(),a=S7(),o=h7(),l=G_(),c=Y_(),h=d7(),A=NE(),m=DE(),b=RE(),S=UE(),M=kE(),I=FE(),O=CE(),D=jE(),B=PE(),P=xE(),j=LE(),N=get(),F=Sa(),$=Gr(),V=xf(),Z=ir(),nt=yet(),X=pet();var bt=t.Builder,Tt=t.ByteBuffer;const Ot=Cn();class H{static fromJSON(ut,vt){const Mt=new H(0,Z.MetadataVersion.V5,vt);return Mt._createHeader=mt(ut,vt),Mt}static decode(ut){ut=new Tt((0,$.toUint8Array)(ut));const vt=N.Message.getRootAsMessage(ut),Mt=vt.bodyLength(),re=vt.version(),be=vt.headerType(),Be=new H(Mt,re,be);return Be._createHeader=wt(vt,be),Be}static encode(ut){const vt=new bt;let Mt=-1;return ut.isSchema()?Mt=F.Schema.encode(vt,ut.header()):ut.isRecordBatch()?Mt=k.encode(vt,ut.header()):ut.isDictionaryBatch()&&(Mt=G.encode(vt,ut.header())),N.Message.startMessage(vt),N.Message.addVersion(vt,Z.MetadataVersion.V5),N.Message.addHeader(vt,Mt),N.Message.addHeaderType(vt,ut.headerType),N.Message.addBodyLength(vt,BigInt(ut.bodyLength)),N.Message.finishMessageBuffer(vt,N.Message.endMessage(vt)),vt.asUint8Array()}static from(ut,vt=0){if(ut instanceof F.Schema)return new H(0,Z.MetadataVersion.V5,Z.MessageHeader.Schema,ut);if(ut instanceof k)return new H(vt,Z.MetadataVersion.V5,Z.MessageHeader.RecordBatch,ut);if(ut instanceof G)return new H(vt,Z.MetadataVersion.V5,Z.MessageHeader.DictionaryBatch,ut);throw new Error(`Unrecognized Message header: ${ut}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Z.MessageHeader.Schema}isRecordBatch(){return this.headerType===Z.MessageHeader.RecordBatch}isDictionaryBatch(){return this.headerType===Z.MessageHeader.DictionaryBatch}constructor(ut,vt,Mt,re){this._version=vt,this._headerType=Mt,this.body=new Uint8Array(0),re&&(this._createHeader=()=>re),this._bodyLength=(0,V.bigIntToNumber)(ut)}}oa.Message=H;class k{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(ut,vt,Mt){this._nodes=vt,this._buffers=Mt,this._length=(0,V.bigIntToNumber)(ut)}}oa.RecordBatch=k;class G{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(ut,vt,Mt=!1){this._data=ut,this._isDelta=Mt,this._id=(0,V.bigIntToNumber)(vt)}}oa.DictionaryBatch=G;class lt{constructor(ut,vt){this.offset=(0,V.bigIntToNumber)(ut),this.length=(0,V.bigIntToNumber)(vt)}}oa.BufferRegion=lt;class Q{constructor(ut,vt){this.length=(0,V.bigIntToNumber)(ut),this.nullCount=(0,V.bigIntToNumber)(vt)}}oa.FieldNode=Q;function mt(J,ut){return()=>{switch(ut){case Z.MessageHeader.Schema:return F.Schema.fromJSON(J);case Z.MessageHeader.RecordBatch:return k.fromJSON(J);case Z.MessageHeader.DictionaryBatch:return G.fromJSON(J)}throw new Error(`Unrecognized Message type: { name: ${Z.MessageHeader[ut]}, type: ${ut} }`)}}function wt(J,ut){return()=>{switch(ut){case Z.MessageHeader.Schema:return F.Schema.decode(J.header(new e.Schema),new Map,J.version());case Z.MessageHeader.RecordBatch:return k.decode(J.header(new n.RecordBatch),J.version());case Z.MessageHeader.DictionaryBatch:return G.decode(J.header(new r.DictionaryBatch),J.version())}throw new Error(`Unrecognized Message type: { name: ${Z.MessageHeader[ut]}, type: ${ut} }`)}}F.Field.encode=dt,F.Field.decode=pe,F.Field.fromJSON=X.fieldFromJSON,F.Schema.encode=qe,F.Schema.decode=Dt,F.Schema.fromJSON=X.schemaFromJSON,k.encode=Y,k.decode=te,k.fromJSON=X.recordBatchFromJSON,G.encode=K,G.decode=ie,G.fromJSON=X.dictionaryBatchFromJSON,Q.encode=Ct,Q.decode=Ht,lt.encode=ee,lt.decode=ft;function Dt(J,ut=new Map,vt=Z.MetadataVersion.V5){const Mt=me(J,ut);return new F.Schema(Mt,Oe(J),ut,vt)}function te(J,ut=Z.MetadataVersion.V5){if(J.compression()!==null)throw new Error("Record batch compression not implemented");return new k(J.length(),Nt(J),he(J,ut))}function ie(J,ut=Z.MetadataVersion.V5){return new G(k.decode(J.data(),ut),J.id(),J.isDelta())}function ft(J){return new lt(J.offset(),J.length())}function Ht(J){return new Q(J.length(),J.nullCount())}function Nt(J){const ut=[];for(let vt,Mt=-1,re=-1,be=J.nodesLength();++Mt<be;)(vt=J.nodes(Mt))&&(ut[++re]=Q.decode(vt));return ut}function he(J,ut){const vt=[];for(let Mt,re=-1,be=-1,Be=J.buffersLength();++re<Be;)(Mt=J.buffers(re))&&(ut<Z.MetadataVersion.V4&&(Mt.bb_pos+=8*(re+1)),vt[++be]=lt.decode(Mt));return vt}function me(J,ut){const vt=[];for(let Mt,re=-1,be=-1,Be=J.fieldsLength();++re<Be;)(Mt=J.fields(re))&&(vt[++be]=F.Field.decode(Mt,ut));return vt}function Me(J,ut){const vt=[];for(let Mt,re=-1,be=-1,Be=J.childrenLength();++re<Be;)(Mt=J.children(re))&&(vt[++be]=F.Field.decode(Mt,ut));return vt}function pe(J,ut){let vt,Mt,re,be,Be,q;return!ut||!(q=J.dictionary())?(re=Ee(J,Me(J,ut)),Mt=new F.Field(J.name(),re,J.nullable(),Oe(J))):ut.has(vt=(0,V.bigIntToNumber)(q.id()))?(be=(be=q.indexType())?Ye(be):new Ot.Int32,Be=new Ot.Dictionary(ut.get(vt),be,vt,q.isOrdered()),Mt=new F.Field(J.name(),Be,J.nullable(),Oe(J))):(be=(be=q.indexType())?Ye(be):new Ot.Int32,ut.set(vt,re=Ee(J,Me(J,ut))),Be=new Ot.Dictionary(re,be,vt,q.isOrdered()),Mt=new F.Field(J.name(),Be,J.nullable(),Oe(J))),Mt||null}function Oe(J){const ut=new Map;if(J)for(let vt,Mt,re=-1,be=Math.trunc(J.customMetadataLength());++re<be;)(vt=J.customMetadata(re))&&(Mt=vt.key())!=null&&ut.set(Mt,vt.value());return ut}function Ye(J){return new Ot.Int(J.isSigned(),J.bitWidth())}function Ee(J,ut){const vt=J.typeType();switch(vt){case l.Type.NONE:return new Ot.Null;case l.Type.Null:return new Ot.Null;case l.Type.Binary:return new Ot.Binary;case l.Type.LargeBinary:return new Ot.LargeBinary;case l.Type.Utf8:return new Ot.Utf8;case l.Type.LargeUtf8:return new Ot.LargeUtf8;case l.Type.Bool:return new Ot.Bool;case l.Type.List:return new Ot.List((ut||[])[0]);case l.Type.Struct_:return new Ot.Struct(ut||[])}switch(vt){case l.Type.Int:{const Mt=J.type(new i.Int);return new Ot.Int(Mt.isSigned(),Mt.bitWidth())}case l.Type.FloatingPoint:{const Mt=J.type(new A.FloatingPoint);return new Ot.Float(Mt.precision())}case l.Type.Decimal:{const Mt=J.type(new m.Decimal);return new Ot.Decimal(Mt.scale(),Mt.precision(),Mt.bitWidth())}case l.Type.Date:{const Mt=J.type(new b.Date);return new Ot.Date_(Mt.unit())}case l.Type.Time:{const Mt=J.type(new S.Time);return new Ot.Time(Mt.unit(),Mt.bitWidth())}case l.Type.Timestamp:{const Mt=J.type(new M.Timestamp);return new Ot.Timestamp(Mt.unit(),Mt.timezone())}case l.Type.Interval:{const Mt=J.type(new I.Interval);return new Ot.Interval(Mt.unit())}case l.Type.Duration:{const Mt=J.type(new O.Duration);return new Ot.Duration(Mt.unit())}case l.Type.Union:{const Mt=J.type(new D.Union);return new Ot.Union(Mt.mode(),Mt.typeIdsArray()||[],ut||[])}case l.Type.FixedSizeBinary:{const Mt=J.type(new B.FixedSizeBinary);return new Ot.FixedSizeBinary(Mt.byteWidth())}case l.Type.FixedSizeList:{const Mt=J.type(new P.FixedSizeList);return new Ot.FixedSizeList(Mt.listSize(),(ut||[])[0])}case l.Type.Map:{const Mt=J.type(new j.Map);return new Ot.Map_((ut||[])[0],Mt.keysSorted())}}throw new Error(`Unrecognized type: "${l.Type[vt]}" (${vt})`)}function qe(J,ut){const vt=ut.fields.map(be=>F.Field.encode(J,be));e.Schema.startFieldsVector(J,vt.length);const Mt=e.Schema.createFieldsVector(J,vt),re=ut.metadata&&ut.metadata.size>0?e.Schema.createCustomMetadataVector(J,[...ut.metadata].map(([be,Be])=>{const q=J.createString(`${be}`),Bt=J.createString(`${Be}`);return c.KeyValue.startKeyValue(J),c.KeyValue.addKey(J,q),c.KeyValue.addValue(J,Bt),c.KeyValue.endKeyValue(J)})):-1;return e.Schema.startSchema(J),e.Schema.addFields(J,Mt),e.Schema.addEndianness(J,Ft?h.Endianness.Little:h.Endianness.Big),re!==-1&&e.Schema.addCustomMetadata(J,re),e.Schema.endSchema(J)}function dt(J,ut){let vt=-1,Mt=-1,re=-1;const be=ut.type;let Be=ut.typeId;Ot.DataType.isDictionary(be)?(Be=be.dictionary.typeId,re=nt.instance.visit(be,J),Mt=nt.instance.visit(be.dictionary,J)):Mt=nt.instance.visit(be,J);const q=(be.children||[]).map(ke=>F.Field.encode(J,ke)),Bt=a.Field.createChildrenVector(J,q),Xt=ut.metadata&&ut.metadata.size>0?a.Field.createCustomMetadataVector(J,[...ut.metadata].map(([ke,qi])=>{const Tn=J.createString(`${ke}`),xn=J.createString(`${qi}`);return c.KeyValue.startKeyValue(J),c.KeyValue.addKey(J,Tn),c.KeyValue.addValue(J,xn),c.KeyValue.endKeyValue(J)})):-1;return ut.name&&(vt=J.createString(ut.name)),a.Field.startField(J),a.Field.addType(J,Mt),a.Field.addTypeType(J,Be),a.Field.addChildren(J,Bt),a.Field.addNullable(J,!!ut.nullable),vt!==-1&&a.Field.addName(J,vt),re!==-1&&a.Field.addDictionary(J,re),Xt!==-1&&a.Field.addCustomMetadata(J,Xt),a.Field.endField(J)}function Y(J,ut){const vt=ut.nodes||[],Mt=ut.buffers||[];n.RecordBatch.startNodesVector(J,vt.length);for(const Be of vt.slice().reverse())Q.encode(J,Be);const re=J.endVector();n.RecordBatch.startBuffersVector(J,Mt.length);for(const Be of Mt.slice().reverse())lt.encode(J,Be);const be=J.endVector();return n.RecordBatch.startRecordBatch(J),n.RecordBatch.addLength(J,BigInt(ut.length)),n.RecordBatch.addNodes(J,re),n.RecordBatch.addBuffers(J,be),n.RecordBatch.endRecordBatch(J)}function K(J,ut){const vt=k.encode(J,ut.data);return r.DictionaryBatch.startDictionaryBatch(J),r.DictionaryBatch.addId(J,BigInt(ut.id)),r.DictionaryBatch.addIsDelta(J,ut.isDelta),r.DictionaryBatch.addData(J,vt),r.DictionaryBatch.endDictionaryBatch(J)}function Ct(J,ut){return o.FieldNode.createFieldNode(J,BigInt(ut.length),BigInt(ut.nullCount))}function ee(J,ut){return s.Buffer.createBuffer(J,BigInt(ut.offset),BigInt(ut.length))}const Ft=(()=>{const J=new ArrayBuffer(2);return new DataView(J).setInt16(0,256,!0),new Int16Array(J)[0]===256})();return oa}var v6;function QE(){return v6||(v6=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.magicX2AndPadding=t.magicAndPadding=t.magicLength=t.checkForMagicArrowString=t.MAGIC=t.MAGIC_STR=t.PADDING=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=void 0;const e=Bn,i=ir(),n=Re,r=jA(),s=Df(),a=E7(),o=Gr(),l=Nf(),c=fT(),h=D=>`Expected ${i.MessageHeader[D]} Message in stream, but was null or length 0.`,A=D=>`Header pointer of flatbuffer-encoded ${i.MessageHeader[D]} Message is null or length 0.`,m=(D,B)=>`Expected to read ${D} metadata bytes, but only read ${B}.`,b=(D,B)=>`Expected to read ${D} bytes for message body, but only read ${B}.`;class S{constructor(B){this.source=B instanceof l.ByteStream?B:new l.ByteStream(B)}[Symbol.iterator](){return this}next(){let B;return(B=this.readMetadataLength()).done||B.value===-1&&(B=this.readMetadataLength()).done||(B=this.readMetadata(B.value)).done?c.ITERATOR_DONE:B}throw(B){return this.source.throw(B)}return(B){return this.source.return(B)}readMessage(B){let P;if((P=this.next()).done)return null;if(B!=null&&P.value.headerType!==B)throw new Error(h(B));return P.value}readMessageBody(B){if(B<=0)return new Uint8Array(0);const P=(0,o.toUint8Array)(this.source.read(B));if(P.byteLength<B)throw new Error(b(B,P.byteLength));return P.byteOffset%8===0&&P.byteOffset+P.byteLength<=P.buffer.byteLength?P:P.slice()}readSchema(B=!1){const P=i.MessageHeader.Schema,j=this.readMessage(P),N=j==null?void 0:j.header();if(B&&!N)throw new Error(A(P));return N}readMetadataLength(){const B=this.source.read(t.PADDING),P=B&&new n.ByteBuffer(B),j=(P==null?void 0:P.readInt32(0))||0;return{done:j===0,value:j}}readMetadata(B){const P=this.source.read(B);if(!P)return c.ITERATOR_DONE;if(P.byteLength<B)throw new Error(m(B,P.byteLength));return{done:!1,value:r.Message.decode(P)}}}t.MessageReader=S;class M{constructor(B,P){this.source=B instanceof l.AsyncByteStream?B:(0,s.isFileHandle)(B)?new a.AsyncRandomAccessFile(B,P):new l.AsyncByteStream(B)}[Symbol.asyncIterator](){return this}next(){return e.__awaiter(this,void 0,void 0,function*(){let B;return(B=yield this.readMetadataLength()).done||B.value===-1&&(B=yield this.readMetadataLength()).done||(B=yield this.readMetadata(B.value)).done?c.ITERATOR_DONE:B})}throw(B){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.throw(B)})}return(B){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.return(B)})}readMessage(B){return e.__awaiter(this,void 0,void 0,function*(){let P;if((P=yield this.next()).done)return null;if(B!=null&&P.value.headerType!==B)throw new Error(h(B));return P.value})}readMessageBody(B){return e.__awaiter(this,void 0,void 0,function*(){if(B<=0)return new Uint8Array(0);const P=(0,o.toUint8Array)(yield this.source.read(B));if(P.byteLength<B)throw new Error(b(B,P.byteLength));return P.byteOffset%8===0&&P.byteOffset+P.byteLength<=P.buffer.byteLength?P:P.slice()})}readSchema(){return e.__awaiter(this,arguments,void 0,function*(B=!1){const P=i.MessageHeader.Schema,j=yield this.readMessage(P),N=j==null?void 0:j.header();if(B&&!N)throw new Error(A(P));return N})}readMetadataLength(){return e.__awaiter(this,void 0,void 0,function*(){const B=yield this.source.read(t.PADDING),P=B&&new n.ByteBuffer(B),j=(P==null?void 0:P.readInt32(0))||0;return{done:j===0,value:j}})}readMetadata(B){return e.__awaiter(this,void 0,void 0,function*(){const P=yield this.source.read(B);if(!P)return c.ITERATOR_DONE;if(P.byteLength<B)throw new Error(m(B,P.byteLength));return{done:!1,value:r.Message.decode(P)}})}}t.AsyncMessageReader=M;class I extends S{constructor(B){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=B instanceof c.ArrowJSON?B:new c.ArrowJSON(B)}next(){const{_json:B}=this;if(!this._schema)return this._schema=!0,{done:!1,value:r.Message.fromJSON(B.schema,i.MessageHeader.Schema)};if(this._dictionaryIndex<B.dictionaries.length){const P=B.dictionaries[this._dictionaryIndex++];return this._body=P.data.columns,{done:!1,value:r.Message.fromJSON(P,i.MessageHeader.DictionaryBatch)}}if(this._batchIndex<B.batches.length){const P=B.batches[this._batchIndex++];return this._body=P.columns,{done:!1,value:r.Message.fromJSON(P,i.MessageHeader.RecordBatch)}}return this._body=[],c.ITERATOR_DONE}readMessageBody(B){return P(this._body);function P(j){return(j||[]).reduce((N,F)=>[...N,...F.VALIDITY&&[F.VALIDITY]||[],...F.TYPE_ID&&[F.TYPE_ID]||[],...F.OFFSET&&[F.OFFSET]||[],...F.DATA&&[F.DATA]||[],...P(F.children)],[])}}readMessage(B){let P;if((P=this.next()).done)return null;if(B!=null&&P.value.headerType!==B)throw new Error(h(B));return P.value}readSchema(){const B=i.MessageHeader.Schema,P=this.readMessage(B),j=P==null?void 0:P.header();if(!P||!j)throw new Error(A(B));return j}}t.JSONMessageReader=I,t.PADDING=4,t.MAGIC_STR="ARROW1",t.MAGIC=new Uint8Array(t.MAGIC_STR.length);for(let D=0;D<t.MAGIC_STR.length;D+=1)t.MAGIC[D]=t.MAGIC_STR.codePointAt(D);function O(D,B=0){for(let P=-1,j=t.MAGIC.length;++P<j;)if(t.MAGIC[P]!==D[B+P])return!1;return!0}t.checkForMagicArrowString=O,t.magicLength=t.MAGIC.length,t.magicAndPadding=t.magicLength+t.PADDING,t.magicX2AndPadding=t.magicLength*2+t.PADDING}(Qw)),Qw}var T6;function gT(){if(T6)return ia;T6=1,Object.defineProperty(ia,"__esModule",{value:!0}),ia.AsyncRecordBatchFileReader=ia.RecordBatchFileReader=ia.AsyncRecordBatchStreamReader=ia.RecordBatchStreamReader=ia.RecordBatchReader=void 0;const t=Bn,e=Rc(),i=js(),n=Cn(),r=ir(),s=I7(),a=oT(),o=Nf(),l=E7(),c=fet(),h=Ff(),A=fT(),m=QE(),b=Df();class S extends A.ReadableInterop{constructor(k){super(),this._impl=k}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(k){return this._impl.throw(k)}return(k){return this._impl.return(k)}cancel(){return this._impl.cancel()}reset(k){return this._impl.reset(k),this._DOMStream=void 0,this._nodeStream=void 0,this}open(k){const G=this._impl.open(k);return(0,b.isPromise)(G)?G.then(()=>this):this}readRecordBatch(k){return this._impl.isFile()?this._impl.readRecordBatch(k):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return a.default.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return a.default.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(k){throw new Error('"throughNode" not available in this environment')}static throughDOM(k,G){throw new Error('"throughDOM" not available in this environment')}static from(k){return k instanceof S?k:(0,b.isArrowJSON)(k)?X(k):(0,b.isFileHandle)(k)?Ot(k):(0,b.isPromise)(k)?t.__awaiter(this,void 0,void 0,function*(){return yield S.from(yield k)}):(0,b.isFetchResponse)(k)||(0,b.isReadableDOMStream)(k)||(0,b.isReadableNodeStream)(k)||(0,b.isAsyncIterable)(k)?Tt(new o.AsyncByteStream(k)):bt(new o.ByteStream(k))}static readAll(k){return k instanceof S?k.isSync()?Z(k):nt(k):(0,b.isArrowJSON)(k)||ArrayBuffer.isView(k)||(0,b.isIterable)(k)||(0,b.isIteratorResult)(k)?Z(k):nt(k)}}ia.RecordBatchReader=S;class M extends S{constructor(k){super(k),this._impl=k}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return t.__asyncGenerator(this,arguments,function*(){yield t.__await(yield*t.__asyncDelegator(t.__asyncValues(this[Symbol.iterator]())))})}}ia.RecordBatchStreamReader=M;class I extends S{constructor(k){super(k),this._impl=k}readAll(){return t.__awaiter(this,void 0,void 0,function*(){var k,G,lt,Q;const mt=new Array;try{for(var wt=!0,Dt=t.__asyncValues(this),te;te=yield Dt.next(),k=te.done,!k;wt=!0){Q=te.value,wt=!1;const ie=Q;mt.push(ie)}}catch(ie){G={error:ie}}finally{try{!wt&&!k&&(lt=Dt.return)&&(yield lt.call(Dt))}finally{if(G)throw G.error}}return mt})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}ia.AsyncRecordBatchStreamReader=I;class O extends M{constructor(k){super(k),this._impl=k}}ia.RecordBatchFileReader=O;class D extends I{constructor(k){super(k),this._impl=k}}ia.AsyncRecordBatchFileReader=D;class B{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(k=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=k}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(k){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=k,this.dictionaries=new Map,this}_loadRecordBatch(k,G){const lt=this._loadVectors(k,G,this.schema.fields),Q=(0,e.makeData)({type:new n.Struct(this.schema.fields),length:k.length,children:lt});return new h.RecordBatch(this.schema,Q)}_loadDictionaryBatch(k,G){const{id:lt,isDelta:Q}=k,{dictionaries:mt,schema:wt}=this,Dt=mt.get(lt),te=wt.dictionaries.get(lt),ie=this._loadVectors(k.data,G,[te]);return(Dt&&Q?Dt.concat(new i.Vector(ie)):new i.Vector(ie)).memoize()}_loadVectors(k,G,lt){return new c.VectorLoader(G,k.nodes,k.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(lt)}}class P extends B{constructor(k,G){super(G),this._reader=(0,b.isArrowJSON)(k)?new m.JSONMessageReader(this._handle=k):new m.MessageReader(this._handle=k)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(k){return this.closed||(this.autoDestroy=V(this,k),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(k){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(k):A.ITERATOR_DONE}return(k){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(k):A.ITERATOR_DONE}next(){if(this.closed)return A.ITERATOR_DONE;let k;const{_reader:G}=this;for(;k=this._readNextMessageAndValidate();)if(k.isSchema())this.reset(k.header());else if(k.isRecordBatch()){this._recordBatchIndex++;const lt=k.header(),Q=G.readMessageBody(k.bodyLength);return{done:!1,value:this._loadRecordBatch(lt,Q)}}else if(k.isDictionaryBatch()){this._dictionaryIndex++;const lt=k.header(),Q=G.readMessageBody(k.bodyLength),mt=this._loadDictionaryBatch(lt,Q);this.dictionaries.set(lt.id,mt)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new h._InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(k){return this._reader.readMessage(k)}}class j extends B{constructor(k,G){super(G),this._reader=new m.AsyncMessageReader(this._handle=k)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return t.__awaiter(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(k){return t.__awaiter(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=V(this,k),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(k){return t.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(k):A.ITERATOR_DONE})}return(k){return t.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(k):A.ITERATOR_DONE})}next(){return t.__awaiter(this,void 0,void 0,function*(){if(this.closed)return A.ITERATOR_DONE;let k;const{_reader:G}=this;for(;k=yield this._readNextMessageAndValidate();)if(k.isSchema())yield this.reset(k.header());else if(k.isRecordBatch()){this._recordBatchIndex++;const lt=k.header(),Q=yield G.readMessageBody(k.bodyLength);return{done:!1,value:this._loadRecordBatch(lt,Q)}}else if(k.isDictionaryBatch()){this._dictionaryIndex++;const lt=k.header(),Q=yield G.readMessageBody(k.bodyLength),mt=this._loadDictionaryBatch(lt,Q);this.dictionaries.set(lt.id,mt)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new h._InternalEmptyPlaceholderRecordBatch(this.schema)}):yield this.return()})}_readNextMessageAndValidate(k){return t.__awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(k)})}}class N extends P{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(k,G){super(k instanceof l.RandomAccessFile?k:new l.RandomAccessFile(k),G)}isSync(){return!0}isFile(){return!0}open(k){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const G of this._footer.dictionaryBatches())G&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(k)}readRecordBatch(k){var G;if(this.closed)return null;this._footer||this.open();const lt=(G=this._footer)===null||G===void 0?void 0:G.getRecordBatch(k);if(lt&&this._handle.seek(lt.offset)){const Q=this._reader.readMessage(r.MessageHeader.RecordBatch);if(Q!=null&&Q.isRecordBatch()){const mt=Q.header(),wt=this._reader.readMessageBody(Q.bodyLength);return this._loadRecordBatch(mt,wt)}}return null}_readDictionaryBatch(k){var G;const lt=(G=this._footer)===null||G===void 0?void 0:G.getDictionaryBatch(k);if(lt&&this._handle.seek(lt.offset)){const Q=this._reader.readMessage(r.MessageHeader.DictionaryBatch);if(Q!=null&&Q.isDictionaryBatch()){const mt=Q.header(),wt=this._reader.readMessageBody(Q.bodyLength),Dt=this._loadDictionaryBatch(mt,wt);this.dictionaries.set(mt.id,Dt)}}}_readFooter(){const{_handle:k}=this,G=k.size-m.magicAndPadding,lt=k.readInt32(G),Q=k.readAt(G-lt,lt);return s.Footer.decode(Q)}_readNextMessageAndValidate(k){var G;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const lt=(G=this._footer)===null||G===void 0?void 0:G.getRecordBatch(this._recordBatchIndex);if(lt&&this._handle.seek(lt.offset))return this._reader.readMessage(k)}return null}}class F extends j{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(k,...G){const lt=typeof G[0]!="number"?G.shift():void 0,Q=G[0]instanceof Map?G.shift():void 0;super(k instanceof l.AsyncRandomAccessFile?k:new l.AsyncRandomAccessFile(k,lt),Q)}isFile(){return!0}isAsync(){return!0}open(k){const G=Object.create(null,{open:{get:()=>super.open}});return t.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const lt of this._footer.dictionaryBatches())lt&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield G.open.call(this,k)})}readRecordBatch(k){return t.__awaiter(this,void 0,void 0,function*(){var G;if(this.closed)return null;this._footer||(yield this.open());const lt=(G=this._footer)===null||G===void 0?void 0:G.getRecordBatch(k);if(lt&&(yield this._handle.seek(lt.offset))){const Q=yield this._reader.readMessage(r.MessageHeader.RecordBatch);if(Q!=null&&Q.isRecordBatch()){const mt=Q.header(),wt=yield this._reader.readMessageBody(Q.bodyLength);return this._loadRecordBatch(mt,wt)}}return null})}_readDictionaryBatch(k){return t.__awaiter(this,void 0,void 0,function*(){var G;const lt=(G=this._footer)===null||G===void 0?void 0:G.getDictionaryBatch(k);if(lt&&(yield this._handle.seek(lt.offset))){const Q=yield this._reader.readMessage(r.MessageHeader.DictionaryBatch);if(Q!=null&&Q.isDictionaryBatch()){const mt=Q.header(),wt=yield this._reader.readMessageBody(Q.bodyLength),Dt=this._loadDictionaryBatch(mt,wt);this.dictionaries.set(mt.id,Dt)}}})}_readFooter(){return t.__awaiter(this,void 0,void 0,function*(){const{_handle:k}=this;k._pending&&(yield k._pending);const G=k.size-m.magicAndPadding,lt=yield k.readInt32(G),Q=yield k.readAt(G-lt,lt);return s.Footer.decode(Q)})}_readNextMessageAndValidate(k){return t.__awaiter(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const G=this._footer.getRecordBatch(this._recordBatchIndex);if(G&&(yield this._handle.seek(G.offset)))return yield this._reader.readMessage(k)}return null})}}class $ extends P{constructor(k,G){super(k,G)}_loadVectors(k,G,lt){return new c.JSONVectorLoader(G,k.nodes,k.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(lt)}}function V(H,k){return k&&typeof k.autoDestroy=="boolean"?k.autoDestroy:H.autoDestroy}function*Z(H){const k=S.from(H);try{if(!k.open({autoDestroy:!1}).closed)do yield k;while(!k.reset().open().closed)}finally{k.cancel()}}function nt(H){return t.__asyncGenerator(this,arguments,function*(){const G=yield t.__await(S.from(H));try{if(!(yield t.__await(G.open({autoDestroy:!1}))).closed)do yield yield t.__await(G);while(!(yield t.__await(G.reset().open())).closed)}finally{yield t.__await(G.cancel())}})}function X(H){return new M(new $(H))}function bt(H){const k=H.peek(m.magicLength+7&-8);return k&&k.byteLength>=4?(0,m.checkForMagicArrowString)(k)?new O(new N(H.read())):new M(new P(H)):new M(new P(function*(){}()))}function Tt(H){return t.__awaiter(this,void 0,void 0,function*(){const k=yield H.peek(m.magicLength+7&-8);return k&&k.byteLength>=4?(0,m.checkForMagicArrowString)(k)?new O(new N(yield H.read())):new I(new j(H)):new I(new j(function(){return t.__asyncGenerator(this,arguments,function*(){})}()))})}function Ot(H){return t.__awaiter(this,void 0,void 0,function*(){const{size:k}=yield H.stat(),G=new l.AsyncRandomAccessFile(H,k);return k>=m.magicX2AndPadding&&(0,m.checkForMagicArrowString)(yield G.readAt(0,m.magicLength+7&-8))?new D(new F(G)):new I(new j(G))})}return ia}var go={},Yy={},S6;function met(){if(S6)return Yy;S6=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.VectorAssembler=void 0;const t=js(),e=Ta(),i=ir(),n=Ff(),r=Gr(),s=h0(),a=jA(),o=Cn(),l=xf();class c extends e.Visitor{static assemble(...D){const B=j=>j.flatMap(N=>Array.isArray(N)?B(N):N instanceof n.RecordBatch?N.data.children:N.data),P=new c;return P.visitMany(B(D)),P}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(D){if(D instanceof t.Vector)return this.visitMany(D.data),this;const{type:B}=D;if(!o.DataType.isDictionary(B)){const{length:P}=D;if(P>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(o.DataType.isUnion(B))this.nodes.push(new a.FieldNode(P,0));else{const{nullCount:j}=D;o.DataType.isNull(B)||h.call(this,j<=0?new Uint8Array(0):(0,s.truncateBitmap)(D.offset,P,D.nullBitmap)),this.nodes.push(new a.FieldNode(P,j))}}return super.visit(D)}visitNull(D){return this}visitDictionary(D){return this.visit(D.clone(D.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}Yy.VectorAssembler=c;function h(O){const D=O.byteLength+7&-8;return this.buffers.push(O),this.bufferRegions.push(new a.BufferRegion(this._byteLength,D)),this._byteLength+=D,this}function A(O){var D;const{type:B,length:P,typeIds:j,valueOffsets:N}=O;if(h.call(this,j),B.mode===i.UnionMode.Sparse)return I.call(this,O);if(B.mode===i.UnionMode.Dense){if(O.offset<=0)return h.call(this,N),I.call(this,O);{const F=new Int32Array(P),$=Object.create(null),V=Object.create(null);for(let Z,nt,X=-1;++X<P;)(Z=j[X])!==void 0&&((nt=$[Z])===void 0&&(nt=$[Z]=N[X]),F[X]=N[X]-nt,V[Z]=((D=V[Z])!==null&&D!==void 0?D:0)+1);h.call(this,F),this.visitMany(O.children.map((Z,nt)=>{const X=B.typeIds[nt],bt=$[X],Tt=V[X];return Z.slice(bt,Math.min(P,Tt))}))}}return this}function m(O){let D;return O.nullCount>=O.length?h.call(this,new Uint8Array(0)):(D=O.values)instanceof Uint8Array?h.call(this,(0,s.truncateBitmap)(O.offset,O.length,D)):h.call(this,(0,s.packBools)(O.values))}function b(O){return h.call(this,O.values.subarray(0,O.length*O.stride))}function S(O){const{length:D,values:B,valueOffsets:P}=O,j=(0,l.bigIntToNumber)(P[0]),N=(0,l.bigIntToNumber)(P[D]),F=Math.min(N-j,B.byteLength-j);return h.call(this,(0,r.rebaseValueOffsets)(-j,D+1,P)),h.call(this,B.subarray(j,j+F)),this}function M(O){const{length:D,valueOffsets:B}=O;if(B){const{[0]:P,[D]:j}=B;return h.call(this,(0,r.rebaseValueOffsets)(-P,D+1,B)),this.visit(O.children[0].slice(P,j-P))}return this.visit(O.children[0])}function I(O){return this.visitMany(O.type.children.map((D,B)=>O.children[B]).filter(Boolean))[0]}return c.prototype.visitBool=m,c.prototype.visitInt=b,c.prototype.visitFloat=b,c.prototype.visitUtf8=S,c.prototype.visitLargeUtf8=S,c.prototype.visitBinary=S,c.prototype.visitLargeBinary=S,c.prototype.visitFixedSizeBinary=b,c.prototype.visitDate=b,c.prototype.visitTimestamp=b,c.prototype.visitTime=b,c.prototype.visitDecimal=b,c.prototype.visitList=M,c.prototype.visitStruct=I,c.prototype.visitUnion=A,c.prototype.visitInterval=b,c.prototype.visitDuration=b,c.prototype.visitFixedSizeList=M,c.prototype.visitMap=M,Yy}var Gy={},w6;function _et(){if(w6)return Gy;w6=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.JSONTypeAssembler=void 0;const t=Ta(),e=G_(),i=ir();class n extends t.Visitor{visit(s){return s==null?void 0:super.visit(s)}visitNull({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitInt({typeId:s,bitWidth:a,isSigned:o}){return{name:e.Type[s].toLowerCase(),bitWidth:a,isSigned:o}}visitFloat({typeId:s,precision:a}){return{name:e.Type[s].toLowerCase(),precision:i.Precision[a]}}visitBinary({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitLargeBinary({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitBool({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitUtf8({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitLargeUtf8({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitDecimal({typeId:s,scale:a,precision:o,bitWidth:l}){return{name:e.Type[s].toLowerCase(),scale:a,precision:o,bitWidth:l}}visitDate({typeId:s,unit:a}){return{name:e.Type[s].toLowerCase(),unit:i.DateUnit[a]}}visitTime({typeId:s,unit:a,bitWidth:o}){return{name:e.Type[s].toLowerCase(),unit:i.TimeUnit[a],bitWidth:o}}visitTimestamp({typeId:s,timezone:a,unit:o}){return{name:e.Type[s].toLowerCase(),unit:i.TimeUnit[o],timezone:a}}visitInterval({typeId:s,unit:a}){return{name:e.Type[s].toLowerCase(),unit:i.IntervalUnit[a]}}visitDuration({typeId:s,unit:a}){return{name:e.Type[s].toLocaleLowerCase(),unit:i.TimeUnit[a]}}visitList({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitStruct({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitUnion({typeId:s,mode:a,typeIds:o}){return{name:e.Type[s].toLowerCase(),mode:i.UnionMode[a].toUpperCase(),typeIds:[...o]}}visitDictionary(s){return this.visit(s.dictionary)}visitFixedSizeBinary({typeId:s,byteWidth:a}){return{name:e.Type[s].toLowerCase(),byteWidth:a}}visitFixedSizeList({typeId:s,listSize:a}){return{name:e.Type[s].toLowerCase(),listSize:a}}visitMap({typeId:s,keysSorted:a}){return{name:e.Type[s].toLowerCase(),keysSorted:a}}}return Gy.JSONTypeAssembler=n,Gy}var Xy={},M6;function bet(){if(M6)return Xy;M6=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.JSONVectorAssembler=void 0;const t=$E(),e=js(),i=Ta(),n=ir(),r=ir(),s=h0(),a=Cn();class o extends i.Visitor{static assemble(...A){const m=new o;return A.map(({schema:b,data:S})=>m.visitMany(b.fields,S.children))}visit({name:A},m){const{length:b}=m,{offset:S,nullCount:M,nullBitmap:I}=m,O=a.DataType.isDictionary(m.type)?m.type.indices:m.type,D=Object.assign([],m.buffers,{[n.BufferType.VALIDITY]:void 0});return Object.assign({name:A,count:b,VALIDITY:a.DataType.isNull(O)||a.DataType.isUnion(O)?void 0:M<=0?Array.from({length:b},()=>1):[...new s.BitIterator(I,S,b,null,s.getBit)]},super.visit(m.clone(O,S,b,0,D)))}visitNull(){return{}}visitBool({values:A,offset:m,length:b}){return{DATA:[...new s.BitIterator(A,m,b,null,s.getBool)]}}visitInt(A){return{DATA:A.type.bitWidth<64?[...A.values]:[...c(A.values,2)]}}visitFloat(A){return{DATA:[...A.values]}}visitUtf8(A){return{DATA:[...new e.Vector([A])],OFFSET:[...A.valueOffsets]}}visitLargeUtf8(A){return{DATA:[...new e.Vector([A])],OFFSET:[...c(A.valueOffsets,2)]}}visitBinary(A){return{DATA:[...l(new e.Vector([A]))],OFFSET:[...A.valueOffsets]}}visitLargeBinary(A){return{DATA:[...l(new e.Vector([A]))],OFFSET:[...c(A.valueOffsets,2)]}}visitFixedSizeBinary(A){return{DATA:[...l(new e.Vector([A]))]}}visitDate(A){return{DATA:A.type.unit===r.DateUnit.DAY?[...A.values]:[...c(A.values,2)]}}visitTimestamp(A){return{DATA:[...c(A.values,2)]}}visitTime(A){return{DATA:A.type.unit<r.TimeUnit.MICROSECOND?[...A.values]:[...c(A.values,2)]}}visitDecimal(A){return{DATA:[...c(A.values,4)]}}visitList(A){return{OFFSET:[...A.valueOffsets],children:this.visitMany(A.type.children,A.children)}}visitStruct(A){return{children:this.visitMany(A.type.children,A.children)}}visitUnion(A){return{TYPE_ID:[...A.typeIds],OFFSET:A.type.mode===r.UnionMode.Dense?[...A.valueOffsets]:void 0,children:this.visitMany(A.type.children,A.children)}}visitInterval(A){return{DATA:[...A.values]}}visitDuration(A){return{DATA:[...c(A.values,2)]}}visitFixedSizeList(A){return{children:this.visitMany(A.type.children,A.children)}}visitMap(A){return{OFFSET:[...A.valueOffsets],children:this.visitMany(A.type.children,A.children)}}}Xy.JSONVectorAssembler=o;function*l(h){for(const A of h)yield A.reduce((m,b)=>`${m}${("0"+(b&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*c(h,A){const m=new Uint32Array(h.buffer);for(let b=-1,S=m.length/A;++b<S;)yield`${t.BN.new(m.subarray((b+0)*A,(b+1)*A),!1)}`}return Xy}var I6;function KE(){if(I6)return go;I6=1,Object.defineProperty(go,"__esModule",{value:!0}),go.RecordBatchJSONWriter=go.RecordBatchFileWriter=go.RecordBatchStreamWriter=go.RecordBatchWriter=void 0;const t=Bn,e=Q_(),i=QE(),n=js(),r=Cn(),s=jA(),a=jA(),o=I7(),l=ir(),c=dT(),h=Nf(),A=met(),m=_et(),b=bet(),S=Gr(),M=Ff(),I=fT(),O=Df();class D extends I.ReadableInterop{static throughNode(X){throw new Error('"throughNode" not available in this environment')}static throughDOM(X,bt){throw new Error('"throughDOM" not available in this environment')}constructor(X){super(),this._position=0,this._started=!1,this._sink=new h.AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(0,O.isObject)(X)||(X={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof X.autoDestroy=="boolean"?X.autoDestroy:!0,this._writeLegacyIpcFormat=typeof X.writeLegacyIpcFormat=="boolean"?X.writeLegacyIpcFormat:!1}toString(X=!1){return this._sink.toString(X)}toUint8Array(X=!1){return this._sink.toUint8Array(X)}writeAll(X){return(0,O.isPromise)(X)?X.then(bt=>this.writeAll(bt)):(0,O.isAsyncIterable)(X)?F(this,X):N(this,X)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(X){return this._sink.toDOMStream(X)}toNodeStream(X){return this._sink.toNodeStream(X)}close(){return this.reset()._sink.close()}abort(X){return this.reset()._sink.abort(X)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(X=this._sink,bt=null){return X===this._sink||X instanceof h.AsyncByteQueue?this._sink=X:(this._sink=new h.AsyncByteQueue,X&&(0,O.isWritableDOMStream)(X)?this.toDOMStream({type:"bytes"}).pipeTo(X):X&&(0,O.isWritableNodeStream)(X)&&this.toNodeStream({objectMode:!1}).pipe(X)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!bt||!(0,c.compareSchemas)(bt,this._schema))&&(bt==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=bt,this._writeSchema(bt))),this}write(X){let bt=null;if(this._sink){if(X==null)return this.finish()&&void 0;if(X instanceof e.Table&&!(bt=X.schema))return this.finish()&&void 0;if(X instanceof M.RecordBatch&&!(bt=X.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(bt&&!(0,c.compareSchemas)(bt,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,bt)}X instanceof M.RecordBatch?X instanceof M._InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(X):X instanceof e.Table?this.writeAll(X.batches):(0,O.isIterable)(X)&&this.writeAll(X)}_writeMessage(X,bt=8){const Tt=bt-1,Ot=s.Message.encode(X),H=Ot.byteLength,k=this._writeLegacyIpcFormat?4:8,G=H+k+Tt&~Tt,lt=G-H-k;return X.headerType===l.MessageHeader.RecordBatch?this._recordBatchBlocks.push(new o.FileBlock(G,X.bodyLength,this._position)):X.headerType===l.MessageHeader.DictionaryBatch&&this._dictionaryBlocks.push(new o.FileBlock(G,X.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(G-k)),H>0&&this._write(Ot),this._writePadding(lt)}_write(X){if(this._started){const bt=(0,S.toUint8Array)(X);bt&&bt.byteLength>0&&(this._sink.write(bt),this._position+=bt.byteLength)}return this}_writeSchema(X){return this._writeMessage(s.Message.from(X))}_writeFooter(X){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(i.MAGIC)}_writePadding(X){return X>0?this._write(new Uint8Array(X)):this}_writeRecordBatch(X){const{byteLength:bt,nodes:Tt,bufferRegions:Ot,buffers:H}=A.VectorAssembler.assemble(X),k=new a.RecordBatch(X.numRows,Tt,Ot),G=s.Message.from(k,bt);return this._writeDictionaries(X)._writeMessage(G)._writeBodyBuffers(H)}_writeDictionaryBatch(X,bt,Tt=!1){const{byteLength:Ot,nodes:H,bufferRegions:k,buffers:G}=A.VectorAssembler.assemble(new n.Vector([X])),lt=new a.RecordBatch(X.length,H,k),Q=new a.DictionaryBatch(lt,bt,Tt),mt=s.Message.from(Q,Ot);return this._writeMessage(mt)._writeBodyBuffers(G)}_writeBodyBuffers(X){let bt,Tt,Ot;for(let H=-1,k=X.length;++H<k;)(bt=X[H])&&(Tt=bt.byteLength)>0&&(this._write(bt),(Ot=(Tt+7&-8)-Tt)>0&&this._writePadding(Ot));return this}_writeDictionaries(X){var bt,Tt;for(const[Ot,H]of X.dictionaries){const k=(bt=H==null?void 0:H.data)!==null&&bt!==void 0?bt:[],G=this._seenDictionaries.get(Ot),lt=(Tt=this._dictionaryDeltaOffsets.get(Ot))!==null&&Tt!==void 0?Tt:0;if(!G||G.data[0]!==k[0])for(const[Q,mt]of k.entries())this._writeDictionaryBatch(mt,Ot,Q>0);else if(lt<k.length)for(const Q of k.slice(lt))this._writeDictionaryBatch(Q,Ot,!0);this._seenDictionaries.set(Ot,H),this._dictionaryDeltaOffsets.set(Ot,k.length)}return this}}go.RecordBatchWriter=D;class B extends D{static writeAll(X,bt){const Tt=new B(bt);return(0,O.isPromise)(X)?X.then(Ot=>Tt.writeAll(Ot)):(0,O.isAsyncIterable)(X)?F(Tt,X):N(Tt,X)}}go.RecordBatchStreamWriter=B;class P extends D{static writeAll(X){const bt=new P;return(0,O.isPromise)(X)?X.then(Tt=>bt.writeAll(Tt)):(0,O.isAsyncIterable)(X)?F(bt,X):N(bt,X)}constructor(){super(),this._autoDestroy=!0}_writeSchema(X){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(X,bt,Tt=!1){if(!Tt&&this._seenDictionaries.has(bt))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(X,bt,Tt)}_writeFooter(X){const bt=o.Footer.encode(new o.Footer(X,l.MetadataVersion.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(X)._write(bt)._write(Int32Array.of(bt.byteLength))._writeMagic()}}go.RecordBatchFileWriter=P;class j extends D{static writeAll(X){return new j().writeAll(X)}constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._recordBatchesWithDictionaries=[]}_writeMessage(){return this}_writeFooter(X){return this}_writeSchema(X){return this._write(`{
  "schema": ${JSON.stringify({fields:X.fields.map(bt=>$(bt))},null,2)}`)}_writeDictionaries(X){return X.dictionaries.size>0&&this._recordBatchesWithDictionaries.push(X),this}_writeDictionaryBatch(X,bt,Tt=!1){return this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(V(X,bt,Tt)),this._dictionaryBlocks.push(new o.FileBlock(0,0,0)),this}_writeRecordBatch(X){return this._writeDictionaries(X),this._recordBatches.push(X),this}close(){if(this._recordBatchesWithDictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const X of this._recordBatchesWithDictionaries)super._writeDictionaries(X);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let X=-1,bt=this._recordBatches.length;++X<bt;)this._write(X===0?`,
  "batches": [
    `:`,
    `),this._write(Z(this._recordBatches[X])),this._recordBatchBlocks.push(new o.FileBlock(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._recordBatchesWithDictionaries=[],this._recordBatches=[],super.close()}}go.RecordBatchJSONWriter=j;function N(nt,X){let bt=X;X instanceof e.Table&&(bt=X.batches,nt.reset(void 0,X.schema));for(const Tt of bt)nt.write(Tt);return nt.finish()}function F(nt,X){return t.__awaiter(this,void 0,void 0,function*(){var bt,Tt,Ot,H,k,G,lt;try{for(bt=!0,Tt=t.__asyncValues(X);Ot=yield Tt.next(),H=Ot.done,!H;bt=!0){lt=Ot.value,bt=!1;const Q=lt;nt.write(Q)}}catch(Q){k={error:Q}}finally{try{!bt&&!H&&(G=Tt.return)&&(yield G.call(Tt))}finally{if(k)throw k.error}}return nt.finish()})}function $({name:nt,type:X,nullable:bt}){const Tt=new m.JSONTypeAssembler;return{name:nt,nullable:bt,type:Tt.visit(X),children:(X.children||[]).map(Ot=>$(Ot)),dictionary:r.DataType.isDictionary(X)?{id:X.id,isOrdered:X.isOrdered,indexType:Tt.visit(X.indices)}:void 0}}function V(nt,X,bt=!1){const[Tt]=b.JSONVectorAssembler.assemble(new M.RecordBatch({[X]:nt}));return JSON.stringify({id:X,isDelta:bt,data:{count:nt.length,columns:Tt}},null,2)}function Z(nt){const[X]=b.JSONVectorAssembler.assemble(nt);return JSON.stringify({count:nt.numRows,columns:X},null,2)}return go}var Qy={},E6;function vet(){if(E6)return Qy;E6=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.toDOMStream=void 0;const t=Bn,e=Gr(),i=Df();function n(a,o){if((0,i.isAsyncIterable)(a))return s(a,o);if((0,i.isIterable)(a))return r(a,o);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}Qy.toDOMStream=n;function r(a,o){let l=null;const c=(o==null?void 0:o.type)==="bytes"||!1,h=(o==null?void 0:o.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},o),{start(m){A(m,l||(l=a[Symbol.iterator]()))},pull(m){l?A(m,l):m.close()},cancel(){(l!=null&&l.return&&l.return()||!0)&&(l=null)}}),Object.assign({highWaterMark:c?h:void 0},o));function A(m,b){let S,M=null,I=m.desiredSize||null;for(;!(M=b.next(c?I:null)).done;)if(ArrayBuffer.isView(M.value)&&(S=(0,e.toUint8Array)(M.value))&&(I!=null&&c&&(I=I-S.byteLength+1),M.value=S),m.enqueue(M.value),I!=null&&--I<=0)return;m.close()}}function s(a,o){let l=null;const c=(o==null?void 0:o.type)==="bytes"||!1,h=(o==null?void 0:o.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},o),{start(m){return t.__awaiter(this,void 0,void 0,function*(){yield A(m,l||(l=a[Symbol.asyncIterator]()))})},pull(m){return t.__awaiter(this,void 0,void 0,function*(){l?yield A(m,l):m.close()})},cancel(){return t.__awaiter(this,void 0,void 0,function*(){(l!=null&&l.return&&(yield l.return())||!0)&&(l=null)})}}),Object.assign({highWaterMark:c?h:void 0},o));function A(m,b){return t.__awaiter(this,void 0,void 0,function*(){let S,M=null,I=m.desiredSize||null;for(;!(M=yield b.next(c?I:null)).done;)if(ArrayBuffer.isView(M.value)&&(S=(0,e.toUint8Array)(M.value))&&(I!=null&&c&&(I=I-S.byteLength+1),M.value=S),m.enqueue(M.value),I!=null&&--I<=0)return;m.close()})}}return Qy}var Dh={},B6;function Tet(){if(B6)return Dh;B6=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.BuilderTransform=Dh.builderThroughDOMStream=void 0;const t=Bn,e=AT();function i(a){return new n(a)}Dh.builderThroughDOMStream=i;class n{constructor(o){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:l,["writableStrategy"]:c,["queueingStrategy"]:h="count"}=o,A=t.__rest(o,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=(0,e.makeBuilder)(A),this._getSize=h!=="bytes"?r:s;const{["highWaterMark"]:m=h==="bytes"?Math.pow(2,14):1e3}=Object.assign({},l),{["highWaterMark"]:b=h==="bytes"?Math.pow(2,14):1e3}=Object.assign({},c);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:S=>{this._maybeFlush(this._builder,this._controller=S)},start:S=>{this._maybeFlush(this._builder,this._controller=S)}},{highWaterMark:m,size:h!=="bytes"?r:s}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:b,size:S=>this._writeValueAndReturnChunkSize(S)})}_writeValueAndReturnChunkSize(o){const l=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(o)),this._bufferedSize-l}_maybeFlush(o,l){l!=null&&(this._bufferedSize>=l.desiredSize&&++this._numChunks&&this._enqueue(l,o.toVector()),o.finished&&((o.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(l,o.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(l,null)))}_enqueue(o,l){this._bufferedSize=0,this._controller=null,l==null?o.close():o.enqueue(l)}}Dh.BuilderTransform=n;const r=a=>{var o;return(o=a==null?void 0:a.length)!==null&&o!==void 0?o:0},s=a=>{var o;return(o=a==null?void 0:a.byteLength)!==null&&o!==void 0?o:0};return Dh}var Ky={},O6;function wet(){if(O6)return Ky;O6=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.recordBatchReaderThroughDOMStream=void 0;const t=Bn,e=Nf(),i=gT();function n(r,s){const a=new e.AsyncByteQueue;let o=null;const l=new ReadableStream({cancel(){return t.__awaiter(this,void 0,void 0,function*(){yield a.close()})},start(A){return t.__awaiter(this,void 0,void 0,function*(){yield h(A,o||(o=yield c()))})},pull(A){return t.__awaiter(this,void 0,void 0,function*(){o?yield h(A,o):A.close()})}});return{writable:new WritableStream(a,Object.assign({highWaterMark:Math.pow(2,14)},r)),readable:l};function c(){return t.__awaiter(this,void 0,void 0,function*(){return yield(yield i.RecordBatchReader.from(a)).open(s)})}function h(A,m){return t.__awaiter(this,void 0,void 0,function*(){let b=A.desiredSize,S=null;for(;!(S=yield m.next()).done;)if(A.enqueue(S.value),b!=null&&--b<=0)return;A.close()})}}return Ky.recordBatchReaderThroughDOMStream=n,Ky}var Zy={},R6;function Met(){if(R6)return Zy;R6=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.recordBatchWriterThroughDOMStream=void 0;const t=Bn,e=Nf();function i(n,r){const s=new this(n),a=new e.AsyncByteStream(s),o=new ReadableStream({cancel(){return t.__awaiter(this,void 0,void 0,function*(){yield a.cancel()})},pull(c){return t.__awaiter(this,void 0,void 0,function*(){yield l(c)})},start(c){return t.__awaiter(this,void 0,void 0,function*(){yield l(c)})}},Object.assign({highWaterMark:Math.pow(2,14)},r));return{writable:new WritableStream(s,n),readable:o};function l(c){return t.__awaiter(this,void 0,void 0,function*(){let h=null,A=c.desiredSize;for(;h=yield a.read(A||null);)if(c.enqueue(h),A!=null&&(A-=h.byteLength)<=0)return;c.close()})}}return Zy.recordBatchWriterThroughDOMStream=i,Zy}var Kw={},Ch={},D6;function Iet(){if(D6)return Ch;D6=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.tableToIPC=Ch.tableFromIPC=void 0;const t=Q_(),e=Df(),i=gT(),n=KE();function r(a){const o=i.RecordBatchReader.from(a);return(0,e.isPromise)(o)?o.then(l=>r(l)):o.isAsync()?o.readAll().then(l=>new t.Table(l)):new t.Table(o.readAll())}Ch.tableFromIPC=r;function s(a,o="stream"){return(o==="stream"?n.RecordBatchStreamWriter:n.RecordBatchFileWriter).writeAll(a).toUint8Array(!0)}return Ch.tableToIPC=s,Ch}var C6;function P6(){return C6||(C6=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DenseUnion=t.Union=t.Struct=t.List=t.Decimal=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.DateMillisecond=t.DateDay=t.Date_=t.FixedSizeBinary=t.LargeBinary=t.Binary=t.LargeUtf8=t.Utf8=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Bool=t.Null=t.DataType=t.makeData=t.Data=t.MetadataVersion=t.IntervalUnit=t.UnionMode=t.Precision=t.TimeUnit=t.DateUnit=t.BufferType=t.Type=t.MessageHeader=void 0,t.TimeBuilder=t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=t.FixedSizeBinaryBuilder=t.DictionaryBuilder=t.DecimalBuilder=t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=t.NullBuilder=t.BoolBuilder=t.builderThroughAsyncIterable=t.builderThroughIterable=t.tableFromJSON=t.vectorFromArray=t.makeBuilder=t.Builder=t.StructRow=t.MapRow=t.Field=t.Schema=t.Visitor=t.makeVector=t.Vector=t.tableFromArrays=t.makeTable=t.Table=t.Map_=t.FixedSizeList=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.Dictionary=t.SparseUnion=void 0,t.util=t.RecordBatch=t.Message=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=t.tableFromIPC=t.tableToIPC=t.RecordBatchJSONWriter=t.RecordBatchStreamWriter=t.RecordBatchFileWriter=t.RecordBatchWriter=t.AsyncRecordBatchStreamReader=t.AsyncRecordBatchFileReader=t.RecordBatchStreamReader=t.RecordBatchFileReader=t.RecordBatchReader=t.AsyncByteQueue=t.AsyncByteStream=t.ByteStream=t.DenseUnionBuilder=t.SparseUnionBuilder=t.UnionBuilder=t.StructBuilder=t.MapBuilder=t.FixedSizeListBuilder=t.ListBuilder=t.LargeBinaryBuilder=t.BinaryBuilder=t.LargeUtf8Builder=t.Utf8Builder=t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=void 0;var e=VE();Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return e.MessageHeader}});var i=ir();Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return i.BufferType}}),Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return i.DateUnit}}),Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return i.TimeUnit}}),Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return i.Precision}}),Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return i.UnionMode}}),Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return i.IntervalUnit}}),Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return i.MetadataVersion}});var n=Rc();Object.defineProperty(t,"Data",{enumerable:!0,get:function(){return n.Data}}),Object.defineProperty(t,"makeData",{enumerable:!0,get:function(){return n.makeData}});var r=Cn();Object.defineProperty(t,"DataType",{enumerable:!0,get:function(){return r.DataType}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return r.Null}}),Object.defineProperty(t,"Bool",{enumerable:!0,get:function(){return r.Bool}}),Object.defineProperty(t,"Int",{enumerable:!0,get:function(){return r.Int}}),Object.defineProperty(t,"Int8",{enumerable:!0,get:function(){return r.Int8}}),Object.defineProperty(t,"Int16",{enumerable:!0,get:function(){return r.Int16}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return r.Int32}}),Object.defineProperty(t,"Int64",{enumerable:!0,get:function(){return r.Int64}}),Object.defineProperty(t,"Uint8",{enumerable:!0,get:function(){return r.Uint8}}),Object.defineProperty(t,"Uint16",{enumerable:!0,get:function(){return r.Uint16}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return r.Uint32}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return r.Uint64}}),Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return r.Float}}),Object.defineProperty(t,"Float16",{enumerable:!0,get:function(){return r.Float16}}),Object.defineProperty(t,"Float32",{enumerable:!0,get:function(){return r.Float32}}),Object.defineProperty(t,"Float64",{enumerable:!0,get:function(){return r.Float64}}),Object.defineProperty(t,"Utf8",{enumerable:!0,get:function(){return r.Utf8}}),Object.defineProperty(t,"LargeUtf8",{enumerable:!0,get:function(){return r.LargeUtf8}}),Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return r.Binary}}),Object.defineProperty(t,"LargeBinary",{enumerable:!0,get:function(){return r.LargeBinary}}),Object.defineProperty(t,"FixedSizeBinary",{enumerable:!0,get:function(){return r.FixedSizeBinary}}),Object.defineProperty(t,"Date_",{enumerable:!0,get:function(){return r.Date_}}),Object.defineProperty(t,"DateDay",{enumerable:!0,get:function(){return r.DateDay}}),Object.defineProperty(t,"DateMillisecond",{enumerable:!0,get:function(){return r.DateMillisecond}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return r.Timestamp}}),Object.defineProperty(t,"TimestampSecond",{enumerable:!0,get:function(){return r.TimestampSecond}}),Object.defineProperty(t,"TimestampMillisecond",{enumerable:!0,get:function(){return r.TimestampMillisecond}}),Object.defineProperty(t,"TimestampMicrosecond",{enumerable:!0,get:function(){return r.TimestampMicrosecond}}),Object.defineProperty(t,"TimestampNanosecond",{enumerable:!0,get:function(){return r.TimestampNanosecond}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return r.Time}}),Object.defineProperty(t,"TimeSecond",{enumerable:!0,get:function(){return r.TimeSecond}}),Object.defineProperty(t,"TimeMillisecond",{enumerable:!0,get:function(){return r.TimeMillisecond}}),Object.defineProperty(t,"TimeMicrosecond",{enumerable:!0,get:function(){return r.TimeMicrosecond}}),Object.defineProperty(t,"TimeNanosecond",{enumerable:!0,get:function(){return r.TimeNanosecond}}),Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return r.Decimal}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return r.List}}),Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return r.Struct}}),Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return r.Union}}),Object.defineProperty(t,"DenseUnion",{enumerable:!0,get:function(){return r.DenseUnion}}),Object.defineProperty(t,"SparseUnion",{enumerable:!0,get:function(){return r.SparseUnion}}),Object.defineProperty(t,"Dictionary",{enumerable:!0,get:function(){return r.Dictionary}}),Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return r.Interval}}),Object.defineProperty(t,"IntervalDayTime",{enumerable:!0,get:function(){return r.IntervalDayTime}}),Object.defineProperty(t,"IntervalYearMonth",{enumerable:!0,get:function(){return r.IntervalYearMonth}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return r.Duration}}),Object.defineProperty(t,"DurationSecond",{enumerable:!0,get:function(){return r.DurationSecond}}),Object.defineProperty(t,"DurationMillisecond",{enumerable:!0,get:function(){return r.DurationMillisecond}}),Object.defineProperty(t,"DurationMicrosecond",{enumerable:!0,get:function(){return r.DurationMicrosecond}}),Object.defineProperty(t,"DurationNanosecond",{enumerable:!0,get:function(){return r.DurationNanosecond}}),Object.defineProperty(t,"FixedSizeList",{enumerable:!0,get:function(){return r.FixedSizeList}}),Object.defineProperty(t,"Map_",{enumerable:!0,get:function(){return r.Map_}});var s=Q_();Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return s.Table}}),Object.defineProperty(t,"makeTable",{enumerable:!0,get:function(){return s.makeTable}}),Object.defineProperty(t,"tableFromArrays",{enumerable:!0,get:function(){return s.tableFromArrays}});var a=js();Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return a.Vector}}),Object.defineProperty(t,"makeVector",{enumerable:!0,get:function(){return a.makeVector}});var o=Ta();Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return o.Visitor}});var l=Sa();Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return l.Schema}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return l.Field}});var c=hT();Object.defineProperty(t,"MapRow",{enumerable:!0,get:function(){return c.MapRow}});var h=WE();Object.defineProperty(t,"StructRow",{enumerable:!0,get:function(){return h.StructRow}});var A=qn();Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return A.Builder}});var m=AT();Object.defineProperty(t,"makeBuilder",{enumerable:!0,get:function(){return m.makeBuilder}}),Object.defineProperty(t,"vectorFromArray",{enumerable:!0,get:function(){return m.vectorFromArray}}),Object.defineProperty(t,"tableFromJSON",{enumerable:!0,get:function(){return m.tableFromJSON}}),Object.defineProperty(t,"builderThroughIterable",{enumerable:!0,get:function(){return m.builderThroughIterable}}),Object.defineProperty(t,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return m.builderThroughAsyncIterable}});var b=O7();Object.defineProperty(t,"BoolBuilder",{enumerable:!0,get:function(){return b.BoolBuilder}});var S=z7();Object.defineProperty(t,"NullBuilder",{enumerable:!0,get:function(){return S.NullBuilder}});var M=R7();Object.defineProperty(t,"DateBuilder",{enumerable:!0,get:function(){return M.DateBuilder}}),Object.defineProperty(t,"DateDayBuilder",{enumerable:!0,get:function(){return M.DateDayBuilder}}),Object.defineProperty(t,"DateMillisecondBuilder",{enumerable:!0,get:function(){return M.DateMillisecondBuilder}});var I=D7();Object.defineProperty(t,"DecimalBuilder",{enumerable:!0,get:function(){return I.DecimalBuilder}});var O=C7();Object.defineProperty(t,"DictionaryBuilder",{enumerable:!0,get:function(){return O.DictionaryBuilder}});var D=P7();Object.defineProperty(t,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return D.FixedSizeBinaryBuilder}});var B=N7();Object.defineProperty(t,"FloatBuilder",{enumerable:!0,get:function(){return B.FloatBuilder}}),Object.defineProperty(t,"Float16Builder",{enumerable:!0,get:function(){return B.Float16Builder}}),Object.defineProperty(t,"Float32Builder",{enumerable:!0,get:function(){return B.Float32Builder}}),Object.defineProperty(t,"Float64Builder",{enumerable:!0,get:function(){return B.Float64Builder}});var P=U7();Object.defineProperty(t,"IntBuilder",{enumerable:!0,get:function(){return P.IntBuilder}}),Object.defineProperty(t,"Int8Builder",{enumerable:!0,get:function(){return P.Int8Builder}}),Object.defineProperty(t,"Int16Builder",{enumerable:!0,get:function(){return P.Int16Builder}}),Object.defineProperty(t,"Int32Builder",{enumerable:!0,get:function(){return P.Int32Builder}}),Object.defineProperty(t,"Int64Builder",{enumerable:!0,get:function(){return P.Int64Builder}}),Object.defineProperty(t,"Uint8Builder",{enumerable:!0,get:function(){return P.Uint8Builder}}),Object.defineProperty(t,"Uint16Builder",{enumerable:!0,get:function(){return P.Uint16Builder}}),Object.defineProperty(t,"Uint32Builder",{enumerable:!0,get:function(){return P.Uint32Builder}}),Object.defineProperty(t,"Uint64Builder",{enumerable:!0,get:function(){return P.Uint64Builder}});var j=W7();Object.defineProperty(t,"TimeBuilder",{enumerable:!0,get:function(){return j.TimeBuilder}}),Object.defineProperty(t,"TimeSecondBuilder",{enumerable:!0,get:function(){return j.TimeSecondBuilder}}),Object.defineProperty(t,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return j.TimeMillisecondBuilder}}),Object.defineProperty(t,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return j.TimeMicrosecondBuilder}}),Object.defineProperty(t,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return j.TimeNanosecondBuilder}});var N=$7();Object.defineProperty(t,"TimestampBuilder",{enumerable:!0,get:function(){return N.TimestampBuilder}}),Object.defineProperty(t,"TimestampSecondBuilder",{enumerable:!0,get:function(){return N.TimestampSecondBuilder}}),Object.defineProperty(t,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return N.TimestampMillisecondBuilder}}),Object.defineProperty(t,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return N.TimestampMicrosecondBuilder}}),Object.defineProperty(t,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return N.TimestampNanosecondBuilder}});var F=F7();Object.defineProperty(t,"IntervalBuilder",{enumerable:!0,get:function(){return F.IntervalBuilder}}),Object.defineProperty(t,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return F.IntervalDayTimeBuilder}}),Object.defineProperty(t,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return F.IntervalYearMonthBuilder}});var $=L7();Object.defineProperty(t,"DurationBuilder",{enumerable:!0,get:function(){return $.DurationBuilder}}),Object.defineProperty(t,"DurationSecondBuilder",{enumerable:!0,get:function(){return $.DurationSecondBuilder}}),Object.defineProperty(t,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return $.DurationMillisecondBuilder}}),Object.defineProperty(t,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return $.DurationMicrosecondBuilder}}),Object.defineProperty(t,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return $.DurationNanosecondBuilder}});var V=q7();Object.defineProperty(t,"Utf8Builder",{enumerable:!0,get:function(){return V.Utf8Builder}});var Z=Y7();Object.defineProperty(t,"LargeUtf8Builder",{enumerable:!0,get:function(){return Z.LargeUtf8Builder}});var nt=GE();Object.defineProperty(t,"BinaryBuilder",{enumerable:!0,get:function(){return nt.BinaryBuilder}});var X=XE();Object.defineProperty(t,"LargeBinaryBuilder",{enumerable:!0,get:function(){return X.LargeBinaryBuilder}});var bt=k7();Object.defineProperty(t,"ListBuilder",{enumerable:!0,get:function(){return bt.ListBuilder}});var Tt=x7();Object.defineProperty(t,"FixedSizeListBuilder",{enumerable:!0,get:function(){return Tt.FixedSizeListBuilder}});var Ot=j7();Object.defineProperty(t,"MapBuilder",{enumerable:!0,get:function(){return Ot.MapBuilder}});var H=V7();Object.defineProperty(t,"StructBuilder",{enumerable:!0,get:function(){return H.StructBuilder}});var k=H7();Object.defineProperty(t,"UnionBuilder",{enumerable:!0,get:function(){return k.UnionBuilder}}),Object.defineProperty(t,"SparseUnionBuilder",{enumerable:!0,get:function(){return k.SparseUnionBuilder}}),Object.defineProperty(t,"DenseUnionBuilder",{enumerable:!0,get:function(){return k.DenseUnionBuilder}});var G=Nf();Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return G.ByteStream}}),Object.defineProperty(t,"AsyncByteStream",{enumerable:!0,get:function(){return G.AsyncByteStream}}),Object.defineProperty(t,"AsyncByteQueue",{enumerable:!0,get:function(){return G.AsyncByteQueue}});var lt=gT();Object.defineProperty(t,"RecordBatchReader",{enumerable:!0,get:function(){return lt.RecordBatchReader}}),Object.defineProperty(t,"RecordBatchFileReader",{enumerable:!0,get:function(){return lt.RecordBatchFileReader}}),Object.defineProperty(t,"RecordBatchStreamReader",{enumerable:!0,get:function(){return lt.RecordBatchStreamReader}}),Object.defineProperty(t,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return lt.AsyncRecordBatchFileReader}}),Object.defineProperty(t,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return lt.AsyncRecordBatchStreamReader}});var Q=KE();Object.defineProperty(t,"RecordBatchWriter",{enumerable:!0,get:function(){return Q.RecordBatchWriter}}),Object.defineProperty(t,"RecordBatchFileWriter",{enumerable:!0,get:function(){return Q.RecordBatchFileWriter}}),Object.defineProperty(t,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return Q.RecordBatchStreamWriter}}),Object.defineProperty(t,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return Q.RecordBatchJSONWriter}});var mt=Iet();Object.defineProperty(t,"tableToIPC",{enumerable:!0,get:function(){return mt.tableToIPC}}),Object.defineProperty(t,"tableFromIPC",{enumerable:!0,get:function(){return mt.tableFromIPC}});var wt=QE();Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return wt.MessageReader}}),Object.defineProperty(t,"AsyncMessageReader",{enumerable:!0,get:function(){return wt.AsyncMessageReader}}),Object.defineProperty(t,"JSONMessageReader",{enumerable:!0,get:function(){return wt.JSONMessageReader}});var Dt=jA();Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return Dt.Message}});var te=Ff();Object.defineProperty(t,"RecordBatch",{enumerable:!0,get:function(){return te.RecordBatch}});const ie=$E(),ft=B7(),Ht=h0(),Nt=uT(),he=Gr(),me=X_(),Me=cT(),pe=dT();t.util=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ie),ft),Ht),Nt),he),me),Me),{compareSchemas:pe.compareSchemas,compareFields:pe.compareFields,compareTypes:pe.compareTypes})}(Kw)),Kw}var x6;function N6(){return x6||(x6=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Union=t.StructRow=t.Struct=t.List=t.Decimal=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.DateMillisecond=t.DateDay=t.Date_=t.FixedSizeBinary=t.LargeBinary=t.Binary=t.LargeUtf8=t.Utf8=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Bool=t.Null=t.DataType=t.makeData=t.Data=t.BufferType=t.UnionMode=t.Type=t.TimeUnit=t.Precision=t.MetadataVersion=t.MessageHeader=t.IntervalUnit=t.DateUnit=void 0,t.LargeBinaryBuilder=t.BinaryBuilder=t.builderThroughAsyncIterable=t.builderThroughIterable=t.makeBuilder=t.Builder=t.util=t.RecordBatch=t.Message=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=t.tableToIPC=t.tableFromIPC=t.RecordBatchJSONWriter=t.RecordBatchStreamWriter=t.RecordBatchFileWriter=t.RecordBatchWriter=t.AsyncRecordBatchStreamReader=t.AsyncRecordBatchFileReader=t.RecordBatchStreamReader=t.RecordBatchFileReader=t.RecordBatchReader=t.AsyncByteQueue=t.AsyncByteStream=t.ByteStream=t.tableFromJSON=t.vectorFromArray=t.makeVector=t.Vector=t.Visitor=t.Field=t.Schema=t.tableFromArrays=t.makeTable=t.Table=t.MapRow=t.Map_=t.FixedSizeList=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.Dictionary=t.SparseUnion=t.DenseUnion=void 0,t.LargeUtf8Builder=t.Utf8Builder=t.SparseUnionBuilder=t.DenseUnionBuilder=t.UnionBuilder=t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=t.TimeBuilder=t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=t.StructBuilder=t.NullBuilder=t.MapBuilder=t.ListBuilder=t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=t.FixedSizeListBuilder=t.FixedSizeBinaryBuilder=t.DictionaryBuilder=t.DecimalBuilder=t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=t.BoolBuilder=void 0;const e=oT(),i=qn(),n=gT(),r=KE(),s=vet(),a=Tet(),o=wet(),l=Met();e.default.toDOMStream=s.toDOMStream,i.Builder.throughDOM=a.builderThroughDOMStream,n.RecordBatchReader.throughDOM=o.recordBatchReaderThroughDOMStream,n.RecordBatchFileReader.throughDOM=o.recordBatchReaderThroughDOMStream,n.RecordBatchStreamReader.throughDOM=o.recordBatchReaderThroughDOMStream,r.RecordBatchWriter.throughDOM=l.recordBatchWriterThroughDOMStream,r.RecordBatchFileWriter.throughDOM=l.recordBatchWriterThroughDOMStream,r.RecordBatchStreamWriter.throughDOM=l.recordBatchWriterThroughDOMStream;var c=P6();Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return c.DateUnit}}),Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return c.IntervalUnit}}),Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return c.MessageHeader}}),Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return c.MetadataVersion}}),Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return c.Precision}}),Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return c.TimeUnit}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return c.Type}}),Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return c.UnionMode}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return c.BufferType}}),Object.defineProperty(t,"Data",{enumerable:!0,get:function(){return c.Data}}),Object.defineProperty(t,"makeData",{enumerable:!0,get:function(){return c.makeData}}),Object.defineProperty(t,"DataType",{enumerable:!0,get:function(){return c.DataType}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return c.Null}}),Object.defineProperty(t,"Bool",{enumerable:!0,get:function(){return c.Bool}}),Object.defineProperty(t,"Int",{enumerable:!0,get:function(){return c.Int}}),Object.defineProperty(t,"Int8",{enumerable:!0,get:function(){return c.Int8}}),Object.defineProperty(t,"Int16",{enumerable:!0,get:function(){return c.Int16}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return c.Int32}}),Object.defineProperty(t,"Int64",{enumerable:!0,get:function(){return c.Int64}}),Object.defineProperty(t,"Uint8",{enumerable:!0,get:function(){return c.Uint8}}),Object.defineProperty(t,"Uint16",{enumerable:!0,get:function(){return c.Uint16}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return c.Uint32}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return c.Uint64}}),Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return c.Float}}),Object.defineProperty(t,"Float16",{enumerable:!0,get:function(){return c.Float16}}),Object.defineProperty(t,"Float32",{enumerable:!0,get:function(){return c.Float32}}),Object.defineProperty(t,"Float64",{enumerable:!0,get:function(){return c.Float64}}),Object.defineProperty(t,"Utf8",{enumerable:!0,get:function(){return c.Utf8}}),Object.defineProperty(t,"LargeUtf8",{enumerable:!0,get:function(){return c.LargeUtf8}}),Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return c.Binary}}),Object.defineProperty(t,"LargeBinary",{enumerable:!0,get:function(){return c.LargeBinary}}),Object.defineProperty(t,"FixedSizeBinary",{enumerable:!0,get:function(){return c.FixedSizeBinary}}),Object.defineProperty(t,"Date_",{enumerable:!0,get:function(){return c.Date_}}),Object.defineProperty(t,"DateDay",{enumerable:!0,get:function(){return c.DateDay}}),Object.defineProperty(t,"DateMillisecond",{enumerable:!0,get:function(){return c.DateMillisecond}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return c.Timestamp}}),Object.defineProperty(t,"TimestampSecond",{enumerable:!0,get:function(){return c.TimestampSecond}}),Object.defineProperty(t,"TimestampMillisecond",{enumerable:!0,get:function(){return c.TimestampMillisecond}}),Object.defineProperty(t,"TimestampMicrosecond",{enumerable:!0,get:function(){return c.TimestampMicrosecond}}),Object.defineProperty(t,"TimestampNanosecond",{enumerable:!0,get:function(){return c.TimestampNanosecond}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return c.Time}}),Object.defineProperty(t,"TimeSecond",{enumerable:!0,get:function(){return c.TimeSecond}}),Object.defineProperty(t,"TimeMillisecond",{enumerable:!0,get:function(){return c.TimeMillisecond}}),Object.defineProperty(t,"TimeMicrosecond",{enumerable:!0,get:function(){return c.TimeMicrosecond}}),Object.defineProperty(t,"TimeNanosecond",{enumerable:!0,get:function(){return c.TimeNanosecond}}),Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return c.Decimal}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return c.List}}),Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return c.Struct}}),Object.defineProperty(t,"StructRow",{enumerable:!0,get:function(){return c.StructRow}}),Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return c.Union}}),Object.defineProperty(t,"DenseUnion",{enumerable:!0,get:function(){return c.DenseUnion}}),Object.defineProperty(t,"SparseUnion",{enumerable:!0,get:function(){return c.SparseUnion}}),Object.defineProperty(t,"Dictionary",{enumerable:!0,get:function(){return c.Dictionary}}),Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return c.Interval}}),Object.defineProperty(t,"IntervalDayTime",{enumerable:!0,get:function(){return c.IntervalDayTime}}),Object.defineProperty(t,"IntervalYearMonth",{enumerable:!0,get:function(){return c.IntervalYearMonth}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return c.Duration}}),Object.defineProperty(t,"DurationSecond",{enumerable:!0,get:function(){return c.DurationSecond}}),Object.defineProperty(t,"DurationMillisecond",{enumerable:!0,get:function(){return c.DurationMillisecond}}),Object.defineProperty(t,"DurationMicrosecond",{enumerable:!0,get:function(){return c.DurationMicrosecond}}),Object.defineProperty(t,"DurationNanosecond",{enumerable:!0,get:function(){return c.DurationNanosecond}}),Object.defineProperty(t,"FixedSizeList",{enumerable:!0,get:function(){return c.FixedSizeList}}),Object.defineProperty(t,"Map_",{enumerable:!0,get:function(){return c.Map_}}),Object.defineProperty(t,"MapRow",{enumerable:!0,get:function(){return c.MapRow}}),Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return c.Table}}),Object.defineProperty(t,"makeTable",{enumerable:!0,get:function(){return c.makeTable}}),Object.defineProperty(t,"tableFromArrays",{enumerable:!0,get:function(){return c.tableFromArrays}}),Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return c.Schema}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return c.Field}}),Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return c.Visitor}}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return c.Vector}}),Object.defineProperty(t,"makeVector",{enumerable:!0,get:function(){return c.makeVector}}),Object.defineProperty(t,"vectorFromArray",{enumerable:!0,get:function(){return c.vectorFromArray}}),Object.defineProperty(t,"tableFromJSON",{enumerable:!0,get:function(){return c.tableFromJSON}}),Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return c.ByteStream}}),Object.defineProperty(t,"AsyncByteStream",{enumerable:!0,get:function(){return c.AsyncByteStream}}),Object.defineProperty(t,"AsyncByteQueue",{enumerable:!0,get:function(){return c.AsyncByteQueue}}),Object.defineProperty(t,"RecordBatchReader",{enumerable:!0,get:function(){return c.RecordBatchReader}}),Object.defineProperty(t,"RecordBatchFileReader",{enumerable:!0,get:function(){return c.RecordBatchFileReader}}),Object.defineProperty(t,"RecordBatchStreamReader",{enumerable:!0,get:function(){return c.RecordBatchStreamReader}}),Object.defineProperty(t,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return c.AsyncRecordBatchFileReader}}),Object.defineProperty(t,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return c.AsyncRecordBatchStreamReader}}),Object.defineProperty(t,"RecordBatchWriter",{enumerable:!0,get:function(){return c.RecordBatchWriter}}),Object.defineProperty(t,"RecordBatchFileWriter",{enumerable:!0,get:function(){return c.RecordBatchFileWriter}}),Object.defineProperty(t,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return c.RecordBatchStreamWriter}}),Object.defineProperty(t,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return c.RecordBatchJSONWriter}}),Object.defineProperty(t,"tableFromIPC",{enumerable:!0,get:function(){return c.tableFromIPC}}),Object.defineProperty(t,"tableToIPC",{enumerable:!0,get:function(){return c.tableToIPC}}),Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return c.MessageReader}}),Object.defineProperty(t,"AsyncMessageReader",{enumerable:!0,get:function(){return c.AsyncMessageReader}}),Object.defineProperty(t,"JSONMessageReader",{enumerable:!0,get:function(){return c.JSONMessageReader}}),Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return c.Message}}),Object.defineProperty(t,"RecordBatch",{enumerable:!0,get:function(){return c.RecordBatch}}),Object.defineProperty(t,"util",{enumerable:!0,get:function(){return c.util}}),Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return c.Builder}}),Object.defineProperty(t,"makeBuilder",{enumerable:!0,get:function(){return c.makeBuilder}}),Object.defineProperty(t,"builderThroughIterable",{enumerable:!0,get:function(){return c.builderThroughIterable}}),Object.defineProperty(t,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return c.builderThroughAsyncIterable}});var h=P6();Object.defineProperty(t,"BinaryBuilder",{enumerable:!0,get:function(){return h.BinaryBuilder}}),Object.defineProperty(t,"LargeBinaryBuilder",{enumerable:!0,get:function(){return h.LargeBinaryBuilder}}),Object.defineProperty(t,"BoolBuilder",{enumerable:!0,get:function(){return h.BoolBuilder}}),Object.defineProperty(t,"DateBuilder",{enumerable:!0,get:function(){return h.DateBuilder}}),Object.defineProperty(t,"DateDayBuilder",{enumerable:!0,get:function(){return h.DateDayBuilder}}),Object.defineProperty(t,"DateMillisecondBuilder",{enumerable:!0,get:function(){return h.DateMillisecondBuilder}}),Object.defineProperty(t,"DecimalBuilder",{enumerable:!0,get:function(){return h.DecimalBuilder}}),Object.defineProperty(t,"DictionaryBuilder",{enumerable:!0,get:function(){return h.DictionaryBuilder}}),Object.defineProperty(t,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return h.FixedSizeBinaryBuilder}}),Object.defineProperty(t,"FixedSizeListBuilder",{enumerable:!0,get:function(){return h.FixedSizeListBuilder}}),Object.defineProperty(t,"FloatBuilder",{enumerable:!0,get:function(){return h.FloatBuilder}}),Object.defineProperty(t,"Float16Builder",{enumerable:!0,get:function(){return h.Float16Builder}}),Object.defineProperty(t,"Float32Builder",{enumerable:!0,get:function(){return h.Float32Builder}}),Object.defineProperty(t,"Float64Builder",{enumerable:!0,get:function(){return h.Float64Builder}}),Object.defineProperty(t,"IntervalBuilder",{enumerable:!0,get:function(){return h.IntervalBuilder}}),Object.defineProperty(t,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return h.IntervalDayTimeBuilder}}),Object.defineProperty(t,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return h.IntervalYearMonthBuilder}}),Object.defineProperty(t,"DurationBuilder",{enumerable:!0,get:function(){return h.DurationBuilder}}),Object.defineProperty(t,"DurationSecondBuilder",{enumerable:!0,get:function(){return h.DurationSecondBuilder}}),Object.defineProperty(t,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return h.DurationMillisecondBuilder}}),Object.defineProperty(t,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return h.DurationMicrosecondBuilder}}),Object.defineProperty(t,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return h.DurationNanosecondBuilder}}),Object.defineProperty(t,"IntBuilder",{enumerable:!0,get:function(){return h.IntBuilder}}),Object.defineProperty(t,"Int8Builder",{enumerable:!0,get:function(){return h.Int8Builder}}),Object.defineProperty(t,"Int16Builder",{enumerable:!0,get:function(){return h.Int16Builder}}),Object.defineProperty(t,"Int32Builder",{enumerable:!0,get:function(){return h.Int32Builder}}),Object.defineProperty(t,"Int64Builder",{enumerable:!0,get:function(){return h.Int64Builder}}),Object.defineProperty(t,"Uint8Builder",{enumerable:!0,get:function(){return h.Uint8Builder}}),Object.defineProperty(t,"Uint16Builder",{enumerable:!0,get:function(){return h.Uint16Builder}}),Object.defineProperty(t,"Uint32Builder",{enumerable:!0,get:function(){return h.Uint32Builder}}),Object.defineProperty(t,"Uint64Builder",{enumerable:!0,get:function(){return h.Uint64Builder}}),Object.defineProperty(t,"ListBuilder",{enumerable:!0,get:function(){return h.ListBuilder}}),Object.defineProperty(t,"MapBuilder",{enumerable:!0,get:function(){return h.MapBuilder}}),Object.defineProperty(t,"NullBuilder",{enumerable:!0,get:function(){return h.NullBuilder}}),Object.defineProperty(t,"StructBuilder",{enumerable:!0,get:function(){return h.StructBuilder}}),Object.defineProperty(t,"TimestampBuilder",{enumerable:!0,get:function(){return h.TimestampBuilder}}),Object.defineProperty(t,"TimestampSecondBuilder",{enumerable:!0,get:function(){return h.TimestampSecondBuilder}}),Object.defineProperty(t,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return h.TimestampMillisecondBuilder}}),Object.defineProperty(t,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return h.TimestampMicrosecondBuilder}}),Object.defineProperty(t,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return h.TimestampNanosecondBuilder}}),Object.defineProperty(t,"TimeBuilder",{enumerable:!0,get:function(){return h.TimeBuilder}}),Object.defineProperty(t,"TimeSecondBuilder",{enumerable:!0,get:function(){return h.TimeSecondBuilder}}),Object.defineProperty(t,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return h.TimeMillisecondBuilder}}),Object.defineProperty(t,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return h.TimeMicrosecondBuilder}}),Object.defineProperty(t,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return h.TimeNanosecondBuilder}}),Object.defineProperty(t,"UnionBuilder",{enumerable:!0,get:function(){return h.UnionBuilder}}),Object.defineProperty(t,"DenseUnionBuilder",{enumerable:!0,get:function(){return h.DenseUnionBuilder}}),Object.defineProperty(t,"SparseUnionBuilder",{enumerable:!0,get:function(){return h.SparseUnionBuilder}}),Object.defineProperty(t,"Utf8Builder",{enumerable:!0,get:function(){return h.Utf8Builder}}),Object.defineProperty(t,"LargeUtf8Builder",{enumerable:!0,get:function(){return h.LargeUtf8Builder}})}(jw)),jw}var Zw,F6;function Fb(){if(F6)return Zw;F6=1;var t=Object.create,e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,a=(q,Bt)=>()=>(Bt||q((Bt={exports:{}}).exports,Bt),Bt.exports),o=(q,Bt)=>{for(var Xt in Bt)e(q,Xt,{get:Bt[Xt],enumerable:!0})},l=(q,Bt,Xt,ke)=>{if(Bt&&typeof Bt=="object"||typeof Bt=="function")for(let qi of n(Bt))!s.call(q,qi)&&qi!==Xt&&e(q,qi,{get:()=>Bt[qi],enumerable:!(ke=i(Bt,qi))||ke.enumerable});return q},c=(q,Bt,Xt)=>(Xt=q!=null?t(r(q)):{},l(!q||!q.__esModule?e(Xt,"default",{value:q,enumerable:!0}):Xt,q)),h=q=>l(e({},"__esModule",{value:!0}),q),A=a((q,Bt)=>{Bt.exports=Worker}),m={};o(m,{AsyncDuckDB:()=>mt,AsyncDuckDBConnection:()=>nt,AsyncDuckDBDispatcher:()=>wt,AsyncPreparedStatement:()=>bt,AsyncResultStreamIterator:()=>X,ConsoleLogger:()=>P,DuckDBAccessMode:()=>b,DuckDBDataProtocol:()=>Be,LogEvent:()=>O,LogLevel:()=>M,LogOrigin:()=>D,LogTopic:()=>I,PACKAGE_NAME:()=>Nt,PACKAGE_VERSION:()=>he,PACKAGE_VERSION_MAJOR:()=>Me,PACKAGE_VERSION_MINOR:()=>pe,PACKAGE_VERSION_PATCH:()=>Oe,StatusCode:()=>V,TokenType:()=>S,VoidLogger:()=>B,WorkerRequestType:()=>Tt,WorkerResponseType:()=>Ot,WorkerTask:()=>H,createWorker:()=>re,getJsDelivrBundles:()=>Y,getLogEventLabel:()=>N,getLogLevelLabel:()=>j,getLogOriginLabel:()=>$,getLogTopicLabel:()=>F,getPlatformFeatures:()=>ut,isFirefox:()=>qe,isNode:()=>Ye,isSafari:()=>dt,selectBundle:()=>vt}),Zw=h(m);var b=(q=>(q[q.UNDEFINED=0]="UNDEFINED",q[q.AUTOMATIC=1]="AUTOMATIC",q[q.READ_ONLY=2]="READ_ONLY",q[q.READ_WRITE=3]="READ_WRITE",q))(b||{}),S=(q=>(q[q.IDENTIFIER=0]="IDENTIFIER",q[q.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",q[q.STRING_CONSTANT=2]="STRING_CONSTANT",q[q.OPERATOR=3]="OPERATOR",q[q.KEYWORD=4]="KEYWORD",q[q.COMMENT=5]="COMMENT",q))(S||{}),M=(q=>(q[q.NONE=0]="NONE",q[q.DEBUG=1]="DEBUG",q[q.INFO=2]="INFO",q[q.WARNING=3]="WARNING",q[q.ERROR=4]="ERROR",q))(M||{}),I=(q=>(q[q.NONE=0]="NONE",q[q.CONNECT=1]="CONNECT",q[q.DISCONNECT=2]="DISCONNECT",q[q.OPEN=3]="OPEN",q[q.QUERY=4]="QUERY",q[q.INSTANTIATE=5]="INSTANTIATE",q))(I||{}),O=(q=>(q[q.NONE=0]="NONE",q[q.OK=1]="OK",q[q.ERROR=2]="ERROR",q[q.START=3]="START",q[q.RUN=4]="RUN",q[q.CAPTURE=5]="CAPTURE",q))(O||{}),D=(q=>(q[q.NONE=0]="NONE",q[q.WEB_WORKER=1]="WEB_WORKER",q[q.NODE_WORKER=2]="NODE_WORKER",q[q.BINDINGS=3]="BINDINGS",q[q.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",q))(D||{}),B=class{log(q){}},P=class{constructor(q=2){this.level=q}log(q){q.level>=this.level&&console.log(q)}};function j(q){switch(q){case 0:return"NONE";case 1:return"DEBUG";case 2:return"INFO";case 3:return"WARNING";case 4:return"ERROR";default:return"?"}}function N(q){switch(q){case 0:return"NONE";case 1:return"OK";case 2:return"ERROR";case 3:return"START";case 4:return"RUN";case 5:return"CAPTURE";default:return"?"}}function F(q){switch(q){case 1:return"CONNECT";case 2:return"DISCONNECT";case 5:return"INSTANTIATE";case 3:return"OPEN";case 4:return"QUERY";default:return"?"}}function $(q){switch(q){case 0:return"NONE";case 1:return"WEB WORKER";case 2:return"NODE WORKER";case 3:return"DUCKDB BINDINGS";case 4:return"DUCKDB";default:return"?"}}var V=(q=>(q[q.SUCCESS=0]="SUCCESS",q))(V||{}),Z=c(N6()),nt=class{constructor(q,Bt){this._bindings=q,this._conn=Bt}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(q){return q(this._bindings,this._conn)}async query(q){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:q});let Bt=await this._bindings.runQuery(this._conn,q),Xt=Z.RecordBatchReader.from(Bt);return console.assert(Xt.isSync(),"Reader is not sync"),console.assert(Xt.isFile(),"Reader is not file"),new Z.Table(Xt)}async send(q){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:q});let Bt=await this._bindings.startPendingQuery(this._conn,q);for(;Bt==null;)Bt=await this._bindings.pollPendingQuery(this._conn);let Xt=new X(this._bindings,this._conn,Bt),ke=await Z.RecordBatchReader.from(Xt);return console.assert(ke.isAsync()),console.assert(ke.isStream()),ke}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(q){return await this._bindings.getTableNames(this._conn,q)}async prepare(q){let Bt=await this._bindings.createPrepared(this._conn,q);return new bt(this._bindings,this._conn,Bt)}async insertArrowTable(q,Bt){let Xt=Z.tableToIPC(q,"stream");await this.insertArrowFromIPCStream(Xt,Bt)}async insertArrowFromIPCStream(q,Bt){await this._bindings.insertArrowFromIPCStream(this._conn,q,Bt)}async insertCSVFromPath(q,Bt){await this._bindings.insertCSVFromPath(this._conn,q,Bt)}async insertJSONFromPath(q,Bt){await this._bindings.insertJSONFromPath(this._conn,q,Bt)}},X=class{constructor(q,Bt,Xt){this.db=q,this.conn=Bt,this.header=Xt,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let q;return this._inFlight!=null?(q=await this._inFlight,this._inFlight=null):q=await this.db.fetchQueryResults(this.conn),this._depleted=q.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:q}}[Symbol.asyncIterator](){return this}},bt=class{constructor(q,Bt,Xt){this.bindings=q,this.connectionId=Bt,this.statementId=Xt}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...q){let Bt=await this.bindings.runPrepared(this.connectionId,this.statementId,q),Xt=Z.RecordBatchReader.from(Bt);return console.assert(Xt.isSync()),console.assert(Xt.isFile()),new Z.Table(Xt)}async send(...q){let Bt=await this.bindings.sendPrepared(this.connectionId,this.statementId,q),Xt=new X(this.bindings,this.connectionId,Bt),ke=await Z.RecordBatchReader.from(Xt);return console.assert(ke.isAsync()),console.assert(ke.isStream()),ke}},Tt=(q=>(q.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",q.CLOSE_PREPARED="CLOSE_PREPARED",q.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",q.CONNECT="CONNECT",q.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",q.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",q.CREATE_PREPARED="CREATE_PREPARED",q.DISCONNECT="DISCONNECT",q.DROP_FILE="DROP_FILE",q.DROP_FILES="DROP_FILES",q.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",q.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",q.FLUSH_FILES="FLUSH_FILES",q.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",q.GET_TABLE_NAMES="GET_TABLE_NAMES",q.GET_VERSION="GET_VERSION",q.GLOB_FILE_INFOS="GLOB_FILE_INFOS",q.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",q.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",q.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",q.INSTANTIATE="INSTANTIATE",q.OPEN="OPEN",q.PING="PING",q.POLL_PENDING_QUERY="POLL_PENDING_QUERY",q.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",q.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",q.REGISTER_FILE_URL="REGISTER_FILE_URL",q.RESET="RESET",q.RUN_PREPARED="RUN_PREPARED",q.RUN_QUERY="RUN_QUERY",q.SEND_PREPARED="SEND_PREPARED",q.START_PENDING_QUERY="START_PENDING_QUERY",q.TOKENIZE="TOKENIZE",q))(Tt||{}),Ot=(q=>(q.CONNECTION_INFO="CONNECTION_INFO",q.ERROR="ERROR",q.FEATURE_FLAGS="FEATURE_FLAGS",q.FILE_BUFFER="FILE_BUFFER",q.FILE_INFOS="FILE_INFOS",q.FILE_SIZE="FILE_SIZE",q.FILE_STATISTICS="FILE_STATISTICS",q.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",q.LOG="LOG",q.OK="OK",q.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",q.QUERY_PLAN="QUERY_PLAN",q.QUERY_RESULT="QUERY_RESULT",q.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",q.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",q.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",q.REGISTERED_FILE="REGISTERED_FILE",q.SCRIPT_TOKENS="SCRIPT_TOKENS",q.SUCCESS="SUCCESS",q.TABLE_NAMES="TABLE_NAMES",q.VERSION_STRING="VERSION_STRING",q))(Ot||{}),H=class{constructor(q,Bt){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=q,this.data=Bt,this.promise=new Promise((Xt,ke)=>{this.promiseResolver=Xt,this.promiseRejecter=ke})}},k=c(N6());function G(q){switch(q.typeId){case k.Type.Binary:return{sqlType:"binary"};case k.Type.Bool:return{sqlType:"bool"};case k.Type.Date:return{sqlType:"date"};case k.Type.DateDay:return{sqlType:"date32[d]"};case k.Type.DateMillisecond:return{sqlType:"date64[ms]"};case k.Type.Decimal:{let Bt=q;return{sqlType:"decimal",precision:Bt.precision,scale:Bt.scale}}case k.Type.Float:return{sqlType:"float"};case k.Type.Float16:return{sqlType:"float16"};case k.Type.Float32:return{sqlType:"float32"};case k.Type.Float64:return{sqlType:"float64"};case k.Type.Int:return{sqlType:"int32"};case k.Type.Int16:return{sqlType:"int16"};case k.Type.Int32:return{sqlType:"int32"};case k.Type.Int64:return{sqlType:"int64"};case k.Type.Uint16:return{sqlType:"uint16"};case k.Type.Uint32:return{sqlType:"uint32"};case k.Type.Uint64:return{sqlType:"uint64"};case k.Type.Uint8:return{sqlType:"uint8"};case k.Type.IntervalDayTime:return{sqlType:"interval[dt]"};case k.Type.IntervalYearMonth:return{sqlType:"interval[m]"};case k.Type.List:return{sqlType:"list",valueType:G(q.valueType)};case k.Type.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:q.byteWidth};case k.Type.Null:return{sqlType:"null"};case k.Type.Utf8:return{sqlType:"utf8"};case k.Type.Struct:return{sqlType:"struct",fields:q.children.map(Bt=>lt(Bt.name,Bt.type))};case k.Type.Map:{let Bt=q;return{sqlType:"map",keyType:G(Bt.keyType),valueType:G(Bt.valueType)}}case k.Type.Time:return{sqlType:"time[s]"};case k.Type.TimeMicrosecond:return{sqlType:"time[us]"};case k.Type.TimeMillisecond:return{sqlType:"time[ms]"};case k.Type.TimeNanosecond:return{sqlType:"time[ns]"};case k.Type.TimeSecond:return{sqlType:"time[s]"};case k.Type.Timestamp:return{sqlType:"timestamp",timezone:q.timezone||void 0};case k.Type.TimestampSecond:return{sqlType:"timestamp[s]",timezone:q.timezone||void 0};case k.Type.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:q.timezone||void 0};case k.Type.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:q.timezone||void 0};case k.Type.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:q.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(q.toString()))}function lt(q,Bt){let Xt=G(Bt);return Xt.name=q,Xt}var Q=new TextEncoder,mt=class{constructor(q,Bt=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=q,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),Bt!=null&&this.attach(Bt)}get logger(){return this._logger}attach(q){this._worker=q,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((Bt,Xt)=>{this._workerShutdownResolver=Bt})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(q,Bt=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let Xt=this._nextMessageId++;return this._pendingRequests.set(Xt,q),this._worker.postMessage({messageId:Xt,type:q.type,data:q.data},Bt),await q.promise}onMessage(q){var Bt;let Xt=q.data;switch(Xt.type){case"LOG":{this._logger.log(Xt.data);return}case"INSTANTIATE_PROGRESS":{for(let qi of this._onInstantiationProgress)qi(Xt.data);return}}let ke=this._pendingRequests.get(Xt.requestId);if(!ke){console.warn("unassociated response: [".concat(Xt.requestId,", ").concat(Xt.type.toString(),"]"));return}if(this._pendingRequests.delete(Xt.requestId),Xt.type=="ERROR"){let qi=new Error(Xt.data.message);qi.name=Xt.data.name,(Bt=Object.getOwnPropertyDescriptor(qi,"stack"))!=null&&Bt.writable&&(qi.stack=Xt.data.stack),ke.promiseRejecter(qi);return}switch(ke.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(Xt.type=="OK"){ke.promiseResolver(Xt.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],Xt.type=="OK"){ke.promiseResolver(Xt.data);return}break;case"GLOB_FILE_INFOS":if(Xt.type=="FILE_INFOS"){ke.promiseResolver(Xt.data);return}break;case"GET_VERSION":if(Xt.type=="VERSION_STRING"){ke.promiseResolver(Xt.data);return}break;case"GET_FEATURE_FLAGS":if(Xt.type=="FEATURE_FLAGS"){ke.promiseResolver(Xt.data);return}break;case"GET_TABLE_NAMES":if(Xt.type=="TABLE_NAMES"){ke.promiseResolver(Xt.data);return}break;case"TOKENIZE":if(Xt.type=="SCRIPT_TOKENS"){ke.promiseResolver(Xt.data);return}break;case"COPY_FILE_TO_BUFFER":if(Xt.type=="FILE_BUFFER"){ke.promiseResolver(Xt.data);return}break;case"EXPORT_FILE_STATISTICS":if(Xt.type=="FILE_STATISTICS"){ke.promiseResolver(Xt.data);return}break;case"CONNECT":if(Xt.type=="CONNECTION_INFO"){ke.promiseResolver(Xt.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(Xt.type=="QUERY_RESULT"){ke.promiseResolver(Xt.data);return}break;case"SEND_PREPARED":if(Xt.type=="QUERY_RESULT_HEADER"){ke.promiseResolver(Xt.data);return}break;case"START_PENDING_QUERY":if(Xt.type=="QUERY_RESULT_HEADER_OR_NULL"){ke.promiseResolver(Xt.data);return}break;case"POLL_PENDING_QUERY":if(Xt.type=="QUERY_RESULT_HEADER_OR_NULL"){ke.promiseResolver(Xt.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],Xt.type=="SUCCESS"){ke.promiseResolver(Xt.data);return}break;case"FETCH_QUERY_RESULTS":if(Xt.type=="QUERY_RESULT_CHUNK"){ke.promiseResolver(Xt.data);return}break;case"CREATE_PREPARED":if(Xt.type=="PREPARED_STATEMENT_ID"){ke.promiseResolver(Xt.data);return}break}ke.promiseRejecter(new Error("unexpected response type: ".concat(Xt.type.toString())))}onError(q){console.error(q),console.error("error in duckdb worker: ".concat(q.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let q=new H("RESET",null);return await this.postTask(q)}async ping(){let q=new H("PING",null);await this.postTask(q)}async dropFile(q){let Bt=new H("DROP_FILE",q);return await this.postTask(Bt)}async dropFiles(){let q=new H("DROP_FILES",null);return await this.postTask(q)}async flushFiles(){let q=new H("FLUSH_FILES",null);return await this.postTask(q)}async instantiate(q,Bt=null,Xt=ke=>{}){this._onInstantiationProgress.push(Xt);let ke=new H("INSTANTIATE",[q,Bt]);return await this.postTask(ke)}async getVersion(){let q=new H("GET_VERSION",null);return await this.postTask(q)}async getFeatureFlags(){let q=new H("GET_FEATURE_FLAGS",null);return await this.postTask(q)}async open(q){let Bt=new H("OPEN",q);await this.postTask(Bt)}async tokenize(q){let Bt=new H("TOKENIZE",q);return await this.postTask(Bt)}async connectInternal(){let q=new H("CONNECT",null);return await this.postTask(q)}async connect(){let q=await this.connectInternal();return new nt(this,q)}async disconnect(q){let Bt=new H("DISCONNECT",q);await this.postTask(Bt)}async runQuery(q,Bt){let Xt=new H("RUN_QUERY",[q,Bt]);return await this.postTask(Xt)}async startPendingQuery(q,Bt){let Xt=new H("START_PENDING_QUERY",[q,Bt]);return await this.postTask(Xt)}async pollPendingQuery(q){let Bt=new H("POLL_PENDING_QUERY",q);return await this.postTask(Bt)}async cancelPendingQuery(q){let Bt=new H("CANCEL_PENDING_QUERY",q);return await this.postTask(Bt)}async fetchQueryResults(q){let Bt=new H("FETCH_QUERY_RESULTS",q);return await this.postTask(Bt)}async getTableNames(q,Bt){let Xt=new H("GET_TABLE_NAMES",[q,Bt]);return await this.postTask(Xt)}async createPrepared(q,Bt){let Xt=new H("CREATE_PREPARED",[q,Bt]);return await this.postTask(Xt)}async closePrepared(q,Bt){let Xt=new H("CLOSE_PREPARED",[q,Bt]);await this.postTask(Xt)}async runPrepared(q,Bt,Xt){let ke=new H("RUN_PREPARED",[q,Bt,Xt]);return await this.postTask(ke)}async sendPrepared(q,Bt,Xt){let ke=new H("SEND_PREPARED",[q,Bt,Xt]);return await this.postTask(ke)}async globFiles(q){let Bt=new H("GLOB_FILE_INFOS",q);return await this.postTask(Bt)}async registerFileText(q,Bt){let Xt=Q.encode(Bt);await this.registerFileBuffer(q,Xt)}async registerFileURL(q,Bt,Xt,ke){Bt===void 0&&(Bt=q);let qi=new H("REGISTER_FILE_URL",[q,Bt,Xt,ke]);await this.postTask(qi)}async registerEmptyFileBuffer(q){}async registerFileBuffer(q,Bt){let Xt=new H("REGISTER_FILE_BUFFER",[q,Bt]);await this.postTask(Xt,[Bt.buffer])}async registerFileHandle(q,Bt,Xt,ke){let qi=new H("REGISTER_FILE_HANDLE",[q,Bt,Xt,ke]);await this.postTask(qi,[])}async collectFileStatistics(q,Bt){let Xt=new H("COLLECT_FILE_STATISTICS",[q,Bt]);await this.postTask(Xt,[])}async exportFileStatistics(q){let Bt=new H("EXPORT_FILE_STATISTICS",q);return await this.postTask(Bt,[])}async copyFileToBuffer(q){let Bt=new H("COPY_FILE_TO_BUFFER",q);return await this.postTask(Bt)}async copyFileToPath(q,Bt){let Xt=new H("COPY_FILE_TO_PATH",[q,Bt]);await this.postTask(Xt)}async insertArrowFromIPCStream(q,Bt,Xt){if(Bt.length==0)return;let ke=new H("INSERT_ARROW_FROM_IPC_STREAM",[q,Bt,Xt]);await this.postTask(ke,[Bt.buffer])}async insertCSVFromPath(q,Bt,Xt){if(Xt.columns!==void 0){let qi=[];for(let Tn in Xt.columns){let xn=Xt.columns[Tn];qi.push(lt(Tn,xn))}Xt.columnsFlat=qi,delete Xt.columns}let ke=new H("IMPORT_CSV_FROM_PATH",[q,Bt,Xt]);await this.postTask(ke)}async insertJSONFromPath(q,Bt,Xt){if(Xt.columns!==void 0){let qi=[];for(let Tn in Xt.columns){let xn=Xt.columns[Tn];qi.push(lt(Tn,xn))}Xt.columnsFlat=qi,delete Xt.columns}let ke=new H("IMPORT_JSON_FROM_PATH",[q,Bt,Xt]);await this.postTask(ke)}},wt=class{constructor(){this._bindings=null,this._nextMessageId=0}log(q){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:q},[])}sendOK(q){this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"OK",data:null},[])}failWith(q,Bt){let Xt={name:Bt.name,message:Bt.message,stack:Bt.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"ERROR",data:Xt},[])}async onMessage(q){switch(q.type){case"PING":this.sendOK(q);return;case"INSTANTIATE":this._bindings!=null&&this.failWith(q,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(q.data[0],q.data[1],Bt=>{this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"INSTANTIATE_PROGRESS",data:Bt},[])}),this.sendOK(q)}catch(Bt){console.log(Bt),this._bindings=null,this.failWith(q,Bt)}return}if(!this._bindings)return this.failWith(q,new Error("duckdb is not initialized"));try{switch(q.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(q);break;case"OPEN":this._bindings.open(q.data),this.sendOK(q);break;case"DROP_FILE":this._bindings.dropFile(q.data),this.sendOK(q);break;case"DROP_FILES":this._bindings.dropFiles(),this.sendOK(q);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(q);break;case"CONNECT":{let Bt=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"CONNECTION_INFO",data:Bt.useUnsafe((Xt,ke)=>ke)},[]);break}case"DISCONNECT":this._bindings.disconnect(q.data),this.sendOK(q);break;case"CREATE_PREPARED":{let Bt=this._bindings.createPrepared(q.data[0],q.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"PREPARED_STATEMENT_ID",data:Bt},[]);break}case"CLOSE_PREPARED":{this._bindings.closePrepared(q.data[0],q.data[1]),this.sendOK(q);break}case"RUN_PREPARED":{let Bt=this._bindings.runPrepared(q.data[0],q.data[1],q.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"QUERY_RESULT",data:Bt},[Bt.buffer]);break}case"RUN_QUERY":{let Bt=this._bindings.runQuery(q.data[0],q.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"QUERY_RESULT",data:Bt},[Bt.buffer]);break}case"SEND_PREPARED":{let Bt=this._bindings.sendPrepared(q.data[0],q.data[1],q.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"QUERY_RESULT_HEADER",data:Bt},[Bt.buffer]);break}case"START_PENDING_QUERY":{let Bt=this._bindings.startPendingQuery(q.data[0],q.data[1]),Xt=[];Bt&&Xt.push(Bt.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:Bt},Xt);break}case"POLL_PENDING_QUERY":{let Bt=this._bindings.pollPendingQuery(q.data),Xt=[];Bt&&Xt.push(Bt.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:Bt},Xt);break}case"CANCEL_PENDING_QUERY":{let Bt=this._bindings.cancelPendingQuery(q.data);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"SUCCESS",data:Bt},[]);break}case"FETCH_QUERY_RESULTS":{let Bt=this._bindings.fetchQueryResults(q.data);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"QUERY_RESULT_CHUNK",data:Bt},[Bt.buffer]);break}case"GET_TABLE_NAMES":{let Bt=this._bindings.getTableNames(q.data[0],q.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"TABLE_NAMES",data:Bt},[]);break}case"GLOB_FILE_INFOS":{let Bt=this._bindings.globFiles(q.data);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"FILE_INFOS",data:Bt},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(q.data[0],q.data[1],q.data[2],q.data[3]),this.sendOK(q);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(q.data[0],q.data[1]),this.sendOK(q);break;case"REGISTER_FILE_HANDLE":this._bindings.registerFileHandle(q.data[0],q.data[1],q.data[2],q.data[3]),this.sendOK(q);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(q.data[0],q.data[1]),this.sendOK(q);break;case"COPY_FILE_TO_BUFFER":{let Bt=this._bindings.copyFileToBuffer(q.data);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"FILE_BUFFER",data:Bt},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(q.data[0],q.data[1]),this.sendOK(q);break;case"EXPORT_FILE_STATISTICS":{this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(q.data)},[]);break}case"INSERT_ARROW_FROM_IPC_STREAM":{this._bindings.insertArrowFromIPCStream(q.data[0],q.data[1],q.data[2]),this.sendOK(q);break}case"IMPORT_CSV_FROM_PATH":{this._bindings.insertCSVFromPath(q.data[0],q.data[1],q.data[2]),this.sendOK(q);break}case"IMPORT_JSON_FROM_PATH":{this._bindings.insertJSONFromPath(q.data[0],q.data[1],q.data[2]),this.sendOK(q);break}case"TOKENIZE":{let Bt=this._bindings.tokenize(q.data);this.postMessage({messageId:this._nextMessageId++,requestId:q.messageId,type:"SCRIPT_TOKENS",data:Bt},[]);break}}}catch(Bt){return console.log(Bt),this.failWith(q,Bt)}}},Dt=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),te=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),ie=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),ft=()=>(async q=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(q)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),Ht={name:"@duckdb/duckdb-wasm",version:"1.29.0"},Nt=Ht.name,he=Ht.version,me=Ht.version.split("."),Me=me[0],pe=me[1],Oe=me[2],Ye=()=>typeof navigator>"u",Ee=()=>Ye()?"node":navigator.userAgent,qe=()=>Ee().includes("Firefox"),dt=()=>/^((?!chrome|android).)*safari/i.test(Ee());function Y(){let q="https://cdn.jsdelivr.net/npm/".concat(Nt,"@").concat(he,"/dist/");return{mvp:{mainModule:"".concat(q,"duckdb-mvp.wasm"),mainWorker:"".concat(q,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(q,"duckdb-eh.wasm"),mainWorker:"".concat(q,"duckdb-browser-eh.worker.js")}}}var K=null,Ct=null,ee=null,Ft=null,J=null;async function ut(){return K==null&&(K=typeof BigInt64Array<"u"),Ct==null&&(Ct=await te()),ee==null&&(ee=await ft()),Ft==null&&(Ft=await ie()),J==null&&(J=await Dt()),{bigInt64Array:K,crossOriginIsolated:Ye()||globalThis.crossOriginIsolated||!1,wasmExceptions:Ct,wasmSIMD:Ft,wasmThreads:ee,wasmBulkMemory:J}}async function vt(q){let Bt=await ut();if(Bt.wasmExceptions){if(Bt.wasmSIMD&&Bt.wasmThreads&&Bt.crossOriginIsolated&&q.coi)return{mainModule:q.coi.mainModule,mainWorker:q.coi.mainWorker,pthreadWorker:q.coi.pthreadWorker};if(q.eh)return{mainModule:q.eh.mainModule,mainWorker:q.eh.mainWorker,pthreadWorker:null}}return{mainModule:q.mvp.mainModule,mainWorker:q.mvp.mainWorker,pthreadWorker:null}}var Mt=c(A());async function re(q){let Bt=new Request(q),Xt=await fetch(Bt),ke=URL.createObjectURL(await Xt.blob());return new Mt.default(ke)}function be(){let q=new TextDecoder;return Bt=>(typeof SharedArrayBuffer<"u"&&Bt.buffer instanceof SharedArrayBuffer&&(Bt=new Uint8Array(Bt)),q.decode(Bt))}be();var Be=(q=>(q[q.BUFFER=0]="BUFFER",q[q.NODE_FS=1]="NODE_FS",q[q.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",q[q.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",q[q.HTTP=4]="HTTP",q[q.S3=5]="S3",q))(Be||{});return Zw}function zA(){return zA=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},zA.apply(this,arguments)}typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function Eet(t,e){try{var i=t()}catch(n){return e(!0,n)}return i&&i.then?i.then(e.bind(null,!1),e.bind(null,!0)):e(!1,value)}var Bet=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?Fe.useLayoutEffect:Fe.useEffect,Oet=function(e){var i=Fe.useRef(e);return Bet(function(){i.current=e}),Fe.useCallback(function(){return i.current},[i])},Ret={status:"not-requested",loading:!1,result:void 0,error:void 0},G7={status:"loading",loading:!0,result:void 0,error:void 0},Det=function(e){return G7},Cet=function(e,i){return{status:"success",loading:!1,result:e,error:void 0}},Pet=function(e,i){return{status:"error",loading:!1,result:void 0,error:e}},L6=function(){},xet={initialState:function(e){return e&&e.executeOnMount?G7:Ret},executeOnMount:!0,executeOnUpdate:!0,setLoading:Det,setResult:Cet,setError:Pet,onSuccess:L6,onError:L6},Net=function(e){return zA({},xet,{},e)},Fet=function(e){var i=Fe.useState(function(){return e.initialState(e)}),n=i[0],r=i[1],s=Fe.useCallback(function(){return r(e.initialState(e))},[r,e]),a=Fe.useCallback(function(){return r(e.setLoading(n))},[n,r]),o=Fe.useCallback(function(h){return r(e.setResult(h,n))},[n,r]),l=Fe.useCallback(function(h){return r(e.setError(h,n))},[n,r]),c=Fe.useCallback(function(h){return r(zA({},n,{},h))},[n,r]);return{value:n,set:r,merge:c,reset:s,setLoading:a,setResult:o,setError:l}},Let=function(){var e=Fe.useRef(!1);return Fe.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),function(){return e.current}},Uet=function(){var e=Fe.useRef(null);return{set:function(n){return e.current=n},get:function(){return e.current},is:function(n){return e.current===n}}},X7=function(e,i,n){!i&&(i=[]);var r=Net(n),s=Fe.useState(null),a=s[0],o=s[1],l=Fet(r),c=Let(),h=Uet(),A=function(O){return c()&&h.is(O)},m=function(){for(var O=arguments.length,D=new Array(O),B=0;B<O;B++)D[B]=arguments[B];var P=function(){try{return Promise.resolve(e.apply(void 0,D))}catch(j){return Promise.reject(j)}}();return o(D),h.set(P),l.setLoading(),P.then(function(j){A(P)&&l.setResult(j),r.onSuccess(j,{isCurrent:function(){return h.is(P)}})},function(j){A(P)&&l.setError(j),r.onError(j,{isCurrent:function(){return h.is(P)}})}),P},b=Oet(m),S=Fe.useCallback(function(){return b().apply(void 0,arguments)},[b]),M=!c();return Fe.useEffect(function(){var I=function(){return b().apply(void 0,i)};M&&r.executeOnMount&&I(),!M&&r.executeOnUpdate&&I()},i),zA({},l.value,{set:l.set,merge:l.merge,reset:l.reset,execute:S,currentPromise:h.get(),currentParams:a})};function Q7(t,e,i){return X7(t,e,i)}var ket=function(e,i,n){var r=Fe.useRef(),s=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];try{r.current&&r.current.abort();var h=new AbortController;return r.current=h,Promise.resolve(Eet(function(){return Promise.resolve(e.apply(void 0,[h.signal].concat(l)))},function(A,m){if(r.current===h&&(r.current=void 0),A)throw m;return m}))}catch(A){return Promise.reject(A)}};return Q7(s,i,n)},jet=function(e,i){return X7(e,[],zA({},i,{executeOnMount:!1,executeOnUpdate:!1}))};const zet=Object.freeze(Object.defineProperty({__proto__:null,useAsync:Q7,useAsyncAbortable:ket,useAsyncCallback:jet},Symbol.toStringTag,{value:"Module"})),U6=tT(zet);var Jw={},Lb={},Ne={},Ph={},k6;function Lf(){if(k6)return Ph;k6=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.encodeUtf8=Ph.decodeUtf8=void 0;const t=new TextDecoder("utf-8"),e=r=>t.decode(r);Ph.decodeUtf8=e;const i=new TextEncoder,n=r=>i.encode(r);return Ph.encodeUtf8=n,Ph}var t3={},j6;function Uf(){return j6||(j6=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isFlatbuffersByteBuffer=t.isReadableNodeStream=t.isWritableNodeStream=t.isReadableDOMStream=t.isWritableDOMStream=t.isFetchResponse=t.isFSReadStream=t.isFileHandle=t.isUnderlyingSink=t.isIteratorResult=t.isArrayLike=t.isArrowJSON=t.isAsyncIterable=t.isIterable=t.isObservable=t.isPromise=t.isObject=void 0;const e=N=>typeof N=="number",i=N=>typeof N=="boolean",n=N=>typeof N=="function",r=N=>N!=null&&Object(N)===N;t.isObject=r;const s=N=>(0,t.isObject)(N)&&n(N.then);t.isPromise=s;const a=N=>(0,t.isObject)(N)&&n(N.subscribe);t.isObservable=a;const o=N=>(0,t.isObject)(N)&&n(N[Symbol.iterator]);t.isIterable=o;const l=N=>(0,t.isObject)(N)&&n(N[Symbol.asyncIterator]);t.isAsyncIterable=l;const c=N=>(0,t.isObject)(N)&&(0,t.isObject)(N.schema);t.isArrowJSON=c;const h=N=>(0,t.isObject)(N)&&e(N.length);t.isArrayLike=h;const A=N=>(0,t.isObject)(N)&&"done"in N&&"value"in N;t.isIteratorResult=A;const m=N=>(0,t.isObject)(N)&&n(N.abort)&&n(N.close)&&n(N.start)&&n(N.write);t.isUnderlyingSink=m;const b=N=>(0,t.isObject)(N)&&n(N.stat)&&e(N.fd);t.isFileHandle=b;const S=N=>(0,t.isReadableNodeStream)(N)&&e(N.bytesRead);t.isFSReadStream=S;const M=N=>(0,t.isObject)(N)&&(0,t.isReadableDOMStream)(N.body);t.isFetchResponse=M;const I=N=>"_getDOMStream"in N&&"_getNodeStream"in N,O=N=>(0,t.isObject)(N)&&n(N.abort)&&n(N.getWriter)&&!I(N);t.isWritableDOMStream=O;const D=N=>(0,t.isObject)(N)&&n(N.cancel)&&n(N.getReader)&&!I(N);t.isReadableDOMStream=D;const B=N=>(0,t.isObject)(N)&&n(N.end)&&n(N.write)&&i(N.writable)&&!I(N);t.isWritableNodeStream=B;const P=N=>(0,t.isObject)(N)&&n(N.read)&&n(N.pipe)&&i(N.readable)&&!I(N);t.isReadableNodeStream=P;const j=N=>(0,t.isObject)(N)&&n(N.clear)&&n(N.bytes)&&n(N.position)&&n(N.setPosition)&&n(N.capacity)&&n(N.getBufferIdentifier)&&n(N.createLong);t.isFlatbuffersByteBuffer=j}(t3)),t3}var z6;function Xr(){if(z6)return Ne;z6=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.compareArrayLike=Ne.rebaseValueOffsets=Ne.toUint8ClampedArrayAsyncIterator=Ne.toFloat64ArrayAsyncIterator=Ne.toFloat32ArrayAsyncIterator=Ne.toUint32ArrayAsyncIterator=Ne.toUint16ArrayAsyncIterator=Ne.toUint8ArrayAsyncIterator=Ne.toInt32ArrayAsyncIterator=Ne.toInt16ArrayAsyncIterator=Ne.toInt8ArrayAsyncIterator=Ne.toArrayBufferViewAsyncIterator=Ne.toUint8ClampedArrayIterator=Ne.toFloat64ArrayIterator=Ne.toFloat32ArrayIterator=Ne.toUint32ArrayIterator=Ne.toUint16ArrayIterator=Ne.toUint8ArrayIterator=Ne.toInt32ArrayIterator=Ne.toInt16ArrayIterator=Ne.toInt8ArrayIterator=Ne.toArrayBufferViewIterator=Ne.toUint8ClampedArray=Ne.toFloat64Array=Ne.toFloat32Array=Ne.toBigUint64Array=Ne.toUint32Array=Ne.toUint16Array=Ne.toUint8Array=Ne.toBigInt64Array=Ne.toInt32Array=Ne.toInt16Array=Ne.toInt8Array=Ne.toArrayBufferView=Ne.joinUint8Arrays=Ne.memcpy=void 0;const t=Bn,e=Lf(),i=Uf(),n=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function r(ft){const Ht=ft[0]?[ft[0]]:[];let Nt,he,me,Me;for(let pe,Oe,Ye=0,Ee=0,qe=ft.length;++Ye<qe;){if(pe=Ht[Ee],Oe=ft[Ye],!pe||!Oe||pe.buffer!==Oe.buffer||Oe.byteOffset<pe.byteOffset){Oe&&(Ht[++Ee]=Oe);continue}if({byteOffset:Nt,byteLength:me}=pe,{byteOffset:he,byteLength:Me}=Oe,Nt+me<he||he+Me<Nt){Oe&&(Ht[++Ee]=Oe);continue}Ht[Ee]=new Uint8Array(pe.buffer,Nt,he-Nt+Me)}return Ht}function s(ft,Ht,Nt=0,he=Ht.byteLength){const me=ft.byteLength,Me=new Uint8Array(ft.buffer,ft.byteOffset,me),pe=new Uint8Array(Ht.buffer,Ht.byteOffset,Math.min(he,me));return Me.set(pe,Nt),ft}Ne.memcpy=s;function a(ft,Ht){const Nt=r(ft),he=Nt.reduce((qe,dt)=>qe+dt.byteLength,0);let me,Me,pe,Oe=0,Ye=-1;const Ee=Math.min(Ht||Number.POSITIVE_INFINITY,he);for(const qe=Nt.length;++Ye<qe;){if(me=Nt[Ye],Me=me.subarray(0,Math.min(me.length,Ee-Oe)),Ee<=Oe+Me.length){Me.length<me.length?Nt[Ye]=me.subarray(Me.length):Me.length===me.length&&Ye++,pe?s(pe,Me,Oe):pe=Me;break}s(pe||(pe=new Uint8Array(Ee)),Me,Oe),Oe+=Me.length}return[pe||new Uint8Array(0),Nt.slice(Ye),he-(pe?pe.byteLength:0)]}Ne.joinUint8Arrays=a;function o(ft,Ht){let Nt=(0,i.isIteratorResult)(Ht)?Ht.value:Ht;return Nt instanceof ft?ft===Uint8Array?new ft(Nt.buffer,Nt.byteOffset,Nt.byteLength):Nt:Nt?(typeof Nt=="string"&&(Nt=(0,e.encodeUtf8)(Nt)),Nt instanceof ArrayBuffer?new ft(Nt):Nt instanceof n?new ft(Nt):(0,i.isFlatbuffersByteBuffer)(Nt)?o(ft,Nt.bytes()):ArrayBuffer.isView(Nt)?Nt.byteLength<=0?new ft(0):new ft(Nt.buffer,Nt.byteOffset,Nt.byteLength/ft.BYTES_PER_ELEMENT):ft.from(Nt)):new ft(0)}Ne.toArrayBufferView=o;const l=ft=>o(Int8Array,ft);Ne.toInt8Array=l;const c=ft=>o(Int16Array,ft);Ne.toInt16Array=c;const h=ft=>o(Int32Array,ft);Ne.toInt32Array=h;const A=ft=>o(BigInt64Array,ft);Ne.toBigInt64Array=A;const m=ft=>o(Uint8Array,ft);Ne.toUint8Array=m;const b=ft=>o(Uint16Array,ft);Ne.toUint16Array=b;const S=ft=>o(Uint32Array,ft);Ne.toUint32Array=S;const M=ft=>o(BigUint64Array,ft);Ne.toBigUint64Array=M;const I=ft=>o(Float32Array,ft);Ne.toFloat32Array=I;const O=ft=>o(Float64Array,ft);Ne.toFloat64Array=O;const D=ft=>o(Uint8ClampedArray,ft);Ne.toUint8ClampedArray=D;const B=ft=>(ft.next(),ft);function*P(ft,Ht){const Nt=function*(me){yield me},he=typeof Ht=="string"||ArrayBuffer.isView(Ht)||Ht instanceof ArrayBuffer||Ht instanceof n?Nt(Ht):(0,i.isIterable)(Ht)?Ht:Nt(Ht);return yield*B(function*(me){let Me=null;do Me=me.next(yield o(ft,Me));while(!Me.done)}(he[Symbol.iterator]())),new ft}Ne.toArrayBufferViewIterator=P;const j=ft=>P(Int8Array,ft);Ne.toInt8ArrayIterator=j;const N=ft=>P(Int16Array,ft);Ne.toInt16ArrayIterator=N;const F=ft=>P(Int32Array,ft);Ne.toInt32ArrayIterator=F;const $=ft=>P(Uint8Array,ft);Ne.toUint8ArrayIterator=$;const V=ft=>P(Uint16Array,ft);Ne.toUint16ArrayIterator=V;const Z=ft=>P(Uint32Array,ft);Ne.toUint32ArrayIterator=Z;const nt=ft=>P(Float32Array,ft);Ne.toFloat32ArrayIterator=nt;const X=ft=>P(Float64Array,ft);Ne.toFloat64ArrayIterator=X;const bt=ft=>P(Uint8ClampedArray,ft);Ne.toUint8ClampedArrayIterator=bt;function Tt(ft,Ht){return t.__asyncGenerator(this,arguments,function*(){if((0,i.isPromise)(Ht))return yield t.__await(yield t.__await(yield*t.__asyncDelegator(t.__asyncValues(Tt(ft,yield t.__await(Ht))))));const he=function(pe){return t.__asyncGenerator(this,arguments,function*(){yield yield t.__await(yield t.__await(pe))})},me=function(pe){return t.__asyncGenerator(this,arguments,function*(){yield t.__await(yield*t.__asyncDelegator(t.__asyncValues(B(function*(Oe){let Ye=null;do Ye=Oe.next(yield Ye==null?void 0:Ye.value);while(!Ye.done)}(pe[Symbol.iterator]())))))})},Me=typeof Ht=="string"||ArrayBuffer.isView(Ht)||Ht instanceof ArrayBuffer||Ht instanceof n?he(Ht):(0,i.isIterable)(Ht)?me(Ht):(0,i.isAsyncIterable)(Ht)?Ht:he(Ht);return yield t.__await(yield*t.__asyncDelegator(t.__asyncValues(B(function(pe){return t.__asyncGenerator(this,arguments,function*(){let Oe=null;do Oe=yield t.__await(pe.next(yield yield t.__await(o(ft,Oe))));while(!Oe.done)})}(Me[Symbol.asyncIterator]()))))),yield t.__await(new ft)})}Ne.toArrayBufferViewAsyncIterator=Tt;const Ot=ft=>Tt(Int8Array,ft);Ne.toInt8ArrayAsyncIterator=Ot;const H=ft=>Tt(Int16Array,ft);Ne.toInt16ArrayAsyncIterator=H;const k=ft=>Tt(Int32Array,ft);Ne.toInt32ArrayAsyncIterator=k;const G=ft=>Tt(Uint8Array,ft);Ne.toUint8ArrayAsyncIterator=G;const lt=ft=>Tt(Uint16Array,ft);Ne.toUint16ArrayAsyncIterator=lt;const Q=ft=>Tt(Uint32Array,ft);Ne.toUint32ArrayAsyncIterator=Q;const mt=ft=>Tt(Float32Array,ft);Ne.toFloat32ArrayAsyncIterator=mt;const wt=ft=>Tt(Float64Array,ft);Ne.toFloat64ArrayAsyncIterator=wt;const Dt=ft=>Tt(Uint8ClampedArray,ft);Ne.toUint8ClampedArrayAsyncIterator=Dt;function te(ft,Ht,Nt){if(ft!==0){Nt=Nt.slice(0,Ht);for(let he=-1,me=Nt.length;++he<me;)Nt[he]+=ft}return Nt.subarray(0,Ht)}Ne.rebaseValueOffsets=te;function ie(ft,Ht){let Nt=0;const he=ft.length;if(he!==Ht.length)return!1;if(he>0)do if(ft[Nt]!==Ht[Nt])return!1;while(++Nt<he);return!0}return Ne.compareArrayLike=ie,Ne}var V6;function yT(){if(V6)return Lb;V6=1,Object.defineProperty(Lb,"__esModule",{value:!0});const t=Bn,e=Xr();Lb.default={fromIterable(c){return i(n(c))},fromAsyncIterable(c){return i(r(c))},fromDOMStream(c){return i(s(c))},fromNodeStream(c){return i(l(c))},toDOMStream(c,h){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(c,h){throw new Error('"toNodeStream" not available in this environment')}};const i=c=>(c.next(),c);function*n(c){let h,A=!1,m=[],b,S,M,I=0;function O(){return S==="peek"?(0,e.joinUint8Arrays)(m,M)[0]:([b,m,I]=(0,e.joinUint8Arrays)(m,M),b)}({cmd:S,size:M}=(yield null)||{cmd:"read",size:0});const D=(0,e.toUint8ArrayIterator)(c)[Symbol.iterator]();try{do if({done:h,value:b}=Number.isNaN(M-I)?D.next():D.next(M-I),!h&&b.byteLength>0&&(m.push(b),I+=b.byteLength),h||M<=I)do({cmd:S,size:M}=yield O());while(M<I);while(!h)}catch(B){(A=!0)&&typeof D.throw=="function"&&D.throw(B)}finally{A===!1&&typeof D.return=="function"&&D.return(null)}return null}function r(c){return t.__asyncGenerator(this,arguments,function*(){let A,m=!1,b=[],S,M,I,O=0;function D(){return M==="peek"?(0,e.joinUint8Arrays)(b,I)[0]:([S,b,O]=(0,e.joinUint8Arrays)(b,I),S)}({cmd:M,size:I}=(yield yield t.__await(null))||{cmd:"read",size:0});const B=(0,e.toUint8ArrayAsyncIterator)(c)[Symbol.asyncIterator]();try{do if({done:A,value:S}=Number.isNaN(I-O)?yield t.__await(B.next()):yield t.__await(B.next(I-O)),!A&&S.byteLength>0&&(b.push(S),O+=S.byteLength),A||I<=O)do({cmd:M,size:I}=yield yield t.__await(D()));while(I<O);while(!A)}catch(P){(m=!0)&&typeof B.throw=="function"&&(yield t.__await(B.throw(P)))}finally{m===!1&&typeof B.return=="function"&&(yield t.__await(B.return(new Uint8Array(0))))}return yield t.__await(null)})}function s(c){return t.__asyncGenerator(this,arguments,function*(){let A=!1,m=!1,b=[],S,M,I,O=0;function D(){return M==="peek"?(0,e.joinUint8Arrays)(b,I)[0]:([S,b,O]=(0,e.joinUint8Arrays)(b,I),S)}({cmd:M,size:I}=(yield yield t.__await(null))||{cmd:"read",size:0});const B=new a(c);try{do if({done:A,value:S}=Number.isNaN(I-O)?yield t.__await(B.read()):yield t.__await(B.read(I-O)),!A&&S.byteLength>0&&(b.push((0,e.toUint8Array)(S)),O+=S.byteLength),A||I<=O)do({cmd:M,size:I}=yield yield t.__await(D()));while(I<O);while(!A)}catch(P){(m=!0)&&(yield t.__await(B.cancel(P)))}finally{m===!1?yield t.__await(B.cancel()):c.locked&&B.releaseLock()}return yield t.__await(null)})}class a{constructor(h){this.source=h,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(h){return t.__awaiter(this,void 0,void 0,function*(){const{reader:A,source:m}=this;A&&(yield A.cancel(h).catch(()=>{})),m&&m.locked&&this.releaseLock()})}read(h){return t.__awaiter(this,void 0,void 0,function*(){if(h===0)return{done:this.reader==null,value:new Uint8Array(0)};const A=yield this.reader.read();return!A.done&&(A.value=(0,e.toUint8Array)(A)),A})}}const o=(c,h)=>{const A=b=>m([h,b]);let m;return[h,A,new Promise(b=>(m=b)&&c.once(h,A))]};function l(c){return t.__asyncGenerator(this,arguments,function*(){const A=[];let m="error",b=!1,S=null,M,I,O=0,D=[],B;function P(){return M==="peek"?(0,e.joinUint8Arrays)(D,I)[0]:([B,D,O]=(0,e.joinUint8Arrays)(D,I),B)}if({cmd:M,size:I}=(yield yield t.__await(null))||{cmd:"read",size:0},c.isTTY)return yield yield t.__await(new Uint8Array(0)),yield t.__await(null);try{A[0]=o(c,"end"),A[1]=o(c,"error");do{if(A[2]=o(c,"readable"),[m,S]=yield t.__await(Promise.race(A.map(N=>N[2]))),m==="error")break;if((b=m==="end")||(Number.isFinite(I-O)?(B=(0,e.toUint8Array)(c.read(I-O)),B.byteLength<I-O&&(B=(0,e.toUint8Array)(c.read()))):B=(0,e.toUint8Array)(c.read()),B.byteLength>0&&(D.push(B),O+=B.byteLength)),b||I<=O)do({cmd:M,size:I}=yield yield t.__await(P()));while(I<O)}while(!b)}finally{yield t.__await(j(A,m==="error"?S:null))}return yield t.__await(null);function j(N,F){return B=D=null,new Promise(($,V)=>{for(const[Z,nt]of N)c.off(Z,nt);try{const Z=c.destroy;Z&&Z.call(c,F),F=void 0}catch(Z){F=Z||F}finally{F!=null?V(F):$()}})}})}return Lb}var sc={},xh={},e3={},Jy={},$6;function ZE(){if($6)return Jy;$6=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.MetadataVersion=void 0;var t;return function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"}(t||(Jy.MetadataVersion=t={})),Jy}var tp={},W6;function K7(){if(W6)return tp;W6=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.UnionMode=void 0;var t;return function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"}(t||(tp.UnionMode=t={})),tp}var ep={},H6;function Z7(){if(H6)return ep;H6=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.Precision=void 0;var t;return function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"}(t||(ep.Precision=t={})),ep}var ip={},q6;function J7(){if(q6)return ip;q6=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.DateUnit=void 0;var t;return function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"}(t||(ip.DateUnit=t={})),ip}var np={},Y6;function pT(){if(Y6)return np;Y6=1,Object.defineProperty(np,"__esModule",{value:!0}),np.TimeUnit=void 0;var t;return function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"}(t||(np.TimeUnit=t={})),np}var rp={},G6;function t9(){if(G6)return rp;G6=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.IntervalUnit=void 0;var t;return function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(t||(rp.IntervalUnit=t={})),rp}var ac={},sp={},ap={},op={},lp={},X6;function Vet(){if(X6)return lp;X6=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.BodyCompressionMethod=void 0;var t;return function(e){e[e.BUFFER=0]="BUFFER"}(t||(lp.BodyCompressionMethod=t={})),lp}var cp={},Q6;function $et(){if(Q6)return cp;Q6=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.CompressionType=void 0;var t;return function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"}(t||(cp.CompressionType=t={})),cp}var K6;function Wet(){if(K6)return op;K6=1,Object.defineProperty(op,"__esModule",{value:!0}),op.BodyCompression=void 0;const t=Re,e=Vet(),i=$et();class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsBodyCompression(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsBodyCompression(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}codec(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt8(this.bb_pos+s):i.CompressionType.LZ4_FRAME}method(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt8(this.bb_pos+s):e.BodyCompressionMethod.BUFFER}static startBodyCompression(s){s.startObject(2)}static addCodec(s,a){s.addFieldInt8(0,a,i.CompressionType.LZ4_FRAME)}static addMethod(s,a){s.addFieldInt8(1,a,e.BodyCompressionMethod.BUFFER)}static endBodyCompression(s){return s.endObject()}static createBodyCompression(s,a,o){return n.startBodyCompression(s),n.addCodec(s,a),n.addMethod(s,o),n.endBodyCompression(s)}}return op.BodyCompression=n,op}var up={},Z6;function kf(){if(Z6)return up;Z6=1,Object.defineProperty(up,"__esModule",{value:!0}),up.Buffer=void 0;class t{constructor(){this.bb=null,this.bb_pos=0}__init(i,n){return this.bb_pos=i,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(i,n,r){return i.prep(8,16),i.writeInt64(BigInt(r??0)),i.writeInt64(BigInt(n??0)),i.offset()}}return up.Buffer=t,up}var hp={},J6;function e9(){if(J6)return hp;J6=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.FieldNode=void 0;class t{constructor(){this.bb=null,this.bb_pos=0}__init(i,n){return this.bb_pos=i,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(i,n,r){return i.prep(8,16),i.writeInt64(BigInt(r??0)),i.writeInt64(BigInt(n??0)),i.offset()}}return hp.FieldNode=t,hp}var tx;function JE(){if(tx)return ap;tx=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.RecordBatch=void 0;const t=Re,e=Wet(),i=kf(),n=e9();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsRecordBatch(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsRecordBatch(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}length(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}nodes(a,o){const l=this.bb.__offset(this.bb_pos,6);return l?(o||new n.FieldNode).__init(this.bb.__vector(this.bb_pos+l)+a*16,this.bb):null}nodesLength(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}buffers(a,o){const l=this.bb.__offset(this.bb_pos,8);return l?(o||new i.Buffer).__init(this.bb.__vector(this.bb_pos+l)+a*16,this.bb):null}buffersLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}compression(a){const o=this.bb.__offset(this.bb_pos,10);return o?(a||new e.BodyCompression).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}static startRecordBatch(a){a.startObject(4)}static addLength(a,o){a.addFieldInt64(0,o,BigInt("0"))}static addNodes(a,o){a.addFieldOffset(1,o,0)}static startNodesVector(a,o){a.startVector(16,o,8)}static addBuffers(a,o){a.addFieldOffset(2,o,0)}static startBuffersVector(a,o){a.startVector(16,o,8)}static addCompression(a,o){a.addFieldOffset(3,o,0)}static endRecordBatch(a){return a.endObject()}}return ap.RecordBatch=r,ap}var ex;function i9(){if(ex)return sp;ex=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.DictionaryBatch=void 0;const t=Re,e=JE();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsDictionaryBatch(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsDictionaryBatch(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}id(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt64(this.bb_pos+r):BigInt("0")}data(r){const s=this.bb.__offset(this.bb_pos,6);return s?(r||new e.RecordBatch).__init(this.bb.__indirect(this.bb_pos+s),this.bb):null}isDelta(){const r=this.bb.__offset(this.bb_pos,8);return r?!!this.bb.readInt8(this.bb_pos+r):!1}static startDictionaryBatch(r){r.startObject(3)}static addId(r,s){r.addFieldInt64(0,s,BigInt("0"))}static addData(r,s){r.addFieldOffset(1,s,0)}static addIsDelta(r,s){r.addFieldInt8(2,+s,0)}static endDictionaryBatch(r){return r.endObject()}}return sp.DictionaryBatch=i,sp}var fp={},dp={},ix;function n9(){if(ix)return dp;ix=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.Endianness=void 0;var t;return function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(t||(dp.Endianness=t={})),dp}var Ap={},gp={},yp={},nx;function Het(){if(nx)return yp;nx=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.DictionaryKind=void 0;var t;return function(e){e[e.DenseArray=0]="DenseArray"}(t||(yp.DictionaryKind=t={})),yp}var pp={},rx;function jf(){if(rx)return pp;rx=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.Int=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsInt(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsInt(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}bitWidth(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}isSigned(){const n=this.bb.__offset(this.bb_pos,6);return n?!!this.bb.readInt8(this.bb_pos+n):!1}static startInt(n){n.startObject(2)}static addBitWidth(n,r){n.addFieldInt32(0,r,0)}static addIsSigned(n,r){n.addFieldInt8(1,+r,0)}static endInt(n){return n.endObject()}static createInt(n,r,s){return e.startInt(n),e.addBitWidth(n,r),e.addIsSigned(n,s),e.endInt(n)}}return pp.Int=e,pp}var sx;function r9(){if(sx)return gp;sx=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.DictionaryEncoding=void 0;const t=Re,e=Het(),i=jf();class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsDictionaryEncoding(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDictionaryEncoding(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}id(){const s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):BigInt("0")}indexType(s){const a=this.bb.__offset(this.bb_pos,6);return a?(s||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}isOrdered(){const s=this.bb.__offset(this.bb_pos,8);return s?!!this.bb.readInt8(this.bb_pos+s):!1}dictionaryKind(){const s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt16(this.bb_pos+s):e.DictionaryKind.DenseArray}static startDictionaryEncoding(s){s.startObject(4)}static addId(s,a){s.addFieldInt64(0,a,BigInt("0"))}static addIndexType(s,a){s.addFieldOffset(1,a,0)}static addIsOrdered(s,a){s.addFieldInt8(2,+a,0)}static addDictionaryKind(s,a){s.addFieldInt16(3,a,e.DictionaryKind.DenseArray)}static endDictionaryEncoding(s){return s.endObject()}}return gp.DictionaryEncoding=n,gp}var mp={},ax;function K_(){if(ax)return mp;ax=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.KeyValue=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsKeyValue(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsKeyValue(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}key(n){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.__string(this.bb_pos+r,n):null}value(n){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,n):null}static startKeyValue(n){n.startObject(2)}static addKey(n,r){n.addFieldOffset(0,r,0)}static addValue(n,r){n.addFieldOffset(1,r,0)}static endKeyValue(n){return n.endObject()}static createKeyValue(n,r,s){return e.startKeyValue(n),e.addKey(n,r),e.addValue(n,s),e.endKeyValue(n)}}return mp.KeyValue=e,mp}var oc={},_p={},ox;function s9(){if(ox)return _p;ox=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.Binary=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsBinary(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsBinary(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startBinary(n){n.startObject(0)}static endBinary(n){return n.endObject()}static createBinary(n){return e.startBinary(n),e.endBinary(n)}}return _p.Binary=e,_p}var bp={},lx;function a9(){if(lx)return bp;lx=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.Bool=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsBool(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsBool(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startBool(n){n.startObject(0)}static endBool(n){return n.endObject()}static createBool(n){return e.startBool(n),e.endBool(n)}}return bp.Bool=e,bp}var vp={},cx;function tB(){if(cx)return vp;cx=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.Date=void 0;const t=Re,e=J7();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsDate(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsDate(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.DateUnit.MILLISECOND}static startDate(r){r.startObject(1)}static addUnit(r,s){r.addFieldInt16(0,s,e.DateUnit.MILLISECOND)}static endDate(r){return r.endObject()}static createDate(r,s){return i.startDate(r),i.addUnit(r,s),i.endDate(r)}}return vp.Date=i,vp}var Tp={},ux;function eB(){if(ux)return Tp;ux=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.Decimal=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsDecimal(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsDecimal(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}precision(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}scale(){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb_pos+n):0}bitWidth(){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.readInt32(this.bb_pos+n):128}static startDecimal(n){n.startObject(3)}static addPrecision(n,r){n.addFieldInt32(0,r,0)}static addScale(n,r){n.addFieldInt32(1,r,0)}static addBitWidth(n,r){n.addFieldInt32(2,r,128)}static endDecimal(n){return n.endObject()}static createDecimal(n,r,s,a){return e.startDecimal(n),e.addPrecision(n,r),e.addScale(n,s),e.addBitWidth(n,a),e.endDecimal(n)}}return Tp.Decimal=e,Tp}var Sp={},hx;function iB(){if(hx)return Sp;hx=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.Duration=void 0;const t=Re,e=pT();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsDuration(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsDuration(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.TimeUnit.MILLISECOND}static startDuration(r){r.startObject(1)}static addUnit(r,s){r.addFieldInt16(0,s,e.TimeUnit.MILLISECOND)}static endDuration(r){return r.endObject()}static createDuration(r,s){return i.startDuration(r),i.addUnit(r,s),i.endDuration(r)}}return Sp.Duration=i,Sp}var wp={},fx;function nB(){if(fx)return wp;fx=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.FixedSizeBinary=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsFixedSizeBinary(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsFixedSizeBinary(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}byteWidth(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}static startFixedSizeBinary(n){n.startObject(1)}static addByteWidth(n,r){n.addFieldInt32(0,r,0)}static endFixedSizeBinary(n){return n.endObject()}static createFixedSizeBinary(n,r){return e.startFixedSizeBinary(n),e.addByteWidth(n,r),e.endFixedSizeBinary(n)}}return wp.FixedSizeBinary=e,wp}var Mp={},dx;function rB(){if(dx)return Mp;dx=1,Object.defineProperty(Mp,"__esModule",{value:!0}),Mp.FixedSizeList=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsFixedSizeList(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsFixedSizeList(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}listSize(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt32(this.bb_pos+n):0}static startFixedSizeList(n){n.startObject(1)}static addListSize(n,r){n.addFieldInt32(0,r,0)}static endFixedSizeList(n){return n.endObject()}static createFixedSizeList(n,r){return e.startFixedSizeList(n),e.addListSize(n,r),e.endFixedSizeList(n)}}return Mp.FixedSizeList=e,Mp}var Ip={},Ax;function sB(){if(Ax)return Ip;Ax=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.FloatingPoint=void 0;const t=Re,e=Z7();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsFloatingPoint(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsFloatingPoint(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}precision(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.Precision.HALF}static startFloatingPoint(r){r.startObject(1)}static addPrecision(r,s){r.addFieldInt16(0,s,e.Precision.HALF)}static endFloatingPoint(r){return r.endObject()}static createFloatingPoint(r,s){return i.startFloatingPoint(r),i.addPrecision(r,s),i.endFloatingPoint(r)}}return Ip.FloatingPoint=i,Ip}var Ep={},gx;function aB(){if(gx)return Ep;gx=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.Interval=void 0;const t=Re,e=t9();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsInterval(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsInterval(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.IntervalUnit.YEAR_MONTH}static startInterval(r){r.startObject(1)}static addUnit(r,s){r.addFieldInt16(0,s,e.IntervalUnit.YEAR_MONTH)}static endInterval(r){return r.endObject()}static createInterval(r,s){return i.startInterval(r),i.addUnit(r,s),i.endInterval(r)}}return Ep.Interval=i,Ep}var Bp={},yx;function o9(){if(yx)return Bp;yx=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.LargeBinary=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsLargeBinary(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsLargeBinary(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startLargeBinary(n){n.startObject(0)}static endLargeBinary(n){return n.endObject()}static createLargeBinary(n){return e.startLargeBinary(n),e.endLargeBinary(n)}}return Bp.LargeBinary=e,Bp}var Op={},px;function qet(){if(px)return Op;px=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.LargeList=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsLargeList(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsLargeList(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startLargeList(n){n.startObject(0)}static endLargeList(n){return n.endObject()}static createLargeList(n){return e.startLargeList(n),e.endLargeList(n)}}return Op.LargeList=e,Op}var Rp={},mx;function l9(){if(mx)return Rp;mx=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.LargeUtf8=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsLargeUtf8(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsLargeUtf8(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startLargeUtf8(n){n.startObject(0)}static endLargeUtf8(n){return n.endObject()}static createLargeUtf8(n){return e.startLargeUtf8(n),e.endLargeUtf8(n)}}return Rp.LargeUtf8=e,Rp}var Dp={},_x;function c9(){if(_x)return Dp;_x=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.List=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsList(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsList(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startList(n){n.startObject(0)}static endList(n){return n.endObject()}static createList(n){return e.startList(n),e.endList(n)}}return Dp.List=e,Dp}var Cp={},bx;function oB(){if(bx)return Cp;bx=1,Object.defineProperty(Cp,"__esModule",{value:!0}),Cp.Map=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsMap(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsMap(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}keysSorted(){const n=this.bb.__offset(this.bb_pos,4);return n?!!this.bb.readInt8(this.bb_pos+n):!1}static startMap(n){n.startObject(1)}static addKeysSorted(n,r){n.addFieldInt8(0,+r,0)}static endMap(n){return n.endObject()}static createMap(n,r){return e.startMap(n),e.addKeysSorted(n,r),e.endMap(n)}}return Cp.Map=e,Cp}var Pp={},vx;function u9(){if(vx)return Pp;vx=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.Null=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsNull(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsNull(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startNull(n){n.startObject(0)}static endNull(n){return n.endObject()}static createNull(n){return e.startNull(n),e.endNull(n)}}return Pp.Null=e,Pp}var xp={},Tx;function Yet(){if(Tx)return xp;Tx=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.RunEndEncoded=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsRunEndEncoded(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsRunEndEncoded(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startRunEndEncoded(n){n.startObject(0)}static endRunEndEncoded(n){return n.endObject()}static createRunEndEncoded(n){return e.startRunEndEncoded(n),e.endRunEndEncoded(n)}}return xp.RunEndEncoded=e,xp}var Np={},Sx;function h9(){if(Sx)return Np;Sx=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.Struct_=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsStruct_(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsStruct_(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startStruct_(n){n.startObject(0)}static endStruct_(n){return n.endObject()}static createStruct_(n){return e.startStruct_(n),e.endStruct_(n)}}return Np.Struct_=e,Np}var Fp={},wx;function lB(){if(wx)return Fp;wx=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.Time=void 0;const t=Re,e=pT();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsTime(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsTime(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.TimeUnit.MILLISECOND}bitWidth(){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.readInt32(this.bb_pos+r):32}static startTime(r){r.startObject(2)}static addUnit(r,s){r.addFieldInt16(0,s,e.TimeUnit.MILLISECOND)}static addBitWidth(r,s){r.addFieldInt32(1,s,32)}static endTime(r){return r.endObject()}static createTime(r,s,a){return i.startTime(r),i.addUnit(r,s),i.addBitWidth(r,a),i.endTime(r)}}return Fp.Time=i,Fp}var Lp={},Mx;function cB(){if(Mx)return Lp;Mx=1,Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.Timestamp=void 0;const t=Re,e=pT();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsTimestamp(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsTimestamp(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}unit(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.TimeUnit.SECOND}timezone(r){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__string(this.bb_pos+s,r):null}static startTimestamp(r){r.startObject(2)}static addUnit(r,s){r.addFieldInt16(0,s,e.TimeUnit.SECOND)}static addTimezone(r,s){r.addFieldOffset(1,s,0)}static endTimestamp(r){return r.endObject()}static createTimestamp(r,s,a){return i.startTimestamp(r),i.addUnit(r,s),i.addTimezone(r,a),i.endTimestamp(r)}}return Lp.Timestamp=i,Lp}var Up={},Ix;function uB(){if(Ix)return Up;Ix=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.Union=void 0;const t=Re,e=K7();class i{constructor(){this.bb=null,this.bb_pos=0}__init(r,s){return this.bb_pos=r,this.bb=s,this}static getRootAsUnion(r,s){return(s||new i).__init(r.readInt32(r.position())+r.position(),r)}static getSizePrefixedRootAsUnion(r,s){return r.setPosition(r.position()+t.SIZE_PREFIX_LENGTH),(s||new i).__init(r.readInt32(r.position())+r.position(),r)}mode(){const r=this.bb.__offset(this.bb_pos,4);return r?this.bb.readInt16(this.bb_pos+r):e.UnionMode.Sparse}typeIds(r){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt32(this.bb.__vector(this.bb_pos+s)+r*4):0}typeIdsLength(){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__vector_len(this.bb_pos+r):0}typeIdsArray(){const r=this.bb.__offset(this.bb_pos,6);return r?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+r),this.bb.__vector_len(this.bb_pos+r)):null}static startUnion(r){r.startObject(2)}static addMode(r,s){r.addFieldInt16(0,s,e.UnionMode.Sparse)}static addTypeIds(r,s){r.addFieldOffset(1,s,0)}static createTypeIdsVector(r,s){r.startVector(4,s.length,4);for(let a=s.length-1;a>=0;a--)r.addInt32(s[a]);return r.endVector()}static startTypeIdsVector(r,s){r.startVector(4,s,4)}static endUnion(r){return r.endObject()}static createUnion(r,s,a){return i.startUnion(r),i.addMode(r,s),i.addTypeIds(r,a),i.endUnion(r)}}return Up.Union=i,Up}var kp={},Ex;function f9(){if(Ex)return kp;Ex=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.Utf8=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsUtf8(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsUtf8(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static startUtf8(n){n.startObject(0)}static endUtf8(n){return n.endObject()}static createUtf8(n){return e.startUtf8(n),e.endUtf8(n)}}return kp.Utf8=e,kp}var Bx;function Z_(){if(Bx)return oc;Bx=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.unionListToType=oc.unionToType=oc.Type=void 0;const t=s9(),e=a9(),i=tB(),n=eB(),r=iB(),s=nB(),a=rB(),o=sB(),l=jf(),c=aB(),h=o9(),A=qet(),m=l9(),b=c9(),S=oB(),M=u9(),I=Yet(),O=h9(),D=lB(),B=cB(),P=uB(),j=f9();var N;(function(V){V[V.NONE=0]="NONE",V[V.Null=1]="Null",V[V.Int=2]="Int",V[V.FloatingPoint=3]="FloatingPoint",V[V.Binary=4]="Binary",V[V.Utf8=5]="Utf8",V[V.Bool=6]="Bool",V[V.Decimal=7]="Decimal",V[V.Date=8]="Date",V[V.Time=9]="Time",V[V.Timestamp=10]="Timestamp",V[V.Interval=11]="Interval",V[V.List=12]="List",V[V.Struct_=13]="Struct_",V[V.Union=14]="Union",V[V.FixedSizeBinary=15]="FixedSizeBinary",V[V.FixedSizeList=16]="FixedSizeList",V[V.Map=17]="Map",V[V.Duration=18]="Duration",V[V.LargeBinary=19]="LargeBinary",V[V.LargeUtf8=20]="LargeUtf8",V[V.LargeList=21]="LargeList",V[V.RunEndEncoded=22]="RunEndEncoded"})(N||(oc.Type=N={}));function F(V,Z){switch(N[V]){case"NONE":return null;case"Null":return Z(new M.Null);case"Int":return Z(new l.Int);case"FloatingPoint":return Z(new o.FloatingPoint);case"Binary":return Z(new t.Binary);case"Utf8":return Z(new j.Utf8);case"Bool":return Z(new e.Bool);case"Decimal":return Z(new n.Decimal);case"Date":return Z(new i.Date);case"Time":return Z(new D.Time);case"Timestamp":return Z(new B.Timestamp);case"Interval":return Z(new c.Interval);case"List":return Z(new b.List);case"Struct_":return Z(new O.Struct_);case"Union":return Z(new P.Union);case"FixedSizeBinary":return Z(new s.FixedSizeBinary);case"FixedSizeList":return Z(new a.FixedSizeList);case"Map":return Z(new S.Map);case"Duration":return Z(new r.Duration);case"LargeBinary":return Z(new h.LargeBinary);case"LargeUtf8":return Z(new m.LargeUtf8);case"LargeList":return Z(new A.LargeList);case"RunEndEncoded":return Z(new I.RunEndEncoded);default:return null}}oc.unionToType=F;function $(V,Z,nt){switch(N[V]){case"NONE":return null;case"Null":return Z(nt,new M.Null);case"Int":return Z(nt,new l.Int);case"FloatingPoint":return Z(nt,new o.FloatingPoint);case"Binary":return Z(nt,new t.Binary);case"Utf8":return Z(nt,new j.Utf8);case"Bool":return Z(nt,new e.Bool);case"Decimal":return Z(nt,new n.Decimal);case"Date":return Z(nt,new i.Date);case"Time":return Z(nt,new D.Time);case"Timestamp":return Z(nt,new B.Timestamp);case"Interval":return Z(nt,new c.Interval);case"List":return Z(nt,new b.List);case"Struct_":return Z(nt,new O.Struct_);case"Union":return Z(nt,new P.Union);case"FixedSizeBinary":return Z(nt,new s.FixedSizeBinary);case"FixedSizeList":return Z(nt,new a.FixedSizeList);case"Map":return Z(nt,new S.Map);case"Duration":return Z(nt,new r.Duration);case"LargeBinary":return Z(nt,new h.LargeBinary);case"LargeUtf8":return Z(nt,new m.LargeUtf8);case"LargeList":return Z(nt,new A.LargeList);case"RunEndEncoded":return Z(nt,new I.RunEndEncoded);default:return null}}return oc.unionListToType=$,oc}var Ox;function d9(){if(Ox)return Ap;Ox=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.Field=void 0;const t=Re,e=r9(),i=K_(),n=Z_();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsField(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsField(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}name(a){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.__string(this.bb_pos+o,a):null}nullable(){const a=this.bb.__offset(this.bb_pos,6);return a?!!this.bb.readInt8(this.bb_pos+a):!1}typeType(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.readUint8(this.bb_pos+a):n.Type.NONE}type(a){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__union(a,this.bb_pos+o):null}dictionary(a){const o=this.bb.__offset(this.bb_pos,12);return o?(a||new e.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}children(a,o){const l=this.bb.__offset(this.bb_pos,14);return l?(o||new r).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}childrenLength(){const a=this.bb.__offset(this.bb_pos,14);return a?this.bb.__vector_len(this.bb_pos+a):0}customMetadata(a,o){const l=this.bb.__offset(this.bb_pos,16);return l?(o||new i.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,16);return a?this.bb.__vector_len(this.bb_pos+a):0}static startField(a){a.startObject(7)}static addName(a,o){a.addFieldOffset(0,o,0)}static addNullable(a,o){a.addFieldInt8(1,+o,0)}static addTypeType(a,o){a.addFieldInt8(2,o,n.Type.NONE)}static addType(a,o){a.addFieldOffset(3,o,0)}static addDictionary(a,o){a.addFieldOffset(4,o,0)}static addChildren(a,o){a.addFieldOffset(5,o,0)}static createChildrenVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startChildrenVector(a,o){a.startVector(4,o,4)}static addCustomMetadata(a,o){a.addFieldOffset(6,o,0)}static createCustomMetadataVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startCustomMetadataVector(a,o){a.startVector(4,o,4)}static endField(a){return a.endObject()}}return Ap.Field=r,Ap}var Rx;function hB(){if(Rx)return fp;Rx=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.Schema=void 0;const t=Re,e=n9(),i=d9(),n=K_();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsSchema(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSchema(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}endianness(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):e.Endianness.Little}fields(a,o){const l=this.bb.__offset(this.bb_pos,6);return l?(o||new i.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}fieldsLength(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.__vector_len(this.bb_pos+a):0}customMetadata(a,o){const l=this.bb.__offset(this.bb_pos,8);return l?(o||new n.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}features(a){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+a*8):BigInt(0)}featuresLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0}static startSchema(a){a.startObject(4)}static addEndianness(a,o){a.addFieldInt16(0,o,e.Endianness.Little)}static addFields(a,o){a.addFieldOffset(1,o,0)}static createFieldsVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startFieldsVector(a,o){a.startVector(4,o,4)}static addCustomMetadata(a,o){a.addFieldOffset(2,o,0)}static createCustomMetadataVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startCustomMetadataVector(a,o){a.startVector(4,o,4)}static addFeatures(a,o){a.addFieldOffset(3,o,0)}static createFeaturesVector(a,o){a.startVector(8,o.length,8);for(let l=o.length-1;l>=0;l--)a.addInt64(o[l]);return a.endVector()}static startFeaturesVector(a,o){a.startVector(8,o,8)}static endSchema(a){return a.endObject()}static finishSchemaBuffer(a,o){a.finish(o)}static finishSizePrefixedSchemaBuffer(a,o){a.finish(o,void 0,!0)}static createSchema(a,o,l,c,h){return r.startSchema(a),r.addEndianness(a,o),r.addFields(a,l),r.addCustomMetadata(a,c),r.addFeatures(a,h),r.endSchema(a)}}return fp.Schema=r,fp}var jp={},lc={},zp={},Vp={},Dx;function Get(){if(Dx)return Vp;Dx=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.SparseMatrixCompressedAxis=void 0;var t;return function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(t||(Vp.SparseMatrixCompressedAxis=t={})),Vp}var Cx;function Xet(){if(Cx)return zp;Cx=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.SparseMatrixIndexCSX=void 0;const t=Re,e=kf(),i=jf(),n=Get();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsSparseMatrixIndexCSX(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsSparseMatrixIndexCSX(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}compressedAxis(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.SparseMatrixCompressedAxis.Row}indptrType(a){const o=this.bb.__offset(this.bb_pos,6);return o?(a||new i.Int).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}indptrBuffer(a){const o=this.bb.__offset(this.bb_pos,8);return o?(a||new e.Buffer).__init(this.bb_pos+o,this.bb):null}indicesType(a){const o=this.bb.__offset(this.bb_pos,10);return o?(a||new i.Int).__init(this.bb.__indirect(this.bb_pos+o),this.bb):null}indicesBuffer(a){const o=this.bb.__offset(this.bb_pos,12);return o?(a||new e.Buffer).__init(this.bb_pos+o,this.bb):null}static startSparseMatrixIndexCSX(a){a.startObject(5)}static addCompressedAxis(a,o){a.addFieldInt16(0,o,n.SparseMatrixCompressedAxis.Row)}static addIndptrType(a,o){a.addFieldOffset(1,o,0)}static addIndptrBuffer(a,o){a.addFieldStruct(2,o,0)}static addIndicesType(a,o){a.addFieldOffset(3,o,0)}static addIndicesBuffer(a,o){a.addFieldStruct(4,o,0)}static endSparseMatrixIndexCSX(a){const o=a.endObject();return a.requiredField(o,6),a.requiredField(o,8),a.requiredField(o,10),a.requiredField(o,12),o}}return zp.SparseMatrixIndexCSX=r,zp}var $p={},Px;function Qet(){if(Px)return $p;Px=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.SparseTensorIndexCOO=void 0;const t=Re,e=kf(),i=jf();class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsSparseTensorIndexCOO(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensorIndexCOO(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}indicesType(s){const a=this.bb.__offset(this.bb_pos,4);return a?(s||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indicesStrides(s){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readInt64(this.bb.__vector(this.bb_pos+a)+s*8):BigInt(0)}indicesStridesLength(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}indicesBuffer(s){const a=this.bb.__offset(this.bb_pos,8);return a?(s||new e.Buffer).__init(this.bb_pos+a,this.bb):null}isCanonical(){const s=this.bb.__offset(this.bb_pos,10);return s?!!this.bb.readInt8(this.bb_pos+s):!1}static startSparseTensorIndexCOO(s){s.startObject(4)}static addIndicesType(s,a){s.addFieldOffset(0,a,0)}static addIndicesStrides(s,a){s.addFieldOffset(1,a,0)}static createIndicesStridesVector(s,a){s.startVector(8,a.length,8);for(let o=a.length-1;o>=0;o--)s.addInt64(a[o]);return s.endVector()}static startIndicesStridesVector(s,a){s.startVector(8,a,8)}static addIndicesBuffer(s,a){s.addFieldStruct(2,a,0)}static addIsCanonical(s,a){s.addFieldInt8(3,+a,0)}static endSparseTensorIndexCOO(s){const a=s.endObject();return s.requiredField(a,4),s.requiredField(a,8),a}}return $p.SparseTensorIndexCOO=n,$p}var Wp={},xx;function Ket(){if(xx)return Wp;xx=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.SparseTensorIndexCSF=void 0;const t=Re,e=kf(),i=jf();class n{constructor(){this.bb=null,this.bb_pos=0}__init(s,a){return this.bb_pos=s,this.bb=a,this}static getRootAsSparseTensorIndexCSF(s,a){return(a||new n).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensorIndexCSF(s,a){return s.setPosition(s.position()+t.SIZE_PREFIX_LENGTH),(a||new n).__init(s.readInt32(s.position())+s.position(),s)}indptrType(s){const a=this.bb.__offset(this.bb_pos,4);return a?(s||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indptrBuffers(s,a){const o=this.bb.__offset(this.bb_pos,6);return o?(a||new e.Buffer).__init(this.bb.__vector(this.bb_pos+o)+s*16,this.bb):null}indptrBuffersLength(){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}indicesType(s){const a=this.bb.__offset(this.bb_pos,8);return a?(s||new i.Int).__init(this.bb.__indirect(this.bb_pos+a),this.bb):null}indicesBuffers(s,a){const o=this.bb.__offset(this.bb_pos,10);return o?(a||new e.Buffer).__init(this.bb.__vector(this.bb_pos+o)+s*16,this.bb):null}indicesBuffersLength(){const s=this.bb.__offset(this.bb_pos,10);return s?this.bb.__vector_len(this.bb_pos+s):0}axisOrder(s){const a=this.bb.__offset(this.bb_pos,12);return a?this.bb.readInt32(this.bb.__vector(this.bb_pos+a)+s*4):0}axisOrderLength(){const s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}axisOrderArray(){const s=this.bb.__offset(this.bb_pos,12);return s?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}static startSparseTensorIndexCSF(s){s.startObject(5)}static addIndptrType(s,a){s.addFieldOffset(0,a,0)}static addIndptrBuffers(s,a){s.addFieldOffset(1,a,0)}static startIndptrBuffersVector(s,a){s.startVector(16,a,8)}static addIndicesType(s,a){s.addFieldOffset(2,a,0)}static addIndicesBuffers(s,a){s.addFieldOffset(3,a,0)}static startIndicesBuffersVector(s,a){s.startVector(16,a,8)}static addAxisOrder(s,a){s.addFieldOffset(4,a,0)}static createAxisOrderVector(s,a){s.startVector(4,a.length,4);for(let o=a.length-1;o>=0;o--)s.addInt32(a[o]);return s.endVector()}static startAxisOrderVector(s,a){s.startVector(4,a,4)}static endSparseTensorIndexCSF(s){const a=s.endObject();return s.requiredField(a,4),s.requiredField(a,6),s.requiredField(a,8),s.requiredField(a,10),s.requiredField(a,12),a}}return Wp.SparseTensorIndexCSF=n,Wp}var Nx;function Zet(){if(Nx)return lc;Nx=1,Object.defineProperty(lc,"__esModule",{value:!0}),lc.unionListToSparseTensorIndex=lc.unionToSparseTensorIndex=lc.SparseTensorIndex=void 0;const t=Xet(),e=Qet(),i=Ket();var n;(function(a){a[a.NONE=0]="NONE",a[a.SparseTensorIndexCOO=1]="SparseTensorIndexCOO",a[a.SparseMatrixIndexCSX=2]="SparseMatrixIndexCSX",a[a.SparseTensorIndexCSF=3]="SparseTensorIndexCSF"})(n||(lc.SparseTensorIndex=n={}));function r(a,o){switch(n[a]){case"NONE":return null;case"SparseTensorIndexCOO":return o(new e.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return o(new t.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return o(new i.SparseTensorIndexCSF);default:return null}}lc.unionToSparseTensorIndex=r;function s(a,o,l){switch(n[a]){case"NONE":return null;case"SparseTensorIndexCOO":return o(l,new e.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return o(l,new t.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return o(l,new i.SparseTensorIndexCSF);default:return null}}return lc.unionListToSparseTensorIndex=s,lc}var Hp={},Fx;function A9(){if(Fx)return Hp;Fx=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.TensorDim=void 0;const t=Re;class e{constructor(){this.bb=null,this.bb_pos=0}__init(n,r){return this.bb_pos=n,this.bb=r,this}static getRootAsTensorDim(n,r){return(r||new e).__init(n.readInt32(n.position())+n.position(),n)}static getSizePrefixedRootAsTensorDim(n,r){return n.setPosition(n.position()+t.SIZE_PREFIX_LENGTH),(r||new e).__init(n.readInt32(n.position())+n.position(),n)}size(){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.readInt64(this.bb_pos+n):BigInt("0")}name(n){const r=this.bb.__offset(this.bb_pos,6);return r?this.bb.__string(this.bb_pos+r,n):null}static startTensorDim(n){n.startObject(2)}static addSize(n,r){n.addFieldInt64(0,r,BigInt("0"))}static addName(n,r){n.addFieldOffset(1,r,0)}static endTensorDim(n){return n.endObject()}static createTensorDim(n,r,s){return e.startTensorDim(n),e.addSize(n,r),e.addName(n,s),e.endTensorDim(n)}}return Hp.TensorDim=e,Hp}var Lx;function Jet(){if(Lx)return jp;Lx=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.SparseTensor=void 0;const t=Re,e=kf(),i=Zet(),n=A9(),r=Z_();class s{constructor(){this.bb=null,this.bb_pos=0}__init(o,l){return this.bb_pos=o,this.bb=l,this}static getRootAsSparseTensor(o,l){return(l||new s).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsSparseTensor(o,l){return o.setPosition(o.position()+t.SIZE_PREFIX_LENGTH),(l||new s).__init(o.readInt32(o.position())+o.position(),o)}typeType(){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readUint8(this.bb_pos+o):r.Type.NONE}type(o){const l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__union(o,this.bb_pos+l):null}shape(o,l){const c=this.bb.__offset(this.bb_pos,8);return c?(l||new n.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+o*4),this.bb):null}shapeLength(){const o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__vector_len(this.bb_pos+o):0}nonZeroLength(){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt64(this.bb_pos+o):BigInt("0")}sparseIndexType(){const o=this.bb.__offset(this.bb_pos,12);return o?this.bb.readUint8(this.bb_pos+o):i.SparseTensorIndex.NONE}sparseIndex(o){const l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__union(o,this.bb_pos+l):null}data(o){const l=this.bb.__offset(this.bb_pos,16);return l?(o||new e.Buffer).__init(this.bb_pos+l,this.bb):null}static startSparseTensor(o){o.startObject(7)}static addTypeType(o,l){o.addFieldInt8(0,l,r.Type.NONE)}static addType(o,l){o.addFieldOffset(1,l,0)}static addShape(o,l){o.addFieldOffset(2,l,0)}static createShapeVector(o,l){o.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)o.addOffset(l[c]);return o.endVector()}static startShapeVector(o,l){o.startVector(4,l,4)}static addNonZeroLength(o,l){o.addFieldInt64(3,l,BigInt("0"))}static addSparseIndexType(o,l){o.addFieldInt8(4,l,i.SparseTensorIndex.NONE)}static addSparseIndex(o,l){o.addFieldOffset(5,l,0)}static addData(o,l){o.addFieldStruct(6,l,0)}static endSparseTensor(o){const l=o.endObject();return o.requiredField(l,6),o.requiredField(l,8),o.requiredField(l,14),o.requiredField(l,16),l}static finishSparseTensorBuffer(o,l){o.finish(l)}static finishSizePrefixedSparseTensorBuffer(o,l){o.finish(l,void 0,!0)}}return jp.SparseTensor=s,jp}var qp={},Ux;function tit(){if(Ux)return qp;Ux=1,Object.defineProperty(qp,"__esModule",{value:!0}),qp.Tensor=void 0;const t=Re,e=kf(),i=A9(),n=Z_();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsTensor(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsTensor(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}typeType(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readUint8(this.bb_pos+a):n.Type.NONE}type(a){const o=this.bb.__offset(this.bb_pos,6);return o?this.bb.__union(a,this.bb_pos+o):null}shape(a,o){const l=this.bb.__offset(this.bb_pos,8);return l?(o||new i.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}shapeLength(){const a=this.bb.__offset(this.bb_pos,8);return a?this.bb.__vector_len(this.bb_pos+a):0}strides(a){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.readInt64(this.bb.__vector(this.bb_pos+o)+a*8):BigInt(0)}stridesLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.__vector_len(this.bb_pos+a):0}data(a){const o=this.bb.__offset(this.bb_pos,12);return o?(a||new e.Buffer).__init(this.bb_pos+o,this.bb):null}static startTensor(a){a.startObject(5)}static addTypeType(a,o){a.addFieldInt8(0,o,n.Type.NONE)}static addType(a,o){a.addFieldOffset(1,o,0)}static addShape(a,o){a.addFieldOffset(2,o,0)}static createShapeVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startShapeVector(a,o){a.startVector(4,o,4)}static addStrides(a,o){a.addFieldOffset(3,o,0)}static createStridesVector(a,o){a.startVector(8,o.length,8);for(let l=o.length-1;l>=0;l--)a.addInt64(o[l]);return a.endVector()}static startStridesVector(a,o){a.startVector(8,o,8)}static addData(a,o){a.addFieldStruct(4,o,0)}static endTensor(a){const o=a.endObject();return a.requiredField(o,6),a.requiredField(o,8),a.requiredField(o,12),o}static finishTensorBuffer(a,o){a.finish(o)}static finishSizePrefixedTensorBuffer(a,o){a.finish(o,void 0,!0)}}return qp.Tensor=r,qp}var kx;function fB(){if(kx)return ac;kx=1,Object.defineProperty(ac,"__esModule",{value:!0}),ac.unionListToMessageHeader=ac.unionToMessageHeader=ac.MessageHeader=void 0;const t=i9(),e=JE(),i=hB(),n=Jet(),r=tit();var s;(function(l){l[l.NONE=0]="NONE",l[l.Schema=1]="Schema",l[l.DictionaryBatch=2]="DictionaryBatch",l[l.RecordBatch=3]="RecordBatch",l[l.Tensor=4]="Tensor",l[l.SparseTensor=5]="SparseTensor"})(s||(ac.MessageHeader=s={}));function a(l,c){switch(s[l]){case"NONE":return null;case"Schema":return c(new i.Schema);case"DictionaryBatch":return c(new t.DictionaryBatch);case"RecordBatch":return c(new e.RecordBatch);case"Tensor":return c(new r.Tensor);case"SparseTensor":return c(new n.SparseTensor);default:return null}}ac.unionToMessageHeader=a;function o(l,c,h){switch(s[l]){case"NONE":return null;case"Schema":return c(h,new i.Schema);case"DictionaryBatch":return c(h,new t.DictionaryBatch);case"RecordBatch":return c(h,new e.RecordBatch);case"Tensor":return c(h,new r.Tensor);case"SparseTensor":return c(h,new n.SparseTensor);default:return null}}return ac.unionListToMessageHeader=o,ac}var jx;function nr(){return jx||(jx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferType=t.Type=t.MessageHeader=t.IntervalUnit=t.TimeUnit=t.DateUnit=t.Precision=t.UnionMode=t.MetadataVersion=void 0;var e=ZE();Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return e.MetadataVersion}});var i=K7();Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return i.UnionMode}});var n=Z7();Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return n.Precision}});var r=J7();Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return r.DateUnit}});var s=pT();Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return s.TimeUnit}});var a=t9();Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return a.IntervalUnit}});var o=fB();Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return o.MessageHeader}});var l;(function(h){h[h.NONE=0]="NONE",h[h.Null=1]="Null",h[h.Int=2]="Int",h[h.Float=3]="Float",h[h.Binary=4]="Binary",h[h.Utf8=5]="Utf8",h[h.Bool=6]="Bool",h[h.Decimal=7]="Decimal",h[h.Date=8]="Date",h[h.Time=9]="Time",h[h.Timestamp=10]="Timestamp",h[h.Interval=11]="Interval",h[h.List=12]="List",h[h.Struct=13]="Struct",h[h.Union=14]="Union",h[h.FixedSizeBinary=15]="FixedSizeBinary",h[h.FixedSizeList=16]="FixedSizeList",h[h.Map=17]="Map",h[h.Duration=18]="Duration",h[h.LargeBinary=19]="LargeBinary",h[h.LargeUtf8=20]="LargeUtf8",h[h.Dictionary=-1]="Dictionary",h[h.Int8=-2]="Int8",h[h.Int16=-3]="Int16",h[h.Int32=-4]="Int32",h[h.Int64=-5]="Int64",h[h.Uint8=-6]="Uint8",h[h.Uint16=-7]="Uint16",h[h.Uint32=-8]="Uint32",h[h.Uint64=-9]="Uint64",h[h.Float16=-10]="Float16",h[h.Float32=-11]="Float32",h[h.Float64=-12]="Float64",h[h.DateDay=-13]="DateDay",h[h.DateMillisecond=-14]="DateMillisecond",h[h.TimestampSecond=-15]="TimestampSecond",h[h.TimestampMillisecond=-16]="TimestampMillisecond",h[h.TimestampMicrosecond=-17]="TimestampMicrosecond",h[h.TimestampNanosecond=-18]="TimestampNanosecond",h[h.TimeSecond=-19]="TimeSecond",h[h.TimeMillisecond=-20]="TimeMillisecond",h[h.TimeMicrosecond=-21]="TimeMicrosecond",h[h.TimeNanosecond=-22]="TimeNanosecond",h[h.DenseUnion=-23]="DenseUnion",h[h.SparseUnion=-24]="SparseUnion",h[h.IntervalDayTime=-25]="IntervalDayTime",h[h.IntervalYearMonth=-26]="IntervalYearMonth",h[h.DurationSecond=-27]="DurationSecond",h[h.DurationMillisecond=-28]="DurationMillisecond",h[h.DurationMicrosecond=-29]="DurationMicrosecond",h[h.DurationNanosecond=-30]="DurationNanosecond"})(l||(t.Type=l={}));var c;(function(h){h[h.OFFSET=0]="OFFSET",h[h.DATA=1]="DATA",h[h.VALIDITY=2]="VALIDITY",h[h.TYPE=3]="TYPE"})(c||(t.BufferType=c={}))}(e3)),e3}var cc={},i3={},Yp={},zx;function mT(){if(zx)return Yp;zx=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.valueToString=void 0;const t=void 0;function e(i){if(i===null)return"null";if(i===t)return"undefined";switch(typeof i){case"number":return`${i}`;case"bigint":return`${i}`;case"string":return`"${i}"`}return typeof i[Symbol.toPrimitive]=="function"?i[Symbol.toPrimitive]("string"):ArrayBuffer.isView(i)?i instanceof BigInt64Array||i instanceof BigUint64Array?`[${[...i].map(n=>e(n))}]`:`[${i}]`:ArrayBuffer.isView(i)?`[${i}]`:JSON.stringify(i,(n,r)=>typeof r=="bigint"?`${r}`:r)}return Yp.valueToString=e,Yp}var n3={},r3={},Nh={},Vx;function zf(){if(Vx)return Nh;Vx=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.divideBigInts=Nh.bigIntToNumber=void 0;function t(i){if(typeof i=="bigint"&&(i<Number.MIN_SAFE_INTEGER||i>Number.MAX_SAFE_INTEGER))throw new TypeError(`${i} is not safe to convert to a number.`);return Number(i)}Nh.bigIntToNumber=t;function e(i,n){return t(i/n)+t(i%n)/t(n)}return Nh.divideBigInts=e,Nh}var $x;function dB(){return $x||($x=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.BN=t.bigNumToBigInt=t.bigNumToString=t.bigNumToNumber=t.isArrowBigNumSymbol=void 0;const e=Xr(),i=zf();t.isArrowBigNumSymbol=Symbol.for("isArrowBigNum");function n(S,...M){return M.length===0?Object.setPrototypeOf((0,e.toArrayBufferView)(this.TypedArray,S),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(S,...M),this.constructor.prototype)}n.prototype[t.isArrowBigNumSymbol]=!0,n.prototype.toJSON=function(){return`"${h(this)}"`},n.prototype.valueOf=function(S){return c(this,S)},n.prototype.toString=function(){return h(this)},n.prototype[Symbol.toPrimitive]=function(S="default"){switch(S){case"number":return c(this);case"string":return h(this);case"default":return A(this)}return h(this)};function r(...S){return n.apply(this,S)}function s(...S){return n.apply(this,S)}function a(...S){return n.apply(this,S)}Object.setPrototypeOf(r.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(s.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(a.prototype,Object.create(Uint32Array.prototype)),Object.assign(r.prototype,n.prototype,{constructor:r,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(s.prototype,n.prototype,{constructor:s,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(a.prototype,n.prototype,{constructor:a,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const l=BigInt(4294967296)*BigInt(4294967296)-BigInt(1);function c(S,M){const{buffer:I,byteOffset:O,byteLength:D,signed:B}=S,P=new BigUint64Array(I,O,D/8),j=B&&P.at(-1)&BigInt(1)<<BigInt(63);let N=BigInt(0),F=0;if(j){for(const $ of P)N|=($^l)*(BigInt(1)<<BigInt(64*F++));N*=BigInt(-1),N-=BigInt(1)}else for(const $ of P)N|=$*(BigInt(1)<<BigInt(64*F++));if(typeof M=="number"){const $=BigInt(Math.pow(10,M)),V=N/$,Z=N%$;return(0,i.bigIntToNumber)(V)+(0,i.bigIntToNumber)(Z)/(0,i.bigIntToNumber)($)}return(0,i.bigIntToNumber)(N)}t.bigNumToNumber=c;function h(S){if(S.byteLength===8)return`${new S.BigIntArray(S.buffer,S.byteOffset,1)[0]}`;if(!S.signed)return m(S);let M=new Uint16Array(S.buffer,S.byteOffset,S.byteLength/2);if(new Int16Array([M.at(-1)])[0]>=0)return m(S);M=M.slice();let O=1;for(let B=0;B<M.length;B++){const P=M[B],j=~P+O;M[B]=j,O&=P===0?1:0}return`-${m(M)}`}t.bigNumToString=h;function A(S){return S.byteLength===8?new S.BigIntArray(S.buffer,S.byteOffset,1)[0]:h(S)}t.bigNumToBigInt=A;function m(S){let M="";const I=new Uint32Array(2);let O=new Uint16Array(S.buffer,S.byteOffset,S.byteLength/2);const D=new Uint32Array((O=new Uint16Array(O).reverse()).buffer);let B=-1;const P=O.length-1;do{for(I[0]=O[B=0];B<P;)O[B++]=I[1]=I[0]/10,I[0]=(I[0]-I[1]*10<<16)+O[B];O[B]=I[1]=I[0]/10,I[0]=I[0]-I[1]*10,M=`${I[0]}${M}`}while(D[0]||D[1]||D[2]||D[3]);return M??"0"}class b{static new(M,I){switch(I){case!0:return new r(M);case!1:return new s(M)}switch(M.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new r(M)}return M.byteLength===16?new a(M):new s(M)}static signed(M){return new r(M)}static unsigned(M){return new s(M)}static decimal(M){return new a(M)}constructor(M,I){return b.new(M,I)}}t.BN=b}(r3)),r3}var Gp={},ge={},Wx;function Pn(){if(Wx)return ge;Wx=1;var t,e,i,n,r,s,a,o,l,c,h,A,m,b,S,M,I,O,D,B,P,j;Object.defineProperty(ge,"__esModule",{value:!0}),ge.Map_=ge.FixedSizeList=ge.FixedSizeBinary=ge.SparseUnion=ge.DenseUnion=ge.Union=ge.Struct=ge.List=ge.DurationNanosecond=ge.DurationMicrosecond=ge.DurationMillisecond=ge.DurationSecond=ge.Duration=ge.IntervalYearMonth=ge.IntervalDayTime=ge.Interval=ge.TimestampNanosecond=ge.TimestampMicrosecond=ge.TimestampMillisecond=ge.TimestampSecond=ge.Timestamp=ge.TimeNanosecond=ge.TimeMicrosecond=ge.TimeMillisecond=ge.TimeSecond=ge.Time=ge.DateMillisecond=ge.DateDay=ge.Date_=ge.Decimal=ge.Bool=ge.LargeUtf8=ge.Utf8=ge.LargeBinary=ge.Binary=ge.Float64=ge.Float32=ge.Float16=ge.Float=ge.Uint64=ge.Uint32=ge.Uint16=ge.Uint8=ge.Int64=ge.Int32=ge.Int16=ge.Int8=ge.Int=ge.Null=ge.DataType=void 0,ge.strideForType=ge.Dictionary=void 0;const N=zf(),F=nr();class ${static isNull(ct){return(ct==null?void 0:ct.typeId)===F.Type.Null}static isInt(ct){return(ct==null?void 0:ct.typeId)===F.Type.Int}static isFloat(ct){return(ct==null?void 0:ct.typeId)===F.Type.Float}static isBinary(ct){return(ct==null?void 0:ct.typeId)===F.Type.Binary}static isLargeBinary(ct){return(ct==null?void 0:ct.typeId)===F.Type.LargeBinary}static isUtf8(ct){return(ct==null?void 0:ct.typeId)===F.Type.Utf8}static isLargeUtf8(ct){return(ct==null?void 0:ct.typeId)===F.Type.LargeUtf8}static isBool(ct){return(ct==null?void 0:ct.typeId)===F.Type.Bool}static isDecimal(ct){return(ct==null?void 0:ct.typeId)===F.Type.Decimal}static isDate(ct){return(ct==null?void 0:ct.typeId)===F.Type.Date}static isTime(ct){return(ct==null?void 0:ct.typeId)===F.Type.Time}static isTimestamp(ct){return(ct==null?void 0:ct.typeId)===F.Type.Timestamp}static isInterval(ct){return(ct==null?void 0:ct.typeId)===F.Type.Interval}static isDuration(ct){return(ct==null?void 0:ct.typeId)===F.Type.Duration}static isList(ct){return(ct==null?void 0:ct.typeId)===F.Type.List}static isStruct(ct){return(ct==null?void 0:ct.typeId)===F.Type.Struct}static isUnion(ct){return(ct==null?void 0:ct.typeId)===F.Type.Union}static isFixedSizeBinary(ct){return(ct==null?void 0:ct.typeId)===F.Type.FixedSizeBinary}static isFixedSizeList(ct){return(ct==null?void 0:ct.typeId)===F.Type.FixedSizeList}static isMap(ct){return(ct==null?void 0:ct.typeId)===F.Type.Map}static isDictionary(ct){return(ct==null?void 0:ct.typeId)===F.Type.Dictionary}static isDenseUnion(ct){return $.isUnion(ct)&&ct.mode===F.UnionMode.Dense}static isSparseUnion(ct){return $.isUnion(ct)&&ct.mode===F.UnionMode.Sparse}constructor(ct){this.typeId=ct}}ge.DataType=$,t=Symbol.toStringTag,$[t]=(yt=>(yt.children=null,yt.ArrayType=Array,yt.OffsetArrayType=Int32Array,yt[Symbol.toStringTag]="DataType"))($.prototype);class V extends ${constructor(){super(F.Type.Null)}toString(){return"Null"}}ge.Null=V,e=Symbol.toStringTag,V[e]=(yt=>yt[Symbol.toStringTag]="Null")(V.prototype);class Z extends ${constructor(ct,Mi){super(F.Type.Int),this.isSigned=ct,this.bitWidth=Mi}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ge.Int=Z,i=Symbol.toStringTag,Z[i]=(yt=>(yt.isSigned=null,yt.bitWidth=null,yt[Symbol.toStringTag]="Int"))(Z.prototype);class nt extends Z{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}ge.Int8=nt;class X extends Z{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}ge.Int16=X;class bt extends Z{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}ge.Int32=bt;class Tt extends Z{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}ge.Int64=Tt;class Ot extends Z{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}ge.Uint8=Ot;class H extends Z{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}ge.Uint16=H;class k extends Z{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}ge.Uint32=k;class G extends Z{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}ge.Uint64=G,Object.defineProperty(nt.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(X.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(bt.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(Tt.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(Ot.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(H.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(k.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(G.prototype,"ArrayType",{value:BigUint64Array});class lt extends ${constructor(ct){super(F.Type.Float),this.precision=ct}get ArrayType(){switch(this.precision){case F.Precision.HALF:return Uint16Array;case F.Precision.SINGLE:return Float32Array;case F.Precision.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}ge.Float=lt,n=Symbol.toStringTag,lt[n]=(yt=>(yt.precision=null,yt[Symbol.toStringTag]="Float"))(lt.prototype);class Q extends lt{constructor(){super(F.Precision.HALF)}}ge.Float16=Q;class mt extends lt{constructor(){super(F.Precision.SINGLE)}}ge.Float32=mt;class wt extends lt{constructor(){super(F.Precision.DOUBLE)}}ge.Float64=wt,Object.defineProperty(Q.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(mt.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(wt.prototype,"ArrayType",{value:Float64Array});class Dt extends ${constructor(){super(F.Type.Binary)}toString(){return"Binary"}}ge.Binary=Dt,r=Symbol.toStringTag,Dt[r]=(yt=>(yt.ArrayType=Uint8Array,yt[Symbol.toStringTag]="Binary"))(Dt.prototype);class te extends ${constructor(){super(F.Type.LargeBinary)}toString(){return"LargeBinary"}}ge.LargeBinary=te,s=Symbol.toStringTag,te[s]=(yt=>(yt.ArrayType=Uint8Array,yt.OffsetArrayType=BigInt64Array,yt[Symbol.toStringTag]="LargeBinary"))(te.prototype);class ie extends ${constructor(){super(F.Type.Utf8)}toString(){return"Utf8"}}ge.Utf8=ie,a=Symbol.toStringTag,ie[a]=(yt=>(yt.ArrayType=Uint8Array,yt[Symbol.toStringTag]="Utf8"))(ie.prototype);class ft extends ${constructor(){super(F.Type.LargeUtf8)}toString(){return"LargeUtf8"}}ge.LargeUtf8=ft,o=Symbol.toStringTag,ft[o]=(yt=>(yt.ArrayType=Uint8Array,yt.OffsetArrayType=BigInt64Array,yt[Symbol.toStringTag]="LargeUtf8"))(ft.prototype);class Ht extends ${constructor(){super(F.Type.Bool)}toString(){return"Bool"}}ge.Bool=Ht,l=Symbol.toStringTag,Ht[l]=(yt=>(yt.ArrayType=Uint8Array,yt[Symbol.toStringTag]="Bool"))(Ht.prototype);class Nt extends ${constructor(ct,Mi,yn=128){super(F.Type.Decimal),this.scale=ct,this.precision=Mi,this.bitWidth=yn}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}ge.Decimal=Nt,c=Symbol.toStringTag,Nt[c]=(yt=>(yt.scale=null,yt.precision=null,yt.ArrayType=Uint32Array,yt[Symbol.toStringTag]="Decimal"))(Nt.prototype);class he extends ${constructor(ct){super(F.Type.Date),this.unit=ct}toString(){return`Date${(this.unit+1)*32}<${F.DateUnit[this.unit]}>`}get ArrayType(){return this.unit===F.DateUnit.DAY?Int32Array:BigInt64Array}}ge.Date_=he,h=Symbol.toStringTag,he[h]=(yt=>(yt.unit=null,yt[Symbol.toStringTag]="Date"))(he.prototype);class me extends he{constructor(){super(F.DateUnit.DAY)}}ge.DateDay=me;class Me extends he{constructor(){super(F.DateUnit.MILLISECOND)}}ge.DateMillisecond=Me;class pe extends ${constructor(ct,Mi){super(F.Type.Time),this.unit=ct,this.bitWidth=Mi}toString(){return`Time${this.bitWidth}<${F.TimeUnit[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}ge.Time=pe,A=Symbol.toStringTag,pe[A]=(yt=>(yt.unit=null,yt.bitWidth=null,yt[Symbol.toStringTag]="Time"))(pe.prototype);class Oe extends pe{constructor(){super(F.TimeUnit.SECOND,32)}}ge.TimeSecond=Oe;class Ye extends pe{constructor(){super(F.TimeUnit.MILLISECOND,32)}}ge.TimeMillisecond=Ye;class Ee extends pe{constructor(){super(F.TimeUnit.MICROSECOND,64)}}ge.TimeMicrosecond=Ee;class qe extends pe{constructor(){super(F.TimeUnit.NANOSECOND,64)}}ge.TimeNanosecond=qe;class dt extends ${constructor(ct,Mi){super(F.Type.Timestamp),this.unit=ct,this.timezone=Mi}toString(){return`Timestamp<${F.TimeUnit[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}ge.Timestamp=dt,m=Symbol.toStringTag,dt[m]=(yt=>(yt.unit=null,yt.timezone=null,yt.ArrayType=BigInt64Array,yt[Symbol.toStringTag]="Timestamp"))(dt.prototype);class Y extends dt{constructor(ct){super(F.TimeUnit.SECOND,ct)}}ge.TimestampSecond=Y;class K extends dt{constructor(ct){super(F.TimeUnit.MILLISECOND,ct)}}ge.TimestampMillisecond=K;class Ct extends dt{constructor(ct){super(F.TimeUnit.MICROSECOND,ct)}}ge.TimestampMicrosecond=Ct;class ee extends dt{constructor(ct){super(F.TimeUnit.NANOSECOND,ct)}}ge.TimestampNanosecond=ee;class Ft extends ${constructor(ct){super(F.Type.Interval),this.unit=ct}toString(){return`Interval<${F.IntervalUnit[this.unit]}>`}}ge.Interval=Ft,b=Symbol.toStringTag,Ft[b]=(yt=>(yt.unit=null,yt.ArrayType=Int32Array,yt[Symbol.toStringTag]="Interval"))(Ft.prototype);class J extends Ft{constructor(){super(F.IntervalUnit.DAY_TIME)}}ge.IntervalDayTime=J;class ut extends Ft{constructor(){super(F.IntervalUnit.YEAR_MONTH)}}ge.IntervalYearMonth=ut;class vt extends ${constructor(ct){super(F.Type.Duration),this.unit=ct}toString(){return`Duration<${F.TimeUnit[this.unit]}>`}}ge.Duration=vt,S=Symbol.toStringTag,vt[S]=(yt=>(yt.unit=null,yt.ArrayType=BigInt64Array,yt[Symbol.toStringTag]="Duration"))(vt.prototype);class Mt extends vt{constructor(){super(F.TimeUnit.SECOND)}}ge.DurationSecond=Mt;class re extends vt{constructor(){super(F.TimeUnit.MILLISECOND)}}ge.DurationMillisecond=re;class be extends vt{constructor(){super(F.TimeUnit.MICROSECOND)}}ge.DurationMicrosecond=be;class Be extends vt{constructor(){super(F.TimeUnit.NANOSECOND)}}ge.DurationNanosecond=Be;class q extends ${constructor(ct){super(F.Type.List),this.children=[ct]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}ge.List=q,M=Symbol.toStringTag,q[M]=(yt=>(yt.children=null,yt[Symbol.toStringTag]="List"))(q.prototype);class Bt extends ${constructor(ct){super(F.Type.Struct),this.children=ct}toString(){return`Struct<{${this.children.map(ct=>`${ct.name}:${ct.type}`).join(", ")}}>`}}ge.Struct=Bt,I=Symbol.toStringTag,Bt[I]=(yt=>(yt.children=null,yt[Symbol.toStringTag]="Struct"))(Bt.prototype);class Xt extends ${constructor(ct,Mi,yn){super(F.Type.Union),this.mode=ct,this.children=yn,this.typeIds=Mi=Int32Array.from(Mi),this.typeIdToChildIndex=Mi.reduce((On,Sr,Kr)=>(On[Sr]=Kr)&&On||On,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(ct=>`${ct.type}`).join(" | ")}>`}}ge.Union=Xt,O=Symbol.toStringTag,Xt[O]=(yt=>(yt.mode=null,yt.typeIds=null,yt.children=null,yt.typeIdToChildIndex=null,yt.ArrayType=Int8Array,yt[Symbol.toStringTag]="Union"))(Xt.prototype);class ke extends Xt{constructor(ct,Mi){super(F.UnionMode.Dense,ct,Mi)}}ge.DenseUnion=ke;class qi extends Xt{constructor(ct,Mi){super(F.UnionMode.Sparse,ct,Mi)}}ge.SparseUnion=qi;class Tn extends ${constructor(ct){super(F.Type.FixedSizeBinary),this.byteWidth=ct}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}ge.FixedSizeBinary=Tn,D=Symbol.toStringTag,Tn[D]=(yt=>(yt.byteWidth=null,yt.ArrayType=Uint8Array,yt[Symbol.toStringTag]="FixedSizeBinary"))(Tn.prototype);class xn extends ${constructor(ct,Mi){super(F.Type.FixedSizeList),this.listSize=ct,this.children=[Mi]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}ge.FixedSizeList=xn,B=Symbol.toStringTag,xn[B]=(yt=>(yt.children=null,yt.listSize=null,yt[Symbol.toStringTag]="FixedSizeList"))(xn.prototype);class os extends ${constructor(ct,Mi=!1){var yn,On,Sr;if(super(F.Type.Map),this.children=[ct],this.keysSorted=Mi,ct&&(ct.name="entries",!((yn=ct==null?void 0:ct.type)===null||yn===void 0)&&yn.children)){const Kr=(On=ct==null?void 0:ct.type)===null||On===void 0?void 0:On.children[0];Kr&&(Kr.name="key");const $s=(Sr=ct==null?void 0:ct.type)===null||Sr===void 0?void 0:Sr.children[1];$s&&($s.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(ct=>`${ct.name}:${ct.type}`).join(", ")}}>`}}ge.Map_=os,P=Symbol.toStringTag,os[P]=(yt=>(yt.children=null,yt.keysSorted=null,yt[Symbol.toStringTag]="Map_"))(os.prototype);const Ku=(yt=>()=>++yt)(-1);class de extends ${constructor(ct,Mi,yn,On){super(F.Type.Dictionary),this.indices=Mi,this.dictionary=ct,this.isOrdered=On||!1,this.id=yn==null?Ku():(0,N.bigIntToNumber)(yn)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}ge.Dictionary=de,j=Symbol.toStringTag,de[j]=(yt=>(yt.id=null,yt.indices=null,yt.isOrdered=null,yt.dictionary=null,yt[Symbol.toStringTag]="Dictionary"))(de.prototype);function Nc(yt){const ct=yt;switch(yt.typeId){case F.Type.Decimal:return yt.bitWidth/32;case F.Type.Interval:return 1+ct.unit;case F.Type.FixedSizeList:return ct.listSize;case F.Type.FixedSizeBinary:return ct.byteWidth;default:return 1}}return ge.strideForType=Nc,ge}var Hx;function wa(){if(Hx)return Gp;Hx=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.Visitor=void 0;const t=nr(),e=Pn();class i{visitMany(o,...l){return o.map((c,h)=>this.visit(c,...l.map(A=>A[h])))}visit(...o){return this.getVisitFn(o[0],!1).apply(this,o)}getVisitFn(o,l=!0){return n(this,o,l)}getVisitFnByTypeId(o,l=!0){return r(this,o,l)}visitNull(o,...l){return null}visitBool(o,...l){return null}visitInt(o,...l){return null}visitFloat(o,...l){return null}visitUtf8(o,...l){return null}visitLargeUtf8(o,...l){return null}visitBinary(o,...l){return null}visitLargeBinary(o,...l){return null}visitFixedSizeBinary(o,...l){return null}visitDate(o,...l){return null}visitTimestamp(o,...l){return null}visitTime(o,...l){return null}visitDecimal(o,...l){return null}visitList(o,...l){return null}visitStruct(o,...l){return null}visitUnion(o,...l){return null}visitDictionary(o,...l){return null}visitInterval(o,...l){return null}visitDuration(o,...l){return null}visitFixedSizeList(o,...l){return null}visitMap(o,...l){return null}}Gp.Visitor=i;function n(a,o,l=!0){return typeof o=="number"?r(a,o,l):typeof o=="string"&&o in t.Type?r(a,t.Type[o],l):o&&o instanceof e.DataType?r(a,s(o),l):o!=null&&o.type&&o.type instanceof e.DataType?r(a,s(o.type),l):r(a,t.Type.NONE,l)}function r(a,o,l=!0){let c=null;switch(o){case t.Type.Null:c=a.visitNull;break;case t.Type.Bool:c=a.visitBool;break;case t.Type.Int:c=a.visitInt;break;case t.Type.Int8:c=a.visitInt8||a.visitInt;break;case t.Type.Int16:c=a.visitInt16||a.visitInt;break;case t.Type.Int32:c=a.visitInt32||a.visitInt;break;case t.Type.Int64:c=a.visitInt64||a.visitInt;break;case t.Type.Uint8:c=a.visitUint8||a.visitInt;break;case t.Type.Uint16:c=a.visitUint16||a.visitInt;break;case t.Type.Uint32:c=a.visitUint32||a.visitInt;break;case t.Type.Uint64:c=a.visitUint64||a.visitInt;break;case t.Type.Float:c=a.visitFloat;break;case t.Type.Float16:c=a.visitFloat16||a.visitFloat;break;case t.Type.Float32:c=a.visitFloat32||a.visitFloat;break;case t.Type.Float64:c=a.visitFloat64||a.visitFloat;break;case t.Type.Utf8:c=a.visitUtf8;break;case t.Type.LargeUtf8:c=a.visitLargeUtf8;break;case t.Type.Binary:c=a.visitBinary;break;case t.Type.LargeBinary:c=a.visitLargeBinary;break;case t.Type.FixedSizeBinary:c=a.visitFixedSizeBinary;break;case t.Type.Date:c=a.visitDate;break;case t.Type.DateDay:c=a.visitDateDay||a.visitDate;break;case t.Type.DateMillisecond:c=a.visitDateMillisecond||a.visitDate;break;case t.Type.Timestamp:c=a.visitTimestamp;break;case t.Type.TimestampSecond:c=a.visitTimestampSecond||a.visitTimestamp;break;case t.Type.TimestampMillisecond:c=a.visitTimestampMillisecond||a.visitTimestamp;break;case t.Type.TimestampMicrosecond:c=a.visitTimestampMicrosecond||a.visitTimestamp;break;case t.Type.TimestampNanosecond:c=a.visitTimestampNanosecond||a.visitTimestamp;break;case t.Type.Time:c=a.visitTime;break;case t.Type.TimeSecond:c=a.visitTimeSecond||a.visitTime;break;case t.Type.TimeMillisecond:c=a.visitTimeMillisecond||a.visitTime;break;case t.Type.TimeMicrosecond:c=a.visitTimeMicrosecond||a.visitTime;break;case t.Type.TimeNanosecond:c=a.visitTimeNanosecond||a.visitTime;break;case t.Type.Decimal:c=a.visitDecimal;break;case t.Type.List:c=a.visitList;break;case t.Type.Struct:c=a.visitStruct;break;case t.Type.Union:c=a.visitUnion;break;case t.Type.DenseUnion:c=a.visitDenseUnion||a.visitUnion;break;case t.Type.SparseUnion:c=a.visitSparseUnion||a.visitUnion;break;case t.Type.Dictionary:c=a.visitDictionary;break;case t.Type.Interval:c=a.visitInterval;break;case t.Type.IntervalDayTime:c=a.visitIntervalDayTime||a.visitInterval;break;case t.Type.IntervalYearMonth:c=a.visitIntervalYearMonth||a.visitInterval;break;case t.Type.Duration:c=a.visitDuration;break;case t.Type.DurationSecond:c=a.visitDurationSecond||a.visitDuration;break;case t.Type.DurationMillisecond:c=a.visitDurationMillisecond||a.visitDuration;break;case t.Type.DurationMicrosecond:c=a.visitDurationMicrosecond||a.visitDuration;break;case t.Type.DurationNanosecond:c=a.visitDurationNanosecond||a.visitDuration;break;case t.Type.FixedSizeList:c=a.visitFixedSizeList;break;case t.Type.Map:c=a.visitMap;break}if(typeof c=="function")return c;if(!l)return()=>null;throw new Error(`Unrecognized type '${t.Type[o]}'`)}function s(a){switch(a.typeId){case t.Type.Null:return t.Type.Null;case t.Type.Int:{const{bitWidth:o,isSigned:l}=a;switch(o){case 8:return l?t.Type.Int8:t.Type.Uint8;case 16:return l?t.Type.Int16:t.Type.Uint16;case 32:return l?t.Type.Int32:t.Type.Uint32;case 64:return l?t.Type.Int64:t.Type.Uint64}return t.Type.Int}case t.Type.Float:switch(a.precision){case t.Precision.HALF:return t.Type.Float16;case t.Precision.SINGLE:return t.Type.Float32;case t.Precision.DOUBLE:return t.Type.Float64}return t.Type.Float;case t.Type.Binary:return t.Type.Binary;case t.Type.LargeBinary:return t.Type.LargeBinary;case t.Type.Utf8:return t.Type.Utf8;case t.Type.LargeUtf8:return t.Type.LargeUtf8;case t.Type.Bool:return t.Type.Bool;case t.Type.Decimal:return t.Type.Decimal;case t.Type.Time:switch(a.unit){case t.TimeUnit.SECOND:return t.Type.TimeSecond;case t.TimeUnit.MILLISECOND:return t.Type.TimeMillisecond;case t.TimeUnit.MICROSECOND:return t.Type.TimeMicrosecond;case t.TimeUnit.NANOSECOND:return t.Type.TimeNanosecond}return t.Type.Time;case t.Type.Timestamp:switch(a.unit){case t.TimeUnit.SECOND:return t.Type.TimestampSecond;case t.TimeUnit.MILLISECOND:return t.Type.TimestampMillisecond;case t.TimeUnit.MICROSECOND:return t.Type.TimestampMicrosecond;case t.TimeUnit.NANOSECOND:return t.Type.TimestampNanosecond}return t.Type.Timestamp;case t.Type.Date:switch(a.unit){case t.DateUnit.DAY:return t.Type.DateDay;case t.DateUnit.MILLISECOND:return t.Type.DateMillisecond}return t.Type.Date;case t.Type.Interval:switch(a.unit){case t.IntervalUnit.DAY_TIME:return t.Type.IntervalDayTime;case t.IntervalUnit.YEAR_MONTH:return t.Type.IntervalYearMonth}return t.Type.Interval;case t.Type.Duration:switch(a.unit){case t.TimeUnit.SECOND:return t.Type.DurationSecond;case t.TimeUnit.MILLISECOND:return t.Type.DurationMillisecond;case t.TimeUnit.MICROSECOND:return t.Type.DurationMicrosecond;case t.TimeUnit.NANOSECOND:return t.Type.DurationNanosecond}return t.Type.Duration;case t.Type.Map:return t.Type.Map;case t.Type.List:return t.Type.List;case t.Type.Struct:return t.Type.Struct;case t.Type.Union:switch(a.mode){case t.UnionMode.Dense:return t.Type.DenseUnion;case t.UnionMode.Sparse:return t.Type.SparseUnion}return t.Type.Union;case t.Type.FixedSizeBinary:return t.Type.FixedSizeBinary;case t.Type.FixedSizeList:return t.Type.FixedSizeList;case t.Type.Dictionary:return t.Type.Dictionary}throw new Error(`Unrecognized type '${t.Type[a.typeId]}'`)}return i.prototype.visitInt8=null,i.prototype.visitInt16=null,i.prototype.visitInt32=null,i.prototype.visitInt64=null,i.prototype.visitUint8=null,i.prototype.visitUint16=null,i.prototype.visitUint32=null,i.prototype.visitUint64=null,i.prototype.visitFloat16=null,i.prototype.visitFloat32=null,i.prototype.visitFloat64=null,i.prototype.visitDateDay=null,i.prototype.visitDateMillisecond=null,i.prototype.visitTimestampSecond=null,i.prototype.visitTimestampMillisecond=null,i.prototype.visitTimestampMicrosecond=null,i.prototype.visitTimestampNanosecond=null,i.prototype.visitTimeSecond=null,i.prototype.visitTimeMillisecond=null,i.prototype.visitTimeMicrosecond=null,i.prototype.visitTimeNanosecond=null,i.prototype.visitDenseUnion=null,i.prototype.visitSparseUnion=null,i.prototype.visitIntervalDayTime=null,i.prototype.visitIntervalYearMonth=null,i.prototype.visitDuration=null,i.prototype.visitDurationSecond=null,i.prototype.visitDurationMillisecond=null,i.prototype.visitDurationMicrosecond=null,i.prototype.visitDurationNanosecond=null,Gp}var Xp={},s3={},Fh={},qx;function _T(){if(qx)return Fh;qx=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.float64ToUint16=Fh.uint16ToFloat64=void 0;const t=new Float64Array(1),e=new Uint32Array(t.buffer);function i(r){const s=(r&31744)>>10,a=(r&1023)/1024,o=Math.pow(-1,(r&32768)>>15);switch(s){case 31:return o*(a?Number.NaN:1/0);case 0:return o*(a?6103515625e-14*a:0)}return o*Math.pow(2,s-15)*(1+a)}Fh.uint16ToFloat64=i;function n(r){if(r!==r)return 32256;t[0]=r;const s=(e[1]&2147483648)>>16&65535;let a=e[1]&2146435072,o=0;return a>=1089470464?e[0]>0?a=31744:(a=(a&2080374784)>>16,o=(e[1]&1048575)>>10):a<=1056964608?(o=1048576+(e[1]&1048575),o=1048576+(o<<(a>>20)-998)>>21,a=0):(a=a-1056964608>>10,o=(e[1]&1048575)+512>>10),s|a|o&65535}return Fh.float64ToUint16=n,Fh}var Yx;function Qa(){return Yx||(Yx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.setDuration=t.setDurationNanosecond=t.setDurationMicrosecond=t.setDurationMillisecond=t.setDurationSecond=t.setIntervalYearMonth=t.setIntervalDayTime=t.setIntervalValue=t.setDecimal=t.setTime=t.setTimeNanosecond=t.setTimeMicrosecond=t.setTimeMillisecond=t.setTimeSecond=t.setTimestamp=t.setTimestampNanosecond=t.setTimestampMicrosecond=t.setTimestampMillisecond=t.setTimestampSecond=t.setDate=t.setFixedSizeBinary=t.setDateMillisecond=t.setDateDay=t.setAnyFloat=t.setFloat16=t.setFloat=t.setInt=t.setVariableWidthBytes=t.setEpochMsToDays=t.SetVisitor=void 0;const e=zs(),i=wa(),n=zf(),r=Lf(),s=_T(),a=nr();class o extends i.Visitor{}t.SetVisitor=o;function l(dt){return(Y,K,Ct)=>{if(Y.setValid(K,Ct!=null))return dt(Y,K,Ct)}}const c=(dt,Y,K)=>{dt[Y]=Math.floor(K/864e5)};t.setEpochMsToDays=c;const h=(dt,Y,K,Ct)=>{if(K+1<Y.length){const ee=(0,n.bigIntToNumber)(Y[K]),Ft=(0,n.bigIntToNumber)(Y[K+1]);dt.set(Ct.subarray(0,Ft-ee),ee)}};t.setVariableWidthBytes=h;const A=({offset:dt,values:Y},K,Ct)=>{const ee=dt+K;Ct?Y[ee>>3]|=1<<ee%8:Y[ee>>3]&=~(1<<ee%8)},m=({values:dt},Y,K)=>{dt[Y]=K};t.setInt=m;const b=({values:dt},Y,K)=>{dt[Y]=K};t.setFloat=b;const S=({values:dt},Y,K)=>{dt[Y]=(0,s.float64ToUint16)(K)};t.setFloat16=S;const M=(dt,Y,K)=>{switch(dt.type.precision){case a.Precision.HALF:return(0,t.setFloat16)(dt,Y,K);case a.Precision.SINGLE:case a.Precision.DOUBLE:return(0,t.setFloat)(dt,Y,K)}};t.setAnyFloat=M;const I=({values:dt},Y,K)=>{(0,t.setEpochMsToDays)(dt,Y,K.valueOf())};t.setDateDay=I;const O=({values:dt},Y,K)=>{dt[Y]=BigInt(K)};t.setDateMillisecond=O;const D=({stride:dt,values:Y},K,Ct)=>{Y.set(Ct.subarray(0,dt),dt*K)};t.setFixedSizeBinary=D;const B=({values:dt,valueOffsets:Y},K,Ct)=>(0,t.setVariableWidthBytes)(dt,Y,K,Ct),P=({values:dt,valueOffsets:Y},K,Ct)=>(0,t.setVariableWidthBytes)(dt,Y,K,(0,r.encodeUtf8)(Ct)),j=(dt,Y,K)=>{dt.type.unit===a.DateUnit.DAY?(0,t.setDateDay)(dt,Y,K):(0,t.setDateMillisecond)(dt,Y,K)};t.setDate=j;const N=({values:dt},Y,K)=>{dt[Y]=BigInt(K/1e3)};t.setTimestampSecond=N;const F=({values:dt},Y,K)=>{dt[Y]=BigInt(K)};t.setTimestampMillisecond=F;const $=({values:dt},Y,K)=>{dt[Y]=BigInt(K*1e3)};t.setTimestampMicrosecond=$;const V=({values:dt},Y,K)=>{dt[Y]=BigInt(K*1e6)};t.setTimestampNanosecond=V;const Z=(dt,Y,K)=>{switch(dt.type.unit){case a.TimeUnit.SECOND:return(0,t.setTimestampSecond)(dt,Y,K);case a.TimeUnit.MILLISECOND:return(0,t.setTimestampMillisecond)(dt,Y,K);case a.TimeUnit.MICROSECOND:return(0,t.setTimestampMicrosecond)(dt,Y,K);case a.TimeUnit.NANOSECOND:return(0,t.setTimestampNanosecond)(dt,Y,K)}};t.setTimestamp=Z;const nt=({values:dt},Y,K)=>{dt[Y]=K};t.setTimeSecond=nt;const X=({values:dt},Y,K)=>{dt[Y]=K};t.setTimeMillisecond=X;const bt=({values:dt},Y,K)=>{dt[Y]=K};t.setTimeMicrosecond=bt;const Tt=({values:dt},Y,K)=>{dt[Y]=K};t.setTimeNanosecond=Tt;const Ot=(dt,Y,K)=>{switch(dt.type.unit){case a.TimeUnit.SECOND:return(0,t.setTimeSecond)(dt,Y,K);case a.TimeUnit.MILLISECOND:return(0,t.setTimeMillisecond)(dt,Y,K);case a.TimeUnit.MICROSECOND:return(0,t.setTimeMicrosecond)(dt,Y,K);case a.TimeUnit.NANOSECOND:return(0,t.setTimeNanosecond)(dt,Y,K)}};t.setTime=Ot;const H=({values:dt,stride:Y},K,Ct)=>{dt.set(Ct.subarray(0,Y),Y*K)};t.setDecimal=H;const k=(dt,Y,K)=>{const Ct=dt.children[0],ee=dt.valueOffsets,Ft=t.instance.getVisitFn(Ct);if(Array.isArray(K))for(let J=-1,ut=ee[Y],vt=ee[Y+1];ut<vt;)Ft(Ct,ut++,K[++J]);else for(let J=-1,ut=ee[Y],vt=ee[Y+1];ut<vt;)Ft(Ct,ut++,K.get(++J))},G=(dt,Y,K)=>{const Ct=dt.children[0],{valueOffsets:ee}=dt,Ft=t.instance.getVisitFn(Ct);let{[Y]:J,[Y+1]:ut}=ee;const vt=K instanceof Map?K.entries():Object.entries(K);for(const Mt of vt)if(Ft(Ct,J,Mt),++J>=ut)break},lt=(dt,Y)=>(K,Ct,ee,Ft)=>Ct&&K(Ct,dt,Y[Ft]),Q=(dt,Y)=>(K,Ct,ee,Ft)=>Ct&&K(Ct,dt,Y.get(Ft)),mt=(dt,Y)=>(K,Ct,ee,Ft)=>Ct&&K(Ct,dt,Y.get(ee.name)),wt=(dt,Y)=>(K,Ct,ee,Ft)=>Ct&&K(Ct,dt,Y[ee.name]),Dt=(dt,Y,K)=>{const Ct=dt.type.children.map(Ft=>t.instance.getVisitFn(Ft.type)),ee=K instanceof Map?mt(Y,K):K instanceof e.Vector?Q(Y,K):Array.isArray(K)?lt(Y,K):wt(Y,K);dt.type.children.forEach((Ft,J)=>ee(Ct[J],dt.children[J],Ft,J))},te=(dt,Y,K)=>{dt.type.mode===a.UnionMode.Dense?ie(dt,Y,K):ft(dt,Y,K)},ie=(dt,Y,K)=>{const Ct=dt.type.typeIdToChildIndex[dt.typeIds[Y]],ee=dt.children[Ct];t.instance.visit(ee,dt.valueOffsets[Y],K)},ft=(dt,Y,K)=>{const Ct=dt.type.typeIdToChildIndex[dt.typeIds[Y]],ee=dt.children[Ct];t.instance.visit(ee,Y,K)},Ht=(dt,Y,K)=>{var Ct;(Ct=dt.dictionary)===null||Ct===void 0||Ct.set(dt.values[Y],K)},Nt=(dt,Y,K)=>{dt.type.unit===a.IntervalUnit.DAY_TIME?(0,t.setIntervalDayTime)(dt,Y,K):(0,t.setIntervalYearMonth)(dt,Y,K)};t.setIntervalValue=Nt;const he=({values:dt},Y,K)=>{dt.set(K.subarray(0,2),2*Y)};t.setIntervalDayTime=he;const me=({values:dt},Y,K)=>{dt[Y]=K[0]*12+K[1]%12};t.setIntervalYearMonth=me;const Me=({values:dt},Y,K)=>{dt[Y]=K};t.setDurationSecond=Me;const pe=({values:dt},Y,K)=>{dt[Y]=K};t.setDurationMillisecond=pe;const Oe=({values:dt},Y,K)=>{dt[Y]=K};t.setDurationMicrosecond=Oe;const Ye=({values:dt},Y,K)=>{dt[Y]=K};t.setDurationNanosecond=Ye;const Ee=(dt,Y,K)=>{switch(dt.type.unit){case a.TimeUnit.SECOND:return(0,t.setDurationSecond)(dt,Y,K);case a.TimeUnit.MILLISECOND:return(0,t.setDurationMillisecond)(dt,Y,K);case a.TimeUnit.MICROSECOND:return(0,t.setDurationMicrosecond)(dt,Y,K);case a.TimeUnit.NANOSECOND:return(0,t.setDurationNanosecond)(dt,Y,K)}};t.setDuration=Ee;const qe=(dt,Y,K)=>{const{stride:Ct}=dt,ee=dt.children[0],Ft=t.instance.getVisitFn(ee);if(Array.isArray(K))for(let J=-1,ut=Y*Ct;++J<Ct;)Ft(ee,ut+J,K[J]);else for(let J=-1,ut=Y*Ct;++J<Ct;)Ft(ee,ut+J,K.get(J))};o.prototype.visitBool=l(A),o.prototype.visitInt=l(t.setInt),o.prototype.visitInt8=l(t.setInt),o.prototype.visitInt16=l(t.setInt),o.prototype.visitInt32=l(t.setInt),o.prototype.visitInt64=l(t.setInt),o.prototype.visitUint8=l(t.setInt),o.prototype.visitUint16=l(t.setInt),o.prototype.visitUint32=l(t.setInt),o.prototype.visitUint64=l(t.setInt),o.prototype.visitFloat=l(t.setAnyFloat),o.prototype.visitFloat16=l(t.setFloat16),o.prototype.visitFloat32=l(t.setFloat),o.prototype.visitFloat64=l(t.setFloat),o.prototype.visitUtf8=l(P),o.prototype.visitLargeUtf8=l(P),o.prototype.visitBinary=l(B),o.prototype.visitLargeBinary=l(B),o.prototype.visitFixedSizeBinary=l(t.setFixedSizeBinary),o.prototype.visitDate=l(t.setDate),o.prototype.visitDateDay=l(t.setDateDay),o.prototype.visitDateMillisecond=l(t.setDateMillisecond),o.prototype.visitTimestamp=l(t.setTimestamp),o.prototype.visitTimestampSecond=l(t.setTimestampSecond),o.prototype.visitTimestampMillisecond=l(t.setTimestampMillisecond),o.prototype.visitTimestampMicrosecond=l(t.setTimestampMicrosecond),o.prototype.visitTimestampNanosecond=l(t.setTimestampNanosecond),o.prototype.visitTime=l(t.setTime),o.prototype.visitTimeSecond=l(t.setTimeSecond),o.prototype.visitTimeMillisecond=l(t.setTimeMillisecond),o.prototype.visitTimeMicrosecond=l(t.setTimeMicrosecond),o.prototype.visitTimeNanosecond=l(t.setTimeNanosecond),o.prototype.visitDecimal=l(t.setDecimal),o.prototype.visitList=l(k),o.prototype.visitStruct=l(Dt),o.prototype.visitUnion=l(te),o.prototype.visitDenseUnion=l(ie),o.prototype.visitSparseUnion=l(ft),o.prototype.visitDictionary=l(Ht),o.prototype.visitInterval=l(t.setIntervalValue),o.prototype.visitIntervalDayTime=l(t.setIntervalDayTime),o.prototype.visitIntervalYearMonth=l(t.setIntervalYearMonth),o.prototype.visitDuration=l(t.setDuration),o.prototype.visitDurationSecond=l(t.setDurationSecond),o.prototype.visitDurationMillisecond=l(t.setDurationMillisecond),o.prototype.visitDurationMicrosecond=l(t.setDurationMicrosecond),o.prototype.visitDurationNanosecond=l(t.setDurationNanosecond),o.prototype.visitFixedSizeList=l(qe),o.prototype.visitMap=l(G),t.instance=new o}(s3)),s3}var Gx;function AB(){if(Gx)return Xp;Gx=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.StructRow=void 0;const t=mT(),e=f0(),i=Qa(),n=Symbol.for("parent"),r=Symbol.for("rowIndex");class s{constructor(h,A){return this[n]=h,this[r]=A,new Proxy(this,l)}toArray(){return Object.values(this.toJSON())}toJSON(){const h=this[r],A=this[n],m=A.type.children,b={};for(let S=-1,M=m.length;++S<M;)b[m[S].name]=e.instance.visit(A.children[S],h);return b}toString(){return`{${[...this].map(([h,A])=>`${(0,t.valueToString)(h)}: ${(0,t.valueToString)(A)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new a(this[n],this[r])}}Xp.StructRow=s;class a{constructor(h,A){this.childIndex=0,this.children=h.children,this.rowIndex=A,this.childFields=h.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const h=this.childIndex;return h<this.numChildren?(this.childIndex=h+1,{done:!1,value:[this.childFields[h].name,e.instance.visit(this.children[h],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[n]:{writable:!0,enumerable:!1,configurable:!1,value:null},[r]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class o{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(h){return h[n].type.children.map(A=>A.name)}has(h,A){return h[n].type.children.some(m=>m.name===A)}getOwnPropertyDescriptor(h,A){if(h[n].type.children.some(m=>m.name===A))return{writable:!0,enumerable:!0,configurable:!0}}get(h,A){if(Reflect.has(h,A))return h[A];const m=h[n].type.children.findIndex(b=>b.name===A);if(m!==-1){const b=e.instance.visit(h[n].children[m],h[r]);return Reflect.set(h,A,b),b}}set(h,A,m){const b=h[n].type.children.findIndex(S=>S.name===A);return b!==-1?(i.instance.visit(h[n].children[b],h[r],m),Reflect.set(h,A,m)):Reflect.has(h,A)||typeof A=="symbol"?Reflect.set(h,A,m):!1}}const l=new o;return Xp}var Xx;function f0(){return Xx||(Xx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.GetVisitor=void 0;const e=dB(),i=zs(),n=wa(),r=bT(),s=AB(),a=zf(),o=Lf(),l=_T(),c=nr();class h extends n.Visitor{}t.GetVisitor=h;function A(Y){return(K,Ct)=>K.getValid(Ct)?Y(K,Ct):null}const m=(Y,K)=>864e5*Y[K],b=(Y,K)=>null,S=(Y,K,Ct)=>{if(Ct+1>=K.length)return null;const ee=(0,a.bigIntToNumber)(K[Ct]),Ft=(0,a.bigIntToNumber)(K[Ct+1]);return Y.subarray(ee,Ft)},M=({offset:Y,values:K},Ct)=>{const ee=Y+Ct;return(K[ee>>3]&1<<ee%8)!==0},I=({values:Y},K)=>m(Y,K),O=({values:Y},K)=>(0,a.bigIntToNumber)(Y[K]),D=({stride:Y,values:K},Ct)=>K[Y*Ct],B=({stride:Y,values:K},Ct)=>(0,l.uint16ToFloat64)(K[Y*Ct]),P=({values:Y},K)=>Y[K],j=({stride:Y,values:K},Ct)=>K.subarray(Y*Ct,Y*(Ct+1)),N=({values:Y,valueOffsets:K},Ct)=>S(Y,K,Ct),F=({values:Y,valueOffsets:K},Ct)=>{const ee=S(Y,K,Ct);return ee!==null?(0,o.decodeUtf8)(ee):null},$=({values:Y},K)=>Y[K],V=({type:Y,values:K},Ct)=>Y.precision!==c.Precision.HALF?K[Ct]:(0,l.uint16ToFloat64)(K[Ct]),Z=(Y,K)=>Y.type.unit===c.DateUnit.DAY?I(Y,K):O(Y,K),nt=({values:Y},K)=>1e3*(0,a.bigIntToNumber)(Y[K]),X=({values:Y},K)=>(0,a.bigIntToNumber)(Y[K]),bt=({values:Y},K)=>(0,a.divideBigInts)(Y[K],BigInt(1e3)),Tt=({values:Y},K)=>(0,a.divideBigInts)(Y[K],BigInt(1e6)),Ot=(Y,K)=>{switch(Y.type.unit){case c.TimeUnit.SECOND:return nt(Y,K);case c.TimeUnit.MILLISECOND:return X(Y,K);case c.TimeUnit.MICROSECOND:return bt(Y,K);case c.TimeUnit.NANOSECOND:return Tt(Y,K)}},H=({values:Y},K)=>Y[K],k=({values:Y},K)=>Y[K],G=({values:Y},K)=>Y[K],lt=({values:Y},K)=>Y[K],Q=(Y,K)=>{switch(Y.type.unit){case c.TimeUnit.SECOND:return H(Y,K);case c.TimeUnit.MILLISECOND:return k(Y,K);case c.TimeUnit.MICROSECOND:return G(Y,K);case c.TimeUnit.NANOSECOND:return lt(Y,K)}},mt=({values:Y,stride:K},Ct)=>e.BN.decimal(Y.subarray(K*Ct,K*(Ct+1))),wt=(Y,K)=>{const{valueOffsets:Ct,stride:ee,children:Ft}=Y,{[K*ee]:J,[K*ee+1]:ut}=Ct,Mt=Ft[0].slice(J,ut-J);return new i.Vector([Mt])},Dt=(Y,K)=>{const{valueOffsets:Ct,children:ee}=Y,{[K]:Ft,[K+1]:J}=Ct,ut=ee[0];return new r.MapRow(ut.slice(Ft,J-Ft))},te=(Y,K)=>new s.StructRow(Y,K),ie=(Y,K)=>Y.type.mode===c.UnionMode.Dense?ft(Y,K):Ht(Y,K),ft=(Y,K)=>{const Ct=Y.type.typeIdToChildIndex[Y.typeIds[K]],ee=Y.children[Ct];return t.instance.visit(ee,Y.valueOffsets[K])},Ht=(Y,K)=>{const Ct=Y.type.typeIdToChildIndex[Y.typeIds[K]],ee=Y.children[Ct];return t.instance.visit(ee,K)},Nt=(Y,K)=>{var Ct;return(Ct=Y.dictionary)===null||Ct===void 0?void 0:Ct.get(Y.values[K])},he=(Y,K)=>Y.type.unit===c.IntervalUnit.DAY_TIME?me(Y,K):Me(Y,K),me=({values:Y},K)=>Y.subarray(2*K,2*(K+1)),Me=({values:Y},K)=>{const Ct=Y[K],ee=new Int32Array(2);return ee[0]=Math.trunc(Ct/12),ee[1]=Math.trunc(Ct%12),ee},pe=({values:Y},K)=>Y[K],Oe=({values:Y},K)=>Y[K],Ye=({values:Y},K)=>Y[K],Ee=({values:Y},K)=>Y[K],qe=(Y,K)=>{switch(Y.type.unit){case c.TimeUnit.SECOND:return pe(Y,K);case c.TimeUnit.MILLISECOND:return Oe(Y,K);case c.TimeUnit.MICROSECOND:return Ye(Y,K);case c.TimeUnit.NANOSECOND:return Ee(Y,K)}},dt=(Y,K)=>{const{stride:Ct,children:ee}=Y,J=ee[0].slice(K*Ct,Ct);return new i.Vector([J])};h.prototype.visitNull=A(b),h.prototype.visitBool=A(M),h.prototype.visitInt=A($),h.prototype.visitInt8=A(D),h.prototype.visitInt16=A(D),h.prototype.visitInt32=A(D),h.prototype.visitInt64=A(P),h.prototype.visitUint8=A(D),h.prototype.visitUint16=A(D),h.prototype.visitUint32=A(D),h.prototype.visitUint64=A(P),h.prototype.visitFloat=A(V),h.prototype.visitFloat16=A(B),h.prototype.visitFloat32=A(D),h.prototype.visitFloat64=A(D),h.prototype.visitUtf8=A(F),h.prototype.visitLargeUtf8=A(F),h.prototype.visitBinary=A(N),h.prototype.visitLargeBinary=A(N),h.prototype.visitFixedSizeBinary=A(j),h.prototype.visitDate=A(Z),h.prototype.visitDateDay=A(I),h.prototype.visitDateMillisecond=A(O),h.prototype.visitTimestamp=A(Ot),h.prototype.visitTimestampSecond=A(nt),h.prototype.visitTimestampMillisecond=A(X),h.prototype.visitTimestampMicrosecond=A(bt),h.prototype.visitTimestampNanosecond=A(Tt),h.prototype.visitTime=A(Q),h.prototype.visitTimeSecond=A(H),h.prototype.visitTimeMillisecond=A(k),h.prototype.visitTimeMicrosecond=A(G),h.prototype.visitTimeNanosecond=A(lt),h.prototype.visitDecimal=A(mt),h.prototype.visitList=A(wt),h.prototype.visitStruct=A(te),h.prototype.visitUnion=A(ie),h.prototype.visitDenseUnion=A(ft),h.prototype.visitSparseUnion=A(Ht),h.prototype.visitDictionary=A(Nt),h.prototype.visitInterval=A(he),h.prototype.visitIntervalDayTime=A(me),h.prototype.visitIntervalYearMonth=A(Me),h.prototype.visitDuration=A(qe),h.prototype.visitDurationSecond=A(pe),h.prototype.visitDurationMillisecond=A(Oe),h.prototype.visitDurationMicrosecond=A(Ye),h.prototype.visitDurationNanosecond=A(Ee),h.prototype.visitFixedSizeList=A(dt),h.prototype.visitMap=A(Dt),t.instance=new h}(n3)),n3}var Qx;function bT(){return Qx||(Qx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MapRow=t._kKeysAsStrings=t.kKeysAsStrings=t.kVals=t.kKeys=void 0;const e=zs(),i=mT(),n=f0(),r=Qa();t.kKeys=Symbol.for("keys"),t.kVals=Symbol.for("vals"),t.kKeysAsStrings=Symbol.for("kKeysAsStrings"),t._kKeysAsStrings=Symbol.for("_kKeysAsStrings");class s{constructor(c){return this[t.kKeys]=new e.Vector([c.children[0]]).memoize(),this[t.kVals]=c.children[1],new Proxy(this,new o)}get[t.kKeysAsStrings](){return this[t._kKeysAsStrings]||(this[t._kKeysAsStrings]=Array.from(this[t.kKeys].toArray(),String))}[Symbol.iterator](){return new a(this[t.kKeys],this[t.kVals])}get size(){return this[t.kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const c=this[t.kKeys],h=this[t.kVals],A={};for(let m=-1,b=c.length;++m<b;)A[c.get(m)]=n.instance.visit(h,m);return A}toString(){return`{${[...this].map(([c,h])=>`${(0,i.valueToString)(c)}: ${(0,i.valueToString)(h)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}t.MapRow=s;class a{constructor(c,h){this.keys=c,this.vals=h,this.keyIndex=0,this.numKeys=c.length}[Symbol.iterator](){return this}next(){const c=this.keyIndex;return c===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(c),n.instance.visit(this.vals,c)]})}}class o{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(c){return c[t.kKeysAsStrings]}has(c,h){return c[t.kKeysAsStrings].includes(h)}getOwnPropertyDescriptor(c,h){if(c[t.kKeysAsStrings].indexOf(h)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(c,h){if(Reflect.has(c,h))return c[h];const A=c[t.kKeysAsStrings].indexOf(h);if(A!==-1){const m=n.instance.visit(Reflect.get(c,t.kVals),A);return Reflect.set(c,h,m),m}}set(c,h,A){const m=c[t.kKeysAsStrings].indexOf(h);return m!==-1?(r.instance.visit(Reflect.get(c,t.kVals),m,A),Reflect.set(c,h,A)):Reflect.has(c,h)?Reflect.set(c,h,A):!1}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[t.kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[t.kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null},[t._kKeysAsStrings]:{writable:!0,enumerable:!1,configurable:!1,value:null}})}(i3)),i3}var Kx;function J_(){if(Kx)return cc;Kx=1,Object.defineProperty(cc,"__esModule",{value:!0}),cc.createElementComparator=cc.wrapIndex=cc.clampRange=void 0;const t=zs(),e=bT(),i=AB(),n=Xr();let r;function s(O,D,B,P){const{length:j=0}=O;let N=typeof D!="number"?0:D,F=typeof B!="number"?j:B;return N<0&&(N=(N%j+j)%j),F<0&&(F=(F%j+j)%j),F<N&&(r=N,N=F,F=r),F>j&&(F=j),P?P(O,N,F):[N,F]}cc.clampRange=s;const a=(O,D)=>O<0?D+O:O;cc.wrapIndex=a;const o=O=>O!==O;function l(O){if(typeof O!=="object"||O===null)return o(O)?o:B=>B===O;if(O instanceof Date){const B=O.valueOf();return P=>P instanceof Date?P.valueOf()===B:!1}return ArrayBuffer.isView(O)?B=>B?(0,n.compareArrayLike)(O,B):!1:O instanceof Map?h(O):Array.isArray(O)?c(O):O instanceof t.Vector?A(O):m(O,!0)}cc.createElementComparator=l;function c(O){const D=[];for(let B=-1,P=O.length;++B<P;)D[B]=l(O[B]);return b(D)}function h(O){let D=-1;const B=[];for(const P of O.values())B[++D]=l(P);return b(B)}function A(O){const D=[];for(let B=-1,P=O.length;++B<P;)D[B]=l(O.get(B));return b(D)}function m(O,D=!1){const B=Object.keys(O);if(!D&&B.length===0)return()=>!1;const P=[];for(let j=-1,N=B.length;++j<N;)P[j]=l(O[B[j]]);return b(P,B)}function b(O,D){return B=>{if(!B||typeof B!="object")return!1;switch(B.constructor){case Array:return S(O,B);case Map:return I(O,B,B.keys());case e.MapRow:case i.StructRow:case Object:case void 0:return I(O,B,D||Object.keys(B))}return B instanceof t.Vector?M(O,B):!1}}function S(O,D){const B=O.length;if(D.length!==B)return!1;for(let P=-1;++P<B;)if(!O[P](D[P]))return!1;return!0}function M(O,D){const B=O.length;if(D.length!==B)return!1;for(let P=-1;++P<B;)if(!O[P](D.get(P)))return!1;return!0}function I(O,D,B){const P=B[Symbol.iterator](),j=D instanceof Map?D.keys():Object.keys(D)[Symbol.iterator](),N=D instanceof Map?D.values():Object.values(D)[Symbol.iterator]();let F=0;const $=O.length;let V=N.next(),Z=P.next(),nt=j.next();for(;F<$&&!Z.done&&!nt.done&&!V.done&&!(Z.value!==nt.value||!O[F](V.value));++F,Z=P.next(),nt=j.next(),V=N.next());return F===$&&Z.done&&nt.done&&V.done?!0:(P.return&&P.return(),j.return&&j.return(),N.return&&N.return(),!1)}return cc}var a3={},lr={},Zx;function d0(){if(Zx)return lr;Zx=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.popcnt_uint32=lr.popcnt_array=lr.popcnt_bit_range=lr.BitIterator=lr.packBools=lr.truncateBitmap=lr.setBool=lr.getBit=lr.getBool=void 0;function t(c,h,A,m){return(A&1<<m)!==0}lr.getBool=t;function e(c,h,A,m){return(A&1<<m)>>m}lr.getBit=e;function i(c,h,A){return A?!!(c[h>>3]|=1<<h%8)||!0:!(c[h>>3]&=~(1<<h%8))&&!1}lr.setBool=i;function n(c,h,A){const m=A.byteLength+7&-8;if(c>0||A.byteLength<m){const b=new Uint8Array(m);return b.set(c%8===0?A.subarray(c>>3):r(new s(A,c,h,null,t)).subarray(0,m)),b}return A}lr.truncateBitmap=n;function r(c){const h=[];let A=0,m=0,b=0;for(const M of c)M&&(b|=1<<m),++m===8&&(h[A++]=b,b=m=0);(A===0||m>0)&&(h[A++]=b);const S=new Uint8Array(h.length+7&-8);return S.set(h),S}lr.packBools=r;class s{constructor(h,A,m,b,S){this.bytes=h,this.length=m,this.context=b,this.get=S,this.bit=A%8,this.byteIndex=A>>3,this.byte=h[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}lr.BitIterator=s;function a(c,h,A){if(A-h<=0)return 0;if(A-h<8){let S=0;for(const M of new s(c,h,A-h,c,e))S+=M;return S}const m=A>>3<<3,b=h+(h%8===0?0:8-h%8);return a(c,h,b)+a(c,m,A)+o(c,b>>3,m-b>>3)}lr.popcnt_bit_range=a;function o(c,h,A){let m=0,b=Math.trunc(h);const S=new DataView(c.buffer,c.byteOffset,c.byteLength),M=A===void 0?c.byteLength:b+A;for(;M-b>=4;)m+=l(S.getUint32(b)),b+=4;for(;M-b>=2;)m+=l(S.getUint16(b)),b+=2;for(;M-b>=1;)m+=l(S.getUint8(b)),b+=1;return m}lr.popcnt_array=o;function l(c){let h=Math.trunc(c);return h=h-(h>>>1&1431655765),h=(h&858993459)+(h>>>2&858993459),(h+(h>>>4)&252645135)*16843009>>>24}return lr.popcnt_uint32=l,lr}var Jx;function Dc(){return Jx||(Jx=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.makeData=t.Data=t.kUnknownNullCount=void 0;const e=zs(),i=nr(),n=Pn(),r=d0();t.kUnknownNullCount=-1;class s{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:m}=this;return n.DataType.isSparseUnion(m)?this.children.some(b=>b.nullable):n.DataType.isDenseUnion(m)?this.children.some(b=>b.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let m=0;const{valueOffsets:b,values:S,nullBitmap:M,typeIds:I}=this;return b&&(m+=b.byteLength),S&&(m+=S.byteLength),M&&(m+=M.byteLength),I&&(m+=I.byteLength),this.children.reduce((O,D)=>O+D.byteLength,m)}get nullCount(){if(n.DataType.isUnion(this.type))return this.children.reduce((S,M)=>S+M.nullCount,0);let m=this._nullCount,b;return m<=t.kUnknownNullCount&&(b=this.nullBitmap)&&(this._nullCount=m=b.length===0?0:this.length-(0,r.popcnt_bit_range)(b,this.offset,this.offset+this.length)),m}constructor(m,b,S,M,I,O=[],D){this.type=m,this.children=O,this.dictionary=D,this.offset=Math.floor(Math.max(b||0,0)),this.length=Math.floor(Math.max(S||0,0)),this._nullCount=Math.floor(Math.max(M||0,-1));let B;I instanceof s?(this.stride=I.stride,this.values=I.values,this.typeIds=I.typeIds,this.nullBitmap=I.nullBitmap,this.valueOffsets=I.valueOffsets):(this.stride=(0,n.strideForType)(m),I&&((B=I[0])&&(this.valueOffsets=B),(B=I[1])&&(this.values=B),(B=I[2])&&(this.nullBitmap=B),(B=I[3])&&(this.typeIds=B)))}getValid(m){const{type:b}=this;if(n.DataType.isUnion(b)){const S=b,M=this.children[S.typeIdToChildIndex[this.typeIds[m]]],I=S.mode===i.UnionMode.Dense?this.valueOffsets[m]:m;return M.getValid(I)}if(this.nullable&&this.nullCount>0){const S=this.offset+m;return(this.nullBitmap[S>>3]&1<<S%8)!==0}return!0}setValid(m,b){let S;const{type:M}=this;if(n.DataType.isUnion(M)){const I=M,O=this.children[I.typeIdToChildIndex[this.typeIds[m]]],D=I.mode===i.UnionMode.Dense?this.valueOffsets[m]:m;S=O.getValid(D),O.setValid(D,b)}else{let{nullBitmap:I}=this;const{offset:O,length:D}=this,B=O+m,P=1<<B%8,j=B>>3;(!I||I.byteLength<=j)&&(I=new Uint8Array((O+D+63&-64)>>3).fill(255),this.nullCount>0?(I.set((0,r.truncateBitmap)(O,D,this.nullBitmap),0),Object.assign(this,{nullBitmap:I})):Object.assign(this,{nullBitmap:I,_nullCount:0}));const N=I[j];S=(N&P)!==0,I[j]=b?N|P:N&~P}return S!==!!b&&(this._nullCount=this.nullCount+(b?-1:1)),b}clone(m=this.type,b=this.offset,S=this.length,M=this._nullCount,I=this,O=this.children){return new s(m,b,S,M,I,O,this.dictionary)}slice(m,b){const{stride:S,typeId:M,children:I}=this,O=+(this._nullCount===0)-1,D=M===16?S:1,B=this._sliceBuffers(m,b,S,M);return this.clone(this.type,this.offset+m,b,O,B,I.length===0||this.valueOffsets?I:this._sliceChildren(I,D*m,D*b))}_changeLengthAndBackfillNullBitmap(m){if(this.typeId===i.Type.Null)return this.clone(this.type,0,m,0);const{length:b,nullCount:S}=this,M=new Uint8Array((m+63&-64)>>3).fill(255,0,b>>3);M[b>>3]=(1<<b-(b&-8))-1,S>0&&M.set((0,r.truncateBitmap)(this.offset,b,this.nullBitmap),0);const I=this.buffers;return I[i.BufferType.VALIDITY]=M,this.clone(this.type,0,m,S+(m-b),I)}_sliceBuffers(m,b,S,M){let I;const{buffers:O}=this;return(I=O[i.BufferType.TYPE])&&(O[i.BufferType.TYPE]=I.subarray(m,m+b)),(I=O[i.BufferType.OFFSET])&&(O[i.BufferType.OFFSET]=I.subarray(m,m+b+1))||(I=O[i.BufferType.DATA])&&(O[i.BufferType.DATA]=M===6?I:I.subarray(S*m,S*(m+b))),O}_sliceChildren(m,b,S){return m.map(M=>M.slice(b,S))}}t.Data=s,s.prototype.children=Object.freeze([]);const a=wa(),o=Xr();class l extends a.Visitor{visit(m){return this.getVisitFn(m.type).call(this,m)}visitNull(m){const{["type"]:b,["offset"]:S=0,["length"]:M=0}=m;return new s(b,S,M,M)}visitBool(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length>>3,["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitInt(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length,["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitFloat(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length,["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitUtf8(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.data),I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toInt32Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,M,I])}visitLargeUtf8(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.data),I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toBigInt64Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,M,I])}visitBinary(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.data),I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toInt32Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,M,I])}visitLargeBinary(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.data),I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toBigInt64Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,M,I])}visitFixedSizeBinary(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitDate(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitTimestamp(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitTime(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitDecimal(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitList(m){const{["type"]:b,["offset"]:S=0,["child"]:M}=m,I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toInt32Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,void 0,I],[M])}visitStruct(m){const{["type"]:b,["offset"]:S=0,["children"]:M=[]}=m,I=(0,o.toUint8Array)(m.nullBitmap),{length:O=M.reduce((B,{length:P})=>Math.max(B,P),0),nullCount:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,void 0,I],M)}visitUnion(m){const{["type"]:b,["offset"]:S=0,["children"]:M=[]}=m,I=(0,o.toArrayBufferView)(b.ArrayType,m.typeIds),{["length"]:O=I.length,["nullCount"]:D=-1}=m;if(n.DataType.isSparseUnion(b))return new s(b,S,O,D,[void 0,void 0,void 0,I],M);const B=(0,o.toInt32Array)(m.valueOffsets);return new s(b,S,O,D,[B,void 0,void 0,I],M)}visitDictionary(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.indices.ArrayType,m.data),{["dictionary"]:O=new e.Vector([new l().visit({type:b.dictionary})])}=m,{["length"]:D=I.length,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[void 0,I,M],[],O)}visitInterval(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitDuration(m){const{["type"]:b,["offset"]:S=0}=m,M=(0,o.toUint8Array)(m.nullBitmap),I=(0,o.toArrayBufferView)(b.ArrayType,m.data),{["length"]:O=I.length,["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,I,M])}visitFixedSizeList(m){const{["type"]:b,["offset"]:S=0,["child"]:M=new l().visit({type:b.valueType})}=m,I=(0,o.toUint8Array)(m.nullBitmap),{["length"]:O=M.length/(0,n.strideForType)(b),["nullCount"]:D=m.nullBitmap?-1:0}=m;return new s(b,S,O,D,[void 0,void 0,I],[M])}visitMap(m){const{["type"]:b,["offset"]:S=0,["child"]:M=new l().visit({type:b.childType})}=m,I=(0,o.toUint8Array)(m.nullBitmap),O=(0,o.toInt32Array)(m.valueOffsets),{["length"]:D=O.length-1,["nullCount"]:B=m.nullBitmap?-1:0}=m;return new s(b,S,D,B,[O,void 0,I],[M])}}const c=new l;function h(A){return c.visit(A)}t.makeData=h}(a3)),a3}var Vn={},tN;function gB(){if(tN)return Vn;tN=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.wrapChunkedIndexOf=Vn.wrapChunkedCall2=Vn.wrapChunkedCall1=Vn.isChunkedValid=Vn.binarySearch=Vn.sliceChunks=Vn.computeChunkOffsets=Vn.computeChunkNullCounts=Vn.computeChunkNullable=Vn.ChunkedIterator=void 0;class t{constructor(A=0,m){this.numChunks=A,this.getChunkIterator=m,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const A=this.chunkIterator.next();if(!A.done)return A;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}Vn.ChunkedIterator=t;function e(h){return h.some(A=>A.nullable)}Vn.computeChunkNullable=e;function i(h){return h.reduce((A,m)=>A+m.nullCount,0)}Vn.computeChunkNullCounts=i;function n(h){return h.reduce((A,m,b)=>(A[b+1]=A[b]+m.length,A),new Uint32Array(h.length+1))}Vn.computeChunkOffsets=n;function r(h,A,m,b){const S=[];for(let M=-1,I=h.length;++M<I;){const O=h[M],D=A[M],{length:B}=O;if(D>=b)break;if(m>=D+B)continue;if(D>=m&&D+B<=b){S.push(O);continue}const P=Math.max(0,m-D),j=Math.min(b-D,B);S.push(O.slice(P,j-P))}return S.length===0&&S.push(h[0].slice(0,0)),S}Vn.sliceChunks=r;function s(h,A,m,b){let S=0,M=0,I=A.length-1;do{if(S>=I-1)return m<A[I]?b(h,S,m-A[S]):null;M=S+Math.trunc((I-S)*.5),m<A[M]?I=M:S=M}while(S<I)}Vn.binarySearch=s;function a(h,A){return h.getValid(A)}Vn.isChunkedValid=a;function o(h){function A(m,b,S){return h(m[b],S)}return function(m){const b=this.data;return s(b,this._offsets,m,A)}}Vn.wrapChunkedCall1=o;function l(h){let A;function m(b,S,M){return h(b[S],M,A)}return function(b,S){const M=this.data;A=S;const I=s(M,this._offsets,b,m);return A=void 0,I}}Vn.wrapChunkedCall2=l;function c(h){let A;function m(b,S,M){let I=M,O=0,D=0;for(let B=S-1,P=b.length;++B<P;){const j=b[B];if(~(O=h(j,A,I)))return D+O;I=0,D+=j.length}return-1}return function(b,S){A=b;const M=this.data,I=typeof S!="number"?m(M,0,0):s(M,this._offsets,S,m);return A=void 0,I}}return Vn.wrapChunkedIndexOf=c,Vn}var Lh={},eN;function yB(){if(eN)return Lh;eN=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.instance=Lh.IndexOfVisitor=void 0;const t=nr(),e=wa(),i=f0(),n=d0(),r=J_();class s extends e.Visitor{}Lh.IndexOfVisitor=s;function a(h,A){return A===null&&h.length>0?0:-1}function o(h,A){const{nullBitmap:m}=h;if(!m||h.nullCount<=0)return-1;let b=0;for(const S of new n.BitIterator(m,h.offset+(A||0),h.length,m,n.getBool)){if(!S)return b;++b}return-1}function l(h,A,m){if(A===void 0)return-1;if(A===null)switch(h.typeId){case t.Type.Union:break;case t.Type.Dictionary:break;default:return o(h,m)}const b=i.instance.getVisitFn(h),S=(0,r.createElementComparator)(A);for(let M=(m||0)-1,I=h.length;++M<I;)if(S(b(h,M)))return M;return-1}function c(h,A,m){const b=i.instance.getVisitFn(h),S=(0,r.createElementComparator)(A);for(let M=(m||0)-1,I=h.length;++M<I;)if(S(b(h,M)))return M;return-1}return s.prototype.visitNull=a,s.prototype.visitBool=l,s.prototype.visitInt=l,s.prototype.visitInt8=l,s.prototype.visitInt16=l,s.prototype.visitInt32=l,s.prototype.visitInt64=l,s.prototype.visitUint8=l,s.prototype.visitUint16=l,s.prototype.visitUint32=l,s.prototype.visitUint64=l,s.prototype.visitFloat=l,s.prototype.visitFloat16=l,s.prototype.visitFloat32=l,s.prototype.visitFloat64=l,s.prototype.visitUtf8=l,s.prototype.visitLargeUtf8=l,s.prototype.visitBinary=l,s.prototype.visitLargeBinary=l,s.prototype.visitFixedSizeBinary=l,s.prototype.visitDate=l,s.prototype.visitDateDay=l,s.prototype.visitDateMillisecond=l,s.prototype.visitTimestamp=l,s.prototype.visitTimestampSecond=l,s.prototype.visitTimestampMillisecond=l,s.prototype.visitTimestampMicrosecond=l,s.prototype.visitTimestampNanosecond=l,s.prototype.visitTime=l,s.prototype.visitTimeSecond=l,s.prototype.visitTimeMillisecond=l,s.prototype.visitTimeMicrosecond=l,s.prototype.visitTimeNanosecond=l,s.prototype.visitDecimal=l,s.prototype.visitList=l,s.prototype.visitStruct=l,s.prototype.visitUnion=l,s.prototype.visitDenseUnion=c,s.prototype.visitSparseUnion=c,s.prototype.visitDictionary=l,s.prototype.visitInterval=l,s.prototype.visitIntervalDayTime=l,s.prototype.visitIntervalYearMonth=l,s.prototype.visitDuration=l,s.prototype.visitDurationSecond=l,s.prototype.visitDurationMillisecond=l,s.prototype.visitDurationMicrosecond=l,s.prototype.visitDurationNanosecond=l,s.prototype.visitFixedSizeList=l,s.prototype.visitMap=l,Lh.instance=new s,Lh}var Uh={},iN;function pB(){if(iN)return Uh;iN=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.instance=Uh.IteratorVisitor=void 0;const t=wa(),e=nr(),i=Pn(),n=gB();class r extends t.Visitor{}Uh.IteratorVisitor=r;function s(o){const{type:l}=o;if(o.nullCount===0&&o.stride===1&&(i.DataType.isInt(l)&&l.bitWidth!==64||i.DataType.isTime(l)&&l.bitWidth!==64||i.DataType.isFloat(l)&&l.precision!==e.Precision.HALF))return new n.ChunkedIterator(o.data.length,h=>{const A=o.data[h];return A.values.subarray(0,A.length)[Symbol.iterator]()});let c=0;return new n.ChunkedIterator(o.data.length,h=>{const m=o.data[h].length,b=o.slice(c,c+m);return c+=m,new a(b)})}class a{constructor(l){this.vector=l,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}return r.prototype.visitNull=s,r.prototype.visitBool=s,r.prototype.visitInt=s,r.prototype.visitInt8=s,r.prototype.visitInt16=s,r.prototype.visitInt32=s,r.prototype.visitInt64=s,r.prototype.visitUint8=s,r.prototype.visitUint16=s,r.prototype.visitUint32=s,r.prototype.visitUint64=s,r.prototype.visitFloat=s,r.prototype.visitFloat16=s,r.prototype.visitFloat32=s,r.prototype.visitFloat64=s,r.prototype.visitUtf8=s,r.prototype.visitLargeUtf8=s,r.prototype.visitBinary=s,r.prototype.visitLargeBinary=s,r.prototype.visitFixedSizeBinary=s,r.prototype.visitDate=s,r.prototype.visitDateDay=s,r.prototype.visitDateMillisecond=s,r.prototype.visitTimestamp=s,r.prototype.visitTimestampSecond=s,r.prototype.visitTimestampMillisecond=s,r.prototype.visitTimestampMicrosecond=s,r.prototype.visitTimestampNanosecond=s,r.prototype.visitTime=s,r.prototype.visitTimeSecond=s,r.prototype.visitTimeMillisecond=s,r.prototype.visitTimeMicrosecond=s,r.prototype.visitTimeNanosecond=s,r.prototype.visitDecimal=s,r.prototype.visitList=s,r.prototype.visitStruct=s,r.prototype.visitUnion=s,r.prototype.visitDenseUnion=s,r.prototype.visitSparseUnion=s,r.prototype.visitDictionary=s,r.prototype.visitInterval=s,r.prototype.visitIntervalDayTime=s,r.prototype.visitIntervalYearMonth=s,r.prototype.visitDuration=s,r.prototype.visitDurationSecond=s,r.prototype.visitDurationMillisecond=s,r.prototype.visitDurationMicrosecond=s,r.prototype.visitDurationNanosecond=s,r.prototype.visitFixedSizeList=s,r.prototype.visitMap=s,Uh.instance=new r,Uh}var nN;function zs(){if(nN)return xh;nN=1;var t;Object.defineProperty(xh,"__esModule",{value:!0}),xh.makeVector=xh.Vector=void 0;const e=nr(),i=J_(),n=Pn(),r=Dc(),s=gB(),a=f0(),o=Qa(),l=yB(),c=pB(),h={},A={};class m{constructor(D){var B,P,j;const N=D[0]instanceof m?D.flatMap($=>$.data):D;if(N.length===0||N.some($=>!($ instanceof r.Data)))throw new TypeError("Vector constructor expects an Array of Data instances.");const F=(B=N[0])===null||B===void 0?void 0:B.type;switch(N.length){case 0:this._offsets=[0];break;case 1:{const{get:$,set:V,indexOf:Z}=h[F.typeId],nt=N[0];this.isValid=X=>(0,s.isChunkedValid)(nt,X),this.get=X=>$(nt,X),this.set=(X,bt)=>V(nt,X,bt),this.indexOf=X=>Z(nt,X),this._offsets=[0,nt.length];break}default:Object.setPrototypeOf(this,A[F.typeId]),this._offsets=(0,s.computeChunkOffsets)(N);break}this.data=N,this.type=F,this.stride=(0,n.strideForType)(F),this.numChildren=(j=(P=F.children)===null||P===void 0?void 0:P.length)!==null&&j!==void 0?j:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((D,B)=>D+B.byteLength,0)}get nullable(){return(0,s.computeChunkNullable)(this.data)}get nullCount(){return(0,s.computeChunkNullCounts)(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${e.Type[this.type.typeId]}Vector`}isValid(D){return!1}get(D){return null}at(D){return this.get((0,i.wrapIndex)(D,this.length))}set(D,B){}indexOf(D,B){return-1}includes(D,B){return this.indexOf(D,B)>-1}[Symbol.iterator](){return c.instance.visit(this)}concat(...D){return new m(this.data.concat(D.flatMap(B=>B.data).flat(Number.POSITIVE_INFINITY)))}slice(D,B){return new m((0,i.clampRange)(this,D,B,({data:P,_offsets:j},N,F)=>(0,s.sliceChunks)(P,j,N,F)))}toJSON(){return[...this]}toArray(){const{type:D,data:B,length:P,stride:j,ArrayType:N}=this;switch(D.typeId){case e.Type.Int:case e.Type.Float:case e.Type.Decimal:case e.Type.Time:case e.Type.Timestamp:switch(B.length){case 0:return new N;case 1:return B[0].values.subarray(0,P*j);default:return B.reduce((F,{values:$,length:V})=>(F.array.set($.subarray(0,V*j),F.offset),F.offset+=V*j,F),{array:new N(P*j),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(D){var B;return this.getChildAt((B=this.type.children)===null||B===void 0?void 0:B.findIndex(P=>P.name===D))}getChildAt(D){return D>-1&&D<this.numChildren?new m(this.data.map(({children:B})=>B[D])):null}get isMemoized(){return n.DataType.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(n.DataType.isDictionary(this.type)){const D=new b(this.data[0].dictionary),B=this.data.map(P=>{const j=P.clone();return j.dictionary=D,j});return new m(B)}return new b(this)}unmemoize(){if(n.DataType.isDictionary(this.type)&&this.isMemoized){const D=this.data[0].dictionary.unmemoize(),B=this.data.map(P=>{const j=P.clone();return j.dictionary=D,j});return new m(B)}return this}}xh.Vector=m,t=Symbol.toStringTag,m[t]=(O=>{O.type=n.DataType.prototype,O.data=[],O.length=0,O.stride=1,O.numChildren=0,O._offsets=new Uint32Array([0]),O[Symbol.isConcatSpreadable]=!0;const D=Object.keys(e.Type).map(B=>e.Type[B]).filter(B=>typeof B=="number"&&B!==e.Type.NONE);for(const B of D){const P=a.instance.getVisitFnByTypeId(B),j=o.instance.getVisitFnByTypeId(B),N=l.instance.getVisitFnByTypeId(B);h[B]={get:P,set:j,indexOf:N},A[B]=Object.create(O,{isValid:{value:(0,s.wrapChunkedCall1)(s.isChunkedValid)},get:{value:(0,s.wrapChunkedCall1)(a.instance.getVisitFnByTypeId(B))},set:{value:(0,s.wrapChunkedCall2)(o.instance.getVisitFnByTypeId(B))},indexOf:{value:(0,s.wrapChunkedIndexOf)(l.instance.getVisitFnByTypeId(B))}})}return"Vector"})(m.prototype);class b extends m{constructor(D){super(D.data);const B=this.get,P=this.set,j=this.slice,N=new Array(this.length);Object.defineProperty(this,"get",{value(F){const $=N[F];if($!==void 0)return $;const V=B.call(this,F);return N[F]=V,V}}),Object.defineProperty(this,"set",{value(F,$){P.call(this,F,$),N[F]=$}}),Object.defineProperty(this,"slice",{value:(F,$)=>new b(j.call(this,F,$))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new m(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}const S=Pn();function M(O){if(O){if(O instanceof r.Data)return new m([O]);if(O instanceof m)return new m(O.data);if(O.type instanceof n.DataType)return new m([(0,r.makeData)(O)]);if(Array.isArray(O))return new m(O.flatMap(D=>I(D)));if(ArrayBuffer.isView(O)){O instanceof DataView&&(O=new Uint8Array(O.buffer));const D={offset:0,length:O.length,nullCount:-1,data:O};if(O instanceof Int8Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Int8}))]);if(O instanceof Int16Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Int16}))]);if(O instanceof Int32Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Int32}))]);if(O instanceof BigInt64Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Int64}))]);if(O instanceof Uint8Array||O instanceof Uint8ClampedArray)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Uint8}))]);if(O instanceof Uint16Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Uint16}))]);if(O instanceof Uint32Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Uint32}))]);if(O instanceof BigUint64Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Uint64}))]);if(O instanceof Float32Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Float32}))]);if(O instanceof Float64Array)return new m([(0,r.makeData)(Object.assign(Object.assign({},D),{type:new S.Float64}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}xh.makeVector=M;function I(O){return O instanceof r.Data?[O]:O instanceof m?O.data:M(O).data}return xh}var Qp={},rN;function eit(){if(rN)return Qp;rN=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.createIsValidFunction=void 0;const t=mT();function e(n){if(!n||n.length<=0)return function(o){return!0};let r="";const s=n.filter(a=>a===a);return s.length>0&&(r=`
    switch (x) {${s.map(a=>`
        case ${i(a)}:`).join("")}
            return false;
    }`),n.length!==s.length&&(r=`if (x !== x) return false;
${r}`),new Function("x",`${r}
return true;`)}Qp.createIsValidFunction=e;function i(n){return typeof n!="bigint"?(0,t.valueToString)(n):`${(0,t.valueToString)(n)}n`}return Qp}var yo={},sN;function Hu(){if(sN)return yo;sN=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.OffsetsBufferBuilder=yo.BitmapBufferBuilder=yo.DataBufferBuilder=yo.BufferBuilder=void 0;const t=Xr();function e(o,l){const c=Math.ceil(o)*l-1;return(c-c%64+64||64)/l}function i(o,l=0){return o.length>=l?o.subarray(0,l):(0,t.memcpy)(new o.constructor(l),o,0)}class n{constructor(l,c=0,h=1){this.length=Math.ceil(c/h),this.buffer=new l(this.length),this.stride=h,this.BYTES_PER_ELEMENT=l.BYTES_PER_ELEMENT,this.ArrayType=l}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(l,c){return this}append(l){return this.set(this.length,l)}reserve(l){if(l>0){this.length+=l;const c=this.stride,h=this.length*c,A=this.buffer.length;h>=A&&this._resize(A===0?e(h*1,this.BYTES_PER_ELEMENT):e(h*2,this.BYTES_PER_ELEMENT))}return this}flush(l=this.length){l=e(l*this.stride,this.BYTES_PER_ELEMENT);const c=i(this.buffer,l);return this.clear(),c}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(l){return this.buffer=i(this.buffer,l)}}yo.BufferBuilder=n;class r extends n{last(){return this.get(this.length-1)}get(l){return this.buffer[l]}set(l,c){return this.reserve(l-this.length+1),this.buffer[l*this.stride]=c,this}}yo.DataBufferBuilder=r;class s extends r{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(l){return this.buffer[l>>3]>>l%8&1}set(l,c){const{buffer:h}=this.reserve(l-this.length+1),A=l>>3,m=l%8,b=h[A]>>m&1;return c?b===0&&(h[A]|=1<<m,++this.numValid):b===1&&(h[A]&=~(1<<m),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}yo.BitmapBufferBuilder=s;class a extends r{constructor(l){super(l.OffsetArrayType,1,1)}append(l){return this.set(this.length-1,l)}set(l,c){const h=this.length-1,A=this.reserve(l-h+1).buffer;return h<l++&&h>=0&&A.fill(A[h],h,l),A[l]=A[l-1]+c,this}flush(l=this.length-1){return l>this.length&&this.set(l-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(l+1)}}return yo.OffsetsBufferBuilder=a,yo}var aN;function Yn(){if(aN)return sc;aN=1,Object.defineProperty(sc,"__esModule",{value:!0}),sc.VariableWidthBuilder=sc.FixedWidthBuilder=sc.Builder=void 0;const t=zs(),e=Dc(),i=bT(),n=Pn(),r=eit(),s=Hu();class a{static throughNode(h){throw new Error('"throughNode" not available in this environment')}static throughDOM(h){throw new Error('"throughDOM" not available in this environment')}constructor({type:h,nullValues:A}){this.length=0,this.finished=!1,this.type=h,this.children=[],this.nullValues=A,this.stride=(0,n.strideForType)(h),this._nulls=new s.BitmapBufferBuilder,A&&A.length>0&&(this._isValid=(0,r.createIsValidFunction)(A))}toVector(){return new t.Vector([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let h=0;const{_offsets:A,_values:m,_nulls:b,_typeIds:S,children:M}=this;return A&&(h+=A.byteLength),m&&(h+=m.byteLength),b&&(h+=b.byteLength),S&&(h+=S.byteLength),M.reduce((I,O)=>I+O.byteLength,h)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let h=0;return this._offsets&&(h+=this._offsets.reservedByteLength),this._values&&(h+=this._values.reservedByteLength),this._nulls&&(h+=this._nulls.reservedByteLength),this._typeIds&&(h+=this._typeIds.reservedByteLength),this.children.reduce((A,m)=>A+m.reservedByteLength,h)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(h){return this.set(this.length,h)}isValid(h){return this._isValid(h)}set(h,A){return this.setValid(h,this.isValid(A))&&this.setValue(h,A),this}setValue(h,A){this._setValue(this,h,A)}setValid(h,A){return this.length=this._nulls.set(h,+A).length,A}addChild(h,A=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(h){return this.children[h]||null}flush(){let h,A,m,b;const{type:S,length:M,nullCount:I,_typeIds:O,_offsets:D,_values:B,_nulls:P}=this;(A=O==null?void 0:O.flush(M))?b=D==null?void 0:D.flush(M):(b=D==null?void 0:D.flush(M))?h=B==null?void 0:B.flush(D.last()):h=B==null?void 0:B.flush(M),I>0&&(m=P==null?void 0:P.flush(M));const j=this.children.map(N=>N.flush());return this.clear(),(0,e.makeData)({type:S,length:M,nullCount:I,children:j,child:j[0],data:h,typeIds:A,nullBitmap:m,valueOffsets:b})}finish(){this.finished=!0;for(const h of this.children)h.finish();return this}clear(){var h,A,m,b;this.length=0,(h=this._nulls)===null||h===void 0||h.clear(),(A=this._values)===null||A===void 0||A.clear(),(m=this._offsets)===null||m===void 0||m.clear(),(b=this._typeIds)===null||b===void 0||b.clear();for(const S of this.children)S.clear();return this}}sc.Builder=a,a.prototype.length=1,a.prototype.stride=1,a.prototype.children=null,a.prototype.finished=!1,a.prototype.nullValues=null,a.prototype._isValid=()=>!0;class o extends a{constructor(h){super(h),this._values=new s.DataBufferBuilder(this.ArrayType,0,this.stride)}setValue(h,A){const m=this._values;return m.reserve(h-m.length+1),super.setValue(h,A)}}sc.FixedWidthBuilder=o;class l extends a{constructor(h){super(h),this._pendingLength=0,this._offsets=new s.OffsetsBufferBuilder(h.type)}setValue(h,A){const m=this._pending||(this._pending=new Map),b=m.get(h);b&&(this._pendingLength-=b.length),this._pendingLength+=A instanceof i.MapRow?A[i.kKeys].length:A.length,m.set(h,A)}setValid(h,A){return super.setValid(h,A)?!0:((this._pending||(this._pending=new Map)).set(h,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const h=this._pending,A=this._pendingLength;return this._pendingLength=0,this._pending=void 0,h&&h.size>0&&this._flushPending(h,A),this}}return sc.VariableWidthBuilder=l,sc}var la={},kh={},Kp={},oN;function g9(){if(oN)return Kp;oN=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.Block=void 0;class t{constructor(){this.bb=null,this.bb_pos=0}__init(i,n){return this.bb_pos=i,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(i,n,r,s){return i.prep(8,24),i.writeInt64(BigInt(s??0)),i.pad(4),i.writeInt32(r),i.writeInt64(BigInt(n??0)),i.offset()}}return Kp.Block=t,Kp}var Zp={},lN;function iit(){if(lN)return Zp;lN=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.Footer=void 0;const t=Re,e=g9(),i=K_(),n=ZE(),r=hB();class s{constructor(){this.bb=null,this.bb_pos=0}__init(o,l){return this.bb_pos=o,this.bb=l,this}static getRootAsFooter(o,l){return(l||new s).__init(o.readInt32(o.position())+o.position(),o)}static getSizePrefixedRootAsFooter(o,l){return o.setPosition(o.position()+t.SIZE_PREFIX_LENGTH),(l||new s).__init(o.readInt32(o.position())+o.position(),o)}version(){const o=this.bb.__offset(this.bb_pos,4);return o?this.bb.readInt16(this.bb_pos+o):n.MetadataVersion.V1}schema(o){const l=this.bb.__offset(this.bb_pos,6);return l?(o||new r.Schema).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dictionaries(o,l){const c=this.bb.__offset(this.bb_pos,8);return c?(l||new e.Block).__init(this.bb.__vector(this.bb_pos+c)+o*24,this.bb):null}dictionariesLength(){const o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__vector_len(this.bb_pos+o):0}recordBatches(o,l){const c=this.bb.__offset(this.bb_pos,10);return c?(l||new e.Block).__init(this.bb.__vector(this.bb_pos+c)+o*24,this.bb):null}recordBatchesLength(){const o=this.bb.__offset(this.bb_pos,10);return o?this.bb.__vector_len(this.bb_pos+o):0}customMetadata(o,l){const c=this.bb.__offset(this.bb_pos,12);return c?(l||new i.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+c)+o*4),this.bb):null}customMetadataLength(){const o=this.bb.__offset(this.bb_pos,12);return o?this.bb.__vector_len(this.bb_pos+o):0}static startFooter(o){o.startObject(5)}static addVersion(o,l){o.addFieldInt16(0,l,n.MetadataVersion.V1)}static addSchema(o,l){o.addFieldOffset(1,l,0)}static addDictionaries(o,l){o.addFieldOffset(2,l,0)}static startDictionariesVector(o,l){o.startVector(24,l,8)}static addRecordBatches(o,l){o.addFieldOffset(3,l,0)}static startRecordBatchesVector(o,l){o.startVector(24,l,8)}static addCustomMetadata(o,l){o.addFieldOffset(4,l,0)}static createCustomMetadataVector(o,l){o.startVector(4,l.length,4);for(let c=l.length-1;c>=0;c--)o.addOffset(l[c]);return o.endVector()}static startCustomMetadataVector(o,l){o.startVector(4,l,4)}static endFooter(o){return o.endObject()}static finishFooterBuffer(o,l){o.finish(l)}static finishSizePrefixedFooterBuffer(o,l){o.finish(l,void 0,!0)}}return Zp.Footer=s,Zp}var jh={},cN;function Ma(){if(cN)return jh;cN=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.Field=jh.Schema=void 0;const t=nr(),e=Pn();class i{constructor(o=[],l,c,h=t.MetadataVersion.V5){this.fields=o||[],this.metadata=l||new Map,c||(c=s(this.fields)),this.dictionaries=c,this.metadataVersion=h}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(o=>o.name)}toString(){return`Schema<{ ${this.fields.map((o,l)=>`${l}: ${o}`).join(", ")} }>`}select(o){const l=new Set(o),c=this.fields.filter(h=>l.has(h.name));return new i(c,this.metadata)}selectAt(o){const l=o.map(c=>this.fields[c]).filter(Boolean);return new i(l,this.metadata)}assign(...o){const l=o[0]instanceof i?o[0]:Array.isArray(o[0])?new i(o[0]):new i(o),c=[...this.fields],h=r(r(new Map,this.metadata),l.metadata),A=l.fields.filter(b=>{const S=c.findIndex(M=>M.name===b.name);return~S?(c[S]=b.clone({metadata:r(r(new Map,c[S].metadata),b.metadata)}))&&!1:!0}),m=s(A,new Map);return new i([...c,...A],h,new Map([...this.dictionaries,...m]))}}jh.Schema=i,i.prototype.fields=null,i.prototype.metadata=null,i.prototype.dictionaries=null;class n{static new(...o){let[l,c,h,A]=o;return o[0]&&typeof o[0]=="object"&&({name:l}=o[0],c===void 0&&(c=o[0].type),h===void 0&&(h=o[0].nullable),A===void 0&&(A=o[0].metadata)),new n(`${l}`,c,h,A)}constructor(o,l,c=!1,h){this.name=o,this.type=l,this.nullable=c,this.metadata=h||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...o){let[l,c,h,A]=o;return!o[0]||typeof o[0]!="object"?[l=this.name,c=this.type,h=this.nullable,A=this.metadata]=o:{name:l=this.name,type:c=this.type,nullable:h=this.nullable,metadata:A=this.metadata}=o[0],n.new(l,c,h,A)}}jh.Field=n,n.prototype.type=null,n.prototype.name=null,n.prototype.nullable=null,n.prototype.metadata=null;function r(a,o){return new Map([...a||new Map,...o||new Map])}function s(a,o=new Map){for(let l=-1,c=a.length;++l<c;){const A=a[l].type;if(e.DataType.isDictionary(A)){if(!o.has(A.id))o.set(A.id,A.dictionary);else if(o.get(A.id)!==A.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}A.children&&A.children.length>0&&s(A.children,o)}return o}return jh}var uN;function y9(){if(uN)return kh;uN=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.FileBlock=kh.Footer=void 0;const t=g9(),e=iit(),i=Re;var n=i.Builder,r=i.ByteBuffer;const s=Ma(),a=nr(),o=Xr(),l=zf();class c{static decode(b){b=new r((0,o.toUint8Array)(b));const S=e.Footer.getRootAsFooter(b),M=s.Schema.decode(S.schema(),new Map,S.version());return new h(M,S)}static encode(b){const S=new n,M=s.Schema.encode(S,b.schema);e.Footer.startRecordBatchesVector(S,b.numRecordBatches);for(const D of[...b.recordBatches()].slice().reverse())A.encode(S,D);const I=S.endVector();e.Footer.startDictionariesVector(S,b.numDictionaries);for(const D of[...b.dictionaryBatches()].slice().reverse())A.encode(S,D);const O=S.endVector();return e.Footer.startFooter(S),e.Footer.addSchema(S,M),e.Footer.addVersion(S,a.MetadataVersion.V5),e.Footer.addRecordBatches(S,I),e.Footer.addDictionaries(S,O),e.Footer.finishFooterBuffer(S,e.Footer.endFooter(S)),S.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(b,S=a.MetadataVersion.V5,M,I){this.schema=b,this.version=S,M&&(this._recordBatches=M),I&&(this._dictionaryBatches=I)}*recordBatches(){for(let b,S=-1,M=this.numRecordBatches;++S<M;)(b=this.getRecordBatch(S))&&(yield b)}*dictionaryBatches(){for(let b,S=-1,M=this.numDictionaries;++S<M;)(b=this.getDictionaryBatch(S))&&(yield b)}getRecordBatch(b){return b>=0&&b<this.numRecordBatches&&this._recordBatches[b]||null}getDictionaryBatch(b){return b>=0&&b<this.numDictionaries&&this._dictionaryBatches[b]||null}}kh.Footer=c;class h extends c{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(b,S){super(b,S.version()),this._footer=S}getRecordBatch(b){if(b>=0&&b<this.numRecordBatches){const S=this._footer.recordBatches(b);if(S)return A.decode(S)}return null}getDictionaryBatch(b){if(b>=0&&b<this.numDictionaries){const S=this._footer.dictionaries(b);if(S)return A.decode(S)}return null}}class A{static decode(b){return new A(b.metaDataLength(),b.bodyLength(),b.offset())}static encode(b,S){const{metaDataLength:M}=S,I=BigInt(S.offset),O=BigInt(S.bodyLength);return t.Block.createBlock(b,I,M,O)}constructor(b,S,M){this.metaDataLength=b,this.offset=(0,l.bigIntToNumber)(M),this.bodyLength=(0,l.bigIntToNumber)(S)}}return kh.FileBlock=A,kh}var uc={},o3={},hN;function vT(){return hN||(hN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncQueue=t.ReadableInterop=t.ArrowJSON=t.ITERATOR_DONE=void 0;const e=Bn,i=yT();t.ITERATOR_DONE=Object.freeze({done:!0,value:void 0});class n{constructor(o){this._json=o}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}t.ArrowJSON=n;class r{tee(){return this._getDOMStream().tee()}pipe(o,l){return this._getNodeStream().pipe(o,l)}pipeTo(o,l){return this._getDOMStream().pipeTo(o,l)}pipeThrough(o,l){return this._getDOMStream().pipeThrough(o,l)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}t.ReadableInterop=r;class s extends r{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(o=>this._closedPromiseResolve=o)}get closed(){return this._closedPromise}cancel(o){return e.__awaiter(this,void 0,void 0,function*(){yield this.return(o)})}write(o){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(o):this.resolvers.shift().resolve({done:!1,value:o}))}abort(o){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:o}:this.resolvers.shift().reject({done:!0,value:o}))}close(){if(this._closedPromiseResolve){const{resolvers:o}=this;for(;o.length>0;)o.shift().resolve(t.ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(o){return i.default.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,o)}toNodeStream(o){return i.default.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,o)}throw(o){return e.__awaiter(this,void 0,void 0,function*(){return yield this.abort(o),t.ITERATOR_DONE})}return(o){return e.__awaiter(this,void 0,void 0,function*(){return yield this.close(),t.ITERATOR_DONE})}read(o){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(o,"read")).value})}peek(o){return e.__awaiter(this,void 0,void 0,function*(){return(yield this.next(o,"peek")).value})}next(...o){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((l,c)=>{this.resolvers.push({resolve:l,reject:c})}):Promise.resolve(t.ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}t.AsyncQueue=s}(o3)),o3}var fN;function Vf(){if(fN)return uc;fN=1,Object.defineProperty(uc,"__esModule",{value:!0}),uc.AsyncByteStream=uc.ByteStream=uc.AsyncByteQueue=void 0;const t=Bn,e=yT(),i=Lf(),n=vT(),r=Xr(),s=Uf();class a extends n.AsyncQueue{write(m){if((m=(0,r.toUint8Array)(m)).byteLength>0)return super.write(m)}toString(m=!1){return m?(0,i.decodeUtf8)(this.toUint8Array(!0)):this.toUint8Array(!1).then(i.decodeUtf8)}toUint8Array(m=!1){return m?(0,r.joinUint8Arrays)(this._values)[0]:t.__awaiter(this,void 0,void 0,function*(){var b,S,M,I;const O=[];let D=0;try{for(var B=!0,P=t.__asyncValues(this),j;j=yield P.next(),b=j.done,!b;B=!0){I=j.value,B=!1;const N=I;O.push(N),D+=N.byteLength}}catch(N){S={error:N}}finally{try{!B&&!b&&(M=P.return)&&(yield M.call(P))}finally{if(S)throw S.error}}return(0,r.joinUint8Arrays)(O,D)[0]})}}uc.AsyncByteQueue=a;class o{constructor(m){m&&(this.source=new c(e.default.fromIterable(m)))}[Symbol.iterator](){return this}next(m){return this.source.next(m)}throw(m){return this.source.throw(m)}return(m){return this.source.return(m)}peek(m){return this.source.peek(m)}read(m){return this.source.read(m)}}uc.ByteStream=o;class l{constructor(m){m instanceof l?this.source=m.source:m instanceof a?this.source=new h(e.default.fromAsyncIterable(m)):(0,s.isReadableNodeStream)(m)?this.source=new h(e.default.fromNodeStream(m)):(0,s.isReadableDOMStream)(m)?this.source=new h(e.default.fromDOMStream(m)):(0,s.isFetchResponse)(m)?this.source=new h(e.default.fromDOMStream(m.body)):(0,s.isIterable)(m)?this.source=new h(e.default.fromIterable(m)):(0,s.isPromise)(m)?this.source=new h(e.default.fromAsyncIterable(m)):(0,s.isAsyncIterable)(m)&&(this.source=new h(e.default.fromAsyncIterable(m)))}[Symbol.asyncIterator](){return this}next(m){return this.source.next(m)}throw(m){return this.source.throw(m)}return(m){return this.source.return(m)}get closed(){return this.source.closed}cancel(m){return this.source.cancel(m)}peek(m){return this.source.peek(m)}read(m){return this.source.read(m)}}uc.AsyncByteStream=l;class c{constructor(m){this.source=m}cancel(m){this.return(m)}peek(m){return this.next(m,"peek").value}read(m){return this.next(m,"read").value}next(m,b="read"){return this.source.next({cmd:b,size:m})}throw(m){return Object.create(this.source.throw&&this.source.throw(m)||n.ITERATOR_DONE)}return(m){return Object.create(this.source.return&&this.source.return(m)||n.ITERATOR_DONE)}}class h{constructor(m){this.source=m,this._closedPromise=new Promise(b=>this._closedPromiseResolve=b)}cancel(m){return t.__awaiter(this,void 0,void 0,function*(){yield this.return(m)})}get closed(){return this._closedPromise}read(m){return t.__awaiter(this,void 0,void 0,function*(){return(yield this.next(m,"read")).value})}peek(m){return t.__awaiter(this,void 0,void 0,function*(){return(yield this.next(m,"peek")).value})}next(m){return t.__awaiter(this,arguments,void 0,function*(b,S="read"){return yield this.source.next({cmd:S,size:b})})}throw(m){return t.__awaiter(this,void 0,void 0,function*(){const b=this.source.throw&&(yield this.source.throw(m))||n.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(b)})}return(m){return t.__awaiter(this,void 0,void 0,function*(){const b=this.source.return&&(yield this.source.return(m))||n.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(b)})}}return uc}var zh={},dN;function p9(){if(dN)return zh;dN=1,Object.defineProperty(zh,"__esModule",{value:!0}),zh.AsyncRandomAccessFile=zh.RandomAccessFile=void 0;const t=Bn,e=Vf(),i=Xr();class n extends e.ByteStream{constructor(a,o){super(),this.position=0,this.buffer=(0,i.toUint8Array)(a),this.size=o===void 0?this.buffer.byteLength:o}readInt32(a){const{buffer:o,byteOffset:l}=this.readAt(a,4);return new DataView(o,l).getInt32(0,!0)}seek(a){return this.position=Math.min(a,this.size),a<this.size}read(a){const{buffer:o,size:l,position:c}=this;return o&&c<l?(typeof a!="number"&&(a=Number.POSITIVE_INFINITY),this.position=Math.min(l,c+Math.min(l-c,a)),o.subarray(c,this.position)):null}readAt(a,o){const l=this.buffer,c=Math.min(this.size,a+o);return l?l.subarray(a,c):new Uint8Array(o)}close(){this.buffer&&(this.buffer=null)}throw(a){return this.close(),{done:!0,value:a}}return(a){return this.close(),{done:!0,value:a}}}zh.RandomAccessFile=n;class r extends e.AsyncByteStream{constructor(a,o){super(),this.position=0,this._handle=a,typeof o=="number"?this.size=o:this._pending=t.__awaiter(this,void 0,void 0,function*(){this.size=(yield a.stat()).size,delete this._pending})}readInt32(a){return t.__awaiter(this,void 0,void 0,function*(){const{buffer:o,byteOffset:l}=yield this.readAt(a,4);return new DataView(o,l).getInt32(0,!0)})}seek(a){return t.__awaiter(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(a,this.size),a<this.size})}read(a){return t.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:o,size:l,position:c}=this;if(o&&c<l){typeof a!="number"&&(a=Number.POSITIVE_INFINITY);let h=c,A=0,m=0;const b=Math.min(l,h+Math.min(l-h,a)),S=new Uint8Array(Math.max(0,(this.position=b)-h));for(;(h+=m)<b&&(A+=m)<S.byteLength;)({bytesRead:m}=yield o.read(S,A,S.byteLength-A,h));return S}return null})}readAt(a,o){return t.__awaiter(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:l,size:c}=this;if(l&&a+o<c){const h=Math.min(c,a+o),A=new Uint8Array(h-a);return(yield l.read(A,0,o,a)).buffer}return new Uint8Array(o)})}close(){return t.__awaiter(this,void 0,void 0,function*(){const a=this._handle;this._handle=null,a&&(yield a.close())})}throw(a){return t.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:a}})}return(a){return t.__awaiter(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:a}})}}return zh.AsyncRandomAccessFile=r,zh}var Vh={},po={},AN;function m9(){if(AN)return po;AN=1,Object.defineProperty(po,"__esModule",{value:!0}),po.Int128=po.Int64=po.Uint64=po.BaseInt64=void 0;const t=65536;function e(l){return l<0&&(l=4294967295+l+1),`0x${l.toString(16)}`}const i=8,n=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class r{constructor(c){this.buffer=c}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(c){const h=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),A=new Uint32Array([c.buffer[1]>>>16,c.buffer[1]&65535,c.buffer[0]>>>16,c.buffer[0]&65535]);let m=h[3]*A[3];this.buffer[0]=m&65535;let b=m>>>16;return m=h[2]*A[3],b+=m,m=h[3]*A[2]>>>0,b+=m,this.buffer[0]+=b<<16,this.buffer[1]=b>>>0<m?t:0,this.buffer[1]+=b>>>16,this.buffer[1]+=h[1]*A[3]+h[2]*A[2]+h[3]*A[1],this.buffer[1]+=h[0]*A[3]+h[1]*A[2]+h[2]*A[1]+h[3]*A[0]<<16,this}_plus(c){const h=this.buffer[0]+c.buffer[0]>>>0;this.buffer[1]+=c.buffer[1],h<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=h}lessThan(c){return this.buffer[1]<c.buffer[1]||this.buffer[1]===c.buffer[1]&&this.buffer[0]<c.buffer[0]}equals(c){return this.buffer[1]===c.buffer[1]&&this.buffer[0]==c.buffer[0]}greaterThan(c){return c.lessThan(this)}hex(){return`${e(this.buffer[1])} ${e(this.buffer[0])}`}}po.BaseInt64=r;class s extends r{times(c){return this._times(c),this}plus(c){return this._plus(c),this}static from(c,h=new Uint32Array(2)){return s.fromString(typeof c=="string"?c:c.toString(),h)}static fromNumber(c,h=new Uint32Array(2)){return s.fromString(c.toString(),h)}static fromString(c,h=new Uint32Array(2)){const A=c.length,m=new s(h);for(let b=0;b<A;){const S=i<A-b?i:A-b,M=new s(new Uint32Array([Number.parseInt(c.slice(b,b+S),10),0])),I=new s(new Uint32Array([n[S],0]));m.times(I),m.plus(M),b+=S}return m}static convertArray(c){const h=new Uint32Array(c.length*2);for(let A=-1,m=c.length;++A<m;)s.from(c[A],new Uint32Array(h.buffer,h.byteOffset+2*A*4,2));return h}static multiply(c,h){return new s(new Uint32Array(c.buffer)).times(h)}static add(c,h){return new s(new Uint32Array(c.buffer)).plus(h)}}po.Uint64=s;class a extends r{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(c){return this._times(c),this}plus(c){return this._plus(c),this}lessThan(c){const h=this.buffer[1]<<0,A=c.buffer[1]<<0;return h<A||h===A&&this.buffer[0]<c.buffer[0]}static from(c,h=new Uint32Array(2)){return a.fromString(typeof c=="string"?c:c.toString(),h)}static fromNumber(c,h=new Uint32Array(2)){return a.fromString(c.toString(),h)}static fromString(c,h=new Uint32Array(2)){const A=c.startsWith("-"),m=c.length,b=new a(h);for(let S=A?1:0;S<m;){const M=i<m-S?i:m-S,I=new a(new Uint32Array([Number.parseInt(c.slice(S,S+M),10),0])),O=new a(new Uint32Array([n[M],0]));b.times(O),b.plus(I),S+=M}return A?b.negate():b}static convertArray(c){const h=new Uint32Array(c.length*2);for(let A=-1,m=c.length;++A<m;)a.from(c[A],new Uint32Array(h.buffer,h.byteOffset+2*A*4,2));return h}static multiply(c,h){return new a(new Uint32Array(c.buffer)).times(h)}static add(c,h){return new a(new Uint32Array(c.buffer)).plus(h)}}po.Int64=a;class o{constructor(c){this.buffer=c}high(){return new a(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new a(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(c){const h=new s(new Uint32Array([this.buffer[3],0])),A=new s(new Uint32Array([this.buffer[2],0])),m=new s(new Uint32Array([this.buffer[1],0])),b=new s(new Uint32Array([this.buffer[0],0])),S=new s(new Uint32Array([c.buffer[3],0])),M=new s(new Uint32Array([c.buffer[2],0])),I=new s(new Uint32Array([c.buffer[1],0])),O=new s(new Uint32Array([c.buffer[0],0]));let D=s.multiply(b,O);this.buffer[0]=D.low();const B=new s(new Uint32Array([D.high(),0]));return D=s.multiply(m,O),B.plus(D),D=s.multiply(b,I),B.plus(D),this.buffer[1]=B.low(),this.buffer[3]=B.lessThan(D)?1:0,this.buffer[2]=B.high(),new s(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(s.multiply(A,O)).plus(s.multiply(m,I)).plus(s.multiply(b,M)),this.buffer[3]+=s.multiply(h,O).plus(s.multiply(A,I)).plus(s.multiply(m,M)).plus(s.multiply(b,S)).low(),this}plus(c){const h=new Uint32Array(4);return h[3]=this.buffer[3]+c.buffer[3]>>>0,h[2]=this.buffer[2]+c.buffer[2]>>>0,h[1]=this.buffer[1]+c.buffer[1]>>>0,h[0]=this.buffer[0]+c.buffer[0]>>>0,h[0]<this.buffer[0]>>>0&&++h[1],h[1]<this.buffer[1]>>>0&&++h[2],h[2]<this.buffer[2]>>>0&&++h[3],this.buffer[3]=h[3],this.buffer[2]=h[2],this.buffer[1]=h[1],this.buffer[0]=h[0],this}hex(){return`${e(this.buffer[3])} ${e(this.buffer[2])} ${e(this.buffer[1])} ${e(this.buffer[0])}`}static multiply(c,h){return new o(new Uint32Array(c.buffer)).times(h)}static add(c,h){return new o(new Uint32Array(c.buffer)).plus(h)}static from(c,h=new Uint32Array(4)){return o.fromString(typeof c=="string"?c:c.toString(),h)}static fromNumber(c,h=new Uint32Array(4)){return o.fromString(c.toString(),h)}static fromString(c,h=new Uint32Array(4)){const A=c.startsWith("-"),m=c.length,b=new o(h);for(let S=A?1:0;S<m;){const M=i<m-S?i:m-S,I=new o(new Uint32Array([Number.parseInt(c.slice(S,S+M),10),0,0,0])),O=new o(new Uint32Array([n[M],0,0,0]));b.times(O),b.plus(I),S+=M}return A?b.negate():b}static convertArray(c){const h=new Uint32Array(c.length*4);for(let A=-1,m=c.length;++A<m;)o.from(c[A],new Uint32Array(h.buffer,h.byteOffset+4*4*A,4));return h}}return po.Int128=o,po}var gN;function nit(){if(gN)return Vh;gN=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.JSONVectorLoader=Vh.VectorLoader=void 0;const t=Dc(),e=Ma(),i=Pn(),n=wa(),r=d0(),s=Lf(),a=m9(),o=nr(),l=Xr();class c extends n.Visitor{constructor(b,S,M,I,O=o.MetadataVersion.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=b,this.nodes=S,this.buffers=M,this.dictionaries=I,this.metadataVersion=O}visit(b){return super.visit(b instanceof e.Field?b.type:b)}visitNull(b,{length:S}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S})}visitBool(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitInt(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitFloat(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitUtf8(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),data:this.readData(b)})}visitLargeUtf8(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),data:this.readData(b)})}visitBinary(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),data:this.readData(b)})}visitLargeBinary(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),data:this.readData(b)})}visitFixedSizeBinary(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitDate(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitTimestamp(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitTime(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitDecimal(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitList(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),child:this.visit(b.children[0])})}visitStruct(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),children:this.visitMany(b.children)})}visitUnion(b,{length:S,nullCount:M}=this.nextFieldNode()){return this.metadataVersion<o.MetadataVersion.V5&&this.readNullBitmap(b,M),b.mode===o.UnionMode.Sparse?this.visitSparseUnion(b,{length:S,nullCount:M}):this.visitDenseUnion(b,{length:S,nullCount:M})}visitDenseUnion(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,typeIds:this.readTypeIds(b),valueOffsets:this.readOffsets(b),children:this.visitMany(b.children)})}visitSparseUnion(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,typeIds:this.readTypeIds(b),children:this.visitMany(b.children)})}visitDictionary(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b.indices),dictionary:this.readDictionary(b)})}visitInterval(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitDuration(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),data:this.readData(b)})}visitFixedSizeList(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),child:this.visit(b.children[0])})}visitMap(b,{length:S,nullCount:M}=this.nextFieldNode()){return(0,t.makeData)({type:b,length:S,nullCount:M,nullBitmap:this.readNullBitmap(b,M),valueOffsets:this.readOffsets(b),child:this.visit(b.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(b,S,M=this.nextBufferRange()){return S>0&&this.readData(b,M)||new Uint8Array(0)}readOffsets(b,S){return this.readData(b,S)}readTypeIds(b,S){return this.readData(b,S)}readData(b,{length:S,offset:M}=this.nextBufferRange()){return this.bytes.subarray(M,M+S)}readDictionary(b){return this.dictionaries.get(b.id)}}Vh.VectorLoader=c;class h extends c{constructor(b,S,M,I,O){super(new Uint8Array(0),S,M,I,O),this.sources=b}readNullBitmap(b,S,{offset:M}=this.nextBufferRange()){return S<=0?new Uint8Array(0):(0,r.packBools)(this.sources[M])}readOffsets(b,{offset:S}=this.nextBufferRange()){return(0,l.toArrayBufferView)(Uint8Array,(0,l.toArrayBufferView)(b.OffsetArrayType,this.sources[S]))}readTypeIds(b,{offset:S}=this.nextBufferRange()){return(0,l.toArrayBufferView)(Uint8Array,(0,l.toArrayBufferView)(b.ArrayType,this.sources[S]))}readData(b,{offset:S}=this.nextBufferRange()){const{sources:M}=this;return i.DataType.isTimestamp(b)||(i.DataType.isInt(b)||i.DataType.isTime(b))&&b.bitWidth===64||i.DataType.isDuration(b)||i.DataType.isDate(b)&&b.unit===o.DateUnit.MILLISECOND?(0,l.toArrayBufferView)(Uint8Array,a.Int64.convertArray(M[S])):i.DataType.isDecimal(b)?(0,l.toArrayBufferView)(Uint8Array,a.Int128.convertArray(M[S])):i.DataType.isBinary(b)||i.DataType.isLargeBinary(b)||i.DataType.isFixedSizeBinary(b)?A(M[S]):i.DataType.isBool(b)?(0,r.packBools)(M[S]):i.DataType.isUtf8(b)||i.DataType.isLargeUtf8(b)?(0,s.encodeUtf8)(M[S].join("")):(0,l.toArrayBufferView)(Uint8Array,(0,l.toArrayBufferView)(b.ArrayType,M[S].map(I=>+I)))}}Vh.JSONVectorLoader=h;function A(m){const b=m.join(""),S=new Uint8Array(b.length/2);for(let M=0;M<b.length;M+=2)S[M>>1]=Number.parseInt(b.slice(M,M+2),16);return S}return Vh}var $h={},hc={},ca={},Wh={},Jp={},yN;function mB(){if(yN)return Jp;yN=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.BinaryBuilder=void 0;const t=Hu(),e=Yn(),i=Xr();class n extends e.VariableWidthBuilder{constructor(s){super(s),this._values=new t.BufferBuilder(Uint8Array)}get byteLength(){let s=this._pendingLength+this.length*4;return this._offsets&&(s+=this._offsets.byteLength),this._values&&(s+=this._values.byteLength),this._nulls&&(s+=this._nulls.byteLength),s}setValue(s,a){return super.setValue(s,(0,i.toUint8Array)(a))}_flushPending(s,a){const o=this._offsets,l=this._values.reserve(a).buffer;let c=0;for(const[h,A]of s)if(A===void 0)o.set(h,0);else{const m=A.length;l.set(A,c),o.set(h,m),c+=m}}}return Jp.BinaryBuilder=n,Jp}var tm={},pN;function _B(){if(pN)return tm;pN=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.LargeBinaryBuilder=void 0;const t=Xr(),e=Hu(),i=Yn();class n extends i.VariableWidthBuilder{constructor(s){super(s),this._values=new e.BufferBuilder(Uint8Array)}get byteLength(){let s=this._pendingLength+this.length*4;return this._offsets&&(s+=this._offsets.byteLength),this._values&&(s+=this._values.byteLength),this._nulls&&(s+=this._nulls.byteLength),s}setValue(s,a){return super.setValue(s,(0,t.toUint8Array)(a))}_flushPending(s,a){const o=this._offsets,l=this._values.reserve(a).buffer;let c=0;for(const[h,A]of s)if(A===void 0)o.set(h,BigInt(0));else{const m=A.length;l.set(A,c),o.set(h,BigInt(m)),c+=m}}}return tm.LargeBinaryBuilder=n,tm}var em={},mN;function _9(){if(mN)return em;mN=1,Object.defineProperty(em,"__esModule",{value:!0}),em.BoolBuilder=void 0;const t=Hu(),e=Yn();class i extends e.Builder{constructor(r){super(r),this._values=new t.BitmapBufferBuilder}setValue(r,s){this._values.set(r,+s)}}return em.BoolBuilder=i,em}var fc={},_N;function b9(){if(_N)return fc;_N=1,Object.defineProperty(fc,"__esModule",{value:!0}),fc.DateMillisecondBuilder=fc.DateDayBuilder=fc.DateBuilder=void 0;const t=Yn(),e=Qa();class i extends t.FixedWidthBuilder{}fc.DateBuilder=i,i.prototype._setValue=e.setDate;class n extends i{}fc.DateDayBuilder=n,n.prototype._setValue=e.setDateDay;class r extends i{}return fc.DateMillisecondBuilder=r,r.prototype._setValue=e.setDateMillisecond,fc}var im={},bN;function v9(){if(bN)return im;bN=1,Object.defineProperty(im,"__esModule",{value:!0}),im.DecimalBuilder=void 0;const t=Yn(),e=Qa();class i extends t.FixedWidthBuilder{}return im.DecimalBuilder=i,i.prototype._setValue=e.setDecimal,im}var nm={},vN;function T9(){if(vN)return nm;vN=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.DictionaryBuilder=void 0;const t=Pn(),e=Yn(),i=ST();class n extends e.Builder{constructor({type:s,nullValues:a,dictionaryHashFunction:o}){super({type:new t.Dictionary(s.dictionary,s.indices,s.id,s.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=(0,i.makeBuilder)({type:this.type.indices,nullValues:a}),this.dictionary=(0,i.makeBuilder)({type:this.type.dictionary,nullValues:null}),typeof o=="function"&&(this.valueToKey=o)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(s){return this.indices.isValid(s)}setValid(s,a){const o=this.indices;return a=o.setValid(s,a),this.length=o.length,a}setValue(s,a){const o=this._keysToIndices,l=this.valueToKey(a);let c=o[l];return c===void 0&&(o[l]=c=this._dictionaryOffset+this.dictionary.append(a).length-1),this.indices.setValue(s,c)}flush(){const s=this.type,a=this._dictionary,o=this.dictionary.toVector(),l=this.indices.flush().clone(s);return l.dictionary=a?a.concat(o):o,this.finished||(this._dictionaryOffset+=o.length),this._dictionary=l.dictionary,this.clear(),l}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(s){return typeof s=="string"?s:`${s}`}}return nm.DictionaryBuilder=n,nm}var rm={},TN;function S9(){if(TN)return rm;TN=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.FixedSizeBinaryBuilder=void 0;const t=Yn(),e=Qa();class i extends t.FixedWidthBuilder{}return rm.FixedSizeBinaryBuilder=i,i.prototype._setValue=e.setFixedSizeBinary,rm}var sm={},SN;function w9(){if(SN)return sm;SN=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.FixedSizeListBuilder=void 0;const t=Ma(),e=Yn(),i=Pn();class n extends e.Builder{setValue(s,a){const[o]=this.children,l=s*this.stride;for(let c=-1,h=a.length;++c<h;)o.set(l+c,a[c])}addChild(s,a="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const o=this.children.push(s);return this.type=new i.FixedSizeList(this.type.listSize,new t.Field(a,s.type,!0)),o}}return sm.FixedSizeListBuilder=n,sm}var mo={},wN;function M9(){if(wN)return mo;wN=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.Float64Builder=mo.Float32Builder=mo.Float16Builder=mo.FloatBuilder=void 0;const t=_T(),e=Yn();class i extends e.FixedWidthBuilder{setValue(o,l){this._values.set(o,l)}}mo.FloatBuilder=i;class n extends i{setValue(o,l){super.setValue(o,(0,t.float64ToUint16)(l))}}mo.Float16Builder=n;class r extends i{}mo.Float32Builder=r;class s extends i{}return mo.Float64Builder=s,mo}var dc={},MN;function I9(){if(MN)return dc;MN=1,Object.defineProperty(dc,"__esModule",{value:!0}),dc.IntervalYearMonthBuilder=dc.IntervalDayTimeBuilder=dc.IntervalBuilder=void 0;const t=Yn(),e=Qa();class i extends t.FixedWidthBuilder{}dc.IntervalBuilder=i,i.prototype._setValue=e.setIntervalValue;class n extends i{}dc.IntervalDayTimeBuilder=n,n.prototype._setValue=e.setIntervalDayTime;class r extends i{}return dc.IntervalYearMonthBuilder=r,r.prototype._setValue=e.setIntervalYearMonth,dc}var ua={},IN;function E9(){if(IN)return ua;IN=1,Object.defineProperty(ua,"__esModule",{value:!0}),ua.DurationNanosecondBuilder=ua.DurationMicrosecondBuilder=ua.DurationMillisecondBuilder=ua.DurationSecondBuilder=ua.DurationBuilder=void 0;const t=Yn(),e=Qa();class i extends t.FixedWidthBuilder{}ua.DurationBuilder=i,i.prototype._setValue=e.setDuration;class n extends i{}ua.DurationSecondBuilder=n,n.prototype._setValue=e.setDurationSecond;class r extends i{}ua.DurationMillisecondBuilder=r,r.prototype._setValue=e.setDurationMillisecond;class s extends i{}ua.DurationMicrosecondBuilder=s,s.prototype._setValue=e.setDurationMicrosecond;class a extends i{}return ua.DurationNanosecondBuilder=a,a.prototype._setValue=e.setDurationNanosecond,ua}var cr={},EN;function B9(){if(EN)return cr;EN=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.Uint64Builder=cr.Uint32Builder=cr.Uint16Builder=cr.Uint8Builder=cr.Int64Builder=cr.Int32Builder=cr.Int16Builder=cr.Int8Builder=cr.IntBuilder=void 0;const t=Yn();class e extends t.FixedWidthBuilder{setValue(A,m){this._values.set(A,m)}}cr.IntBuilder=e;class i extends e{}cr.Int8Builder=i;class n extends e{}cr.Int16Builder=n;class r extends e{}cr.Int32Builder=r;class s extends e{}cr.Int64Builder=s;class a extends e{}cr.Uint8Builder=a;class o extends e{}cr.Uint16Builder=o;class l extends e{}cr.Uint32Builder=l;class c extends e{}return cr.Uint64Builder=c,cr}var am={},BN;function O9(){if(BN)return am;BN=1,Object.defineProperty(am,"__esModule",{value:!0}),am.ListBuilder=void 0;const t=Ma(),e=Pn(),i=Hu(),n=Yn();class r extends n.VariableWidthBuilder{constructor(a){super(a),this._offsets=new i.OffsetsBufferBuilder(a.type)}addChild(a,o="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=a,this.type=new e.List(new t.Field(o,a.type,!0)),this.numChildren-1}_flushPending(a){const o=this._offsets,[l]=this.children;for(const[c,h]of a)if(typeof h>"u")o.set(c,0);else{const A=h,m=A.length,b=o.set(c,m).buffer[c];for(let S=-1;++S<m;)l.set(b+S,A[S])}}}return am.ListBuilder=r,am}var om={},ON;function R9(){if(ON)return om;ON=1,Object.defineProperty(om,"__esModule",{value:!0}),om.MapBuilder=void 0;const t=Ma(),e=Pn(),i=Yn();class n extends i.VariableWidthBuilder{set(s,a){return super.set(s,a)}setValue(s,a){const o=a instanceof Map?a:new Map(Object.entries(a)),l=this._pending||(this._pending=new Map),c=l.get(s);c&&(this._pendingLength-=c.size),this._pendingLength+=o.size,l.set(s,o)}addChild(s,a=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=s,this.type=new e.Map_(new t.Field(a,s.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(s){const a=this._offsets,[o]=this.children;for(const[l,c]of s)if(c===void 0)a.set(l,0);else{let{[l]:h,[l+1]:A}=a.set(l,c.size).buffer;for(const m of c.entries())if(o.set(h,m),++h>=A)break}}}return om.MapBuilder=n,om}var lm={},RN;function D9(){if(RN)return lm;RN=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.NullBuilder=void 0;const t=Yn();class e extends t.Builder{setValue(n,r){}setValid(n,r){return this.length=Math.max(n+1,this.length),r}}return lm.NullBuilder=e,lm}var cm={},DN;function C9(){if(DN)return cm;DN=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.StructBuilder=void 0;const t=Ma(),e=Yn(),i=Pn();class n extends e.Builder{setValue(s,a){const{children:o,type:l}=this;switch(Array.isArray(a)||a.constructor){case!0:return l.children.forEach((c,h)=>o[h].set(s,a[h]));case Map:return l.children.forEach((c,h)=>o[h].set(s,a.get(c.name)));default:return l.children.forEach((c,h)=>o[h].set(s,a[c.name]))}}setValid(s,a){return super.setValid(s,a)||this.children.forEach(o=>o.setValid(s,a)),a}addChild(s,a=`${this.numChildren}`){const o=this.children.push(s);return this.type=new i.Struct([...this.type.children,new t.Field(a,s.type,!0)]),o}}return cm.StructBuilder=n,cm}var ha={},CN;function P9(){if(CN)return ha;CN=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.TimestampNanosecondBuilder=ha.TimestampMicrosecondBuilder=ha.TimestampMillisecondBuilder=ha.TimestampSecondBuilder=ha.TimestampBuilder=void 0;const t=Yn(),e=Qa();class i extends t.FixedWidthBuilder{}ha.TimestampBuilder=i,i.prototype._setValue=e.setTimestamp;class n extends i{}ha.TimestampSecondBuilder=n,n.prototype._setValue=e.setTimestampSecond;class r extends i{}ha.TimestampMillisecondBuilder=r,r.prototype._setValue=e.setTimestampMillisecond;class s extends i{}ha.TimestampMicrosecondBuilder=s,s.prototype._setValue=e.setTimestampMicrosecond;class a extends i{}return ha.TimestampNanosecondBuilder=a,a.prototype._setValue=e.setTimestampNanosecond,ha}var fa={},PN;function x9(){if(PN)return fa;PN=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.TimeNanosecondBuilder=fa.TimeMicrosecondBuilder=fa.TimeMillisecondBuilder=fa.TimeSecondBuilder=fa.TimeBuilder=void 0;const t=Yn(),e=Qa();class i extends t.FixedWidthBuilder{}fa.TimeBuilder=i,i.prototype._setValue=e.setTime;class n extends i{}fa.TimeSecondBuilder=n,n.prototype._setValue=e.setTimeSecond;class r extends i{}fa.TimeMillisecondBuilder=r,r.prototype._setValue=e.setTimeMillisecond;class s extends i{}fa.TimeMicrosecondBuilder=s,s.prototype._setValue=e.setTimeMicrosecond;class a extends i{}return fa.TimeNanosecondBuilder=a,a.prototype._setValue=e.setTimeNanosecond,fa}var Ac={},xN;function N9(){if(xN)return Ac;xN=1,Object.defineProperty(Ac,"__esModule",{value:!0}),Ac.DenseUnionBuilder=Ac.SparseUnionBuilder=Ac.UnionBuilder=void 0;const t=Ma(),e=Hu(),i=Yn(),n=Pn();class r extends i.Builder{constructor(l){super(l),this._typeIds=new e.DataBufferBuilder(Int8Array,0,1),typeof l.valueToChildTypeId=="function"&&(this._valueToChildTypeId=l.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(l,c){return this.set(this.length,l,c)}set(l,c,h){return h===void 0&&(h=this._valueToChildTypeId(this,c,l)),this.setValue(l,c,h),this}setValue(l,c,h){this._typeIds.set(l,h);const A=this.type.typeIdToChildIndex[h],m=this.children[A];m==null||m.set(l,c)}addChild(l,c=`${this.children.length}`){const h=this.children.push(l),{type:{children:A,mode:m,typeIds:b}}=this,S=[...A,new t.Field(c,l.type)];return this.type=new n.Union(m,[...b,h],S),h}_valueToChildTypeId(l,c,h){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}Ac.UnionBuilder=r;class s extends r{}Ac.SparseUnionBuilder=s;class a extends r{constructor(l){super(l),this._offsets=new e.DataBufferBuilder(Int32Array)}setValue(l,c,h){const A=this._typeIds.set(l,h).buffer[l],m=this.getChildAt(this.type.typeIdToChildIndex[A]),b=this._offsets.set(l,m.length).buffer[l];m==null||m.set(b,c)}}return Ac.DenseUnionBuilder=a,Ac}var um={},NN;function F9(){if(NN)return um;NN=1,Object.defineProperty(um,"__esModule",{value:!0}),um.Utf8Builder=void 0;const t=Lf(),e=mB(),i=Hu(),n=Yn();class r extends n.VariableWidthBuilder{constructor(a){super(a),this._values=new i.BufferBuilder(Uint8Array)}get byteLength(){let a=this._pendingLength+this.length*4;return this._offsets&&(a+=this._offsets.byteLength),this._values&&(a+=this._values.byteLength),this._nulls&&(a+=this._nulls.byteLength),a}setValue(a,o){return super.setValue(a,(0,t.encodeUtf8)(o))}_flushPending(a,o){}}return um.Utf8Builder=r,r.prototype._flushPending=e.BinaryBuilder.prototype._flushPending,um}var hm={},FN;function L9(){if(FN)return hm;FN=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.LargeUtf8Builder=void 0;const t=Lf(),e=Hu(),i=Yn(),n=_B();class r extends i.VariableWidthBuilder{constructor(a){super(a),this._values=new e.BufferBuilder(Uint8Array)}get byteLength(){let a=this._pendingLength+this.length*4;return this._offsets&&(a+=this._offsets.byteLength),this._values&&(a+=this._values.byteLength),this._nulls&&(a+=this._nulls.byteLength),a}setValue(a,o){return super.setValue(a,(0,t.encodeUtf8)(o))}_flushPending(a,o){}}return hm.LargeUtf8Builder=r,r.prototype._flushPending=n.LargeBinaryBuilder.prototype._flushPending,hm}var LN;function rit(){if(LN)return Wh;LN=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.instance=Wh.GetBuilderCtor=void 0;const t=wa(),e=mB(),i=_B(),n=_9(),r=b9(),s=v9(),a=T9(),o=S9(),l=w9(),c=M9(),h=I9(),A=E9(),m=B9(),b=O9(),S=R9(),M=D9(),I=C9(),O=P9(),D=x9(),B=N9(),P=F9(),j=L9();class N extends t.Visitor{visitNull(){return M.NullBuilder}visitBool(){return n.BoolBuilder}visitInt(){return m.IntBuilder}visitInt8(){return m.Int8Builder}visitInt16(){return m.Int16Builder}visitInt32(){return m.Int32Builder}visitInt64(){return m.Int64Builder}visitUint8(){return m.Uint8Builder}visitUint16(){return m.Uint16Builder}visitUint32(){return m.Uint32Builder}visitUint64(){return m.Uint64Builder}visitFloat(){return c.FloatBuilder}visitFloat16(){return c.Float16Builder}visitFloat32(){return c.Float32Builder}visitFloat64(){return c.Float64Builder}visitUtf8(){return P.Utf8Builder}visitLargeUtf8(){return j.LargeUtf8Builder}visitBinary(){return e.BinaryBuilder}visitLargeBinary(){return i.LargeBinaryBuilder}visitFixedSizeBinary(){return o.FixedSizeBinaryBuilder}visitDate(){return r.DateBuilder}visitDateDay(){return r.DateDayBuilder}visitDateMillisecond(){return r.DateMillisecondBuilder}visitTimestamp(){return O.TimestampBuilder}visitTimestampSecond(){return O.TimestampSecondBuilder}visitTimestampMillisecond(){return O.TimestampMillisecondBuilder}visitTimestampMicrosecond(){return O.TimestampMicrosecondBuilder}visitTimestampNanosecond(){return O.TimestampNanosecondBuilder}visitTime(){return D.TimeBuilder}visitTimeSecond(){return D.TimeSecondBuilder}visitTimeMillisecond(){return D.TimeMillisecondBuilder}visitTimeMicrosecond(){return D.TimeMicrosecondBuilder}visitTimeNanosecond(){return D.TimeNanosecondBuilder}visitDecimal(){return s.DecimalBuilder}visitList(){return b.ListBuilder}visitStruct(){return I.StructBuilder}visitUnion(){return B.UnionBuilder}visitDenseUnion(){return B.DenseUnionBuilder}visitSparseUnion(){return B.SparseUnionBuilder}visitDictionary(){return a.DictionaryBuilder}visitInterval(){return h.IntervalBuilder}visitIntervalDayTime(){return h.IntervalDayTimeBuilder}visitIntervalYearMonth(){return h.IntervalYearMonthBuilder}visitDuration(){return A.DurationBuilder}visitDurationSecond(){return A.DurationSecondBuilder}visitDurationMillisecond(){return A.DurationMillisecondBuilder}visitDurationMicrosecond(){return A.DurationMicrosecondBuilder}visitDurationNanosecond(){return A.DurationNanosecondBuilder}visitFixedSizeList(){return l.FixedSizeListBuilder}visitMap(){return S.MapBuilder}}return Wh.GetBuilderCtor=N,Wh.instance=new N,Wh}var l3={},UN;function TT(){return UN||(UN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.compareTypes=t.compareFields=t.compareSchemas=t.instance=t.TypeComparator=void 0;const e=wa();class i extends e.Visitor{compareSchemas(F,$){return F===$||$ instanceof F.constructor&&this.compareManyFields(F.fields,$.fields)}compareManyFields(F,$){return F===$||Array.isArray(F)&&Array.isArray($)&&F.length===$.length&&F.every((V,Z)=>this.compareFields(V,$[Z]))}compareFields(F,$){return F===$||$ instanceof F.constructor&&F.name===$.name&&F.nullable===$.nullable&&this.visit(F.type,$.type)}}t.TypeComparator=i;function n(N,F){return F instanceof N.constructor}function r(N,F){return N===F||n(N,F)}function s(N,F){return N===F||n(N,F)&&N.bitWidth===F.bitWidth&&N.isSigned===F.isSigned}function a(N,F){return N===F||n(N,F)&&N.precision===F.precision}function o(N,F){return N===F||n(N,F)&&N.byteWidth===F.byteWidth}function l(N,F){return N===F||n(N,F)&&N.unit===F.unit}function c(N,F){return N===F||n(N,F)&&N.unit===F.unit&&N.timezone===F.timezone}function h(N,F){return N===F||n(N,F)&&N.unit===F.unit&&N.bitWidth===F.bitWidth}function A(N,F){return N===F||n(N,F)&&N.children.length===F.children.length&&t.instance.compareManyFields(N.children,F.children)}function m(N,F){return N===F||n(N,F)&&N.children.length===F.children.length&&t.instance.compareManyFields(N.children,F.children)}function b(N,F){return N===F||n(N,F)&&N.mode===F.mode&&N.typeIds.every(($,V)=>$===F.typeIds[V])&&t.instance.compareManyFields(N.children,F.children)}function S(N,F){return N===F||n(N,F)&&N.id===F.id&&N.isOrdered===F.isOrdered&&t.instance.visit(N.indices,F.indices)&&t.instance.visit(N.dictionary,F.dictionary)}function M(N,F){return N===F||n(N,F)&&N.unit===F.unit}function I(N,F){return N===F||n(N,F)&&N.unit===F.unit}function O(N,F){return N===F||n(N,F)&&N.listSize===F.listSize&&N.children.length===F.children.length&&t.instance.compareManyFields(N.children,F.children)}function D(N,F){return N===F||n(N,F)&&N.keysSorted===F.keysSorted&&N.children.length===F.children.length&&t.instance.compareManyFields(N.children,F.children)}i.prototype.visitNull=r,i.prototype.visitBool=r,i.prototype.visitInt=s,i.prototype.visitInt8=s,i.prototype.visitInt16=s,i.prototype.visitInt32=s,i.prototype.visitInt64=s,i.prototype.visitUint8=s,i.prototype.visitUint16=s,i.prototype.visitUint32=s,i.prototype.visitUint64=s,i.prototype.visitFloat=a,i.prototype.visitFloat16=a,i.prototype.visitFloat32=a,i.prototype.visitFloat64=a,i.prototype.visitUtf8=r,i.prototype.visitLargeUtf8=r,i.prototype.visitBinary=r,i.prototype.visitLargeBinary=r,i.prototype.visitFixedSizeBinary=o,i.prototype.visitDate=l,i.prototype.visitDateDay=l,i.prototype.visitDateMillisecond=l,i.prototype.visitTimestamp=c,i.prototype.visitTimestampSecond=c,i.prototype.visitTimestampMillisecond=c,i.prototype.visitTimestampMicrosecond=c,i.prototype.visitTimestampNanosecond=c,i.prototype.visitTime=h,i.prototype.visitTimeSecond=h,i.prototype.visitTimeMillisecond=h,i.prototype.visitTimeMicrosecond=h,i.prototype.visitTimeNanosecond=h,i.prototype.visitDecimal=r,i.prototype.visitList=A,i.prototype.visitStruct=m,i.prototype.visitUnion=b,i.prototype.visitDenseUnion=b,i.prototype.visitSparseUnion=b,i.prototype.visitDictionary=S,i.prototype.visitInterval=M,i.prototype.visitIntervalDayTime=M,i.prototype.visitIntervalYearMonth=M,i.prototype.visitDuration=I,i.prototype.visitDurationSecond=I,i.prototype.visitDurationMillisecond=I,i.prototype.visitDurationMicrosecond=I,i.prototype.visitDurationNanosecond=I,i.prototype.visitFixedSizeList=O,i.prototype.visitMap=D,t.instance=new i;function B(N,F){return t.instance.compareSchemas(N,F)}t.compareSchemas=B;function P(N,F){return t.instance.compareFields(N,F)}t.compareFields=P;function j(N,F){return t.instance.visit(N,F)}t.compareTypes=j}(l3)),l3}var kN;function ST(){if(kN)return ca;kN=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.builderThroughAsyncIterable=ca.builderThroughIterable=ca.tableFromJSON=ca.vectorFromArray=ca.makeBuilder=void 0;const t=Bn,e=Ma(),i=Pn(),n=Dc(),r=zs(),s=rit(),a=t1(),o=$f(),l=TT();function c(M){const I=M.type,O=new(s.instance.getVisitFn(I)())(M);if(I.children&&I.children.length>0){const D=M.children||[],B={nullValues:M.nullValues},P=Array.isArray(D)?(j,N)=>D[N]||B:({name:j})=>D[j]||B;for(const[j,N]of I.children.entries()){const{type:F}=N,$=P(N,j);O.children.push(c(Object.assign(Object.assign({},$),{type:F})))}}return O}ca.makeBuilder=c;function h(M,I){if(M instanceof n.Data||M instanceof r.Vector||M.type instanceof i.DataType||ArrayBuffer.isView(M))return(0,r.makeVector)(M);const O={type:I??m(M),nullValues:[null]},D=[...b(O)(M)],B=D.length===1?D[0]:D.reduce((P,j)=>P.concat(j));return i.DataType.isDictionary(B.type)?B.memoize():B}ca.vectorFromArray=h;function A(M){const I=h(M),O=new o.RecordBatch(new e.Schema(I.type.children),I.data[0]);return new a.Table(O)}ca.tableFromJSON=A;function m(M){if(M.length===0)return new i.Null;let I=0,O=0,D=0,B=0,P=0,j=0,N=0,F=0;for(const $ of M){if($==null){++I;continue}switch(typeof $){case"bigint":++j;continue;case"boolean":++N;continue;case"number":++B;continue;case"string":++P;continue;case"object":Array.isArray($)?++O:Object.prototype.toString.call($)==="[object Date]"?++F:++D;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}if(B+I===M.length)return new i.Float64;if(P+I===M.length)return new i.Dictionary(new i.Utf8,new i.Int32);if(j+I===M.length)return new i.Int64;if(N+I===M.length)return new i.Bool;if(F+I===M.length)return new i.TimestampMillisecond;if(O+I===M.length){const $=M,V=m($[$.findIndex(Z=>Z!=null)]);if($.every(Z=>Z==null||(0,l.compareTypes)(V,m(Z))))return new i.List(new e.Field("",V,!0))}else if(D+I===M.length){const $=new Map;for(const V of M)for(const Z of Object.keys(V))!$.has(Z)&&V[Z]!=null&&$.set(Z,new e.Field(Z,m([V[Z]]),!0));return new i.Struct([...$.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function b(M){const{["queueingStrategy"]:I="count"}=M,{["highWaterMark"]:O=I!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=M,D=I!=="bytes"?"length":"byteLength";return function*(B){let P=0;const j=c(M);for(const N of B)j.append(N)[D]>=O&&++P&&(yield j.toVector());(j.finish().length>0||P===0)&&(yield j.toVector())}}ca.builderThroughIterable=b;function S(M){const{["queueingStrategy"]:I="count"}=M,{["highWaterMark"]:O=I!=="bytes"?Number.POSITIVE_INFINITY:Math.pow(2,14)}=M,D=I!=="bytes"?"length":"byteLength";return function(B){return t.__asyncGenerator(this,arguments,function*(){var P,j,N,F;let $=0;const V=c(M);try{for(var Z=!0,nt=t.__asyncValues(B),X;X=yield t.__await(nt.next()),P=X.done,!P;Z=!0){F=X.value,Z=!1;const bt=F;V.append(bt)[D]>=O&&++$&&(yield yield t.__await(V.toVector()))}}catch(bt){j={error:bt}}finally{try{!Z&&!P&&(N=nt.return)&&(yield t.__await(N.call(nt)))}finally{if(j)throw j.error}}(V.finish().length>0||$===0)&&(yield yield t.__await(V.toVector()))})}}return ca.builderThroughAsyncIterable=S,ca}var fm={},jN;function sit(){if(jN)return fm;jN=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.distributeVectorsIntoRecordBatches=void 0;const t=Dc(),e=Pn(),i=$f();function n(a,o){return r(a,o.map(l=>l.data.concat()))}fm.distributeVectorsIntoRecordBatches=n;function r(a,o){const l=[...a.fields],c=[],h={numBatches:o.reduce((O,D)=>Math.max(O,D.length),0)};let A=0,m=0,b=-1;const S=o.length;let M,I=[];for(;h.numBatches-- >0;){for(m=Number.POSITIVE_INFINITY,b=-1;++b<S;)I[b]=M=o[b].shift(),m=Math.min(m,M?M.length:m);Number.isFinite(m)&&(I=s(l,m,I,o,h),m>0&&(c[A++]=(0,t.makeData)({type:new e.Struct(l),length:m,nullCount:0,children:I.slice()})))}return[a=a.assign(l),c.map(O=>new i.RecordBatch(a,O))]}function s(a,o,l,c,h){var A;const m=(o+63&-64)>>3;for(let b=-1,S=c.length;++b<S;){const M=l[b],I=M==null?void 0:M.length;if(I>=o)I===o?l[b]=M:(l[b]=M.slice(0,o),h.numBatches=Math.max(h.numBatches,c[b].unshift(M.slice(o,I-o))));else{const O=a[b];a[b]=O.clone({nullable:!0}),l[b]=(A=M==null?void 0:M._changeLengthAndBackfillNullBitmap(o))!==null&&A!==void 0?A:(0,t.makeData)({type:O.type,length:o,nullCount:o,nullBitmap:new Uint8Array(m)})}}return l}return fm}var zN;function t1(){if(zN)return hc;zN=1;var t;Object.defineProperty(hc,"__esModule",{value:!0}),hc.tableFromArrays=hc.makeTable=hc.Table=void 0;const e=nr(),i=Dc(),n=ST(),r=zs(),s=Ma(),a=Pn(),o=TT(),l=sit(),c=gB(),h=f0(),A=Qa(),m=yB(),b=pB(),S=J_(),M=$f();class I{constructor(...P){var j,N;if(P.length===0)return this.batches=[],this.schema=new s.Schema([]),this._offsets=[0],this;let F,$;P[0]instanceof s.Schema&&(F=P.shift()),P.at(-1)instanceof Uint32Array&&($=P.pop());const V=nt=>{if(nt){if(nt instanceof M.RecordBatch)return[nt];if(nt instanceof I)return nt.batches;if(nt instanceof i.Data){if(nt.type instanceof a.Struct)return[new M.RecordBatch(new s.Schema(nt.type.children),nt)]}else{if(Array.isArray(nt))return nt.flatMap(X=>V(X));if(typeof nt[Symbol.iterator]=="function")return[...nt].flatMap(X=>V(X));if(typeof nt=="object"){const X=Object.keys(nt),bt=X.map(H=>new r.Vector([nt[H]])),Tt=F??new s.Schema(X.map((H,k)=>new s.Field(String(H),bt[k].type,bt[k].nullable))),[,Ot]=(0,l.distributeVectorsIntoRecordBatches)(Tt,bt);return Ot.length===0?[new M.RecordBatch(nt)]:Ot}}}return[]},Z=P.flatMap(nt=>V(nt));if(F=(N=F??((j=Z[0])===null||j===void 0?void 0:j.schema))!==null&&N!==void 0?N:new s.Schema([]),!(F instanceof s.Schema))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const nt of Z){if(!(nt instanceof M.RecordBatch))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!(0,o.compareSchemas)(F,nt.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=F,this.batches=Z,this._offsets=$??(0,c.computeChunkOffsets)(this.data)}get data(){return this.batches.map(({data:P})=>P)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((P,j)=>P+j.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=(0,c.computeChunkNullCounts)(this.data)),this._nullCount}isValid(P){return!1}get(P){return null}at(P){return this.get((0,S.wrapIndex)(P,this.numRows))}set(P,j){}indexOf(P,j){return-1}[Symbol.iterator](){return this.batches.length>0?b.instance.visit(new r.Vector(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...P){const j=this.schema,N=this.data.concat(P.flatMap(({data:F})=>F));return new I(j,N.map(F=>new M.RecordBatch(j,F)))}slice(P,j){const N=this.schema;[P,j]=(0,S.clampRange)({length:this.numRows},P,j);const F=(0,c.sliceChunks)(this.data,this._offsets,P,j);return new I(N,F.map($=>new M.RecordBatch(N,$)))}getChild(P){return this.getChildAt(this.schema.fields.findIndex(j=>j.name===P))}getChildAt(P){if(P>-1&&P<this.schema.fields.length){const j=this.data.map(N=>N.children[P]);if(j.length===0){const{type:N}=this.schema.fields[P],F=(0,i.makeData)({type:N,length:0,nullCount:0});j.push(F._changeLengthAndBackfillNullBitmap(this.numRows))}return new r.Vector(j)}return null}setChild(P,j){var N;return this.setChildAt((N=this.schema.fields)===null||N===void 0?void 0:N.findIndex(F=>F.name===P),j)}setChildAt(P,j){let N=this.schema,F=[...this.batches];if(P>-1&&P<this.numCols){j||(j=new r.Vector([(0,i.makeData)({type:new a.Null,length:this.numRows})]));const $=N.fields.slice(),V=$[P].clone({type:j.type}),Z=this.schema.fields.map((nt,X)=>this.getChildAt(X));[$[P],Z[P]]=[V,j],[N,F]=(0,l.distributeVectorsIntoRecordBatches)(N,Z)}return new I(N,F)}select(P){const j=this.schema.fields.reduce((N,F,$)=>N.set(F.name,$),new Map);return this.selectAt(P.map(N=>j.get(N)).filter(N=>N>-1))}selectAt(P){const j=this.schema.selectAt(P),N=this.batches.map(F=>F.selectAt(P));return new I(j,N)}assign(P){const j=this.schema.fields,[N,F]=P.schema.fields.reduce((Z,nt,X)=>{const[bt,Tt]=Z,Ot=j.findIndex(H=>H.name===nt.name);return~Ot?Tt[Ot]=X:bt.push(X),Z},[[],[]]),$=this.schema.assign(P.schema),V=[...j.map((Z,nt)=>[nt,F[nt]]).map(([Z,nt])=>nt===void 0?this.getChildAt(Z):P.getChildAt(nt)),...N.map(Z=>P.getChildAt(Z))].filter(Boolean);return new I(...(0,l.distributeVectorsIntoRecordBatches)($,V))}}hc.Table=I,t=Symbol.toStringTag,I[t]=(B=>(B.schema=null,B.batches=[],B._offsets=new Uint32Array([0]),B._nullCount=-1,B[Symbol.isConcatSpreadable]=!0,B.isValid=(0,c.wrapChunkedCall1)(c.isChunkedValid),B.get=(0,c.wrapChunkedCall1)(h.instance.getVisitFn(e.Type.Struct)),B.set=(0,c.wrapChunkedCall2)(A.instance.getVisitFn(e.Type.Struct)),B.indexOf=(0,c.wrapChunkedIndexOf)(m.instance.getVisitFn(e.Type.Struct)),"Table"))(I.prototype);function O(B){const P={},j=Object.entries(B);for(const[N,F]of j)P[N]=(0,r.makeVector)(F);return new I(P)}hc.makeTable=O;function D(B){const P={},j=Object.entries(B);for(const[N,F]of j)P[N]=(0,n.vectorFromArray)(F);return new I(P)}return hc.tableFromArrays=D,hc}var VN;function $f(){if(VN)return $h;VN=1;var t;Object.defineProperty($h,"__esModule",{value:!0}),$h._InternalEmptyPlaceholderRecordBatch=$h.RecordBatch=void 0;const e=Dc(),i=t1(),n=zs(),r=Ma(),s=Pn(),a=J_(),o=f0(),l=Qa(),c=yB(),h=pB();class A{constructor(...I){switch(I.length){case 2:{if([this.schema]=I,!(this.schema instanceof r.Schema))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=(0,e.makeData)({nullCount:0,type:new s.Struct(this.schema.fields),children:this.schema.fields.map(O=>(0,e.makeData)({type:O.type,nullCount:0}))})]=I,!(this.data instanceof e.Data))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=m(this.schema,this.data.children);break}case 1:{const[O]=I,{fields:D,children:B,length:P}=Object.keys(O).reduce((F,$,V)=>(F.children[V]=O[$],F.length=Math.max(F.length,O[$].length),F.fields[V]=r.Field.new({name:$,type:O[$].type,nullable:!0}),F),{length:0,fields:new Array,children:new Array}),j=new r.Schema(D),N=(0,e.makeData)({type:new s.Struct(D),length:P,children:B,nullCount:0});[this.schema,this.data]=m(j,N.children,P);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=b(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(I){return this.data.getValid(I)}get(I){return o.instance.visit(this.data,I)}at(I){return this.get((0,a.wrapIndex)(I,this.numRows))}set(I,O){return l.instance.visit(this.data,I,O)}indexOf(I,O){return c.instance.visit(this.data,I,O)}[Symbol.iterator](){return h.instance.visit(new n.Vector([this.data]))}toArray(){return[...this]}concat(...I){return new i.Table(this.schema,[this,...I])}slice(I,O){const[D]=new n.Vector([this.data]).slice(I,O).data;return new A(this.schema,D)}getChild(I){var O;return this.getChildAt((O=this.schema.fields)===null||O===void 0?void 0:O.findIndex(D=>D.name===I))}getChildAt(I){return I>-1&&I<this.schema.fields.length?new n.Vector([this.data.children[I]]):null}setChild(I,O){var D;return this.setChildAt((D=this.schema.fields)===null||D===void 0?void 0:D.findIndex(B=>B.name===I),O)}setChildAt(I,O){let D=this.schema,B=this.data;if(I>-1&&I<this.numCols){O||(O=new n.Vector([(0,e.makeData)({type:new s.Null,length:this.numRows})]));const P=D.fields.slice(),j=B.children.slice(),N=P[I].clone({type:O.type});[P[I],j[I]]=[N,O.data[0]],D=new r.Schema(P,new Map(this.schema.metadata)),B=(0,e.makeData)({type:new s.Struct(P),children:j})}return new A(D,B)}select(I){const O=this.schema.select(I),D=new s.Struct(O.fields),B=[];for(const P of I){const j=this.schema.fields.findIndex(N=>N.name===P);~j&&(B[j]=this.data.children[j])}return new A(O,(0,e.makeData)({type:D,length:this.numRows,children:B}))}selectAt(I){const O=this.schema.selectAt(I),D=I.map(P=>this.data.children[P]).filter(Boolean),B=(0,e.makeData)({type:new s.Struct(O.fields),length:this.numRows,children:D});return new A(O,B)}}$h.RecordBatch=A,t=Symbol.toStringTag,A[t]=(M=>(M._nullCount=-1,M[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(A.prototype);function m(M,I,O=I.reduce((D,B)=>Math.max(D,B.length),0)){var D;const B=[...M.fields],P=[...I],j=(O+63&-64)>>3;for(const[N,F]of M.fields.entries()){const $=I[N];(!$||$.length!==O)&&(B[N]=F.clone({nullable:!0}),P[N]=(D=$==null?void 0:$._changeLengthAndBackfillNullBitmap(O))!==null&&D!==void 0?D:(0,e.makeData)({type:F.type,length:O,nullCount:O,nullBitmap:new Uint8Array(j)}))}return[M.assign(B),(0,e.makeData)({type:new s.Struct(B),length:O,children:P})]}function b(M,I,O=new Map){var D,B;if(((D=M==null?void 0:M.length)!==null&&D!==void 0?D:0)>0&&(M==null?void 0:M.length)===(I==null?void 0:I.length))for(let P=-1,j=M.length;++P<j;){const{type:N}=M[P],F=I[P];for(const $ of[F,...((B=F==null?void 0:F.dictionary)===null||B===void 0?void 0:B.data)||[]])b(N.children,$==null?void 0:$.children,O);if(s.DataType.isDictionary(N)){const{id:$}=N;if(!O.has($))F!=null&&F.dictionary&&O.set($,F.dictionary);else if(O.get($)!==F.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return O}class S extends A{constructor(I){const O=I.fields.map(B=>(0,e.makeData)({type:B.type})),D=(0,e.makeData)({type:new s.Struct(I.fields),nullCount:0,children:O});super(I,D)}}return $h._InternalEmptyPlaceholderRecordBatch=S,$h}var c3={},da={},dm={},$N;function ait(){if($N)return dm;$N=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.Message=void 0;const t=Re,e=K_(),i=fB(),n=ZE();class r{constructor(){this.bb=null,this.bb_pos=0}__init(a,o){return this.bb_pos=a,this.bb=o,this}static getRootAsMessage(a,o){return(o||new r).__init(a.readInt32(a.position())+a.position(),a)}static getSizePrefixedRootAsMessage(a,o){return a.setPosition(a.position()+t.SIZE_PREFIX_LENGTH),(o||new r).__init(a.readInt32(a.position())+a.position(),a)}version(){const a=this.bb.__offset(this.bb_pos,4);return a?this.bb.readInt16(this.bb_pos+a):n.MetadataVersion.V1}headerType(){const a=this.bb.__offset(this.bb_pos,6);return a?this.bb.readUint8(this.bb_pos+a):i.MessageHeader.NONE}header(a){const o=this.bb.__offset(this.bb_pos,8);return o?this.bb.__union(a,this.bb_pos+o):null}bodyLength(){const a=this.bb.__offset(this.bb_pos,10);return a?this.bb.readInt64(this.bb_pos+a):BigInt("0")}customMetadata(a,o){const l=this.bb.__offset(this.bb_pos,12);return l?(o||new e.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+l)+a*4),this.bb):null}customMetadataLength(){const a=this.bb.__offset(this.bb_pos,12);return a?this.bb.__vector_len(this.bb_pos+a):0}static startMessage(a){a.startObject(5)}static addVersion(a,o){a.addFieldInt16(0,o,n.MetadataVersion.V1)}static addHeaderType(a,o){a.addFieldInt8(1,o,i.MessageHeader.NONE)}static addHeader(a,o){a.addFieldOffset(2,o,0)}static addBodyLength(a,o){a.addFieldInt64(3,o,BigInt("0"))}static addCustomMetadata(a,o){a.addFieldOffset(4,o,0)}static createCustomMetadataVector(a,o){a.startVector(4,o.length,4);for(let l=o.length-1;l>=0;l--)a.addOffset(o[l]);return a.endVector()}static startCustomMetadataVector(a,o){a.startVector(4,o,4)}static endMessage(a){return a.endObject()}static finishMessageBuffer(a,o){a.finish(o)}static finishSizePrefixedMessageBuffer(a,o){a.finish(o,void 0,!0)}static createMessage(a,o,l,c,h,A){return r.startMessage(a),r.addVersion(a,o),r.addHeaderType(a,l),r.addHeader(a,c),r.addBodyLength(a,h),r.addCustomMetadata(a,A),r.endMessage(a)}}return dm.Message=r,dm}var Hh={},WN;function oit(){if(WN)return Hh;WN=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.instance=Hh.TypeAssembler=void 0;const t=wa(),e=u9(),i=jf(),n=sB(),r=s9(),s=o9(),a=a9(),o=f9(),l=l9(),c=eB(),h=tB(),A=lB(),m=cB(),b=aB(),S=iB(),M=c9(),I=h9(),O=uB(),D=r9(),B=nB(),P=rB(),j=oB();class N extends t.Visitor{visit($,V){return $==null||V==null?void 0:super.visit($,V)}visitNull($,V){return e.Null.startNull(V),e.Null.endNull(V)}visitInt($,V){return i.Int.startInt(V),i.Int.addBitWidth(V,$.bitWidth),i.Int.addIsSigned(V,$.isSigned),i.Int.endInt(V)}visitFloat($,V){return n.FloatingPoint.startFloatingPoint(V),n.FloatingPoint.addPrecision(V,$.precision),n.FloatingPoint.endFloatingPoint(V)}visitBinary($,V){return r.Binary.startBinary(V),r.Binary.endBinary(V)}visitLargeBinary($,V){return s.LargeBinary.startLargeBinary(V),s.LargeBinary.endLargeBinary(V)}visitBool($,V){return a.Bool.startBool(V),a.Bool.endBool(V)}visitUtf8($,V){return o.Utf8.startUtf8(V),o.Utf8.endUtf8(V)}visitLargeUtf8($,V){return l.LargeUtf8.startLargeUtf8(V),l.LargeUtf8.endLargeUtf8(V)}visitDecimal($,V){return c.Decimal.startDecimal(V),c.Decimal.addScale(V,$.scale),c.Decimal.addPrecision(V,$.precision),c.Decimal.addBitWidth(V,$.bitWidth),c.Decimal.endDecimal(V)}visitDate($,V){return h.Date.startDate(V),h.Date.addUnit(V,$.unit),h.Date.endDate(V)}visitTime($,V){return A.Time.startTime(V),A.Time.addUnit(V,$.unit),A.Time.addBitWidth(V,$.bitWidth),A.Time.endTime(V)}visitTimestamp($,V){const Z=$.timezone&&V.createString($.timezone)||void 0;return m.Timestamp.startTimestamp(V),m.Timestamp.addUnit(V,$.unit),Z!==void 0&&m.Timestamp.addTimezone(V,Z),m.Timestamp.endTimestamp(V)}visitInterval($,V){return b.Interval.startInterval(V),b.Interval.addUnit(V,$.unit),b.Interval.endInterval(V)}visitDuration($,V){return S.Duration.startDuration(V),S.Duration.addUnit(V,$.unit),S.Duration.endDuration(V)}visitList($,V){return M.List.startList(V),M.List.endList(V)}visitStruct($,V){return I.Struct_.startStruct_(V),I.Struct_.endStruct_(V)}visitUnion($,V){O.Union.startTypeIdsVector(V,$.typeIds.length);const Z=O.Union.createTypeIdsVector(V,$.typeIds);return O.Union.startUnion(V),O.Union.addMode(V,$.mode),O.Union.addTypeIds(V,Z),O.Union.endUnion(V)}visitDictionary($,V){const Z=this.visit($.indices,V);return D.DictionaryEncoding.startDictionaryEncoding(V),D.DictionaryEncoding.addId(V,BigInt($.id)),D.DictionaryEncoding.addIsOrdered(V,$.isOrdered),Z!==void 0&&D.DictionaryEncoding.addIndexType(V,Z),D.DictionaryEncoding.endDictionaryEncoding(V)}visitFixedSizeBinary($,V){return B.FixedSizeBinary.startFixedSizeBinary(V),B.FixedSizeBinary.addByteWidth(V,$.byteWidth),B.FixedSizeBinary.endFixedSizeBinary(V)}visitFixedSizeList($,V){return P.FixedSizeList.startFixedSizeList(V),P.FixedSizeList.addListSize(V,$.listSize),P.FixedSizeList.endFixedSizeList(V)}visitMap($,V){return j.Map.startMap(V),j.Map.addKeysSorted(V,$.keysSorted),j.Map.endMap(V)}}return Hh.TypeAssembler=N,Hh.instance=new N,Hh}var _o={},HN;function lit(){if(HN)return _o;HN=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.fieldFromJSON=_o.dictionaryBatchFromJSON=_o.recordBatchFromJSON=_o.schemaFromJSON=void 0;const t=Ma(),e=Pn(),i=VA(),n=nr();function r(I,O=new Map){return new t.Schema(o(I,O),b(I.metadata),O)}_o.schemaFromJSON=r;function s(I){return new i.RecordBatch(I.count,c(I.columns),h(I.columns))}_o.recordBatchFromJSON=s;function a(I){return new i.DictionaryBatch(s(I.data),I.id,I.isDelta)}_o.dictionaryBatchFromJSON=a;function o(I,O){return(I.fields||[]).filter(Boolean).map(D=>t.Field.fromJSON(D,O))}function l(I,O){return(I.children||[]).filter(Boolean).map(D=>t.Field.fromJSON(D,O))}function c(I){return(I||[]).reduce((O,D)=>[...O,new i.FieldNode(D.count,A(D.VALIDITY)),...c(D.children)],[])}function h(I,O=[]){for(let D=-1,B=(I||[]).length;++D<B;){const P=I[D];P.VALIDITY&&O.push(new i.BufferRegion(O.length,P.VALIDITY.length)),P.TYPE_ID&&O.push(new i.BufferRegion(O.length,P.TYPE_ID.length)),P.OFFSET&&O.push(new i.BufferRegion(O.length,P.OFFSET.length)),P.DATA&&O.push(new i.BufferRegion(O.length,P.DATA.length)),O=h(P.children,O)}return O}function A(I){return(I||[]).reduce((O,D)=>O+ +(D===0),0)}function m(I,O){let D,B,P,j,N,F;return!O||!(j=I.dictionary)?(N=M(I,l(I,O)),P=new t.Field(I.name,N,I.nullable,b(I.metadata))):O.has(D=j.id)?(B=(B=j.indexType)?S(B):new e.Int32,F=new e.Dictionary(O.get(D),B,D,j.isOrdered),P=new t.Field(I.name,F,I.nullable,b(I.metadata))):(B=(B=j.indexType)?S(B):new e.Int32,O.set(D,N=M(I,l(I,O))),F=new e.Dictionary(N,B,D,j.isOrdered),P=new t.Field(I.name,F,I.nullable,b(I.metadata))),P||null}_o.fieldFromJSON=m;function b(I=[]){return new Map(I.map(({key:O,value:D})=>[O,D]))}function S(I){return new e.Int(I.isSigned,I.bitWidth)}function M(I,O){const D=I.type.name;switch(D){case"NONE":return new e.Null;case"null":return new e.Null;case"binary":return new e.Binary;case"largebinary":return new e.LargeBinary;case"utf8":return new e.Utf8;case"largeutf8":return new e.LargeUtf8;case"bool":return new e.Bool;case"list":return new e.List((O||[])[0]);case"struct":return new e.Struct(O||[]);case"struct_":return new e.Struct(O||[])}switch(D){case"int":{const B=I.type;return new e.Int(B.isSigned,B.bitWidth)}case"floatingpoint":{const B=I.type;return new e.Float(n.Precision[B.precision])}case"decimal":{const B=I.type;return new e.Decimal(B.scale,B.precision,B.bitWidth)}case"date":{const B=I.type;return new e.Date_(n.DateUnit[B.unit])}case"time":{const B=I.type;return new e.Time(n.TimeUnit[B.unit],B.bitWidth)}case"timestamp":{const B=I.type;return new e.Timestamp(n.TimeUnit[B.unit],B.timezone)}case"interval":{const B=I.type;return new e.Interval(n.IntervalUnit[B.unit])}case"duration":{const B=I.type;return new e.Duration(n.TimeUnit[B.unit])}case"union":{const B=I.type,[P,...j]=(B.mode+"").toLowerCase(),N=P.toUpperCase()+j.join("");return new e.Union(n.UnionMode[N],B.typeIds||[],O||[])}case"fixedsizebinary":{const B=I.type;return new e.FixedSizeBinary(B.byteWidth)}case"fixedsizelist":{const B=I.type;return new e.FixedSizeList(B.listSize,(O||[])[0])}case"map":{const B=I.type;return new e.Map_((O||[])[0],B.keysSorted)}}throw new Error(`Unrecognized type: "${D}"`)}return _o}var qN;function VA(){if(qN)return da;qN=1,Object.defineProperty(da,"__esModule",{value:!0}),da.FieldNode=da.BufferRegion=da.DictionaryBatch=da.RecordBatch=da.Message=void 0;const t=Re,e=hB(),i=jf(),n=JE(),r=i9(),s=kf(),a=d9(),o=e9(),l=Z_(),c=K_(),h=n9(),A=sB(),m=eB(),b=tB(),S=lB(),M=cB(),I=aB(),O=iB(),D=uB(),B=nB(),P=rB(),j=oB(),N=ait(),F=Ma(),$=Xr(),V=zf(),Z=nr(),nt=oit(),X=lit();var bt=t.Builder,Tt=t.ByteBuffer;const Ot=Pn();class H{static fromJSON(ut,vt){const Mt=new H(0,Z.MetadataVersion.V5,vt);return Mt._createHeader=mt(ut,vt),Mt}static decode(ut){ut=new Tt((0,$.toUint8Array)(ut));const vt=N.Message.getRootAsMessage(ut),Mt=vt.bodyLength(),re=vt.version(),be=vt.headerType(),Be=new H(Mt,re,be);return Be._createHeader=wt(vt,be),Be}static encode(ut){const vt=new bt;let Mt=-1;return ut.isSchema()?Mt=F.Schema.encode(vt,ut.header()):ut.isRecordBatch()?Mt=k.encode(vt,ut.header()):ut.isDictionaryBatch()&&(Mt=G.encode(vt,ut.header())),N.Message.startMessage(vt),N.Message.addVersion(vt,Z.MetadataVersion.V5),N.Message.addHeader(vt,Mt),N.Message.addHeaderType(vt,ut.headerType),N.Message.addBodyLength(vt,BigInt(ut.bodyLength)),N.Message.finishMessageBuffer(vt,N.Message.endMessage(vt)),vt.asUint8Array()}static from(ut,vt=0){if(ut instanceof F.Schema)return new H(0,Z.MetadataVersion.V5,Z.MessageHeader.Schema,ut);if(ut instanceof k)return new H(vt,Z.MetadataVersion.V5,Z.MessageHeader.RecordBatch,ut);if(ut instanceof G)return new H(vt,Z.MetadataVersion.V5,Z.MessageHeader.DictionaryBatch,ut);throw new Error(`Unrecognized Message header: ${ut}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Z.MessageHeader.Schema}isRecordBatch(){return this.headerType===Z.MessageHeader.RecordBatch}isDictionaryBatch(){return this.headerType===Z.MessageHeader.DictionaryBatch}constructor(ut,vt,Mt,re){this._version=vt,this._headerType=Mt,this.body=new Uint8Array(0),re&&(this._createHeader=()=>re),this._bodyLength=(0,V.bigIntToNumber)(ut)}}da.Message=H;class k{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(ut,vt,Mt){this._nodes=vt,this._buffers=Mt,this._length=(0,V.bigIntToNumber)(ut)}}da.RecordBatch=k;class G{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(ut,vt,Mt=!1){this._data=ut,this._isDelta=Mt,this._id=(0,V.bigIntToNumber)(vt)}}da.DictionaryBatch=G;class lt{constructor(ut,vt){this.offset=(0,V.bigIntToNumber)(ut),this.length=(0,V.bigIntToNumber)(vt)}}da.BufferRegion=lt;class Q{constructor(ut,vt){this.length=(0,V.bigIntToNumber)(ut),this.nullCount=(0,V.bigIntToNumber)(vt)}}da.FieldNode=Q;function mt(J,ut){return()=>{switch(ut){case Z.MessageHeader.Schema:return F.Schema.fromJSON(J);case Z.MessageHeader.RecordBatch:return k.fromJSON(J);case Z.MessageHeader.DictionaryBatch:return G.fromJSON(J)}throw new Error(`Unrecognized Message type: { name: ${Z.MessageHeader[ut]}, type: ${ut} }`)}}function wt(J,ut){return()=>{switch(ut){case Z.MessageHeader.Schema:return F.Schema.decode(J.header(new e.Schema),new Map,J.version());case Z.MessageHeader.RecordBatch:return k.decode(J.header(new n.RecordBatch),J.version());case Z.MessageHeader.DictionaryBatch:return G.decode(J.header(new r.DictionaryBatch),J.version())}throw new Error(`Unrecognized Message type: { name: ${Z.MessageHeader[ut]}, type: ${ut} }`)}}F.Field.encode=dt,F.Field.decode=pe,F.Field.fromJSON=X.fieldFromJSON,F.Schema.encode=qe,F.Schema.decode=Dt,F.Schema.fromJSON=X.schemaFromJSON,k.encode=Y,k.decode=te,k.fromJSON=X.recordBatchFromJSON,G.encode=K,G.decode=ie,G.fromJSON=X.dictionaryBatchFromJSON,Q.encode=Ct,Q.decode=Ht,lt.encode=ee,lt.decode=ft;function Dt(J,ut=new Map,vt=Z.MetadataVersion.V5){const Mt=me(J,ut);return new F.Schema(Mt,Oe(J),ut,vt)}function te(J,ut=Z.MetadataVersion.V5){if(J.compression()!==null)throw new Error("Record batch compression not implemented");return new k(J.length(),Nt(J),he(J,ut))}function ie(J,ut=Z.MetadataVersion.V5){return new G(k.decode(J.data(),ut),J.id(),J.isDelta())}function ft(J){return new lt(J.offset(),J.length())}function Ht(J){return new Q(J.length(),J.nullCount())}function Nt(J){const ut=[];for(let vt,Mt=-1,re=-1,be=J.nodesLength();++Mt<be;)(vt=J.nodes(Mt))&&(ut[++re]=Q.decode(vt));return ut}function he(J,ut){const vt=[];for(let Mt,re=-1,be=-1,Be=J.buffersLength();++re<Be;)(Mt=J.buffers(re))&&(ut<Z.MetadataVersion.V4&&(Mt.bb_pos+=8*(re+1)),vt[++be]=lt.decode(Mt));return vt}function me(J,ut){const vt=[];for(let Mt,re=-1,be=-1,Be=J.fieldsLength();++re<Be;)(Mt=J.fields(re))&&(vt[++be]=F.Field.decode(Mt,ut));return vt}function Me(J,ut){const vt=[];for(let Mt,re=-1,be=-1,Be=J.childrenLength();++re<Be;)(Mt=J.children(re))&&(vt[++be]=F.Field.decode(Mt,ut));return vt}function pe(J,ut){let vt,Mt,re,be,Be,q;return!ut||!(q=J.dictionary())?(re=Ee(J,Me(J,ut)),Mt=new F.Field(J.name(),re,J.nullable(),Oe(J))):ut.has(vt=(0,V.bigIntToNumber)(q.id()))?(be=(be=q.indexType())?Ye(be):new Ot.Int32,Be=new Ot.Dictionary(ut.get(vt),be,vt,q.isOrdered()),Mt=new F.Field(J.name(),Be,J.nullable(),Oe(J))):(be=(be=q.indexType())?Ye(be):new Ot.Int32,ut.set(vt,re=Ee(J,Me(J,ut))),Be=new Ot.Dictionary(re,be,vt,q.isOrdered()),Mt=new F.Field(J.name(),Be,J.nullable(),Oe(J))),Mt||null}function Oe(J){const ut=new Map;if(J)for(let vt,Mt,re=-1,be=Math.trunc(J.customMetadataLength());++re<be;)(vt=J.customMetadata(re))&&(Mt=vt.key())!=null&&ut.set(Mt,vt.value());return ut}function Ye(J){return new Ot.Int(J.isSigned(),J.bitWidth())}function Ee(J,ut){const vt=J.typeType();switch(vt){case l.Type.NONE:return new Ot.Null;case l.Type.Null:return new Ot.Null;case l.Type.Binary:return new Ot.Binary;case l.Type.LargeBinary:return new Ot.LargeBinary;case l.Type.Utf8:return new Ot.Utf8;case l.Type.LargeUtf8:return new Ot.LargeUtf8;case l.Type.Bool:return new Ot.Bool;case l.Type.List:return new Ot.List((ut||[])[0]);case l.Type.Struct_:return new Ot.Struct(ut||[])}switch(vt){case l.Type.Int:{const Mt=J.type(new i.Int);return new Ot.Int(Mt.isSigned(),Mt.bitWidth())}case l.Type.FloatingPoint:{const Mt=J.type(new A.FloatingPoint);return new Ot.Float(Mt.precision())}case l.Type.Decimal:{const Mt=J.type(new m.Decimal);return new Ot.Decimal(Mt.scale(),Mt.precision(),Mt.bitWidth())}case l.Type.Date:{const Mt=J.type(new b.Date);return new Ot.Date_(Mt.unit())}case l.Type.Time:{const Mt=J.type(new S.Time);return new Ot.Time(Mt.unit(),Mt.bitWidth())}case l.Type.Timestamp:{const Mt=J.type(new M.Timestamp);return new Ot.Timestamp(Mt.unit(),Mt.timezone())}case l.Type.Interval:{const Mt=J.type(new I.Interval);return new Ot.Interval(Mt.unit())}case l.Type.Duration:{const Mt=J.type(new O.Duration);return new Ot.Duration(Mt.unit())}case l.Type.Union:{const Mt=J.type(new D.Union);return new Ot.Union(Mt.mode(),Mt.typeIdsArray()||[],ut||[])}case l.Type.FixedSizeBinary:{const Mt=J.type(new B.FixedSizeBinary);return new Ot.FixedSizeBinary(Mt.byteWidth())}case l.Type.FixedSizeList:{const Mt=J.type(new P.FixedSizeList);return new Ot.FixedSizeList(Mt.listSize(),(ut||[])[0])}case l.Type.Map:{const Mt=J.type(new j.Map);return new Ot.Map_((ut||[])[0],Mt.keysSorted())}}throw new Error(`Unrecognized type: "${l.Type[vt]}" (${vt})`)}function qe(J,ut){const vt=ut.fields.map(be=>F.Field.encode(J,be));e.Schema.startFieldsVector(J,vt.length);const Mt=e.Schema.createFieldsVector(J,vt),re=ut.metadata&&ut.metadata.size>0?e.Schema.createCustomMetadataVector(J,[...ut.metadata].map(([be,Be])=>{const q=J.createString(`${be}`),Bt=J.createString(`${Be}`);return c.KeyValue.startKeyValue(J),c.KeyValue.addKey(J,q),c.KeyValue.addValue(J,Bt),c.KeyValue.endKeyValue(J)})):-1;return e.Schema.startSchema(J),e.Schema.addFields(J,Mt),e.Schema.addEndianness(J,Ft?h.Endianness.Little:h.Endianness.Big),re!==-1&&e.Schema.addCustomMetadata(J,re),e.Schema.endSchema(J)}function dt(J,ut){let vt=-1,Mt=-1,re=-1;const be=ut.type;let Be=ut.typeId;Ot.DataType.isDictionary(be)?(Be=be.dictionary.typeId,re=nt.instance.visit(be,J),Mt=nt.instance.visit(be.dictionary,J)):Mt=nt.instance.visit(be,J);const q=(be.children||[]).map(ke=>F.Field.encode(J,ke)),Bt=a.Field.createChildrenVector(J,q),Xt=ut.metadata&&ut.metadata.size>0?a.Field.createCustomMetadataVector(J,[...ut.metadata].map(([ke,qi])=>{const Tn=J.createString(`${ke}`),xn=J.createString(`${qi}`);return c.KeyValue.startKeyValue(J),c.KeyValue.addKey(J,Tn),c.KeyValue.addValue(J,xn),c.KeyValue.endKeyValue(J)})):-1;return ut.name&&(vt=J.createString(ut.name)),a.Field.startField(J),a.Field.addType(J,Mt),a.Field.addTypeType(J,Be),a.Field.addChildren(J,Bt),a.Field.addNullable(J,!!ut.nullable),vt!==-1&&a.Field.addName(J,vt),re!==-1&&a.Field.addDictionary(J,re),Xt!==-1&&a.Field.addCustomMetadata(J,Xt),a.Field.endField(J)}function Y(J,ut){const vt=ut.nodes||[],Mt=ut.buffers||[];n.RecordBatch.startNodesVector(J,vt.length);for(const Be of vt.slice().reverse())Q.encode(J,Be);const re=J.endVector();n.RecordBatch.startBuffersVector(J,Mt.length);for(const Be of Mt.slice().reverse())lt.encode(J,Be);const be=J.endVector();return n.RecordBatch.startRecordBatch(J),n.RecordBatch.addLength(J,BigInt(ut.length)),n.RecordBatch.addNodes(J,re),n.RecordBatch.addBuffers(J,be),n.RecordBatch.endRecordBatch(J)}function K(J,ut){const vt=k.encode(J,ut.data);return r.DictionaryBatch.startDictionaryBatch(J),r.DictionaryBatch.addId(J,BigInt(ut.id)),r.DictionaryBatch.addIsDelta(J,ut.isDelta),r.DictionaryBatch.addData(J,vt),r.DictionaryBatch.endDictionaryBatch(J)}function Ct(J,ut){return o.FieldNode.createFieldNode(J,BigInt(ut.length),BigInt(ut.nullCount))}function ee(J,ut){return s.Buffer.createBuffer(J,BigInt(ut.offset),BigInt(ut.length))}const Ft=(()=>{const J=new ArrayBuffer(2);return new DataView(J).setInt16(0,256,!0),new Int16Array(J)[0]===256})();return da}var YN;function bB(){return YN||(YN=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.magicX2AndPadding=t.magicAndPadding=t.magicLength=t.checkForMagicArrowString=t.MAGIC=t.MAGIC_STR=t.PADDING=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=void 0;const e=Bn,i=nr(),n=Re,r=VA(),s=Uf(),a=p9(),o=Xr(),l=Vf(),c=vT(),h=D=>`Expected ${i.MessageHeader[D]} Message in stream, but was null or length 0.`,A=D=>`Header pointer of flatbuffer-encoded ${i.MessageHeader[D]} Message is null or length 0.`,m=(D,B)=>`Expected to read ${D} metadata bytes, but only read ${B}.`,b=(D,B)=>`Expected to read ${D} bytes for message body, but only read ${B}.`;class S{constructor(B){this.source=B instanceof l.ByteStream?B:new l.ByteStream(B)}[Symbol.iterator](){return this}next(){let B;return(B=this.readMetadataLength()).done||B.value===-1&&(B=this.readMetadataLength()).done||(B=this.readMetadata(B.value)).done?c.ITERATOR_DONE:B}throw(B){return this.source.throw(B)}return(B){return this.source.return(B)}readMessage(B){let P;if((P=this.next()).done)return null;if(B!=null&&P.value.headerType!==B)throw new Error(h(B));return P.value}readMessageBody(B){if(B<=0)return new Uint8Array(0);const P=(0,o.toUint8Array)(this.source.read(B));if(P.byteLength<B)throw new Error(b(B,P.byteLength));return P.byteOffset%8===0&&P.byteOffset+P.byteLength<=P.buffer.byteLength?P:P.slice()}readSchema(B=!1){const P=i.MessageHeader.Schema,j=this.readMessage(P),N=j==null?void 0:j.header();if(B&&!N)throw new Error(A(P));return N}readMetadataLength(){const B=this.source.read(t.PADDING),P=B&&new n.ByteBuffer(B),j=(P==null?void 0:P.readInt32(0))||0;return{done:j===0,value:j}}readMetadata(B){const P=this.source.read(B);if(!P)return c.ITERATOR_DONE;if(P.byteLength<B)throw new Error(m(B,P.byteLength));return{done:!1,value:r.Message.decode(P)}}}t.MessageReader=S;class M{constructor(B,P){this.source=B instanceof l.AsyncByteStream?B:(0,s.isFileHandle)(B)?new a.AsyncRandomAccessFile(B,P):new l.AsyncByteStream(B)}[Symbol.asyncIterator](){return this}next(){return e.__awaiter(this,void 0,void 0,function*(){let B;return(B=yield this.readMetadataLength()).done||B.value===-1&&(B=yield this.readMetadataLength()).done||(B=yield this.readMetadata(B.value)).done?c.ITERATOR_DONE:B})}throw(B){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.throw(B)})}return(B){return e.__awaiter(this,void 0,void 0,function*(){return yield this.source.return(B)})}readMessage(B){return e.__awaiter(this,void 0,void 0,function*(){let P;if((P=yield this.next()).done)return null;if(B!=null&&P.value.headerType!==B)throw new Error(h(B));return P.value})}readMessageBody(B){return e.__awaiter(this,void 0,void 0,function*(){if(B<=0)return new Uint8Array(0);const P=(0,o.toUint8Array)(yield this.source.read(B));if(P.byteLength<B)throw new Error(b(B,P.byteLength));return P.byteOffset%8===0&&P.byteOffset+P.byteLength<=P.buffer.byteLength?P:P.slice()})}readSchema(){return e.__awaiter(this,arguments,void 0,function*(B=!1){const P=i.MessageHeader.Schema,j=yield this.readMessage(P),N=j==null?void 0:j.header();if(B&&!N)throw new Error(A(P));return N})}readMetadataLength(){return e.__awaiter(this,void 0,void 0,function*(){const B=yield this.source.read(t.PADDING),P=B&&new n.ByteBuffer(B),j=(P==null?void 0:P.readInt32(0))||0;return{done:j===0,value:j}})}readMetadata(B){return e.__awaiter(this,void 0,void 0,function*(){const P=yield this.source.read(B);if(!P)return c.ITERATOR_DONE;if(P.byteLength<B)throw new Error(m(B,P.byteLength));return{done:!1,value:r.Message.decode(P)}})}}t.AsyncMessageReader=M;class I extends S{constructor(B){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=B instanceof c.ArrowJSON?B:new c.ArrowJSON(B)}next(){const{_json:B}=this;if(!this._schema)return this._schema=!0,{done:!1,value:r.Message.fromJSON(B.schema,i.MessageHeader.Schema)};if(this._dictionaryIndex<B.dictionaries.length){const P=B.dictionaries[this._dictionaryIndex++];return this._body=P.data.columns,{done:!1,value:r.Message.fromJSON(P,i.MessageHeader.DictionaryBatch)}}if(this._batchIndex<B.batches.length){const P=B.batches[this._batchIndex++];return this._body=P.columns,{done:!1,value:r.Message.fromJSON(P,i.MessageHeader.RecordBatch)}}return this._body=[],c.ITERATOR_DONE}readMessageBody(B){return P(this._body);function P(j){return(j||[]).reduce((N,F)=>[...N,...F.VALIDITY&&[F.VALIDITY]||[],...F.TYPE_ID&&[F.TYPE_ID]||[],...F.OFFSET&&[F.OFFSET]||[],...F.DATA&&[F.DATA]||[],...P(F.children)],[])}}readMessage(B){let P;if((P=this.next()).done)return null;if(B!=null&&P.value.headerType!==B)throw new Error(h(B));return P.value}readSchema(){const B=i.MessageHeader.Schema,P=this.readMessage(B),j=P==null?void 0:P.header();if(!P||!j)throw new Error(A(B));return j}}t.JSONMessageReader=I,t.PADDING=4,t.MAGIC_STR="ARROW1",t.MAGIC=new Uint8Array(t.MAGIC_STR.length);for(let D=0;D<t.MAGIC_STR.length;D+=1)t.MAGIC[D]=t.MAGIC_STR.codePointAt(D);function O(D,B=0){for(let P=-1,j=t.MAGIC.length;++P<j;)if(t.MAGIC[P]!==D[B+P])return!1;return!0}t.checkForMagicArrowString=O,t.magicLength=t.MAGIC.length,t.magicAndPadding=t.magicLength+t.PADDING,t.magicX2AndPadding=t.magicLength*2+t.PADDING}(c3)),c3}var GN;function wT(){if(GN)return la;GN=1,Object.defineProperty(la,"__esModule",{value:!0}),la.AsyncRecordBatchFileReader=la.RecordBatchFileReader=la.AsyncRecordBatchStreamReader=la.RecordBatchStreamReader=la.RecordBatchReader=void 0;const t=Bn,e=Dc(),i=zs(),n=Pn(),r=nr(),s=y9(),a=yT(),o=Vf(),l=p9(),c=nit(),h=$f(),A=vT(),m=bB(),b=Uf();class S extends A.ReadableInterop{constructor(k){super(),this._impl=k}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(k){return this._impl.throw(k)}return(k){return this._impl.return(k)}cancel(){return this._impl.cancel()}reset(k){return this._impl.reset(k),this._DOMStream=void 0,this._nodeStream=void 0,this}open(k){const G=this._impl.open(k);return(0,b.isPromise)(G)?G.then(()=>this):this}readRecordBatch(k){return this._impl.isFile()?this._impl.readRecordBatch(k):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return a.default.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return a.default.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(k){throw new Error('"throughNode" not available in this environment')}static throughDOM(k,G){throw new Error('"throughDOM" not available in this environment')}static from(k){return k instanceof S?k:(0,b.isArrowJSON)(k)?X(k):(0,b.isFileHandle)(k)?Ot(k):(0,b.isPromise)(k)?t.__awaiter(this,void 0,void 0,function*(){return yield S.from(yield k)}):(0,b.isFetchResponse)(k)||(0,b.isReadableDOMStream)(k)||(0,b.isReadableNodeStream)(k)||(0,b.isAsyncIterable)(k)?Tt(new o.AsyncByteStream(k)):bt(new o.ByteStream(k))}static readAll(k){return k instanceof S?k.isSync()?Z(k):nt(k):(0,b.isArrowJSON)(k)||ArrayBuffer.isView(k)||(0,b.isIterable)(k)||(0,b.isIteratorResult)(k)?Z(k):nt(k)}}la.RecordBatchReader=S;class M extends S{constructor(k){super(k),this._impl=k}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return t.__asyncGenerator(this,arguments,function*(){yield t.__await(yield*t.__asyncDelegator(t.__asyncValues(this[Symbol.iterator]())))})}}la.RecordBatchStreamReader=M;class I extends S{constructor(k){super(k),this._impl=k}readAll(){return t.__awaiter(this,void 0,void 0,function*(){var k,G,lt,Q;const mt=new Array;try{for(var wt=!0,Dt=t.__asyncValues(this),te;te=yield Dt.next(),k=te.done,!k;wt=!0){Q=te.value,wt=!1;const ie=Q;mt.push(ie)}}catch(ie){G={error:ie}}finally{try{!wt&&!k&&(lt=Dt.return)&&(yield lt.call(Dt))}finally{if(G)throw G.error}}return mt})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}la.AsyncRecordBatchStreamReader=I;class O extends M{constructor(k){super(k),this._impl=k}}la.RecordBatchFileReader=O;class D extends I{constructor(k){super(k),this._impl=k}}la.AsyncRecordBatchFileReader=D;class B{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(k=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=k}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(k){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=k,this.dictionaries=new Map,this}_loadRecordBatch(k,G){const lt=this._loadVectors(k,G,this.schema.fields),Q=(0,e.makeData)({type:new n.Struct(this.schema.fields),length:k.length,children:lt});return new h.RecordBatch(this.schema,Q)}_loadDictionaryBatch(k,G){const{id:lt,isDelta:Q}=k,{dictionaries:mt,schema:wt}=this,Dt=mt.get(lt),te=wt.dictionaries.get(lt),ie=this._loadVectors(k.data,G,[te]);return(Dt&&Q?Dt.concat(new i.Vector(ie)):new i.Vector(ie)).memoize()}_loadVectors(k,G,lt){return new c.VectorLoader(G,k.nodes,k.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(lt)}}class P extends B{constructor(k,G){super(G),this._reader=(0,b.isArrowJSON)(k)?new m.JSONMessageReader(this._handle=k):new m.MessageReader(this._handle=k)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(k){return this.closed||(this.autoDestroy=V(this,k),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(k){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(k):A.ITERATOR_DONE}return(k){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(k):A.ITERATOR_DONE}next(){if(this.closed)return A.ITERATOR_DONE;let k;const{_reader:G}=this;for(;k=this._readNextMessageAndValidate();)if(k.isSchema())this.reset(k.header());else if(k.isRecordBatch()){this._recordBatchIndex++;const lt=k.header(),Q=G.readMessageBody(k.bodyLength);return{done:!1,value:this._loadRecordBatch(lt,Q)}}else if(k.isDictionaryBatch()){this._dictionaryIndex++;const lt=k.header(),Q=G.readMessageBody(k.bodyLength),mt=this._loadDictionaryBatch(lt,Q);this.dictionaries.set(lt.id,mt)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new h._InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(k){return this._reader.readMessage(k)}}class j extends B{constructor(k,G){super(G),this._reader=new m.AsyncMessageReader(this._handle=k)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return t.__awaiter(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(k){return t.__awaiter(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=V(this,k),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(k){return t.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(k):A.ITERATOR_DONE})}return(k){return t.__awaiter(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(k):A.ITERATOR_DONE})}next(){return t.__awaiter(this,void 0,void 0,function*(){if(this.closed)return A.ITERATOR_DONE;let k;const{_reader:G}=this;for(;k=yield this._readNextMessageAndValidate();)if(k.isSchema())yield this.reset(k.header());else if(k.isRecordBatch()){this._recordBatchIndex++;const lt=k.header(),Q=yield G.readMessageBody(k.bodyLength);return{done:!1,value:this._loadRecordBatch(lt,Q)}}else if(k.isDictionaryBatch()){this._dictionaryIndex++;const lt=k.header(),Q=yield G.readMessageBody(k.bodyLength),mt=this._loadDictionaryBatch(lt,Q);this.dictionaries.set(lt.id,mt)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new h._InternalEmptyPlaceholderRecordBatch(this.schema)}):yield this.return()})}_readNextMessageAndValidate(k){return t.__awaiter(this,void 0,void 0,function*(){return yield this._reader.readMessage(k)})}}class N extends P{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(k,G){super(k instanceof l.RandomAccessFile?k:new l.RandomAccessFile(k),G)}isSync(){return!0}isFile(){return!0}open(k){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const G of this._footer.dictionaryBatches())G&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(k)}readRecordBatch(k){var G;if(this.closed)return null;this._footer||this.open();const lt=(G=this._footer)===null||G===void 0?void 0:G.getRecordBatch(k);if(lt&&this._handle.seek(lt.offset)){const Q=this._reader.readMessage(r.MessageHeader.RecordBatch);if(Q!=null&&Q.isRecordBatch()){const mt=Q.header(),wt=this._reader.readMessageBody(Q.bodyLength);return this._loadRecordBatch(mt,wt)}}return null}_readDictionaryBatch(k){var G;const lt=(G=this._footer)===null||G===void 0?void 0:G.getDictionaryBatch(k);if(lt&&this._handle.seek(lt.offset)){const Q=this._reader.readMessage(r.MessageHeader.DictionaryBatch);if(Q!=null&&Q.isDictionaryBatch()){const mt=Q.header(),wt=this._reader.readMessageBody(Q.bodyLength),Dt=this._loadDictionaryBatch(mt,wt);this.dictionaries.set(mt.id,Dt)}}}_readFooter(){const{_handle:k}=this,G=k.size-m.magicAndPadding,lt=k.readInt32(G),Q=k.readAt(G-lt,lt);return s.Footer.decode(Q)}_readNextMessageAndValidate(k){var G;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const lt=(G=this._footer)===null||G===void 0?void 0:G.getRecordBatch(this._recordBatchIndex);if(lt&&this._handle.seek(lt.offset))return this._reader.readMessage(k)}return null}}class F extends j{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(k,...G){const lt=typeof G[0]!="number"?G.shift():void 0,Q=G[0]instanceof Map?G.shift():void 0;super(k instanceof l.AsyncRandomAccessFile?k:new l.AsyncRandomAccessFile(k,lt),Q)}isFile(){return!0}isAsync(){return!0}open(k){const G=Object.create(null,{open:{get:()=>super.open}});return t.__awaiter(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const lt of this._footer.dictionaryBatches())lt&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield G.open.call(this,k)})}readRecordBatch(k){return t.__awaiter(this,void 0,void 0,function*(){var G;if(this.closed)return null;this._footer||(yield this.open());const lt=(G=this._footer)===null||G===void 0?void 0:G.getRecordBatch(k);if(lt&&(yield this._handle.seek(lt.offset))){const Q=yield this._reader.readMessage(r.MessageHeader.RecordBatch);if(Q!=null&&Q.isRecordBatch()){const mt=Q.header(),wt=yield this._reader.readMessageBody(Q.bodyLength);return this._loadRecordBatch(mt,wt)}}return null})}_readDictionaryBatch(k){return t.__awaiter(this,void 0,void 0,function*(){var G;const lt=(G=this._footer)===null||G===void 0?void 0:G.getDictionaryBatch(k);if(lt&&(yield this._handle.seek(lt.offset))){const Q=yield this._reader.readMessage(r.MessageHeader.DictionaryBatch);if(Q!=null&&Q.isDictionaryBatch()){const mt=Q.header(),wt=yield this._reader.readMessageBody(Q.bodyLength),Dt=this._loadDictionaryBatch(mt,wt);this.dictionaries.set(mt.id,Dt)}}})}_readFooter(){return t.__awaiter(this,void 0,void 0,function*(){const{_handle:k}=this;k._pending&&(yield k._pending);const G=k.size-m.magicAndPadding,lt=yield k.readInt32(G),Q=yield k.readAt(G-lt,lt);return s.Footer.decode(Q)})}_readNextMessageAndValidate(k){return t.__awaiter(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const G=this._footer.getRecordBatch(this._recordBatchIndex);if(G&&(yield this._handle.seek(G.offset)))return yield this._reader.readMessage(k)}return null})}}class $ extends P{constructor(k,G){super(k,G)}_loadVectors(k,G,lt){return new c.JSONVectorLoader(G,k.nodes,k.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(lt)}}function V(H,k){return k&&typeof k.autoDestroy=="boolean"?k.autoDestroy:H.autoDestroy}function*Z(H){const k=S.from(H);try{if(!k.open({autoDestroy:!1}).closed)do yield k;while(!k.reset().open().closed)}finally{k.cancel()}}function nt(H){return t.__asyncGenerator(this,arguments,function*(){const G=yield t.__await(S.from(H));try{if(!(yield t.__await(G.open({autoDestroy:!1}))).closed)do yield yield t.__await(G);while(!(yield t.__await(G.reset().open())).closed)}finally{yield t.__await(G.cancel())}})}function X(H){return new M(new $(H))}function bt(H){const k=H.peek(m.magicLength+7&-8);return k&&k.byteLength>=4?(0,m.checkForMagicArrowString)(k)?new O(new N(H.read())):new M(new P(H)):new M(new P(function*(){}()))}function Tt(H){return t.__awaiter(this,void 0,void 0,function*(){const k=yield H.peek(m.magicLength+7&-8);return k&&k.byteLength>=4?(0,m.checkForMagicArrowString)(k)?new O(new N(yield H.read())):new I(new j(H)):new I(new j(function(){return t.__asyncGenerator(this,arguments,function*(){})}()))})}function Ot(H){return t.__awaiter(this,void 0,void 0,function*(){const{size:k}=yield H.stat(),G=new l.AsyncRandomAccessFile(H,k);return k>=m.magicX2AndPadding&&(0,m.checkForMagicArrowString)(yield G.readAt(0,m.magicLength+7&-8))?new D(new F(G)):new I(new j(G))})}return la}var bo={},Am={},XN;function cit(){if(XN)return Am;XN=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.VectorAssembler=void 0;const t=zs(),e=wa(),i=nr(),n=$f(),r=Xr(),s=d0(),a=VA(),o=Pn(),l=zf();class c extends e.Visitor{static assemble(...D){const B=j=>j.flatMap(N=>Array.isArray(N)?B(N):N instanceof n.RecordBatch?N.data.children:N.data),P=new c;return P.visitMany(B(D)),P}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(D){if(D instanceof t.Vector)return this.visitMany(D.data),this;const{type:B}=D;if(!o.DataType.isDictionary(B)){const{length:P}=D;if(P>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(o.DataType.isUnion(B))this.nodes.push(new a.FieldNode(P,0));else{const{nullCount:j}=D;o.DataType.isNull(B)||h.call(this,j<=0?new Uint8Array(0):(0,s.truncateBitmap)(D.offset,P,D.nullBitmap)),this.nodes.push(new a.FieldNode(P,j))}}return super.visit(D)}visitNull(D){return this}visitDictionary(D){return this.visit(D.clone(D.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}Am.VectorAssembler=c;function h(O){const D=O.byteLength+7&-8;return this.buffers.push(O),this.bufferRegions.push(new a.BufferRegion(this._byteLength,D)),this._byteLength+=D,this}function A(O){var D;const{type:B,length:P,typeIds:j,valueOffsets:N}=O;if(h.call(this,j),B.mode===i.UnionMode.Sparse)return I.call(this,O);if(B.mode===i.UnionMode.Dense){if(O.offset<=0)return h.call(this,N),I.call(this,O);{const F=new Int32Array(P),$=Object.create(null),V=Object.create(null);for(let Z,nt,X=-1;++X<P;)(Z=j[X])!==void 0&&((nt=$[Z])===void 0&&(nt=$[Z]=N[X]),F[X]=N[X]-nt,V[Z]=((D=V[Z])!==null&&D!==void 0?D:0)+1);h.call(this,F),this.visitMany(O.children.map((Z,nt)=>{const X=B.typeIds[nt],bt=$[X],Tt=V[X];return Z.slice(bt,Math.min(P,Tt))}))}}return this}function m(O){let D;return O.nullCount>=O.length?h.call(this,new Uint8Array(0)):(D=O.values)instanceof Uint8Array?h.call(this,(0,s.truncateBitmap)(O.offset,O.length,D)):h.call(this,(0,s.packBools)(O.values))}function b(O){return h.call(this,O.values.subarray(0,O.length*O.stride))}function S(O){const{length:D,values:B,valueOffsets:P}=O,j=(0,l.bigIntToNumber)(P[0]),N=(0,l.bigIntToNumber)(P[D]),F=Math.min(N-j,B.byteLength-j);return h.call(this,(0,r.rebaseValueOffsets)(-j,D+1,P)),h.call(this,B.subarray(j,j+F)),this}function M(O){const{length:D,valueOffsets:B}=O;if(B){const{[0]:P,[D]:j}=B;return h.call(this,(0,r.rebaseValueOffsets)(-P,D+1,B)),this.visit(O.children[0].slice(P,j-P))}return this.visit(O.children[0])}function I(O){return this.visitMany(O.type.children.map((D,B)=>O.children[B]).filter(Boolean))[0]}return c.prototype.visitBool=m,c.prototype.visitInt=b,c.prototype.visitFloat=b,c.prototype.visitUtf8=S,c.prototype.visitLargeUtf8=S,c.prototype.visitBinary=S,c.prototype.visitLargeBinary=S,c.prototype.visitFixedSizeBinary=b,c.prototype.visitDate=b,c.prototype.visitTimestamp=b,c.prototype.visitTime=b,c.prototype.visitDecimal=b,c.prototype.visitList=M,c.prototype.visitStruct=I,c.prototype.visitUnion=A,c.prototype.visitInterval=b,c.prototype.visitDuration=b,c.prototype.visitFixedSizeList=M,c.prototype.visitMap=M,Am}var gm={},QN;function uit(){if(QN)return gm;QN=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.JSONTypeAssembler=void 0;const t=wa(),e=Z_(),i=nr();class n extends t.Visitor{visit(s){return s==null?void 0:super.visit(s)}visitNull({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitInt({typeId:s,bitWidth:a,isSigned:o}){return{name:e.Type[s].toLowerCase(),bitWidth:a,isSigned:o}}visitFloat({typeId:s,precision:a}){return{name:e.Type[s].toLowerCase(),precision:i.Precision[a]}}visitBinary({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitLargeBinary({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitBool({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitUtf8({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitLargeUtf8({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitDecimal({typeId:s,scale:a,precision:o,bitWidth:l}){return{name:e.Type[s].toLowerCase(),scale:a,precision:o,bitWidth:l}}visitDate({typeId:s,unit:a}){return{name:e.Type[s].toLowerCase(),unit:i.DateUnit[a]}}visitTime({typeId:s,unit:a,bitWidth:o}){return{name:e.Type[s].toLowerCase(),unit:i.TimeUnit[a],bitWidth:o}}visitTimestamp({typeId:s,timezone:a,unit:o}){return{name:e.Type[s].toLowerCase(),unit:i.TimeUnit[o],timezone:a}}visitInterval({typeId:s,unit:a}){return{name:e.Type[s].toLowerCase(),unit:i.IntervalUnit[a]}}visitDuration({typeId:s,unit:a}){return{name:e.Type[s].toLocaleLowerCase(),unit:i.TimeUnit[a]}}visitList({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitStruct({typeId:s}){return{name:e.Type[s].toLowerCase()}}visitUnion({typeId:s,mode:a,typeIds:o}){return{name:e.Type[s].toLowerCase(),mode:i.UnionMode[a].toUpperCase(),typeIds:[...o]}}visitDictionary(s){return this.visit(s.dictionary)}visitFixedSizeBinary({typeId:s,byteWidth:a}){return{name:e.Type[s].toLowerCase(),byteWidth:a}}visitFixedSizeList({typeId:s,listSize:a}){return{name:e.Type[s].toLowerCase(),listSize:a}}visitMap({typeId:s,keysSorted:a}){return{name:e.Type[s].toLowerCase(),keysSorted:a}}}return gm.JSONTypeAssembler=n,gm}var ym={},KN;function hit(){if(KN)return ym;KN=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.JSONVectorAssembler=void 0;const t=dB(),e=zs(),i=wa(),n=nr(),r=nr(),s=d0(),a=Pn();class o extends i.Visitor{static assemble(...A){const m=new o;return A.map(({schema:b,data:S})=>m.visitMany(b.fields,S.children))}visit({name:A},m){const{length:b}=m,{offset:S,nullCount:M,nullBitmap:I}=m,O=a.DataType.isDictionary(m.type)?m.type.indices:m.type,D=Object.assign([],m.buffers,{[n.BufferType.VALIDITY]:void 0});return Object.assign({name:A,count:b,VALIDITY:a.DataType.isNull(O)||a.DataType.isUnion(O)?void 0:M<=0?Array.from({length:b},()=>1):[...new s.BitIterator(I,S,b,null,s.getBit)]},super.visit(m.clone(O,S,b,0,D)))}visitNull(){return{}}visitBool({values:A,offset:m,length:b}){return{DATA:[...new s.BitIterator(A,m,b,null,s.getBool)]}}visitInt(A){return{DATA:A.type.bitWidth<64?[...A.values]:[...c(A.values,2)]}}visitFloat(A){return{DATA:[...A.values]}}visitUtf8(A){return{DATA:[...new e.Vector([A])],OFFSET:[...A.valueOffsets]}}visitLargeUtf8(A){return{DATA:[...new e.Vector([A])],OFFSET:[...c(A.valueOffsets,2)]}}visitBinary(A){return{DATA:[...l(new e.Vector([A]))],OFFSET:[...A.valueOffsets]}}visitLargeBinary(A){return{DATA:[...l(new e.Vector([A]))],OFFSET:[...c(A.valueOffsets,2)]}}visitFixedSizeBinary(A){return{DATA:[...l(new e.Vector([A]))]}}visitDate(A){return{DATA:A.type.unit===r.DateUnit.DAY?[...A.values]:[...c(A.values,2)]}}visitTimestamp(A){return{DATA:[...c(A.values,2)]}}visitTime(A){return{DATA:A.type.unit<r.TimeUnit.MICROSECOND?[...A.values]:[...c(A.values,2)]}}visitDecimal(A){return{DATA:[...c(A.values,4)]}}visitList(A){return{OFFSET:[...A.valueOffsets],children:this.visitMany(A.type.children,A.children)}}visitStruct(A){return{children:this.visitMany(A.type.children,A.children)}}visitUnion(A){return{TYPE_ID:[...A.typeIds],OFFSET:A.type.mode===r.UnionMode.Dense?[...A.valueOffsets]:void 0,children:this.visitMany(A.type.children,A.children)}}visitInterval(A){return{DATA:[...A.values]}}visitDuration(A){return{DATA:[...c(A.values,2)]}}visitFixedSizeList(A){return{children:this.visitMany(A.type.children,A.children)}}visitMap(A){return{OFFSET:[...A.valueOffsets],children:this.visitMany(A.type.children,A.children)}}}ym.JSONVectorAssembler=o;function*l(h){for(const A of h)yield A.reduce((m,b)=>`${m}${("0"+(b&255).toString(16)).slice(-2)}`,"").toUpperCase()}function*c(h,A){const m=new Uint32Array(h.buffer);for(let b=-1,S=m.length/A;++b<S;)yield`${t.BN.new(m.subarray((b+0)*A,(b+1)*A),!1)}`}return ym}var ZN;function vB(){if(ZN)return bo;ZN=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.RecordBatchJSONWriter=bo.RecordBatchFileWriter=bo.RecordBatchStreamWriter=bo.RecordBatchWriter=void 0;const t=Bn,e=t1(),i=bB(),n=zs(),r=Pn(),s=VA(),a=VA(),o=y9(),l=nr(),c=TT(),h=Vf(),A=cit(),m=uit(),b=hit(),S=Xr(),M=$f(),I=vT(),O=Uf();class D extends I.ReadableInterop{static throughNode(X){throw new Error('"throughNode" not available in this environment')}static throughDOM(X,bt){throw new Error('"throughDOM" not available in this environment')}constructor(X){super(),this._position=0,this._started=!1,this._sink=new h.AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(0,O.isObject)(X)||(X={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof X.autoDestroy=="boolean"?X.autoDestroy:!0,this._writeLegacyIpcFormat=typeof X.writeLegacyIpcFormat=="boolean"?X.writeLegacyIpcFormat:!1}toString(X=!1){return this._sink.toString(X)}toUint8Array(X=!1){return this._sink.toUint8Array(X)}writeAll(X){return(0,O.isPromise)(X)?X.then(bt=>this.writeAll(bt)):(0,O.isAsyncIterable)(X)?F(this,X):N(this,X)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(X){return this._sink.toDOMStream(X)}toNodeStream(X){return this._sink.toNodeStream(X)}close(){return this.reset()._sink.close()}abort(X){return this.reset()._sink.abort(X)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(X=this._sink,bt=null){return X===this._sink||X instanceof h.AsyncByteQueue?this._sink=X:(this._sink=new h.AsyncByteQueue,X&&(0,O.isWritableDOMStream)(X)?this.toDOMStream({type:"bytes"}).pipeTo(X):X&&(0,O.isWritableNodeStream)(X)&&this.toNodeStream({objectMode:!1}).pipe(X)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!bt||!(0,c.compareSchemas)(bt,this._schema))&&(bt==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=bt,this._writeSchema(bt))),this}write(X){let bt=null;if(this._sink){if(X==null)return this.finish()&&void 0;if(X instanceof e.Table&&!(bt=X.schema))return this.finish()&&void 0;if(X instanceof M.RecordBatch&&!(bt=X.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(bt&&!(0,c.compareSchemas)(bt,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,bt)}X instanceof M.RecordBatch?X instanceof M._InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(X):X instanceof e.Table?this.writeAll(X.batches):(0,O.isIterable)(X)&&this.writeAll(X)}_writeMessage(X,bt=8){const Tt=bt-1,Ot=s.Message.encode(X),H=Ot.byteLength,k=this._writeLegacyIpcFormat?4:8,G=H+k+Tt&~Tt,lt=G-H-k;return X.headerType===l.MessageHeader.RecordBatch?this._recordBatchBlocks.push(new o.FileBlock(G,X.bodyLength,this._position)):X.headerType===l.MessageHeader.DictionaryBatch&&this._dictionaryBlocks.push(new o.FileBlock(G,X.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(G-k)),H>0&&this._write(Ot),this._writePadding(lt)}_write(X){if(this._started){const bt=(0,S.toUint8Array)(X);bt&&bt.byteLength>0&&(this._sink.write(bt),this._position+=bt.byteLength)}return this}_writeSchema(X){return this._writeMessage(s.Message.from(X))}_writeFooter(X){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(i.MAGIC)}_writePadding(X){return X>0?this._write(new Uint8Array(X)):this}_writeRecordBatch(X){const{byteLength:bt,nodes:Tt,bufferRegions:Ot,buffers:H}=A.VectorAssembler.assemble(X),k=new a.RecordBatch(X.numRows,Tt,Ot),G=s.Message.from(k,bt);return this._writeDictionaries(X)._writeMessage(G)._writeBodyBuffers(H)}_writeDictionaryBatch(X,bt,Tt=!1){const{byteLength:Ot,nodes:H,bufferRegions:k,buffers:G}=A.VectorAssembler.assemble(new n.Vector([X])),lt=new a.RecordBatch(X.length,H,k),Q=new a.DictionaryBatch(lt,bt,Tt),mt=s.Message.from(Q,Ot);return this._writeMessage(mt)._writeBodyBuffers(G)}_writeBodyBuffers(X){let bt,Tt,Ot;for(let H=-1,k=X.length;++H<k;)(bt=X[H])&&(Tt=bt.byteLength)>0&&(this._write(bt),(Ot=(Tt+7&-8)-Tt)>0&&this._writePadding(Ot));return this}_writeDictionaries(X){var bt,Tt;for(const[Ot,H]of X.dictionaries){const k=(bt=H==null?void 0:H.data)!==null&&bt!==void 0?bt:[],G=this._seenDictionaries.get(Ot),lt=(Tt=this._dictionaryDeltaOffsets.get(Ot))!==null&&Tt!==void 0?Tt:0;if(!G||G.data[0]!==k[0])for(const[Q,mt]of k.entries())this._writeDictionaryBatch(mt,Ot,Q>0);else if(lt<k.length)for(const Q of k.slice(lt))this._writeDictionaryBatch(Q,Ot,!0);this._seenDictionaries.set(Ot,H),this._dictionaryDeltaOffsets.set(Ot,k.length)}return this}}bo.RecordBatchWriter=D;class B extends D{static writeAll(X,bt){const Tt=new B(bt);return(0,O.isPromise)(X)?X.then(Ot=>Tt.writeAll(Ot)):(0,O.isAsyncIterable)(X)?F(Tt,X):N(Tt,X)}}bo.RecordBatchStreamWriter=B;class P extends D{static writeAll(X){const bt=new P;return(0,O.isPromise)(X)?X.then(Tt=>bt.writeAll(Tt)):(0,O.isAsyncIterable)(X)?F(bt,X):N(bt,X)}constructor(){super(),this._autoDestroy=!0}_writeSchema(X){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(X,bt,Tt=!1){if(!Tt&&this._seenDictionaries.has(bt))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(X,bt,Tt)}_writeFooter(X){const bt=o.Footer.encode(new o.Footer(X,l.MetadataVersion.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(X)._write(bt)._write(Int32Array.of(bt.byteLength))._writeMagic()}}bo.RecordBatchFileWriter=P;class j extends D{static writeAll(X){return new j().writeAll(X)}constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._recordBatchesWithDictionaries=[]}_writeMessage(){return this}_writeFooter(X){return this}_writeSchema(X){return this._write(`{
  "schema": ${JSON.stringify({fields:X.fields.map(bt=>$(bt))},null,2)}`)}_writeDictionaries(X){return X.dictionaries.size>0&&this._recordBatchesWithDictionaries.push(X),this}_writeDictionaryBatch(X,bt,Tt=!1){return this._write(this._dictionaryBlocks.length===0?"    ":`,
    `),this._write(V(X,bt,Tt)),this._dictionaryBlocks.push(new o.FileBlock(0,0,0)),this}_writeRecordBatch(X){return this._writeDictionaries(X),this._recordBatches.push(X),this}close(){if(this._recordBatchesWithDictionaries.length>0){this._write(`,
  "dictionaries": [
`);for(const X of this._recordBatchesWithDictionaries)super._writeDictionaries(X);this._write(`
  ]`)}if(this._recordBatches.length>0){for(let X=-1,bt=this._recordBatches.length;++X<bt;)this._write(X===0?`,
  "batches": [
    `:`,
    `),this._write(Z(this._recordBatches[X])),this._recordBatchBlocks.push(new o.FileBlock(0,0,0));this._write(`
  ]`)}return this._schema&&this._write(`
}`),this._recordBatchesWithDictionaries=[],this._recordBatches=[],super.close()}}bo.RecordBatchJSONWriter=j;function N(nt,X){let bt=X;X instanceof e.Table&&(bt=X.batches,nt.reset(void 0,X.schema));for(const Tt of bt)nt.write(Tt);return nt.finish()}function F(nt,X){return t.__awaiter(this,void 0,void 0,function*(){var bt,Tt,Ot,H,k,G,lt;try{for(bt=!0,Tt=t.__asyncValues(X);Ot=yield Tt.next(),H=Ot.done,!H;bt=!0){lt=Ot.value,bt=!1;const Q=lt;nt.write(Q)}}catch(Q){k={error:Q}}finally{try{!bt&&!H&&(G=Tt.return)&&(yield G.call(Tt))}finally{if(k)throw k.error}}return nt.finish()})}function $({name:nt,type:X,nullable:bt}){const Tt=new m.JSONTypeAssembler;return{name:nt,nullable:bt,type:Tt.visit(X),children:(X.children||[]).map(Ot=>$(Ot)),dictionary:r.DataType.isDictionary(X)?{id:X.id,isOrdered:X.isOrdered,indexType:Tt.visit(X.indices)}:void 0}}function V(nt,X,bt=!1){const[Tt]=b.JSONVectorAssembler.assemble(new M.RecordBatch({[X]:nt}));return JSON.stringify({id:X,isDelta:bt,data:{count:nt.length,columns:Tt}},null,2)}function Z(nt){const[X]=b.JSONVectorAssembler.assemble(nt);return JSON.stringify({count:nt.numRows,columns:X},null,2)}return bo}var pm={},JN;function fit(){if(JN)return pm;JN=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.toDOMStream=void 0;const t=Bn,e=Xr(),i=Uf();function n(a,o){if((0,i.isAsyncIterable)(a))return s(a,o);if((0,i.isIterable)(a))return r(a,o);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}pm.toDOMStream=n;function r(a,o){let l=null;const c=(o==null?void 0:o.type)==="bytes"||!1,h=(o==null?void 0:o.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},o),{start(m){A(m,l||(l=a[Symbol.iterator]()))},pull(m){l?A(m,l):m.close()},cancel(){(l!=null&&l.return&&l.return()||!0)&&(l=null)}}),Object.assign({highWaterMark:c?h:void 0},o));function A(m,b){let S,M=null,I=m.desiredSize||null;for(;!(M=b.next(c?I:null)).done;)if(ArrayBuffer.isView(M.value)&&(S=(0,e.toUint8Array)(M.value))&&(I!=null&&c&&(I=I-S.byteLength+1),M.value=S),m.enqueue(M.value),I!=null&&--I<=0)return;m.close()}}function s(a,o){let l=null;const c=(o==null?void 0:o.type)==="bytes"||!1,h=(o==null?void 0:o.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},o),{start(m){return t.__awaiter(this,void 0,void 0,function*(){yield A(m,l||(l=a[Symbol.asyncIterator]()))})},pull(m){return t.__awaiter(this,void 0,void 0,function*(){l?yield A(m,l):m.close()})},cancel(){return t.__awaiter(this,void 0,void 0,function*(){(l!=null&&l.return&&(yield l.return())||!0)&&(l=null)})}}),Object.assign({highWaterMark:c?h:void 0},o));function A(m,b){return t.__awaiter(this,void 0,void 0,function*(){let S,M=null,I=m.desiredSize||null;for(;!(M=yield b.next(c?I:null)).done;)if(ArrayBuffer.isView(M.value)&&(S=(0,e.toUint8Array)(M.value))&&(I!=null&&c&&(I=I-S.byteLength+1),M.value=S),m.enqueue(M.value),I!=null&&--I<=0)return;m.close()})}}return pm}var qh={},t8;function dit(){if(t8)return qh;t8=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.BuilderTransform=qh.builderThroughDOMStream=void 0;const t=Bn,e=ST();function i(a){return new n(a)}qh.builderThroughDOMStream=i;class n{constructor(o){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{["readableStrategy"]:l,["writableStrategy"]:c,["queueingStrategy"]:h="count"}=o,A=t.__rest(o,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=(0,e.makeBuilder)(A),this._getSize=h!=="bytes"?r:s;const{["highWaterMark"]:m=h==="bytes"?Math.pow(2,14):1e3}=Object.assign({},l),{["highWaterMark"]:b=h==="bytes"?Math.pow(2,14):1e3}=Object.assign({},c);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:S=>{this._maybeFlush(this._builder,this._controller=S)},start:S=>{this._maybeFlush(this._builder,this._controller=S)}},{highWaterMark:m,size:h!=="bytes"?r:s}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:b,size:S=>this._writeValueAndReturnChunkSize(S)})}_writeValueAndReturnChunkSize(o){const l=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(o)),this._bufferedSize-l}_maybeFlush(o,l){l!=null&&(this._bufferedSize>=l.desiredSize&&++this._numChunks&&this._enqueue(l,o.toVector()),o.finished&&((o.length>0||this._numChunks===0)&&++this._numChunks&&this._enqueue(l,o.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(l,null)))}_enqueue(o,l){this._bufferedSize=0,this._controller=null,l==null?o.close():o.enqueue(l)}}qh.BuilderTransform=n;const r=a=>{var o;return(o=a==null?void 0:a.length)!==null&&o!==void 0?o:0},s=a=>{var o;return(o=a==null?void 0:a.byteLength)!==null&&o!==void 0?o:0};return qh}var mm={},e8;function Ait(){if(e8)return mm;e8=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.recordBatchReaderThroughDOMStream=void 0;const t=Bn,e=Vf(),i=wT();function n(r,s){const a=new e.AsyncByteQueue;let o=null;const l=new ReadableStream({cancel(){return t.__awaiter(this,void 0,void 0,function*(){yield a.close()})},start(A){return t.__awaiter(this,void 0,void 0,function*(){yield h(A,o||(o=yield c()))})},pull(A){return t.__awaiter(this,void 0,void 0,function*(){o?yield h(A,o):A.close()})}});return{writable:new WritableStream(a,Object.assign({highWaterMark:Math.pow(2,14)},r)),readable:l};function c(){return t.__awaiter(this,void 0,void 0,function*(){return yield(yield i.RecordBatchReader.from(a)).open(s)})}function h(A,m){return t.__awaiter(this,void 0,void 0,function*(){let b=A.desiredSize,S=null;for(;!(S=yield m.next()).done;)if(A.enqueue(S.value),b!=null&&--b<=0)return;A.close()})}}return mm.recordBatchReaderThroughDOMStream=n,mm}var _m={},i8;function git(){if(i8)return _m;i8=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.recordBatchWriterThroughDOMStream=void 0;const t=Bn,e=Vf();function i(n,r){const s=new this(n),a=new e.AsyncByteStream(s),o=new ReadableStream({cancel(){return t.__awaiter(this,void 0,void 0,function*(){yield a.cancel()})},pull(c){return t.__awaiter(this,void 0,void 0,function*(){yield l(c)})},start(c){return t.__awaiter(this,void 0,void 0,function*(){yield l(c)})}},Object.assign({highWaterMark:Math.pow(2,14)},r));return{writable:new WritableStream(s,n),readable:o};function l(c){return t.__awaiter(this,void 0,void 0,function*(){let h=null,A=c.desiredSize;for(;h=yield a.read(A||null);)if(c.enqueue(h),A!=null&&(A-=h.byteLength)<=0)return;c.close()})}}return _m.recordBatchWriterThroughDOMStream=i,_m}var u3={},Yh={},n8;function yit(){if(n8)return Yh;n8=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.tableToIPC=Yh.tableFromIPC=void 0;const t=t1(),e=Uf(),i=wT(),n=vB();function r(a){const o=i.RecordBatchReader.from(a);return(0,e.isPromise)(o)?o.then(l=>r(l)):o.isAsync()?o.readAll().then(l=>new t.Table(l)):new t.Table(o.readAll())}Yh.tableFromIPC=r;function s(a,o="stream"){return(o==="stream"?n.RecordBatchStreamWriter:n.RecordBatchFileWriter).writeAll(a).toUint8Array(!0)}return Yh.tableToIPC=s,Yh}var r8;function s8(){return r8||(r8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DenseUnion=t.Union=t.Struct=t.List=t.Decimal=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.DateMillisecond=t.DateDay=t.Date_=t.FixedSizeBinary=t.LargeBinary=t.Binary=t.LargeUtf8=t.Utf8=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Bool=t.Null=t.DataType=t.makeData=t.Data=t.MetadataVersion=t.IntervalUnit=t.UnionMode=t.Precision=t.TimeUnit=t.DateUnit=t.BufferType=t.Type=t.MessageHeader=void 0,t.TimeBuilder=t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=t.FixedSizeBinaryBuilder=t.DictionaryBuilder=t.DecimalBuilder=t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=t.NullBuilder=t.BoolBuilder=t.builderThroughAsyncIterable=t.builderThroughIterable=t.tableFromJSON=t.vectorFromArray=t.makeBuilder=t.Builder=t.StructRow=t.MapRow=t.Field=t.Schema=t.Visitor=t.makeVector=t.Vector=t.tableFromArrays=t.makeTable=t.Table=t.Map_=t.FixedSizeList=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.Dictionary=t.SparseUnion=void 0,t.util=t.RecordBatch=t.Message=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=t.tableFromIPC=t.tableToIPC=t.RecordBatchJSONWriter=t.RecordBatchStreamWriter=t.RecordBatchFileWriter=t.RecordBatchWriter=t.AsyncRecordBatchStreamReader=t.AsyncRecordBatchFileReader=t.RecordBatchStreamReader=t.RecordBatchFileReader=t.RecordBatchReader=t.AsyncByteQueue=t.AsyncByteStream=t.ByteStream=t.DenseUnionBuilder=t.SparseUnionBuilder=t.UnionBuilder=t.StructBuilder=t.MapBuilder=t.FixedSizeListBuilder=t.ListBuilder=t.LargeBinaryBuilder=t.BinaryBuilder=t.LargeUtf8Builder=t.Utf8Builder=t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=void 0;var e=fB();Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return e.MessageHeader}});var i=nr();Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return i.Type}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return i.BufferType}}),Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return i.DateUnit}}),Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return i.TimeUnit}}),Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return i.Precision}}),Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return i.UnionMode}}),Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return i.IntervalUnit}}),Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return i.MetadataVersion}});var n=Dc();Object.defineProperty(t,"Data",{enumerable:!0,get:function(){return n.Data}}),Object.defineProperty(t,"makeData",{enumerable:!0,get:function(){return n.makeData}});var r=Pn();Object.defineProperty(t,"DataType",{enumerable:!0,get:function(){return r.DataType}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return r.Null}}),Object.defineProperty(t,"Bool",{enumerable:!0,get:function(){return r.Bool}}),Object.defineProperty(t,"Int",{enumerable:!0,get:function(){return r.Int}}),Object.defineProperty(t,"Int8",{enumerable:!0,get:function(){return r.Int8}}),Object.defineProperty(t,"Int16",{enumerable:!0,get:function(){return r.Int16}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return r.Int32}}),Object.defineProperty(t,"Int64",{enumerable:!0,get:function(){return r.Int64}}),Object.defineProperty(t,"Uint8",{enumerable:!0,get:function(){return r.Uint8}}),Object.defineProperty(t,"Uint16",{enumerable:!0,get:function(){return r.Uint16}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return r.Uint32}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return r.Uint64}}),Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return r.Float}}),Object.defineProperty(t,"Float16",{enumerable:!0,get:function(){return r.Float16}}),Object.defineProperty(t,"Float32",{enumerable:!0,get:function(){return r.Float32}}),Object.defineProperty(t,"Float64",{enumerable:!0,get:function(){return r.Float64}}),Object.defineProperty(t,"Utf8",{enumerable:!0,get:function(){return r.Utf8}}),Object.defineProperty(t,"LargeUtf8",{enumerable:!0,get:function(){return r.LargeUtf8}}),Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return r.Binary}}),Object.defineProperty(t,"LargeBinary",{enumerable:!0,get:function(){return r.LargeBinary}}),Object.defineProperty(t,"FixedSizeBinary",{enumerable:!0,get:function(){return r.FixedSizeBinary}}),Object.defineProperty(t,"Date_",{enumerable:!0,get:function(){return r.Date_}}),Object.defineProperty(t,"DateDay",{enumerable:!0,get:function(){return r.DateDay}}),Object.defineProperty(t,"DateMillisecond",{enumerable:!0,get:function(){return r.DateMillisecond}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return r.Timestamp}}),Object.defineProperty(t,"TimestampSecond",{enumerable:!0,get:function(){return r.TimestampSecond}}),Object.defineProperty(t,"TimestampMillisecond",{enumerable:!0,get:function(){return r.TimestampMillisecond}}),Object.defineProperty(t,"TimestampMicrosecond",{enumerable:!0,get:function(){return r.TimestampMicrosecond}}),Object.defineProperty(t,"TimestampNanosecond",{enumerable:!0,get:function(){return r.TimestampNanosecond}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return r.Time}}),Object.defineProperty(t,"TimeSecond",{enumerable:!0,get:function(){return r.TimeSecond}}),Object.defineProperty(t,"TimeMillisecond",{enumerable:!0,get:function(){return r.TimeMillisecond}}),Object.defineProperty(t,"TimeMicrosecond",{enumerable:!0,get:function(){return r.TimeMicrosecond}}),Object.defineProperty(t,"TimeNanosecond",{enumerable:!0,get:function(){return r.TimeNanosecond}}),Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return r.Decimal}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return r.List}}),Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return r.Struct}}),Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return r.Union}}),Object.defineProperty(t,"DenseUnion",{enumerable:!0,get:function(){return r.DenseUnion}}),Object.defineProperty(t,"SparseUnion",{enumerable:!0,get:function(){return r.SparseUnion}}),Object.defineProperty(t,"Dictionary",{enumerable:!0,get:function(){return r.Dictionary}}),Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return r.Interval}}),Object.defineProperty(t,"IntervalDayTime",{enumerable:!0,get:function(){return r.IntervalDayTime}}),Object.defineProperty(t,"IntervalYearMonth",{enumerable:!0,get:function(){return r.IntervalYearMonth}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return r.Duration}}),Object.defineProperty(t,"DurationSecond",{enumerable:!0,get:function(){return r.DurationSecond}}),Object.defineProperty(t,"DurationMillisecond",{enumerable:!0,get:function(){return r.DurationMillisecond}}),Object.defineProperty(t,"DurationMicrosecond",{enumerable:!0,get:function(){return r.DurationMicrosecond}}),Object.defineProperty(t,"DurationNanosecond",{enumerable:!0,get:function(){return r.DurationNanosecond}}),Object.defineProperty(t,"FixedSizeList",{enumerable:!0,get:function(){return r.FixedSizeList}}),Object.defineProperty(t,"Map_",{enumerable:!0,get:function(){return r.Map_}});var s=t1();Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return s.Table}}),Object.defineProperty(t,"makeTable",{enumerable:!0,get:function(){return s.makeTable}}),Object.defineProperty(t,"tableFromArrays",{enumerable:!0,get:function(){return s.tableFromArrays}});var a=zs();Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return a.Vector}}),Object.defineProperty(t,"makeVector",{enumerable:!0,get:function(){return a.makeVector}});var o=wa();Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return o.Visitor}});var l=Ma();Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return l.Schema}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return l.Field}});var c=bT();Object.defineProperty(t,"MapRow",{enumerable:!0,get:function(){return c.MapRow}});var h=AB();Object.defineProperty(t,"StructRow",{enumerable:!0,get:function(){return h.StructRow}});var A=Yn();Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return A.Builder}});var m=ST();Object.defineProperty(t,"makeBuilder",{enumerable:!0,get:function(){return m.makeBuilder}}),Object.defineProperty(t,"vectorFromArray",{enumerable:!0,get:function(){return m.vectorFromArray}}),Object.defineProperty(t,"tableFromJSON",{enumerable:!0,get:function(){return m.tableFromJSON}}),Object.defineProperty(t,"builderThroughIterable",{enumerable:!0,get:function(){return m.builderThroughIterable}}),Object.defineProperty(t,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return m.builderThroughAsyncIterable}});var b=_9();Object.defineProperty(t,"BoolBuilder",{enumerable:!0,get:function(){return b.BoolBuilder}});var S=D9();Object.defineProperty(t,"NullBuilder",{enumerable:!0,get:function(){return S.NullBuilder}});var M=b9();Object.defineProperty(t,"DateBuilder",{enumerable:!0,get:function(){return M.DateBuilder}}),Object.defineProperty(t,"DateDayBuilder",{enumerable:!0,get:function(){return M.DateDayBuilder}}),Object.defineProperty(t,"DateMillisecondBuilder",{enumerable:!0,get:function(){return M.DateMillisecondBuilder}});var I=v9();Object.defineProperty(t,"DecimalBuilder",{enumerable:!0,get:function(){return I.DecimalBuilder}});var O=T9();Object.defineProperty(t,"DictionaryBuilder",{enumerable:!0,get:function(){return O.DictionaryBuilder}});var D=S9();Object.defineProperty(t,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return D.FixedSizeBinaryBuilder}});var B=M9();Object.defineProperty(t,"FloatBuilder",{enumerable:!0,get:function(){return B.FloatBuilder}}),Object.defineProperty(t,"Float16Builder",{enumerable:!0,get:function(){return B.Float16Builder}}),Object.defineProperty(t,"Float32Builder",{enumerable:!0,get:function(){return B.Float32Builder}}),Object.defineProperty(t,"Float64Builder",{enumerable:!0,get:function(){return B.Float64Builder}});var P=B9();Object.defineProperty(t,"IntBuilder",{enumerable:!0,get:function(){return P.IntBuilder}}),Object.defineProperty(t,"Int8Builder",{enumerable:!0,get:function(){return P.Int8Builder}}),Object.defineProperty(t,"Int16Builder",{enumerable:!0,get:function(){return P.Int16Builder}}),Object.defineProperty(t,"Int32Builder",{enumerable:!0,get:function(){return P.Int32Builder}}),Object.defineProperty(t,"Int64Builder",{enumerable:!0,get:function(){return P.Int64Builder}}),Object.defineProperty(t,"Uint8Builder",{enumerable:!0,get:function(){return P.Uint8Builder}}),Object.defineProperty(t,"Uint16Builder",{enumerable:!0,get:function(){return P.Uint16Builder}}),Object.defineProperty(t,"Uint32Builder",{enumerable:!0,get:function(){return P.Uint32Builder}}),Object.defineProperty(t,"Uint64Builder",{enumerable:!0,get:function(){return P.Uint64Builder}});var j=x9();Object.defineProperty(t,"TimeBuilder",{enumerable:!0,get:function(){return j.TimeBuilder}}),Object.defineProperty(t,"TimeSecondBuilder",{enumerable:!0,get:function(){return j.TimeSecondBuilder}}),Object.defineProperty(t,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return j.TimeMillisecondBuilder}}),Object.defineProperty(t,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return j.TimeMicrosecondBuilder}}),Object.defineProperty(t,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return j.TimeNanosecondBuilder}});var N=P9();Object.defineProperty(t,"TimestampBuilder",{enumerable:!0,get:function(){return N.TimestampBuilder}}),Object.defineProperty(t,"TimestampSecondBuilder",{enumerable:!0,get:function(){return N.TimestampSecondBuilder}}),Object.defineProperty(t,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return N.TimestampMillisecondBuilder}}),Object.defineProperty(t,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return N.TimestampMicrosecondBuilder}}),Object.defineProperty(t,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return N.TimestampNanosecondBuilder}});var F=I9();Object.defineProperty(t,"IntervalBuilder",{enumerable:!0,get:function(){return F.IntervalBuilder}}),Object.defineProperty(t,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return F.IntervalDayTimeBuilder}}),Object.defineProperty(t,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return F.IntervalYearMonthBuilder}});var $=E9();Object.defineProperty(t,"DurationBuilder",{enumerable:!0,get:function(){return $.DurationBuilder}}),Object.defineProperty(t,"DurationSecondBuilder",{enumerable:!0,get:function(){return $.DurationSecondBuilder}}),Object.defineProperty(t,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return $.DurationMillisecondBuilder}}),Object.defineProperty(t,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return $.DurationMicrosecondBuilder}}),Object.defineProperty(t,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return $.DurationNanosecondBuilder}});var V=F9();Object.defineProperty(t,"Utf8Builder",{enumerable:!0,get:function(){return V.Utf8Builder}});var Z=L9();Object.defineProperty(t,"LargeUtf8Builder",{enumerable:!0,get:function(){return Z.LargeUtf8Builder}});var nt=mB();Object.defineProperty(t,"BinaryBuilder",{enumerable:!0,get:function(){return nt.BinaryBuilder}});var X=_B();Object.defineProperty(t,"LargeBinaryBuilder",{enumerable:!0,get:function(){return X.LargeBinaryBuilder}});var bt=O9();Object.defineProperty(t,"ListBuilder",{enumerable:!0,get:function(){return bt.ListBuilder}});var Tt=w9();Object.defineProperty(t,"FixedSizeListBuilder",{enumerable:!0,get:function(){return Tt.FixedSizeListBuilder}});var Ot=R9();Object.defineProperty(t,"MapBuilder",{enumerable:!0,get:function(){return Ot.MapBuilder}});var H=C9();Object.defineProperty(t,"StructBuilder",{enumerable:!0,get:function(){return H.StructBuilder}});var k=N9();Object.defineProperty(t,"UnionBuilder",{enumerable:!0,get:function(){return k.UnionBuilder}}),Object.defineProperty(t,"SparseUnionBuilder",{enumerable:!0,get:function(){return k.SparseUnionBuilder}}),Object.defineProperty(t,"DenseUnionBuilder",{enumerable:!0,get:function(){return k.DenseUnionBuilder}});var G=Vf();Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return G.ByteStream}}),Object.defineProperty(t,"AsyncByteStream",{enumerable:!0,get:function(){return G.AsyncByteStream}}),Object.defineProperty(t,"AsyncByteQueue",{enumerable:!0,get:function(){return G.AsyncByteQueue}});var lt=wT();Object.defineProperty(t,"RecordBatchReader",{enumerable:!0,get:function(){return lt.RecordBatchReader}}),Object.defineProperty(t,"RecordBatchFileReader",{enumerable:!0,get:function(){return lt.RecordBatchFileReader}}),Object.defineProperty(t,"RecordBatchStreamReader",{enumerable:!0,get:function(){return lt.RecordBatchStreamReader}}),Object.defineProperty(t,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return lt.AsyncRecordBatchFileReader}}),Object.defineProperty(t,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return lt.AsyncRecordBatchStreamReader}});var Q=vB();Object.defineProperty(t,"RecordBatchWriter",{enumerable:!0,get:function(){return Q.RecordBatchWriter}}),Object.defineProperty(t,"RecordBatchFileWriter",{enumerable:!0,get:function(){return Q.RecordBatchFileWriter}}),Object.defineProperty(t,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return Q.RecordBatchStreamWriter}}),Object.defineProperty(t,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return Q.RecordBatchJSONWriter}});var mt=yit();Object.defineProperty(t,"tableToIPC",{enumerable:!0,get:function(){return mt.tableToIPC}}),Object.defineProperty(t,"tableFromIPC",{enumerable:!0,get:function(){return mt.tableFromIPC}});var wt=bB();Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return wt.MessageReader}}),Object.defineProperty(t,"AsyncMessageReader",{enumerable:!0,get:function(){return wt.AsyncMessageReader}}),Object.defineProperty(t,"JSONMessageReader",{enumerable:!0,get:function(){return wt.JSONMessageReader}});var Dt=VA();Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return Dt.Message}});var te=$f();Object.defineProperty(t,"RecordBatch",{enumerable:!0,get:function(){return te.RecordBatch}});const ie=dB(),ft=m9(),Ht=d0(),Nt=_T(),he=Xr(),me=J_(),Me=mT(),pe=TT();t.util=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ie),ft),Ht),Nt),he),me),Me),{compareSchemas:pe.compareSchemas,compareFields:pe.compareFields,compareTypes:pe.compareTypes})}(u3)),u3}var a8;function pit(){return a8||(a8=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Union=t.StructRow=t.Struct=t.List=t.Decimal=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.DateMillisecond=t.DateDay=t.Date_=t.FixedSizeBinary=t.LargeBinary=t.Binary=t.LargeUtf8=t.Utf8=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Bool=t.Null=t.DataType=t.makeData=t.Data=t.BufferType=t.UnionMode=t.Type=t.TimeUnit=t.Precision=t.MetadataVersion=t.MessageHeader=t.IntervalUnit=t.DateUnit=void 0,t.LargeBinaryBuilder=t.BinaryBuilder=t.builderThroughAsyncIterable=t.builderThroughIterable=t.makeBuilder=t.Builder=t.util=t.RecordBatch=t.Message=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=t.tableToIPC=t.tableFromIPC=t.RecordBatchJSONWriter=t.RecordBatchStreamWriter=t.RecordBatchFileWriter=t.RecordBatchWriter=t.AsyncRecordBatchStreamReader=t.AsyncRecordBatchFileReader=t.RecordBatchStreamReader=t.RecordBatchFileReader=t.RecordBatchReader=t.AsyncByteQueue=t.AsyncByteStream=t.ByteStream=t.tableFromJSON=t.vectorFromArray=t.makeVector=t.Vector=t.Visitor=t.Field=t.Schema=t.tableFromArrays=t.makeTable=t.Table=t.MapRow=t.Map_=t.FixedSizeList=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.Dictionary=t.SparseUnion=t.DenseUnion=void 0,t.LargeUtf8Builder=t.Utf8Builder=t.SparseUnionBuilder=t.DenseUnionBuilder=t.UnionBuilder=t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=t.TimeBuilder=t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=t.StructBuilder=t.NullBuilder=t.MapBuilder=t.ListBuilder=t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=t.FixedSizeListBuilder=t.FixedSizeBinaryBuilder=t.DictionaryBuilder=t.DecimalBuilder=t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=t.BoolBuilder=void 0;const e=yT(),i=Yn(),n=wT(),r=vB(),s=fit(),a=dit(),o=Ait(),l=git();e.default.toDOMStream=s.toDOMStream,i.Builder.throughDOM=a.builderThroughDOMStream,n.RecordBatchReader.throughDOM=o.recordBatchReaderThroughDOMStream,n.RecordBatchFileReader.throughDOM=o.recordBatchReaderThroughDOMStream,n.RecordBatchStreamReader.throughDOM=o.recordBatchReaderThroughDOMStream,r.RecordBatchWriter.throughDOM=l.recordBatchWriterThroughDOMStream,r.RecordBatchFileWriter.throughDOM=l.recordBatchWriterThroughDOMStream,r.RecordBatchStreamWriter.throughDOM=l.recordBatchWriterThroughDOMStream;var c=s8();Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return c.DateUnit}}),Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return c.IntervalUnit}}),Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return c.MessageHeader}}),Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return c.MetadataVersion}}),Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return c.Precision}}),Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return c.TimeUnit}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return c.Type}}),Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return c.UnionMode}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return c.BufferType}}),Object.defineProperty(t,"Data",{enumerable:!0,get:function(){return c.Data}}),Object.defineProperty(t,"makeData",{enumerable:!0,get:function(){return c.makeData}}),Object.defineProperty(t,"DataType",{enumerable:!0,get:function(){return c.DataType}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return c.Null}}),Object.defineProperty(t,"Bool",{enumerable:!0,get:function(){return c.Bool}}),Object.defineProperty(t,"Int",{enumerable:!0,get:function(){return c.Int}}),Object.defineProperty(t,"Int8",{enumerable:!0,get:function(){return c.Int8}}),Object.defineProperty(t,"Int16",{enumerable:!0,get:function(){return c.Int16}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return c.Int32}}),Object.defineProperty(t,"Int64",{enumerable:!0,get:function(){return c.Int64}}),Object.defineProperty(t,"Uint8",{enumerable:!0,get:function(){return c.Uint8}}),Object.defineProperty(t,"Uint16",{enumerable:!0,get:function(){return c.Uint16}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return c.Uint32}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return c.Uint64}}),Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return c.Float}}),Object.defineProperty(t,"Float16",{enumerable:!0,get:function(){return c.Float16}}),Object.defineProperty(t,"Float32",{enumerable:!0,get:function(){return c.Float32}}),Object.defineProperty(t,"Float64",{enumerable:!0,get:function(){return c.Float64}}),Object.defineProperty(t,"Utf8",{enumerable:!0,get:function(){return c.Utf8}}),Object.defineProperty(t,"LargeUtf8",{enumerable:!0,get:function(){return c.LargeUtf8}}),Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return c.Binary}}),Object.defineProperty(t,"LargeBinary",{enumerable:!0,get:function(){return c.LargeBinary}}),Object.defineProperty(t,"FixedSizeBinary",{enumerable:!0,get:function(){return c.FixedSizeBinary}}),Object.defineProperty(t,"Date_",{enumerable:!0,get:function(){return c.Date_}}),Object.defineProperty(t,"DateDay",{enumerable:!0,get:function(){return c.DateDay}}),Object.defineProperty(t,"DateMillisecond",{enumerable:!0,get:function(){return c.DateMillisecond}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return c.Timestamp}}),Object.defineProperty(t,"TimestampSecond",{enumerable:!0,get:function(){return c.TimestampSecond}}),Object.defineProperty(t,"TimestampMillisecond",{enumerable:!0,get:function(){return c.TimestampMillisecond}}),Object.defineProperty(t,"TimestampMicrosecond",{enumerable:!0,get:function(){return c.TimestampMicrosecond}}),Object.defineProperty(t,"TimestampNanosecond",{enumerable:!0,get:function(){return c.TimestampNanosecond}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return c.Time}}),Object.defineProperty(t,"TimeSecond",{enumerable:!0,get:function(){return c.TimeSecond}}),Object.defineProperty(t,"TimeMillisecond",{enumerable:!0,get:function(){return c.TimeMillisecond}}),Object.defineProperty(t,"TimeMicrosecond",{enumerable:!0,get:function(){return c.TimeMicrosecond}}),Object.defineProperty(t,"TimeNanosecond",{enumerable:!0,get:function(){return c.TimeNanosecond}}),Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return c.Decimal}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return c.List}}),Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return c.Struct}}),Object.defineProperty(t,"StructRow",{enumerable:!0,get:function(){return c.StructRow}}),Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return c.Union}}),Object.defineProperty(t,"DenseUnion",{enumerable:!0,get:function(){return c.DenseUnion}}),Object.defineProperty(t,"SparseUnion",{enumerable:!0,get:function(){return c.SparseUnion}}),Object.defineProperty(t,"Dictionary",{enumerable:!0,get:function(){return c.Dictionary}}),Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return c.Interval}}),Object.defineProperty(t,"IntervalDayTime",{enumerable:!0,get:function(){return c.IntervalDayTime}}),Object.defineProperty(t,"IntervalYearMonth",{enumerable:!0,get:function(){return c.IntervalYearMonth}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return c.Duration}}),Object.defineProperty(t,"DurationSecond",{enumerable:!0,get:function(){return c.DurationSecond}}),Object.defineProperty(t,"DurationMillisecond",{enumerable:!0,get:function(){return c.DurationMillisecond}}),Object.defineProperty(t,"DurationMicrosecond",{enumerable:!0,get:function(){return c.DurationMicrosecond}}),Object.defineProperty(t,"DurationNanosecond",{enumerable:!0,get:function(){return c.DurationNanosecond}}),Object.defineProperty(t,"FixedSizeList",{enumerable:!0,get:function(){return c.FixedSizeList}}),Object.defineProperty(t,"Map_",{enumerable:!0,get:function(){return c.Map_}}),Object.defineProperty(t,"MapRow",{enumerable:!0,get:function(){return c.MapRow}}),Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return c.Table}}),Object.defineProperty(t,"makeTable",{enumerable:!0,get:function(){return c.makeTable}}),Object.defineProperty(t,"tableFromArrays",{enumerable:!0,get:function(){return c.tableFromArrays}}),Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return c.Schema}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return c.Field}}),Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return c.Visitor}}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return c.Vector}}),Object.defineProperty(t,"makeVector",{enumerable:!0,get:function(){return c.makeVector}}),Object.defineProperty(t,"vectorFromArray",{enumerable:!0,get:function(){return c.vectorFromArray}}),Object.defineProperty(t,"tableFromJSON",{enumerable:!0,get:function(){return c.tableFromJSON}}),Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return c.ByteStream}}),Object.defineProperty(t,"AsyncByteStream",{enumerable:!0,get:function(){return c.AsyncByteStream}}),Object.defineProperty(t,"AsyncByteQueue",{enumerable:!0,get:function(){return c.AsyncByteQueue}}),Object.defineProperty(t,"RecordBatchReader",{enumerable:!0,get:function(){return c.RecordBatchReader}}),Object.defineProperty(t,"RecordBatchFileReader",{enumerable:!0,get:function(){return c.RecordBatchFileReader}}),Object.defineProperty(t,"RecordBatchStreamReader",{enumerable:!0,get:function(){return c.RecordBatchStreamReader}}),Object.defineProperty(t,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return c.AsyncRecordBatchFileReader}}),Object.defineProperty(t,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return c.AsyncRecordBatchStreamReader}}),Object.defineProperty(t,"RecordBatchWriter",{enumerable:!0,get:function(){return c.RecordBatchWriter}}),Object.defineProperty(t,"RecordBatchFileWriter",{enumerable:!0,get:function(){return c.RecordBatchFileWriter}}),Object.defineProperty(t,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return c.RecordBatchStreamWriter}}),Object.defineProperty(t,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return c.RecordBatchJSONWriter}}),Object.defineProperty(t,"tableFromIPC",{enumerable:!0,get:function(){return c.tableFromIPC}}),Object.defineProperty(t,"tableToIPC",{enumerable:!0,get:function(){return c.tableToIPC}}),Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return c.MessageReader}}),Object.defineProperty(t,"AsyncMessageReader",{enumerable:!0,get:function(){return c.AsyncMessageReader}}),Object.defineProperty(t,"JSONMessageReader",{enumerable:!0,get:function(){return c.JSONMessageReader}}),Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return c.Message}}),Object.defineProperty(t,"RecordBatch",{enumerable:!0,get:function(){return c.RecordBatch}}),Object.defineProperty(t,"util",{enumerable:!0,get:function(){return c.util}}),Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return c.Builder}}),Object.defineProperty(t,"makeBuilder",{enumerable:!0,get:function(){return c.makeBuilder}}),Object.defineProperty(t,"builderThroughIterable",{enumerable:!0,get:function(){return c.builderThroughIterable}}),Object.defineProperty(t,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return c.builderThroughAsyncIterable}});var h=s8();Object.defineProperty(t,"BinaryBuilder",{enumerable:!0,get:function(){return h.BinaryBuilder}}),Object.defineProperty(t,"LargeBinaryBuilder",{enumerable:!0,get:function(){return h.LargeBinaryBuilder}}),Object.defineProperty(t,"BoolBuilder",{enumerable:!0,get:function(){return h.BoolBuilder}}),Object.defineProperty(t,"DateBuilder",{enumerable:!0,get:function(){return h.DateBuilder}}),Object.defineProperty(t,"DateDayBuilder",{enumerable:!0,get:function(){return h.DateDayBuilder}}),Object.defineProperty(t,"DateMillisecondBuilder",{enumerable:!0,get:function(){return h.DateMillisecondBuilder}}),Object.defineProperty(t,"DecimalBuilder",{enumerable:!0,get:function(){return h.DecimalBuilder}}),Object.defineProperty(t,"DictionaryBuilder",{enumerable:!0,get:function(){return h.DictionaryBuilder}}),Object.defineProperty(t,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return h.FixedSizeBinaryBuilder}}),Object.defineProperty(t,"FixedSizeListBuilder",{enumerable:!0,get:function(){return h.FixedSizeListBuilder}}),Object.defineProperty(t,"FloatBuilder",{enumerable:!0,get:function(){return h.FloatBuilder}}),Object.defineProperty(t,"Float16Builder",{enumerable:!0,get:function(){return h.Float16Builder}}),Object.defineProperty(t,"Float32Builder",{enumerable:!0,get:function(){return h.Float32Builder}}),Object.defineProperty(t,"Float64Builder",{enumerable:!0,get:function(){return h.Float64Builder}}),Object.defineProperty(t,"IntervalBuilder",{enumerable:!0,get:function(){return h.IntervalBuilder}}),Object.defineProperty(t,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return h.IntervalDayTimeBuilder}}),Object.defineProperty(t,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return h.IntervalYearMonthBuilder}}),Object.defineProperty(t,"DurationBuilder",{enumerable:!0,get:function(){return h.DurationBuilder}}),Object.defineProperty(t,"DurationSecondBuilder",{enumerable:!0,get:function(){return h.DurationSecondBuilder}}),Object.defineProperty(t,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return h.DurationMillisecondBuilder}}),Object.defineProperty(t,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return h.DurationMicrosecondBuilder}}),Object.defineProperty(t,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return h.DurationNanosecondBuilder}}),Object.defineProperty(t,"IntBuilder",{enumerable:!0,get:function(){return h.IntBuilder}}),Object.defineProperty(t,"Int8Builder",{enumerable:!0,get:function(){return h.Int8Builder}}),Object.defineProperty(t,"Int16Builder",{enumerable:!0,get:function(){return h.Int16Builder}}),Object.defineProperty(t,"Int32Builder",{enumerable:!0,get:function(){return h.Int32Builder}}),Object.defineProperty(t,"Int64Builder",{enumerable:!0,get:function(){return h.Int64Builder}}),Object.defineProperty(t,"Uint8Builder",{enumerable:!0,get:function(){return h.Uint8Builder}}),Object.defineProperty(t,"Uint16Builder",{enumerable:!0,get:function(){return h.Uint16Builder}}),Object.defineProperty(t,"Uint32Builder",{enumerable:!0,get:function(){return h.Uint32Builder}}),Object.defineProperty(t,"Uint64Builder",{enumerable:!0,get:function(){return h.Uint64Builder}}),Object.defineProperty(t,"ListBuilder",{enumerable:!0,get:function(){return h.ListBuilder}}),Object.defineProperty(t,"MapBuilder",{enumerable:!0,get:function(){return h.MapBuilder}}),Object.defineProperty(t,"NullBuilder",{enumerable:!0,get:function(){return h.NullBuilder}}),Object.defineProperty(t,"StructBuilder",{enumerable:!0,get:function(){return h.StructBuilder}}),Object.defineProperty(t,"TimestampBuilder",{enumerable:!0,get:function(){return h.TimestampBuilder}}),Object.defineProperty(t,"TimestampSecondBuilder",{enumerable:!0,get:function(){return h.TimestampSecondBuilder}}),Object.defineProperty(t,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return h.TimestampMillisecondBuilder}}),Object.defineProperty(t,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return h.TimestampMicrosecondBuilder}}),Object.defineProperty(t,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return h.TimestampNanosecondBuilder}}),Object.defineProperty(t,"TimeBuilder",{enumerable:!0,get:function(){return h.TimeBuilder}}),Object.defineProperty(t,"TimeSecondBuilder",{enumerable:!0,get:function(){return h.TimeSecondBuilder}}),Object.defineProperty(t,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return h.TimeMillisecondBuilder}}),Object.defineProperty(t,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return h.TimeMicrosecondBuilder}}),Object.defineProperty(t,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return h.TimeNanosecondBuilder}}),Object.defineProperty(t,"UnionBuilder",{enumerable:!0,get:function(){return h.UnionBuilder}}),Object.defineProperty(t,"DenseUnionBuilder",{enumerable:!0,get:function(){return h.DenseUnionBuilder}}),Object.defineProperty(t,"SparseUnionBuilder",{enumerable:!0,get:function(){return h.SparseUnionBuilder}}),Object.defineProperty(t,"Utf8Builder",{enumerable:!0,get:function(){return h.Utf8Builder}}),Object.defineProperty(t,"LargeUtf8Builder",{enumerable:!0,get:function(){return h.LargeUtf8Builder}})}(Jw)),Jw}var h3,o8;function mit(){if(o8)return h3;o8=1;var t=Object.create,e=Object.defineProperty,i=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,a=(Ft,J)=>{for(var ut in J)e(Ft,ut,{get:J[ut],enumerable:!0})},o=(Ft,J,ut,vt)=>{if(J&&typeof J=="object"||typeof J=="function")for(let Mt of n(J))!s.call(Ft,Mt)&&Mt!==ut&&e(Ft,Mt,{get:()=>J[Mt],enumerable:!(vt=i(J,Mt))||vt.enumerable});return Ft},l=(Ft,J,ut)=>(ut=Ft!=null?t(r(Ft)):{},o(!Ft||!Ft.__esModule?e(ut,"default",{value:Ft,enumerable:!0}):ut,Ft)),c=Ft=>o(e({},"__esModule",{value:!0}),Ft),h=(Ft,J,ut)=>new Promise((vt,Mt)=>{var re=q=>{try{Be(ut.next(q))}catch(Bt){Mt(Bt)}},be=q=>{try{Be(ut.throw(q))}catch(Bt){Mt(Bt)}},Be=q=>q.done?vt(q.value):Promise.resolve(q.value).then(re,be);Be((ut=ut.apply(Ft,J)).next())}),A={};a(A,{ARROW_MIME_TYPE:()=>lt,AsyncDuckDB:()=>m.AsyncDuckDB,CSV_MIME_TYPE:()=>ie,InsertFileError:()=>Ee,PARQUET_MIME_TYPE:()=>ft,arrayBufferToArrow:()=>wt,arrowToArrayBuffer:()=>Dt,arrowToJSON:()=>te,cardinalities:()=>H,drop:()=>Tt,exportArrow:()=>Nt,exportCsv:()=>he,exportParquet:()=>me,getDuckDB:()=>$,getTempFilename:()=>k,initializeDuckDb:()=>N,insertArrow:()=>K,insertArrowTable:()=>Ct,insertCSV:()=>Y,insertFile:()=>qe,insertParquet:()=>ee,isArrow:()=>Q,isArrowFile:()=>mt,isParquetFile:()=>Ht,runQuery:()=>nt,useDuckDb:()=>V,useDuckDbQuery:()=>X}),h3=c(A);var m=Fb(),b=U6,S=l(Fb()),M=Fb(),I="\x1B[31m",O="\x1B[0m",D=(Ft,J,ut=void 0)=>{const Mt=(ut??performance.now())-J;let re;switch(!0){case Mt>=1e3:re=`${(Mt/1e3).toFixed(1)}s`;break;case Mt>=1:re=`${Mt.toFixed(0)}ms`;break;default:re=`${Mt.toFixed(3)}ms`;break}return`${I}[${re}] ${O}${Ft}`},B=(Ft,J,ut=void 0)=>{console.debug(D(Ft,J,ut))},P,j;function N(Ft){return h(this,null,function*(){const{debug:J=!1,config:ut}=Ft||{};return P=J,j===void 0&&(j=F(ut)),j})}var F=Ft=>h(null,null,function*(){const J=performance.now(),ut=S.getJsDelivrBundles(),vt=yield S.selectBundle(ut),Mt=URL.createObjectURL(new Blob([`importScripts("${vt.mainWorker}");`],{type:"text/javascript"})),re=new Worker(Mt),be=P?new S.ConsoleLogger:new S.VoidLogger,Be=new M.AsyncDuckDB(be,re);if(yield Be.instantiate(vt.mainModule,vt.pthreadWorker),URL.revokeObjectURL(Mt),Ft){if(Ft.path){const Bt=yield(yield fetch(Ft.path)).arrayBuffer(),Xt=Ft.path.match(/[^/]*$/);Xt&&(Ft.path=Xt[0]),yield Be.registerFileBuffer(Ft.path,new Uint8Array(Bt))}yield Be.open(Ft)}return P&&(B("DuckDB initialized",J),Ft&&console.debug(`DuckDbConfig: ${JSON.stringify(Ft,null,2)}`)),Be}),$=()=>h(null,null,function*(){return j||(yield N())}),V=()=>{const{result:Ft,loading:J,error:ut}=(0,b.useAsync)(()=>h(null,null,function*(){return yield $()}),[]);return{db:Ft,loading:J,error:ut}},Z=U6,nt=(Ft,J)=>h(null,null,function*(){const ut=performance.now(),vt=yield Ft.connect(),Mt=yield vt.query(J);return yield vt.close(),P&&B(`Run query: ${J}`,ut),Mt}),X=Ft=>{const{db:J}=V(),{result:ut,loading:vt,error:Mt}=(0,Z.useAsync)(()=>h(null,null,function*(){return!J||!Ft?void 0:yield nt(J,Ft)}),[J,Ft]);return{arrow:ut,loading:vt,error:Mt}},bt=(Ft,J)=>h(null,null,function*(){const ut=yield nt(Ft,`select table_type from information_schema.tables where table_name = '${J}'`);if(ut.numRows===1){const vt=ut.get(0),Mt=vt==null?void 0:vt.toArray()[0];switch(Mt){case"BASE TABLE":return"Table";case"VIEW":return"View";default:throw new Error(`Unexpected table type: ${Mt}`)}}}),Tt=(Ft,J)=>h(null,null,function*(){const ut=yield bt(Ft,J);ut==="Table"?yield nt(Ft,`drop table if exists "${J}"`):ut==="View"&&(yield nt(Ft,`drop view if exists "${J}"`))}),Ot=(Ft,J)=>h(null,null,function*(){const ut=yield nt(Ft,`select column_name, data_type from information_schema.columns where table_name = '${J}'`),vt=new Map;for(let Mt=0;Mt<ut.numRows;Mt++){const re=ut.get(Mt);if(re){const[be,Be]=re.toArray();vt.set(be,Be)}}return vt}),H=(Ft,J)=>h(null,null,function*(){const ut=yield Ot(Ft,J),vt=Array.from(ut.keys()),re=(yield nt(Ft,`select count(distinct columns(*)) from "${J}"`)).get(0);if(!re)throw new Error(`Expected a single row of cardinalities: ${J}`);const be=re.toArray();if(be.length!==vt.length)throw new Error(`Unexpected length mismatch: ${J}`);const Be={};for(let q=0;q<vt.length;q++)Be[vt[q]]=be[q];return Be}),k=()=>{const Ft=Date.now().toString(),J=Math.random().toString(36).substring(2);return`file-${Ft}-${J}`},G=pit(),lt="application/vnd.apache.arrow.file",Q=Ft=>Ft instanceof G.Table,mt=Ft=>h(null,null,function*(){try{const J=yield Ft.arrayBuffer();return wt(J),!0}catch{}return!1}),wt=Ft=>(0,G.tableFromIPC)(new Uint8Array(Ft)),Dt=Ft=>(0,G.tableToIPC)(Ft,"file").buffer;function te(Ft){const J=[];for(let ut=0;ut<Ft.numRows;ut++){const vt=Ft.get(ut);vt&&J.push(vt.toJSON())}return J}var ie="text/csv",ft="application/vnd.apache.parquet",Ht=Ft=>h(null,null,function*(){return(yield Ft.slice(0,4).text()).startsWith("PAR1")}),Nt=(Ft,J,ut)=>h(null,null,function*(){const vt=ut||pe(J,"arrow"),Mt=yield nt(Ft,`SELECT * FROM '${J}'`),re=Dt(Mt);return new File([re],vt,{type:lt})}),he=(Ft,J,ut,vt=",")=>h(null,null,function*(){const Mt=ut||pe(J,"csv"),re=k();yield nt(Ft,`COPY '${J}' TO '${re}' WITH (HEADER 1, DELIMITER '${vt}')`);const be=yield Ft.copyFileToBuffer(re);return yield Ft.dropFile(re),new File([be],Mt,{type:ie})}),me=(Ft,J,ut,vt="zstd")=>h(null,null,function*(){const Mt=ut||pe(J,"parquet"),re=k();yield nt(Ft,`COPY '${J}' TO '${re}' (FORMAT PARQUET, COMPRESSION ${vt})`);const be=yield Ft.copyFileToBuffer(re);return yield Ft.dropFile(re),new File([be],Mt,{type:ft})}),Me=(Ft,J)=>{const ut=Ft.split("."),vt=ut.length>1?ut.pop():"",Mt=ut.join(".");return J.includes(vt)?Mt:Ft},pe=(Ft,J)=>`${Me(Ft,["arrow","csv","parquet"])}.${J}`,Oe=l(Fb()),Ye=(Ft,J)=>h(null,null,function*(){const ut=yield Ot(Ft,J),vt=Array.from(ut.keys());for(let Mt=0;Mt<vt.length;Mt++){const re=vt[Mt];re.toLowerCase().includes("year")&&(yield nt(Ft,`ALTER TABLE "${J}" ALTER COLUMN "${re}" SET DATA TYPE VARCHAR`))}}),Ee=class extends Error{constructor(Ft,J){super(J),this.title=Ft,this.name="InsertFileError"}},qe=(Ft,J,ut,vt=!1)=>h(null,null,function*(){const Mt=performance.now();yield dt(Ft,J,ut),vt&&B(`Imported ${J.name}`,Mt)}),dt=(Ft,J,ut)=>h(null,null,function*(){try{const vt=ut||J.name;if(yield Ht(J)){yield ee(Ft,J,vt);return}if(yield mt(J)){yield K(Ft,J,vt);return}switch(J.name.toLowerCase().split(".").at(-1)){case"arrow":yield K(Ft,J,vt);return;case"parquet":yield ee(Ft,J,vt);return;case"csv":yield Y(Ft,J,vt);return}return yield Y(Ft,J,vt)}catch(vt){throw console.error(vt),vt instanceof Ee?vt:new Ee("Invalid file type","Only CSV, Parquet, or Arrow files are supported")}}),Y=(Ft,J,ut)=>h(null,null,function*(){try{const vt=yield J.text(),Mt=k();yield Ft.registerFileText(Mt,vt);const re=yield Ft.connect();yield re.insertCSVFromPath(Mt,{name:ut,schema:"main",detect:!0}),yield re.close(),Ft.dropFile(Mt),yield Ye(Ft,ut)}catch(vt){throw console.error(vt),J.type==="text/csv"||J.name.toLowerCase().endsWith(".csv")?new Ee("CSV import failed","Sorry, we couldn't import that CSV. Please try again."):vt}}),K=(Ft,J,ut)=>h(null,null,function*(){try{const vt=yield J.arrayBuffer(),Mt=wt(vt);yield Ct(Ft,Mt,ut)}catch(vt){throw console.error(vt),new Ee("Arrow import failed","Sorry, we couldn't import that file")}}),Ct=(Ft,J,ut)=>h(null,null,function*(){const vt=yield Ft.connect();yield vt.insertArrowTable(J,{name:ut}),yield vt.close()}),ee=(Ft,J,ut)=>h(null,null,function*(){try{const vt=`${k()}.parquet`;yield Ft.registerFileHandle(vt,J,Oe.DuckDBDataProtocol.BROWSER_FILEREADER,!0),yield nt(Ft,`CREATE TABLE '${ut}' AS SELECT * FROM '${vt}'`),yield Ft.dropFile(vt)}catch(vt){throw console.error(vt),new Ee("Parquet import failed","Sorry, we couldn't import that file")}});return h3}var U9=mit();const _it="modulepreload",bit=function(t){return"/fire-nrt-parquet/"+t},l8={},vit=function(e,i,n){let r=Promise.resolve();if(i&&i.length>0){let a=function(c){return Promise.all(c.map(h=>Promise.resolve(h).then(A=>({status:"fulfilled",value:A}),A=>({status:"rejected",reason:A}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=a(i.map(c=>{if(c=bit(c),c in l8)return;l8[c]=!0;const h=c.endsWith(".css"),A=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${A}`))return;const m=document.createElement("link");if(m.rel=h?"stylesheet":_it,h||(m.as="script"),m.crossOrigin="",m.href=c,l&&m.setAttribute("nonce",l),document.head.appendChild(m),h)return new Promise((b,S)=>{m.addEventListener("load",b),m.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})},Tit=Fe.createContext(null);function Sit(t,e){const i=Array.isArray(t)?t[0]:t?t.x:0,n=Array.isArray(t)?t[1]:t?t.y:0,r=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return i===r&&n===s}function Jo(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!Jo(t[i],e[i]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(const r of i)if(!e.hasOwnProperty(r)||!Jo(t[r],e[r]))return!1;return!0}return!1}function c8(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function u8(t,e){const i=e.viewState||e,n={};if("longitude"in i&&"latitude"in i&&(i.longitude!==t.center.lng||i.latitude!==t.center.lat)){const r=t.center.constructor;n.center=new r(i.longitude,i.latitude)}return"zoom"in i&&i.zoom!==t.zoom&&(n.zoom=i.zoom),"bearing"in i&&i.bearing!==t.bearing&&(n.bearing=i.bearing),"pitch"in i&&i.pitch!==t.pitch&&(n.pitch=i.pitch),i.padding&&t.padding&&!Jo(i.padding,t.padding)&&(n.padding=i.padding),n}const wit=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function h8(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const n of t.layers)e[n.id]=n;const i=t.layers.map(n=>{let r=null;"interactive"in n&&(r=Object.assign({},n),delete r.interactive);const s=e[n.ref];if(s){r=r||Object.assign({},n),delete r.ref;for(const a of wit)a in s&&(r[a]=s[a])}return r||n});return{...t,layers:i}}const f8={version:8,sources:{},layers:[]},d8={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},A8={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},g8={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Mit=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Iit=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class $A{constructor(e,i,n){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=r=>{const s=this.props[g8[r.type]];s?s(r):r.type==="error"&&console.error(r.error)},this._onCameraEvent=r=>{if(this._internalUpdate)return;r.viewState=this._propsedCameraUpdate||c8(this._map.transform);const s=this.props[A8[r.type]];s&&s(r)},this._onCameraUpdate=r=>this._internalUpdate?r:(this._propsedCameraUpdate=c8(r),u8(r,this.props)),this._onPointerEvent=r=>{(r.type==="mousemove"||r.type==="mouseout")&&this._updateHover(r);const s=this.props[d8[r.type]];s&&(this.props.interactiveLayerIds&&r.type!=="mouseover"&&r.type!=="mouseout"&&(r.features=this._hoveredFeatures||this._queryRenderedFeatures(r.point)),s(r),delete r.features)},this._MapClass=e,this.props=i,this._initialize(n)}get map(){return this._map}setProps(e){const i=this.props;this.props=e;const n=this._updateSettings(e,i),r=this._updateSize(e),s=this._updateViewState(e);this._updateStyle(e,i),this._updateStyleComponents(e),this._updateHandlers(e,i),(n||r||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,i){const n=$A.savedMaps.pop();if(!n)return null;const r=n.map,s=r.getContainer();for(i.className=s.className;s.childNodes.length>0;)i.appendChild(s.childNodes[0]);r._container=i;const a=r._resizeObserver;a&&(a.disconnect(),a.observe(i)),n.setProps({...e,styleDiffing:!1}),r.resize();const{initialViewState:o}=e;return o&&(o.bounds?r.fitBounds(o.bounds,{...o.fitBoundsOptions,duration:0}):n._updateViewState(o)),r.isStyleLoaded()?r.fire("load"):r.once("style.load",()=>r.fire("load")),r._update(),n}_initialize(e){const{props:i}=this,{mapStyle:n=f8}=i,r={...i,...i.initialViewState,container:e,style:h8(n)},s=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),i.gl){const o=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=o,i.gl)}const a=new this._MapClass(r);s.padding&&a.setPadding(s.padding),i.cursor&&(a.getCanvas().style.cursor=i.cursor),a.transformCameraUpdate=this._onCameraUpdate,a.on("style.load",()=>{var o;this._styleComponents={light:a.getLight(),sky:a.getSky(),projection:(o=a.getProjection)==null?void 0:o.call(a),terrain:a.getTerrain()},this._updateStyleComponents(this.props)}),a.on("sourcedata",()=>{this._updateStyleComponents(this.props)});for(const o in d8)a.on(o,this._onPointerEvent);for(const o in A8)a.on(o,this._onCameraEvent);for(const o in g8)a.on(o,this._onEvent);this._map=a}recycle(){const i=this.map.getContainer().querySelector("[mapboxgl-children]");i==null||i.remove(),$A.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_updateSize(e){const{viewState:i}=e;if(i){const n=this._map;if(i.width!==n.transform.width||i.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(e){const i=this._map,n=i.transform;if(!i.isMoving()){const s=u8(n,e);if(Object.keys(s).length>0)return this._internalUpdate=!0,i.jumpTo(s),this._internalUpdate=!1,!0}return!1}_updateSettings(e,i){const n=this._map;let r=!1;for(const s of Mit)if(s in e&&!Jo(e[s],i[s])){r=!0;const a=n[`set${s[0].toUpperCase()}${s.slice(1)}`];a==null||a.call(n,e[s])}return r}_updateStyle(e,i){if(e.cursor!==i.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==i.mapStyle){const{mapStyle:n=f8,styleDiffing:r=!0}=e,s={diff:r};"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(h8(n),s)}}_updateStyleComponents({light:e,projection:i,sky:n,terrain:r}){var o,l;const s=this._map,a=this._styleComponents;s.style._loaded&&(e&&!Jo(e,a.light)&&(a.light=e,s.setLight(e)),i&&!Jo(i,a.projection)&&i!==((o=a.projection)==null?void 0:o.type)&&(a.projection=typeof i=="string"?{type:i}:i,(l=s.setProjection)==null||l.call(s,a.projection)),n&&!Jo(n,a.sky)&&(a.sky=n,s.setSky(n)),r!==void 0&&!Jo(r,a.terrain)&&(!r||s.getSource(r.source))&&(a.terrain=r,s.setTerrain(r)))}_updateHandlers(e,i){const n=this._map;for(const r of Iit){const s=e[r]??!0,a=i[r]??!0;Jo(s,a)||(s?n[r].enable(s):n[r].disable())}}_queryRenderedFeatures(e){const i=this._map,{interactiveLayerIds:n=[]}=this.props;try{return i.queryRenderedFeatures(e,{layers:n.filter(i.getLayer.bind(i))})}catch{return[]}}_updateHover(e){var r;const{props:i}=this;if(i.interactiveLayerIds&&(i.onMouseMove||i.onMouseEnter||i.onMouseLeave)){const s=e.type,a=((r=this._hoveredFeatures)==null?void 0:r.length)>0,o=this._queryRenderedFeatures(e.point),l=o.length>0;!l&&a&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=o,l&&!a&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}}$A.savedMaps=[];const Eit=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Bit(t){if(!t)return null;const e=t.map,i={getMap:()=>e};for(const n of Oit(e))!(n in i)&&!Eit.includes(n)&&(i[n]=e[n].bind(e));return i}function Oit(t){const e=new Set;let i=t;for(;i;){for(const n of Object.getOwnPropertyNames(i))n[0]!=="_"&&typeof t[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&e.add(n);i=Object.getPrototypeOf(i)}return Array.from(e)}const Rit=typeof document<"u"?Fe.useLayoutEffect:Fe.useEffect;function Dit(t,e){const{RTLTextPlugin:i,maxParallelImageRequests:n,workerCount:r,workerUrl:s}=e;if(i&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"){const{pluginUrl:a,lazy:o=!0}=typeof i=="string"?{pluginUrl:i}:i;t.setRTLTextPlugin(a,l=>{l&&console.error(l)},o)}n!==void 0&&t.setMaxParallelImageRequests(n),r!==void 0&&t.setWorkerCount(r),s!==void 0&&t.setWorkerUrl(s)}const MT=Fe.createContext(null);function Cit(t,e){const i=Fe.useContext(Tit),[n,r]=Fe.useState(null),s=Fe.useRef(),{current:a}=Fe.useRef({mapLib:null,map:null});Fe.useEffect(()=>{const c=t.mapLib;let h=!0,A;return Promise.resolve(c||vit(()=>import("./maplibre-gl-BmUMfZIK.js").then(m=>m.m),[])).then(m=>{if(!h)return;if(!m)throw new Error("Invalid mapLib");const b="Map"in m?m:m.default;if(!b.Map)throw new Error("Invalid mapLib");Dit(b,t),t.reuseMaps&&(A=$A.reuse(t,s.current)),A||(A=new $A(b.Map,t,s.current)),a.map=Bit(A),a.mapLib=b,r(A),i==null||i.onMapMount(a.map,t.id)}).catch(m=>{const{onError:b}=t;b?b({type:"error",target:null,originalEvent:null,error:m}):console.error(m)}),()=>{h=!1,A&&(i==null||i.onMapUnmount(t.id),t.reuseMaps?A.recycle():A.destroy())}},[]),Rit(()=>{n&&n.setProps(t)}),Fe.useImperativeHandle(e,()=>a.map,[n]);const o=Fe.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),l={height:"100%"};return Fe.createElement("div",{id:t.id,ref:s,style:o},n&&Fe.createElement(MT.Provider,{value:a},Fe.createElement("div",{"mapboxgl-children":"",style:l},t.children)))}const Pit=Fe.forwardRef(Cit);var k9=Ak();const xit=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Cc(t,e){if(!t||!e)return;const i=t.style;for(const n in e){const r=e[n];Number.isFinite(r)&&!xit.test(n)?i[n]=`${r}px`:i[n]=r}}function j9(t,e){if(t===e)return null;const i=y8(t),n=y8(e),r=[];for(const s of n)i.has(s)||r.push(s);for(const s of i)n.has(s)||r.push(s);return r.length===0?null:r}function y8(t){return new Set(t?t.trim().split(/\s+/):[])}Fe.memo(Fe.forwardRef((t,e)=>{const{map:i,mapLib:n}=Fe.useContext(MT),r=Fe.useRef({props:t}),s=Fe.useMemo(()=>{let O=!1;Fe.Children.forEach(t.children,P=>{P&&(O=!0)});const D={...t,element:O?document.createElement("div"):void 0},B=new n.Marker(D);return B.setLngLat([t.longitude,t.latitude]),B.getElement().addEventListener("click",P=>{var j,N;(N=(j=r.current.props).onClick)==null||N.call(j,{type:"click",target:B,originalEvent:P})}),B.on("dragstart",P=>{var N,F;const j=P;j.lngLat=s.getLngLat(),(F=(N=r.current.props).onDragStart)==null||F.call(N,j)}),B.on("drag",P=>{var N,F;const j=P;j.lngLat=s.getLngLat(),(F=(N=r.current.props).onDrag)==null||F.call(N,j)}),B.on("dragend",P=>{var N,F;const j=P;j.lngLat=s.getLngLat(),(F=(N=r.current.props).onDragEnd)==null||F.call(N,j)}),B},[]);Fe.useEffect(()=>(s.addTo(i.getMap()),()=>{s.remove()}),[]);const{longitude:a,latitude:o,offset:l,style:c,draggable:h=!1,popup:A=null,rotation:m=0,rotationAlignment:b="auto",pitchAlignment:S="auto"}=t;Fe.useEffect(()=>{Cc(s.getElement(),c)},[c]),Fe.useImperativeHandle(e,()=>s,[]);const M=r.current.props;(s.getLngLat().lng!==a||s.getLngLat().lat!==o)&&s.setLngLat([a,o]),l&&!Sit(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==h&&s.setDraggable(h),s.getRotation()!==m&&s.setRotation(m),s.getRotationAlignment()!==b&&s.setRotationAlignment(b),s.getPitchAlignment()!==S&&s.setPitchAlignment(S),s.getPopup()!==A&&s.setPopup(A);const I=j9(M.className,t.className);if(I)for(const O of I)s.toggleClassName(O);return r.current.props=t,k9.createPortal(t.children,s.getElement())}));Fe.memo(Fe.forwardRef((t,e)=>{const{map:i,mapLib:n}=Fe.useContext(MT),r=Fe.useMemo(()=>document.createElement("div"),[]),s=Fe.useRef({props:t}),a=Fe.useMemo(()=>{const o={...t},l=new n.Popup(o);return l.setLngLat([t.longitude,t.latitude]),l.once("open",c=>{var h,A;(A=(h=s.current.props).onOpen)==null||A.call(h,c)}),l},[]);if(Fe.useEffect(()=>{const o=l=>{var c,h;(h=(c=s.current.props).onClose)==null||h.call(c,l)};return a.on("close",o),a.setDOMContent(r).addTo(i.getMap()),()=>{a.off("close",o),a.isOpen()&&a.remove()}},[]),Fe.useEffect(()=>{Cc(a.getElement(),t.style)},[t.style]),Fe.useImperativeHandle(e,()=>a,[]),a.isOpen()){const o=s.current.props;(a.getLngLat().lng!==t.longitude||a.getLngLat().lat!==t.latitude)&&a.setLngLat([t.longitude,t.latitude]),t.offset&&!Jo(o.offset,t.offset)&&a.setOffset(t.offset),(o.anchor!==t.anchor||o.maxWidth!==t.maxWidth)&&(a.options.anchor=t.anchor,a.setMaxWidth(t.maxWidth));const l=j9(o.className,t.className);if(l)for(const c of l)a.toggleClassName(c);s.current.props=t}return k9.createPortal(t.children,r)}));function qu(t,e,i,n){const r=Fe.useContext(MT),s=Fe.useMemo(()=>t(r),[]);return Fe.useEffect(()=>{const a=e,o=null,l=typeof e=="function"?e:null,{map:c}=r;return c.hasControl(s)||(c.addControl(s,a==null?void 0:a.position),o&&o(r)),()=>{l&&l(r),c.hasControl(s)&&c.removeControl(s)}},[]),s}function Nit(t){const e=qu(({mapLib:i})=>new i.AttributionControl(t),{position:t.position});return Fe.useEffect(()=>{Cc(e._container,t.style)},[t.style]),null}Fe.memo(Nit);function Fit(t){const e=qu(({mapLib:i})=>new i.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return Fe.useEffect(()=>{Cc(e._controlContainer,t.style)},[t.style]),null}Fe.memo(Fit);function Lit(t,e){const i=Fe.useRef({props:t}),n=qu(({mapLib:r})=>{const s=new r.GeolocateControl(t),a=s._setupUI;return s._setupUI=()=>{s._container.hasChildNodes()||a()},s.on("geolocate",o=>{var l,c;(c=(l=i.current.props).onGeolocate)==null||c.call(l,o)}),s.on("error",o=>{var l,c;(c=(l=i.current.props).onError)==null||c.call(l,o)}),s.on("outofmaxbounds",o=>{var l,c;(c=(l=i.current.props).onOutOfMaxBounds)==null||c.call(l,o)}),s.on("trackuserlocationstart",o=>{var l,c;(c=(l=i.current.props).onTrackUserLocationStart)==null||c.call(l,o)}),s.on("trackuserlocationend",o=>{var l,c;(c=(l=i.current.props).onTrackUserLocationEnd)==null||c.call(l,o)}),s},{position:t.position});return i.current.props=t,Fe.useImperativeHandle(e,()=>n,[]),Fe.useEffect(()=>{Cc(n._container,t.style)},[t.style]),null}Fe.memo(Fe.forwardRef(Lit));function Uit(t){const e=qu(({mapLib:i})=>new i.NavigationControl(t),{position:t.position});return Fe.useEffect(()=>{Cc(e._container,t.style)},[t.style]),null}Fe.memo(Uit);function kit(t){const e=qu(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),i=Fe.useRef(t),n=i.current;i.current=t;const{style:r}=t;return t.maxWidth!==void 0&&t.maxWidth!==n.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==n.unit&&e.setUnit(t.unit),Fe.useEffect(()=>{Cc(e._container,r)},[r]),null}Fe.memo(kit);function jit(t){const e=qu(({mapLib:i})=>new i.TerrainControl(t),{position:t.position});return Fe.useEffect(()=>{Cc(e._container,t.style)},[t.style]),null}Fe.memo(jit);function zit(t){const e=qu(({mapLib:i})=>new i.LogoControl(t),{position:t.position});return Fe.useEffect(()=>{Cc(e._container,t.style)},[t.style]),null}Fe.memo(zit);function Yv(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const TB=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),p8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);p8&&parseFloat(p8[1]);const Ub=globalThis,jd=globalThis.process||{},Vit=globalThis.navigator||{};function z9(t){var n,r;if(typeof window<"u"&&((n=window.process)==null?void 0:n.type)==="renderer"||typeof process<"u"&&((r=process.versions)!=null&&r.electron))return!0;const i=typeof navigator<"u"&&navigator.userAgent;return!!(i&&i.indexOf("Electron")>=0)}function Wf(){return!(typeof process=="object"&&String(process)==="[object process]"&&!(process!=null&&process.browser))||z9()}function $it(t){return Wf()?z9()?"Electron":(Vit.userAgent||"").indexOf("Edge")>-1?"Edge":globalThis.chrome?"Chrome":globalThis.safari?"Safari":globalThis.mozInnerScreenX?"Firefox":"Unknown":"Node"}const V9="4.1.0";function Wit(t){try{const e=window[t],i="__storage_test__";return e.setItem(i,i),e.removeItem(i),e}catch{return null}}class Hit{constructor(e,i,n="sessionStorage"){this.storage=Wit(n),this.id=e,this.config=i,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const i=JSON.stringify(this.config);this.storage.setItem(this.id,i)}}_loadConfiguration(){let e={};if(this.storage){const i=this.storage.getItem(this.id);e=i?JSON.parse(i):{}}return Object.assign(this.config,e),this}}function qit(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function Yit(t,e=8){const i=Math.max(e-t.length,0);return`${" ".repeat(i)}${t}`}var Gv;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Gv||(Gv={}));const Git=10;function m8(t){return typeof t!="string"?t:(t=t.toUpperCase(),Gv[t]||Gv.WHITE)}function Xit(t,e,i){return!Wf&&typeof t=="string"&&(e&&(t=`\x1B[${m8(e)}m${t}\x1B[39m`),i&&(t=`\x1B[${m8(i)+Git}m${t}\x1B[49m`)),t}function Qit(t,e=["constructor"]){const i=Object.getPrototypeOf(t),n=Object.getOwnPropertyNames(i),r=t;for(const s of n){const a=r[s];typeof a=="function"&&(e.find(o=>s===o)||(r[s]=a.bind(t)))}}function SB(t,e){if(!t)throw new Error("Assertion failed")}function zd(){var e,i,n;let t;if(Wf()&&Ub.performance)t=(i=(e=Ub==null?void 0:Ub.performance)==null?void 0:e.now)==null?void 0:i.call(e);else if("hrtime"in jd){const r=(n=jd==null?void 0:jd.hrtime)==null?void 0:n.call(jd);t=r[0]*1e3+r[1]/1e6}else t=Date.now();return t}const Vd={debug:Wf()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Kit={enabled:!0,level:0};function $d(){}const _8={},b8={once:!0};class e1{constructor({id:e}={id:""}){this.VERSION=V9,this._startTs=zd(),this._deltaTs=zd(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new Hit(`__probe-${this.id}__`,Kit),this.timeStamp(`${this.id} started`),Qit(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((zd()-this._startTs).toPrecision(10))}getDelta(){return Number((zd()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,i){this._storage.setConfiguration({[e]:i})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,i){if(!e)throw new Error(i||"Assertion failed")}warn(e){return this._getLogFunction(0,e,Vd.warn,arguments,b8)}error(e){return this._getLogFunction(0,e,Vd.error,arguments)}deprecated(e,i){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${i}\` instead`)}removed(e,i){return this.error(`\`${e}\` has been removed. Use \`${i}\` instead`)}probe(e,i){return this._getLogFunction(e,i,Vd.log,arguments,{time:!0,once:!0})}log(e,i){return this._getLogFunction(e,i,Vd.debug,arguments)}info(e,i){return this._getLogFunction(e,i,console.info,arguments)}once(e,i){return this._getLogFunction(e,i,Vd.debug||Vd.info,arguments,b8)}table(e,i,n){return i?this._getLogFunction(e,i,console.table||$d,n&&[n],{tag:Jit(i)}):$d}time(e,i){return this._getLogFunction(e,i,console.time?console.time:console.info)}timeEnd(e,i){return this._getLogFunction(e,i,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,i){return this._getLogFunction(e,i,console.timeStamp||$d)}group(e,i,n={collapsed:!1}){const r=v8({logLevel:e,message:i,opts:n}),{collapsed:s}=n;return r.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(r)}groupCollapsed(e,i,n={}){return this.group(e,i,Object.assign({},n,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||$d)}withGroup(e,i,n){this.group(e,i)();try{n()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=$9(e)}_getLogFunction(e,i,n,r,s){if(this._shouldLog(e)){s=v8({logLevel:e,message:i,args:r,opts:s}),n=n||s.method,SB(n),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=zd();const a=s.tag||s.message;if(s.once&&a)if(!_8[a])_8[a]=zd();else return $d;return i=Zit(this.id,s.message,s),n.bind(console,i,...s.args)}return $d}}e1.VERSION=V9;function $9(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return SB(Number.isFinite(e)&&e>=0),e}function v8(t){const{logLevel:e,message:i}=t;t.logLevel=$9(e);const n=t.args?Array.from(t.args):[];for(;n.length&&n.shift()!==i;);switch(typeof e){case"string":case"function":i!==void 0&&n.unshift(i),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const r=typeof t.message;return SB(r==="string"||r==="object"),Object.assign(t,{args:n},t.opts)}function Zit(t,e,i){if(typeof e=="string"){const n=i.time?Yit(qit(i.total)):"";e=i.time?`${t}: ${n}  ${e}`:`${t}: ${e}`,e=Xit(e,i.color,i.background)}return e}function Jit(t){for(const e in t)for(const i in t[e])return i||"untitled";return"empty"}const f3="4.3.2",tnt=f3[0]>="0"&&f3[0]<="9"?`v${f3}`:"";function ent(){const t=new e1({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=tnt,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}const int=ent();function nnt(t,e){return W9(t||{},e)}function W9(t,e,i=0){if(i>3)return e;const n={...t};for(const[r,s]of Object.entries(e))s&&typeof s=="object"&&!Array.isArray(s)?n[r]=W9(n[r]||{},e[r],i+1):n[r]=e[r];return n}const rnt="latest";function snt(){var t;return(t=globalThis._loadersgl_)!=null&&t.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.2"),globalThis._loadersgl_.version}const ant=snt();function Lu(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const lf=typeof process!="object"||String(process)!=="[object process]"||process.browser,ont=typeof window<"u"&&typeof window.orientation<"u",T8=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);T8&&parseFloat(T8[1]);class lnt{constructor(e,i){rt(this,"name");rt(this,"workerThread");rt(this,"isRunning",!0);rt(this,"result");rt(this,"_resolve",()=>{});rt(this,"_reject",()=>{});this.name=e,this.workerThread=i,this.result=new Promise((n,r)=>{this._resolve=n,this._reject=r})}postMessage(e,i){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:i})}done(e){Lu(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Lu(this.isRunning),this.isRunning=!1,this._reject(e)}}class d3{terminate(){}}const A3=new Map;function cnt(t){Lu(t.source&&!t.url||!t.source&&t.url);let e=A3.get(t.source||t.url);return e||(t.url&&(e=unt(t.url),A3.set(t.url,e)),t.source&&(e=H9(t.source),A3.set(t.source,e))),Lu(e),e}function unt(t){if(!t.startsWith("http"))return t;const e=hnt(t);return H9(e)}function H9(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function hnt(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function q9(t,e=!0,i){const n=i||new Set;if(t){if(S8(t))n.add(t);else if(S8(t.buffer))n.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const r in t)q9(t[r],e,n)}}return i===void 0?Array.from(n):[]}function S8(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const g3=()=>{};class CM{constructor(e){rt(this,"name");rt(this,"source");rt(this,"url");rt(this,"terminated",!1);rt(this,"worker");rt(this,"onMessage");rt(this,"onError");rt(this,"_loadableURL","");const{name:i,source:n,url:r}=e;Lu(n||r),this.name=i,this.source=n,this.url=r,this.onMessage=g3,this.onError=s=>console.log(s),this.worker=lf?this._createBrowserWorker():this._createNodeWorker()}static isSupported(){return typeof Worker<"u"&&lf||typeof d3<"u"&&!lf}destroy(){this.onMessage=g3,this.onError=g3,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,i){i=i||q9(e),this.worker.postMessage(e,i)}_getErrorFromErrorEvent(e){let i="Failed to load ";return i+=`worker ${this.name} from ${this.url}. `,e.message&&(i+=`${e.message} in `),e.lineno&&(i+=`:${e.lineno}:${e.colno}`),new Error(i)}_createBrowserWorker(){this._loadableURL=cnt({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=i=>{i.data?this.onMessage(i.data):this.onError(new Error("No data received"))},e.onerror=i=>{this.onError(this._getErrorFromErrorEvent(i)),this.terminated=!0},e.onmessageerror=i=>console.error(i),e}_createNodeWorker(){let e;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new d3(n,{eval:!1})}else if(this.source)e=new d3(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",i=>{this.onMessage(i)}),e.on("error",i=>{this.onError(i)}),e.on("exit",i=>{}),e}}class fnt{constructor(e){rt(this,"name","unnamed");rt(this,"source");rt(this,"url");rt(this,"maxConcurrency",1);rt(this,"maxMobileConcurrency",1);rt(this,"onDebug",()=>{});rt(this,"reuseWorkers",!0);rt(this,"props",{});rt(this,"jobQueue",[]);rt(this,"idleQueue",[]);rt(this,"count",0);rt(this,"isDestroyed",!1);this.source=e.source,this.url=e.url,this.setProps(e)}static isSupported(){return CM.isSupported()}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,i=(r,s,a)=>r.done(a),n=(r,s)=>r.error(s)){const r=new Promise(s=>(this.jobQueue.push({name:e,onMessage:i,onError:n,onStart:s}),this));return this._startQueuedJob(),await r}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const i=this.jobQueue.shift();if(i){this.onDebug({message:"Starting job",name:i.name,workerThread:e,backlog:this.jobQueue.length});const n=new lnt(i.name,e);e.onMessage=r=>i.onMessage(n,r.type,r.payload),e.onError=r=>i.onError(n,r),i.onStart(n);try{await n.result}catch(r){console.error(`Worker exception: ${r}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!lf||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new CM({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return ont?this.maxMobileConcurrency:this.maxConcurrency}}const dnt={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},bu=class bu{constructor(e){rt(this,"props");rt(this,"workerPools",new Map);this.props={...dnt},this.setProps(e),this.workerPools=new Map}static isSupported(){return CM.isSupported()}static getWorkerFarm(e={}){return bu._workerFarm=bu._workerFarm||new bu({}),bu._workerFarm.setProps(e),bu._workerFarm}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const i of this.workerPools.values())i.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:i,source:n,url:r}=e;let s=this.workerPools.get(i);return s||(s=new fnt({name:i,source:n,url:r}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(i,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};rt(bu,"_workerFarm");let Xv=bu;function Ant(t,e={}){const i=e[t.id]||{},n=lf?`${t.id}-worker.js`:`${t.id}-worker-node.js`;let r=i.workerUrl;if(!r&&t.id==="compression"&&(r=e.workerUrl),e._workerType==="test"&&(lf?r=`modules/${t.module}/dist/${n}`:r=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!r){let s=t.version;s==="latest"&&(s=rnt);const a=s?`@${s}`:"";r=`https://unpkg.com/@loaders.gl/${t.module}${a}/dist/${n}`}return Lu(r),r}function gnt(t,e=ant){Lu(t,"no worker provided");const i=t.version;return!(!e||!i)}function ynt(t,e){return!Xv.isSupported()||!lf&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function pnt(t,e,i,n,r){const s=t.id,a=Ant(t,i),l=Xv.getWorkerFarm(i).getWorkerPool({name:s,url:a});i=JSON.parse(JSON.stringify(i)),n=JSON.parse(JSON.stringify(n||{}));const c=await l.startJob("process-on-worker",mnt.bind(null,r));return c.postMessage("process",{input:e,options:i,context:n}),await(await c.result).result}async function mnt(t,e,i,n){switch(i){case"done":e.done(n);break;case"error":e.error(new Error(n.error));break;case"process":const{id:r,input:s,options:a}=n;try{const o=await t(s,a);e.postMessage("done",{id:r,result:o})}catch(o){const l=o instanceof Error?o.message:"unknown error";e.postMessage("error",{id:r,error:l})}break;default:console.warn(`parse-with-worker unknown message ${i}`)}}function _nt(t,e,i){if(i=i||t.byteLength,t.byteLength<i||e.byteLength<i)return!1;const n=new Uint8Array(t),r=new Uint8Array(e);for(let s=0;s<n.length;++s)if(n[s]!==r[s])return!1;return!0}function bnt(...t){return vnt(t)}function vnt(t){const e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),i=e.reduce((s,a)=>s+a.byteLength,0),n=new Uint8Array(i);let r=0;for(const s of e)n.set(s,r),r+=s.byteLength;return n.buffer}async function Tnt(t){const e=[];for await(const i of t)e.push(i);return bnt(...e)}function w8(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class M8{constructor(e,i){this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=i,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=w8(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(w8()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class IT{constructor(e){this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e,i="count"){return this._getOrCreate({name:e,type:i})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const i of Object.values(this.stats))e(i)}getTable(){const e={};return this.forEach(i=>{e[i.name]={time:i.time||0,count:i.count||0,average:i.getAverageTime()||0,hz:i.getHz()||0}}),e}_initializeStats(e=[]){e.forEach(i=>this._getOrCreate(i))}_getOrCreate(e){const{name:i,type:n}=e;let r=this.stats[i];return r||(e instanceof M8?r=e:r=new M8(i,n),this.stats[i]=r),r}}let Snt="";const I8={};function wnt(t){for(const e in I8)if(t.startsWith(e)){const i=I8[e];t=t.replace(e,i)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${Snt}${t}`),t}function Mnt(t){return t&&typeof t=="object"&&t.isBuffer}function Y9(t){if(Mnt(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function G9(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function Int(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const Ent=t=>typeof t=="boolean",Km=t=>typeof t=="function",i1=t=>t!==null&&typeof t=="object",E8=t=>i1(t)&&t.constructor==={}.constructor,Bnt=t=>!!t&&typeof t[Symbol.iterator]=="function",Ont=t=>t&&typeof t[Symbol.asyncIterator]=="function",Hf=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,qf=t=>typeof Blob<"u"&&t instanceof Blob,Rnt=t=>t&&typeof t=="object"&&t.isBuffer,Dnt=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||i1(t)&&Km(t.tee)&&Km(t.cancel)&&Km(t.getReader),Cnt=t=>i1(t)&&Km(t.read)&&Km(t.pipe)&&Ent(t.readable),X9=t=>Dnt(t)||Cnt(t);class Pnt extends Error{constructor(i,n){super(i);rt(this,"reason");rt(this,"url");rt(this,"response");this.reason=n.reason,this.url=n.url,this.response=n.response}}const xnt=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Nnt=/^([-\w.]+\/[-\w.+]+)/;function B8(t,e){return t.toLowerCase()===e.toLowerCase()}function Fnt(t){const e=Nnt.exec(t);return e?e[1]:t}function O8(t){const e=xnt.exec(t);return e?e[1]:""}const Q9=/\?.*/;function Lnt(t){const e=t.match(Q9);return e&&e[0]}function wB(t){return t.replace(Q9,"")}function Unt(t){if(t.length<50)return t;const e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function ET(t){return Hf(t)?t.url:qf(t)?t.name||"":typeof t=="string"?t:""}function MB(t){if(Hf(t)){const e=t,i=e.headers.get("content-type")||"",n=wB(e.url);return Fnt(i)||O8(n)}return qf(t)?t.type||"":typeof t=="string"?O8(t):""}function knt(t){return Hf(t)?t.headers["content-length"]||-1:qf(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function K9(t){if(Hf(t))return t;const e={},i=knt(t);i>=0&&(e["content-length"]=String(i));const n=ET(t),r=MB(t);r&&(e["content-type"]=r);const s=await Vnt(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const a=new Response(t,{headers:e});return Object.defineProperty(a,"url",{value:n}),a}async function jnt(t){if(!t.ok)throw await znt(t)}async function znt(t){const e=Unt(t.url);let i=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;i=i.length>100?`${i.slice(0,100)}...`:i;const n={reason:t.statusText,url:t.url,response:t};try{const r=t.headers.get("Content-Type");n.reason=!t.bodyUsed&&(r!=null&&r.includes("application/json"))?await t.json():await t.text()}catch{}return new Pnt(i,n)}async function Vnt(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){const i=t.slice(0,5);return await new Promise(n=>{const r=new FileReader;r.onload=s=>{var a;return n((a=s==null?void 0:s.target)==null?void 0:a.result)},r.readAsDataURL(i)})}if(t instanceof ArrayBuffer){const i=t.slice(0,5);return`data:base64,${$nt(i)}`}return null}function $nt(t){let e="";const i=new Uint8Array(t);for(let n=0;n<i.byteLength;n++)e+=String.fromCharCode(i[n]);return btoa(e)}function Wnt(t){return!Hnt(t)&&!qnt(t)}function Hnt(t){return t.startsWith("http:")||t.startsWith("https:")}function qnt(t){return t.startsWith("data:")}async function R8(t,e){var i,n;if(typeof t=="string"){const r=wnt(t);return Wnt(r)&&(i=globalThis.loaders)!=null&&i.fetchNode?(n=globalThis.loaders)==null?void 0:n.fetchNode(r,e):await fetch(r,e)}return await K9(t)}const D8=new e1({id:"loaders.gl"});class Ynt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class Gnt{constructor(){rt(this,"console");this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}}const Z9={fetch:null,mimeType:void 0,nothrow:!1,log:new Gnt,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:TB,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Xnt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function J9(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function tz(){const t=J9();return t.globalOptions=t.globalOptions||{...Z9},t.globalOptions}function Qnt(t,e,i,n){return i=i||[],i=Array.isArray(i)?i:[i],Knt(t,i),Jnt(e,t,n)}function Knt(t,e){C8(t,null,Z9,Xnt,e);for(const i of e){const n=t&&t[i.id]||{},r=i.options&&i.options[i.id]||{},s=i.deprecatedOptions&&i.deprecatedOptions[i.id]||{};C8(n,i.id,r,s,e)}}function C8(t,e,i,n,r){const s=e||"Top level",a=e?`${e}.`:"";for(const o in t){const l=!e&&i1(t[o]),c=o==="baseUri"&&!e,h=o==="workerUrl"&&e;if(!(o in i)&&!c&&!h){if(o in n)D8.warn(`${s} loader option '${a}${o}' no longer supported, use '${n[o]}'`)();else if(!l){const A=Znt(o,r);D8.warn(`${s} loader option '${a}${o}' not recognized. ${A}`)()}}}}function Znt(t,e){const i=t.toLowerCase();let n="";for(const r of e)for(const s in r.options){if(t===s)return`Did you mean '${r.id}.${s}'?`;const a=s.toLowerCase();(i.startsWith(a)||a.startsWith(i))&&(n=n||`Did you mean '${r.id}.${s}'?`)}return n}function Jnt(t,e,i){const r={...t.options||{}};return trt(r,i),r.log===null&&(r.log=new Ynt),P8(r,tz()),P8(r,e),r}function P8(t,e){for(const i in e)if(i in e){const n=e[i];E8(n)&&E8(t[i])?t[i]={...t[i],...e[i]}:t[i]=e[i]}}function trt(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function IB(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t==null?void 0:t.extensions)):!1}function EB(t){Yv(t,"null loader"),Yv(IB(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t!=null&&t.parseTextSync||t!=null&&t.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const ez=()=>{const t=J9();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function ert(t){const e=ez();t=Array.isArray(t)?t:[t];for(const i of t){const n=EB(i);e.find(r=>n===r)||e.unshift(n)}}function irt(){return ez()}const nrt=/\.([^.]+)$/;async function rrt(t,e=[],i,n){if(!iz(t))return null;let r=x8(t,e,{...i,nothrow:!0},n);if(r)return r;if(qf(t)&&(t=await t.slice(0,10).arrayBuffer(),r=x8(t,e,i,n)),!r&&!(i!=null&&i.nothrow))throw new Error(nz(t));return r}function x8(t,e=[],i,n){if(!iz(t))return null;if(e&&!Array.isArray(e))return EB(e);let r=[];e&&(r=r.concat(e)),i!=null&&i.ignoreRegisteredLoaders||r.push(...irt()),art(r);const s=srt(t,r,i,n);if(!s&&!(i!=null&&i.nothrow))throw new Error(nz(t));return s}function srt(t,e,i,n){const r=ET(t),s=MB(t),a=wB(r)||(n==null?void 0:n.url);let o=null,l="";return i!=null&&i.mimeType&&(o=y3(e,i==null?void 0:i.mimeType),l=`match forced by supplied MIME type ${i==null?void 0:i.mimeType}`),o=o||ort(e,a),l=l||(o?`matched url ${a}`:""),o=o||y3(e,s),l=l||(o?`matched MIME type ${s}`:""),o=o||crt(e,t),l=l||(o?`matched initial data ${rz(t)}`:""),i!=null&&i.fallbackMimeType&&(o=o||y3(e,i==null?void 0:i.fallbackMimeType),l=l||(o?`matched fallback MIME type ${s}`:"")),l&&int.log(1,`selectLoader selected ${o==null?void 0:o.name}: ${l}.`),o}function iz(t){return!(t instanceof Response&&t.status===204)}function nz(t){const e=ET(t),i=MB(t);let n="No valid loader found (";n+=e?`${G9(e)}, `:"no url provided, ",n+=`MIME type: ${i?`"${i}"`:"not provided"}, `;const r=t?rz(t):"";return n+=r?` first bytes: "${r}"`:"first bytes: not available",n+=")",n}function art(t){for(const e of t)EB(e)}function ort(t,e){const i=e&&nrt.exec(e),n=i&&i[1];return n?lrt(t,n):null}function lrt(t,e){e=e.toLowerCase();for(const i of t)for(const n of i.extensions)if(n.toLowerCase()===e)return i;return null}function y3(t,e){var i;for(const n of t)if((i=n.mimeTypes)!=null&&i.some(r=>B8(e,r))||B8(e,`application/x.${n.id}`))return n;return null}function crt(t,e){if(!e)return null;for(const i of t)if(typeof e=="string"){if(urt(e,i))return i}else if(ArrayBuffer.isView(e)){if(N8(e.buffer,e.byteOffset,i))return i}else if(e instanceof ArrayBuffer&&N8(e,0,i))return i;return null}function urt(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(n=>t.startsWith(n))}function N8(t,e,i){return(Array.isArray(i.tests)?i.tests:[i.tests]).some(r=>hrt(t,e,i,r))}function hrt(t,e,i,n){if(n instanceof ArrayBuffer)return _nt(n,t,n.byteLength);switch(typeof n){case"function":return n(t);case"string":const r=PM(t,e,n.length);return n===r;default:return!1}}function rz(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?PM(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?PM(t,0,e):""}function PM(t,e,i){if(t.byteLength<e+i)return"";const n=new DataView(t);let r="";for(let s=0;s<i;s++)r+=String.fromCharCode(n.getUint8(e+s));return r}const frt=256*1024;function*drt(t,e){const i=(e==null?void 0:e.chunkSize)||frt;let n=0;const r=new TextEncoder;for(;n<t.length;){const s=Math.min(t.length-n,i),a=t.slice(n,n+s);n+=s,yield r.encode(a)}}const Art=256*1024;function*grt(t,e={}){const{chunkSize:i=Art}=e;let n=0;for(;n<t.byteLength;){const r=Math.min(t.byteLength-n,i),s=new ArrayBuffer(r),a=new Uint8Array(t,n,r);new Uint8Array(s).set(a),n+=r,yield s}}const yrt=1024*1024;async function*prt(t,e){const i=(e==null?void 0:e.chunkSize)||yrt;let n=0;for(;n<t.size;){const r=n+i,s=await t.slice(n,r).arrayBuffer();n=r,yield s}}function F8(t,e){return TB?mrt(t,e):_rt(t)}async function*mrt(t,e){const i=t.getReader();let n;try{for(;;){const r=n||i.read();e!=null&&e._streamReadAhead&&(n=i.read());const{done:s,value:a}=await r;if(s)return;yield Y9(a)}}catch{i.releaseLock()}}async function*_rt(t,e){for await(const i of t)yield Y9(i)}function brt(t,e){if(typeof t=="string")return drt(t,e);if(t instanceof ArrayBuffer)return grt(t,e);if(qf(t))return prt(t,e);if(X9(t))return F8(t,e);if(Hf(t))return F8(t.body,e);throw new Error("makeIterator")}const sz="Cannot convert supplied data type";function vrt(t,e,i){if(e.text&&typeof t=="string")return t;if(Rnt(t)&&(t=t.buffer),t instanceof ArrayBuffer){const n=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let n=t.buffer;const r=t.byteLength||t.length;return(t.byteOffset!==0||r!==n.byteLength)&&(n=n.slice(t.byteOffset,t.byteOffset+r)),n}throw new Error(sz)}async function Trt(t,e,i){const n=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||n)return vrt(t,e);if(qf(t)&&(t=await K9(t)),Hf(t)){const r=t;return await jnt(r),e.binary?await r.arrayBuffer():await r.text()}if(X9(t)&&(t=brt(t,i)),Bnt(t)||Ont(t))return Tnt(t);throw new Error(sz)}function az(t,e){const i=tz(),n=t||i;return typeof n.fetch=="function"?n.fetch:i1(n.fetch)?r=>R8(r,n.fetch):e!=null&&e.fetch?e==null?void 0:e.fetch:R8}function Srt(t,e,i){if(i)return i;const n={fetch:az(e,t),...t};if(n.url){const r=wB(n.url);n.baseUrl=r,n.queryString=Lnt(n.url),n.filename=G9(r),n.baseUrl=Int(r)}return Array.isArray(n.loaders)||(n.loaders=null),n}function wrt(t,e){if(t&&!Array.isArray(t))return t;let i;if(t&&(i=Array.isArray(t)?t:[t]),e&&e.loaders){const n=Array.isArray(e.loaders)?e.loaders:[e.loaders];i=i?[...i,...n]:n}return i&&i.length?i:void 0}async function Qv(t,e,i,n){e&&!Array.isArray(e)&&!IB(e)&&(n=void 0,i=e,e=void 0),t=await t,i=i||{};const r=ET(t),a=wrt(e,n),o=await rrt(t,a,i);return o?(i=Qnt(i,o,a,r),n=Srt({url:r,_parse:Qv,loaders:a},i,n||null),await Mrt(o,t,i,n)):null}async function Mrt(t,e,i,n){if(gnt(t),i=nnt(t.options,i),Hf(e)){const s=e,{ok:a,redirected:o,status:l,statusText:c,type:h,url:A}=s,m=Object.fromEntries(s.headers.entries());n.response={headers:m,ok:a,redirected:o,status:l,statusText:c,type:h,url:A}}e=await Trt(e,t,i);const r=t;if(r.parseTextSync&&typeof e=="string")return r.parseTextSync(e,i,n);if(ynt(t,i))return await pnt(t,e,i,n,Qv);if(r.parseText&&typeof e=="string")return await r.parseText(e,i,n);if(r.parse)return await r.parse(e,i,n);throw Lu(!r.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}async function Kv(t,e,i,n){let r,s;!Array.isArray(e)&&!IB(e)?(r=[],s=e):(r=e,s=i);const a=az(s);let o=t;return typeof t=="string"&&(o=await a(t)),qf(t)&&(o=await a(t)),Array.isArray(r)?await Qv(o,r,s):await Qv(o,r,s)}const Irt="4.3.2";var fk;const Ert=(fk=globalThis.loaders)==null?void 0:fk.parseImageNode,xM=typeof Image<"u",NM=typeof ImageBitmap<"u",Brt=!!Ert,FM=TB?!0:Brt;function Ort(t){switch(t){case"auto":return NM||xM||FM;case"imagebitmap":return NM;case"image":return xM;case"data":return FM;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function Rrt(){if(NM)return"imagebitmap";if(xM)return"image";if(FM)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function Drt(t){const e=Prt(t);if(!e)throw new Error("Not an image");return e}function Crt(t){switch(Drt(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),i=e.getContext("2d");if(!i)throw new Error("getImageData");return e.width=t.width,e.height=t.height,i.drawImage(t,0,0),i.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function Prt(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const xrt=/^data:image\/svg\+xml/,Nrt=/\.svg((\?|#).*)?$/;function BB(t){return t&&(xrt.test(t)||Nrt.test(t))}function Frt(t,e){if(BB(e)){let n=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(n)}`}return oz(t,e)}function oz(t,e){if(BB(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function lz(t,e,i){const n=Frt(t,i),r=self.URL||self.webkitURL,s=typeof n!="string"&&r.createObjectURL(n);try{return await Lrt(s||n,e)}finally{s&&r.revokeObjectURL(s)}}async function Lrt(t,e){const i=new Image;return i.src=t,e.image&&e.image.decode&&i.decode?(await i.decode(),i):await new Promise((n,r)=>{try{i.onload=()=>n(i),i.onerror=s=>{const a=s instanceof Error?s.message:"error";r(new Error(a))}}catch(s){r(s)}})}const Urt={};let L8=!0;async function krt(t,e,i){let n;BB(i)?n=await lz(t,e,i):n=oz(t,i);const r=e&&e.imagebitmap;return await jrt(n,r)}async function jrt(t,e=null){if((zrt(e)||!L8)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(i){console.warn(i),L8=!1}return await createImageBitmap(t)}function zrt(t){for(const e in t||Urt)return!1;return!0}function Vrt(t){return!qrt(t,"ftyp",4)||(t[8]&96)===0?null:$rt(t)}function $rt(t){switch(Wrt(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function Wrt(t,e,i){return String.fromCharCode(...t.slice(e,i))}function Hrt(t){return[...t].map(e=>e.charCodeAt(0))}function qrt(t,e,i=0){const n=Hrt(e);for(let r=0;r<n.length;++r)if(n[r]!==t[r+i])return!1;return!0}const il=!1,Zm=!0;function cz(t){const e=n1(t);return Grt(e)||Krt(e)||Xrt(e)||Qrt(e)||Yrt(e)}function Yrt(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),i=Vrt(e);return i?{mimeType:i.mimeType,width:0,height:0}:null}function Grt(t){const e=n1(t);return e.byteLength>=24&&e.getUint32(0,il)===2303741511?{mimeType:"image/png",width:e.getUint32(16,il),height:e.getUint32(20,il)}:null}function Xrt(t){const e=n1(t);return e.byteLength>=10&&e.getUint32(0,il)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Zm),height:e.getUint16(8,Zm)}:null}function Qrt(t){const e=n1(t);return e.byteLength>=14&&e.getUint16(0,il)===16973&&e.getUint32(2,Zm)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Zm),height:e.getUint32(22,Zm)}:null}function Krt(t){const e=n1(t);if(!(e.byteLength>=3&&e.getUint16(0,il)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:r}=Zrt();let s=2;for(;s+9<e.byteLength;){const a=e.getUint16(s,il);if(r.has(a))return{mimeType:"image/jpeg",height:e.getUint16(s+5,il),width:e.getUint16(s+7,il)};if(!n.has(a))return null;s+=2,s+=e.getUint16(s,il)}return null}function Zrt(){const t=new Set([65499,65476,65484,65501,65534]);for(let i=65504;i<65520;++i)t.add(i);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function n1(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function Jrt(t,e){var r;const{mimeType:i}=cz(t)||{},n=(r=globalThis.loaders)==null?void 0:r.parseImageNode;return Yv(n),await n(t,i)}async function tst(t,e,i){e=e||{};const r=(e.image||{}).type||"auto",{url:s}=i||{},a=est(r);let o;switch(a){case"imagebitmap":o=await krt(t,e,s);break;case"image":o=await lz(t,e,s);break;case"data":o=await Jrt(t);break;default:Yv(!1)}return r==="data"&&(o=Crt(o)),o}function est(t){switch(t){case"auto":case"data":return Rrt();default:return Ort(t),t}}const ist=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],nst=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],rst={image:{type:"auto",decode:!0}},sst={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:Irt,mimeTypes:nst,extensions:ist,parse:tst,tests:[t=>!!cz(new DataView(t))],options:rst},Ji=new e1({id:"deck"});let LM={};function ast(t){LM=t}function as(t,e,i,n){Ji.level>0&&LM[t]&&LM[t].call(null,e,i,n)}function ost(t){const e=t[0],i=t[t.length-1];return e==="{"&&i==="}"||e==="["&&i==="]"}const lst={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:ost,parseTextSync:JSON.parse};function cst(){const t="9.1.12",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(Ji.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Ji,_registerLoggers:ast},ert([lst,[sst,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const ust=cst();function OB(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const p3={number:{type:"number",validate(t,e){return Number.isFinite(t)&&typeof e=="object"&&(e.max===void 0||t<=e.max)&&(e.min===void 0||t>=e.min)}},array:{type:"array",validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function hst(t){const e={};for(const[i,n]of Object.entries(t))e[i]=fst(n);return e}function fst(t){let e=U8(t);if(e!=="object")return{value:t,...p3[e],type:e};if(typeof t=="object")return t?t.type!==void 0?{...t,...p3[t.type],type:t.type}:t.value===void 0?{type:"object",value:t}:(e=U8(t.value),{...t,...p3[e],type:e}):{type:"object",value:null};throw new Error("props")}function U8(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const dst=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,Ast=`#ifdef MODULE_MATERIAL
  fragColor = material_filterColor(fragColor);
#endif

#ifdef MODULE_LIGHTING
  fragColor = lighting_filterColor(fragColor);
#endif

#ifdef MODULE_FOG
  fragColor = fog_filterColor(fragColor);
#endif

#ifdef MODULE_PICKING
  fragColor = picking_filterHighlightColor(fragColor);
  fragColor = picking_filterPickingColor(fragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,gst={vertex:dst,fragment:Ast},k8=/void\s+main\s*\([^)]*\)\s*\{\n?/,j8=/}\n?[^{}]*$/,m3=[],yv="__LUMA_INJECT_DECLARATIONS__";function yst(t){const e={vertex:{},fragment:{}};for(const i in t){let n=t[i];const r=pst(i);typeof n=="string"&&(n={order:0,injection:n}),e[r][i]=n}return e}function pst(t){const e=t.slice(0,2);switch(e){case"vs":return"vertex";case"fs":return"fragment";default:throw new Error(e)}}function Zv(t,e,i,n=!1){const r=e==="vertex";for(const s in i){const a=i[s];a.sort((l,c)=>l.order-c.order),m3.length=a.length;for(let l=0,c=a.length;l<c;++l)m3[l]=a[l].injection;const o=`${m3.join(`
`)}
`;switch(s){case"vs:#decl":r&&(t=t.replace(yv,o));break;case"vs:#main-start":r&&(t=t.replace(k8,l=>l+o));break;case"vs:#main-end":r&&(t=t.replace(j8,l=>o+l));break;case"fs:#decl":r||(t=t.replace(yv,o));break;case"fs:#main-start":r||(t=t.replace(k8,l=>l+o));break;case"fs:#main-end":r||(t=t.replace(j8,l=>o+l));break;default:t=t.replace(s,l=>l+o)}}return t=t.replace(yv,""),n&&(t=t.replace(/\}\s*$/,s=>s+gst[e])),t}function Jv(t){t.map(e=>mst(e))}function mst(t){if(t.instance)return;Jv(t.dependencies||[]);const{propTypes:e={},deprecations:i=[],inject:n={}}=t,r={normalizedInjections:yst(n),parsedDeprecations:_st(i)};e&&(r.propValidators=hst(e)),t.instance=r;let s={};e&&(s=Object.entries(e).reduce((a,[o,l])=>{const c=l==null?void 0:l.value;return c&&(a[o]=c),a},{})),t.defaultUniforms={...t.defaultUniforms,...s}}function uz(t,e,i){var n;(n=t.deprecations)==null||n.forEach(r=>{var s;(s=r.regex)!=null&&s.test(e)&&(r.deprecated?i.deprecated(r.old,r.new)():i.removed(r.old,r.new)())})}function _st(t){return t.forEach(e=>{switch(e.type){case"function":e.regex=new RegExp(`\\b${e.old}\\(`);break;default:e.regex=new RegExp(`${e.type} ${e.old};`)}}),t}function RB(t){Jv(t);const e={},i={};hz({modules:t,level:0,moduleMap:e,moduleDepth:i});const n=Object.keys(i).sort((r,s)=>i[s]-i[r]).map(r=>e[r]);return Jv(n),n}function hz(t){const{modules:e,level:i,moduleMap:n,moduleDepth:r}=t;if(i>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)n[s.name]=s,(r[s.name]===void 0||r[s.name]<i)&&(r[s.name]=i);for(const s of e)s.dependencies&&hz({modules:s.dependencies,level:i+1,moduleMap:n,moduleDepth:r})}function bst(t){switch(t==null?void 0:t.gpu.toLowerCase()){case"apple":return`#define APPLE_GPU
// Apple optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Headless Chrome's software shader 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// If the GPU doesn't have full 32 bits precision, will causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function vst(t,e){var n;if(Number(((n=t.match(/^#version[ \t]+(\d+)/m))==null?void 0:n[1])||100)!==300)throw new Error("luma.gl v9 only supports GLSL 3.00 shader sources");switch(e){case"vertex":return t=z8(t,Tst),t;case"fragment":return t=z8(t,Sst),t;default:throw new Error(e)}}const fz=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],Tst=[...fz,[UM("attribute"),"in $1"],[UM("varying"),"out $1"]],Sst=[...fz,[UM("varying"),"in $1"]];function z8(t,e){for(const[i,n]of e)t=t.replace(i,n);return t}function UM(t){return new RegExp(`\\b${t}[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)`,"g")}function dz(t,e){let i="";for(const n in t){const r=t[n];if(i+=`void ${r.signature} {
`,r.header&&(i+=`  ${r.header}`),e[n]){const s=e[n];s.sort((a,o)=>a.order-o.order);for(const a of s)i+=`  ${a.injection}
`}r.footer&&(i+=`  ${r.footer}`),i+=`}
`}return i}function Az(t){const e={vertex:{},fragment:{}};for(const i of t){let n,r;typeof i!="string"?(n=i,r=n.hook):(n={},r=i),r=r.trim();const[s,a]=r.split(":"),o=r.replace(/\(.+/,""),l=Object.assign(n,{signature:a});switch(s){case"vs":e.vertex[o]=l;break;case"fs":e.fragment[o]=l;break;default:throw new Error(s)}}return e}function wst(t,e){return{name:Mst(t,e),language:"glsl",version:Ist(t)}}function Mst(t,e="unnamed"){const n=/#define[^\S\r\n]*SHADER_NAME[^\S\r\n]*([A-Za-z0-9_-]+)\s*/.exec(t);return n?n[1]:e}function Ist(t){let e=100;const i=t.match(/[^\s]+/g);if(i&&i.length>=2&&i[0]==="#version"){const n=parseInt(i[1],10);Number.isFinite(n)&&(e=n)}if(e!==100&&e!==300)throw new Error(`Invalid GLSL version ${e}`);return e}const gz=`

${yv}
`,Est=`precision highp float;
`;function Bst(t){const e=RB(t.modules||[]);return{source:Rst(t.platformInfo,{...t,source:t.source,stage:"vertex",modules:e}),getUniforms:yz(e)}}function Ost(t){const{vs:e,fs:i}=t,n=RB(t.modules||[]);return{vs:V8(t.platformInfo,{...t,source:e,stage:"vertex",modules:n}),fs:V8(t.platformInfo,{...t,source:i,stage:"fragment",modules:n}),getUniforms:yz(n)}}function Rst(t,e){var M;const{source:i,stage:n,modules:r,hookFunctions:s=[],inject:a={},log:o}=e;OB(typeof i=="string","shader source must be a string");const l=i;let c="";const h=Az(s),A={},m={},b={};for(const I in a){const O=typeof a[I]=="string"?{injection:a[I],order:0}:a[I],D=/^(v|f)s:(#)?([\w-]+)$/.exec(I);if(D){const B=D[2],P=D[3];B?P==="decl"?m[I]=[O]:b[I]=[O]:A[I]=[O]}else b[I]=[O]}const S=r;for(const I of S){o&&uz(I,l,o);const O=pz(I,"wgsl");c+=O;const D=((M=I.injections)==null?void 0:M[n])||{};for(const B in D){const P=/^(v|f)s:#([\w-]+)$/.exec(B);if(P){const N=P[2]==="decl"?m:b;N[B]=N[B]||[],N[B].push(D[B])}else A[B]=A[B]||[],A[B].push(D[B])}}return c+=gz,c=Zv(c,n,m),c+=dz(h[n],A),c+=l,c=Zv(c,n,b),c}function V8(t,e){var F;const{id:i,source:n,stage:r,language:s="glsl",modules:a,defines:o={},hookFunctions:l=[],inject:c={},prologue:h=!0,log:A}=e;OB(typeof n=="string","shader source must be a string");const m=s==="glsl"?wst(n).version:-1,b=t.shaderLanguageVersion,S=m===100?"#version 100":"#version 300 es",I=n.split(`
`).slice(1).join(`
`),O={};a.forEach($=>{Object.assign(O,$.defines)}),Object.assign(O,o);let D="";switch(s){case"wgsl":break;case"glsl":D=h?`${S}

// ----- PROLOGUE -------------------------
${Dst({id:i,source:n,stage:r})}
${`#define SHADER_TYPE_${r.toUpperCase()}`}

${bst(t)}
${r==="fragment"?Est:""}

// ----- APPLICATION DEFINES -------------------------

${Cst(O)}

`:`${S}
`;break}const B=Az(l),P={},j={},N={};for(const $ in c){const V=typeof c[$]=="string"?{injection:c[$],order:0}:c[$],Z=/^(v|f)s:(#)?([\w-]+)$/.exec($);if(Z){const nt=Z[2],X=Z[3];nt?X==="decl"?j[$]=[V]:N[$]=[V]:P[$]=[V]}else N[$]=[V]}for(const $ of a){A&&uz($,I,A);const V=pz($,r);D+=V;const Z=((F=$.instance)==null?void 0:F.normalizedInjections[r])||{};for(const nt in Z){const X=/^(v|f)s:#([\w-]+)$/.exec(nt);if(X){const Tt=X[2]==="decl"?j:N;Tt[nt]=Tt[nt]||[],Tt[nt].push(Z[nt])}else P[nt]=P[nt]||[],P[nt].push(Z[nt])}}return D+="// ----- MAIN SHADER SOURCE -------------------------",D+=gz,D=Zv(D,r,j),D+=dz(B[r],P),D+=I,D=Zv(D,r,N),s==="glsl"&&m!==b&&(D=vst(D,r)),D.trim()}function yz(t){return function(i){var r;const n={};for(const s of t){const a=(r=s.getUniforms)==null?void 0:r.call(s,i,n);Object.assign(n,a)}return n}}function Dst(t){const{id:e,source:i,stage:n}=t;return e&&i.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME ${e}_${n}`:""}function Cst(t={}){let e="";for(const i in t){const n=t[i];(n||Number.isFinite(n))&&(e+=`#define ${i.toUpperCase()} ${t[i]}
`)}return e}function pz(t,e){let i;switch(e){case"vertex":i=t.vs||"";break;case"fragment":i=t.fs||"";break;case"wgsl":i=t.source||"";break;default:OB(!1)}if(!t.name)throw new Error("Shader module must have a name");const n=t.name.toUpperCase().replace(/[^0-9a-z]/gi,"_");let r=`// ----- MODULE ${t.name} ---------------

`;return e!=="wgsl"&&(r+=`#define MODULE_${n}
`),r+=`${i}
`,r}const Pst=/^\s*\#\s*ifdef\s*([a-zA-Z_]+)\s*$/,xst=/^\s*\#\s*endif\s*$/;function Nst(t,e){var a;const i=t.split(`
`),n=[];let r=!0,s=null;for(const o of i){const l=o.match(Pst),c=o.match(xst);l?(s=l[1],r=!!((a=e==null?void 0:e.defines)!=null&&a[s])):c?r=!0:r&&n.push(o)}return n.join(`
`)}const af=class af{constructor(){rt(this,"_hookFunctions",[]);rt(this,"_defaultModules",[])}static getDefaultShaderAssembler(){return af.defaultShaderAssembler=af.defaultShaderAssembler||new af,af.defaultShaderAssembler}addDefaultModule(e){this._defaultModules.find(i=>i.name===(typeof e=="string"?e:e.name))||this._defaultModules.push(e)}removeDefaultModule(e){const i=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==i)}addShaderHook(e,i){i&&(e=Object.assign(i,{hook:e})),this._hookFunctions.push(e)}assembleWGSLShader(e){const i=this._getModuleList(e.modules),n=this._hookFunctions,{source:r,getUniforms:s}=Bst({...e,source:e.source,modules:i,hookFunctions:n});return{source:e.platformInfo.shaderLanguage==="wgsl"?Nst(r):r,getUniforms:s,modules:i}}assembleGLSLShaderPair(e){const i=this._getModuleList(e.modules),n=this._hookFunctions;return{...Ost({...e,vs:e.vs,fs:e.fs,modules:i,hookFunctions:n}),modules:i}}_getModuleList(e=[]){const i=new Array(this._defaultModules.length+e.length),n={};let r=0;for(let s=0,a=this._defaultModules.length;s<a;++s){const o=this._defaultModules[s],l=o.name;i[r++]=o,n[l]=!0}for(let s=0,a=e.length;s<a;++s){const o=e[s],l=o.name;n[l]||(i[r++]=o,n[l]=!0)}return i.length=r,Jv(i),i}};rt(af,"defaultShaderAssembler");let t2=af;const Fst=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,Lst=`#version 300 es
${Fst}`;function mz(t){const{input:e,inputChannels:i,output:n}=t||{};if(!e)return Lst;if(!i)throw new Error("inputChannels");const r=Ust(i),s=kst(e,i);return`#version 300 es
in ${r} ${e};
out vec4 ${n};
void main() {
  ${n} = ${s};
}`}function Ust(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`invalid channels: ${t}`)}}function kst(t,e){switch(e){case 1:return`vec4(${t}, 0.0, 0.0, 1.0)`;case 2:return`vec4(${t}, 0.0, 1.0)`;case 3:return`vec4(${t}, 1.0)`;case 4:return t;default:throw new Error(`invalid channels: ${e}`)}}class jst{constructor(){rt(this,"stats",new Map)}getStats(e){return this.get(e)}get(e){return this.stats.has(e)||this.stats.set(e,new IT({id:e})),this.stats.get(e)}}const _z=new jst,we=new e1({id:"luma.gl"}),_3={};function BT(t="id"){_3[t]=_3[t]||1;const e=_3[t]++;return`${t}-${e}`}var dM;let vn=(dM=class{constructor(e,i,n){rt(this,"id");rt(this,"props");rt(this,"userData",{});rt(this,"_device");rt(this,"destroyed",!1);rt(this,"allocatedBytes",0);rt(this,"_attachedResources",new Set);if(!e)throw new Error("no device");this._device=e,this.props=zst(i,n);const r=this.props.id!=="undefined"?this.props.id:BT(this[Symbol.toStringTag]);this.props.id=r,this.id=r,this.userData=this.props.userData||{},this.addStats()}toString(){return`${this[Symbol.toStringTag]||this.constructor.name}:"${this.id}"`}destroy(){this.destroyResource()}delete(){return this.destroy(),this}getProps(){return this.props}attachResource(e){this._attachedResources.add(e)}detachResource(e){this._attachedResources.delete(e)}destroyAttachedResource(e){this._attachedResources.delete(e)&&e.destroy()}destroyAttachedResources(){for(const e of Object.values(this._attachedResources))e.destroy();this._attachedResources=new Set}destroyResource(){this.destroyAttachedResources(),this.removeStats(),this.destroyed=!0}removeStats(){const e=this._device.statsManager.getStats("Resource Counts"),i=this[Symbol.toStringTag];e.get(`${i}s Active`).decrementCount()}trackAllocatedMemory(e,i=this[Symbol.toStringTag]){const n=this._device.statsManager.getStats("Resource Counts");n.get("GPU Memory").addCount(e),n.get(`${i} Memory`).addCount(e),this.allocatedBytes=e}trackDeallocatedMemory(e=this[Symbol.toStringTag]){const i=this._device.statsManager.getStats("Resource Counts");i.get("GPU Memory").subtractCount(this.allocatedBytes),i.get(`${e} Memory`).subtractCount(this.allocatedBytes),this.allocatedBytes=0}addStats(){const e=this._device.statsManager.getStats("Resource Counts"),i=this[Symbol.toStringTag];e.get("Resources Created").incrementCount(),e.get(`${i}s Created`).incrementCount(),e.get(`${i}s Active`).incrementCount()}},rt(dM,"defaultProps",{id:"undefined",handle:void 0,userData:void 0}),dM);function zst(t,e){const i={...e};for(const n in t)t[n]!==void 0&&(i[n]=t[n]);return i}const jr=class jr extends vn{constructor(i,n){const r={...n};(n.usage||0)&jr.INDEX&&!n.indexType&&(n.data instanceof Uint32Array?r.indexType="uint32":n.data instanceof Uint16Array&&(r.indexType="uint16")),delete r.data;super(i,r,jr.defaultProps);rt(this,"usage");rt(this,"indexType");rt(this,"updateTimestamp");rt(this,"debugData",new ArrayBuffer(0));this.usage=r.usage||0,this.indexType=r.indexType,this.updateTimestamp=i.incrementTimestamp()}get[Symbol.toStringTag](){return"Buffer"}clone(i){return this.device.createBuffer({...this.props,...i})}readSyncWebGL(i,n){throw new Error("not implemented")}_setDebugData(i,n,r){const s=ArrayBuffer.isView(i)?i.buffer:i,a=Math.min(i?i.byteLength:r,jr.DEBUG_DATA_MAX_LENGTH);s===null?this.debugData=new ArrayBuffer(a):n===0&&r===s.byteLength?this.debugData=s.slice(0,a):this.debugData=s.slice(n,n+a)}};rt(jr,"defaultProps",{...vn.defaultProps,usage:0,byteLength:0,byteOffset:0,data:null,indexType:"uint16",mappedAtCreation:!1}),rt(jr,"MAP_READ",1),rt(jr,"MAP_WRITE",2),rt(jr,"COPY_SRC",4),rt(jr,"COPY_DST",8),rt(jr,"INDEX",16),rt(jr,"VERTEX",32),rt(jr,"UNIFORM",64),rt(jr,"STORAGE",128),rt(jr,"INDIRECT",256),rt(jr,"QUERY_RESOLVE",512),rt(jr,"DEBUG_DATA_MAX_LENGTH",32);let Dn=jr;function bz(t){const e=$8[t],i=Vst(e),n=t.includes("norm"),r=!n&&!t.startsWith("float"),s=t.startsWith("s");return{dataType:$8[t],byteLength:i,integer:r,signed:s,normalized:n}}function Vst(t){return $st[t]}const $8={uint8:"uint8",sint8:"sint8",unorm8:"uint8",snorm8:"sint8",uint16:"uint16",sint16:"sint16",unorm16:"uint16",snorm16:"sint16",float16:"float16",float32:"float32",uint32:"uint32",sint32:"sint32"},$st={uint8:1,sint8:1,uint16:2,sint16:2,float16:2,float32:4,uint32:4,sint32:4},es="texture-compression-bc",_n="texture-compression-astc",Go="texture-compression-etc2",Wst="texture-compression-etc1-webgl",kb="texture-compression-pvrtc-webgl",b3="texture-compression-atc-webgl",jb="float32-renderable-webgl",v3="float16-renderable-webgl",Hst="rgb9e5ufloat-renderable-webgl",T3="snorm8-renderable-webgl",bm="norm16-renderable-webgl",S3="snorm16-renderable-webgl",zb="float32-filterable",W8="float16-filterable-webgl";function vz(t){const e=qst[t];if(!e)throw new Error(`Unsupported texture format ${t}`);return e}const qst={r8unorm:{},r8snorm:{render:T3},r8uint:{},r8sint:{},rg8unorm:{},rg8snorm:{render:T3},rg8uint:{},rg8sint:{},r16uint:{},r16sint:{},r16float:{render:v3,filter:"float16-filterable-webgl"},"r16unorm-webgl":{f:bm},"r16snorm-webgl":{f:S3},"rgba4unorm-webgl":{channels:"rgba",bitsPerChannel:[4,4,4,4],packed:!0},"rgb565unorm-webgl":{channels:"rgb",bitsPerChannel:[5,6,5,0],packed:!0},"rgb5a1unorm-webgl":{channels:"rgba",bitsPerChannel:[5,5,5,1],packed:!0},"rgb8unorm-webgl":{},"rgb8snorm-webgl":{},rgba8unorm:{},"rgba8unorm-srgb":{},rgba8snorm:{render:T3},rgba8uint:{},rgba8sint:{},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{},rg16sint:{},rg16float:{render:v3,filter:W8},"rg16unorm-webgl":{render:bm},"rg16snorm-webgl":{render:S3},r32uint:{},r32sint:{},r32float:{render:jb,filter:zb},rgb9e5ufloat:{channels:"rgb",packed:!0,render:Hst},rg11b10ufloat:{channels:"rgb",bitsPerChannel:[11,11,10,0],packed:!0,p:1,render:jb},rgb10a2unorm:{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1},"rgb10a2uint-webgl":{channels:"rgba",bitsPerChannel:[10,10,10,2],packed:!0,p:1,wgpu:!1},"rgb16unorm-webgl":{f:bm},"rgb16snorm-webgl":{f:bm},rg32uint:{},rg32sint:{},rg32float:{render:!1,filter:zb},rgba16uint:{},rgba16sint:{},rgba16float:{render:v3,filter:W8},"rgba16unorm-webgl":{render:bm},"rgba16snorm-webgl":{render:S3},"rgb32float-webgl":{render:jb,filter:zb},rgba32uint:{},rgba32sint:{},rgba32float:{render:jb,filter:zb},stencil8:{attachment:"stencil",bitsPerChannel:[8,0,0,0],dataType:"uint8"},depth16unorm:{attachment:"depth",bitsPerChannel:[16,0,0,0],dataType:"uint16"},depth24plus:{attachment:"depth",bitsPerChannel:[24,0,0,0],dataType:"uint32"},depth32float:{attachment:"depth",bitsPerChannel:[32,0,0,0],dataType:"float32"},"depth24plus-stencil8":{attachment:"depth-stencil",bitsPerChannel:[24,8,0,0],packed:!0},"depth32float-stencil8":{attachment:"depth-stencil",bitsPerChannel:[32,8,0,0],packed:!0},"bc1-rgb-unorm-webgl":{f:es},"bc1-rgb-unorm-srgb-webgl":{f:es},"bc1-rgba-unorm":{f:es},"bc1-rgba-unorm-srgb":{f:es},"bc2-rgba-unorm":{f:es},"bc2-rgba-unorm-srgb":{f:es},"bc3-rgba-unorm":{f:es},"bc3-rgba-unorm-srgb":{f:es},"bc4-r-unorm":{f:es},"bc4-r-snorm":{f:es},"bc5-rg-unorm":{f:es},"bc5-rg-snorm":{f:es},"bc6h-rgb-ufloat":{f:es},"bc6h-rgb-float":{f:es},"bc7-rgba-unorm":{f:es},"bc7-rgba-unorm-srgb":{f:es},"etc2-rgb8unorm":{f:Go},"etc2-rgb8unorm-srgb":{f:Go},"etc2-rgb8a1unorm":{f:Go},"etc2-rgb8a1unorm-srgb":{f:Go},"etc2-rgba8unorm":{f:Go},"etc2-rgba8unorm-srgb":{f:Go},"eac-r11unorm":{f:Go},"eac-r11snorm":{f:Go},"eac-rg11unorm":{f:Go},"eac-rg11snorm":{f:Go},"astc-4x4-unorm":{f:_n},"astc-4x4-unorm-srgb":{f:_n},"astc-5x4-unorm":{f:_n},"astc-5x4-unorm-srgb":{f:_n},"astc-5x5-unorm":{f:_n},"astc-5x5-unorm-srgb":{f:_n},"astc-6x5-unorm":{f:_n},"astc-6x5-unorm-srgb":{f:_n},"astc-6x6-unorm":{f:_n},"astc-6x6-unorm-srgb":{f:_n},"astc-8x5-unorm":{f:_n},"astc-8x5-unorm-srgb":{f:_n},"astc-8x6-unorm":{f:_n},"astc-8x6-unorm-srgb":{f:_n},"astc-8x8-unorm":{f:_n},"astc-8x8-unorm-srgb":{f:_n},"astc-10x5-unorm":{f:_n},"astc-10x5-unorm-srgb":{f:_n},"astc-10x6-unorm":{f:_n},"astc-10x6-unorm-srgb":{f:_n},"astc-10x8-unorm":{f:_n},"astc-10x8-unorm-srgb":{f:_n},"astc-10x10-unorm":{f:_n},"astc-10x10-unorm-srgb":{f:_n},"astc-12x10-unorm":{f:_n},"astc-12x10-unorm-srgb":{f:_n},"astc-12x12-unorm":{f:_n},"astc-12x12-unorm-srgb":{f:_n},"pvrtc-rgb4unorm-webgl":{f:kb},"pvrtc-rgba4unorm-webgl":{f:kb},"pvrtc-rbg2unorm-webgl":{f:kb},"pvrtc-rgba2unorm-webgl":{f:kb},"etc1-rbg-unorm-webgl":{f:Wst},"atc-rgb-unorm-webgl":{f:b3},"atc-rgba-unorm-webgl":{f:b3},"atc-rgbai-unorm-webgl":{f:b3}},Yst=["bc1","bc2","bc3","bc4","bc5","bc6","bc7","etc1","etc2","eac","atc","astc","pvrtc"],Gst=/^(r|rg|rgb|rgba|bgra)([0-9]*)([a-z]*)(-srgb)?(-webgl)?$/;function Tz(t){return Yst.some(e=>t.startsWith(e))}function DB(t){let e=Xst(t);if(Tz(t)){e.channels="rgb",e.components=3,e.bytesPerPixel=1,e.srgb=!1,e.compressed=!0;const n=Qst(t);n&&(e.blockWidth=n.blockWidth,e.blockHeight=n.blockHeight)}const i=Gst.exec(t);if(i){const[,n,r,s,a,o]=i,l=`${s}${r}`,c=bz(l),h=c.byteLength*8,A=n.length,m=[h,A>=2?h:0,A>=3?h:0,A>=4?h:0];e={format:t,attachment:e.attachment,dataType:c.dataType,components:A,channels:n,integer:c.integer,signed:c.signed,normalized:c.normalized,bitsPerChannel:m,bytesPerPixel:c.byteLength*n.length,packed:e.packed,srgb:e.srgb},o==="-webgl"&&(e.webgl=!0),a==="-srgb"&&(e.srgb=!0)}return t.endsWith("-webgl")&&(e.webgl=!0),t.endsWith("-srgb")&&(e.srgb=!0),e}function Xst(t){var s;const e=vz(t),i=e.bytesPerPixel||1,n=e.bitsPerChannel||[8,8,8,8];return delete e.bitsPerChannel,delete e.bytesPerPixel,delete e.f,delete e.render,delete e.filter,delete e.blend,delete e.store,{...e,format:t,attachment:e.attachment||"color",channels:e.channels||"r",components:e.components||((s=e.channels)==null?void 0:s.length)||1,bytesPerPixel:i,bitsPerChannel:n,dataType:e.dataType||"uint8",srgb:e.srgb??!1,packed:e.packed??!1,webgl:e.webgl??!1,integer:e.integer??!1,signed:e.signed??!1,normalized:e.normalized??!1,compressed:e.compressed??!1}}function Qst(t){const i=/.*-(\d+)x(\d+)-.*/.exec(t);if(i){const[,n,r]=i;return{blockWidth:Number(n),blockHeight:Number(r)}}return null}function Kst(t){const e=vz(t),i={format:t,create:e.f??!0,render:e.render??!0,filter:e.filter??!0,blend:e.blend??!0,store:e.store??!0},n=DB(t),r=t.startsWith("depth")||t.startsWith("stencil"),s=n==null?void 0:n.signed,a=n==null?void 0:n.integer,o=n==null?void 0:n.webgl;return i.render&&(i.render=!s),i.filter&&(i.filter=!r&&!s&&!a&&!o),i}class Zst{}class Jst{constructor(e=[],i){rt(this,"features");rt(this,"disabledFeatures");this.features=new Set(e),this.disabledFeatures=i||{}}*[Symbol.iterator](){yield*this.features}has(e){var i;return!((i=this.disabledFeatures)!=null&&i[e])&&this.features.has(e)}}const k2=class k2{constructor(e){rt(this,"id");rt(this,"props");rt(this,"userData",{});rt(this,"statsManager",_z);rt(this,"timestamp",0);rt(this,"_reused",!1);rt(this,"_lumaData",{});this.props={...k2.defaultProps,...e},this.id=this.props.id||BT(this[Symbol.toStringTag].toLowerCase())}get[Symbol.toStringTag](){return"Device"}getTextureFormatCapabilities(e){const i=Kst(e),n=a=>(typeof a=="string"?this.features.has(a):a)??!0,r=n(i.create),s={format:e,create:r,render:r&&n(i.render),filter:r&&n(i.filter),blend:r&&n(i.blend),store:r&&n(i.store)};return this._getDeviceSpecificTextureFormatCapabilities(s)}isTextureFormatSupported(e,i){return this.getTextureFormatCapabilities(e).create}isTextureFormatFilterable(e){return this.getTextureFormatCapabilities(e).filter}isTextureFormatRenderable(e){return this.getTextureFormatCapabilities(e).render}isTextureFormatCompressed(e){return Tz(e)}loseDevice(){return!1}reportError(e){this.props.onError(e)}getDefaultCanvasContext(){if(!this.canvasContext)throw new Error("Device has no default CanvasContext. See props.createCanvasContext");return this.canvasContext}createCommandEncoder(e={}){throw new Error("not implemented")}incrementTimestamp(){return this.timestamp++}onError(e){this.props.onError(e)}getCanvasContext(){return this.getDefaultCanvasContext()}readPixelsToArrayWebGL(e,i){throw new Error("not implemented")}readPixelsToBufferWebGL(e,i){throw new Error("not implemented")}setParametersWebGL(e){throw new Error("not implemented")}getParametersWebGL(e){throw new Error("not implemented")}withParametersWebGL(e,i){throw new Error("not implemented")}clearWebGL(e){throw new Error("not implemented")}resetWebGL(){throw new Error("not implemented")}static _getCanvasContextProps(e){return e.createCanvasContext===!0?{}:e.createCanvasContext}_normalizeBufferProps(e){(e instanceof ArrayBuffer||ArrayBuffer.isView(e))&&(e={data:e});const i={...e};return(e.usage||0)&Dn.INDEX&&!e.indexType&&(e.data instanceof Uint32Array?i.indexType="uint32":e.data instanceof Uint16Array?i.indexType="uint16":we.warn("indices buffer content must be of integer type")()),i}};rt(k2,"defaultProps",{id:null,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,createCanvasContext:void 0,onError:e=>we.error(e.message)(),_reuseDevices:!1,_requestMaxLimits:!0,_factoryDestroyPolicy:"unused",_initializeFeatures:!0,_disabledFeatures:{"compilation-status-async-webgl":!0},_resourceDefaults:{},webgl:{},debug:we.get("debug")||void 0,debugShaders:we.get("debug-shaders")||void 0,debugFramebuffers:!!we.get("debug-framebuffers"),debugWebGL:!!we.get("debug-webgl"),debugSpectorJS:void 0,debugSpectorJSUrl:void 0,_handle:void 0});let Bu=k2;const tat=Wf()&&typeof document<"u",eat=()=>tat&&document.readyState==="complete",iat="set luma.log.level=1 (or higher) to trace rendering",H8="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.",vu=class vu{constructor(){rt(this,"stats",_z);rt(this,"log",we);rt(this,"VERSION","9.1.9");rt(this,"spector");rt(this,"preregisteredAdapters",new Map);if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw we.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),we.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),new Error("luma.gl - multiple versions detected: see console log");we.error("This version of luma.gl has already been initialized")()}we.log(1,`${this.VERSION} - ${iat}`)(),globalThis.luma=this}registerAdapters(e){for(const i of e)this.preregisteredAdapters.set(i.type,i)}getSupportedAdapters(e=[]){const i=this.getAdapterMap(e);return Array.from(i).map(([,n])=>n).filter(n=>{var r;return(r=n.isSupported)==null?void 0:r.call(n)}).map(n=>n.type)}getBestAvailableAdapter(e=[]){var n,r,s,a;const i=this.getAdapterMap(e);return(r=(n=i.get("webgpu"))==null?void 0:n.isSupported)!=null&&r.call(n)?"webgpu":(a=(s=i.get("webgl"))==null?void 0:s.isSupported)!=null&&a.call(s)?"webgl":null}setDefaultDeviceProps(e){Object.assign(vu.defaultProps,e)}async createDevice(e={}){var o;e={...vu.defaultProps,...e},e.waitForPageLoad&&await vu.pageLoaded;const i=this.getAdapterMap(e.adapters);let n=e.type||"";n==="best-available"&&(n=this.getBestAvailableAdapter(e.adapters)||n);const s=(this.getAdapterMap(e.adapters)||i).get(n),a=await((o=s==null?void 0:s.create)==null?void 0:o.call(s,e));if(a)return a;throw new Error(H8)}async attachDevice(e){var a;const i=this.getAdapterMap(e.adapters);let n="";e.handle instanceof WebGL2RenderingContext&&(n="webgl"),e.createCanvasContext&&await vu.pageLoaded,e.handle===null&&(n="unknown");const r=i.get(n),s=await((a=r==null?void 0:r.attach)==null?void 0:a.call(r,null));if(s)return s;throw new Error(H8)}enforceWebGL2(e=!0,i=[]){var s;const r=this.getAdapterMap(i).get("webgl");r||we.warn("enforceWebGL2: webgl adapter not found")(),(s=r==null?void 0:r.enforceWebGL2)==null||s.call(r,e)}getAdapterMap(e=[]){const i=new Map(this.preregisteredAdapters);for(const n of e)i.set(n.type,n);return i}registerDevices(e){we.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead");for(const i of e){const n=i.adapter;n&&this.preregisteredAdapters.set(n.type,n)}}};rt(vu,"defaultProps",{...Bu.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0}),rt(vu,"pageLoaded",nat().then(()=>{we.probe(2,"DOM is loaded")()}));let kM=vu;const jM=new kM;function nat(){return eat()||typeof window>"u"?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})}class rat{}const j2=class j2{constructor(e){rt(this,"id");rt(this,"props");rt(this,"canvas");rt(this,"htmlCanvas");rt(this,"offscreenCanvas");rt(this,"type");rt(this,"width",1);rt(this,"height",1);rt(this,"resizeObserver");rt(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});if(this.props={...j2.defaultProps,...e},e=this.props,!Wf()){this.id="node-canvas-context",this.type="node",this.width=this.props.width,this.height=this.props.height,this.canvas=null;return}if(e.canvas)typeof e.canvas=="string"?this.canvas=aat(e.canvas):this.canvas=e.canvas;else{const i=oat(e),n=sat((e==null?void 0:e.container)||null);n.insertBefore(i,n.firstChild),this.canvas=i,e!=null&&e.visible||(this.canvas.style.visibility="hidden")}this.canvas instanceof HTMLCanvasElement?(this.id=this.canvas.id,this.type="html-canvas",this.htmlCanvas=this.canvas):(this.id="offscreen-canvas",this.type="offscreen-canvas",this.offscreenCanvas=this.canvas),this.canvas instanceof HTMLCanvasElement&&e.autoResize&&(this.resizeObserver=new ResizeObserver(i=>{for(const n of i)n.target===this.canvas&&this.update()}),this.resizeObserver.observe(this.canvas))}toString(){return`${this[Symbol.toStringTag]}(${this.id})`}getDevicePixelRatio(e){return typeof OffscreenCanvas<"u"&&this.canvas instanceof OffscreenCanvas||(e=e===void 0?this.props.useDevicePixels:e,!e||e<=0)?1:e===!0?typeof window<"u"&&window.devicePixelRatio||1:e}getPixelSize(){switch(this.type){case"node":return[this.width,this.height];case"offscreen-canvas":return[this.canvas.width,this.canvas.height];case"html-canvas":const e=this.getDevicePixelRatio(),i=this.canvas;return i.parentElement?[i.clientWidth*e,i.clientHeight*e]:[this.canvas.width,this.canvas.height];default:throw new Error(this.type)}}getAspect(){const[e,i]=this.getPixelSize();return e/i}cssToDeviceRatio(){var e;try{const[i]=this.getDrawingBufferSize(),n=this._canvasSizeInfo.clientWidth||((e=this.htmlCanvas)==null?void 0:e.clientWidth);return n?i/n:1}catch{return 1}}cssToDevicePixels(e,i=!0){const n=this.cssToDeviceRatio(),[r,s]=this.getDrawingBufferSize();return lat(e,n,r,s,i)}setDevicePixelRatio(e,i={}){if(!this.htmlCanvas)return;let n="width"in i?i.width:this.htmlCanvas.clientWidth,r="height"in i?i.height:this.htmlCanvas.clientHeight;(!n||!r)&&(we.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,n=this.htmlCanvas.width||1,r=this.htmlCanvas.height||1);const s=this._canvasSizeInfo;if(s.clientWidth!==n||s.clientHeight!==r||s.devicePixelRatio!==e){let a=e;const o=Math.floor(n*a),l=Math.floor(r*a);if(this.htmlCanvas.width=o,this.htmlCanvas.height=l,this.device.gl){const[h,A]=this.getDrawingBufferSize();(h!==o||A!==l)&&(a=Math.min(h/n,A/r),this.htmlCanvas.width=Math.floor(n*a),this.htmlCanvas.height=Math.floor(r*a),we.warn("Device pixel ratio clamped")()),this._canvasSizeInfo.clientWidth=n,this._canvasSizeInfo.clientHeight=r,this._canvasSizeInfo.devicePixelRatio=e}}}getDrawingBufferSize(){const e=this.device.gl;return e?[e.drawingBufferWidth,e.drawingBufferHeight]:this.getPixelSize()}_setAutoCreatedCanvasId(e){var i;((i=this.htmlCanvas)==null?void 0:i.id)==="lumagl-auto-created-canvas"&&(this.htmlCanvas.id=e)}};rt(j2,"defaultProps",{canvas:null,width:800,height:600,useDevicePixels:!0,autoResize:!0,container:null,visible:!0,alphaMode:"opaque",colorSpace:"srgb"});let zM=j2;function sat(t){if(typeof t=="string"){const e=document.getElementById(t);if(!e)throw new Error(`${t} is not an HTML element`);return e}else if(t)return t;return document.body}function aat(t){const e=document.getElementById(t);if(!(e instanceof HTMLCanvasElement))throw new Error("Object is not a canvas element");return e}function oat(t){const{width:e,height:i}=t,n=document.createElement("canvas");return n.id=BT("lumagl-auto-created-canvas"),n.width=e||1,n.height=i||1,n.style.width=Number.isFinite(e)?`${e}px`:"100%",n.style.height=Number.isFinite(i)?`${i}px`:"100%",n}function lat(t,e,i,n,r){const s=t,a=q8(s[0],e,i);let o=Y8(s[1],e,n,r),l=q8(s[0]+1,e,i);const c=l===i-1?l:l-1;l=Y8(s[1]+1,e,n,r);let h;return r?(l=l===0?l:l+1,h=o,o=l):h=l===n-1?l:l-1,{x:a,y:o,width:Math.max(c-a+1,1),height:Math.max(h-o+1,1)}}function q8(t,e,i){return Math.min(Math.round(t*e),i-1)}function Y8(t,e,i,n){return n?Math.max(0,i-1-Math.round(t*e)):Math.min(Math.round(t*e),i-1)}const zr=class zr extends vn{constructor(i,n){n=zr.normalizeProps(i,n);super(i,n,zr.defaultProps);rt(this,"dimension");rt(this,"format");rt(this,"width");rt(this,"height");rt(this,"depth");rt(this,"mipLevels");rt(this,"updateTimestamp");if(this.dimension=this.props.dimension,this.format=this.props.format,this.width=this.props.width,this.height=this.props.height,this.depth=this.props.depth,this.props.width===void 0||this.props.height===void 0){const r=zr.getTextureDataSize(this.props.data);this.width=(r==null?void 0:r.width)||1,this.height=(r==null?void 0:r.height)||1}this.props.mipmaps&&this.props.mipLevels===void 0&&(this.props.mipLevels="pyramid"),this.mipLevels=this.props.mipLevels==="pyramid"?zr.getMipLevelCount(this.width,this.height):this.props.mipLevels||1,this.updateTimestamp=i.incrementTimestamp()}get[Symbol.toStringTag](){return"Texture"}toString(){return`Texture(${this.id},${this.format},${this.width}x${this.height})`}clone(i){return this.device.createTexture({...this.props,...i})}static isExternalImage(i){return typeof ImageData<"u"&&i instanceof ImageData||typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement||typeof VideoFrame<"u"&&i instanceof VideoFrame||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas}static getExternalImageSize(i){if(typeof ImageData<"u"&&i instanceof ImageData||typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height};if(typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement)return{width:i.naturalWidth,height:i.naturalHeight};if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement)return{width:i.videoWidth,height:i.videoHeight};if(typeof VideoFrame<"u"&&i instanceof VideoFrame)return{width:i.displayWidth,height:i.displayHeight};throw new Error("Unknown image type")}static isTextureLevelData(i){const n=i==null?void 0:i.data;return ArrayBuffer.isView(n)}static getTextureDataSize(i){if(!i||ArrayBuffer.isView(i))return null;if(Array.isArray(i))return zr.getTextureDataSize(i[0]);if(zr.isExternalImage(i))return zr.getExternalImageSize(i);if(i&&typeof i=="object"&&i.constructor===Object){const r=Object.values(i)[0];return{width:r.width,height:r.height}}throw new Error("texture size deduction failed")}static normalizeTextureData(i,n){let r;return ArrayBuffer.isView(i)?r=[{data:i,width:n.width,height:n.height}]:Array.isArray(i)?r=i:r=[i],r}static getMipLevelCount(i,n){return Math.floor(Math.log2(Math.max(i,n)))+1}static getCubeFaceDepth(i){switch(i){case"+X":return 0;case"-X":return 1;case"+Y":return 2;case"-Y":return 3;case"+Z":return 4;case"-Z":return 5;default:throw new Error(i)}}static normalizeProps(i,n){var l,c;const r={...n},s=((c=(l=i==null?void 0:i.props)==null?void 0:l._resourceDefaults)==null?void 0:c.texture)||{};Object.assign(r,s);const{width:a,height:o}=r;return typeof a=="number"&&(r.width=Math.max(1,Math.ceil(a))),typeof o=="number"&&(r.height=Math.max(1,Math.ceil(o))),r}};rt(zr,"COPY_SRC",1),rt(zr,"COPY_DST",2),rt(zr,"TEXTURE",4),rt(zr,"STORAGE",8),rt(zr,"RENDER_ATTACHMENT",16),rt(zr,"CubeFaces",["+X","-X","+Y","-Y","+Z","-Z"]),rt(zr,"defaultProps",{...vn.defaultProps,data:null,dimension:"2d",format:"rgba8unorm",width:void 0,height:void 0,depth:1,mipmaps:!1,compressed:!1,usage:0,mipLevels:void 0,samples:void 0,sampler:{},view:void 0,flipY:void 0}),rt(zr,"defaultCopyExternalImageOptions",{image:void 0,sourceX:0,sourceY:0,width:void 0,height:void 0,depth:1,mipLevel:0,x:0,y:0,z:0,aspect:"all",colorSpace:"srgb",premultipliedAlpha:!1,flipY:!1});let Zn=zr;const z2=class z2 extends vn{get[Symbol.toStringTag](){return"TextureView"}constructor(e,i){super(e,i,z2.defaultProps)}};rt(z2,"defaultProps",{...vn.defaultProps,format:void 0,dimension:void 0,aspect:"all",baseMipLevel:0,mipLevelCount:void 0,baseArrayLayer:0,arrayLayerCount:void 0});let e2=z2;function cat(t,e,i){let n="";const r=e.split(/\r?\n/),s=t.slice().sort((a,o)=>a.lineNum-o.lineNum);switch((i==null?void 0:i.showSourceCode)||"no"){case"all":let a=0;for(let o=1;o<=r.length;o++)for(n+=Sz(r[o-1],o,i);s.length>a&&s[a].lineNum===o;){const l=s[a++];n+=G8(l,r,l.lineNum,{...i,inlineSource:!1})}return n;case"issues":case"no":for(const o of t)n+=G8(o,r,o.lineNum,{inlineSource:(i==null?void 0:i.showSourceCode)!=="no"});return n}}function G8(t,e,i,n){if(n!=null&&n.inlineSource){const s=uat(e,i),a=t.linePos>0?`${" ".repeat(t.linePos+5)}^^^
`:"";return`
${s}${a}${t.type.toUpperCase()}: ${t.message}

`}const r=t.type==="error"?"red":"#8B4000";return n!=null&&n.html?`<div class='luma-compiler-log-error' style="color:${r};"><b> ${t.type.toUpperCase()}: ${t.message}</b></div>`:`${t.type.toUpperCase()}: ${t.message}`}function uat(t,e,i){let n="";for(let r=e-2;r<=e;r++){const s=t[r-1];s!==void 0&&(n+=Sz(s,e,i))}return n}function Sz(t,e,i){const n=i!=null&&i.html?fat(t):t;return`${hat(String(e),4)}: ${n}${i!=null&&i.html?"<br/>":`
`}`}function hat(t,e){let i="";for(let n=t.length;n<e;++n)i+=" ";return i+t}function fat(t){return t.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}const V2=class V2 extends vn{constructor(i,n){n={...n,debugShaders:n.debugShaders||i.props.debugShaders||"errors"};super(i,{id:dat(n),...n},V2.defaultProps);rt(this,"stage");rt(this,"source");rt(this,"compilationStatus","pending");this.stage=this.props.stage,this.source=this.props.source}get[Symbol.toStringTag](){return"Shader"}getCompilationInfoSync(){return null}getTranslatedSource(){return null}async debugShader(){const i=this.props.debugShaders;switch(i){case"never":return;case"errors":if(this.compilationStatus==="success")return;break}const n=await this.getCompilationInfo();i==="warnings"&&(n==null?void 0:n.length)===0||this._displayShaderLog(n)}_displayShaderLog(i){var c;if(typeof document>"u"||!(document!=null&&document.createElement))return;const n=wz(this.source),r=`${this.stage} ${n}`;let s=cat(i,this.source,{showSourceCode:"all",html:!0});const a=this.getTranslatedSource();a&&(s+=`<br /><br /><h1>Translated Source</h1><br /><br /><code style="user-select:text;"><pre>${a}</pre></code>`);const o=document.createElement("Button");o.innerHTML=`
<h1>Shader Compilation Error in ${r}</h1><br /><br />
<code style="user-select:text;"><pre>
${s}
</pre></code>`,o.style.top="10px",o.style.left="10px",o.style.position="absolute",o.style.zIndex="9999",o.style.width="100%",o.style.textAlign="left",document.body.appendChild(o),(c=document.getElementsByClassName("luma-compiler-log-error")[0])==null||c.scrollIntoView(),o.onclick=()=>{const h=`data:text/plain,${encodeURIComponent(this.source)}`;navigator.clipboard.writeText(h)}}};rt(V2,"defaultProps",{...vn.defaultProps,language:"auto",stage:void 0,source:"",sourceMap:null,entryPoint:"main",debugShaders:void 0});let i2=V2;function dat(t){return wz(t.source)||t.id||BT(`unnamed ${t.stage}-shader`)}function wz(t,e="unnamed"){const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/.exec(t);return n?n[1]:e}const l_=class l_ extends vn{get[Symbol.toStringTag](){return"Sampler"}constructor(e,i){i=l_.normalizeProps(e,i),super(e,i,l_.defaultProps)}static normalizeProps(e,i){var s,a;const n=((a=(s=e==null?void 0:e.props)==null?void 0:s._resourceDefaults)==null?void 0:a.sampler)||{};return{...i,...n}}};rt(l_,"defaultProps",{...vn.defaultProps,type:"color-sampler",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",addressModeW:"clamp-to-edge",magFilter:"nearest",minFilter:"nearest",mipmapFilter:"none",lodMinClamp:0,lodMaxClamp:32,compare:"less-equal",maxAnisotropy:1});let n2=l_;const $2=class $2 extends vn{constructor(i,n={}){super(i,n,$2.defaultProps);rt(this,"width");rt(this,"height");this.width=this.props.width,this.height=this.props.height}get[Symbol.toStringTag](){return"Framebuffer"}clone(i){const n=this.colorAttachments.map(s=>s.texture.clone(i)),r=this.depthStencilAttachment&&this.depthStencilAttachment.texture.clone(i);return this.device.createFramebuffer({...this.props,colorAttachments:n,depthStencilAttachment:r})}resize(i){let n=!i;if(i){const[r,s]=Array.isArray(i)?i:[i.width,i.height];n=n||s!==this.height||r!==this.width,this.width=r,this.height=s}n&&(we.log(2,`Resizing framebuffer ${this.id} to ${this.width}x${this.height}`)(),this.resizeAttachments(this.width,this.height))}autoCreateAttachmentTextures(){if(this.props.colorAttachments.length===0&&!this.props.depthStencilAttachment)throw new Error("Framebuffer has noattachments");this.colorAttachments=this.props.colorAttachments.map((n,r)=>{if(typeof n=="string"){const s=this.createColorTexture(n,r);return this.attachResource(s),s.view}return n instanceof Zn?n.view:n});const i=this.props.depthStencilAttachment;if(i)if(typeof i=="string"){const n=this.createDepthStencilTexture(i);this.attachResource(n),this.depthStencilAttachment=n.view}else i instanceof Zn?this.depthStencilAttachment=i.view:this.depthStencilAttachment=i}createColorTexture(i,n){return this.device.createTexture({id:`${this.id}-color-attachment-${n}`,usage:Zn.RENDER_ATTACHMENT,format:i,width:this.width,height:this.height,sampler:{magFilter:"linear",minFilter:"linear"}})}createDepthStencilTexture(i){return this.device.createTexture({id:`${this.id}-depth-stencil-attachment`,usage:Zn.RENDER_ATTACHMENT,format:i,width:this.width,height:this.height,mipmaps:!1})}resizeAttachments(i,n){for(let r=0;r<this.colorAttachments.length;++r)if(this.colorAttachments[r]){const s=this.colorAttachments[r].texture.clone({width:i,height:n});this.destroyAttachedResource(this.colorAttachments[r]),this.colorAttachments[r]=s.view,this.attachResource(s.view)}if(this.depthStencilAttachment){const r=this.depthStencilAttachment.texture.clone({width:i,height:n});this.destroyAttachedResource(this.depthStencilAttachment),this.depthStencilAttachment=r.view,this.attachResource(r)}this.updateAttachments()}};rt($2,"defaultProps",{...vn.defaultProps,width:1,height:1,colorAttachments:[],depthStencilAttachment:null});let r2=$2;const W2=class W2 extends vn{constructor(i,n){super(i,n,W2.defaultProps);rt(this,"shaderLayout");rt(this,"bufferLayout");rt(this,"linkStatus","pending");rt(this,"hash","");this.shaderLayout=this.props.shaderLayout,this.bufferLayout=this.props.bufferLayout||[]}get[Symbol.toStringTag](){return"RenderPipeline"}setUniformsWebGL(i){throw new Error("Use uniform blocks")}};rt(W2,"defaultProps",{...vn.defaultProps,vs:null,vertexEntryPoint:"vertexMain",vsConstants:{},fs:null,fragmentEntryPoint:"fragmentMain",fsConstants:{},shaderLayout:null,bufferLayout:[],topology:"triangle-list",parameters:{},bindings:{},uniforms:{}});let WA=W2;const So=class So extends vn{get[Symbol.toStringTag](){return"RenderPass"}constructor(e,i){i=So.normalizeProps(e,i),super(e,i,So.defaultProps)}static normalizeProps(e,i){var s;return{...(s=e.props._resourceDefaults)==null?void 0:s.renderPass,...i}}};rt(So,"defaultClearColor",[0,0,0,1]),rt(So,"defaultClearDepth",1),rt(So,"defaultClearStencil",0),rt(So,"defaultProps",{...vn.defaultProps,framebuffer:null,parameters:void 0,clearColor:So.defaultClearColor,clearColors:void 0,clearDepth:So.defaultClearDepth,clearStencil:So.defaultClearStencil,depthReadOnly:!1,stencilReadOnly:!1,discard:!1,occlusionQuerySet:void 0,timestampQuerySet:void 0,beginTimestampIndex:void 0,endTimestampIndex:void 0});let VM=So;const H2=class H2 extends vn{constructor(i,n){super(i,n,H2.defaultProps);rt(this,"hash","");rt(this,"shaderLayout");this.shaderLayout=n.shaderLayout}get[Symbol.toStringTag](){return"ComputePipeline"}};rt(H2,"defaultProps",{...vn.defaultProps,shader:void 0,entryPoint:void 0,constants:{},shaderLayout:void 0});let s2=H2;const q2=class q2 extends vn{get[Symbol.toStringTag](){return"CommandEncoder"}constructor(e,i){super(e,i,q2.defaultProps)}};rt(q2,"defaultProps",{...vn.defaultProps,measureExecutionTime:void 0});let $M=q2;const Y2=class Y2 extends vn{get[Symbol.toStringTag](){return"CommandBuffer"}constructor(e,i){super(e,i,Y2.defaultProps)}};rt(Y2,"defaultProps",{...vn.defaultProps});let WM=Y2;function Aat(t){const[e,i]=yat[t],n=e==="i32"||e==="u32",r=e!=="u32",s=pat[e]*i,a=gat(e,i);return{dataType:e,components:i,defaultVertexFormat:a,byteLength:s,integer:n,signed:r}}function gat(t,e){let i;switch(t){case"f32":i="float32";break;case"i32":i="sint32";break;case"u32":i="uint32";break;case"f16":return e<=2?"float16x2":"float16x4"}return e===1?i:`${i}x${e}`}const yat={f32:["f32",1],"vec2<f32>":["f32",2],"vec3<f32>":["f32",3],"vec4<f32>":["f32",4],f16:["f16",1],"vec2<f16>":["f16",2],"vec3<f16>":["f16",3],"vec4<f16>":["f16",4],i32:["i32",1],"vec2<i32>":["i32",2],"vec3<i32>":["i32",3],"vec4<i32>":["i32",4],u32:["u32",1],"vec2<u32>":["u32",2],"vec3<u32>":["u32",3],"vec4<u32>":["u32",4]},pat={f32:4,f16:2,i32:4,u32:4};function Mz(t){let e;t.endsWith("-webgl")&&(t.replace("-webgl",""),e=!0);const[i,n]=t.split("x"),r=i,s=n?parseInt(n):1,a=bz(r),o={type:r,components:s,byteLength:a.byteLength*s,integer:a.integer,signed:a.signed,normalized:a.normalized};return e&&(o.webglOnly=!0),o}function Iz(t,e){const i={};for(const n of t.attributes){const r=_at(t,e,n.name);r&&(i[n.name]=r)}return i}function mat(t,e,i=16){const n=Iz(t,e),r=new Array(i).fill(null);for(const s of Object.values(n))r[s.location]=s;return r}function _at(t,e,i){const n=bat(t,i),r=vat(e,i);if(!n)return null;const s=Aat(n.type),a=(r==null?void 0:r.vertexFormat)||s.defaultVertexFormat,o=Mz(a);return{attributeName:(r==null?void 0:r.attributeName)||n.name,bufferName:(r==null?void 0:r.bufferName)||n.name,location:n.location,shaderType:n.type,shaderDataType:s.dataType,shaderComponents:s.components,vertexFormat:a,bufferDataType:o.type,bufferComponents:o.components,normalized:o.normalized,integer:s.integer,stepMode:(r==null?void 0:r.stepMode)||n.stepMode||"vertex",byteOffset:(r==null?void 0:r.byteOffset)||0,byteStride:(r==null?void 0:r.byteStride)||0}}function bat(t,e){const i=t.attributes.find(n=>n.name===e);return i||we.warn(`shader layout attribute "${e}" not present in shader`),i||null}function vat(t,e){Tat(t);let i=Sat(t,e);return i||(i=wat(t,e),i)?i:(we.warn(`layout for attribute "${e}" not present in buffer layout`),null)}function Tat(t){for(const e of t)(e.attributes&&e.format||!e.attributes&&!e.format)&&we.warn(`BufferLayout ${name} must have either 'attributes' or 'format' field`)}function Sat(t,e){for(const i of t)if(i.format&&i.name===e)return{attributeName:i.name,bufferName:e,stepMode:i.stepMode,vertexFormat:i.format,byteOffset:0,byteStride:i.byteStride||0};return null}function wat(t,e){var i;for(const n of t){let r=n.byteStride;if(typeof n.byteStride!="number")for(const a of n.attributes||[]){const o=Mz(a.format);r+=o.byteLength}const s=(i=n.attributes)==null?void 0:i.find(a=>a.attribute===e);if(s)return{attributeName:s.attribute,bufferName:n.name,stepMode:n.stepMode,vertexFormat:s.format,byteOffset:s.byteOffset,byteStride:r}}return null}const G2=class G2 extends vn{constructor(i,n){super(i,n,G2.defaultProps);rt(this,"maxVertexAttributes");rt(this,"attributeInfos");rt(this,"indexBuffer",null);rt(this,"attributes");this.maxVertexAttributes=i.limits.maxVertexAttributes,this.attributes=new Array(this.maxVertexAttributes).fill(null);const{shaderLayout:r,bufferLayout:s}=n.renderPipeline||{};if(!r||!s)throw new Error("VertexArray");this.attributeInfos=mat(r,s,this.maxVertexAttributes)}get[Symbol.toStringTag](){return"VertexArray"}setConstantWebGL(i,n){this.device.reportError(new Error("constant attributes not supported"))}};rt(G2,"defaultProps",{...vn.defaultProps,renderPipeline:null});let HM=G2;const X2=class X2 extends vn{get[Symbol.toStringTag](){return"TransformFeedback"}constructor(e,i){super(e,i,X2.defaultProps)}};rt(X2,"defaultProps",{...vn.defaultProps,layout:void 0,buffers:{}});let qM=X2;const Q2=class Q2 extends vn{get[Symbol.toStringTag](){return"QuerySet"}constructor(e,i){super(e,i,Q2.defaultProps)}};rt(Q2,"defaultProps",{...vn.defaultProps,type:void 0,count:void 0});let YM=Q2;const Mat={f32:{type:"f32",components:1},i32:{type:"i32",components:1},u32:{type:"u32",components:1},"vec2<f32>":{type:"f32",components:2},"vec3<f32>":{type:"f32",components:3},"vec4<f32>":{type:"f32",components:4},"vec2<i32>":{type:"i32",components:2},"vec3<i32>":{type:"i32",components:3},"vec4<i32>":{type:"i32",components:4},"vec2<u32>":{type:"u32",components:2},"vec3<u32>":{type:"u32",components:3},"vec4<u32>":{type:"u32",components:4},"mat2x2<f32>":{type:"f32",components:4},"mat2x3<f32>":{type:"f32",components:6},"mat2x4<f32>":{type:"f32",components:8},"mat3x2<f32>":{type:"f32",components:6},"mat3x3<f32>":{type:"f32",components:9},"mat3x4<f32>":{type:"f32",components:12},"mat4x2<f32>":{type:"f32",components:8},"mat4x3<f32>":{type:"f32",components:12},"mat4x4<f32>":{type:"f32",components:16}};function Iat(t){return Mat[t]}function Eat(t,e){switch(e){case 1:return t;case 2:return t+t%2;default:return t+(4-t%4)%4}}let Vb;function Ez(t){return(!Vb||Vb.byteLength<t)&&(Vb=new ArrayBuffer(t)),Vb}function Bat(t,e){const i=Ez(t.BYTES_PER_ELEMENT*e);return new t(i,0,e)}function Oat(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function a2(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":Oat(t)}const X8=1024;class Rat{constructor(e){rt(this,"layout",{});rt(this,"byteLength");let i=0;for(const[r,s]of Object.entries(e)){const a=Iat(s),{type:o,components:l}=a;i=Eat(i,l);const c=i;i+=l,this.layout[r]={type:o,size:l,offset:c}}i+=(4-i%4)%4;const n=i*4;this.byteLength=Math.max(n,X8)}getData(e){const i=Math.max(this.byteLength,X8),n=Ez(i),r={i32:new Int32Array(n),u32:new Uint32Array(n),f32:new Float32Array(n),f16:new Uint16Array(n)};for(const[s,a]of Object.entries(e)){const o=this.layout[s];if(!o){we.warn(`Supplied uniform value ${s} not present in uniform block layout`)();continue}const{type:l,size:c,offset:h}=o,A=r[l];if(c===1){if(typeof a!="number"&&typeof a!="boolean"){we.warn(`Supplied value for single component uniform ${s} is not a number: ${a}`)();continue}A[h]=Number(a)}else{if(!a2(a)){we.warn(`Supplied value for multi component / array uniform ${s} is not a numeric array: ${a}`)();continue}A.set(a,h)}}return new Uint8Array(n)}has(e){return!!this.layout[e]}get(e){return this.layout[e]}}function Dat(t,e,i=16){if(t!==e)return!1;const n=t,r=e;if(!a2(n))return!1;if(a2(r)&&n.length===r.length){for(let s=0;s<n.length;++s)if(r[s]!==n[s])return!1}return!0}function Cat(t){return a2(t)?t.slice():t}class Pat{constructor(e){rt(this,"name");rt(this,"uniforms",{});rt(this,"modifiedUniforms",{});rt(this,"modified",!0);rt(this,"bindingLayout",{});rt(this,"needsRedraw","initialized");var i;if(this.name=(e==null?void 0:e.name)||"unnamed",e!=null&&e.name&&(e!=null&&e.shaderLayout)){const n=(i=e==null?void 0:e.shaderLayout.bindings)==null?void 0:i.find(s=>s.type==="uniform"&&s.name===(e==null?void 0:e.name));if(!n)throw new Error(e==null?void 0:e.name);const r=n;for(const s of r.uniforms||[])this.bindingLayout[s.name]=s}}setUniforms(e){for(const[i,n]of Object.entries(e))this._setUniform(i,n),this.needsRedraw||this.setNeedsRedraw(`${this.name}.${i}=${n}`)}setNeedsRedraw(e){this.needsRedraw=this.needsRedraw||e}getAllUniforms(){return this.modifiedUniforms={},this.needsRedraw=!1,this.uniforms||{}}_setUniform(e,i){Dat(this.uniforms[e],i)||(this.uniforms[e]=Cat(i),this.modifiedUniforms[e]=!0,this.modified=!0)}}class xat{constructor(e){rt(this,"uniformBlocks",new Map);rt(this,"uniformBufferLayouts",new Map);rt(this,"uniformBuffers",new Map);for(const[i,n]of Object.entries(e)){const r=i,s=new Rat(n.uniformTypes||{});this.uniformBufferLayouts.set(r,s);const a=new Pat({name:i});a.setUniforms(n.defaultUniforms||{}),this.uniformBlocks.set(r,a)}}destroy(){for(const e of this.uniformBuffers.values())e.destroy()}setUniforms(e){var i;for(const[n,r]of Object.entries(e))(i=this.uniformBlocks.get(n))==null||i.setUniforms(r);this.updateUniformBuffers()}getUniformBufferByteLength(e){var i;return((i=this.uniformBufferLayouts.get(e))==null?void 0:i.byteLength)||0}getUniformBufferData(e){var n,r;const i=((n=this.uniformBlocks.get(e))==null?void 0:n.getAllUniforms())||{};return(r=this.uniformBufferLayouts.get(e))==null?void 0:r.getData(i)}createUniformBuffer(e,i,n){n&&this.setUniforms(n);const r=this.getUniformBufferByteLength(i),s=e.createBuffer({usage:Dn.UNIFORM|Dn.COPY_DST,byteLength:r}),a=this.getUniformBufferData(i);return s.write(a),s}getManagedUniformBuffer(e,i){if(!this.uniformBuffers.get(i)){const n=this.getUniformBufferByteLength(i),r=e.createBuffer({usage:Dn.UNIFORM|Dn.COPY_DST,byteLength:n});this.uniformBuffers.set(i,r)}return this.uniformBuffers.get(i)}updateUniformBuffers(){let e=!1;for(const i of this.uniformBlocks.keys()){const n=this.updateUniformBuffer(i);e||(e=n)}return e&&we.log(3,`UniformStore.updateUniformBuffers(): ${e}`)(),e}updateUniformBuffer(e){var s;const i=this.uniformBlocks.get(e);let n=this.uniformBuffers.get(e),r=!1;if(n&&(i!=null&&i.needsRedraw)){r||(r=i.needsRedraw);const a=this.getUniformBufferData(e);n=this.uniformBuffers.get(e),n==null||n.write(a);const o=(s=this.uniformBlocks.get(e))==null?void 0:s.getAllUniforms();we.log(4,`Writing to uniform buffer ${String(e)}`,a,o)()}return r}}function Bz(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return"float32";case Uint16Array:return"uint16";case Uint32Array:return"uint32";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int8Array:return"sint8";case Int16Array:return"sint16";case Int32Array:return"sint32";default:throw new Error(e.constructor.name)}}function Oz(t){switch(t){case"float32":return Float32Array;case"uint32":return Uint32Array;case"sint32":return Int32Array;case"uint16":case"unorm16":return Uint16Array;case"sint16":case"snorm16":return Int16Array;case"uint8":case"unorm8":return Uint8Array;case"sint8":case"snorm8":return Int8Array;default:throw new Error(t)}}function Nat(t,e,i){if(!e||e>4)throw new Error(`size ${e}`);const n=e;let r=Bz(t);if(r==="uint8"&&i&&n===1)return"unorm8-webgl";if(r==="uint8"&&i&&n===3)return"unorm8x3-webgl";if(r==="uint8"||r==="sint8"){if(n===1||n===3)throw new Error(`size: ${e}`);return i&&(r=r.replace("int","norm")),`${r}x${n}`}if(r==="uint16"||r==="sint16"){if(n===1||n===3)throw new Error(`size: ${e}`);return i&&(r=r.replace("int","norm")),`${r}x${n}`}return n===1?r:`${r}x${n}`}class w3{constructor(e){rt(this,"bufferLayouts");this.bufferLayouts=e}getBufferLayout(e){return this.bufferLayouts.find(i=>i.name===e)||null}getAttributeNamesForBuffer(e){var i;return e.attributes?(i=e.attributes)==null?void 0:i.map(n=>n.attribute):[e.name]}mergeBufferLayouts(e,i){const n=[...e];for(const r of i){const s=n.findIndex(a=>a.name===r.name);s<0?n.push(r):n[s]=r}return n}getBufferIndex(e){const i=this.bufferLayouts.findIndex(n=>n.name===e);return i===-1&&we.warn(`BufferLayout: Missing buffer for "${e}".`)(),i}}function Fat(t,e){const i=Object.fromEntries(t.attributes.map(r=>[r.name,r.location])),n=e.slice();return n.sort((r,s)=>{const a=r.attributes?r.attributes.map(h=>h.attribute):[r.name],o=s.attributes?s.attributes.map(h=>h.attribute):[s.name],l=Math.min(...a.map(h=>i[h])),c=Math.min(...o.map(h=>i[h]));return l-c}),n}class Va{constructor(e,i){this.name=e,this.attributes=i,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}}class Q8{constructor(e,i,n){this.name=e,this.type=i,this.attributes=n,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Tu extends Va{constructor(e,i){super(e,i),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}}class Ou extends Va{constructor(e,i){super(e,i),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}}class GM extends Va{constructor(e,i,n){super(e,n),this.format=i}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}}class pf extends Va{constructor(e,i,n,r){super(e,n),this.format=i,this.access=r}get isTemplate(){return!0}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}var mu;(t=>{t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(mu||(mu={}));class $b{constructor(e,i,n,r,s,a,o){this.name=e,this.type=i,this.group=n,this.binding=r,this.attributes=s,this.resourceType=a,this.access=o}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}}class Lat{constructor(e,i){this.name=e,this.type=i}}class Uat{constructor(e,i,n,r){this.name=e,this.type=i,this.locationType=n,this.location=r,this.interpolation=null}}class K8{constructor(e,i,n,r){this.name=e,this.type=i,this.locationType=n,this.location=r}}class kat{constructor(e,i,n,r){this.name=e,this.type=i,this.attributes=n,this.id=r}}class jat{constructor(e,i,n){this.name=e,this.type=i,this.attributes=n}}class zat{constructor(e,i=null,n){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=i,this.attributes=n}}class Vat{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}}const Rz=new Float32Array(1),$at=new Int32Array(Rz.buffer),is=new Uint16Array(1);function Wat(t){Rz[0]=t;const e=$at[0],i=e>>31&1;let n=e>>23&255,r=8388607&e;if(n===255)return is[0]=i<<15|31744|(r!==0?512:0),is[0];if(n===0){if(r===0)return is[0]=i<<15,is[0];r|=8388608;let s=113;for(;!(8388608&r);)r<<=1,s--;return n=127-s,r&=8388607,n>0?(r=(r>>126-n)+(r>>127-n&1),is[0]=i<<15|n<<10|r>>13,is[0]):(is[0]=i<<15,is[0])}return n=n-127+15,n>=31?(is[0]=i<<15|31744,is[0]):n<=0?n<-10?(is[0]=i<<15,is[0]):(r=(8388608|r)>>1-n,is[0]=i<<15|r>>13,is[0]):(r>>=13,is[0]=i<<15|n<<10|r,is[0])}const CB=new Uint32Array(1),Dz=new Float32Array(CB.buffer,0,1);function Z8(t){const e=112+(t>>6&31)<<23|(63&t)<<17;return CB[0]=e,Dz[0]}function Hat(t,e,i,n,r,s,a,o,l){const c=n*(a>>=r)*(s>>=r)+i*a+e*o;switch(l){case"r8unorm":return[ln(t,c,"8unorm",1)[0]];case"r8snorm":return[ln(t,c,"8snorm",1)[0]];case"r8uint":return[ln(t,c,"8uint",1)[0]];case"r8sint":return[ln(t,c,"8sint",1)[0]];case"rg8unorm":{const h=ln(t,c,"8unorm",2);return[h[0],h[1]]}case"rg8snorm":{const h=ln(t,c,"8snorm",2);return[h[0],h[1]]}case"rg8uint":{const h=ln(t,c,"8uint",2);return[h[0],h[1]]}case"rg8sint":{const h=ln(t,c,"8sint",2);return[h[0],h[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{const h=ln(t,c,"8unorm",4);return[h[0],h[1],h[2],h[3]]}case"rgba8snorm":{const h=ln(t,c,"8snorm",4);return[h[0],h[1],h[2],h[3]]}case"rgba8uint":{const h=ln(t,c,"8uint",4);return[h[0],h[1],h[2],h[3]]}case"rgba8sint":{const h=ln(t,c,"8sint",4);return[h[0],h[1],h[2],h[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{const h=ln(t,c,"8unorm",4);return[h[2],h[1],h[0],h[3]]}case"r16uint":return[ln(t,c,"16uint",1)[0]];case"r16sint":return[ln(t,c,"16sint",1)[0]];case"r16float":return[ln(t,c,"16float",1)[0]];case"rg16uint":{const h=ln(t,c,"16uint",2);return[h[0],h[1]]}case"rg16sint":{const h=ln(t,c,"16sint",2);return[h[0],h[1]]}case"rg16float":{const h=ln(t,c,"16float",2);return[h[0],h[1]]}case"rgba16uint":{const h=ln(t,c,"16uint",4);return[h[0],h[1],h[2],h[3]]}case"rgba16sint":{const h=ln(t,c,"16sint",4);return[h[0],h[1],h[2],h[3]]}case"rgba16float":{const h=ln(t,c,"16float",4);return[h[0],h[1],h[2],h[3]]}case"r32uint":return[ln(t,c,"32uint",1)[0]];case"r32sint":return[ln(t,c,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[ln(t,c,"32float",1)[0]];case"rg32uint":{const h=ln(t,c,"32uint",2);return[h[0],h[1]]}case"rg32sint":{const h=ln(t,c,"32sint",2);return[h[0],h[1]]}case"rg32float":{const h=ln(t,c,"32float",2);return[h[0],h[1]]}case"rgba32uint":{const h=ln(t,c,"32uint",4);return[h[0],h[1],h[2],h[3]]}case"rgba32sint":{const h=ln(t,c,"32sint",4);return[h[0],h[1],h[2],h[3]]}case"rgba32float":{const h=ln(t,c,"32float",4);return[h[0],h[1],h[2],h[3]]}case"rg11b10ufloat":{const h=new Uint32Array(t.buffer,c,1)[0],A=(4192256&h)>>11,m=(4290772992&h)>>22;return[Z8(2047&h),Z8(A),function(b){const S=112+(b>>5&31)<<23|(31&b)<<18;return CB[0]=S,Dz[0]}(m),1]}}return null}function ln(t,e,i,n){const r=[0,0,0,0];for(let c=0;c<n;++c)switch(i){case"8unorm":r[c]=t[e]/255,e++;break;case"8snorm":r[c]=t[e]/255*2-1,e++;break;case"8uint":r[c]=t[e],e++;break;case"8sint":r[c]=t[e]-127,e++;break;case"16uint":r[c]=t[e]|t[e+1]<<8,e+=2;break;case"16sint":r[c]=(t[e]|t[e+1]<<8)-32768,e+=2;break;case"16float":r[c]=(s=t[e]|t[e+1]<<8,a=void 0,o=void 0,l=void 0,a=(32768&s)>>15,l=1023&s,(o=(31744&s)>>10)==0?(a?-1:1)*Math.pow(2,-14)*(l/Math.pow(2,10)):o==31?l?NaN:1/0*(a?-1:1):(a?-1:1)*Math.pow(2,o-15)*(1+l/Math.pow(2,10))),e+=2;break;case"32uint":case"32sint":r[c]=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,e+=4;break;case"32float":r[c]=new Float32Array(t.buffer,e,1)[0],e+=4}var s,a,o,l;return r}function cn(t,e,i,n,r){for(let s=0;s<n;++s)switch(i){case"8unorm":t[e]=255*r[s],e++;break;case"8snorm":t[e]=.5*(r[s]+1)*255,e++;break;case"8uint":t[e]=r[s],e++;break;case"8sint":t[e]=r[s]+127,e++;break;case"16uint":new Uint16Array(t.buffer,e,1)[0]=r[s],e+=2;break;case"16sint":new Int16Array(t.buffer,e,1)[0]=r[s],e+=2;break;case"16float":{const a=Wat(r[s]);new Uint16Array(t.buffer,e,1)[0]=a,e+=2;break}case"32uint":new Uint32Array(t.buffer,e,1)[0]=r[s],e+=4;break;case"32sint":new Int32Array(t.buffer,e,1)[0]=r[s],e+=4;break;case"32float":new Float32Array(t.buffer,e,1)[0]=r[s],e+=4}return r}const M3={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}};class Ka{constructor(){this.id=Ka._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(e){e(this)}searchBlock(e,i){if(e){i(o2.instance);for(const n of e)n instanceof Array?this.searchBlock(n,i):n.search(i);i(l2.instance)}}constEvaluate(e,i){throw new Error("Cannot evaluate node")}constEvaluateString(e){return this.constEvaluate(e).toString()}}Ka._id=0;let o2=class extends Ka{};o2.instance=new o2;class l2 extends Ka{}l2.instance=new l2;const Cz=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]);let Ln=class extends Ka{constructor(){super()}};class p_ extends Ln{constructor(e,i,n,r,s,a){super(),this.calls=new Set,this.name=e,this.args=i,this.returnType=n,this.body=r,this.startLine=s,this.endLine=a}get astNodeType(){return"function"}search(e){if(this.attributes)for(const i of this.attributes)e(i);e(this);for(const i of this.args)e(i);this.searchBlock(this.body,e)}}let qat=class extends Ln{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}},Pz=class extends Ln{constructor(e,i){super(),this.condition=e,this.body=i}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}},XM=class extends Ln{constructor(e,i){super(),this.body=e,this.loopId=i}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}},xz=class extends Ln{constructor(e,i,n,r){super(),this.init=e,this.condition=i,this.increment=n,this.body=r}get astNodeType(){return"for"}search(e){var i,n,r;(i=this.init)===null||i===void 0||i.search(e),(n=this.condition)===null||n===void 0||n.search(e),(r=this.increment)===null||r===void 0||r.search(e),this.searchBlock(this.body,e)}};class Mc extends Ln{constructor(e,i,n,r,s){super(),this.attributes=null,this.name=e,this.type=i,this.storage=n,this.access=r,this.value=s}get astNodeType(){return"var"}search(e){var i;e(this),(i=this.value)===null||i===void 0||i.search(e)}}class PB extends Ln{constructor(e,i,n){super(),this.attributes=null,this.name=e,this.type=i,this.value=n}get astNodeType(){return"override"}search(e){var i;(i=this.value)===null||i===void 0||i.search(e)}}class Jm extends Ln{constructor(e,i,n,r,s){super(),this.attributes=null,this.name=e,this.type=i,this.storage=n,this.access=r,this.value=s}get astNodeType(){return"let"}search(e){var i;e(this),(i=this.value)===null||i===void 0||i.search(e)}}class pv extends Ln{constructor(e,i,n,r,s){super(),this.attributes=null,this.name=e,this.type=i,this.storage=n,this.access=r,this.value=s}get astNodeType(){return"const"}constEvaluate(e,i){return this.value.constEvaluate(e,i)}search(e){var i;e(this),(i=this.value)===null||i===void 0||i.search(e)}}var aA,Fm,qt,kt;(t=>{t.increment="++",t.decrement="--"})(aA||(aA={})),(t=>{t.parse=function(e){const i=e;if(i=="parse")throw new Error("Invalid value for IncrementOperator");return t[i]}})(aA||(aA={}));let Nz=class extends Ln{constructor(e,i){super(),this.operator=e,this.variable=i}get astNodeType(){return"increment"}search(e){this.variable.search(e)}};(t=>{t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(Fm||(Fm={})),(t=>{t.parse=function(e){const i=e;if(i=="parse")throw new Error("Invalid value for AssignOperator");return i}})(Fm||(Fm={}));class Fz extends Ln{constructor(e,i,n){super(),this.operator=e,this.variable=i,this.value=n}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}}class xB extends Ln{constructor(e,i){super(),this.name=e,this.args=i}get astNodeType(){return"call"}isBuiltin(){return Cz.has(this.name)}search(e){for(const i of this.args)i.search(e);e(this)}}let Lz=class extends Ln{constructor(e,i){super(),this.body=e,this.continuing=i}get astNodeType(){return"loop"}},Uz=class extends Ln{constructor(e,i){super(),this.condition=e,this.cases=i}get astNodeType(){return"switch"}search(e){e(this);for(const i of this.cases)i.search(e)}},kz=class extends Ln{constructor(e,i,n,r){super(),this.condition=e,this.body=i,this.elseif=n,this.else=r}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}};class jz extends Ln{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var i;(i=this.value)===null||i===void 0||i.search(e)}}let Yat=class extends Ln{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}},Gat=class extends Ln{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}},zz=class extends Ln{constructor(e,i){super(),this.severity=e,this.rule=i}get astNodeType(){return"diagnostic"}},NB=class extends Ln{constructor(e,i){super(),this.name=e,this.type=i}get astNodeType(){return"alias"}},Xat=class extends Ln{constructor(){super()}get astNodeType(){return"discard"}},Vz=class extends Ln{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}},$z=class extends Ln{constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}},le=class mv extends Ln{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let i=e[0];if(i.name==="f32")return i;for(let n=1;n<e.length;++n){const r=mv._priority.get(i.name);mv._priority.get(e[n].name)<r&&(i=e[n])}return i.name==="x32"?mv.i32:i}getTypeName(){return this.name}};le.x32=new le("x32"),le.f32=new le("f32"),le.i32=new le("i32"),le.u32=new le("u32"),le.f16=new le("f16"),le.bool=new le("bool"),le.void=new le("void"),le._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class J8 extends le{constructor(e){super(e)}}class vc extends le{constructor(e,i,n,r){super(e),this.members=i,this.startLine=n,this.endLine=r}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let i=0;i<this.members.length;i++)if(this.members[i].name==e)return i;return-1}search(e){for(const i of this.members)e(i)}}class Wt extends le{constructor(e,i,n){super(e),this.format=i,this.access=n}get astNodeType(){return"template"}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}}Wt.vec2f=new Wt("vec2",le.f32,null),Wt.vec3f=new Wt("vec3",le.f32,null),Wt.vec4f=new Wt("vec4",le.f32,null),Wt.vec2i=new Wt("vec2",le.i32,null),Wt.vec3i=new Wt("vec3",le.i32,null),Wt.vec4i=new Wt("vec4",le.i32,null),Wt.vec2u=new Wt("vec2",le.u32,null),Wt.vec3u=new Wt("vec3",le.u32,null),Wt.vec4u=new Wt("vec4",le.u32,null),Wt.vec2h=new Wt("vec2",le.f16,null),Wt.vec3h=new Wt("vec3",le.f16,null),Wt.vec4h=new Wt("vec4",le.f16,null),Wt.vec2b=new Wt("vec2",le.bool,null),Wt.vec3b=new Wt("vec3",le.bool,null),Wt.vec4b=new Wt("vec4",le.bool,null),Wt.mat2x2f=new Wt("mat2x2",le.f32,null),Wt.mat2x3f=new Wt("mat2x3",le.f32,null),Wt.mat2x4f=new Wt("mat2x4",le.f32,null),Wt.mat3x2f=new Wt("mat3x2",le.f32,null),Wt.mat3x3f=new Wt("mat3x3",le.f32,null),Wt.mat3x4f=new Wt("mat3x4",le.f32,null),Wt.mat4x2f=new Wt("mat4x2",le.f32,null),Wt.mat4x3f=new Wt("mat4x3",le.f32,null),Wt.mat4x4f=new Wt("mat4x4",le.f32,null),Wt.mat2x2h=new Wt("mat2x2",le.f16,null),Wt.mat2x3h=new Wt("mat2x3",le.f16,null),Wt.mat2x4h=new Wt("mat2x4",le.f16,null),Wt.mat3x2h=new Wt("mat3x2",le.f16,null),Wt.mat3x3h=new Wt("mat3x3",le.f16,null),Wt.mat3x4h=new Wt("mat3x4",le.f16,null),Wt.mat4x2h=new Wt("mat4x2",le.f16,null),Wt.mat4x3h=new Wt("mat4x3",le.f16,null),Wt.mat4x4h=new Wt("mat4x4",le.f16,null),Wt.mat2x2i=new Wt("mat2x2",le.i32,null),Wt.mat2x3i=new Wt("mat2x3",le.i32,null),Wt.mat2x4i=new Wt("mat2x4",le.i32,null),Wt.mat3x2i=new Wt("mat3x2",le.i32,null),Wt.mat3x3i=new Wt("mat3x3",le.i32,null),Wt.mat3x4i=new Wt("mat3x4",le.i32,null),Wt.mat4x2i=new Wt("mat4x2",le.i32,null),Wt.mat4x3i=new Wt("mat4x3",le.i32,null),Wt.mat4x4i=new Wt("mat4x4",le.i32,null),Wt.mat2x2u=new Wt("mat2x2",le.u32,null),Wt.mat2x3u=new Wt("mat2x3",le.u32,null),Wt.mat2x4u=new Wt("mat2x4",le.u32,null),Wt.mat3x2u=new Wt("mat3x2",le.u32,null),Wt.mat3x3u=new Wt("mat3x3",le.u32,null),Wt.mat3x4u=new Wt("mat3x4",le.u32,null),Wt.mat4x2u=new Wt("mat4x2",le.u32,null),Wt.mat4x3u=new Wt("mat4x3",le.u32,null),Wt.mat4x4u=new Wt("mat4x4",le.u32,null);class _v extends le{constructor(e,i,n,r){super(e),this.storage=i,this.type=n,this.access=r}get astNodeType(){return"pointer"}}let t_=class extends le{constructor(e,i,n,r){super(e),this.attributes=i,this.format=n,this.count=r}get astNodeType(){return"array"}get isArray(){return!0}};class Lm extends le{constructor(e,i,n){super(e),this.format=i,this.access=n}get astNodeType(){return"sampler"}}class No extends Ka{constructor(){super(),this.postfix=null}}class mf extends No{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}}class Zo extends No{constructor(e,i){super(),this.type=e,this.args=i}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(const i of this.args)i.search(e)}constEvaluate(e,i){return i&&(i[0]=this.type),e.evalExpression(this,e.context)}}class FB extends No{constructor(e,i){super(),this.cachedReturnValue=null,this.name=e,this.args=i}get astNodeType(){return"callExpr"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return Cz.has(this.name)}constEvaluate(e,i){return e.evalExpression(this,e.context)}search(e){for(const i of this.args)i.search(e);e(this)}}class pa extends No{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,i){return e.evalExpression(this,e.context)}}let Wz=class extends No{constructor(e,i){super(),this.name=e,this.initializer=i}get astNodeType(){return"constExpr"}constEvaluate(e,i){if(this.initializer){const n=e.evalExpression(this.initializer,e.context);return n!==null&&this.postfix?n.getSubData(e,this.postfix,e.context):n}return null}search(e){this.initializer.search(e)}};class _r extends No{constructor(e,i){super(),this.value=e,this.type=i}get astNodeType(){return"literalExpr"}constEvaluate(e,i){return i!==void 0&&(i[0]=this.type),this.value}get isScalar(){return this.value instanceof Lt}get isVector(){return this.value instanceof _t||this.value instanceof fi}get scalarValue(){return this.value instanceof Lt?this.value.value:(console.error("Value is not scalar."),0)}get vectorValue(){return this.value instanceof _t||this.value instanceof fi?this.value.data:(console.error("Value is not a vector or matrix."),new Float32Array(0))}}class Hz extends No{constructor(e,i){super(),this.type=e,this.value=i}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}}class HA extends No{constructor(e){super(),this.index=e}search(e){this.index.search(e)}}class qz extends No{constructor(){super()}}class dr extends qz{constructor(e,i){super(),this.operator=e,this.right=i}get astNodeType(){return"unaryOp"}constEvaluate(e,i){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}}class To extends qz{constructor(e,i,n){super(),this.operator=e,this.left=i,this.right=n}get astNodeType(){return"binaryOp"}_getPromotedType(e,i){return e.name===i.name?e:e.name==="f32"||i.name==="f32"?le.f32:e.name==="u32"||i.name==="u32"?le.u32:le.i32}constEvaluate(e,i){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}}class Yz extends Ka{constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}}class bv extends No{constructor(){super()}get astNodeType(){return"default"}}class Gz extends Yz{constructor(e,i){super(i),this.selectors=e}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}}class Xz extends Yz{constructor(e){super(e)}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}}class tF extends Ka{constructor(e,i,n){super(),this.name=e,this.type=i,this.attributes=n}get astNodeType(){return"argument"}}class Qat extends Ka{constructor(e,i){super(),this.condition=e,this.body=i}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}}class eF extends Ka{constructor(e,i,n){super(),this.name=e,this.type=i,this.attributes=n}get astNodeType(){return"member"}}class Qz extends Ka{constructor(e,i){super(),this.name=e,this.value=i}get astNodeType(){return"attribute"}}class Ya{constructor(e,i){this.parent=null,this.typeInfo=e,this.parent=i,this.id=Ya._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,i,n,r){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,i,n){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}}Ya._id=0;class QM extends Ya{constructor(){super(new Va("void",null),null)}toString(){return"void"}}QM.void=new QM;class Wd extends Ya{constructor(e){super(new GM("pointer",e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,i,n,r){this.reference.setDataValue(e,i,n,r)}getSubData(e,i,n){return i?this.reference.getSubData(e,i,n):this}toString(){return`&${this.reference.toString()}`}}class Lt extends Ya{constructor(e,i,n=null){super(i,n),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:this.typeInfo.name==="x32"?e-Math.floor(e)!=0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):this.typeInfo.name==="i32"||this.typeInfo.name==="bool"?this.data=new Int32Array([e]):this.typeInfo.name==="u32"?this.data=new Uint32Array([e]):this.typeInfo.name==="f32"||this.typeInfo.name==="f16"?this.data=new Float32Array([e]):console.error("ScalarData2: Invalid type",i)}clone(){if(this.data instanceof Float32Array)return new Lt(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new Lt(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new Lt(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,i,n,r){if(n)return void console.error("SetDataValue: Scalar data does not support postfix",n);if(!(i instanceof Lt))return void console.error("SetDataValue: Invalid value",i);let s=i.data[0];this.typeInfo.name==="i32"||this.typeInfo.name==="u32"?s=Math.floor(s):this.typeInfo.name==="bool"&&(s=s?1:0),this.data[0]=s}getSubData(e,i,n){return i?(console.error("getSubData: Scalar data does not support postfix",i),null):this}toString(){return`${this.value}`}}function Kat(t,e,i){const n=e.length;return n===2?i==="f32"?new _t(new Float32Array(e),t.getTypeInfo("vec2f")):i==="i32"||i==="bool"?new _t(new Int32Array(e),t.getTypeInfo("vec2i")):i==="u32"?new _t(new Uint32Array(e),t.getTypeInfo("vec2u")):i==="f16"?new _t(new Float32Array(e),t.getTypeInfo("vec2h")):(console.error(`getSubData: Unknown format ${i}`),null):n===3?i==="f32"?new _t(new Float32Array(e),t.getTypeInfo("vec3f")):i==="i32"||i==="bool"?new _t(new Int32Array(e),t.getTypeInfo("vec3i")):i==="u32"?new _t(new Uint32Array(e),t.getTypeInfo("vec3u")):i==="f16"?new _t(new Float32Array(e),t.getTypeInfo("vec3h")):(console.error(`getSubData: Unknown format ${i}`),null):n===4?i==="f32"?new _t(new Float32Array(e),t.getTypeInfo("vec4f")):i==="i32"||i==="bool"?new _t(new Int32Array(e),t.getTypeInfo("vec4i")):i==="u32"?new _t(new Uint32Array(e),t.getTypeInfo("vec4u")):i==="f16"?new _t(new Float32Array(e),t.getTypeInfo("vec4h")):(console.error(`getSubData: Unknown format ${i}`),null):(console.error(`getSubData: Invalid vector size ${e.length}`),null)}class _t extends Ya{constructor(e,i,n=null){if(super(i,n),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{const r=this.typeInfo.name;r==="vec2f"||r==="vec3f"||r==="vec4f"?this.data=new Float32Array(e):r==="vec2i"||r==="vec3i"||r==="vec4i"?this.data=new Int32Array(e):r==="vec2u"||r==="vec3u"||r==="vec4u"?this.data=new Uint32Array(e):r==="vec2h"||r==="vec3h"||r==="vec4h"?this.data=new Float32Array(e):r==="vec2b"||r==="vec3b"||r==="vec4b"?this.data=new Int32Array(e):r==="vec2"||r==="vec3"||r==="vec4"?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${r}`)}}clone(){if(this.data instanceof Float32Array)return new _t(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new _t(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new _t(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(e,i,n,r){n instanceof mf?console.error("TODO: Set vector postfix"):i instanceof _t?this.data=i.data:console.error("SetDataValue: Invalid value",i)}getSubData(e,i,n){if(i===null)return this;let r=e.getTypeInfo("f32");if(this.typeInfo instanceof pf)r=this.typeInfo.format||r;else{const a=this.typeInfo.name;a==="vec2f"||a==="vec3f"||a==="vec4f"?r=e.getTypeInfo("f32"):a==="vec2i"||a==="vec3i"||a==="vec4i"?r=e.getTypeInfo("i32"):a==="vec2b"||a==="vec3b"||a==="vec4b"?r=e.getTypeInfo("bool"):a==="vec2u"||a==="vec3u"||a==="vec4u"?r=e.getTypeInfo("u32"):a==="vec2h"||a==="vec3h"||a==="vec4h"?r=e.getTypeInfo("f16"):console.error(`GetSubData: Unknown type ${a}`)}let s=this;for(;i!==null&&s!==null;){if(i instanceof HA){const a=i.index;let o=-1;if(a instanceof _r){if(!(a.value instanceof Lt))return console.error(`GetSubData: Invalid array index ${a.value}`),null;o=a.value.value}else{const l=e.evalExpression(a,n);if(!(l instanceof Lt))return console.error("GetSubData: Unknown index type",a),null;o=l.value}if(o<0||o>=s.data.length)return console.error("GetSubData: Index out of range",o),null;if(s.data instanceof Float32Array){const l=new Float32Array(s.data.buffer,s.data.byteOffset+4*o,1);return new Lt(l,r)}if(s.data instanceof Int32Array){const l=new Int32Array(s.data.buffer,s.data.byteOffset+4*o,1);return new Lt(l,r)}if(s.data instanceof Uint32Array){const l=new Uint32Array(s.data.buffer,s.data.byteOffset+4*o,1);return new Lt(l,r)}throw"GetSubData: Invalid data type"}if(!(i instanceof mf))return console.error("GetSubData: Unknown postfix",i),null;{const a=i.value.toLowerCase();if(a.length===1){let l=0;if(a==="x"||a==="r")l=0;else if(a==="y"||a==="g")l=1;else if(a==="z"||a==="b")l=2;else{if(a!=="w"&&a!=="a")return console.error(`GetSubData: Unknown member ${a}`),null;l=3}if(this.data instanceof Float32Array){let c=new Float32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new Lt(c,r,this)}if(this.data instanceof Int32Array){let c=new Int32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new Lt(c,r,this)}if(this.data instanceof Uint32Array){let c=new Uint32Array(this.data.buffer,this.data.byteOffset+4*l,1);return new Lt(c,r,this)}}const o=[];for(const l of a)l==="x"||l==="r"?o.push(this.data[0]):l==="y"||l==="g"?o.push(this.data[1]):l==="z"||l==="b"?o.push(this.data[2]):l==="w"||l==="a"?o.push(this.data[3]):console.error(`GetDataValue: Unknown member ${l}`);s=Kat(e,o,r.name)}i=i.postfix}return s}toString(){let e=`${this.data[0]}`;for(let i=1;i<this.data.length;++i)e+=`, ${this.data[i]}`;return e}}class fi extends Ya{constructor(e,i,n=null){super(i,n),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new fi(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,i,n,r){n instanceof mf?console.error("TODO: Set matrix postfix"):i instanceof fi?this.data=i.data:console.error("SetDataValue: Invalid value",i)}getSubData(e,i,n){if(i===null)return this;const r=this.typeInfo.name;if(e.getTypeInfo("f32"),this.typeInfo instanceof pf)this.typeInfo.format;else if(r.endsWith("f"))e.getTypeInfo("f32");else if(r.endsWith("i"))e.getTypeInfo("i32");else if(r.endsWith("u"))e.getTypeInfo("u32");else{if(!r.endsWith("h"))return console.error(`GetDataValue: Unknown type ${r}`),null;e.getTypeInfo("f16")}if(i instanceof HA){const s=i.index;let a=-1;if(s instanceof _r){if(!(s.value instanceof Lt))return console.error(`GetDataValue: Invalid array index ${s.value}`),null;a=s.value.value}else{const c=e.evalExpression(s,n);if(!(c instanceof Lt))return console.error("GetDataValue: Unknown index type",s),null;a=c.value}if(a<0||a>=this.data.length)return console.error("GetDataValue: Index out of range",a),null;const o=r.endsWith("h")?"h":"f";let l;if(r==="mat2x2"||r==="mat2x2f"||r==="mat2x2h"||r==="mat3x2"||r==="mat3x2f"||r==="mat3x2h"||r==="mat4x2"||r==="mat4x2f"||r==="mat4x2h")l=new _t(new Float32Array(this.data.buffer,this.data.byteOffset+2*a*4,2),e.getTypeInfo(`vec2${o}`));else if(r==="mat2x3"||r==="mat2x3f"||r==="mat2x3h"||r==="mat3x3"||r==="mat3x3f"||r==="mat3x3h"||r==="mat4x3"||r==="mat4x3f"||r==="mat4x3h")l=new _t(new Float32Array(this.data.buffer,this.data.byteOffset+3*a*4,3),e.getTypeInfo(`vec3${o}`));else{if(r!=="mat2x4"&&r!=="mat2x4f"&&r!=="mat2x4h"&&r!=="mat3x4"&&r!=="mat3x4f"&&r!=="mat3x4h"&&r!=="mat4x4"&&r!=="mat4x4f"&&r!=="mat4x4h")return console.error(`GetDataValue: Unknown type ${r}`),null;l=new _t(new Float32Array(this.data.buffer,this.data.byteOffset+4*a*4,4),e.getTypeInfo(`vec4${o}`))}return i.postfix?l.getSubData(e,i.postfix,n):l}return console.error("GetDataValue: Invalid postfix",i),null}toString(){let e=`${this.data[0]}`;for(let i=1;i<this.data.length;++i)e+=`, ${this.data[i]}`;return e}}class Jn extends Ya{constructor(e,i,n=0,r=null){super(i,r),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=n}clone(){const e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new Jn(e.buffer,this.typeInfo,0,null)}setDataValue(e,i,n,r){if(i===null)return void console.log("setDataValue: NULL data.");let s=this.offset,a=this.typeInfo;for(;n;){if(n instanceof HA)if(a instanceof Ou){const o=n.index;if(o instanceof _r){if(!(o.value instanceof Lt))return void console.error(`SetDataValue: Invalid index type ${o.value}`);s+=o.value.value*a.stride}else{const l=e.evalExpression(o,r);if(!(l instanceof Lt))return void console.error("SetDataValue: Unknown index type",o);s+=l.value*a.stride}a=a.format}else console.error(`SetDataValue: Type ${a.getTypeName()} is not an array`);else{if(!(n instanceof mf))return void console.error("SetDataValue: Unknown postfix type",n);{const o=n.value;if(a instanceof Tu){let l=!1;for(const c of a.members)if(c.name===o){s+=c.offset,a=c.type,l=!0;break}if(!l)return void console.error(`SetDataValue: Member ${o} not found`)}else if(a instanceof Va){const l=a.getTypeName();let c=0;if(o==="x"||o==="r")c=0;else if(o==="y"||o==="g")c=1;else if(o==="z"||o==="b")c=2;else{if(o!=="w"&&o!=="a")return void console.error(`SetDataValue: Unknown member ${o}`);c=3}if(!(i instanceof Lt))return void console.error("SetDataValue: Invalid value",i);const h=i.value;return l==="vec2f"?void(new Float32Array(this.buffer,s,2)[c]=h):l==="vec3f"?void(new Float32Array(this.buffer,s,3)[c]=h):l==="vec4f"?void(new Float32Array(this.buffer,s,4)[c]=h):l==="vec2i"?void(new Int32Array(this.buffer,s,2)[c]=h):l==="vec3i"?void(new Int32Array(this.buffer,s,3)[c]=h):l==="vec4i"?void(new Int32Array(this.buffer,s,4)[c]=h):l==="vec2u"?void(new Uint32Array(this.buffer,s,2)[c]=h):l==="vec3u"?void(new Uint32Array(this.buffer,s,3)[c]=h):l==="vec4u"?void(new Uint32Array(this.buffer,s,4)[c]=h):void console.error(`SetDataValue: Type ${l} is not a struct`)}}}n=n.postfix}this.setData(e,i,a,s,r)}setData(e,i,n,r,s){const a=n.getTypeName();if(a!=="f32"&&a!=="f16")if(a!=="i32"&&a!=="atomic<i32>"&&a!=="x32")if(a!=="u32"&&a!=="atomic<u32>")if(a!=="bool")if(a!=="vec2f"&&a!=="vec2h")if(a!=="vec3f"&&a!=="vec3h")if(a!=="vec4f"&&a!=="vec4h")if(a!=="vec2i")if(a!=="vec3i")if(a!=="vec4i")if(a!=="vec2u")if(a!=="vec3u")if(a!=="vec4u")if(a!=="vec2b")if(a!=="vec3b")if(a!=="vec4b")if(a!=="mat2x2f"&&a!=="mat2x2h")if(a!=="mat2x3f"&&a!=="mat2x3h")if(a!=="mat2x4f"&&a!=="mat2x4h")if(a!=="mat3x2f"&&a!=="mat3x2h")if(a!=="mat3x3f"&&a!=="mat3x3h")if(a!=="mat3x4f"&&a!=="mat3x4h")if(a!=="mat4x2f"&&a!=="mat4x2h")if(a!=="mat4x3f"&&a!=="mat4x3h")if(a!=="mat4x4f"&&a!=="mat4x4h")if(i instanceof Jn){if(n===i.typeInfo)return void new Uint8Array(this.buffer,r,i.buffer.byteLength).set(new Uint8Array(i.buffer));console.error("SetDataValue: Type mismatch",a,i.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${a}`);else{const o=new Float32Array(this.buffer,r,16);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3],o[4]=i.data[4],o[5]=i.data[5],o[6]=i.data[6],o[7]=i.data[7],o[8]=i.data[8],o[9]=i.data[9],o[10]=i.data[10],o[11]=i.data[11],o[12]=i.data[12],o[13]=i.data[13],o[14]=i.data[14],o[15]=i.data[15]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11],o[12]=i[12],o[13]=i[13],o[14]=i[14],o[15]=i[15])}else{const o=new Float32Array(this.buffer,r,12);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3],o[4]=i.data[4],o[5]=i.data[5],o[6]=i.data[6],o[7]=i.data[7],o[8]=i.data[8],o[9]=i.data[9],o[10]=i.data[10],o[11]=i.data[11]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11])}else{const o=new Float32Array(this.buffer,r,8);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3],o[4]=i.data[4],o[5]=i.data[5],o[6]=i.data[6],o[7]=i.data[7]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7])}else{const o=new Float32Array(this.buffer,r,12);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3],o[4]=i.data[4],o[5]=i.data[5],o[6]=i.data[6],o[7]=i.data[7],o[8]=i.data[8],o[9]=i.data[9],o[10]=i.data[10],o[11]=i.data[11]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8],o[9]=i[9],o[10]=i[10],o[11]=i[11])}else{const o=new Float32Array(this.buffer,r,9);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3],o[4]=i.data[4],o[5]=i.data[5],o[6]=i.data[6],o[7]=i.data[7],o[8]=i.data[8]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7],o[8]=i[8])}else{const o=new Float32Array(this.buffer,r,6);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3],o[4]=i.data[4],o[5]=i.data[5]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5])}else{const o=new Float32Array(this.buffer,r,8);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3],o[4]=i.data[4],o[5]=i.data[5],o[6]=i.data[6],o[7]=i.data[7]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5],o[6]=i[6],o[7]=i[7])}else{const o=new Float32Array(this.buffer,r,6);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3],o[4]=i.data[4],o[5]=i.data[5]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3],o[4]=i[4],o[5]=i[5])}else{const o=new Float32Array(this.buffer,r,4);i instanceof fi?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3])}else{const o=new Uint32Array(this.buffer,r,4);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3])}else{const o=new Uint32Array(this.buffer,r,3);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2]):(o[0]=i[0],o[1]=i[1],o[2]=i[2])}else{const o=new Uint32Array(this.buffer,r,2);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1]):(o[0]=i[0],o[1]=i[1])}else{const o=new Uint32Array(this.buffer,r,4);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3])}else{const o=new Uint32Array(this.buffer,r,3);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2]):(o[0]=i[0],o[1]=i[1],o[2]=i[2])}else{const o=new Uint32Array(this.buffer,r,2);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1]):(o[0]=i[0],o[1]=i[1])}else{const o=new Int32Array(this.buffer,r,4);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3])}else{const o=new Int32Array(this.buffer,r,3);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2]):(o[0]=i[0],o[1]=i[1],o[2]=i[2])}else{const o=new Int32Array(this.buffer,r,2);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1]):(o[0]=i[0],o[1]=i[1])}else{const o=new Float32Array(this.buffer,r,4);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2],o[3]=i.data[3]):(o[0]=i[0],o[1]=i[1],o[2]=i[2],o[3]=i[3])}else{const o=new Float32Array(this.buffer,r,3);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1],o[2]=i.data[2]):(o[0]=i[0],o[1]=i[1],o[2]=i[2])}else{const o=new Float32Array(this.buffer,r,2);i instanceof _t?(o[0]=i.data[0],o[1]=i.data[1]):(o[0]=i[0],o[1]=i[1])}else i instanceof Lt&&(new Int32Array(this.buffer,r,1)[0]=i.value);else i instanceof Lt&&(new Uint32Array(this.buffer,r,1)[0]=i.value);else i instanceof Lt&&(new Int32Array(this.buffer,r,1)[0]=i.value);else i instanceof Lt&&(new Float32Array(this.buffer,r,1)[0]=i.value)}getSubData(e,i,n){var r,s,a;if(i===null)return this;let o=this.offset,l=this.typeInfo;for(;i;){if(i instanceof HA){const h=i.index,A=h instanceof No?e.evalExpression(h,n):h;let m=0;if(A instanceof Lt?m=A.value:typeof A=="number"?m=A:console.error("GetDataValue: Invalid index type",h),l instanceof Ou)o+=m*l.stride,l=l.format;else{const b=l.getTypeName();b==="mat4x4"||b==="mat4x4f"||b==="mat4x4h"?(o+=16*m,l=e.getTypeInfo("vec4f")):console.error(`getDataValue: Type ${l.getTypeName()} is not an array`)}}else{if(!(i instanceof mf))return console.error("GetDataValue: Unknown postfix type",i),null;{const h=i.value;if(l instanceof Tu){let A=!1;for(const m of l.members)if(m.name===h){o+=m.offset,l=m.type,A=!0;break}if(!A)return console.error(`GetDataValue: Member ${h} not found`),null}else if(l instanceof Va){const A=l.getTypeName();if(A==="vec2f"||A==="vec3f"||A==="vec4f"||A==="vec2i"||A==="vec3i"||A==="vec4i"||A==="vec2u"||A==="vec3u"||A==="vec4u"||A==="vec2b"||A==="vec3b"||A==="vec4b"||A==="vec2h"||A==="vec3h"||A==="vec4h"||A==="vec2"||A==="vec3"||A==="vec4"){if(h.length>0&&h.length<5){let m="f";const b=[];for(let S=0;S<h.length;++S){const M=h[S].toLowerCase();let I=0;if(M==="x"||M==="r")I=0;else if(M==="y"||M==="g")I=1;else if(M==="z"||M==="b")I=2;else{if(M!=="w"&&M!=="a")return console.error(`Unknown member ${h}`),null;I=3}if(h.length===1){if(A.endsWith("f"))return this.buffer.byteLength<o+4*I+4?(console.log("Insufficient buffer data"),null):new Lt(new Float32Array(this.buffer,o+4*I,1),e.getTypeInfo("f32"),this);if(A.endsWith("h"))return new Lt(new Float32Array(this.buffer,o+4*I,1),e.getTypeInfo("f16"),this);if(A.endsWith("i"))return new Lt(new Int32Array(this.buffer,o+4*I,1),e.getTypeInfo("i32"),this);if(A.endsWith("b"))return new Lt(new Int32Array(this.buffer,o+4*I,1),e.getTypeInfo("bool"),this);if(A.endsWith("u"))return new Lt(new Uint32Array(this.buffer,o+4*I,1),e.getTypeInfo("i32"),this)}if(A==="vec2f")b.push(new Float32Array(this.buffer,o,2)[I]);else if(A==="vec3f"){if(o+12>=this.buffer.byteLength)return console.log("Insufficient buffer data"),null;const O=new Float32Array(this.buffer,o,3);b.push(O[I])}else if(A==="vec4f")b.push(new Float32Array(this.buffer,o,4)[I]);else if(A==="vec2i")m="i",b.push(new Int32Array(this.buffer,o,2)[I]);else if(A==="vec3i")m="i",b.push(new Int32Array(this.buffer,o,3)[I]);else if(A==="vec4i")m="i",b.push(new Int32Array(this.buffer,o,4)[I]);else if(A==="vec2u"){m="u";const O=new Uint32Array(this.buffer,o,2);b.push(O[I])}else A==="vec3u"?(m="u",b.push(new Uint32Array(this.buffer,o,3)[I])):A==="vec4u"&&(m="u",b.push(new Uint32Array(this.buffer,o,4)[I]))}return b.length===2?l=e.getTypeInfo(`vec2${m}`):b.length===3?l=e.getTypeInfo(`vec3${m}`):b.length===4?l=e.getTypeInfo(`vec4${m}`):console.error(`GetDataValue: Invalid vector length ${b.length}`),new _t(b,l,null)}return console.error(`GetDataValue: Unknown member ${h}`),null}return console.error(`GetDataValue: Type ${A} is not a struct`),null}}}i=i.postfix}const c=l.getTypeName();return c==="f32"?new Lt(new Float32Array(this.buffer,o,1),l,this):c==="i32"?new Lt(new Int32Array(this.buffer,o,1),l,this):c==="u32"?new Lt(new Uint32Array(this.buffer,o,1),l,this):c==="vec2f"?new _t(new Float32Array(this.buffer,o,2),l,this):c==="vec3f"?new _t(new Float32Array(this.buffer,o,3),l,this):c==="vec4f"?new _t(new Float32Array(this.buffer,o,4),l,this):c==="vec2i"?new _t(new Int32Array(this.buffer,o,2),l,this):c==="vec3i"?new _t(new Int32Array(this.buffer,o,3),l,this):c==="vec4i"?new _t(new Int32Array(this.buffer,o,4),l,this):c==="vec2u"?new _t(new Uint32Array(this.buffer,o,2),l,this):c==="vec3u"?new _t(new Uint32Array(this.buffer,o,3),l,this):c==="vec4u"?new _t(new Uint32Array(this.buffer,o,4),l,this):l instanceof pf&&l.name==="atomic"?((r=l.format)===null||r===void 0?void 0:r.name)==="u32"?new Lt(new Uint32Array(this.buffer,o,1)[0],l.format,this):((s=l.format)===null||s===void 0?void 0:s.name)==="i32"?new Lt(new Int32Array(this.buffer,o,1)[0],l.format,this):(console.error(`GetDataValue: Invalid atomic format ${(a=l.format)===null||a===void 0?void 0:a.name}`),null):new Jn(this.buffer,l,o,this)}toString(){let e="";if(this.typeInfo instanceof Ou)if(this.typeInfo.format.name==="f32"){const i=new Float32Array(this.buffer,this.offset);e=`[${i[0]}`;for(let n=1;n<i.length;++n)e+=`, ${i[n]}`}else if(this.typeInfo.format.name==="i32"){const i=new Int32Array(this.buffer,this.offset);e=`[${i[0]}`;for(let n=1;n<i.length;++n)e+=`, ${i[n]}`}else if(this.typeInfo.format.name==="u32"){const i=new Uint32Array(this.buffer,this.offset);e=`[${i[0]}`;for(let n=1;n<i.length;++n)e+=`, ${i[n]}`}else if(this.typeInfo.format.name==="vec2f"){const i=new Float32Array(this.buffer,this.offset);e=`[${i[0]}, ${i[1]}]`;for(let n=1;n<i.length/2;++n)e+=`, [${i[2*n]}, ${i[2*n+1]}]`}else if(this.typeInfo.format.name==="vec3f"){const i=new Float32Array(this.buffer,this.offset);e=`[${i[0]}, ${i[1]}, ${i[2]}]`;for(let n=4;n<i.length;n+=4)e+=`, [${i[n]}, ${i[n+1]}, ${i[n+2]}]`}else if(this.typeInfo.format.name==="vec4f"){const i=new Float32Array(this.buffer,this.offset);e=`[${i[0]}, ${i[1]}, ${i[2]}, ${i[3]}]`;for(let n=4;n<i.length;n+=4)e+=`, [${i[n]}, ${i[n+1]}, ${i[n+2]}, ${i[n+3]}]`}else e="[...]";else this.typeInfo instanceof Tu?e+="{...}":e="[...]";return e}}class Tc extends Ya{constructor(e,i,n,r){super(i,null),this.data=e,this.descriptor=n,this.view=r}clone(){return new Tc(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,i;const n=this.descriptor.size;return n instanceof Array&&n.length>0?(e=n[0])!==null&&e!==void 0?e:0:n instanceof Object&&(i=n.width)!==null&&i!==void 0?i:0}get height(){var e,i;const n=this.descriptor.size;return n instanceof Array&&n.length>1?(e=n[1])!==null&&e!==void 0?e:0:n instanceof Object&&(i=n.height)!==null&&i!==void 0?i:0}get depthOrArrayLayers(){var e,i;const n=this.descriptor.size;return n instanceof Array&&n.length>2?(e=n[2])!==null&&e!==void 0?e:0:n instanceof Object&&(i=n.depthOrArrayLayers)!==null&&i!==void 0?i:0}get format(){var e;return this.descriptor&&(e=this.descriptor.format)!==null&&e!==void 0?e:"rgba8unorm"}get sampleCount(){var e;return this.descriptor&&(e=this.descriptor.sampleCount)!==null&&e!==void 0?e:1}get mipLevelCount(){var e;return this.descriptor&&(e=this.descriptor.mipLevelCount)!==null&&e!==void 0?e:1}get dimension(){var e;return this.descriptor&&(e=this.descriptor.dimension)!==null&&e!==void 0?e:"2d"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];const i=[this.width,this.height,this.depthOrArrayLayers];for(let n=0;n<i.length;++n)i[n]=Math.max(1,i[n]>>e);return i}get texelByteSize(){const e=this.format,i=M3[e];return i?i.isDepthStencil?4:i.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){const e=this.format,i=M3[e];return!!i&&i.isDepthStencil}getGpuSize(){const e=this.format,i=M3[e],n=this.width;if(!e||n<=0||!i)return-1;const r=this.height,s=this.depthOrArrayLayers,a=this.dimension;return n/i.blockWidth*(a==="1d"?1:r/i.blockHeight)*i.bytesPerBlock*s}getPixel(e,i,n=0,r=0){const s=this.texelByteSize,a=this.bytesPerRow,o=this.height,l=this.data[r];return Hat(new Uint8Array(l),e,i,n,r,o,a,s,this.format)}setPixel(e,i,n,r,s){const a=this.texelByteSize,o=this.bytesPerRow,l=this.height,c=this.data[r];(function(h,A,m,b,S,M,I,O,D,B){const P=b*(I>>=S)*(M>>=S)+m*I+A*O;switch(D){case"r8unorm":return void cn(h,P,"8unorm",1,B);case"r8snorm":return void cn(h,P,"8snorm",1,B);case"r8uint":return void cn(h,P,"8uint",1,B);case"r8sint":return void cn(h,P,"8sint",1,B);case"rg8unorm":return void cn(h,P,"8unorm",2,B);case"rg8snorm":return void cn(h,P,"8snorm",2,B);case"rg8uint":return void cn(h,P,"8uint",2,B);case"rg8sint":return void cn(h,P,"8sint",2,B);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void cn(h,P,"8unorm",4,B);case"rgba8snorm":return void cn(h,P,"8snorm",4,B);case"rgba8uint":return void cn(h,P,"8uint",4,B);case"rgba8sint":return void cn(h,P,"8sint",4,B);case"r16uint":return void cn(h,P,"16uint",1,B);case"r16sint":return void cn(h,P,"16sint",1,B);case"r16float":return void cn(h,P,"16float",1,B);case"rg16uint":return void cn(h,P,"16uint",2,B);case"rg16sint":return void cn(h,P,"16sint",2,B);case"rg16float":return void cn(h,P,"16float",2,B);case"rgba16uint":return void cn(h,P,"16uint",4,B);case"rgba16sint":return void cn(h,P,"16sint",4,B);case"rgba16float":return void cn(h,P,"16float",4,B);case"r32uint":return void cn(h,P,"32uint",1,B);case"r32sint":return void cn(h,P,"32sint",1,B);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void cn(h,P,"32float",1,B);case"rg32uint":return void cn(h,P,"32uint",2,B);case"rg32sint":return void cn(h,P,"32sint",2,B);case"rg32float":return void cn(h,P,"32float",2,B);case"rgba32uint":return void cn(h,P,"32uint",4,B);case"rgba32sint":return void cn(h,P,"32sint",4,B);case"rgba32float":return void cn(h,P,"32float",4,B);case"rg11b10ufloat":console.error("TODO: rg11b10ufloat not supported for writing")}})(new Uint8Array(c),e,i,n,r,l,o,a,this.format,s)}}(t=>{t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(kt||(kt={}));class jt{constructor(e,i,n){this.name=e,this.type=i,this.rule=n}toString(){return this.name}}class ht{}qt=ht,ht.none=new jt("",kt.reserved,""),ht.eof=new jt("EOF",kt.token,""),ht.reserved={asm:new jt("asm",kt.reserved,"asm"),bf16:new jt("bf16",kt.reserved,"bf16"),do:new jt("do",kt.reserved,"do"),enum:new jt("enum",kt.reserved,"enum"),f16:new jt("f16",kt.reserved,"f16"),f64:new jt("f64",kt.reserved,"f64"),handle:new jt("handle",kt.reserved,"handle"),i8:new jt("i8",kt.reserved,"i8"),i16:new jt("i16",kt.reserved,"i16"),i64:new jt("i64",kt.reserved,"i64"),mat:new jt("mat",kt.reserved,"mat"),premerge:new jt("premerge",kt.reserved,"premerge"),regardless:new jt("regardless",kt.reserved,"regardless"),typedef:new jt("typedef",kt.reserved,"typedef"),u8:new jt("u8",kt.reserved,"u8"),u16:new jt("u16",kt.reserved,"u16"),u64:new jt("u64",kt.reserved,"u64"),unless:new jt("unless",kt.reserved,"unless"),using:new jt("using",kt.reserved,"using"),vec:new jt("vec",kt.reserved,"vec"),void:new jt("void",kt.reserved,"void")},ht.keywords={array:new jt("array",kt.keyword,"array"),atomic:new jt("atomic",kt.keyword,"atomic"),bool:new jt("bool",kt.keyword,"bool"),f32:new jt("f32",kt.keyword,"f32"),i32:new jt("i32",kt.keyword,"i32"),mat2x2:new jt("mat2x2",kt.keyword,"mat2x2"),mat2x3:new jt("mat2x3",kt.keyword,"mat2x3"),mat2x4:new jt("mat2x4",kt.keyword,"mat2x4"),mat3x2:new jt("mat3x2",kt.keyword,"mat3x2"),mat3x3:new jt("mat3x3",kt.keyword,"mat3x3"),mat3x4:new jt("mat3x4",kt.keyword,"mat3x4"),mat4x2:new jt("mat4x2",kt.keyword,"mat4x2"),mat4x3:new jt("mat4x3",kt.keyword,"mat4x3"),mat4x4:new jt("mat4x4",kt.keyword,"mat4x4"),ptr:new jt("ptr",kt.keyword,"ptr"),sampler:new jt("sampler",kt.keyword,"sampler"),sampler_comparison:new jt("sampler_comparison",kt.keyword,"sampler_comparison"),struct:new jt("struct",kt.keyword,"struct"),texture_1d:new jt("texture_1d",kt.keyword,"texture_1d"),texture_2d:new jt("texture_2d",kt.keyword,"texture_2d"),texture_2d_array:new jt("texture_2d_array",kt.keyword,"texture_2d_array"),texture_3d:new jt("texture_3d",kt.keyword,"texture_3d"),texture_cube:new jt("texture_cube",kt.keyword,"texture_cube"),texture_cube_array:new jt("texture_cube_array",kt.keyword,"texture_cube_array"),texture_multisampled_2d:new jt("texture_multisampled_2d",kt.keyword,"texture_multisampled_2d"),texture_storage_1d:new jt("texture_storage_1d",kt.keyword,"texture_storage_1d"),texture_storage_2d:new jt("texture_storage_2d",kt.keyword,"texture_storage_2d"),texture_storage_2d_array:new jt("texture_storage_2d_array",kt.keyword,"texture_storage_2d_array"),texture_storage_3d:new jt("texture_storage_3d",kt.keyword,"texture_storage_3d"),texture_depth_2d:new jt("texture_depth_2d",kt.keyword,"texture_depth_2d"),texture_depth_2d_array:new jt("texture_depth_2d_array",kt.keyword,"texture_depth_2d_array"),texture_depth_cube:new jt("texture_depth_cube",kt.keyword,"texture_depth_cube"),texture_depth_cube_array:new jt("texture_depth_cube_array",kt.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new jt("texture_depth_multisampled_2d",kt.keyword,"texture_depth_multisampled_2d"),texture_external:new jt("texture_external",kt.keyword,"texture_external"),u32:new jt("u32",kt.keyword,"u32"),vec2:new jt("vec2",kt.keyword,"vec2"),vec3:new jt("vec3",kt.keyword,"vec3"),vec4:new jt("vec4",kt.keyword,"vec4"),bitcast:new jt("bitcast",kt.keyword,"bitcast"),block:new jt("block",kt.keyword,"block"),break:new jt("break",kt.keyword,"break"),case:new jt("case",kt.keyword,"case"),continue:new jt("continue",kt.keyword,"continue"),continuing:new jt("continuing",kt.keyword,"continuing"),default:new jt("default",kt.keyword,"default"),diagnostic:new jt("diagnostic",kt.keyword,"diagnostic"),discard:new jt("discard",kt.keyword,"discard"),else:new jt("else",kt.keyword,"else"),enable:new jt("enable",kt.keyword,"enable"),fallthrough:new jt("fallthrough",kt.keyword,"fallthrough"),false:new jt("false",kt.keyword,"false"),fn:new jt("fn",kt.keyword,"fn"),for:new jt("for",kt.keyword,"for"),function:new jt("function",kt.keyword,"function"),if:new jt("if",kt.keyword,"if"),let:new jt("let",kt.keyword,"let"),const:new jt("const",kt.keyword,"const"),loop:new jt("loop",kt.keyword,"loop"),while:new jt("while",kt.keyword,"while"),private:new jt("private",kt.keyword,"private"),read:new jt("read",kt.keyword,"read"),read_write:new jt("read_write",kt.keyword,"read_write"),return:new jt("return",kt.keyword,"return"),requires:new jt("requires",kt.keyword,"requires"),storage:new jt("storage",kt.keyword,"storage"),switch:new jt("switch",kt.keyword,"switch"),true:new jt("true",kt.keyword,"true"),alias:new jt("alias",kt.keyword,"alias"),type:new jt("type",kt.keyword,"type"),uniform:new jt("uniform",kt.keyword,"uniform"),var:new jt("var",kt.keyword,"var"),override:new jt("override",kt.keyword,"override"),workgroup:new jt("workgroup",kt.keyword,"workgroup"),write:new jt("write",kt.keyword,"write"),r8unorm:new jt("r8unorm",kt.keyword,"r8unorm"),r8snorm:new jt("r8snorm",kt.keyword,"r8snorm"),r8uint:new jt("r8uint",kt.keyword,"r8uint"),r8sint:new jt("r8sint",kt.keyword,"r8sint"),r16uint:new jt("r16uint",kt.keyword,"r16uint"),r16sint:new jt("r16sint",kt.keyword,"r16sint"),r16float:new jt("r16float",kt.keyword,"r16float"),rg8unorm:new jt("rg8unorm",kt.keyword,"rg8unorm"),rg8snorm:new jt("rg8snorm",kt.keyword,"rg8snorm"),rg8uint:new jt("rg8uint",kt.keyword,"rg8uint"),rg8sint:new jt("rg8sint",kt.keyword,"rg8sint"),r32uint:new jt("r32uint",kt.keyword,"r32uint"),r32sint:new jt("r32sint",kt.keyword,"r32sint"),r32float:new jt("r32float",kt.keyword,"r32float"),rg16uint:new jt("rg16uint",kt.keyword,"rg16uint"),rg16sint:new jt("rg16sint",kt.keyword,"rg16sint"),rg16float:new jt("rg16float",kt.keyword,"rg16float"),rgba8unorm:new jt("rgba8unorm",kt.keyword,"rgba8unorm"),rgba8unorm_srgb:new jt("rgba8unorm_srgb",kt.keyword,"rgba8unorm_srgb"),rgba8snorm:new jt("rgba8snorm",kt.keyword,"rgba8snorm"),rgba8uint:new jt("rgba8uint",kt.keyword,"rgba8uint"),rgba8sint:new jt("rgba8sint",kt.keyword,"rgba8sint"),bgra8unorm:new jt("bgra8unorm",kt.keyword,"bgra8unorm"),bgra8unorm_srgb:new jt("bgra8unorm_srgb",kt.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new jt("rgb10a2unorm",kt.keyword,"rgb10a2unorm"),rg11b10float:new jt("rg11b10float",kt.keyword,"rg11b10float"),rg32uint:new jt("rg32uint",kt.keyword,"rg32uint"),rg32sint:new jt("rg32sint",kt.keyword,"rg32sint"),rg32float:new jt("rg32float",kt.keyword,"rg32float"),rgba16uint:new jt("rgba16uint",kt.keyword,"rgba16uint"),rgba16sint:new jt("rgba16sint",kt.keyword,"rgba16sint"),rgba16float:new jt("rgba16float",kt.keyword,"rgba16float"),rgba32uint:new jt("rgba32uint",kt.keyword,"rgba32uint"),rgba32sint:new jt("rgba32sint",kt.keyword,"rgba32sint"),rgba32float:new jt("rgba32float",kt.keyword,"rgba32float"),static_assert:new jt("static_assert",kt.keyword,"static_assert")},ht.tokens={decimal_float_literal:new jt("decimal_float_literal",kt.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new jt("hex_float_literal",kt.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new jt("int_literal",kt.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new jt("uint_literal",kt.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new jt("name",kt.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new jt("ident",kt.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new jt("and",kt.token,"&"),and_and:new jt("and_and",kt.token,"&&"),arrow:new jt("arrow ",kt.token,"->"),attr:new jt("attr",kt.token,"@"),forward_slash:new jt("forward_slash",kt.token,"/"),bang:new jt("bang",kt.token,"!"),bracket_left:new jt("bracket_left",kt.token,"["),bracket_right:new jt("bracket_right",kt.token,"]"),brace_left:new jt("brace_left",kt.token,"{"),brace_right:new jt("brace_right",kt.token,"}"),colon:new jt("colon",kt.token,":"),comma:new jt("comma",kt.token,","),equal:new jt("equal",kt.token,"="),equal_equal:new jt("equal_equal",kt.token,"=="),not_equal:new jt("not_equal",kt.token,"!="),greater_than:new jt("greater_than",kt.token,">"),greater_than_equal:new jt("greater_than_equal",kt.token,">="),shift_right:new jt("shift_right",kt.token,">>"),less_than:new jt("less_than",kt.token,"<"),less_than_equal:new jt("less_than_equal",kt.token,"<="),shift_left:new jt("shift_left",kt.token,"<<"),modulo:new jt("modulo",kt.token,"%"),minus:new jt("minus",kt.token,"-"),minus_minus:new jt("minus_minus",kt.token,"--"),period:new jt("period",kt.token,"."),plus:new jt("plus",kt.token,"+"),plus_plus:new jt("plus_plus",kt.token,"++"),or:new jt("or",kt.token,"|"),or_or:new jt("or_or",kt.token,"||"),paren_left:new jt("paren_left",kt.token,"("),paren_right:new jt("paren_right",kt.token,")"),semicolon:new jt("semicolon",kt.token,";"),star:new jt("star",kt.token,"*"),tilde:new jt("tilde",kt.token,"~"),underscore:new jt("underscore",kt.token,"_"),xor:new jt("xor",kt.token,"^"),plus_equal:new jt("plus_equal",kt.token,"+="),minus_equal:new jt("minus_equal",kt.token,"-="),times_equal:new jt("times_equal",kt.token,"*="),division_equal:new jt("division_equal",kt.token,"/="),modulo_equal:new jt("modulo_equal",kt.token,"%="),and_equal:new jt("and_equal",kt.token,"&="),or_equal:new jt("or_equal",kt.token,"|="),xor_equal:new jt("xor_equal",kt.token,"^="),shift_right_equal:new jt("shift_right_equal",kt.token,">>="),shift_left_equal:new jt("shift_left_equal",kt.token,"<<=")},ht.simpleTokens={"@":qt.tokens.attr,"{":qt.tokens.brace_left,"}":qt.tokens.brace_right,":":qt.tokens.colon,",":qt.tokens.comma,"(":qt.tokens.paren_left,")":qt.tokens.paren_right,";":qt.tokens.semicolon},ht.literalTokens={"&":qt.tokens.and,"&&":qt.tokens.and_and,"->":qt.tokens.arrow,"/":qt.tokens.forward_slash,"!":qt.tokens.bang,"[":qt.tokens.bracket_left,"]":qt.tokens.bracket_right,"=":qt.tokens.equal,"==":qt.tokens.equal_equal,"!=":qt.tokens.not_equal,">":qt.tokens.greater_than,">=":qt.tokens.greater_than_equal,">>":qt.tokens.shift_right,"<":qt.tokens.less_than,"<=":qt.tokens.less_than_equal,"<<":qt.tokens.shift_left,"%":qt.tokens.modulo,"-":qt.tokens.minus,"--":qt.tokens.minus_minus,".":qt.tokens.period,"+":qt.tokens.plus,"++":qt.tokens.plus_plus,"|":qt.tokens.or,"||":qt.tokens.or_or,"*":qt.tokens.star,"~":qt.tokens.tilde,_:qt.tokens.underscore,"^":qt.tokens.xor,"+=":qt.tokens.plus_equal,"-=":qt.tokens.minus_equal,"*=":qt.tokens.times_equal,"/=":qt.tokens.division_equal,"%=":qt.tokens.modulo_equal,"&=":qt.tokens.and_equal,"|=":qt.tokens.or_equal,"^=":qt.tokens.xor_equal,">>=":qt.tokens.shift_right_equal,"<<=":qt.tokens.shift_left_equal},ht.regexTokens={decimal_float_literal:qt.tokens.decimal_float_literal,hex_float_literal:qt.tokens.hex_float_literal,int_literal:qt.tokens.int_literal,uint_literal:qt.tokens.uint_literal,ident:qt.tokens.ident},ht.storage_class=[qt.keywords.function,qt.keywords.private,qt.keywords.workgroup,qt.keywords.uniform,qt.keywords.storage],ht.access_mode=[qt.keywords.read,qt.keywords.write,qt.keywords.read_write],ht.sampler_type=[qt.keywords.sampler,qt.keywords.sampler_comparison],ht.sampled_texture_type=[qt.keywords.texture_1d,qt.keywords.texture_2d,qt.keywords.texture_2d_array,qt.keywords.texture_3d,qt.keywords.texture_cube,qt.keywords.texture_cube_array],ht.multisampled_texture_type=[qt.keywords.texture_multisampled_2d],ht.storage_texture_type=[qt.keywords.texture_storage_1d,qt.keywords.texture_storage_2d,qt.keywords.texture_storage_2d_array,qt.keywords.texture_storage_3d],ht.depth_texture_type=[qt.keywords.texture_depth_2d,qt.keywords.texture_depth_2d_array,qt.keywords.texture_depth_cube,qt.keywords.texture_depth_cube_array,qt.keywords.texture_depth_multisampled_2d],ht.texture_external_type=[qt.keywords.texture_external],ht.any_texture_type=[...qt.sampled_texture_type,...qt.multisampled_texture_type,...qt.storage_texture_type,...qt.depth_texture_type,...qt.texture_external_type],ht.texel_format=[qt.keywords.r8unorm,qt.keywords.r8snorm,qt.keywords.r8uint,qt.keywords.r8sint,qt.keywords.r16uint,qt.keywords.r16sint,qt.keywords.r16float,qt.keywords.rg8unorm,qt.keywords.rg8snorm,qt.keywords.rg8uint,qt.keywords.rg8sint,qt.keywords.r32uint,qt.keywords.r32sint,qt.keywords.r32float,qt.keywords.rg16uint,qt.keywords.rg16sint,qt.keywords.rg16float,qt.keywords.rgba8unorm,qt.keywords.rgba8unorm_srgb,qt.keywords.rgba8snorm,qt.keywords.rgba8uint,qt.keywords.rgba8sint,qt.keywords.bgra8unorm,qt.keywords.bgra8unorm_srgb,qt.keywords.rgb10a2unorm,qt.keywords.rg11b10float,qt.keywords.rg32uint,qt.keywords.rg32sint,qt.keywords.rg32float,qt.keywords.rgba16uint,qt.keywords.rgba16sint,qt.keywords.rgba16float,qt.keywords.rgba32uint,qt.keywords.rgba32sint,qt.keywords.rgba32float],ht.const_literal=[qt.tokens.int_literal,qt.tokens.uint_literal,qt.tokens.decimal_float_literal,qt.tokens.hex_float_literal,qt.keywords.true,qt.keywords.false],ht.literal_or_ident=[qt.tokens.ident,qt.tokens.int_literal,qt.tokens.uint_literal,qt.tokens.decimal_float_literal,qt.tokens.hex_float_literal,qt.tokens.name],ht.element_count_expression=[qt.tokens.int_literal,qt.tokens.uint_literal,qt.tokens.ident],ht.template_types=[qt.keywords.vec2,qt.keywords.vec3,qt.keywords.vec4,qt.keywords.mat2x2,qt.keywords.mat2x3,qt.keywords.mat2x4,qt.keywords.mat3x2,qt.keywords.mat3x3,qt.keywords.mat3x4,qt.keywords.mat4x2,qt.keywords.mat4x3,qt.keywords.mat4x4,qt.keywords.atomic,qt.keywords.bitcast,...qt.any_texture_type],ht.attribute_name=[qt.tokens.ident,qt.keywords.block,qt.keywords.diagnostic],ht.assignment_operators=[qt.tokens.equal,qt.tokens.plus_equal,qt.tokens.minus_equal,qt.tokens.times_equal,qt.tokens.division_equal,qt.tokens.modulo_equal,qt.tokens.and_equal,qt.tokens.or_equal,qt.tokens.xor_equal,qt.tokens.shift_right_equal,qt.tokens.shift_left_equal],ht.increment_operators=[qt.tokens.plus_plus,qt.tokens.minus_minus];class iF{constructor(e,i,n,r,s){this.type=e,this.lexeme=i,this.line=n,this.start=r,this.end=s}toString(){return this.lexeme}isTemplateType(){return ht.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==ht.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}}class Zat{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new iF(ht.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if(this._peekAhead()=="*"){this._advance();let a=1;for(;a>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),a--,a==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),a++)}return!0}}const i=ht.simpleTokens[e];if(i)return this._addToken(i),!0;let n=ht.none;const r=this._isAlpha(e),s=e==="_";if(this._isAlphaNumeric(e)){let a=this._peekAhead();for(;this._isAlphaNumeric(a);)e+=this._advance(),a=this._peekAhead()}if(r){const a=ht.keywords[e];if(a)return this._addToken(a),!0}if(r||s)return this._addToken(ht.tokens.ident),!0;for(;;){let a=this._findType(e);const o=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(o=="=")return this._current++,e+=o,this._addToken(ht.tokens.minus_equal),!0;if(o=="-")return this._current++,e+=o,this._addToken(ht.tokens.minus_minus),!0;const l=this._tokens.length-1;if((ht.literal_or_ident.indexOf(this._tokens[l].type)!=-1||this._tokens[l].type==ht.tokens.paren_right)&&o!=">")return this._addToken(a),!0}if(e==">"&&(o==">"||o=="=")){let l=!1,c=this._tokens.length-1;for(let h=0;h<5&&c>=0&&ht.assignment_operators.indexOf(this._tokens[c].type)===-1;++h,--c)if(this._tokens[c].type===ht.tokens.less_than){c>0&&this._tokens[c-1].isArrayOrTemplateType()&&(l=!0);break}if(l)return this._addToken(a),!0}if(a===ht.none){let l=e,c=0;const h=2;for(let A=0;A<h;++A)if(l+=this._peekAhead(A),a=this._findType(l),a!==ht.none){c=A;break}if(a===ht.none)return n!==ht.none&&(this._current--,this._addToken(n),!0);e=l,this._current+=c+1}if(n=a,this._isAtEnd())break;e+=this._advance()}return n!==ht.none&&(this._addToken(n),!0)}_findType(e){for(const n in ht.regexTokens){const r=ht.regexTokens[n];if(this._match(e,r.rule))return r}return ht.literalTokens[e]||ht.none}_match(e,i){const n=i.exec(e);return n&&n.index==0&&n[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&e!=="_"&&e!=="."&&e!=="("&&e!==")"&&e!=="["&&e!=="]"&&e!=="{"&&e!=="}"&&e!==","&&e!==";"&&e!==":"&&e!=="="&&e!=="!"&&e!=="<"&&e!==">"&&e!=="+"&&e!=="-"&&e!=="*"&&e!=="/"&&e!=="%"&&e!=="&"&&e!=="|"&&e!=="^"&&e!=="~"&&e!=="@"&&e!=="#"&&e!=="?"&&e!=="'"&&e!=="`"&&e!=='"'&&e!=="\\"&&e!==`
`&&e!=="\r"&&e!=="	"&&e!=="\0"}_isNumeric(e){return e>="0"&&e<="9"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||e==="_"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let i=this._source[this._current];return e=e||0,e++,this._current+=e,i}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){const i=this._source.substring(this._start,this._current);this._tokens.push(new iF(e,i,this._line,this._start,this._current))}}function De(t){return Array.isArray(t)||(t==null?void 0:t.buffer)instanceof ArrayBuffer}const c2=new Float32Array(1),Jat=new Uint32Array(c2.buffer),tot=new Uint32Array(c2.buffer),u2=new Int32Array(1),eot=new Float32Array(u2.buffer),iot=new Uint32Array(u2.buffer),h2=new Uint32Array(1),not=new Float32Array(h2.buffer),rot=new Int32Array(h2.buffer);function nF(t,e,i){if(e===i)return t;if(e==="f32"){if(i==="i32"||i==="x32")return c2[0]=t,Jat[0];if(i==="u32")return c2[0]=t,tot[0]}else if(e==="i32"||e==="x32"){if(i==="f32")return u2[0]=t,eot[0];if(i==="u32")return u2[0]=t,iot[0]}else if(e==="u32"){if(i==="f32")return h2[0]=t,not[0];if(i==="i32"||i==="x32")return h2[0]=t,rot[0]}return console.error(`Unsupported cast from ${e} to ${i}`),t}class sot{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}}class Wb{constructor(e,i){this.align=e,this.size=i}}class sl{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new Vat,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}updateAST(e){for(const i of e)i instanceof p_&&this._functions.set(i.name,new sot(i));for(const i of e)if(i instanceof vc){const n=this.getTypeInfo(i,null);n instanceof Tu&&this.structs.push(n)}for(const i of e)if(i instanceof NB)this.aliases.push(this._getAliasInfo(i));else if(i instanceof PB){const n=i,r=this._getAttributeNum(n.attributes,"id",0),s=n.type!=null?this.getTypeInfo(n.type,n.attributes):null;this.overrides.push(new kat(n.name,s,n.attributes,r))}else if(this._isUniformVar(i)){const n=i,r=this._getAttributeNum(n.attributes,"group",0),s=this._getAttributeNum(n.attributes,"binding",0),a=this.getTypeInfo(n.type,n.attributes),o=new $b(n.name,a,r,s,n.attributes,mu.Uniform,n.access);o.access||(o.access="read"),this.uniforms.push(o)}else if(this._isStorageVar(i)){const n=i,r=this._getAttributeNum(n.attributes,"group",0),s=this._getAttributeNum(n.attributes,"binding",0),a=this.getTypeInfo(n.type,n.attributes),o=this._isStorageTexture(a),l=new $b(n.name,a,r,s,n.attributes,o?mu.StorageTexture:mu.Storage,n.access);l.access||(l.access="read"),this.storage.push(l)}else if(this._isTextureVar(i)){const n=i,r=this._getAttributeNum(n.attributes,"group",0),s=this._getAttributeNum(n.attributes,"binding",0),a=this.getTypeInfo(n.type,n.attributes),o=this._isStorageTexture(a),l=new $b(n.name,a,r,s,n.attributes,o?mu.StorageTexture:mu.Texture,n.access);l.access||(l.access="read"),o?this.storage.push(l):this.textures.push(l)}else if(this._isSamplerVar(i)){const n=i,r=this._getAttributeNum(n.attributes,"group",0),s=this._getAttributeNum(n.attributes,"binding",0),a=this.getTypeInfo(n.type,n.attributes),o=new $b(n.name,a,r,s,n.attributes,mu.Sampler,n.access);this.samplers.push(o)}for(const i of e)if(i instanceof p_){const n=this._getAttribute(i,"vertex"),r=this._getAttribute(i,"fragment"),s=this._getAttribute(i,"compute"),a=n||r||s,o=new zat(i.name,a==null?void 0:a.name,i.attributes);o.attributes=i.attributes,o.startLine=i.startLine,o.endLine=i.endLine,this.functions.push(o),this._functions.get(i.name).info=o,a&&(this._functions.get(i.name).inUse=!0,o.inUse=!0,o.resources=this._findResources(i,!!a),o.inputs=this._getInputs(i.args),o.outputs=this._getOutputs(i.returnType),this.entry[a.name].push(o)),o.arguments=i.args.map(l=>new jat(l.name,this.getTypeInfo(l.type,l.attributes),l.attributes)),o.returnType=i.returnType?this.getTypeInfo(i.returnType,i.attributes):null}for(const i of this._functions.values())i.info&&(i.info.inUse=i.inUse,this._addCalls(i.node,i.info.calls));for(const i of this._functions.values())i.node.search(n=>{var r,s,a;if(n instanceof Qz){if(n.value)if(De(n.value))for(const o of n.value)for(const l of this.overrides)o===l.name&&((r=i.info)===null||r===void 0||r.overrides.push(l));else for(const o of this.overrides)n.value===o.name&&((s=i.info)===null||s===void 0||s.overrides.push(o))}else if(n instanceof pa)for(const o of this.overrides)n.name===o.name&&((a=i.info)===null||a===void 0||a.overrides.push(o))});for(const i of this.uniforms)this._markStructsInUse(i.type);for(const i of this.storage)this._markStructsInUse(i.type)}getStructInfo(e){for(const i of this.structs)if(i.name==e)return i;return null}getOverrideInfo(e){for(const i of this.overrides)if(i.name==e)return i;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(const i of e.members)this._markStructsInUse(i.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{const i=this._getAlias(e.name);i&&this._markStructsInUse(i)}}_addCalls(e,i){var n;for(const r of e.calls){const s=(n=this._functions.get(r.name))===null||n===void 0?void 0:n.info;s&&i.add(s)}}findResource(e,i,n){if(n){for(const r of this.entry.compute)if(r.name===n){for(const s of r.resources)if(s.group==e&&s.binding==i)return s}for(const r of this.entry.vertex)if(r.name===n){for(const s of r.resources)if(s.group==e&&s.binding==i)return s}for(const r of this.entry.fragment)if(r.name===n){for(const s of r.resources)if(s.group==e&&s.binding==i)return s}}for(const r of this.uniforms)if(r.group==e&&r.binding==i)return r;for(const r of this.storage)if(r.group==e&&r.binding==i)return r;for(const r of this.textures)if(r.group==e&&r.binding==i)return r;for(const r of this.samplers)if(r.group==e&&r.binding==i)return r;return null}_findResource(e){for(const i of this.uniforms)if(i.name==e)return i;for(const i of this.storage)if(i.name==e)return i;for(const i of this.textures)if(i.name==e)return i;for(const i of this.samplers)if(i.name==e)return i;return null}_markStructsFromAST(e){const i=this.getTypeInfo(e,null);this._markStructsInUse(i)}_findResources(e,i){const n=[],r=this,s=[];return e.search(a=>{if(a instanceof o2)s.push({});else if(a instanceof l2)s.pop();else if(a instanceof Mc){const o=a;i&&o.type!==null&&this._markStructsFromAST(o.type),s.length>0&&(s[s.length-1][o.name]=o)}else if(a instanceof Zo){const o=a;i&&o.type!==null&&this._markStructsFromAST(o.type)}else if(a instanceof Jm){const o=a;i&&o.type!==null&&this._markStructsFromAST(o.type),s.length>0&&(s[s.length-1][o.name]=o)}else if(a instanceof pa){const o=a;if(s.length>0&&s[s.length-1][o.name])return;const l=r._findResource(o.name);l&&n.push(l)}else if(a instanceof FB){const o=a,l=r._functions.get(o.name);l&&(i&&(l.inUse=!0),e.calls.add(l.node),l.resources===null&&(l.resources=r._findResources(l.node,i)),n.push(...l.resources))}else if(a instanceof xB){const o=a,l=r._functions.get(o.name);l&&(i&&(l.inUse=!0),e.calls.add(l.node),l.resources===null&&(l.resources=r._findResources(l.node,i)),n.push(...l.resources))}}),[...new Map(n.map(a=>[a.name,a])).values()]}getBindGroups(){const e=[];function i(n,r){n>=e.length&&(e.length=n+1),e[n]===void 0&&(e[n]=[]),r>=e[n].length&&(e[n].length=r+1)}for(const n of this.uniforms)i(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.storage)i(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.textures)i(n.group,n.binding),e[n.group][n.binding]=n;for(const n of this.samplers)i(n.group,n.binding),e[n.group][n.binding]=n;return e}_getOutputs(e,i=void 0){if(i===void 0&&(i=[]),e instanceof vc)this._getStructOutputs(e,i);else{const n=this._getOutputInfo(e);n!==null&&i.push(n)}return i}_getStructOutputs(e,i){for(const n of e.members)if(n.type instanceof vc)this._getStructOutputs(n.type,i);else{const r=this._getAttribute(n,"location")||this._getAttribute(n,"builtin");if(r!==null){const s=this.getTypeInfo(n.type,n.type.attributes),a=this._parseInt(r.value),o=new K8(n.name,s,r.name,a);i.push(o)}}}_getOutputInfo(e){const i=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(i!==null){const n=this.getTypeInfo(e,e.attributes),r=this._parseInt(i.value);return new K8("",n,i.name,r)}return null}_getInputs(e,i=void 0){i===void 0&&(i=[]);for(const n of e)if(n.type instanceof vc)this._getStructInputs(n.type,i);else{const r=this._getInputInfo(n);r!==null&&i.push(r)}return i}_getStructInputs(e,i){for(const n of e.members)if(n.type instanceof vc)this._getStructInputs(n.type,i);else{const r=this._getInputInfo(n);r!==null&&i.push(r)}}_getInputInfo(e){const i=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(i!==null){const n=this._getAttribute(e,"interpolation"),r=this.getTypeInfo(e.type,e.attributes),s=this._parseInt(i.value),a=new Uat(e.name,r,i.name,s);return n!==null&&(a.interpolation=this._parseString(n.value)),a}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);const i=parseInt(e);return isNaN(i)?e:i}_getAlias(e){for(const i of this.aliases)if(i.name==e)return i.type;return null}_getAliasInfo(e){return new Lat(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(const i of this.structs)if(i.name==e)return i;for(const i of this.aliases)if(i.name==e)return i.type;return null}getTypeInfo(e,i=null){if(this._types.has(e))return this._types.get(e);if(e instanceof _v){const r=e.type?this.getTypeInfo(e.type,e.attributes):null,s=new GM(e.name,r,i);return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof t_){const r=e,s=r.format?this.getTypeInfo(r.format,r.attributes):null,a=new Ou(r.name,i);return a.format=s,a.count=r.count,this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof vc){const r=e,s=new Tu(r.name,i);s.startLine=r.startLine,s.endLine=r.endLine;for(const a of r.members){const o=this.getTypeInfo(a.type,a.attributes);s.members.push(new Q8(a.name,o,a.attributes))}return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof Lm){const r=e,s=r.format instanceof le,a=r.format?s?this.getTypeInfo(r.format,null):new Va(r.format,null):null,o=new pf(r.name,a,i,r.access);return this._types.set(e,o),this._updateTypeInfo(o),o}if(e instanceof Wt){const r=e,s=r.format?this.getTypeInfo(r.format,null):null,a=new pf(r.name,s,i,r.access);return this._types.set(e,a),this._updateTypeInfo(a),a}const n=new Va(e.name,i);return this._types.set(e,n),this._updateTypeInfo(n),n}_updateTypeInfo(e){var i,n,r;const s=this._getTypeSize(e);if(e.size=(i=s==null?void 0:s.size)!==null&&i!==void 0?i:0,e instanceof Ou&&e.format){const a=this._getTypeSize(e.format);e.stride=Math.max((n=a==null?void 0:a.size)!==null&&n!==void 0?n:0,(r=a==null?void 0:a.align)!==null&&r!==void 0?r:0),this._updateTypeInfo(e.format)}e instanceof GM&&this._updateTypeInfo(e.format),e instanceof Tu&&this._updateStructInfo(e)}_updateStructInfo(e){var i;let n=0,r=0,s=0,a=0;for(let o=0,l=e.members.length;o<l;++o){const c=e.members[o],h=this._getTypeSize(c);if(!h)continue;(i=this._getAlias(c.type.name))!==null&&i!==void 0||c.type;const A=h.align,m=h.size;n=this._roundUp(A,n+r),r=m,s=n,a=Math.max(a,A),c.offset=n,c.size=m,this._updateTypeInfo(c.type)}e.size=this._roundUp(a,s+r),e.align=a}_getTypeSize(e){var i,n;if(e==null)return null;const r=this._getAttributeNum(e.attributes,"size",0),s=this._getAttributeNum(e.attributes,"align",0);if(e instanceof Q8&&(e=e.type),e instanceof Va){const a=this._getAlias(e.name);a!==null&&(e=a)}{const a=sl._typeInfo[e.name];if(a!==void 0){const o=((i=e.format)===null||i===void 0?void 0:i.name)==="f16"?2:1;return new Wb(Math.max(s,a.align/o),Math.max(r,a.size/o))}}{const a=sl._typeInfo[e.name.substring(0,e.name.length-1)];if(a){const o=e.name[e.name.length-1]==="h"?2:1;return new Wb(Math.max(s,a.align/o),Math.max(r,a.size/o))}}if(e instanceof Ou){let a=e,o=8,l=8;const c=this._getTypeSize(a.format);return c!==null&&(l=c.size,o=c.align),l=a.count*this._getAttributeNum((n=e==null?void 0:e.attributes)!==null&&n!==void 0?n:null,"stride",this._roundUp(o,l)),r&&(l=r),new Wb(Math.max(s,o),Math.max(r,l))}if(e instanceof Tu){let a=0,o=0,l=0,c=0,h=0;for(const A of e.members){const m=this._getTypeSize(A.type);m!==null&&(a=Math.max(m.align,a),l=this._roundUp(m.align,l+c),c=m.size,h=l)}return o=this._roundUp(a,h+c),new Wb(Math.max(s,a),Math.max(r,o))}return null}_isUniformVar(e){return e instanceof Mc&&e.storage=="uniform"}_isStorageVar(e){return e instanceof Mc&&e.storage=="storage"}_isTextureVar(e){return e instanceof Mc&&e.type!==null&&sl._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof Mc&&e.type!==null&&sl._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,i){const n=e;if(!n||!n.attributes)return null;const r=n.attributes;for(let s of r)if(s.name==i)return s;return null}_getAttributeNum(e,i,n){if(e===null)return n;for(let r of e)if(r.name==i){let s=r!==null&&r.value!==null?r.value:n;return s instanceof Array&&(s=s[0]),typeof s=="number"?s:typeof s=="string"?parseInt(s):n}return n}_roundUp(e,i){return Math.ceil(i/e)*e}}sl._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},sl._textureTypes=ht.any_texture_type.map(t=>t.name),sl._samplerTypes=ht.sampler_type.map(t=>t.name);let LB=0;class UB{constructor(e,i,n){this.id=LB++,this.name=e,this.value=i,this.node=n}clone(){return new UB(this.name,this.value,this.node)}}class kB{constructor(e){this.id=LB++,this.name=e.name,this.node=e}clone(){return new kB(this.node)}}class jB{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",this.id=LB++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var i;return this.variables.has(e)?(i=this.variables.get(e))!==null&&i!==void 0?i:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var i;return this.functions.has(e)?(i=this.functions.get(e))!==null&&i!==void 0?i:null:this.parent?this.parent.getFunction(e):null}createVariable(e,i,n){this.variables.set(e,new UB(e,i,n??null))}setVariable(e,i,n){const r=this.getVariable(e);r!==null?r.value=i:this.createVariable(e,i,n)}getVariableValue(e){var i;const n=this.getVariable(e);return(i=n==null?void 0:n.value)!==null&&i!==void 0?i:null}clone(){return new jB(this)}}class aot{evalExpression(e,i){return null}getTypeInfo(e){return null}getVariableName(e,i){return""}}class oot{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,i){const n=this.exec.evalExpression(e.args[0],i);let r=!0;if(n instanceof _t)return n.data.forEach(s=>{s||(r=!1)}),new Lt(r?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t){const r=n.data.some(s=>s);return new Lt(r?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,i){const n=this.exec.evalExpression(e.args[2],i);if(!(n instanceof Lt))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return n.value?this.exec.evalExpression(e.args[1],i):this.exec.evalExpression(e.args[0],i)}ArrayLength(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.evalExpression(n,i);if(r instanceof Jn&&r.typeInfo.size===0){const s=r.typeInfo,a=r.buffer.byteLength/s.stride;return new Lt(a,this.getTypeInfo("u32"))}return new Lt(r.typeInfo.size,this.getTypeInfo("u32"))}Abs(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.abs(s)),n.typeInfo);const r=n;return new Lt(Math.abs(r.value),r.typeInfo)}Acos(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.acos(s)),n.typeInfo);const r=n;return new Lt(Math.acos(r.value),n.typeInfo)}Acosh(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.acosh(s)),n.typeInfo);const r=n;return new Lt(Math.acosh(r.value),n.typeInfo)}Asin(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.asin(s)),n.typeInfo);const r=n;return new Lt(Math.asin(r.value),n.typeInfo)}Asinh(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.asinh(s)),n.typeInfo);const r=n;return new Lt(Math.asinh(r.value),n.typeInfo)}Atan(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.atan(s)),n.typeInfo);const r=n;return new Lt(Math.atan(r.value),n.typeInfo)}Atanh(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.atanh(s)),n.typeInfo);const r=n;return new Lt(Math.atanh(r.value),n.typeInfo)}Atan2(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(n instanceof _t&&r instanceof _t)return new _t(n.data.map((o,l)=>Math.atan2(o,r.data[l])),n.typeInfo);const s=n,a=r;return new Lt(Math.atan2(s.value,a.value),n.typeInfo)}Ceil(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.ceil(s)),n.typeInfo);const r=n;return new Lt(Math.ceil(r.value),n.typeInfo)}_clamp(e,i,n){return Math.min(Math.max(e,i),n)}Clamp(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i),s=this.exec.evalExpression(e.args[2],i);if(n instanceof _t&&r instanceof _t&&s instanceof _t)return new _t(n.data.map((c,h)=>this._clamp(c,r.data[h],s.data[h])),n.typeInfo);const a=n,o=r,l=s;return new Lt(this._clamp(a.value,o.value,l.value),n.typeInfo)}Cos(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.cos(s)),n.typeInfo);const r=n;return new Lt(Math.cos(r.value),n.typeInfo)}Cosh(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.cosh(s)),n.typeInfo);const r=n;return new Lt(Math.cos(r.value),n.typeInfo)}CountLeadingZeros(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.clz32(s)),n.typeInfo);const r=n;return new Lt(Math.clz32(r.value),n.typeInfo)}_countOneBits(e){let i=0;for(;e!==0;)1&e&&i++,e>>=1;return i}CountOneBits(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>this._countOneBits(s)),n.typeInfo);const r=n;return new Lt(this._countOneBits(r.value),n.typeInfo)}_countTrailingZeros(e){if(e===0)return 32;let i=0;for(;!(1&e);)e>>=1,i++;return i}CountTrailingZeros(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>this._countTrailingZeros(s)),n.typeInfo);const r=n;return new Lt(this._countTrailingZeros(r.value),n.typeInfo)}Cross(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(n instanceof _t&&r instanceof _t){if(n.data.length!==3||r.data.length!==3)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;const s=n.data,a=r.data;return new _t([s[1]*a[2]-a[1]*s[2],s[2]*a[0]-a[2]*s[0],s[0]*a[1]-a[0]*s[1]],n.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,i){const n=this.exec.evalExpression(e.args[0],i),r=180/Math.PI;return n instanceof _t?new _t(n.data.map(s=>s*r),n.typeInfo):new Lt(n.value*r,this.getTypeInfo("f32"))}Determinant(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof fi){const r=n.data,s=n.typeInfo.getTypeName(),a=s.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if(s==="mat2x2"||s==="mat2x2f"||s==="mat2x2h")return new Lt(r[0]*r[3]-r[1]*r[2],a);if(s==="mat2x3"||s==="mat2x3f"||s==="mat2x3h")return new Lt(r[0]*(r[4]*r[8]-r[5]*r[7])-r[1]*(r[3]*r[8]-r[5]*r[6])+r[2]*(r[3]*r[7]-r[4]*r[6]),a);if(s==="mat2x4"||s==="mat2x4f"||s==="mat2x4h")console.error(`TODO: Determinant for ${s}`);else if(s==="mat3x2"||s==="mat3x2f"||s==="mat3x2h")console.error(`TODO: Determinant for ${s}`);else{if(s==="mat3x3"||s==="mat3x3f"||s==="mat3x3h")return new Lt(r[0]*(r[4]*r[8]-r[5]*r[7])-r[1]*(r[3]*r[8]-r[5]*r[6])+r[2]*(r[3]*r[7]-r[4]*r[6]),a);s==="mat3x4"||s==="mat3x4f"||s==="mat3x4h"||s==="mat4x2"||s==="mat4x2f"||s==="mat4x2h"||s==="mat4x3"||s==="mat4x3f"||s==="mat4x3h"?console.error(`TODO: Determinant for ${s}`):s!=="mat4x4"&&s!=="mat4x4f"&&s!=="mat4x4h"||console.error(`TODO: Determinant for ${s}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(n instanceof _t&&r instanceof _t){let o=0;for(let l=0;l<n.data.length;++l)o+=(n.data[l]-r.data[l])*(n.data[l]-r.data[l]);return new Lt(Math.sqrt(o),this.getTypeInfo("f32"))}const s=n,a=r;return new Lt(Math.abs(s.value-a.value),n.typeInfo)}_dot(e,i){let n=0;for(let r=0;r<e.length;++r)n+=i[r]*e[r];return n}Dot(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);return n instanceof _t&&r instanceof _t?new Lt(this._dot(n.data,r.data),this.getTypeInfo("f32")):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,i){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,i){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.exp(s)),n.typeInfo);const r=n;return new Lt(Math.exp(r.value),n.typeInfo)}Exp2(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.pow(2,s)),n.typeInfo);const r=n;return new Lt(Math.pow(2,r.value),n.typeInfo)}ExtractBits(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i),s=this.exec.evalExpression(e.args[2],i);if(r.typeInfo.name!=="u32"&&r.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;const a=r.value,o=s.value;if(n instanceof _t)return new _t(n.data.map(c=>c>>a&(1<<o)-1),n.typeInfo);if(n.typeInfo.name!=="i32"&&n.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;const l=n.value;return new Lt(l>>a&(1<<o)-1,this.getTypeInfo("i32"))}FaceForward(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i),s=this.exec.evalExpression(e.args[2],i);if(n instanceof _t&&r instanceof _t&&s instanceof _t){const a=this._dot(r.data,s.data);return new _t(a<0?Array.from(n.data):n.data.map(o=>-o),n.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return e===0?-1:31-Math.clz32(e)}FirstLeadingBit(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>this._firstLeadingBit(s)),n.typeInfo);const r=n;return new Lt(this._firstLeadingBit(r.value),n.typeInfo)}_firstTrailingBit(e){return e===0?-1:Math.log2(e&-e)}FirstTrailingBit(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>this._firstTrailingBit(s)),n.typeInfo);const r=n;return new Lt(this._firstTrailingBit(r.value),n.typeInfo)}Floor(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.floor(s)),n.typeInfo);const r=n;return new Lt(Math.floor(r.value),n.typeInfo)}Fma(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i),s=this.exec.evalExpression(e.args[2],i);if(n instanceof _t&&r instanceof _t&&s instanceof _t)return n.data.length!==r.data.length||n.data.length!==s.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new _t(n.data.map((c,h)=>c*r.data[h]+s.data[h]),n.typeInfo);const a=n,o=r,l=s;return new Lt(a.value*o.value+l.value,a.typeInfo)}Fract(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>s-Math.floor(s)),n.typeInfo);const r=n;return new Lt(r.value-Math.floor(r.value),n.typeInfo)}Frexp(e,i){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i),s=this.exec.evalExpression(e.args[2],i),a=this.exec.evalExpression(e.args[3],i);if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;const o=s.value,l=(1<<a.value)-1<<o,c=~l;if(n instanceof _t&&r instanceof _t)return new _t(n.data.map((m,b)=>m&c|r.data[b]<<o&l),n.typeInfo);const h=n.value,A=r.value;return new Lt(h&c|A<<o&l,n.typeInfo)}InverseSqrt(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>1/Math.sqrt(s)),n.typeInfo);const r=n;return new Lt(1/Math.sqrt(r.value),n.typeInfo)}Ldexp(e,i){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t){let s=0;return n.data.forEach(a=>{s+=a*a}),new Lt(Math.sqrt(s),this.getTypeInfo("f32"))}const r=n;return new Lt(Math.abs(r.value),n.typeInfo)}Log(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.log(s)),n.typeInfo);const r=n;return new Lt(Math.log(r.value),n.typeInfo)}Log2(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.log2(s)),n.typeInfo);const r=n;return new Lt(Math.log2(r.value),n.typeInfo)}Max(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(n instanceof _t&&r instanceof _t)return new _t(n.data.map((o,l)=>Math.max(o,r.data[l])),n.typeInfo);const s=n,a=r;return new Lt(Math.max(s.value,a.value),n.typeInfo)}Min(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(n instanceof _t&&r instanceof _t)return new _t(n.data.map((o,l)=>Math.min(o,r.data[l])),n.typeInfo);const s=n,a=r;return new Lt(Math.min(s.value,a.value),n.typeInfo)}Mix(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i),s=this.exec.evalExpression(e.args[2],i);if(n instanceof _t&&r instanceof _t&&s instanceof _t)return new _t(n.data.map((l,c)=>n.data[c]*(1-s.data[c])+r.data[c]*s.data[c]),n.typeInfo);const a=r,o=s;return new Lt(n.value*(1-o.value)+a.value*o.value,n.typeInfo)}Modf(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(n instanceof _t&&r instanceof _t)return new _t(n.data.map((a,o)=>a%r.data[o]),n.typeInfo);const s=r;return new Lt(n.value%s.value,n.typeInfo)}Normalize(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t){const r=this.Length(e,i).value;return new _t(n.data.map(s=>s/r),n.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(n instanceof _t&&r instanceof _t)return new _t(n.data.map((o,l)=>Math.pow(o,r.data[l])),n.typeInfo);const s=n,a=r;return new Lt(Math.pow(s.value,a.value),n.typeInfo)}QuantizeToF16(e,i){const n=this.exec.evalExpression(e.args[0],i);return n instanceof _t?new _t(n.data.map(r=>r),n.typeInfo):new Lt(n.value,n.typeInfo)}Radians(e,i){const n=this.exec.evalExpression(e.args[0],i);return n instanceof _t?new _t(n.data.map(r=>r*Math.PI/180),n.typeInfo):new Lt(n.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(e,i){let n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(n instanceof _t&&r instanceof _t){const s=this._dot(n.data,r.data);return new _t(n.data.map((a,o)=>a-2*s*r.data[o]),n.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,i){let n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i),s=this.exec.evalExpression(e.args[2],i);if(n instanceof _t&&r instanceof _t&&s instanceof Lt){const a=this._dot(r.data,n.data);return new _t(n.data.map((o,l)=>{const c=1-s.value*s.value*(1-a*a);if(c<0)return 0;const h=Math.sqrt(c);return s.value*o-(s.value*a+h)*r.data[l]}),n.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,i){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.round(s)),n.typeInfo);const r=n;return new Lt(Math.round(r.value),n.typeInfo)}Saturate(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.min(Math.max(s,0),1)),n.typeInfo);const r=n;return new Lt(Math.min(Math.max(r.value,0),1),n.typeInfo)}Sign(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.sign(s)),n.typeInfo);const r=n;return new Lt(Math.sign(r.value),n.typeInfo)}Sin(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.sin(s)),n.typeInfo);const r=n;return new Lt(Math.sin(r.value),n.typeInfo)}Sinh(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.sinh(s)),n.typeInfo);const r=n;return new Lt(Math.sinh(r.value),n.typeInfo)}_smoothstep(e,i,n){const r=Math.min(Math.max((n-e)/(i-e),0),1);return r*r*(3-2*r)}SmoothStep(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i),s=this.exec.evalExpression(e.args[2],i);if(s instanceof _t&&n instanceof _t&&r instanceof _t)return new _t(s.data.map((c,h)=>this._smoothstep(n.data[h],r.data[h],c)),s.typeInfo);const a=n,o=r,l=s;return new Lt(this._smoothstep(a.value,o.value,l.value),s.typeInfo)}Sqrt(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.sqrt(s)),n.typeInfo);const r=n;return new Lt(Math.sqrt(r.value),n.typeInfo)}Step(e,i){const n=this.exec.evalExpression(e.args[0],i),r=this.exec.evalExpression(e.args[1],i);if(r instanceof _t&&n instanceof _t)return new _t(r.data.map((a,o)=>a<n.data[o]?0:1),r.typeInfo);const s=n;return new Lt(r.value<s.value?0:1,s.typeInfo)}Tan(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.tan(s)),n.typeInfo);const r=n;return new Lt(Math.tan(r.value),n.typeInfo)}Tanh(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.tanh(s)),n.typeInfo);const r=n;return new Lt(Math.tanh(r.value),n.typeInfo)}_getTransposeType(e){const i=e.getTypeName();return i==="mat2x2f"||i==="mat2x2h"?e:i==="mat2x3f"?this.getTypeInfo("mat3x2f"):i==="mat2x3h"?this.getTypeInfo("mat3x2h"):i==="mat2x4f"?this.getTypeInfo("mat4x2f"):i==="mat2x4h"?this.getTypeInfo("mat4x2h"):i==="mat3x2f"?this.getTypeInfo("mat2x3f"):i==="mat3x2h"?this.getTypeInfo("mat2x3h"):i==="mat3x3f"||i==="mat3x3h"?e:i==="mat3x4f"?this.getTypeInfo("mat4x3f"):i==="mat3x4h"?this.getTypeInfo("mat4x3h"):i==="mat4x2f"?this.getTypeInfo("mat2x4f"):i==="mat4x2h"?this.getTypeInfo("mat2x4h"):i==="mat4x3f"?this.getTypeInfo("mat3x4f"):i==="mat4x3h"?this.getTypeInfo("mat3x4h"):(i==="mat4x4f"||i==="mat4x4h"||console.error(`Invalid matrix type ${i}`),e)}Transpose(e,i){const n=this.exec.evalExpression(e.args[0],i);if(!(n instanceof fi))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;const r=this._getTransposeType(n.typeInfo);if(n.typeInfo.name==="mat2x2"||n.typeInfo.name==="mat2x2f"||n.typeInfo.name==="mat2x2h"){const s=n.data;return new fi([s[0],s[2],s[1],s[3]],r)}if(n.typeInfo.name==="mat2x3"||n.typeInfo.name==="mat2x3f"||n.typeInfo.name==="mat2x3h"){const s=n.data;return new fi([s[0],s[3],s[6],s[1],s[4],s[7]],r)}if(n.typeInfo.name==="mat2x4"||n.typeInfo.name==="mat2x4f"||n.typeInfo.name==="mat2x4h"){const s=n.data;return new fi([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13]],r)}if(n.typeInfo.name==="mat3x2"||n.typeInfo.name==="mat3x2f"||n.typeInfo.name==="mat3x2h"){const s=n.data;return new fi([s[0],s[3],s[1],s[4],s[2],s[5]],r)}if(n.typeInfo.name==="mat3x3"||n.typeInfo.name==="mat3x3f"||n.typeInfo.name==="mat3x3h"){const s=n.data;return new fi([s[0],s[3],s[6],s[1],s[4],s[7],s[2],s[5],s[8]],r)}if(n.typeInfo.name==="mat3x4"||n.typeInfo.name==="mat3x4f"||n.typeInfo.name==="mat3x4h"){const s=n.data;return new fi([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14]],r)}if(n.typeInfo.name==="mat4x2"||n.typeInfo.name==="mat4x2f"||n.typeInfo.name==="mat4x2h"){const s=n.data;return new fi([s[0],s[4],s[1],s[5],s[2],s[6]],r)}if(n.typeInfo.name==="mat4x3"||n.typeInfo.name==="mat4x3f"||n.typeInfo.name==="mat4x3h"){const s=n.data;return new fi([s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]],r)}if(n.typeInfo.name==="mat4x4"||n.typeInfo.name==="mat4x4f"||n.typeInfo.name==="mat4x4h"){const s=n.data;return new fi([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14],s[3],s[7],s[11],s[15]],r)}return console.error(`Invalid matrix type ${n.typeInfo.name}`),null}Trunc(e,i){const n=this.exec.evalExpression(e.args[0],i);if(n instanceof _t)return new _t(n.data.map(s=>Math.trunc(s)),n.typeInfo);const r=n;return new Lt(Math.trunc(r.value),n.typeInfo)}Dpdx(e,i){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,i){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,i){return console.error("TODO: dpdxFine"),null}Dpdy(e,i){return console.error("TODO: dpdy"),null}DpdyCoarse(e,i){return console.error("TODO: dpdyCoarse"),null}DpdyFine(e,i){return console.error("TODO: dpdyFine"),null}Fwidth(e,i){return console.error("TODO: fwidth"),null}FwidthCoarse(e,i){return console.error("TODO: fwidthCoarse"),null}FwidthFine(e,i){return console.error("TODO: fwidthFine"),null}TextureDimensions(e,i){const n=e.args[0],r=e.args.length>1?this.exec.evalExpression(e.args[1],i).value:0;if(n instanceof pa){const s=n.name,a=i.getVariableValue(s);if(a instanceof Tc){if(r<0||r>=a.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;const o=a.getMipLevelSize(r),l=a.dimension;return l==="1d"?new Lt(o[0],this.getTypeInfo("u32")):l==="3d"?new _t(o,this.getTypeInfo("vec3u")):l==="2d"?new _t(o.slice(0,2),this.getTypeInfo("vec2u")):(console.error(`Invalid texture dimension ${l} not found. Line ${e.line}`),null)}return console.error(`Texture ${s} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,i){return console.error("TODO: textureGather"),null}TextureGatherCompare(e,i){return console.error("TODO: textureGatherCompare"),null}TextureLoad(e,i){const n=e.args[0],r=this.exec.evalExpression(e.args[1],i),s=e.args.length>2?this.exec.evalExpression(e.args[2],i).value:0;if(!(r instanceof _t)||r.data.length!==2)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(n instanceof pa){const a=n.name,o=i.getVariableValue(a);if(o instanceof Tc){const l=Math.floor(r.data[0]),c=Math.floor(r.data[1]);if(l<0||l>=o.width||c<0||c>=o.height)return console.error(`Texture ${a} out of bounds. Line ${e.line}`),null;const h=o.getPixel(l,c,0,s);return h===null?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new _t(h,this.getTypeInfo("vec4f"))}return console.error(`Texture ${a} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,i){const n=e.args[0];if(n instanceof pa){const r=n.name,s=i.getVariableValue(r);return s instanceof Tc?new Lt(s.depthOrArrayLayers,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,i){const n=e.args[0];if(n instanceof pa){const r=n.name,s=i.getVariableValue(r);return s instanceof Tc?new Lt(s.mipLevelCount,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,i){const n=e.args[0];if(n instanceof pa){const r=n.name,s=i.getVariableValue(r);return s instanceof Tc?new Lt(s.sampleCount,this.getTypeInfo("u32")):(console.error(`Texture ${r} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,i){return console.error("TODO: textureSample"),null}TextureSampleBias(e,i){return console.error("TODO: textureSampleBias"),null}TextureSampleCompare(e,i){return console.error("TODO: textureSampleCompare"),null}TextureSampleCompareLevel(e,i){return console.error("TODO: textureSampleCompareLevel"),null}TextureSampleGrad(e,i){return console.error("TODO: textureSampleGrad"),null}TextureSampleLevel(e,i){return console.error("TODO: textureSampleLevel"),null}TextureSampleBaseClampToEdge(e,i){return console.error("TODO: textureSampleBaseClampToEdge"),null}TextureStore(e,i){const n=e.args[0],r=this.exec.evalExpression(e.args[1],i),s=e.args.length===4?this.exec.evalExpression(e.args[2],i).value:0,a=e.args.length===4?this.exec.evalExpression(e.args[3],i).data:this.exec.evalExpression(e.args[2],i).data;if(a.length!==4)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(r instanceof _t)||r.data.length!==2)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(n instanceof pa){const o=n.name,l=i.getVariableValue(o);if(l instanceof Tc){const c=l.getMipLevelSize(0),h=Math.floor(r.data[0]),A=Math.floor(r.data[1]);return h<0||h>=c[0]||A<0||A>=c[1]?(console.error(`Texture ${o} out of bounds. Line ${e.line}`),null):(l.setPixel(h,A,0,s,Array.from(a)),null)}return console.error(`Texture ${o} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i);return i.getVariable(r).value.getSubData(this.exec,n.postfix,i)}AtomicStore(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i);return l instanceof Lt&&o instanceof Lt&&(l.value=o.value),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),null}AtomicAdd(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i),c=new Lt(l.value,l.typeInfo);return l instanceof Lt&&o instanceof Lt&&(l.value+=o.value),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),c}AtomicSub(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i),c=new Lt(l.value,l.typeInfo);return l instanceof Lt&&o instanceof Lt&&(l.value-=o.value),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),c}AtomicMax(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i),c=new Lt(l.value,l.typeInfo);return l instanceof Lt&&o instanceof Lt&&(l.value=Math.max(l.value,o.value)),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),c}AtomicMin(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i),c=new Lt(l.value,l.typeInfo);return l instanceof Lt&&o instanceof Lt&&(l.value=Math.min(l.value,o.value)),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),c}AtomicAnd(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i),c=new Lt(l.value,l.typeInfo);return l instanceof Lt&&o instanceof Lt&&(l.value=l.value&o.value),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),c}AtomicOr(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i),c=new Lt(l.value,l.typeInfo);return l instanceof Lt&&o instanceof Lt&&(l.value=l.value|o.value),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),c}AtomicXor(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i),c=new Lt(l.value,l.typeInfo);return l instanceof Lt&&o instanceof Lt&&(l.value=l.value^o.value),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),c}AtomicExchange(e,i){let n=e.args[0];n instanceof dr&&(n=n.right);const r=this.exec.getVariableName(n,i),s=i.getVariable(r);let a=e.args[1];const o=this.exec.evalExpression(a,i),l=s.value.getSubData(this.exec,n.postfix,i),c=new Lt(l.value,l.typeInfo);return l instanceof Lt&&o instanceof Lt&&(l.value=o.value),s.value instanceof Jn&&s.value.setDataValue(this.exec,l,n.postfix,i),c}AtomicCompareExchangeWeak(e,i){return console.error("TODO: atomicCompareExchangeWeak"),null}Pack4x8snorm(e,i){return console.error("TODO: pack4x8snorm"),null}Pack4x8unorm(e,i){return console.error("TODO: pack4x8unorm"),null}Pack4xI8(e,i){return console.error("TODO: pack4xI8"),null}Pack4xU8(e,i){return console.error("TODO: pack4xU8"),null}Pack4x8Clamp(e,i){return console.error("TODO: pack4x8Clamp"),null}Pack4xU8Clamp(e,i){return console.error("TODO: pack4xU8Clamp"),null}Pack2x16snorm(e,i){return console.error("TODO: pack2x16snorm"),null}Pack2x16unorm(e,i){return console.error("TODO: pack2x16unorm"),null}Pack2x16float(e,i){return console.error("TODO: pack2x16float"),null}Unpack4x8snorm(e,i){return console.error("TODO: unpack4x8snorm"),null}Unpack4x8unorm(e,i){return console.error("TODO: unpack4x8unorm"),null}Unpack4xI8(e,i){return console.error("TODO: unpack4xI8"),null}Unpack4xU8(e,i){return console.error("TODO: unpack4xU8"),null}Unpack2x16snorm(e,i){return console.error("TODO: unpack2x16snorm"),null}Unpack2x16unorm(e,i){return console.error("TODO: unpack2x16unorm"),null}Unpack2x16float(e,i){return console.error("TODO: unpack2x16float"),null}StorageBarrier(e,i){return null}TextureBarrier(e,i){return null}WorkgroupBarrier(e,i){return null}WorkgroupUniformLoad(e,i){return null}SubgroupAdd(e,i){return console.error("TODO: subgroupAdd"),null}SubgroupExclusiveAdd(e,i){return console.error("TODO: subgroupExclusiveAdd"),null}SubgroupInclusiveAdd(e,i){return console.error("TODO: subgroupInclusiveAdd"),null}SubgroupAll(e,i){return console.error("TODO: subgroupAll"),null}SubgroupAnd(e,i){return console.error("TODO: subgroupAnd"),null}SubgroupAny(e,i){return console.error("TODO: subgroupAny"),null}SubgroupBallot(e,i){return console.error("TODO: subgroupBallot"),null}SubgroupBroadcast(e,i){return console.error("TODO: subgroupBroadcast"),null}SubgroupBroadcastFirst(e,i){return console.error("TODO: subgroupBroadcastFirst"),null}SubgroupElect(e,i){return console.error("TODO: subgroupElect"),null}SubgroupMax(e,i){return console.error("TODO: subgroupMax"),null}SubgroupMin(e,i){return console.error("TODO: subgroupMin"),null}SubgroupMul(e,i){return console.error("TODO: subgroupMul"),null}SubgroupExclusiveMul(e,i){return console.error("TODO: subgroupExclusiveMul"),null}SubgroupInclusiveMul(e,i){return console.error("TODO: subgroupInclusiveMul"),null}SubgroupOr(e,i){return console.error("TODO: subgroupOr"),null}SubgroupShuffle(e,i){return console.error("TODO: subgroupShuffle"),null}SubgroupShuffleDown(e,i){return console.error("TODO: subgroupShuffleDown"),null}SubgroupShuffleUp(e,i){return console.error("TODO: subgroupShuffleUp"),null}SubgroupShuffleXor(e,i){return console.error("TODO: subgroupShuffleXor"),null}SubgroupXor(e,i){return console.error("TODO: subgroupXor"),null}QuadBroadcast(e,i){return console.error("TODO: quadBroadcast"),null}QuadSwapDiagonal(e,i){return console.error("TODO: quadSwapDiagonal"),null}QuadSwapX(e,i){return console.error("TODO: quadSwapX"),null}QuadSwapY(e,i){return console.error("TODO: quadSwapY"),null}}const I3={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},As={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]};class ns extends aot{constructor(e,i){var n;super(),this.ast=e??[],this.reflection=new sl,this.reflection.updateAST(this.ast),this.context=(n=i==null?void 0:i.clone())!==null&&n!==void 0?n:new jB,this.builtins=new oot(this),this.typeInfo={bool:this.getTypeInfo(le.bool),i32:this.getTypeInfo(le.i32),u32:this.getTypeInfo(le.u32),f32:this.getTypeInfo(le.f32),f16:this.getTypeInfo(le.f16),vec2f:this.getTypeInfo(Wt.vec2f),vec2u:this.getTypeInfo(Wt.vec2u),vec2i:this.getTypeInfo(Wt.vec2i),vec2h:this.getTypeInfo(Wt.vec2h),vec3f:this.getTypeInfo(Wt.vec3f),vec3u:this.getTypeInfo(Wt.vec3u),vec3i:this.getTypeInfo(Wt.vec3i),vec3h:this.getTypeInfo(Wt.vec3h),vec4f:this.getTypeInfo(Wt.vec4f),vec4u:this.getTypeInfo(Wt.vec4u),vec4i:this.getTypeInfo(Wt.vec4i),vec4h:this.getTypeInfo(Wt.vec4h),mat2x2f:this.getTypeInfo(Wt.mat2x2f),mat2x3f:this.getTypeInfo(Wt.mat2x3f),mat2x4f:this.getTypeInfo(Wt.mat2x4f),mat3x2f:this.getTypeInfo(Wt.mat3x2f),mat3x3f:this.getTypeInfo(Wt.mat3x3f),mat3x4f:this.getTypeInfo(Wt.mat3x4f),mat4x2f:this.getTypeInfo(Wt.mat4x2f),mat4x3f:this.getTypeInfo(Wt.mat4x3f),mat4x4f:this.getTypeInfo(Wt.mat4x4f)}}getVariableValue(e){var i,n;const r=(n=(i=this.context.getVariable(e))===null||i===void 0?void 0:i.value)!==null&&n!==void 0?n:null;if(r===null)return null;if(r instanceof Lt)return r.value;if(r instanceof _t||r instanceof fi)return Array.from(r.data);if(r instanceof Jn&&r.typeInfo instanceof Ou){if(r.typeInfo.format.name==="u32")return Array.from(new Uint32Array(r.buffer,r.offset,r.typeInfo.count));if(r.typeInfo.format.name==="i32")return Array.from(new Int32Array(r.buffer,r.offset,r.typeInfo.count));if(r.typeInfo.format.name==="f32")return Array.from(new Float32Array(r.buffer,r.offset,r.typeInfo.count))}return console.error(`Unsupported return variable type ${r.typeInfo.name}`),null}execute(e){(e=e??{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,i,n,r){const s=this.context.clone();(r=r??{}).constants&&this._setOverrides(r.constants,s),this._execStatements(this.ast,s);const a=s.getFunction(e);if(!a)return void console.error(`Function ${e} not found`);if(typeof i=="number")i=[i,1,1];else{if(i.length===0)return void console.error("Invalid dispatch count");i.length===1?i=[i[0],1,1]:i.length===2?i=[i[0],i[1],1]:i.length>3&&(i=[i[0],i[1],i[2]])}const o=i[0],l=i[1],c=i[2],h=this.getTypeInfo("vec3u");s.setVariable("@num_workgroups",new _t(i,h));for(const A in n)for(const m in n[A]){const b=n[A][m];s.variables.forEach(S=>{var M;const I=S.node;if(I!=null&&I.attributes){let O=null,D=null;for(const B of I.attributes)B.name==="binding"?O=B.value:B.name==="group"&&(D=B.value);if(m==O&&A==D)if(b.texture!==void 0&&b.descriptor!==void 0){const B=new Tc(b.texture,this.getTypeInfo(I.type),b.descriptor,(M=b.texture.view)!==null&&M!==void 0?M:null);S.value=B}else b.uniform!==void 0?S.value=new Jn(b.uniform,this.getTypeInfo(I.type)):S.value=new Jn(b,this.getTypeInfo(I.type))}})}for(let A=0;A<c;++A)for(let m=0;m<l;++m)for(let b=0;b<o;++b)s.setVariable("@workgroup_id",new _t([b,m,A],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(a,[b,m,A],s)}execStatement(e,i){if(e instanceof jz)return this.evalExpression(e.value,i);if(e instanceof Vz){if(e.condition){const n=this.evalExpression(e.condition,i);if(!(n instanceof Lt))throw new Error("Invalid break-if condition");if(!n.value)return null}return ns._breakObj}if(e instanceof $z)return ns._continueObj;if(e instanceof Jm)this._let(e,i);else if(e instanceof Mc)this._var(e,i);else if(e instanceof pv)this._const(e,i);else if(e instanceof p_)this._function(e,i);else{if(e instanceof kz)return this._if(e,i);if(e instanceof Uz)return this._switch(e,i);if(e instanceof xz)return this._for(e,i);if(e instanceof Pz)return this._while(e,i);if(e instanceof Lz)return this._loop(e,i);if(e instanceof XM){const n=i.clone();return n.currentFunctionName=i.currentFunctionName,this._execStatements(e.body,n)}if(e instanceof Fz)this._assign(e,i);else if(e instanceof Nz)this._increment(e,i);else{if(e instanceof vc)return null;if(e instanceof PB){const n=e.name;i.getVariable(n)===null&&i.setVariable(n,new Lt(0,this.getTypeInfo("u32")))}else if(e instanceof xB)this._call(e,i);else{if(e instanceof zz||e instanceof NB)return null;console.error("Invalid statement type.",e,`Line ${e.line}`)}}}return null}evalExpression(e,i){return e instanceof To?this._evalBinaryOp(e,i):e instanceof _r?this._evalLiteral(e,i):e instanceof pa?this._evalVariable(e,i):e instanceof FB?this._evalCall(e,i):e instanceof Zo?this._evalCreate(e,i):e instanceof Wz?this._evalConst(e,i):e instanceof Hz?this._evalBitcast(e,i):e instanceof dr?this._evalUnaryOp(e,i):(console.error("Invalid expression type",e,`Line ${e.line}`),null)}getTypeInfo(e){var i;if(e instanceof le){const r=this.reflection.getTypeInfo(e);if(r!==null)return r}let n=(i=this.typeInfo[e])!==null&&i!==void 0?i:null;return n!==null||(n=this.reflection.getTypeInfoByName(e)),n}_setOverrides(e,i){for(const n in e){const r=e[n],s=this.reflection.getOverrideInfo(n);s!==null?(s.type===null&&(s.type=this.getTypeInfo("u32")),s.type.name==="u32"||s.type.name==="i32"||s.type.name==="f32"||s.type.name==="f16"?i.setVariable(n,new Lt(r,s.type)):s.type.name==="bool"?i.setVariable(n,new Lt(r?1:0,s.type)):s.type.name==="vec2"||s.type.name==="vec3"||s.type.name==="vec4"||s.type.name==="vec2f"||s.type.name==="vec3f"||s.type.name==="vec4f"||s.type.name==="vec2i"||s.type.name==="vec3i"||s.type.name==="vec4i"||s.type.name==="vec2u"||s.type.name==="vec3u"||s.type.name==="vec4u"||s.type.name==="vec2h"||s.type.name==="vec3h"||s.type.name==="vec4h"?i.setVariable(n,new _t(r,s.type)):console.error(`Invalid constant type for ${n}`)):console.error(`Override ${n} does not exist in the shader.`)}}_dispatchWorkgroup(e,i,n){const r=[1,1,1];for(const h of e.node.attributes)if(h.name==="workgroup_size"){if(h.value.length>0){const A=n.getVariableValue(h.value[0]);r[0]=A instanceof Lt?A.value:parseInt(h.value[0])}if(h.value.length>1){const A=n.getVariableValue(h.value[1]);r[1]=A instanceof Lt?A.value:parseInt(h.value[1])}if(h.value.length>2){const A=n.getVariableValue(h.value[2]);r[2]=A instanceof Lt?A.value:parseInt(h.value[2])}}const s=this.getTypeInfo("vec3u"),a=this.getTypeInfo("u32");n.setVariable("@workgroup_size",new _t(r,s));const o=r[0],l=r[1],c=r[2];for(let h=0,A=0;h<c;++h)for(let m=0;m<l;++m)for(let b=0;b<o;++b,++A){const S=[b,m,h],M=[b+i[0]*r[0],m+i[1]*r[1],h+i[2]*r[2]];n.setVariable("@local_invocation_id",new _t(S,s)),n.setVariable("@global_invocation_id",new _t(M,s)),n.setVariable("@local_invocation_index",new Lt(A,a)),this._dispatchExec(e,n)}}_dispatchExec(e,i){for(const n of e.node.args)for(const r of n.attributes)if(r.name==="builtin"){const s=`@${r.value}`,a=i.getVariable(s);a!==void 0&&i.variables.set(n.name,a)}this._execStatements(e.node.body,i)}getVariableName(e,i){for(;e instanceof dr;)e=e.right;return e instanceof pa?e.name:(console.error("Unknown variable type",e,"Line",e.line),null)}_execStatements(e,i){for(const n of e){if(n instanceof Array){const s=i.clone(),a=this._execStatements(n,s);if(a)return a;continue}const r=this.execStatement(n,i);if(r)return r}return null}_call(e,i){const n=i.clone();n.currentFunctionName=e.name;const r=i.getFunction(e.name);if(r){for(let s=0;s<r.node.args.length;++s){const a=r.node.args[s],o=this.evalExpression(e.args[s],n);n.setVariable(a.name,o,a)}this._execStatements(r.node.body,n)}else e.isBuiltin?this._callBuiltinFunction(e,n):this.getTypeInfo(e.name)&&this._evalCreate(e,i)}_increment(e,i){const n=this.getVariableName(e.variable,i),r=i.getVariable(n);r?e.operator==="++"?r.value instanceof Lt?r.value.value++:console.error(`Variable ${n} is not a scalar. Line ${e.line}`):e.operator==="--"?r.value instanceof Lt?r.value.value--:console.error(`Variable ${n} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${n} not found. Line ${e.line}`)}_getVariableData(e,i){if(e instanceof pa){const n=this.getVariableName(e,i),r=i.getVariable(n);return r===null?(console.error(`Variable ${n} not found. Line ${e.line}`),null):r.value.getSubData(this,e.postfix,i)}if(e instanceof dr){if(e.operator==="*"){const n=this._getVariableData(e.right,i);return n instanceof Wd?n.reference.getSubData(this,e.postfix,i):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if(e.operator==="&"){const n=this._getVariableData(e.right,i);return new Wd(n)}}return null}_assign(e,i){let n=null,r="<var>",s=null;if(e.variable instanceof dr){const l=this._getVariableData(e.variable,i),c=this.evalExpression(e.value,i),h=e.operator;if(h==="="){if(l instanceof Lt||l instanceof _t||l instanceof fi){if(c instanceof Lt||c instanceof _t||c instanceof fi&&l.data.length===c.data.length)return void l.data.set(c.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(l instanceof Jn&&c instanceof Jn&&l.buffer.byteLength-l.offset>=c.buffer.byteLength-c.offset)return void(l.buffer.byteLength%4==0?new Uint32Array(l.buffer,l.offset,l.typeInfo.size/4).set(new Uint32Array(c.buffer,c.offset,c.typeInfo.size/4)):new Uint8Array(l.buffer,l.offset,l.typeInfo.size).set(new Uint8Array(c.buffer,c.offset,c.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if(h==="+=")return l instanceof Lt||l instanceof _t||l instanceof fi?c instanceof Lt||c instanceof _t||c instanceof fi?void l.data.set(c.data.map((A,m)=>l.data[m]+A)):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if(h==="-=")return(l instanceof Lt||l instanceof _t||l instanceof fi)&&(c instanceof Lt||c instanceof _t||c instanceof fi)?void l.data.set(c.data.map((A,m)=>l.data[m]-A)):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof dr){if(e.variable.operator==="*"){r=this.getVariableName(e.variable.right,i);const l=i.getVariable(r);if(!(l&&l.value instanceof Wd))return void console.error(`Variable ${r} is not a pointer. Line ${e.line}`);n=l.value.reference;let c=e.variable.postfix;if(!c){let h=e.variable.right;for(;h instanceof dr;){if(h.postfix){c=h.postfix;break}h=h.right}}c&&(n=n.getSubData(this,c,i))}}else{s=e.variable.postfix,r=this.getVariableName(e.variable,i);const l=i.getVariable(r);if(l===null)return void console.error(`Variable ${r} not found. Line ${e.line}`);n=l.value}if(n instanceof Wd&&(n=n.reference),n===null)return void console.error(`Variable ${r} not found. Line ${e.line}`);const a=this.evalExpression(e.value,i),o=e.operator;if(o==="=")if(n instanceof Jn)n.setDataValue(this,a,s,i);else if(s){if(!(n instanceof _t||n instanceof fi))return void console.error(`Variable ${r} is not a vector or matrix. Line ${e.line}`);if(s instanceof HA){const l=this.evalExpression(s.index,i).value;if(n instanceof _t){if(!(a instanceof Lt))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[l]=a.value}else{if(!(n instanceof fi))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);{const c=this.evalExpression(s.index,i).value;if(c<0)return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(!(a instanceof _t))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);{const h=n.typeInfo.getTypeName();if(h==="mat2x2"||h==="mat2x2f"||h==="mat2x2h"){if(!(c<2&&a.data.length===2))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[2*c]=a.data[0],n.data[2*c+1]=a.data[1]}else if(h==="mat2x3"||h==="mat2x3f"||h==="mat2x3h"){if(!(c<2&&a.data.length===3))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[3*c]=a.data[0],n.data[3*c+1]=a.data[1],n.data[3*c+2]=a.data[2]}else if(h==="mat2x4"||h==="mat2x4f"||h==="mat2x4h"){if(!(c<2&&a.data.length===4))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[4*c]=a.data[0],n.data[4*c+1]=a.data[1],n.data[4*c+2]=a.data[2],n.data[4*c+3]=a.data[3]}else if(h==="mat3x2"||h==="mat3x2f"||h==="mat3x2h"){if(!(c<3&&a.data.length===2))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[2*c]=a.data[0],n.data[2*c+1]=a.data[1]}else if(h==="mat3x3"||h==="mat3x3f"||h==="mat3x3h"){if(!(c<3&&a.data.length===3))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[3*c]=a.data[0],n.data[3*c+1]=a.data[1],n.data[3*c+2]=a.data[2]}else if(h==="mat3x4"||h==="mat3x4f"||h==="mat3x4h"){if(!(c<3&&a.data.length===4))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[4*c]=a.data[0],n.data[4*c+1]=a.data[1],n.data[4*c+2]=a.data[2],n.data[4*c+3]=a.data[3]}else if(h==="mat4x2"||h==="mat4x2f"||h==="mat4x2h"){if(!(c<4&&a.data.length===2))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[2*c]=a.data[0],n.data[2*c+1]=a.data[1]}else if(h==="mat4x3"||h==="mat4x3f"||h==="mat4x3h"){if(!(c<4&&a.data.length===3))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[3*c]=a.data[0],n.data[3*c+1]=a.data[1],n.data[3*c+2]=a.data[2]}else{if(h!=="mat4x4"&&h!=="mat4x4f"&&h!=="mat4x4h")return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(!(c<4&&a.data.length===4))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);n.data[4*c]=a.data[0],n.data[4*c+1]=a.data[1],n.data[4*c+2]=a.data[2],n.data[4*c+3]=a.data[3]}}}}}else if(s instanceof mf){const l=s.value;if(!(n instanceof _t))return void console.error(`Invalid assignment to ${l}. Variable ${r} is not a vector. Line ${e.line}`);if(a instanceof Lt){if(l.length>1)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);if(l==="x")n.data[0]=a.value;else if(l==="y"){if(n.data.length<2)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);n.data[1]=a.value}else if(l==="z"){if(n.data.length<3)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);n.data[2]=a.value}else if(l==="w"){if(n.data.length<4)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);n.data[3]=a.value}}else{if(!(a instanceof _t))return void console.error(`Invalid assignment to ${r}. Line ${e.line}`);if(l.length!==a.data.length)return void console.error(`Invalid assignment to ${l} for variable ${r}. Line ${e.line}`);for(let c=0;c<l.length;++c){const h=l[c];if(h==="x"||h==="r")n.data[0]=a.data[c];else if(h==="y"||h==="g"){if(a.data.length<2)return void console.error(`Invalid assignment to ${h} for variable ${r}. Line ${e.line}`);n.data[1]=a.data[c]}else if(h==="z"||h==="b"){if(a.data.length<3)return void console.error(`Invalid assignment to ${h} for variable ${r}. Line ${e.line}`);n.data[2]=a.data[c]}else{if(h!=="w"&&h!=="a")return void console.error(`Invalid assignment to ${h} for variable ${r}. Line ${e.line}`);if(a.data.length<4)return void console.error(`Invalid assignment to ${h} for variable ${r}. Line ${e.line}`);n.data[3]=a.data[c]}}}}}else n instanceof Lt&&a instanceof Lt?n.value=a.value:n instanceof _t&&a instanceof _t||n instanceof fi&&a instanceof fi?n.data.set(a.data):console.error(`Invalid assignment to ${r}. Line ${e.line}`);else{const l=n.getSubData(this,s,i);if(l instanceof _t&&a instanceof Lt){const c=l.data,h=a.value;if(o==="+=")for(let A=0;A<c.length;++A)c[A]+=h;else if(o==="-=")for(let A=0;A<c.length;++A)c[A]-=h;else if(o==="*=")for(let A=0;A<c.length;++A)c[A]*=h;else if(o==="/=")for(let A=0;A<c.length;++A)c[A]/=h;else if(o==="%=")for(let A=0;A<c.length;++A)c[A]%=h;else if(o==="&=")for(let A=0;A<c.length;++A)c[A]&=h;else if(o==="|=")for(let A=0;A<c.length;++A)c[A]|=h;else if(o==="^=")for(let A=0;A<c.length;++A)c[A]^=h;else if(o==="<<=")for(let A=0;A<c.length;++A)c[A]<<=h;else if(o===">>=")for(let A=0;A<c.length;++A)c[A]>>=h;else console.error(`Invalid operator ${o}. Line ${e.line}`)}else if(l instanceof _t&&a instanceof _t){const c=l.data,h=a.data;if(c.length!==h.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if(o==="+=")for(let A=0;A<c.length;++A)c[A]+=h[A];else if(o==="-=")for(let A=0;A<c.length;++A)c[A]-=h[A];else if(o==="*=")for(let A=0;A<c.length;++A)c[A]*=h[A];else if(o==="/=")for(let A=0;A<c.length;++A)c[A]/=h[A];else if(o==="%=")for(let A=0;A<c.length;++A)c[A]%=h[A];else if(o==="&=")for(let A=0;A<c.length;++A)c[A]&=h[A];else if(o==="|=")for(let A=0;A<c.length;++A)c[A]|=h[A];else if(o==="^=")for(let A=0;A<c.length;++A)c[A]^=h[A];else if(o==="<<=")for(let A=0;A<c.length;++A)c[A]<<=h[A];else if(o===">>=")for(let A=0;A<c.length;++A)c[A]>>=h[A];else console.error(`Invalid operator ${o}. Line ${e.line}`)}else{if(!(l instanceof Lt&&a instanceof Lt))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);o==="+="?l.value+=a.value:o==="-="?l.value-=a.value:o==="*="?l.value*=a.value:o==="/="?l.value/=a.value:o==="%="?l.value%=a.value:o==="&="?l.value&=a.value:o==="|="?l.value|=a.value:o==="^="?l.value^=a.value:o==="<<="?l.value<<=a.value:o===">>="?l.value>>=a.value:console.error(`Invalid operator ${o}. Line ${e.line}`)}n instanceof Jn&&n.setDataValue(this,l,s,i)}}_function(e,i){const n=new kB(e);i.functions.set(e.name,n)}_const(e,i){let n=null;e.value!==null&&(n=this.evalExpression(e.value,i)),i.createVariable(e.name,n,e)}_let(e,i){let n=null;if(e.value!==null){if(n=this.evalExpression(e.value,i),n===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof dr||(n=n.clone())}else{const r=e.type.name;if(r==="f32"||r==="i32"||r==="u32"||r==="bool"||r==="f16"||r==="vec2"||r==="vec3"||r==="vec4"||r==="vec2f"||r==="vec3f"||r==="vec4f"||r==="vec2i"||r==="vec3i"||r==="vec4i"||r==="vec2u"||r==="vec3u"||r==="vec4u"||r==="vec2h"||r==="vec3h"||r==="vec4h"||r==="vec2b"||r==="vec3b"||r==="vec4b"||r==="mat2x2"||r==="mat2x3"||r==="mat2x4"||r==="mat3x2"||r==="mat3x3"||r==="mat3x4"||r==="mat4x2"||r==="mat4x3"||r==="mat4x4"||r==="mat2x2f"||r==="mat2x3f"||r==="mat2x4f"||r==="mat3x2f"||r==="mat3x3f"||r==="mat3x4f"||r==="mat4x2f"||r==="mat4x3f"||r==="mat4x4f"||r==="mat2x2h"||r==="mat2x3h"||r==="mat2x4h"||r==="mat3x2h"||r==="mat3x3h"||r==="mat3x4h"||r==="mat4x2h"||r==="mat4x3h"||r==="mat4x4h"||r==="array"){const s=new Zo(e.type,[]);n=this._evalCreate(s,i)}}i.createVariable(e.name,n,e)}_var(e,i){let n=null;if(e.value!==null){if(n=this.evalExpression(e.value,i),n===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof dr||(n=n.clone())}else{if(e.type===null)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);const r=e.type.name;if(r==="f32"||r==="i32"||r==="u32"||r==="bool"||r==="f16"||r==="vec2"||r==="vec3"||r==="vec4"||r==="vec2f"||r==="vec3f"||r==="vec4f"||r==="vec2i"||r==="vec3i"||r==="vec4i"||r==="vec2u"||r==="vec3u"||r==="vec4u"||r==="vec2h"||r==="vec3h"||r==="vec4h"||r==="vec2b"||r==="vec3b"||r==="vec4b"||r==="mat2x2"||r==="mat2x3"||r==="mat2x4"||r==="mat3x2"||r==="mat3x3"||r==="mat3x4"||r==="mat4x2"||r==="mat4x3"||r==="mat4x4"||r==="mat2x2f"||r==="mat2x3f"||r==="mat2x4f"||r==="mat3x2f"||r==="mat3x3f"||r==="mat3x4f"||r==="mat4x2f"||r==="mat4x3f"||r==="mat4x4f"||r==="mat2x2h"||r==="mat2x3h"||r==="mat2x4h"||r==="mat3x2h"||r==="mat3x3h"||r==="mat3x4h"||r==="mat4x2h"||r==="mat4x3h"||r==="mat4x4h"||e.type instanceof t_||e.type instanceof vc||e.type instanceof Wt){const s=new Zo(e.type,[]);n=this._evalCreate(s,i)}}i.createVariable(e.name,n,e)}_switch(e,i){i=i.clone();const n=this.evalExpression(e.condition,i);if(!(n instanceof Lt))return console.error(`Invalid if condition. Line ${e.line}`),null;let r=null;for(const s of e.cases)if(s instanceof Gz)for(const a of s.selectors){if(a instanceof bv){r=s;continue}const o=this.evalExpression(a,i);if(!(o instanceof Lt))return console.error(`Invalid case selector. Line ${e.line}`),null;if(o.value===n.value)return this._execStatements(s.body,i)}else s instanceof Xz&&(r=s);return r?this._execStatements(r.body,i):null}_if(e,i){i=i.clone();const n=this.evalExpression(e.condition,i);if(!(n instanceof Lt))return console.error(`Invalid if condition. Line ${e.line}`),null;if(n.value)return this._execStatements(e.body,i);for(const r of e.elseif){const s=this.evalExpression(r.condition,i);if(!(s instanceof Lt))return console.error(`Invalid if condition. Line ${e.line}`),null;if(s.value)return this._execStatements(r.body,i)}return e.else?this._execStatements(e.else,i):null}_getScalarValue(e){return e instanceof Lt?e.value:(console.error("Expected scalar value.",e),0)}_for(e,i){for(i=i.clone(),this.execStatement(e.init,i);this._getScalarValue(this.evalExpression(e.condition,i));){const n=this._execStatements(e.body,i);if(n===ns._breakObj)break;if(n!==null&&n!==ns._continueObj)return n;this.execStatement(e.increment,i)}return null}_loop(e,i){for(i=i.clone();;){const n=this._execStatements(e.body,i);if(n===ns._breakObj)break;if(n===ns._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,i)===ns._breakObj)break}else if(n!==null)return n}return null}_while(e,i){for(i=i.clone();this._getScalarValue(this.evalExpression(e.condition,i));){const n=this._execStatements(e.body,i);if(n===ns._breakObj)break;if(n!==ns._continueObj&&n!==null)return n}return null}_evalBitcast(e,i){const n=this.evalExpression(e.value,i),r=e.type;if(n instanceof Lt){const s=nF(n.value,n.typeInfo.name,r.name);return new Lt(s,this.getTypeInfo(r))}if(n instanceof _t){const s=n.typeInfo.getTypeName();let a="";if(s.endsWith("f"))a="f32";else if(s.endsWith("i"))a="i32";else if(s.endsWith("u"))a="u32";else if(s.endsWith("b"))a="bool";else{if(!s.endsWith("h"))return console.error(`Unknown vector type ${s}. Line ${e.line}`),null;a="f16"}const o=r.getTypeName();let l="";if(o.endsWith("f"))l="f32";else if(o.endsWith("i"))l="i32";else if(o.endsWith("u"))l="u32";else if(o.endsWith("b"))l="bool";else{if(!o.endsWith("h"))return console.error(`Unknown vector type ${l}. Line ${e.line}`),null;l="f16"}const c=function(h,A,m){if(A===m)return h;const b=new Array(h.length);for(let S=0;S<h.length;S++)b[S]=nF(h[S],A,m);return b}(Array.from(n.data),a,l);return new _t(c,this.getTypeInfo(r))}return console.error(`TODO: bitcast for ${n.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,i){return i.getVariableValue(e.name).clone().getSubData(this,e.postfix,i)}_evalCreate(e,i){var n;if(e instanceof Zo){if(e.type===null)return QM.void;switch(e.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(e,i);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(e,i);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(e,i)}}const r=e instanceof Zo?e.type.name:e.name,s=e instanceof Zo?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(s===null)return console.error(`Unknown type ${r}. Line ${e.line}`),null;if(s.size===0)return null;const a=new Jn(new ArrayBuffer(s.size),s,0);if(s instanceof Tu){if(e.args)for(let o=0;o<e.args.length;++o){const l=s.members[o],c=e.args[o],h=this.evalExpression(c,i);a.setData(this,h,l.type,l.offset,i)}}else if(s instanceof Ou){let o=0;if(e.args)for(let l=0;l<e.args.length;++l){const c=e.args[l],h=this.evalExpression(c,i);s.format===null&&(((n=h.typeInfo)===null||n===void 0?void 0:n.name)==="x32"?s.format=this.getTypeInfo("i32"):s.format=h.typeInfo),a.setData(this,h,s.format,o,i),o+=s.stride}}else console.error(`Unknown type "${r}". Line ${e.line}`);return e instanceof Zo?a.getSubData(this,e.postfix,i):a}_evalLiteral(e,i){const n=this.getTypeInfo(e.type),r=n.name;return r==="x32"||r==="u32"||r==="f32"||r==="f16"||r==="i32"||r==="bool"?new Lt(e.scalarValue,n):r==="vec2"||r==="vec3"||r==="vec4"||r==="vec2f"||r==="vec3f"||r==="vec4f"||r==="vec2h"||r==="vec3h"||r==="vec4h"||r==="vec2i"||r==="vec3i"||r==="vec4i"||r==="vec2u"||r==="vec3u"||r==="vec4u"?this._callConstructorVec(e,i):r==="mat2x2"||r==="mat2x3"||r==="mat2x4"||r==="mat3x2"||r==="mat3x3"||r==="mat3x4"||r==="mat4x2"||r==="mat4x3"||r==="mat4x4"||r==="mat2x2f"||r==="mat2x3f"||r==="mat2x4f"||r==="mat3x2f"||r==="mat3x3f"||r==="mat3x4f"||r==="mat4x2f"||r==="mat4x3f"||r==="mat4x4f"||r==="mat2x2h"||r==="mat2x3h"||r==="mat2x4h"||r==="mat3x2h"||r==="mat3x3h"||r==="mat3x4h"||r==="mat4x2h"||r==="mat4x3h"||r==="mat4x4h"?this._callConstructorMatrix(e,i):e.value}_evalVariable(e,i){const n=i.getVariableValue(e.name);return n===null?n:n.getSubData(this,e.postfix,i)}_maxFormatTypeInfo(e){let i=e[0];if(i.name==="f32")return i;for(let n=1;n<e.length;++n){const r=ns._priority.get(i.name);ns._priority.get(e[n].name)<r&&(i=e[n])}return i.name==="x32"?this.getTypeInfo("i32"):i}_evalUnaryOp(e,i){const n=this.evalExpression(e.right,i);if(e.operator==="&")return new Wd(n);if(e.operator==="*")return n instanceof Wd?n.reference.getSubData(this,e.postfix,i):(console.error(`Invalid dereference. Line ${e.line}`),null);const r=n instanceof Lt?n.value:n instanceof _t?Array.from(n.data):null;switch(e.operator){case"+":{if(De(r)){const o=r.map((l,c)=>+l);return new _t(o,n.typeInfo)}const s=r,a=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new Lt(+s,a)}case"-":{if(De(r)){const o=r.map((l,c)=>-l);return new _t(o,n.typeInfo)}const s=r,a=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new Lt(-s,a)}case"!":{if(De(r)){const o=r.map((l,c)=>l?0:1);return new _t(o,n.typeInfo)}const s=r,a=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new Lt(s?0:1,a)}case"~":{if(De(r)){const o=r.map((l,c)=>~l);return new _t(o,n.typeInfo)}const s=r,a=this._maxFormatTypeInfo([n.typeInfo,n.typeInfo]);return new Lt(~s,a)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,i){const n=this.evalExpression(e.left,i),r=this.evalExpression(e.right,i),s=n instanceof Lt?n.value:n instanceof _t||n instanceof fi?Array.from(n.data):null,a=r instanceof Lt?r.value:r instanceof _t||r instanceof fi?Array.from(r.data):null;switch(e.operator){case"+":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b+A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m+h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h+m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o+l,c)}case"-":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b-A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m-h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h-m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o-l,c)}case"*":{if(De(s)&&De(a)){const h=s,A=a;if(n instanceof fi&&r instanceof fi){const m=function(I,O,D,B){if(As[O.name]===void 0||As[B.name]===void 0)return null;const P=As[O.name][0],j=As[O.name][1],N=As[B.name][0];if(P!==As[B.name][1])return null;const F=new Array(N*j);for(let $=0;$<j;$++)for(let V=0;V<N;V++){let Z=0;for(let nt=0;nt<P;nt++)Z+=I[nt*j+$]*D[V*P+nt];F[$*N+V]=Z}return F}(h,n.typeInfo,A,r.typeInfo);if(m===null)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;const b=As[r.typeInfo.name][0],S=As[n.typeInfo.name][1],M=this.getTypeInfo(`mat${b}x${S}f`);return new fi(m,M)}if(n instanceof fi&&r instanceof _t){const m=function(b,S,M,I){if(As[S.name]===void 0||I3[I.name]===void 0)return null;const O=As[S.name][0],D=As[S.name][1];if(O!==M.length)return null;const B=new Array(D);for(let P=0;P<D;P++){let j=0;for(let N=0;N<O;N++)j+=b[N*D+P]*M[N];B[P]=j}return B}(h,n.typeInfo,A,r.typeInfo);return m===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new _t(m,r.typeInfo)}if(n instanceof _t&&r instanceof fi){const m=function(b,S,M,I){if(I3[S.name]===void 0||As[I.name]===void 0)return null;const O=As[I.name][0],D=As[I.name][1];if(D!==b.length)return null;const B=[];for(let P=0;P<O;P++){let j=0;for(let N=0;N<D;N++)j+=b[N]*M[N*O+P];B[P]=j}return B}(h,n.typeInfo,A,r.typeInfo);return m===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new _t(m,n.typeInfo)}{if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b*A[S]);return new _t(m,n.typeInfo)}}if(De(s)){const h=a,A=s.map((m,b)=>m*h);return n instanceof fi?new fi(A,n.typeInfo):new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h*m);return r instanceof fi?new fi(A,r.typeInfo):new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o*l,c)}case"%":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b%A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m%h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h%m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o%l,c)}case"/":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b/A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m/h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h/m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o/l,c)}case"&":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b&A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m&h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h&m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o&l,c)}case"|":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b|A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m|h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h|m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o|l,c)}case"^":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b^A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m^h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h^m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o^l,c)}case"<<":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b<<A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m<<h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h<<m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o<<l,c)}case">>":{if(De(s)&&De(a)){const h=s,A=a;if(h.length!==A.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const m=h.map((b,S)=>b>>A[S]);return new _t(m,n.typeInfo)}if(De(s)){const h=a,A=s.map((m,b)=>m>>h);return new _t(A,n.typeInfo)}if(De(a)){const h=s,A=a.map((m,b)=>h>>m);return new _t(A,r.typeInfo)}const o=s,l=a,c=this._maxFormatTypeInfo([n.typeInfo,r.typeInfo]);return new Lt(o>>l,c)}case">":if(De(s)&&De(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((h,A)=>h>l[A]?1:0);return new _t(c,n.typeInfo)}if(De(s)){const o=a,l=s.map((c,h)=>c>o?1:0);return new _t(l,n.typeInfo)}if(De(a)){const o=s,l=a.map((c,h)=>o>c?1:0);return new _t(l,r.typeInfo)}return new Lt(s>a?1:0,this.getTypeInfo("bool"));case"<":if(De(s)&&De(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((h,A)=>h<l[A]?1:0);return new _t(c,n.typeInfo)}if(De(s)){const o=a,l=s.map((c,h)=>c<o?1:0);return new _t(l,n.typeInfo)}if(De(a)){const o=s,l=a.map((c,h)=>o<c?1:0);return new _t(l,r.typeInfo)}return new Lt(s<a?1:0,this.getTypeInfo("bool"));case"==":if(De(s)&&De(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((h,A)=>h===l[A]?1:0);return new _t(c,n.typeInfo)}if(De(s)){const o=a,l=s.map((c,h)=>c==o?1:0);return new _t(l,n.typeInfo)}if(De(a)){const o=s,l=a.map((c,h)=>o==c?1:0);return new _t(l,r.typeInfo)}return new Lt(s===a?1:0,this.getTypeInfo("bool"));case"!=":if(De(s)&&De(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((h,A)=>h!==l[A]?1:0);return new _t(c,n.typeInfo)}if(De(s)){const o=a,l=s.map((c,h)=>c!==o?1:0);return new _t(l,n.typeInfo)}if(De(a)){const o=s,l=a.map((c,h)=>o!==c?1:0);return new _t(l,r.typeInfo)}return new Lt(s!==a?1:0,this.getTypeInfo("bool"));case">=":if(De(s)&&De(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((h,A)=>h>=l[A]?1:0);return new _t(c,n.typeInfo)}if(De(s)){const o=a,l=s.map((c,h)=>c>=o?1:0);return new _t(l,n.typeInfo)}if(De(a)){const o=s,l=a.map((c,h)=>o>=c?1:0);return new _t(l,r.typeInfo)}return new Lt(s>=a?1:0,this.getTypeInfo("bool"));case"<=":if(De(s)&&De(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((h,A)=>h<=l[A]?1:0);return new _t(c,n.typeInfo)}if(De(s)){const o=a,l=s.map((c,h)=>c<=o?1:0);return new _t(l,n.typeInfo)}if(De(a)){const o=s,l=a.map((c,h)=>o<=c?1:0);return new _t(l,r.typeInfo)}return new Lt(s<=a?1:0,this.getTypeInfo("bool"));case"&&":if(De(s)&&De(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((h,A)=>h&&l[A]?1:0);return new _t(c,n.typeInfo)}if(De(s)){const o=a,l=s.map((c,h)=>c&&o?1:0);return new _t(l,n.typeInfo)}if(De(a)){const o=s,l=a.map((c,h)=>o&&c?1:0);return new _t(l,r.typeInfo)}return new Lt(s&&a?1:0,this.getTypeInfo("bool"));case"||":if(De(s)&&De(a)){const o=s,l=a;if(o.length!==l.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;const c=o.map((h,A)=>h||l[A]?1:0);return new _t(c,n.typeInfo)}if(De(s)){const o=a,l=s.map((c,h)=>c||o?1:0);return new _t(l,n.typeInfo)}if(De(a)){const o=s,l=a.map((c,h)=>o||c?1:0);return new _t(l,r.typeInfo)}return new Lt(s||a?1:0,this.getTypeInfo("bool"))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,i){if(e.cachedReturnValue!==null)return e.cachedReturnValue;const n=i.clone();n.currentFunctionName=e.name;const r=i.getFunction(e.name);if(!r)return e.isBuiltin?this._callBuiltinFunction(e,n):this.getTypeInfo(e.name)?this._evalCreate(e,i):(console.error(`Unknown function "${e.name}". Line ${e.line}`),null);for(let s=0;s<r.node.args.length;++s){const a=r.node.args[s],o=this.evalExpression(e.args[s],n);n.createVariable(a.name,o,a)}return this._execStatements(r.node.body,n)}_callBuiltinFunction(e,i){switch(e.name){case"all":return this.builtins.All(e,i);case"any":return this.builtins.Any(e,i);case"select":return this.builtins.Select(e,i);case"arrayLength":return this.builtins.ArrayLength(e,i);case"abs":return this.builtins.Abs(e,i);case"acos":return this.builtins.Acos(e,i);case"acosh":return this.builtins.Acosh(e,i);case"asin":return this.builtins.Asin(e,i);case"asinh":return this.builtins.Asinh(e,i);case"atan":return this.builtins.Atan(e,i);case"atanh":return this.builtins.Atanh(e,i);case"atan2":return this.builtins.Atan2(e,i);case"ceil":return this.builtins.Ceil(e,i);case"clamp":return this.builtins.Clamp(e,i);case"cos":return this.builtins.Cos(e,i);case"cosh":return this.builtins.Cosh(e,i);case"countLeadingZeros":return this.builtins.CountLeadingZeros(e,i);case"countOneBits":return this.builtins.CountOneBits(e,i);case"countTrailingZeros":return this.builtins.CountTrailingZeros(e,i);case"cross":return this.builtins.Cross(e,i);case"degrees":return this.builtins.Degrees(e,i);case"determinant":return this.builtins.Determinant(e,i);case"distance":return this.builtins.Distance(e,i);case"dot":return this.builtins.Dot(e,i);case"dot4U8Packed":return this.builtins.Dot4U8Packed(e,i);case"dot4I8Packed":return this.builtins.Dot4I8Packed(e,i);case"exp":return this.builtins.Exp(e,i);case"exp2":return this.builtins.Exp2(e,i);case"extractBits":return this.builtins.ExtractBits(e,i);case"faceForward":return this.builtins.FaceForward(e,i);case"firstLeadingBit":return this.builtins.FirstLeadingBit(e,i);case"firstTrailingBit":return this.builtins.FirstTrailingBit(e,i);case"floor":return this.builtins.Floor(e,i);case"fma":return this.builtins.Fma(e,i);case"fract":return this.builtins.Fract(e,i);case"frexp":return this.builtins.Frexp(e,i);case"insertBits":return this.builtins.InsertBits(e,i);case"inverseSqrt":return this.builtins.InverseSqrt(e,i);case"ldexp":return this.builtins.Ldexp(e,i);case"length":return this.builtins.Length(e,i);case"log":return this.builtins.Log(e,i);case"log2":return this.builtins.Log2(e,i);case"max":return this.builtins.Max(e,i);case"min":return this.builtins.Min(e,i);case"mix":return this.builtins.Mix(e,i);case"modf":return this.builtins.Modf(e,i);case"normalize":return this.builtins.Normalize(e,i);case"pow":return this.builtins.Pow(e,i);case"quantizeToF16":return this.builtins.QuantizeToF16(e,i);case"radians":return this.builtins.Radians(e,i);case"reflect":return this.builtins.Reflect(e,i);case"refract":return this.builtins.Refract(e,i);case"reverseBits":return this.builtins.ReverseBits(e,i);case"round":return this.builtins.Round(e,i);case"saturate":return this.builtins.Saturate(e,i);case"sign":return this.builtins.Sign(e,i);case"sin":return this.builtins.Sin(e,i);case"sinh":return this.builtins.Sinh(e,i);case"smoothStep":return this.builtins.SmoothStep(e,i);case"sqrt":return this.builtins.Sqrt(e,i);case"step":return this.builtins.Step(e,i);case"tan":return this.builtins.Tan(e,i);case"tanh":return this.builtins.Tanh(e,i);case"transpose":return this.builtins.Transpose(e,i);case"trunc":return this.builtins.Trunc(e,i);case"dpdx":return this.builtins.Dpdx(e,i);case"dpdxCoarse":return this.builtins.DpdxCoarse(e,i);case"dpdxFine":return this.builtins.DpdxFine(e,i);case"dpdy":return this.builtins.Dpdy(e,i);case"dpdyCoarse":return this.builtins.DpdyCoarse(e,i);case"dpdyFine":return this.builtins.DpdyFine(e,i);case"fwidth":return this.builtins.Fwidth(e,i);case"fwidthCoarse":return this.builtins.FwidthCoarse(e,i);case"fwidthFine":return this.builtins.FwidthFine(e,i);case"textureDimensions":return this.builtins.TextureDimensions(e,i);case"textureGather":return this.builtins.TextureGather(e,i);case"textureGatherCompare":return this.builtins.TextureGatherCompare(e,i);case"textureLoad":return this.builtins.TextureLoad(e,i);case"textureNumLayers":return this.builtins.TextureNumLayers(e,i);case"textureNumLevels":return this.builtins.TextureNumLevels(e,i);case"textureNumSamples":return this.builtins.TextureNumSamples(e,i);case"textureSample":return this.builtins.TextureSample(e,i);case"textureSampleBias":return this.builtins.TextureSampleBias(e,i);case"textureSampleCompare":return this.builtins.TextureSampleCompare(e,i);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(e,i);case"textureSampleGrad":return this.builtins.TextureSampleGrad(e,i);case"textureSampleLevel":return this.builtins.TextureSampleLevel(e,i);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(e,i);case"textureStore":return this.builtins.TextureStore(e,i);case"atomicLoad":return this.builtins.AtomicLoad(e,i);case"atomicStore":return this.builtins.AtomicStore(e,i);case"atomicAdd":return this.builtins.AtomicAdd(e,i);case"atomicSub":return this.builtins.AtomicSub(e,i);case"atomicMax":return this.builtins.AtomicMax(e,i);case"atomicMin":return this.builtins.AtomicMin(e,i);case"atomicAnd":return this.builtins.AtomicAnd(e,i);case"atomicOr":return this.builtins.AtomicOr(e,i);case"atomicXor":return this.builtins.AtomicXor(e,i);case"atomicExchange":return this.builtins.AtomicExchange(e,i);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(e,i);case"pack4x8snorm":return this.builtins.Pack4x8snorm(e,i);case"pack4x8unorm":return this.builtins.Pack4x8unorm(e,i);case"pack4xI8":return this.builtins.Pack4xI8(e,i);case"pack4xU8":return this.builtins.Pack4xU8(e,i);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(e,i);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(e,i);case"pack2x16snorm":return this.builtins.Pack2x16snorm(e,i);case"pack2x16unorm":return this.builtins.Pack2x16unorm(e,i);case"pack2x16float":return this.builtins.Pack2x16float(e,i);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(e,i);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(e,i);case"unpack4xI8":return this.builtins.Unpack4xI8(e,i);case"unpack4xU8":return this.builtins.Unpack4xU8(e,i);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(e,i);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(e,i);case"unpack2x16float":return this.builtins.Unpack2x16float(e,i);case"storageBarrier":return this.builtins.StorageBarrier(e,i);case"textureBarrier":return this.builtins.TextureBarrier(e,i);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(e,i);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(e,i);case"subgroupAdd":return this.builtins.SubgroupAdd(e,i);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(e,i);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(e,i);case"subgroupAll":return this.builtins.SubgroupAll(e,i);case"subgroupAnd":return this.builtins.SubgroupAnd(e,i);case"subgroupAny":return this.builtins.SubgroupAny(e,i);case"subgroupBallot":return this.builtins.SubgroupBallot(e,i);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(e,i);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(e,i);case"subgroupElect":return this.builtins.SubgroupElect(e,i);case"subgroupMax":return this.builtins.SubgroupMax(e,i);case"subgroupMin":return this.builtins.SubgroupMin(e,i);case"subgroupMul":return this.builtins.SubgroupMul(e,i);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(e,i);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(e,i);case"subgroupOr":return this.builtins.SubgroupOr(e,i);case"subgroupShuffle":return this.builtins.SubgroupShuffle(e,i);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(e,i);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(e,i);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(e,i);case"subgroupXor":return this.builtins.SubgroupXor(e,i);case"quadBroadcast":return this.builtins.QuadBroadcast(e,i);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(e,i);case"quadSwapX":return this.builtins.QuadSwapX(e,i);case"quadSwapY":return this.builtins.QuadSwapY(e,i)}const n=i.getFunction(e.name);if(n){const r=i.clone();for(let s=0;s<n.node.args.length;++s){const a=n.node.args[s],o=this.evalExpression(e.args[s],r);r.setVariable(a.name,o,a)}return this._execStatements(n.node.body,r)}return null}_callConstructorValue(e,i){if(!e.args||e.args.length===0)return new Lt(0,this.getTypeInfo(e.type));const n=this.evalExpression(e.args[0],i);return n.typeInfo=this.getTypeInfo(e.type),n.getSubData(this,e.postfix,i).clone()}_callConstructorVec(e,i){const n=this.getTypeInfo(e.type),r=e.type.getTypeName(),s=I3[r];if(s===void 0)return console.error(`Invalid vec constructor ${r}. Line ${e.line}`),null;const a=[];if(e instanceof _r)if(e.isVector){const o=e.vectorValue;for(const l of o)a.push(l)}else a.push(e.scalarValue);else if(e.args)for(const o of e.args){const l=this.evalExpression(o,i);if(l instanceof _t){const c=l.data;for(let h=0;h<c.length;++h){let A=c[h];a.push(A)}}else if(l instanceof Lt){let c=l.value;a.push(c)}}if(e.type instanceof Wt&&e.type.format===null&&(e.type.format=Wt.f32),a.length===0){const o=new Array(s).fill(0);return new _t(o,n).getSubData(this,e.postfix,i)}if(a.length===1)for(;a.length<s;)a.push(a[0]);return a.length<s?(console.error(`Invalid vec constructor. Line ${e.line}`),null):new _t(a.length>s?a.slice(0,s):a,n).getSubData(this,e.postfix,i)}_callConstructorMatrix(e,i){const n=this.getTypeInfo(e.type),r=e.type.getTypeName(),s=As[r];if(s===void 0)return console.error(`Invalid matrix constructor ${r}. Line ${e.line}`),null;const a=[];if(e instanceof _r)if(e.isVector){const o=e.vectorValue;for(const l of o)a.push(l)}else a.push(e.scalarValue);else if(e.args)for(const o of e.args){const l=this.evalExpression(o,i);l instanceof _t?a.push(...l.data):l instanceof Lt?a.push(l.value):l instanceof fi&&a.push(...l.data)}if(n instanceof pf&&n.format===null&&(n.format=this.getTypeInfo("f32")),a.length===0){const o=new Array(s[2]).fill(0);return new fi(o,n).getSubData(this,e.postfix,i)}return a.length!==s[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new fi(a,n).getSubData(this,e.postfix,i)}}ns._breakObj=new Ya(new Va("BREAK",null),null),ns._continueObj=new Ya(new Va("CONTINUE",null),null),ns._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);class lot{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}}class cot{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new lot,this._exec=new ns,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;const i=[];for(;!this._isAtEnd();){const n=this._global_decl_or_directive();if(!n)break;i.push(n)}if(this._deferArrayCountEval.length>0){for(const n of this._deferArrayCountEval){const r=n.arrayType,s=n.countNode;if(s instanceof pa){const a=s.name,o=this._context.constants.get(a);if(o)try{const l=o.constEvaluate(this._exec);r.count=l}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(const n of i)n.search(r=>{r instanceof eF||r instanceof _v?r.type=this._forwardType(r.type):r instanceof t_?r.format=this._forwardType(r.format):r instanceof Mc||r instanceof Jm||r instanceof pv?r.type=this._forwardType(r.type):r instanceof p_?r.returnType=this._forwardType(r.returnType):r instanceof tF&&(r.type=this._forwardType(r.type))});return i}_forwardType(e){if(e instanceof J8){const i=this._getType(e.name);if(i)return i}else e instanceof _v?e.type=this._forwardType(e.type):e instanceof t_&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if(typeof e=="string"){const i=new Zat(e);this._tokens=i.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,i){return e.line=i??this._currentLine,e}_error(e,i){return{token:e,message:i,toString:()=>`${i}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==ht.eof}_match(e){if(e instanceof jt)return!!this._check(e)&&(this._advance(),!0);for(let i=0,n=e.length;i<n;++i){const r=e[i];if(this._check(r))return this._advance(),!0}return!1}_consume(e,i){if(this._check(e))return this._advance();throw this._error(this._peek(),`${i}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;const i=this._peek();if(e instanceof Array){const n=i.type;let r=!1;for(const s of e){if(n===s)return!0;s===ht.tokens.name&&(r=!0)}if(r){const s=ht.tokens.name.rule.exec(i.lexeme);if(s&&s.index==0&&s[0]==i.lexeme)return!0}return!1}if(i.type===e)return!0;if(e===ht.tokens.name){const n=ht.tokens.name.rule.exec(i.lexeme);return n&&n.index==0&&n[0]==i.lexeme}return!1}_advance(){var e,i;return this._currentLine=(i=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&i!==void 0?i:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(ht.tokens.semicolon)&&!this._isAtEnd(););if(this._match(ht.keywords.alias)){const i=this._type_alias();return this._consume(ht.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([i]),i}if(this._match(ht.keywords.diagnostic)){const i=this._diagnostic();return this._consume(ht.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([i]),i}if(this._match(ht.keywords.requires)){const i=this._requires_directive();return this._consume(ht.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([i]),i}if(this._match(ht.keywords.enable)){const i=this._enable_directive();return this._consume(ht.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([i]),i}const e=this._attribute();if(this._check(ht.keywords.var)){const i=this._global_variable_decl();return i!=null&&(i.attributes=e),this._consume(ht.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([i]),i}if(this._check(ht.keywords.override)){const i=this._override_variable_decl();return i!=null&&(i.attributes=e),this._consume(ht.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([i]),i}if(this._check(ht.keywords.let)){const i=this._global_let_decl();return i!=null&&(i.attributes=e),this._consume(ht.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([i]),i}if(this._check(ht.keywords.const)){const i=this._global_const_decl();return i!=null&&(i.attributes=e),this._consume(ht.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([i]),i}if(this._check(ht.keywords.struct)){const i=this._struct_decl();return i!=null&&(i.attributes=e),this._exec.reflection.updateAST([i]),i}if(this._check(ht.keywords.fn)){const i=this._function_decl();return i!=null&&(i.attributes=e),this._exec.reflection.updateAST([i]),i}return null}_function_decl(){if(!this._match(ht.keywords.fn))return null;const e=this._currentLine,i=this._consume(ht.tokens.ident,"Expected function name.").toString();this._consume(ht.tokens.paren_left,"Expected '(' for function arguments.");const n=[];if(!this._check(ht.tokens.paren_right))do{if(this._check(ht.tokens.paren_right))break;const o=this._attribute(),l=this._consume(ht.tokens.name,"Expected argument name.").toString();this._consume(ht.tokens.colon,"Expected ':' for argument type.");const c=this._attribute(),h=this._type_decl();h!=null&&(h.attributes=c,n.push(this._updateNode(new tF(l,h,o))))}while(this._match(ht.tokens.comma));this._consume(ht.tokens.paren_right,"Expected ')' after function arguments.");let r=null;if(this._match(ht.tokens.arrow)){const o=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=o)}const s=this._compound_statement(),a=this._currentLine;return this._updateNode(new p_(i,n,r,s,e,a),e)}_compound_statement(){const e=[];for(this._consume(ht.tokens.brace_left,"Expected '{' for block.");!this._check(ht.tokens.brace_right);){const i=this._statement();i!==null&&e.push(i)}return this._consume(ht.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(ht.tokens.semicolon)&&!this._isAtEnd(););if(this._check(ht.tokens.attr)&&this._attribute(),this._check(ht.keywords.if))return this._if_statement();if(this._check(ht.keywords.switch))return this._switch_statement();if(this._check(ht.keywords.loop))return this._loop_statement();if(this._check(ht.keywords.for))return this._for_statement();if(this._check(ht.keywords.while))return this._while_statement();if(this._check(ht.keywords.continuing))return this._continuing_statement();if(this._check(ht.keywords.static_assert))return this._static_assert_statement();if(this._check(ht.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(ht.keywords.return))e=this._return_statement();else if(this._check([ht.keywords.var,ht.keywords.let,ht.keywords.const]))e=this._variable_statement();else if(this._match(ht.keywords.discard))e=this._updateNode(new Xat);else if(this._match(ht.keywords.break)){const i=this._updateNode(new Vz);if(this._currentLoop.length>0){const n=this._currentLoop[this._currentLoop.length-1];i.loopId=n.id}e=i,this._check(ht.keywords.if)&&(this._advance(),i.condition=this._optional_paren_expression())}else if(this._match(ht.keywords.continue)){const i=this._updateNode(new $z);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${i.line}`);{const n=this._currentLoop[this._currentLoop.length-1];i.loopId=n.id}e=i}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return e!=null&&this._consume(ht.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(ht.keywords.static_assert))return null;const e=this._currentLine,i=this._optional_paren_expression();return this._updateNode(new qat(i),e)}_while_statement(){if(!this._match(ht.keywords.while))return null;const e=this._updateNode(new Pz(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(ht.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){const e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(ht.keywords.continuing))return null;const i=this._currentLine,n=this._compound_statement();return this._updateNode(new XM(n,e),i)}_for_statement(){if(!this._match(ht.keywords.for))return null;this._consume(ht.tokens.paren_left,"Expected '('.");const e=this._updateNode(new xz(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(ht.tokens.semicolon)?null:this._for_init(),this._consume(ht.tokens.semicolon,"Expected ';'."),e.condition=this._check(ht.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(ht.tokens.semicolon,"Expected ';'."),e.increment=this._check(ht.tokens.paren_right)?null:this._for_increment(),this._consume(ht.tokens.paren_right,"Expected ')'."),this._check(ht.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(ht.keywords.var)){const e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let i=null;return this._match(ht.tokens.equal)&&(i=this._short_circuit_or_expression()),this._updateNode(new Mc(e.name,e.type,e.storage,e.access,i),e.line)}if(this._match(ht.keywords.let)){const e=this._currentLine,i=this._consume(ht.tokens.name,"Expected name for let.").toString();let n=null;if(this._match(ht.tokens.colon)){const s=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=s)}this._consume(ht.tokens.equal,"Expected '=' for let.");const r=this._short_circuit_or_expression();return this._updateNode(new Jm(i,n,null,null,r),e)}if(this._match(ht.keywords.const)){const e=this._currentLine,i=this._consume(ht.tokens.name,"Expected name for const.").toString();let n=null;if(this._match(ht.tokens.colon)){const s=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=s)}this._consume(ht.tokens.equal,"Expected '=' for const.");const r=this._short_circuit_or_expression();return n===null&&r instanceof _r&&(n=r.type),this._updateNode(new pv(i,n,null,null,r),e)}return null}_increment_decrement_statement(){const e=this._current,i=this._unary_expression();if(i==null)return null;if(!this._check(ht.increment_operators))return this._current=e,null;const n=this._consume(ht.increment_operators,"Expected increment operator");return this._updateNode(new Nz(n.type===ht.tokens.plus_plus?aA.increment:aA.decrement,i))}_assignment_statement(){let e=null;const i=this._currentLine;if(this._check(ht.tokens.brace_right))return null;let n=this._match(ht.tokens.underscore);if(n||(e=this._unary_expression()),!n&&e==null)return null;const r=this._consume(ht.assignment_operators,"Expected assignment operator."),s=this._short_circuit_or_expression();return this._updateNode(new Fz(Fm.parse(r.lexeme),e,s),i)}_func_call_statement(){if(!this._check(ht.tokens.ident))return null;const e=this._currentLine,i=this._current,n=this._consume(ht.tokens.ident,"Expected function name."),r=this._argument_expression_list();return r===null?(this._current=i,null):this._updateNode(new xB(n.lexeme,r),e)}_loop_statement(){if(!this._match(ht.keywords.loop))return null;this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Expected '{' for loop.");const e=this._updateNode(new Lz([],null));this._currentLoop.push(e);let i=this._statement();for(;i!==null;){if(Array.isArray(i))for(let n of i)e.body.push(n);else e.body.push(i);if(i instanceof XM){e.continuing=i;break}i=this._statement()}return this._currentLoop.pop(),this._consume(ht.tokens.brace_right,"Expected '}' for loop."),e}_switch_statement(){if(!this._match(ht.keywords.switch))return null;const e=this._updateNode(new Uz(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Expected '{' for switch."),e.cases=this._switch_body(),e.cases==null||e.cases.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(ht.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),e}_switch_body(){const e=[];let i=!1;for(;this._check([ht.keywords.default,ht.keywords.case]);){if(this._match(ht.keywords.case)){const n=this._case_selectors();for(const s of n)if(s instanceof bv){if(i)throw this._error(this._previous(),"Multiple default cases in switch statement.");i=!0;break}this._match(ht.tokens.colon),this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Exected '{' for switch case.");const r=this._case_body();this._consume(ht.tokens.brace_right,"Exected '}' for switch case."),e.push(this._updateNode(new Gz(n,r)))}if(this._match(ht.keywords.default)){if(i)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(ht.tokens.colon),this._check(ht.tokens.attr)&&this._attribute(),this._consume(ht.tokens.brace_left,"Exected '{' for switch default.");const n=this._case_body();this._consume(ht.tokens.brace_right,"Exected '}' for switch default."),e.push(this._updateNode(new Xz(n)))}}return e}_case_selectors(){const e=[];for(this._match(ht.keywords.default)?e.push(this._updateNode(new bv)):e.push(this._shift_expression());this._match(ht.tokens.comma);)this._match(ht.keywords.default)?e.push(this._updateNode(new bv)):e.push(this._shift_expression());return e}_case_body(){if(this._match(ht.keywords.fallthrough))return this._consume(ht.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);const i=this._case_body();return i.length==0?e:[...e,i[0]]}_if_statement(){if(!this._match(ht.keywords.if))return null;const e=this._currentLine,i=this._optional_paren_expression();this._check(ht.tokens.attr)&&this._attribute();const n=this._compound_statement();let r=[];this._match_elseif()&&(this._check(ht.tokens.attr)&&this._attribute(),r=this._elseif_statement(r));let s=null;return this._match(ht.keywords.else)&&(this._check(ht.tokens.attr)&&this._attribute(),s=this._compound_statement()),this._updateNode(new kz(i,n,r,s),e)}_match_elseif(){return this._tokens[this._current].type===ht.keywords.else&&this._tokens[this._current+1].type===ht.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){const i=this._optional_paren_expression(),n=this._compound_statement();return e.push(this._updateNode(new Qat(i,n))),this._match_elseif()&&(this._check(ht.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(ht.keywords.return))return null;const e=this._short_circuit_or_expression();return this._updateNode(new jz(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(ht.tokens.or_or);)e=this._updateNode(new To(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(ht.tokens.and_and);)e=this._updateNode(new To(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(ht.tokens.or);)e=this._updateNode(new To(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(ht.tokens.xor);)e=this._updateNode(new To(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(ht.tokens.and);)e=this._updateNode(new To(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){const e=this._relational_expression();return this._match([ht.tokens.equal_equal,ht.tokens.not_equal])?this._updateNode(new To(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([ht.tokens.less_than,ht.tokens.greater_than,ht.tokens.less_than_equal,ht.tokens.greater_than_equal]);)e=this._updateNode(new To(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([ht.tokens.shift_left,ht.tokens.shift_right]);)e=this._updateNode(new To(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([ht.tokens.plus,ht.tokens.minus]);)e=this._updateNode(new To(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([ht.tokens.star,ht.tokens.forward_slash,ht.tokens.modulo]);)e=this._updateNode(new To(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([ht.tokens.minus,ht.tokens.bang,ht.tokens.tilde,ht.tokens.star,ht.tokens.and])?this._updateNode(new dr(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){const e=this._primary_expression(),i=this._postfix_expression();return i&&(e.postfix=i),e}_postfix_expression(){if(this._match(ht.tokens.bracket_left)){const e=this._short_circuit_or_expression();this._consume(ht.tokens.bracket_right,"Expected ']'.");const i=this._updateNode(new HA(e)),n=this._postfix_expression();return n&&(i.postfix=n),i}if(this._match(ht.tokens.period)){const e=this._consume(ht.tokens.name,"Expected member name."),i=this._postfix_expression(),n=this._updateNode(new mf(e.lexeme));return i&&(n.postfix=i),n}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){const i=this._getStruct(e);if(i!==null)return i;switch(e){case"void":return le.void;case"bool":return le.bool;case"i32":return le.i32;case"u32":return le.u32;case"f32":return le.f32;case"f16":return le.f16;case"vec2f":return Wt.vec2f;case"vec3f":return Wt.vec3f;case"vec4f":return Wt.vec4f;case"vec2i":return Wt.vec2i;case"vec3i":return Wt.vec3i;case"vec4i":return Wt.vec4i;case"vec2u":return Wt.vec2u;case"vec3u":return Wt.vec3u;case"vec4u":return Wt.vec4u;case"vec2h":return Wt.vec2h;case"vec3h":return Wt.vec3h;case"vec4h":return Wt.vec4h;case"mat2x2f":return Wt.mat2x2f;case"mat2x3f":return Wt.mat2x3f;case"mat2x4f":return Wt.mat2x4f;case"mat3x2f":return Wt.mat3x2f;case"mat3x3f":return Wt.mat3x3f;case"mat3x4f":return Wt.mat3x4f;case"mat4x2f":return Wt.mat4x2f;case"mat4x3f":return Wt.mat4x3f;case"mat4x4f":return Wt.mat4x4f;case"mat2x2h":return Wt.mat2x2h;case"mat2x3h":return Wt.mat2x3h;case"mat2x4h":return Wt.mat2x4h;case"mat3x2h":return Wt.mat3x2h;case"mat3x3h":return Wt.mat3x3h;case"mat3x4h":return Wt.mat3x4h;case"mat4x2h":return Wt.mat4x2h;case"mat4x3h":return Wt.mat4x3h;case"mat4x4h":return Wt.mat4x4h;case"mat2x2i":return Wt.mat2x2i;case"mat2x3i":return Wt.mat2x3i;case"mat2x4i":return Wt.mat2x4i;case"mat3x2i":return Wt.mat3x2i;case"mat3x3i":return Wt.mat3x3i;case"mat3x4i":return Wt.mat3x4i;case"mat4x2i":return Wt.mat4x2i;case"mat4x3i":return Wt.mat4x3i;case"mat4x4i":return Wt.mat4x4i;case"mat2x2u":return Wt.mat2x2u;case"mat2x3u":return Wt.mat2x3u;case"mat2x4u":return Wt.mat2x4u;case"mat3x2u":return Wt.mat3x2u;case"mat3x3u":return Wt.mat3x3u;case"mat3x4u":return Wt.mat3x4u;case"mat4x2u":return Wt.mat4x2u;case"mat4x3u":return Wt.mat4x3u;case"mat4x4u":return Wt.mat4x4u}return null}_validateTypeRange(e,i){if(i.name==="i32"){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if(i.name==="u32"&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(ht.tokens.ident)){const n=this._previous().toString();if(this._check(ht.tokens.paren_left)){const r=this._argument_expression_list(),s=this._getType(n);return s!==null?this._updateNode(new Zo(s,r)):this._updateNode(new FB(n,r))}if(this._context.constants.has(n)){const r=this._context.constants.get(n);return this._updateNode(new Wz(n,r.value))}return this._updateNode(new pa(n))}if(this._match(ht.tokens.int_literal)){const n=this._previous().toString();let r=n.endsWith("i")||n.endsWith("i")?le.i32:n.endsWith("u")||n.endsWith("U")?le.u32:le.x32;const s=parseInt(n);return this._validateTypeRange(s,r),this._updateNode(new _r(new Lt(s,this._exec.getTypeInfo(r)),r))}if(this._match(ht.tokens.uint_literal)){const n=parseInt(this._previous().toString());return this._validateTypeRange(n,le.u32),this._updateNode(new _r(new Lt(n,this._exec.getTypeInfo(le.u32)),le.u32))}if(this._match([ht.tokens.decimal_float_literal,ht.tokens.hex_float_literal])){let n=this._previous().toString(),r=n.endsWith("h");r&&(n=n.substring(0,n.length-1));const s=parseFloat(n);this._validateTypeRange(s,r?le.f16:le.f32);const a=r?le.f16:le.f32;return this._updateNode(new _r(new Lt(s,this._exec.getTypeInfo(a)),a))}if(this._match([ht.keywords.true,ht.keywords.false])){let n=this._previous().toString()===ht.keywords.true.rule;return this._updateNode(new _r(new Lt(n?1:0,this._exec.getTypeInfo(le.bool)),le.bool))}if(this._check(ht.tokens.paren_left))return this._paren_expression();if(this._match(ht.keywords.bitcast)){this._consume(ht.tokens.less_than,"Expected '<'.");const n=this._type_decl();this._consume(ht.tokens.greater_than,"Expected '>'.");const r=this._paren_expression();return this._updateNode(new Hz(n,r))}const e=this._type_decl(),i=this._argument_expression_list();return this._updateNode(new Zo(e,i))}_argument_expression_list(){if(!this._match(ht.tokens.paren_left))return null;const e=[];do{if(this._check(ht.tokens.paren_right))break;const i=this._short_circuit_or_expression();e.push(i)}while(this._match(ht.tokens.comma));return this._consume(ht.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(ht.tokens.paren_left);const e=this._short_circuit_or_expression();return this._match(ht.tokens.paren_right),e}_paren_expression(){this._consume(ht.tokens.paren_left,"Expected '('.");const e=this._short_circuit_or_expression();return this._consume(ht.tokens.paren_right,"Expected ')'."),e}_struct_decl(){if(!this._match(ht.keywords.struct))return null;const e=this._currentLine,i=this._consume(ht.tokens.ident,"Expected name for struct.").toString();this._consume(ht.tokens.brace_left,"Expected '{' for struct body.");const n=[];for(;!this._check(ht.tokens.brace_right);){const a=this._attribute(),o=this._consume(ht.tokens.name,"Expected variable name.").toString();this._consume(ht.tokens.colon,"Expected ':' for struct member type.");const l=this._attribute(),c=this._type_decl();c!=null&&(c.attributes=l),this._check(ht.tokens.brace_right)?this._match(ht.tokens.comma):this._consume(ht.tokens.comma,"Expected ',' for struct member."),n.push(this._updateNode(new eF(o,c,a)))}this._consume(ht.tokens.brace_right,"Expected '}' after struct body.");const r=this._currentLine,s=this._updateNode(new vc(i,n,e,r),e);return this._context.structs.set(i,s),s}_global_variable_decl(){const e=this._variable_decl();if(!e)return null;if(this._match(ht.tokens.equal)){const i=this._const_expression();e.value=i}if(e.type!==null&&e.value instanceof _r){if(e.value.type.name!=="x32"&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else e.type===null&&e.value instanceof _r&&(e.type=e.value.type.name==="x32"?le.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){const e=this._override_decl();return e&&this._match(ht.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(ht.keywords.const))return null;const i=this._consume(ht.tokens.name,"Expected variable name"),n=this._currentLine;let r=null;if(this._match(ht.tokens.colon)){const l=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=l)}let s=null;this._consume(ht.tokens.equal,"const declarations require an assignment");const a=this._short_circuit_or_expression();try{let l=[le.f32],c=a.constEvaluate(this._exec,l);c instanceof Lt&&this._validateTypeRange(c.value,l[0]),l[0]instanceof Wt&&l[0].format===null&&c.typeInfo instanceof pf&&c.typeInfo.format!==null&&(c.typeInfo.format.name==="f16"?l[0].format=le.f16:c.typeInfo.format.name==="f32"?l[0].format=le.f32:c.typeInfo.format.name==="i32"?l[0].format=le.i32:c.typeInfo.format.name==="u32"?l[0].format=le.u32:c.typeInfo.format.name==="bool"?l[0].format=le.bool:console.error(`TODO: impelement template format type ${c.typeInfo.format.name}`)),s=this._updateNode(new _r(c,l[0])),this._exec.context.setVariable(i.toString(),c)}catch{s=a}if(r!==null&&s instanceof _r){if(s.type.name!=="x32"&&r.getTypeName()!==s.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${s.type.name} to ${r.name}. Line:${this._currentLine}`);s.type=r,s.isScalar&&this._validateTypeRange(s.scalarValue,s.type)}else r===null&&s instanceof _r&&(r=(e=s==null?void 0:s.type)!==null&&e!==void 0?e:le.f32,r===le.x32&&(r=le.i32));const o=this._updateNode(new pv(i.toString(),r,"","",s),n);return this._context.constants.set(o.name,o),o}_global_let_decl(){if(!this._match(ht.keywords.let))return null;const e=this._currentLine,i=this._consume(ht.tokens.name,"Expected variable name");let n=null;if(this._match(ht.tokens.colon)){const s=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=s)}let r=null;if(this._match(ht.tokens.equal)&&(r=this._const_expression()),n!==null&&r instanceof _r){if(r.type.name!=="x32"&&n.getTypeName()!==r.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${r.type.name} to ${n.name}. Line:${this._currentLine}`);r.type=n}else n===null&&r instanceof _r&&(n=r.type.name==="x32"?le.i32:r.type);return r instanceof _r&&r.isScalar&&this._validateTypeRange(r.scalarValue,n),this._updateNode(new Jm(i.toString(),n,"","",r),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(ht.keywords.var))return null;const e=this._currentLine;let i="",n="";this._match(ht.tokens.less_than)&&(i=this._consume(ht.storage_class,"Expected storage_class.").toString(),this._match(ht.tokens.comma)&&(n=this._consume(ht.access_mode,"Expected access_mode.").toString()),this._consume(ht.tokens.greater_than,"Expected '>'."));const r=this._consume(ht.tokens.name,"Expected variable name");let s=null;if(this._match(ht.tokens.colon)){const a=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=a)}return this._updateNode(new Mc(r.toString(),s,i,n,null),e)}_override_decl(){if(!this._match(ht.keywords.override))return null;const e=this._consume(ht.tokens.name,"Expected variable name");let i=null;if(this._match(ht.tokens.colon)){const n=this._attribute();i=this._type_decl(),i!=null&&(i.attributes=n)}return this._updateNode(new PB(e.toString(),i,null))}_diagnostic(){this._consume(ht.tokens.paren_left,"Expected '('");const e=this._consume(ht.tokens.ident,"Expected severity control name.");this._consume(ht.tokens.comma,"Expected ','");let i=this._consume(ht.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(ht.tokens.period)&&(i+=`.${this._consume(ht.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(ht.tokens.paren_right,"Expected ')'"),this._updateNode(new zz(e.toString(),i))}_enable_directive(){const e=this._consume(ht.tokens.ident,"identity expected.");return this._updateNode(new Yat(e.toString()))}_requires_directive(){const e=[this._consume(ht.tokens.ident,"identity expected.").toString()];for(;this._match(ht.tokens.comma);){const i=this._consume(ht.tokens.ident,"identity expected.");e.push(i.toString())}return this._updateNode(new Gat(e))}_type_alias(){const e=this._consume(ht.tokens.ident,"identity expected.");this._consume(ht.tokens.equal,"Expected '=' for type alias.");let i=this._type_decl();if(i===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(i.name)&&(i=this._context.aliases.get(i.name).type);const n=this._updateNode(new NB(e.toString(),i));return this._context.aliases.set(n.name,n),n}_type_decl(){if(this._check([ht.tokens.ident,...ht.texel_format,ht.keywords.bool,ht.keywords.f32,ht.keywords.i32,ht.keywords.u32])){const n=this._advance().toString();if(this._context.structs.has(n))return this._context.structs.get(n);if(this._context.aliases.has(n))return this._context.aliases.get(n).type;if(!this._getType(n)){const r=this._updateNode(new J8(n));return this._forwardTypeCount++,r}return this._updateNode(new le(n))}let e=this._texture_sampler_types();if(e)return e;if(this._check(ht.template_types)){let n=this._advance().toString(),r=null,s=null;return this._match(ht.tokens.less_than)&&(r=this._type_decl(),s=null,this._match(ht.tokens.comma)&&(s=this._consume(ht.access_mode,"Expected access_mode for pointer").toString()),this._consume(ht.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new Wt(n,r,s))}if(this._match(ht.keywords.ptr)){let n=this._previous().toString();this._consume(ht.tokens.less_than,"Expected '<' for pointer.");const r=this._consume(ht.storage_class,"Expected storage_class for pointer");this._consume(ht.tokens.comma,"Expected ',' for pointer.");const s=this._type_decl();let a=null;return this._match(ht.tokens.comma)&&(a=this._consume(ht.access_mode,"Expected access_mode for pointer").toString()),this._consume(ht.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new _v(n,r.toString(),s,a))}const i=this._attribute();if(this._match(ht.keywords.array)){let n=null,r=-1;const s=this._previous();let a=null;if(this._match(ht.tokens.less_than)){n=this._type_decl(),this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);let l="";if(this._match(ht.tokens.comma)){a=this._shift_expression();try{l=a.constEvaluate(this._exec).toString(),a=null}catch{l="1"}}this._consume(ht.tokens.greater_than,"Expected '>' for array."),r=l?parseInt(l):0}const o=this._updateNode(new t_(s.toString(),i,n,r));return a&&this._deferArrayCountEval.push({arrayType:o,countNode:a}),o}return null}_texture_sampler_types(){if(this._match(ht.sampler_type))return this._updateNode(new Lm(this._previous().toString(),null,null));if(this._match(ht.depth_texture_type))return this._updateNode(new Lm(this._previous().toString(),null,null));if(this._match(ht.sampled_texture_type)||this._match(ht.multisampled_texture_type)){const e=this._previous();this._consume(ht.tokens.less_than,"Expected '<' for sampler type.");const i=this._type_decl();return this._consume(ht.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new Lm(e.toString(),i,null))}if(this._match(ht.storage_texture_type)){const e=this._previous();this._consume(ht.tokens.less_than,"Expected '<' for sampler type.");const i=this._consume(ht.texel_format,"Invalid texel format.").toString();this._consume(ht.tokens.comma,"Expected ',' after texel format.");const n=this._consume(ht.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(ht.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new Lm(e.toString(),i,n))}return null}_attribute(){let e=[];for(;this._match(ht.tokens.attr);){const i=this._consume(ht.attribute_name,"Expected attribute name"),n=this._updateNode(new Qz(i.toString(),null));if(this._match(ht.tokens.paren_left)){if(n.value=this._consume(ht.literal_or_ident,"Expected attribute value").toString(),this._check(ht.tokens.comma)){this._advance();do{const r=this._consume(ht.literal_or_ident,"Expected attribute value").toString();n.value instanceof Array||(n.value=[n.value]),n.value.push(r)}while(this._match(ht.tokens.comma))}this._consume(ht.tokens.paren_right,"Expected ')'")}e.push(n)}return e.length==0?null:e}}let uot=class extends sl{constructor(e){super(),e&&this.update(e)}update(e){const i=new cot().parse(e);this.updateAST(i)}};function hot(t){var s;const e={attributes:[],bindings:[]};let i;try{i=fot(t)}catch(a){return we.error(a.message)(),e}for(const a of i.uniforms){const o=[];for(const l of((s=a.type)==null?void 0:s.members)||[])o.push({name:l.name,type:rF(l.type)});e.bindings.push({type:"uniform",name:a.name,group:a.group,location:a.binding,members:o})}for(const a of i.textures)e.bindings.push({type:"texture",name:a.name,group:a.group,location:a.binding});for(const a of i.samplers)e.bindings.push({type:"sampler",name:a.name,group:a.group,location:a.binding});const n=i.entry.vertex[0],r=(n==null?void 0:n.inputs.length)||0;for(let a=0;a<r;a++){const o=n.inputs[a];if(o.locationType==="location"){const l=rF(o.type);e.attributes.push({name:o.name,location:Number(o.location),type:l})}}return e}function rF(t){return t.format?`${t.name}<${t.format.name}>`:t.name}function fot(t){try{return new uot(t)}catch(e){if(e instanceof Error)throw e;let i="WGSL parse error";throw typeof e=="object"&&(e!=null&&e.message)&&(i+=`: ${e.message} `),typeof e=="object"&&(e!=null&&e.token)&&(i+=e.token.line||""),new Error(i,{cause:e})}}const dot={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...dot}};const $a=globalThis.mathgl.config;function Aot(t,{precision:e=$a.precision}={}){return t=got(t),`${parseFloat(t.toPrecision(e))}`}function qA(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function al(t,e,i){return pot(t,n=>Math.max(e,Math.min(i,n)))}function YA(t,e,i){return qA(t)?t.map((n,r)=>YA(n,e[r],i)):i*e+(1-i)*t}function m_(t,e,i){const n=$a.EPSILON;try{if(t===e)return!0;if(qA(t)&&qA(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!m_(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=$a.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{$a.EPSILON=n}}function got(t){return Math.round(t/$a.EPSILON)*$a.EPSILON}function yot(t){return t.clone?t.clone():new Array(t.length)}function pot(t,e,i){if(qA(t)){const n=t;i=i||yot(n);for(let r=0;r<i.length&&r<n.length;++r){const s=typeof t=="number"?t:t[r];i[r]=e(s,r,i)}return i}return e(t)}class Kz extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,i=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=e[n+i];return this.check()}toArray(e=[],i=0){for(let n=0;n<this.ELEMENTS;++n)e[i+n]=this[n];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:qA(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString($a)}formatString(e){let i="";for(let n=0;n<this.ELEMENTS;++n)i+=(n>0?", ":"")+Aot(this[n],e);return`${e.printTypes?this.constructor.name:""}[${i}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let i=0;i<this.ELEMENTS;++i)if(!m_(this[i],e[i]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let i=0;i<this.ELEMENTS;++i)if(this[i]!==e[i])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,i,n){if(n===void 0)return this.lerp(this,e,i);for(let r=0;r<this.ELEMENTS;++r){const s=e[r],a=typeof i=="number"?i:i[r];this[r]=s+n*(a-s)}return this.check()}min(e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.min(e[i],this[i]);return this.check()}max(e){for(let i=0;i<this.ELEMENTS;++i)this[i]=Math.max(e[i],this[i]);return this.check()}clamp(e,i){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e[n]),i[n]);return this.check()}add(...e){for(const i of e)for(let n=0;n<this.ELEMENTS;++n)this[n]+=i[n];return this.check()}subtract(...e){for(const i of e)for(let n=0;n<this.ELEMENTS;++n)this[n]-=i[n];return this.check()}scale(e){if(typeof e=="number")for(let i=0;i<this.ELEMENTS;++i)this[i]*=e;else for(let i=0;i<this.ELEMENTS&&i<e.length;++i)this[i]*=e[i];return this.check()}multiplyByScalar(e){for(let i=0;i<this.ELEMENTS;++i)this[i]*=e;return this.check()}check(){if($a.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let i=0;i<this.ELEMENTS;++i)e=e&&Number.isFinite(this[i]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let i=0;i<this.ELEMENTS;++i)this[i]=e;return this.check()}addScalar(e){for(let i=0;i<this.ELEMENTS;++i)this[i]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let i=0;i<this.ELEMENTS;++i)this[i]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,i){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],e),i);return this.check()}get elements(){return this}}function mot(t,e){if(t.length!==e)return!1;for(let i=0;i<t.length;++i)if(!Number.isFinite(t[i]))return!1;return!0}function ya(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function E3(t,e,i=""){if($a.debug&&!mot(t,e))throw new Error(`math.gl: ${i} some fields set to invalid numbers'`);return t}function sF(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}let _ot=class extends Kz{get x(){return this[0]}set x(e){this[0]=ya(e)}get y(){return this[1]}set y(e){this[1]=ya(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let i=0;i<this.ELEMENTS;++i)e+=this[i]*this[i];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let i=0;for(let n=0;n<this.ELEMENTS;++n){const r=this[n]-e[n];i+=r*r}return ya(i)}dot(e){let i=0;for(let n=0;n<this.ELEMENTS;++n)i+=this[n]*e[n];return ya(i)}normalize(){const e=this.magnitude();if(e!==0)for(let i=0;i<this.ELEMENTS;++i)this[i]/=e;return this.check()}multiply(...e){for(const i of e)for(let n=0;n<this.ELEMENTS;++n)this[n]*=i[n];return this.check()}divide(...e){for(const i of e)for(let n=0;n<this.ELEMENTS;++n)this[n]/=i[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return sF(e>=0&&e<this.ELEMENTS,"index is out of range"),ya(this[e])}setComponent(e,i){return sF(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=i,this.check()}addVectors(e,i){return this.copy(e).add(i)}subVectors(e,i){return this.copy(e).subtract(i)}multiplyVectors(e,i){return this.copy(e).multiply(i)}addScaledVector(e,i){return this.add(new this.constructor(e).multiplyScalar(i))}};const vv=1e-6;let GA=typeof Float32Array<"u"?Float32Array:Array;function bot(){const t=new GA(2);return GA!=Float32Array&&(t[0]=0,t[1]=0),t}function aF(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function vot(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Zz(t,e,i,n){const r=e[0],s=e[1];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t}function Tot(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t}(function(){const t=bot();return function(e,i,n,r,s,a){let o,l;for(i||(i=2),n||(n=0),r?l=Math.min(r*i+n,e.length):l=e.length,o=n;o<l;o+=i)t[0]=e[o],t[1]=e[o+1],s(t,t,a),e[o]=t[0],e[o+1]=t[1];return e}})();function Sot(t,e,i){const n=e[0],r=e[1],s=i[3]*n+i[7]*r||1;return t[0]=(i[0]*n+i[4]*r)/s,t[1]=(i[1]*n+i[5]*r)/s,t}function Jz(t,e,i){const n=e[0],r=e[1],s=e[2],a=i[3]*n+i[7]*r+i[11]*s||1;return t[0]=(i[0]*n+i[4]*r+i[8]*s)/a,t[1]=(i[1]*n+i[5]*r+i[9]*s)/a,t[2]=(i[2]*n+i[6]*r+i[10]*s)/a,t}function wot(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t[2]=e[2],t}function Mot(){const t=new GA(3);return GA!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Iot(t){const e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)}function Eot(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Bot(t){const e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}function Oot(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Rot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Dot(t,e,i){const n=e[0],r=e[1],s=e[2],a=i[0],o=i[1],l=i[2];return t[0]=r*l-s*o,t[1]=s*a-n*l,t[2]=n*o-r*a,t}function Cot(t,e,i,n){const r=e[0],s=e[1],a=e[2];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t[2]=a+n*(i[2]-a),t}function tV(t,e,i){const n=e[0],r=e[1],s=e[2];let a=i[3]*n+i[7]*r+i[11]*s+i[15];return a=a||1,t[0]=(i[0]*n+i[4]*r+i[8]*s+i[12])/a,t[1]=(i[1]*n+i[5]*r+i[9]*s+i[13])/a,t[2]=(i[2]*n+i[6]*r+i[10]*s+i[14])/a,t}function Pot(t,e,i){const n=e[0],r=e[1],s=e[2];return t[0]=n*i[0]+r*i[3]+s*i[6],t[1]=n*i[1]+r*i[4]+s*i[7],t[2]=n*i[2]+r*i[5]+s*i[8],t}function xot(t,e,i){const n=i[0],r=i[1],s=i[2],a=i[3],o=e[0],l=e[1],c=e[2];let h=r*c-s*l,A=s*o-n*c,m=n*l-r*o,b=r*m-s*A,S=s*h-n*m,M=n*A-r*h;const I=a*2;return h*=I,A*=I,m*=I,b*=2,S*=2,M*=2,t[0]=o+h+b,t[1]=l+A+S,t[2]=c+m+M,t}function Not(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[0],s[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),s[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Fot(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),s[1]=r[1],s[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Lot(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),s[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),s[2]=r[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function Uot(t,e){const i=t[0],n=t[1],r=t[2],s=e[0],a=e[1],o=e[2],l=Math.sqrt((i*i+n*n+r*r)*(s*s+a*a+o*o)),c=l&&Rot(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}const eV=Eot,kot=Iot,B3=Bot;(function(){const t=Mot();return function(e,i,n,r,s,a){let o,l;for(i||(i=3),n||(n=0),r?l=Math.min(r*i+n,e.length):l=e.length,o=n;o<l;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2];return e}})();const O3=[0,0,0];let Hb;class Al extends _ot{static get ZERO(){return Hb||(Hb=new Al(0,0,0),Object.freeze(Hb)),Hb}constructor(e=0,i=0,n=0){super(-0,-0,-0),arguments.length===1&&qA(e)?this.copy(e):($a.debug&&(ya(e),ya(i),ya(n)),this[0]=e,this[1]=i,this[2]=n)}set(e,i,n){return this[0]=e,this[1]=i,this[2]=n,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return $a.debug&&(ya(e.x),ya(e.y),ya(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ya(e)}angle(e){return Uot(this,e)}cross(e){return Dot(this,this,e),this.check()}rotateX({radians:e,origin:i=O3}){return Not(this,this,i,e),this.check()}rotateY({radians:e,origin:i=O3}){return Fot(this,this,i,e),this.check()}rotateZ({radians:e,origin:i=O3}){return Lot(this,this,i,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return tV(this,this,e),this.check()}transformAsVector(e){return Jz(this,this,e),this.check()}transformByMatrix3(e){return Pot(this,this,e),this.check()}transformByMatrix2(e){return wot(this,this,e),this.check()}transformByQuaternion(e){return xot(this,this,e),this.check()}}class jot extends Kz{toString(){let e="[";if($a.printRowMajor){e+="row-major:";for(let i=0;i<this.RANK;++i)for(let n=0;n<this.RANK;++n)e+=` ${this[n*this.RANK+i]}`}else{e+="column-major:";for(let i=0;i<this.ELEMENTS;++i)e+=` ${this[i]}`}return e+="]",e}getElementIndex(e,i){return i*this.RANK+e}getElement(e,i){return this[i*this.RANK+e]}setElement(e,i,n){return this[i*this.RANK+e]=ya(n),this}getColumn(e,i=new Array(this.RANK).fill(-0)){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)i[r]=this[n+r];return i}setColumn(e,i){const n=e*this.RANK;for(let r=0;r<this.RANK;++r)this[n+r]=i[r];return this}}function zot(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Vot(t,e){if(t===e){const i=e[1],n=e[2],r=e[3],s=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=r,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function KM(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],c=e[7],h=e[8],A=e[9],m=e[10],b=e[11],S=e[12],M=e[13],I=e[14],O=e[15],D=i*o-n*a,B=i*l-r*a,P=i*c-s*a,j=n*l-r*o,N=n*c-s*o,F=r*c-s*l,$=h*M-A*S,V=h*I-m*S,Z=h*O-b*S,nt=A*I-m*M,X=A*O-b*M,bt=m*O-b*I;let Tt=D*bt-B*X+P*nt+j*Z-N*V+F*$;return Tt?(Tt=1/Tt,t[0]=(o*bt-l*X+c*nt)*Tt,t[1]=(r*X-n*bt-s*nt)*Tt,t[2]=(M*F-I*N+O*j)*Tt,t[3]=(m*N-A*F-b*j)*Tt,t[4]=(l*Z-a*bt-c*V)*Tt,t[5]=(i*bt-r*Z+s*V)*Tt,t[6]=(I*P-S*F-O*B)*Tt,t[7]=(h*F-m*P+b*B)*Tt,t[8]=(a*X-o*Z+c*$)*Tt,t[9]=(n*Z-i*X-s*$)*Tt,t[10]=(S*N-M*P+O*D)*Tt,t[11]=(A*P-h*N-b*D)*Tt,t[12]=(o*V-a*nt-l*$)*Tt,t[13]=(i*nt-n*V+r*$)*Tt,t[14]=(M*B-S*j-I*D)*Tt,t[15]=(h*j-A*B+m*D)*Tt,t):null}function $ot(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7],c=t[8],h=t[9],A=t[10],m=t[11],b=t[12],S=t[13],M=t[14],I=t[15],O=e*a-i*s,D=e*o-n*s,B=i*o-n*a,P=c*S-h*b,j=c*M-A*b,N=h*M-A*S,F=e*N-i*j+n*P,$=s*N-a*j+o*P,V=c*B-h*D+A*O,Z=b*B-S*D+M*O;return l*F-r*$+I*V-m*Z}function cf(t,e,i){const n=e[0],r=e[1],s=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],A=e[8],m=e[9],b=e[10],S=e[11],M=e[12],I=e[13],O=e[14],D=e[15];let B=i[0],P=i[1],j=i[2],N=i[3];return t[0]=B*n+P*o+j*A+N*M,t[1]=B*r+P*l+j*m+N*I,t[2]=B*s+P*c+j*b+N*O,t[3]=B*a+P*h+j*S+N*D,B=i[4],P=i[5],j=i[6],N=i[7],t[4]=B*n+P*o+j*A+N*M,t[5]=B*r+P*l+j*m+N*I,t[6]=B*s+P*c+j*b+N*O,t[7]=B*a+P*h+j*S+N*D,B=i[8],P=i[9],j=i[10],N=i[11],t[8]=B*n+P*o+j*A+N*M,t[9]=B*r+P*l+j*m+N*I,t[10]=B*s+P*c+j*b+N*O,t[11]=B*a+P*h+j*S+N*D,B=i[12],P=i[13],j=i[14],N=i[15],t[12]=B*n+P*o+j*A+N*M,t[13]=B*r+P*l+j*m+N*I,t[14]=B*s+P*c+j*b+N*O,t[15]=B*a+P*h+j*S+N*D,t}function f2(t,e,i){const n=i[0],r=i[1],s=i[2];let a,o,l,c,h,A,m,b,S,M,I,O;return e===t?(t[12]=e[0]*n+e[4]*r+e[8]*s+e[12],t[13]=e[1]*n+e[5]*r+e[9]*s+e[13],t[14]=e[2]*n+e[6]*r+e[10]*s+e[14],t[15]=e[3]*n+e[7]*r+e[11]*s+e[15]):(a=e[0],o=e[1],l=e[2],c=e[3],h=e[4],A=e[5],m=e[6],b=e[7],S=e[8],M=e[9],I=e[10],O=e[11],t[0]=a,t[1]=o,t[2]=l,t[3]=c,t[4]=h,t[5]=A,t[6]=m,t[7]=b,t[8]=S,t[9]=M,t[10]=I,t[11]=O,t[12]=a*n+h*r+S*s+e[12],t[13]=o*n+A*r+M*s+e[13],t[14]=l*n+m*r+I*s+e[14],t[15]=c*n+b*r+O*s+e[15]),t}function zB(t,e,i){const n=i[0],r=i[1],s=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Wot(t,e,i,n){let r=n[0],s=n[1],a=n[2],o=Math.sqrt(r*r+s*s+a*a),l,c,h,A,m,b,S,M,I,O,D,B,P,j,N,F,$,V,Z,nt,X,bt,Tt,Ot;return o<vv?null:(o=1/o,r*=o,s*=o,a*=o,c=Math.sin(i),l=Math.cos(i),h=1-l,A=e[0],m=e[1],b=e[2],S=e[3],M=e[4],I=e[5],O=e[6],D=e[7],B=e[8],P=e[9],j=e[10],N=e[11],F=r*r*h+l,$=s*r*h+a*c,V=a*r*h-s*c,Z=r*s*h-a*c,nt=s*s*h+l,X=a*s*h+r*c,bt=r*a*h+s*c,Tt=s*a*h-r*c,Ot=a*a*h+l,t[0]=A*F+M*$+B*V,t[1]=m*F+I*$+P*V,t[2]=b*F+O*$+j*V,t[3]=S*F+D*$+N*V,t[4]=A*Z+M*nt+B*X,t[5]=m*Z+I*nt+P*X,t[6]=b*Z+O*nt+j*X,t[7]=S*Z+D*nt+N*X,t[8]=A*bt+M*Tt+B*Ot,t[9]=m*bt+I*Tt+P*Ot,t[10]=b*bt+O*Tt+j*Ot,t[11]=S*bt+D*Tt+N*Ot,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function iV(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],h=e[9],A=e[10],m=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+c*n,t[5]=a*r+h*n,t[6]=o*r+A*n,t[7]=l*r+m*n,t[8]=c*r-s*n,t[9]=h*r-a*n,t[10]=A*r-o*n,t[11]=m*r-l*n,t}function Hot(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[0],a=e[1],o=e[2],l=e[3],c=e[8],h=e[9],A=e[10],m=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-c*n,t[1]=a*r-h*n,t[2]=o*r-A*n,t[3]=l*r-m*n,t[8]=s*n+c*r,t[9]=a*n+h*r,t[10]=o*n+A*r,t[11]=l*n+m*r,t}function nV(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[0],a=e[1],o=e[2],l=e[3],c=e[4],h=e[5],A=e[6],m=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+c*n,t[1]=a*r+h*n,t[2]=o*r+A*n,t[3]=l*r+m*n,t[4]=c*r-s*n,t[5]=h*r-a*n,t[6]=A*r-o*n,t[7]=m*r-l*n,t}function qot(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],a=i+i,o=n+n,l=r+r,c=i*a,h=n*a,A=n*o,m=r*a,b=r*o,S=r*l,M=s*a,I=s*o,O=s*l;return t[0]=1-A-S,t[1]=h+O,t[2]=m-I,t[3]=0,t[4]=h-O,t[5]=1-c-S,t[6]=b+M,t[7]=0,t[8]=m+I,t[9]=b-M,t[10]=1-c-A,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Yot(t,e,i,n,r,s,a){const o=1/(i-e),l=1/(r-n),c=1/(s-a);return t[0]=s*2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(i+e)*o,t[9]=(r+n)*l,t[10]=(a+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*c,t[15]=0,t}function Got(t,e,i,n,r){const s=1/Math.tan(e/2);if(t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0){const a=1/(n-r);t[10]=(r+n)*a,t[14]=2*r*n*a}else t[10]=-1,t[14]=-2*n;return t}const Xot=Got;function Qot(t,e,i,n,r,s,a){const o=1/(e-i),l=1/(n-r),c=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*o,t[13]=(r+n)*l,t[14]=(a+s)*c,t[15]=1,t}const Kot=Qot;function Zot(t,e,i,n){let r,s,a,o,l,c,h,A,m,b;const S=e[0],M=e[1],I=e[2],O=n[0],D=n[1],B=n[2],P=i[0],j=i[1],N=i[2];return Math.abs(S-P)<vv&&Math.abs(M-j)<vv&&Math.abs(I-N)<vv?zot(t):(A=S-P,m=M-j,b=I-N,r=1/Math.sqrt(A*A+m*m+b*b),A*=r,m*=r,b*=r,s=D*b-B*m,a=B*A-O*b,o=O*m-D*A,r=Math.sqrt(s*s+a*a+o*o),r?(r=1/r,s*=r,a*=r,o*=r):(s=0,a=0,o=0),l=m*o-b*a,c=b*s-A*o,h=A*a-m*s,r=Math.sqrt(l*l+c*c+h*h),r?(r=1/r,l*=r,c*=r,h*=r):(l=0,c=0,h=0),t[0]=s,t[1]=l,t[2]=A,t[3]=0,t[4]=a,t[5]=c,t[6]=m,t[7]=0,t[8]=o,t[9]=h,t[10]=b,t[11]=0,t[12]=-(s*S+a*M+o*I),t[13]=-(l*S+c*M+h*I),t[14]=-(A*S+m*M+b*I),t[15]=1,t)}function Jot(){const t=new GA(4);return GA!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function rV(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function A0(t,e,i){const n=e[0],r=e[1],s=e[2],a=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*s+i[12]*a,t[1]=i[1]*n+i[5]*r+i[9]*s+i[13]*a,t[2]=i[2]*n+i[6]*r+i[10]*s+i[14]*a,t[3]=i[3]*n+i[7]*r+i[11]*s+i[15]*a,t}(function(){const t=Jot();return function(e,i,n,r,s,a){let o,l;for(i||(i=4),n||(n=0),r?l=Math.min(r*i+n,e.length):l=e.length,o=n;o<l;o+=i)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}})();var ZM;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(ZM||(ZM={}));const tlt=45*Math.PI/180,elt=1,R3=.1,D3=500,ilt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Po extends jot{static get IDENTITY(){return rlt()}static get ZERO(){return nlt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return ZM}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,i,n,r,s,a,o,l,c,h,A,m,b,S,M,I){return this[0]=e,this[1]=i,this[2]=n,this[3]=r,this[4]=s,this[5]=a,this[6]=o,this[7]=l,this[8]=c,this[9]=h,this[10]=A,this[11]=m,this[12]=b,this[13]=S,this[14]=M,this[15]=I,this.check()}setRowMajor(e,i,n,r,s,a,o,l,c,h,A,m,b,S,M,I){return this[0]=e,this[1]=s,this[2]=c,this[3]=b,this[4]=i,this[5]=a,this[6]=h,this[7]=S,this[8]=n,this[9]=o,this[10]=A,this[11]=M,this[12]=r,this[13]=l,this[14]=m,this[15]=I,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(ilt)}fromObject(e){return this.check()}fromQuaternion(e){return qot(this,e),this.check()}frustum(e){const{left:i,right:n,bottom:r,top:s,near:a=R3,far:o=D3}=e;return o===1/0?slt(this,i,n,r,s,a):Yot(this,i,n,r,s,a,o),this.check()}lookAt(e){const{eye:i,center:n=[0,0,0],up:r=[0,1,0]}=e;return Zot(this,i,n,r),this.check()}ortho(e){const{left:i,right:n,bottom:r,top:s,near:a=R3,far:o=D3}=e;return Kot(this,i,n,r,s,a,o),this.check()}orthographic(e){const{fovy:i=tlt,aspect:n=elt,focalDistance:r=1,near:s=R3,far:a=D3}=e;oF(i);const o=i/2,l=r*Math.tan(o),c=l*n;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:a})}perspective(e){const{fovy:i=45*Math.PI/180,aspect:n=1,near:r=.1,far:s=500}=e;return oF(i),Xot(this,i,n,r,s),this.check()}determinant(){return $ot(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,i){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];const n=this.getScale(i),r=1/n[0],s=1/n[1],a=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*a,e[3]=0,e[4]=this[4]*r,e[5]=this[5]*s,e[6]=this[6]*a,e[7]=0,e[8]=this[8]*r,e[9]=this[9]*s,e[10]=this[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,i){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],i=i||[-0,-0,-0];const n=this.getScale(i),r=1/n[0],s=1/n[1],a=1/n[2];return e[0]=this[0]*r,e[1]=this[1]*s,e[2]=this[2]*a,e[3]=this[4]*r,e[4]=this[5]*s,e[5]=this[6]*a,e[6]=this[8]*r,e[7]=this[9]*s,e[8]=this[10]*a,e}transpose(){return Vot(this,this),this.check()}invert(){return KM(this,this),this.check()}multiplyLeft(e){return cf(this,e,this),this.check()}multiplyRight(e){return cf(this,this,e),this.check()}rotateX(e){return iV(this,this,e),this.check()}rotateY(e){return Hot(this,this,e),this.check()}rotateZ(e){return nV(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,i){return Wot(this,this,e,i),this.check()}scale(e){return zB(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return f2(this,this,e),this.check()}transform(e,i){return e.length===4?(i=A0(i||[-0,-0,-0,-0],e,this),E3(i,4),i):this.transformAsPoint(e,i)}transformAsPoint(e,i){const{length:n}=e;let r;switch(n){case 2:r=Tot(i||[-0,-0],e,this);break;case 3:r=tV(i||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return E3(r,e.length),r}transformAsVector(e,i){let n;switch(e.length){case 2:n=Sot(i||[-0,-0],e,this);break;case 3:n=Jz(i||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return E3(n,e.length),n}transformPoint(e,i){return this.transformAsPoint(e,i)}transformVector(e,i){return this.transformAsPoint(e,i)}transformDirection(e,i){return this.transformAsVector(e,i)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,i,n){return this.identity().translate([e,i,n])}}let qb,Yb;function nlt(){return qb||(qb=new Po([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(qb)),qb}function rlt(){return Yb||(Yb=new Po,Object.freeze(Yb)),Yb}function oF(t){if(t>Math.PI*2)throw Error("expected radians")}function slt(t,e,i,n,r,s){const a=2*s/(i-e),o=2*s/(r-n),l=(i+e)/(i-e),c=(r+n)/(r-n),h=-1,A=-1,m=-2*s;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=h,t[11]=A,t[12]=0,t[13]=0,t[14]=m,t[15]=0,t}function sV(t,e=[],i=0){const n=Math.fround(t),r=t-n;return e[i]=n,e[i+1]=r,e}function alt(t){return t-Math.fround(t)}function olt(t){const e=new Float32Array(32);for(let i=0;i<4;++i)for(let n=0;n<4;++n){const r=i*4+n;sV(t[n*4+i],e,r*2)}return e}const llt=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND

// All these functions are for substituting tan() function from Intel GPU only
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }

    // 2pi range reduction
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,clt={name:"fp32",vs:llt},ult=`
uniform fp64arithmeticUniforms {
  uniform float ONE;
} fp64;

/*
About LUMA_FP64_CODE_ELIMINATION_WORKAROUND

The purpose of this workaround is to prevent shader compilers from
optimizing away necessary arithmetic operations by swapping their sequences
or transform the equation to some 'equivalent' form.

The method is to multiply an artifical variable, ONE, which will be known to
the compiler to be 1 only at runtime. The whole expression is then represented
as a polynomial with respective to ONE. In the coefficients of all terms, only one a
and one b should appear

err = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE
*/

// Divide float number to high and low floats to extend fraction bits
vec2 split(float a) {
  const float SPLIT = 4097.0;
  float t = a * SPLIT;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float a_hi = t * fp64.ONE - (t - a);
  float a_lo = a * fp64.ONE - a_hi;
#else
  float a_hi = t - (t - a);
  float a_lo = a - a_hi;
#endif
  return vec2(a_hi, a_lo);
}

// Divide float number again when high float uses too many fraction bits
vec2 split2(vec2 a) {
  vec2 b = split(a.x);
  b.y += a.y;
  return b;
}

// Special sum operation when a > b
vec2 quickTwoSum(float a, float b) {
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float sum = (a + b) * fp64.ONE;
  float err = b - (sum - a) * fp64.ONE;
#else
  float sum = a + b;
  float err = b - (sum - a);
#endif
  return vec2(sum, err);
}

// General sum operation
vec2 twoSum(float a, float b) {
  float s = (a + b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE + (b - v);
#else
  float v = s - a;
  float err = (a - (s - v)) + (b - v);
#endif
  return vec2(s, err);
}

vec2 twoSub(float a, float b) {
  float s = (a - b);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float v = (s * fp64.ONE - a) * fp64.ONE;
  float err = (a - (s - v) * fp64.ONE) * fp64.ONE * fp64.ONE * fp64.ONE - (b + v);
#else
  float v = s - a;
  float err = (a - (s - v)) - (b + v);
#endif
  return vec2(s, err);
}

vec2 twoSqr(float a) {
  float prod = a * a;
  vec2 a_fp64 = split(a);
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  float err = ((a_fp64.x * a_fp64.x - prod) * fp64.ONE + 2.0 * a_fp64.x *
    a_fp64.y * fp64.ONE * fp64.ONE) + a_fp64.y * a_fp64.y * fp64.ONE * fp64.ONE * fp64.ONE;
#else
  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;
#endif
  return vec2(prod, err);
}

vec2 twoProd(float a, float b) {
  float prod = a * b;
  vec2 a_fp64 = split(a);
  vec2 b_fp64 = split(b);
  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +
    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;
  return vec2(prod, err);
}

vec2 sum_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSum(a.x, b.x);
  t = twoSum(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 sub_fp64(vec2 a, vec2 b) {
  vec2 s, t;
  s = twoSub(a.x, b.x);
  t = twoSub(a.y, b.y);
  s.y += t.x;
  s = quickTwoSum(s.x, s.y);
  s.y += t.y;
  s = quickTwoSum(s.x, s.y);
  return s;
}

vec2 mul_fp64(vec2 a, vec2 b) {
  vec2 prod = twoProd(a.x, b.x);
  // y component is for the error
  prod.y += a.x * b.y;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  prod.y += a.y * b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  prod = split2(prod);
#endif
  prod = quickTwoSum(prod.x, prod.y);
  return prod;
}

vec2 div_fp64(vec2 a, vec2 b) {
  float xn = 1.0 / b.x;
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  vec2 yn = mul_fp64(a, vec2(xn, 0));
#else
  vec2 yn = a * xn;
#endif
  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;
  vec2 prod = twoProd(xn, diff);
  return sum_fp64(yn, prod);
}

vec2 sqrt_fp64(vec2 a) {
  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);
  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);

  float x = 1.0 / sqrt(a.x);
  float yn = a.x * x;
#if defined(LUMA_FP64_CODE_ELIMINATION_WORKAROUND)
  vec2 yn_sqr = twoSqr(yn) * fp64.ONE;
#else
  vec2 yn_sqr = twoSqr(yn);
#endif
  float diff = sub_fp64(a, yn_sqr).x;
  vec2 prod = twoProd(x * 0.5, diff);
#if defined(LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND)
  return sum_fp64(split(yn), prod);
#else
  return sum_fp64(vec2(yn, 0.0), prod);
#endif
}
`,hlt={ONE:1},flt={name:"fp64arithmetic",vs:ult,defaultUniforms:hlt,uniformTypes:{ONE:"f32"},fp64ify:sV,fp64LowPart:alt,fp64ifyMatrix4:olt},dlt=[0,1,1,1],Alt=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

out vec4 picking_vRGBcolor_Avalid;

// Normalize unsigned byte color to 0-1 range
vec3 picking_normalizeColor(vec3 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

// Normalize unsigned byte color to 0-1 range
vec4 picking_normalizeColor(vec4 color) {
  return picking.useFloatColors > 0.5 ? color : color / 255.0;
}

bool picking_isColorZero(vec3 color) {
  return dot(color, vec3(1.0)) < 0.00001;
}

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.00001;
}

// Check if this vertex is highlighted 
bool isVertexHighlighted(vec3 vertexColor) {
  vec3 highlightedObjectColor = picking_normalizeColor(picking.highlightedObjectColor);
  return
    bool(picking.isHighlightActive) && picking_isColorZero(abs(vertexColor - highlightedObjectColor));
}

// Set the current picking color
void picking_setPickingColor(vec3 pickingColor) {
  pickingColor = picking_normalizeColor(pickingColor);

  if (bool(picking.isActive)) {
    // Use alpha as the validity flag. If pickingColor is [0, 0, 0] fragment is non-pickable
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!bool(picking.isAttribute)) {
      // Stores the picking color so that the fragment shader can render it during picking
      picking_vRGBcolor_Avalid.rgb = pickingColor;
    }
  } else {
    // Do the comparison with selected item color in vertex shader as it should mean fewer compares
    picking_vRGBcolor_Avalid.a = float(isVertexHighlighted(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.r = value;
  }
}

void picking_setPickingAttribute(vec2 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}

void picking_setPickingAttribute(vec3 value) {
  if (bool(picking.isAttribute)) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,glt=`uniform pickingUniforms {
  float isActive;
  float isAttribute;
  float isHighlightActive;
  float useFloatColors;
  vec3 highlightedObjectColor;
  vec4 highlightColor;
} picking;

in vec4 picking_vRGBcolor_Avalid;

/*
 * Returns highlight color if this item is selected.
 */
vec4 picking_filterHighlightColor(vec4 color) {
  // If we are still picking, we don't highlight
  if (picking.isActive > 0.5) {
    return color;
  }

  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    // Blend in highlight color based on its alpha value
    float highLightAlpha = picking.highlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking.highlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 picking_filterPickingColor(vec4 color) {
  if (bool(picking.isActive)) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 picking_filterColor(vec4 color) {
  vec4 highlightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highlightColor);
}
`,lF={props:{},uniforms:{},name:"picking",uniformTypes:{isActive:"f32",isAttribute:"f32",isHighlightActive:"f32",useFloatColors:"f32",highlightedObjectColor:"vec3<f32>",highlightColor:"vec4<f32>"},defaultUniforms:{isActive:!1,isAttribute:!1,isHighlightActive:!1,useFloatColors:!0,highlightedObjectColor:[0,0,0],highlightColor:dlt},vs:Alt,fs:glt,getUniforms:ylt};function ylt(t={},e){const i={};if(t.highlightedObjectColor!==void 0)if(t.highlightedObjectColor===null)i.isHighlightActive=!1;else{i.isHighlightActive=!0;const n=t.highlightedObjectColor.slice(0,3);i.highlightedObjectColor=n}if(t.highlightColor){const n=Array.from(t.highlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),i.highlightColor=n}return t.isActive!==void 0&&(i.isActive=!!t.isActive,i.isAttribute=!!t.isAttribute),t.useFloatColors!==void 0&&(i.useFloatColors=!!t.useFloatColors),i}const cF=`precision highp int;

// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
  vec3 color;
};

struct PointLight {
  vec3 color;
  vec3 position;
  vec3 attenuation; // 2nd order x:Constant-y:Linear-z:Exponential
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform lightingUniforms {
  int enabled;
  int lightType;

  int directionalLightCount;
  int pointLightCount;

  vec3 ambientColor;

  vec3 lightColor0;
  vec3 lightPosition0;
  vec3 lightDirection0;
  vec3 lightAttenuation0;

  vec3 lightColor1;
  vec3 lightPosition1;
  vec3 lightDirection1;
  vec3 lightAttenuation1;

  vec3 lightColor2;
  vec3 lightPosition2;
  vec3 lightDirection2;
  vec3 lightAttenuation2;
} lighting;

PointLight lighting_getPointLight(int index) {
  switch (index) {
    case 0:
      return PointLight(lighting.lightColor0, lighting.lightPosition0, lighting.lightAttenuation0);
    case 1:
      return PointLight(lighting.lightColor1, lighting.lightPosition1, lighting.lightAttenuation1);
    case 2:
    default:  
      return PointLight(lighting.lightColor2, lighting.lightPosition2, lighting.lightAttenuation2);
  }
}

DirectionalLight lighting_getDirectionalLight(int index) {
  switch (index) {
    case 0:
      return DirectionalLight(lighting.lightColor0, lighting.lightDirection0);
    case 1:
      return DirectionalLight(lighting.lightColor1, lighting.lightDirection1);
    case 2:
    default:   
      return DirectionalLight(lighting.lightColor2, lighting.lightDirection2);
  }
} 

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

// #endif
`,plt=`// #if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))
struct AmbientLight {
  color: vec3<f32>,
};

struct PointLight {
  color: vec3<f32>,
  position: vec3<f32>,
  attenuation: vec3<f32>, // 2nd order x:Constant-y:Linear-z:Exponential
};

struct DirectionalLight {
  color: vec3<f32>,
  direction: vec3<f32>,
};

struct lightingUniforms {
  enabled: i32,
  pointLightCount: i32,
  directionalLightCount: i32,

  ambientColor: vec3<f32>,

  // TODO - support multiple lights by uncommenting arrays below
  lightType: i32,
  lightColor: vec3<f32>,
  lightDirection: vec3<f32>,
  lightPosition: vec3<f32>,
  lightAttenuation: vec3<f32>,

  // AmbientLight ambientLight;
  // PointLight pointLight[MAX_LIGHTS];
  // DirectionalLight directionalLight[MAX_LIGHTS];
};

// Binding 0:1 is reserved for lighting (Note: could go into separate bind group as it is stable across draw calls)
@binding(1) @group(0) var<uniform> lighting : lightingUniforms;

fn lighting_getPointLight(index: i32) -> PointLight {
  return PointLight(lighting.lightColor, lighting.lightPosition, lighting.lightAttenuation);
}

fn lighting_getDirectionalLight(index: i32) -> DirectionalLight {
  return DirectionalLight(lighting.lightColor, lighting.lightDirection);
} 

fn getPointLightAttenuation(pointLight: PointLight, distance: f32) -> f32 {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}
`,aV=3,mlt=255;var __;(function(t){t[t.POINT=0]="POINT",t[t.DIRECTIONAL=1]="DIRECTIONAL"})(__||(__={}));const e_={props:{},uniforms:{},name:"lighting",defines:{MAX_LIGHTS:aV},uniformTypes:{enabled:"i32",lightType:"i32",directionalLightCount:"i32",pointLightCount:"i32",ambientLightColor:"vec3<f32>",lightColor0:"vec3<f32>",lightPosition0:"vec3<f32>",lightDirection0:"vec3<f32>",lightAttenuation0:"vec3<f32>",lightColor1:"vec3<f32>",lightPosition1:"vec3<f32>",lightDirection1:"vec3<f32>",lightAttenuation1:"vec3<f32>",lightColor2:"vec3<f32>",lightPosition2:"vec3<f32>",lightDirection2:"vec3<f32>",lightAttenuation2:"vec3<f32>"},defaultUniforms:{enabled:1,lightType:__.POINT,directionalLightCount:0,pointLightCount:0,ambientLightColor:[.1,.1,.1],lightColor0:[1,1,1],lightPosition0:[1,1,2],lightDirection0:[1,1,1],lightAttenuation0:[1,0,0],lightColor1:[1,1,1],lightPosition1:[1,1,2],lightDirection1:[1,1,1],lightAttenuation1:[1,0,0],lightColor2:[1,1,1],lightPosition2:[1,1,2],lightDirection2:[1,1,1],lightAttenuation2:[1,0,0]},source:plt,vs:cF,fs:cF,getUniforms:_lt};function _lt(t,e={}){if(t=t&&{...t},!t)return{...e_.defaultUniforms};t.lights&&(t={...t,...vlt(t.lights),lights:void 0});const{ambientLight:i,pointLights:n,directionalLights:r}=t||{};if(!(i||n&&n.length>0||r&&r.length>0))return{...e_.defaultUniforms,enabled:0};const a={...e_.defaultUniforms,...e,...blt({ambientLight:i,pointLights:n,directionalLights:r})};return t.enabled!==void 0&&(a.enabled=t.enabled?1:0),a}function blt({ambientLight:t,pointLights:e=[],directionalLights:i=[]}){const n={};n.ambientLightColor=C3(t);let r=0;for(const s of e){n.lightType=__.POINT;const a=r;n[`lightColor${a}`]=C3(s),n[`lightPosition${a}`]=s.position,n[`lightAttenuation${a}`]=s.attenuation||[1,0,0],r++}for(const s of i){n.lightType=__.DIRECTIONAL;const a=r;n[`lightColor${a}`]=C3(s),n[`lightDirection${a}`]=s.direction,r++}return r>aV&&we.warn("MAX_LIGHTS exceeded")(),n.directionalLightCount=i.length,n.pointLightCount=e.length,n}function vlt(t){var i,n;const e={pointLights:[],directionalLights:[]};for(const r of t||[])switch(r.type){case"ambient":e.ambientLight=r;break;case"directional":(i=e.directionalLights)==null||i.push(r);break;case"point":(n=e.pointLights)==null||n.push(r);break}return e}function C3(t={}){const{color:e=[0,0,0],intensity:i=1}=t;return e.map(n=>n*i/mlt)}const oV=`uniform phongMaterialUniforms {
  uniform float ambient;
  uniform float diffuse;
  uniform float shininess;
  uniform vec3  specularColor;
} material;
`,lV=`uniform phongMaterialUniforms {
  uniform float ambient;
  uniform float diffuse;
  uniform float shininess;
  uniform vec3  specularColor;
} material;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
  vec3 halfway_direction = normalize(light_direction + view_direction);
  float lambertian = dot(light_direction, normal_worldspace);
  float specular = 0.0;
  if (lambertian > 0.0) {
    float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
    specular = pow(specular_angle, material.shininess);
  }
  lambertian = max(lambertian, 0.0);
  return (lambertian * material.diffuse * surfaceColor + specular * material.specularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting.enabled == 0) {
    return lightColor;
  }

  vec3 view_direction = normalize(cameraPosition - position_worldspace);
  lightColor = material.ambient * surfaceColor * lighting.ambientColor;

  for (int i = 0; i < lighting.pointLightCount; i++) {
    PointLight pointLight = lighting_getPointLight(i);
    vec3 light_position_worldspace = pointLight.position;
    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
    float light_attenuation = getPointLightAttenuation(pointLight, distance(light_position_worldspace, position_worldspace));
    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color / light_attenuation);
  }

  int totalLights = min(MAX_LIGHTS, lighting.pointLightCount + lighting.directionalLightCount);
  for (int i = lighting.pointLightCount; i < totalLights; i++) {
    DirectionalLight directionalLight = lighting_getDirectionalLight(i);
    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
  }
  
  return lightColor;
}
`,cV=`struct phongMaterialUniforms {
  ambient: f32,
  diffuse: f32,
  shininess: f32,
  specularColor: vec3<f32>,
};

@binding(2) @group(0) var<uniform> phongMaterial : phongMaterialUniforms;

fn lighting_getLightColor(surfaceColor: vec3<f32>, light_direction: vec3<f32>, view_direction: vec3<f32>, normal_worldspace: vec3<f32>, color: vec3<f32>) -> vec3<f32> {
  let halfway_direction: vec3<f32> = normalize(light_direction + view_direction);
  var lambertian: f32 = dot(light_direction, normal_worldspace);
  var specular: f32 = 0.0;
  if (lambertian > 0.0) {
    let specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
    specular = pow(specular_angle, phongMaterial.shininess);
  }
  lambertian = max(lambertian, 0.0);
  return (lambertian * phongMaterial.diffuse * surfaceColor + specular * phongMaterial.specularColor) * color;
}

fn lighting_getLightColor2(surfaceColor: vec3<f32>, cameraPosition: vec3<f32>, position_worldspace: vec3<f32>, normal_worldspace: vec3<f32>) -> vec3<f32> {
  var lightColor: vec3<f32> = surfaceColor;

  if (lighting.enabled == 0) {
    return lightColor;
  }

  let view_direction: vec3<f32> = normalize(cameraPosition - position_worldspace);
  lightColor = phongMaterial.ambient * surfaceColor * lighting.ambientColor;

  if (lighting.lightType == 0) {
    let pointLight: PointLight  = lighting_getPointLight(0);
    let light_position_worldspace: vec3<f32> = pointLight.position;
    let light_direction: vec3<f32> = normalize(light_position_worldspace - position_worldspace);
    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
  } else if (lighting.lightType == 1) {
    var directionalLight: DirectionalLight = lighting_getDirectionalLight(0);
    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
  }
  
  return lightColor;
  /*
  for (int i = 0; i < MAX_LIGHTS; i++) {
    if (i >= lighting.pointLightCount) {
      break;
    }
    PointLight pointLight = lighting.pointLight[i];
    vec3 light_position_worldspace = pointLight.position;
    vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
    lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
  }

  for (int i = 0; i < MAX_LIGHTS; i++) {
    if (i >= lighting.directionalLightCount) {
      break;
    }
    DirectionalLight directionalLight = lighting.directionalLight[i];
    lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
  }
  */
}

fn lighting_getSpecularLightColor(cameraPosition: vec3<f32>, position_worldspace: vec3<f32>, normal_worldspace: vec3<f32>) -> vec3<f32>{
  var lightColor = vec3<f32>(0, 0, 0);
  let surfaceColor = vec3<f32>(0, 0, 0);

  if (lighting.enabled == 0) {
    let view_direction = normalize(cameraPosition - position_worldspace);

    switch (lighting.lightType) {
      case 0, default: {
        let pointLight: PointLight = lighting_getPointLight(0);
        let light_position_worldspace: vec3<f32> = pointLight.position;
        let light_direction: vec3<f32> = normalize(light_position_worldspace - position_worldspace);
        lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
      }
      case 1: {
        let directionalLight: DirectionalLight = lighting_getDirectionalLight(0);
        lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
      }
    }
  }
  return lightColor;
}
`,OT={props:{},name:"gouraudMaterial",vs:lV.replace("phongMaterial","gouraudMaterial"),fs:oV.replace("phongMaterial","gouraudMaterial"),source:cV.replaceAll("phongMaterial","gouraudMaterial"),defines:{LIGHTING_VERTEX:1},dependencies:[e_],uniformTypes:{ambient:"f32",diffuse:"f32",shininess:"f32",specularColor:"vec3<f32>"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(t){const e={...t};return e.specularColor&&(e.specularColor=e.specularColor.map(i=>i/255)),{...OT.defaultUniforms,...e}}},uV={name:"phongMaterial",dependencies:[e_],source:cV,vs:oV,fs:lV,defines:{LIGHTING_FRAGMENT:1},uniformTypes:{ambient:"f32",diffuse:"f32",shininess:"f32",specularColor:"vec3<f32>"},defaultUniforms:{ambient:.35,diffuse:.6,shininess:32,specularColor:[.15,.15,.15]},getUniforms(t){const e={...t};return e.specularColor&&(e.specularColor=e.specularColor.map(i=>i/255)),{...uV.defaultUniforms,...e}}},uF=`uniform layerUniforms {
  uniform float opacity;
} layer;
`,Tlt={name:"layer",vs:uF,fs:uF,getUniforms:t=>({opacity:Math.pow(t.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}},Slt=`const SMOOTH_EDGE_RADIUS: f32 = 0.5;

struct VertexGeometry {
  position: vec4<f32>,
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  normal: vec3<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

var<private> geometry_: VertexGeometry = VertexGeometry(
  vec4<f32>(0.0, 0.0, 1.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0),
  vec2<f32>(0.0, 0.0),
  vec3<f32>(0.0, 0.0, 0.0)
);

struct FragmentGeometry {
  uv: vec2<f32>,
};

var<private> fragmentGeometry: FragmentGeometry;

fn smoothedge(edge: f32, x: f32) -> f32 {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,hV="#define SMOOTH_EDGE_RADIUS 0.5",wlt=`${hV}

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`,Mlt=`${hV}

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`,fV={name:"geometry",source:Slt,vs:wlt,fs:Mlt},Ilt=25;var gr;(function(t){t[t.Start=1]="Start",t[t.Move=2]="Move",t[t.End=4]="End",t[t.Cancel=8]="Cancel"})(gr||(gr={}));var br;(function(t){t[t.None=0]="None",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Up=4]="Up",t[t.Down=8]="Down",t[t.Horizontal=3]="Horizontal",t[t.Vertical=12]="Vertical",t[t.All=15]="All"})(br||(br={}));var Ui;(function(t){t[t.Possible=1]="Possible",t[t.Began=2]="Began",t[t.Changed=4]="Changed",t[t.Ended=8]="Ended",t[t.Recognized=8]="Recognized",t[t.Cancelled=16]="Cancelled",t[t.Failed=32]="Failed"})(Ui||(Ui={}));const Elt="compute",Blt="auto",JM="manipulation",Tv="none",tI="pan-x",eI="pan-y";function Olt(t){if(t.includes(Tv))return Tv;const e=t.includes(tI),i=t.includes(eI);return e&&i?Tv:e||i?e?tI:eI:t.includes(JM)?JM:Blt}class Rlt{constructor(e,i){this.actions="",this.manager=e,this.set(i)}set(e){e===Elt&&(e=this.compute()),this.manager.element&&(this.manager.element.style.touchAction=e,this.actions=e)}update(){this.set(this.manager.options.touchAction)}compute(){let e=[];for(const i of this.manager.recognizers)i.options.enable&&(e=e.concat(i.getTouchAction()));return Olt(e.join(" "))}}function d2(t){return t.trim().split(/\s+/g)}function P3(t,e,i){if(t)for(const n of d2(e))t.addEventListener(n,i,!1)}function x3(t,e,i){if(t)for(const n of d2(e))t.removeEventListener(n,i,!1)}function hF(t){return(t.ownerDocument||t).defaultView}function Dlt(t,e){let i=t;for(;i;){if(i===e)return!0;i=i.parentNode}return!1}function dV(t){const e=t.length;if(e===1)return{x:Math.round(t[0].clientX),y:Math.round(t[0].clientY)};let i=0,n=0,r=0;for(;r<e;)i+=t[r].clientX,n+=t[r].clientY,r++;return{x:Math.round(i/e),y:Math.round(n/e)}}function fF(t){const e=[];let i=0;for(;i<t.pointers.length;)e[i]={clientX:Math.round(t.pointers[i].clientX),clientY:Math.round(t.pointers[i].clientY)},i++;return{timeStamp:Date.now(),pointers:e,center:dV(e),deltaX:t.deltaX,deltaY:t.deltaY}}function AV(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function dF(t,e){const i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)}function Clt(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.atan2(n,i)*180/Math.PI}function AF(t,e){const i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.atan2(n,i)*180/Math.PI}function gV(t,e){return t===e?br.None:Math.abs(t)>=Math.abs(e)?t<0?br.Left:br.Right:e<0?br.Up:br.Down}function Plt(t,e){const i=e.center;let n=t.offsetDelta,r=t.prevDelta;const s=t.prevInput;return(e.eventType===gr.Start||(s==null?void 0:s.eventType)===gr.End)&&(r=t.prevDelta={x:(s==null?void 0:s.deltaX)||0,y:(s==null?void 0:s.deltaY)||0},n=t.offsetDelta={x:i.x,y:i.y}),{deltaX:r.x+(i.x-n.x),deltaY:r.y+(i.y-n.y)}}function yV(t,e,i){return{x:e/t||0,y:i/t||0}}function xlt(t,e){return dF(e[0],e[1])/dF(t[0],t[1])}function Nlt(t,e){return AF(e[1],e[0])-AF(t[1],t[0])}function Flt(t,e){const i=t.lastInterval||e,n=e.timeStamp-i.timeStamp;let r,s,a,o;if(e.eventType!==gr.Cancel&&(n>Ilt||i.velocity===void 0)){const l=e.deltaX-i.deltaX,c=e.deltaY-i.deltaY,h=yV(n,l,c);s=h.x,a=h.y,r=Math.abs(h.x)>Math.abs(h.y)?h.x:h.y,o=gV(l,c),t.lastInterval=e}else r=i.velocity,s=i.velocityX,a=i.velocityY,o=i.direction;e.velocity=r,e.velocityX=s,e.velocityY=a,e.direction=o}function Llt(t,e){const{session:i}=t,{pointers:n}=e,{length:r}=n;i.firstInput||(i.firstInput=fF(e)),r>1&&!i.firstMultiple?i.firstMultiple=fF(e):r===1&&(i.firstMultiple=!1);const{firstInput:s,firstMultiple:a}=i,o=a?a.center:s.center,l=e.center=dV(n);e.timeStamp=Date.now(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=Clt(o,l),e.distance=AV(o,l);const{deltaX:c,deltaY:h}=Plt(i,e);e.deltaX=c,e.deltaY=h,e.offsetDirection=gV(e.deltaX,e.deltaY);const A=yV(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=A.x,e.overallVelocityY=A.y,e.overallVelocity=Math.abs(A.x)>Math.abs(A.y)?A.x:A.y,e.scale=a?xlt(a.pointers,n):1,e.rotation=a?Nlt(a.pointers,n):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length;let m=t.element;return Dlt(e.srcEvent.target,m)&&(m=e.srcEvent.target),e.target=m,Flt(i,e),e}function Ult(t,e,i){const n=i.pointers.length,r=i.changedPointers.length,s=e&gr.Start&&n-r===0,a=e&(gr.End|gr.Cancel)&&n-r===0;i.isFirst=!!s,i.isFinal=!!a,s&&(t.session={}),i.eventType=e;const o=Llt(t,i);t.emit("hammer.input",o),t.recognize(o),t.session.prevInput=o}let klt=class{constructor(e){this.evEl="",this.evWin="",this.evTarget="",this.domHandler=i=>{this.manager.options.enable&&this.handler(i)},this.manager=e,this.element=e.element,this.target=e.options.inputTarget||e.element}callback(e,i){Ult(this.manager,e,i)}init(){P3(this.element,this.evEl,this.domHandler),P3(this.target,this.evTarget,this.domHandler),P3(hF(this.element),this.evWin,this.domHandler)}destroy(){x3(this.element,this.evEl,this.domHandler),x3(this.target,this.evTarget,this.domHandler),x3(hF(this.element),this.evWin,this.domHandler)}};const jlt={pointerdown:gr.Start,pointermove:gr.Move,pointerup:gr.End,pointercancel:gr.Cancel,pointerout:gr.Cancel},zlt="pointerdown",Vlt="pointermove pointerup pointercancel";class $lt extends klt{constructor(e){super(e),this.evEl=zlt,this.evWin=Vlt,this.store=this.manager.session.pointerEvents=[],this.init()}handler(e){const{store:i}=this;let n=!1;const r=jlt[e.type],s=e.pointerType,a=s==="touch";let o=i.findIndex(l=>l.pointerId===e.pointerId);r&gr.Start&&(e.buttons||a)?o<0&&(i.push(e),o=i.length-1):r&(gr.End|gr.Cancel)&&(n=!0),!(o<0)&&(i[o]=e,this.callback(r,{pointers:i,changedPointers:[e],eventType:r,pointerType:s,srcEvent:e}),n&&i.splice(o,1))}}const Wlt=["","webkit","Moz","MS","ms","o"];function Hlt(t,e){const i=e[0].toUpperCase()+e.slice(1);for(const n of Wlt){const r=n?n+i:e;if(r in t)return r}}const qlt=1,gF=2,yF={touchAction:"compute",enable:!0,inputTarget:null,cssProps:{userSelect:"none",userDrag:"none",touchCallout:"none",tapHighlightColor:"rgba(0,0,0,0)"}};class Ylt{constructor(e,i){this.options={...yF,...i,cssProps:{...yF.cssProps,...i.cssProps},inputTarget:i.inputTarget||e},this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new $lt(this),this.touchAction=new Rlt(this,this.options.touchAction),this.toggleCssProps(!0)}set(e){return Object.assign(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this}stop(e){this.session.stopped=e?gF:qlt}recognize(e){const{session:i}=this;if(i.stopped)return;this.session.prevented&&e.srcEvent.preventDefault();let n;const{recognizers:r}=this;let{curRecognizer:s}=i;(!s||s&&s.state&Ui.Recognized)&&(s=i.curRecognizer=null);let a=0;for(;a<r.length;)n=r[a],i.stopped!==gF&&(!s||n===s||n.canRecognizeWith(s))?n.recognize(e):n.reset(),!s&&n.state&(Ui.Began|Ui.Changed|Ui.Ended)&&(s=i.curRecognizer=n),a++}get(e){const{recognizers:i}=this;for(let n=0;n<i.length;n++)if(i[n].options.event===e)return i[n];return null}add(e){if(Array.isArray(e)){for(const n of e)this.add(n);return this}const i=this.get(e.options.event);return i&&this.remove(i),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e}remove(e){if(Array.isArray(e)){for(const n of e)this.remove(n);return this}const i=typeof e=="string"?this.get(e):e;if(i){const{recognizers:n}=this,r=n.indexOf(i);r!==-1&&(n.splice(r,1),this.touchAction.update())}return this}on(e,i){if(!e||!i)return;const{handlers:n}=this;for(const r of d2(e))n[r]=n[r]||[],n[r].push(i)}off(e,i){if(!e)return;const{handlers:n}=this;for(const r of d2(e))i?n[r]&&n[r].splice(n[r].indexOf(i),1):delete n[r]}emit(e,i){const n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;const r=i;r.type=e,r.preventDefault=function(){i.srcEvent.preventDefault()};let s=0;for(;s<n.length;)n[s](r),s++}destroy(){this.toggleCssProps(!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}toggleCssProps(e){const{element:i}=this;if(i){for(const[n,r]of Object.entries(this.options.cssProps)){const s=Hlt(i.style,n);e?(this.oldCssProps[s]=i.style[s],i.style[s]=r):i.style[s]=this.oldCssProps[s]||""}e||(this.oldCssProps={})}}}let Glt=1;function Xlt(){return Glt++}function pF(t){return t&Ui.Cancelled?"cancel":t&Ui.Ended?"end":t&Ui.Changed?"move":t&Ui.Began?"start":""}class pV{constructor(e){this.options=e,this.id=Xlt(),this.state=Ui.Possible,this.simultaneous={},this.requireFail=[]}set(e){return Object.assign(this.options,e),this.manager.touchAction.update(),this}recognizeWith(e){if(Array.isArray(e)){for(const r of e)this.recognizeWith(r);return this}let i;if(typeof e=="string"){if(i=this.manager.get(e),!i)throw new Error(`Cannot find recognizer ${e}`)}else i=e;const{simultaneous:n}=this;return n[i.id]||(n[i.id]=i,i.recognizeWith(this)),this}dropRecognizeWith(e){if(Array.isArray(e)){for(const n of e)this.dropRecognizeWith(n);return this}let i;return typeof e=="string"?i=this.manager.get(e):i=e,i&&delete this.simultaneous[i.id],this}requireFailure(e){if(Array.isArray(e)){for(const r of e)this.requireFailure(r);return this}let i;if(typeof e=="string"){if(i=this.manager.get(e),!i)throw new Error(`Cannot find recognizer ${e}`)}else i=e;const{requireFail:n}=this;return n.indexOf(i)===-1&&(n.push(i),i.requireFailure(this)),this}dropRequireFailure(e){if(Array.isArray(e)){for(const n of e)this.dropRequireFailure(n);return this}let i;if(typeof e=="string"?i=this.manager.get(e):i=e,i){const n=this.requireFail.indexOf(i);n>-1&&this.requireFail.splice(n,1)}return this}hasRequireFailures(){return!!this.requireFail.find(e=>e.options.enable)}canRecognizeWith(e){return!!this.simultaneous[e.id]}emit(e){if(!e)return;const{state:i}=this;i<Ui.Ended&&this.manager.emit(this.options.event+pF(i),e),this.manager.emit(this.options.event,e),e.additionalEvent&&this.manager.emit(e.additionalEvent,e),i>=Ui.Ended&&this.manager.emit(this.options.event+pF(i),e)}tryEmit(e){this.canEmit()?this.emit(e):this.state=Ui.Failed}canEmit(){let e=0;for(;e<this.requireFail.length;){if(!(this.requireFail[e].state&(Ui.Failed|Ui.Possible)))return!1;e++}return!0}recognize(e){const i={...e};if(!this.options.enable){this.reset(),this.state=Ui.Failed;return}this.state&(Ui.Recognized|Ui.Cancelled|Ui.Failed)&&(this.state=Ui.Possible),this.state=this.process(i),this.state&(Ui.Began|Ui.Changed|Ui.Ended|Ui.Cancelled)&&this.tryEmit(i)}getEventNames(){return[this.options.event]}reset(){}}class mV extends pV{attrTest(e){const i=this.options.pointers;return i===0||e.pointers.length===i}process(e){const{state:i}=this,{eventType:n}=e,r=i&(Ui.Began|Ui.Changed),s=this.attrTest(e);return r&&(n&gr.Cancel||!s)?i|Ui.Cancelled:r||s?n&gr.End?i|Ui.Ended:i&Ui.Began?i|Ui.Changed:Ui.Began:Ui.Failed}}class mF extends pV{constructor(e={}){super({enable:!0,event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10,...e}),this.pTime=null,this.pCenter=null,this._timer=null,this._input=null,this.count=0}getTouchAction(){return[JM]}process(e){const{options:i}=this,n=e.pointers.length===i.pointers,r=e.distance<i.threshold,s=e.deltaTime<i.time;if(this.reset(),e.eventType&gr.Start&&this.count===0)return this.failTimeout();if(r&&s&&n){if(e.eventType!==gr.End)return this.failTimeout();const a=this.pTime?e.timeStamp-this.pTime<i.interval:!0,o=!this.pCenter||AV(this.pCenter,e.center)<i.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,!o||!a?this.count=1:this.count+=1,this._input=e,this.count%i.taps===0)return this.hasRequireFailures()?(this._timer=setTimeout(()=>{this.state=Ui.Recognized,this.tryEmit(this._input)},i.interval),Ui.Began):Ui.Recognized}return Ui.Failed}failTimeout(){return this._timer=setTimeout(()=>{this.state=Ui.Failed},this.options.interval),Ui.Failed}reset(){clearTimeout(this._timer)}emit(e){this.state===Ui.Recognized&&(e.tapCount=this.count,this.manager.emit(this.options.event,e))}}const Qlt=["","start","move","end","cancel","up","down","left","right"];class _F extends mV{constructor(e={}){super({enable:!0,pointers:1,event:"pan",threshold:10,direction:br.All,...e}),this.pX=null,this.pY=null}getTouchAction(){const{options:{direction:e}}=this,i=[];return e&br.Horizontal&&i.push(eI),e&br.Vertical&&i.push(tI),i}getEventNames(){return Qlt.map(e=>this.options.event+e)}directionTest(e){const{options:i}=this;let n=!0,{distance:r}=e,{direction:s}=e;const a=e.deltaX,o=e.deltaY;return s&i.direction||(i.direction&br.Horizontal?(s=a===0?br.None:a<0?br.Left:br.Right,n=a!==this.pX,r=Math.abs(e.deltaX)):(s=o===0?br.None:o<0?br.Up:br.Down,n=o!==this.pY,r=Math.abs(e.deltaY))),e.direction=s,n&&r>i.threshold&&!!(s&i.direction)}attrTest(e){return super.attrTest(e)&&(!!(this.state&Ui.Began)||!(this.state&Ui.Began)&&this.directionTest(e))}emit(e){this.pX=e.deltaX,this.pY=e.deltaY;const i=br[e.direction].toLowerCase();i&&(e.additionalEvent=this.options.event+i),super.emit(e)}}const Klt=["","start","move","end","cancel","in","out"];class Zlt extends mV{constructor(e={}){super({enable:!0,event:"pinch",threshold:0,pointers:2,...e})}getTouchAction(){return[Tv]}getEventNames(){return Klt.map(e=>this.options.event+e)}attrTest(e){return super.attrTest(e)&&(Math.abs(e.scale-1)>this.options.threshold||!!(this.state&Ui.Began))}emit(e){if(e.scale!==1){const i=e.scale<1?"in":"out";e.additionalEvent=this.options.event+i}super.emit(e)}}class RT{constructor(e,i,n){this.element=e,this.callback=i,this.options=n}}const Jlt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",tct=Jlt.indexOf("firefox")!==-1,bF=4.000244140625,ect=40,ict=.25;class nct extends RT{constructor(e,i,n){super(e,i,{enable:!0,...n}),this.handleEvent=r=>{if(!this.options.enable)return;let s=r.deltaY;globalThis.WheelEvent&&(tct&&r.deltaMode===globalThis.WheelEvent.DOM_DELTA_PIXEL&&(s/=globalThis.devicePixelRatio),r.deltaMode===globalThis.WheelEvent.DOM_DELTA_LINE&&(s*=ect)),s!==0&&s%bF===0&&(s=Math.floor(s/bF)),r.shiftKey&&s&&(s=s*ict),this.callback({type:"wheel",center:{x:r.clientX,y:r.clientY},delta:-s,srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("wheel",this.handleEvent,{passive:!1})}destroy(){this.element.removeEventListener("wheel",this.handleEvent)}enableEventType(e,i){e==="wheel"&&(this.options.enable=i)}}const vF=["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"];class rct extends RT{constructor(e,i,n){super(e,i,{enable:!0,...n}),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:r}=this.options;this.enableMoveEvent=r,this.enableLeaveEvent=r,this.enableEnterEvent=r,this.enableOutEvent=r,this.enableOverEvent=r,vF.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){vF.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,i){switch(e){case"pointermove":this.enableMoveEvent=i;break;case"pointerover":this.enableOverEvent=i;break;case"pointerout":this.enableOutEvent=i;break;case"pointerenter":this.enableEnterEvent=i;break;case"pointerleave":this.enableLeaveEvent=i;break}}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit("pointerover",e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit("pointerout",e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit("pointerenter",e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit("pointerleave",e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.buttons===0&&(this.pressed=!1),this.pressed||this._emit("pointermove",e);break;case"mouseup":this.pressed=!1;break}}_emit(e,i){this.callback({type:e,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})}}const TF=["keydown","keyup"];class sct extends RT{constructor(e,i,n){super(e,i,{enable:!0,tabIndex:0,...n}),this.handleEvent=r=>{const s=r.target||r.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&r.type==="keydown"&&this.callback({type:"keydown",srcEvent:r,key:r.key,target:r.target}),this.enableUpEvent&&r.type==="keyup"&&this.callback({type:"keyup",srcEvent:r,key:r.key,target:r.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,e.tabIndex=this.options.tabIndex,e.style.outline="none",TF.forEach(r=>e.addEventListener(r,this.handleEvent))}destroy(){TF.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,i){e==="keydown"&&(this.enableDownEvent=i),e==="keyup"&&(this.enableUpEvent=i)}}class act extends RT{constructor(e,i,n){super(e,i,n),this.handleEvent=r=>{this.options.enable&&this.callback({type:"contextmenu",center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,i){e==="contextmenu"&&(this.options.enable=i)}}const SF=1,iI=2,wF=4,oct={pointerdown:SF,pointermove:iI,pointerup:wF,mousedown:SF,mousemove:iI,mouseup:wF},lct=0,cct=1,uct=2,hct=1,fct=2,dct=4;function Act(t){const e=oct[t.srcEvent.type];if(!e)return null;const{buttons:i,button:n}=t.srcEvent;let r=!1,s=!1,a=!1;return e===iI?(r=!!(i&hct),s=!!(i&dct),a=!!(i&fct)):(r=n===lct,s=n===cct,a=n===uct),{leftButton:r,middleButton:s,rightButton:a}}function gct(t,e){const i=t.center;if(!i)return null;const n=e.getBoundingClientRect(),r=n.width/e.offsetWidth||1,s=n.height/e.offsetHeight||1,a={x:(i.x-n.left-e.clientLeft)/r,y:(i.y-n.top-e.clientTop)/s};return{center:i,offsetCenter:a}}const yct={srcElement:"root",priority:0};class pct{constructor(e,i){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let s=n.srcEvent.target;for(;s&&s!==r.rootElement;){if(this._emit(r,s),r.handled)return;s=s.parentNode}this._emit(r,"root")},this.eventManager=e,this.recognizerName=i,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,i,n,r=!1,s=!1){const{handlers:a,handlersByElement:o}=this,l={...yct,...n};let c=o.get(l.srcElement);c||(c=[],o.set(l.srcElement,c));const h={type:e,handler:i,srcElement:l.srcElement,priority:l.priority};r&&(h.once=!0),s&&(h.passive=!0),a.push(h),this._active=this._active||!h.passive;let A=c.length-1;for(;A>=0&&!(c[A].priority>=h.priority);)A--;c.splice(A+1,0,h)}remove(e,i){const{handlers:n,handlersByElement:r}=this;for(let s=n.length-1;s>=0;s--){const a=n[s];if(a.type===e&&a.handler===i){n.splice(s,1);const o=r.get(a.srcElement);o.splice(o.indexOf(a),1),o.length===0&&r.delete(a.srcElement)}}this._active=n.some(s=>!s.passive)}_emit(e,i){const n=this.handlersByElement.get(i);if(n){let r=!1;const s=()=>{e.handled=!0},a=()=>{e.handled=!0,r=!0},o=[];for(let l=0;l<n.length;l++){const{type:c,handler:h,once:A}=n[l];if(h({...e,type:c,stopPropagation:s,stopImmediatePropagation:a}),A&&o.push(n[l]),r)break}for(let l=0;l<o.length;l++){const{type:c,handler:h}=o[l];this.remove(c,h)}}}_normalizeEvent(e){const i=this.eventManager.getElement();return{...e,...Act(e),...gct(e,i),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:i}}}function mct(t){if("recognizer"in t)return t;let e;const i=Array.isArray(t)?[...t]:[t];if(typeof i[0]=="function"){const n=i.shift(),r=i.shift()||{};e=new n(r)}else e=i.shift();return{recognizer:e,recognizeWith:typeof i[0]=="string"?[i[0]]:i[0],requireFailure:typeof i[1]=="string"?[i[1]]:i[1]}}class _ct{constructor(e=null,i={}){if(this._onBasicInput=n=>{this.manager.emit(n.srcEvent.type,n)},this._onOtherEvent=n=>{this.manager.emit(n.type,n)},this.options={recognizers:[],events:{},touchAction:"compute",tabIndex:0,cssProps:{},...i},this.events=new Map,this.element=e,!!e){this.manager=new Ylt(e,this.options);for(const n of this.options.recognizers){const{recognizer:r,recognizeWith:s,requireFailure:a}=mct(n);this.manager.add(r),s&&r.recognizeWith(s),a&&r.requireFailure(a)}this.manager.on("hammer.input",this._onBasicInput),this.wheelInput=new nct(e,this._onOtherEvent,{enable:!1}),this.moveInput=new rct(e,this._onOtherEvent,{enable:!1}),this.keyInput=new sct(e,this._onOtherEvent,{enable:!1,tabIndex:i.tabIndex}),this.contextmenuInput=new act(e,this._onOtherEvent,{enable:!1}),this.on(this.options.events)}}getElement(){return this.element}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy())}on(e,i,n){this._addEventHandler(e,i,n,!1)}once(e,i,n){this._addEventHandler(e,i,n,!0)}watch(e,i,n){this._addEventHandler(e,i,n,!1,!0)}off(e,i){this._removeEventHandler(e,i)}_toggleRecognizer(e,i){var s,a,o,l;const{manager:n}=this;if(!n)return;const r=n.get(e);r&&(r.set({enable:i}),n.touchAction.update()),(s=this.wheelInput)==null||s.enableEventType(e,i),(a=this.moveInput)==null||a.enableEventType(e,i),(o=this.keyInput)==null||o.enableEventType(e,i),(l=this.contextmenuInput)==null||l.enableEventType(e,i)}_addEventHandler(e,i,n,r,s){if(typeof e!="string"){n=i;for(const[c,h]of Object.entries(e))this._addEventHandler(c,h,n,r,s);return}const{manager:a,events:o}=this;if(!a)return;let l=o.get(e);if(!l){const c=this._getRecognizerName(e)||e;l=new pct(this,c),o.set(e,l),a&&a.on(e,l.handleEvent)}l.add(e,i,n,r,s),l.isEmpty()||this._toggleRecognizer(l.recognizerName,!0)}_removeEventHandler(e,i){if(typeof e!="string"){for(const[s,a]of Object.entries(e))this._removeEventHandler(s,a);return}const{events:n}=this,r=n.get(e);if(r&&(r.remove(e,i),r.isEmpty())){const{recognizerName:s}=r;let a=!1;for(const o of n.values())if(o.recognizerName===s&&!o.isEmpty()){a=!0;break}a||this._toggleRecognizer(s,!1)}}_getRecognizerName(e){var i;return(i=this.manager.recognizers.find(n=>n.getEventNames().includes(e)))==null?void 0:i.options.event}}const Hi={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(Hi,"IDENTITY",{get:()=>(Ji.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const ma={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},ba={common:0,meters:1,pixels:2},nI={click:"onClick",panstart:"onDragStart",panmove:"onDrag",panend:"onDragEnd"},MF={multipan:[_F,{threshold:10,direction:br.Vertical,pointers:2}],pinch:[Zlt,{},null,["multipan"]],pan:[_F,{threshold:1},["pinch"],["multipan"]],dblclick:[mF,{event:"dblclick",taps:2}],click:[mF,{event:"click"},null,["dblclick"]]};function bct(t,e){if(t===e)return!0;if(Array.isArray(t)){const i=t.length;if(!e||e.length!==i)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}return!1}function r1(t){let e={},i;return n=>{for(const r in n)if(!bct(n[r],e[r])){i=t(n),e=n;break}return i}}const IF=[0,0,0,0],vct=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],_V=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Tct=[0,0,0],bV=[0,0,0],Sct=r1(Ict);function vV(t,e,i=bV){i.length<3&&(i=[i[0],i[1],0]);let n=i,r,s=!0;switch(e===Hi.LNGLAT_OFFSETS||e===Hi.METER_OFFSETS?r=i:r=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case ma.WEB_MERCATOR:(e===Hi.LNGLAT||e===Hi.CARTESIAN)&&(r=[0,0,0],s=!1);break;case ma.WEB_MERCATOR_AUTO_OFFSET:e===Hi.LNGLAT?n=r:e===Hi.CARTESIAN&&(n=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],r=t.unprojectPosition(n),n[0]-=i[0],n[1]-=i[1],n[2]-=i[2]);break;case ma.IDENTITY:n=t.position.map(Math.fround),n[2]=n[2]||0;break;case ma.GLOBE:s=!1,r=null;break;default:s=!1}return{geospatialOrigin:r,shaderCoordinateOrigin:n,offsetMode:s}}function wct(t,e,i){const{viewMatrixUncentered:n,projectionMatrix:r}=t;let{viewMatrix:s,viewProjectionMatrix:a}=t,o=IF,l=IF,c=t.cameraPosition;const{geospatialOrigin:h,shaderCoordinateOrigin:A,offsetMode:m}=vV(t,e,i);return m&&(l=t.projectPosition(h||A),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,o=A0([],l,a),s=n||s,a=cf([],r,s),a=cf([],a,vct)),{viewMatrix:s,viewProjectionMatrix:a,projectionCenter:o,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:A,geospatialOrigin:h}}function Mct({viewport:t,devicePixelRatio:e=1,modelMatrix:i=null,coordinateSystem:n=Hi.DEFAULT,coordinateOrigin:r=bV,autoWrapLongitude:s=!1}){n===Hi.DEFAULT&&(n=t.isGeospatial?Hi.LNGLAT:Hi.CARTESIAN);const a=Sct({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r});return a.wrapLongitude=s,a.modelMatrix=i||_V,a}function Ict({viewport:t,devicePixelRatio:e,coordinateSystem:i,coordinateOrigin:n}){const{projectionCenter:r,viewProjectionMatrix:s,originCommon:a,cameraPosCommon:o,shaderCoordinateOrigin:l,geospatialOrigin:c}=wct(t,i,n),h=t.getDistanceScales(),A=[t.width*e,t.height*e],m=A0([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,b={coordinateSystem:i,projectionMode:t.projectionMode,coordinateOrigin:l,commonOrigin:a.slice(0,3),center:r,pseudoMeters:!!t._pseudoMeters,viewportSize:A,devicePixelRatio:e,focalDistance:m,commonUnitsPerMeter:h.unitsPerMeter,commonUnitsPerWorldUnit:h.unitsPerMeter,commonUnitsPerWorldUnit2:Tct,scale:t.scale,wrapLongitude:!1,viewProjectionMatrix:s,modelMatrix:_V,cameraPosition:o};if(c){const S=t.getDistanceScales(c);switch(i){case Hi.METER_OFFSETS:b.commonUnitsPerWorldUnit=S.unitsPerMeter,b.commonUnitsPerWorldUnit2=S.unitsPerMeter2;break;case Hi.LNGLAT:case Hi.LNGLAT_OFFSETS:t._pseudoMeters||(b.commonUnitsPerMeter=S.unitsPerMeter),b.commonUnitsPerWorldUnit=S.unitsPerDegree,b.commonUnitsPerWorldUnit2=S.unitsPerDegree2;break;case Hi.CARTESIAN:b.commonUnitsPerWorldUnit=[1,1,S.unitsPerMeter[2]],b.commonUnitsPerWorldUnit2=[0,0,S.unitsPerMeter2[2]];break}}return b}const Ect=Object.keys(Hi).map(t=>`const COORDINATE_SYSTEM_${t}: i32 = ${Hi[t]};`).join(""),Bct=Object.keys(ma).map(t=>`const PROJECTION_MODE_${t}: i32 = ${ma[t]};`).join(""),Oct=Object.keys(ba).map(t=>`const UNIT_${t.toUpperCase()}: i32 = ${ba[t]};`).join(""),Rct=`${Ect}
${Bct}
${Oct}

const TILE_SIZE: f32 = 512.0;
const PI: f32 = 3.1415926536;
const WORLD_SCALE: f32 = TILE_SIZE / (PI * 2.0);
const ZERO_64_LOW: vec3<f32> = vec3<f32>(0.0, 0.0, 0.0);
const EARTH_RADIUS: f32 = 6370972.0; // meters
const GLOBE_RADIUS: f32 = 256.0;

// -----------------------------------------------------------------------------
// Uniform block (converted from GLSL uniform block)
// -----------------------------------------------------------------------------
struct ProjectUniforms {
  wrapLongitude: i32,
  coordinateSystem: i32,
  commonUnitsPerMeter: vec3<f32>,
  projectionMode: i32,
  scale: f32,
  commonUnitsPerWorldUnit: vec3<f32>,
  commonUnitsPerWorldUnit2: vec3<f32>,
  center: vec4<f32>,
  modelMatrix: mat4x4<f32>,
  viewProjectionMatrix: mat4x4<f32>,
  viewportSize: vec2<f32>,
  devicePixelRatio: f32,
  focalDistance: f32,
  cameraPosition: vec3<f32>,
  coordinateOrigin: vec3<f32>,
  commonOrigin: vec3<f32>,
  pseudoMeters: i32,
};

@group(0) @binding(0)
var<uniform> project: ProjectUniforms;

// -----------------------------------------------------------------------------
// Geometry data
// (In your GLSL code, "geometry" was assumed to be available globally. In WGSL,
// you might supply this via vertex attributes or a uniform. Here we define a
// uniform struct for demonstration.)
// -----------------------------------------------------------------------------

// Structure to carry additional geometry data used by deck.gl filters.
struct Geometry {
  worldPosition: vec3<f32>,
  worldPositionAlt: vec3<f32>,
  position: vec4<f32>,
  uv: vec2<f32>,
  pickingColor: vec3<f32>,
};

// @group(0) @binding(1)
var<private> geometry: Geometry;
`,Dct=`${Rct}

// -----------------------------------------------------------------------------
// Functions
// -----------------------------------------------------------------------------

// Returns an adjustment factor for commonUnitsPerMeter
fn _project_size_at_latitude(lat: f32) -> f32 {
  let y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

// Overloaded version: scales a value in meters at a given latitude.
fn _project_size_at_latitude_m(meters: f32, lat: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * _project_size_at_latitude(lat);
}

// Computes a non-linear scale factor based on geometry.
// (Note: This function relies on "geometry" being provided.)
fn project_size() -> f32 {
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
      project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
      project.pseudoMeters == 0) {
    if (geometry.position.w == 0.0) {
      return _project_size_at_latitude(geometry.worldPosition.y);
    }
    let y: f32 = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    let y2 = y * y;
    let y4 = y2 * y2;
    let y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

// Overloads to scale offsets (meters to world units)
fn project_size_float(meters: f32) -> f32 {
  return meters * project.commonUnitsPerMeter.z * project_size();
}

fn project_size_vec2(meters: vec2<f32>) -> vec2<f32> {
  return meters * project.commonUnitsPerMeter.xy * project_size();
}

fn project_size_vec3(meters: vec3<f32>) -> vec3<f32> {
  return meters * project.commonUnitsPerMeter * project_size();
}

fn project_size_vec4(meters: vec4<f32>) -> vec4<f32> {
  return vec4<f32>(meters.xyz * project.commonUnitsPerMeter, meters.w);
}

// Returns a rotation matrix aligning the zaxis with the given up vector.
fn project_get_orientation_matrix(up: vec3<f32>) -> mat3x3<f32> {
  let uz = normalize(up);
  let ux = select(
    vec3<f32>(1.0, 0.0, 0.0),
    normalize(vec3<f32>(uz.y, -uz.x, 0.0)),
    abs(uz.z) == 1.0
  );
  let uy = cross(uz, ux);
  return mat3x3<f32>(ux, uy, uz);
}

// Since WGSL does not support "out" parameters, we return a struct.
struct RotationResult {
  needsRotation: bool,
  transform: mat3x3<f32>,
};

fn project_needs_rotation(commonPosition: vec3<f32>) -> RotationResult {
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    return RotationResult(true, project_get_orientation_matrix(commonPosition));
  } else {
    return RotationResult(false, mat3x3<f32>());  // identity alternative if needed
  };
}

// Projects a normal vector from the current coordinate system to world space.
fn project_normal(vector: vec3<f32>) -> vec3<f32> {
  let normal_modelspace = project.modelMatrix * vec4<f32>(vector, 0.0);
  var n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
  let rotResult = project_needs_rotation(geometry.position.xyz);
  if (rotResult.needsRotation) {
    n = rotResult.transform * n;
  }
  return n;
}

// Applies a scale offset based on y-offset (dy)
fn project_offset_(offset: vec4<f32>) -> vec4<f32> {
  let dy: f32 = offset.y;
  let commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
  return vec4<f32>(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

// Projects lng/lat coordinates to a unit tile [0,1]
fn project_mercator_(lnglat: vec2<f32>) -> vec2<f32> {
  var x = lnglat.x;
  if (project.wrapLongitude != 0) {
    x = ((x + 180.0) % 360.0) - 180.0;
  }
  let y = clamp(lnglat.y, -89.9, 89.9);
  return vec2<f32>(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// Projects lng/lat/z coordinates for a globe projection.
fn project_globe_(lnglatz: vec3<f32>) -> vec3<f32> {
  let lambda = radians(lnglatz.x);
  let phi = radians(lnglatz.y);
  let cosPhi = cos(phi);
  let D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
  return vec3<f32>(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

// Projects positions (with an optional 64-bit low part) from the input
// coordinate system to the common space.
fn project_position_vec4_f64(position: vec4<f32>, position64Low: vec3<f32>) -> vec4<f32> {
  var position_world = project.modelMatrix * position;

  // Work around for a Mac+NVIDIA bug:
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_mercator_(position_world.xy),
        _project_size_at_latitude_m(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world = vec4f(position_world.xyz + project.coordinateOrigin, position_world.w);
    }
  }
  if (project.projectionMode == PROJECTION_MODE_GLOBE) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4<f32>(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
        return vec4<f32>(
          project_mercator_(position_world.xy) - project.commonOrigin.xy,
          project_size_float(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
      (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
       (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
        project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world = vec4f(position_world.xyz - project.coordinateOrigin, position_world.w);
  }

  return project_offset_(position_world) +
         project_offset_(project.modelMatrix * vec4<f32>(position64Low, 0.0));
}

// Overloaded versions for different input types.
fn project_position_vec4_f32(position: vec4<f32>) -> vec4<f32> {
  return project_position_vec4_f64(position, ZERO_64_LOW);
}

fn project_position_vec3_f64(position: vec3<f32>, position64Low: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), position64Low);
  return projected_position.xyz;
}

fn project_position_vec3_f32(position: vec3<f32>) -> vec3<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

fn project_position_vec2_f32(position: vec2<f32>) -> vec2<f32> {
  let projected_position = project_position_vec4_f64(vec4<f32>(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

// Transforms a common space position to clip space.
fn project_common_position_to_clipspace_with_projection(position: vec4<f32>, viewProjectionMatrix: mat4x4<f32>, center: vec4<f32>) -> vec4<f32> {
  return viewProjectionMatrix * position + center;
}

// Uses the project viewProjectionMatrix and center.
fn project_common_position_to_clipspace(position: vec4<f32>) -> vec4<f32> {
  return project_common_position_to_clipspace_with_projection(position, project.viewProjectionMatrix, project.center);
}

// Returns a clip space offset corresponding to a given number of screen pixels.
fn project_pixel_size_to_clipspace(pixels: vec2<f32>) -> vec2<f32> {
  let offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
  return offset * project.focalDistance;
}

fn project_meter_size_to_pixel(meters: f32) -> f32 {
  return project_size_float(meters) * project.scale;
}

fn project_unit_size_to_pixel(size: f32, unit: i32) -> f32 {
  if (unit == UNIT_METERS) {
    return project_meter_size_to_pixel(size);
  } else if (unit == UNIT_COMMON) {
    return size * project.scale;
  }
  // UNIT_PIXELS: no scaling applied.
  return size;
}

fn project_pixel_size_float(pixels: f32) -> f32 {
  return pixels / project.scale;
}

fn project_pixel_size_vec2(pixels: vec2<f32>) -> vec2<f32> {
  return pixels / project.scale;
}
`,Cct=Object.keys(Hi).map(t=>`const int COORDINATE_SYSTEM_${t} = ${Hi[t]};`).join(""),Pct=Object.keys(ma).map(t=>`const int PROJECTION_MODE_${t} = ${ma[t]};`).join(""),xct=Object.keys(ba).map(t=>`const int UNIT_${t.toUpperCase()} = ${ba[t]};`).join(""),Nct=`${Cct}
${Pct}
${xct}
uniform projectUniforms {
bool wrapLongitude;
int coordinateSystem;
vec3 commonUnitsPerMeter;
int projectionMode;
float scale;
vec3 commonUnitsPerWorldUnit;
vec3 commonUnitsPerWorldUnit2;
vec4 center;
mat4 modelMatrix;
mat4 viewProjectionMatrix;
vec2 viewportSize;
float devicePixelRatio;
float focalDistance;
vec3 cameraPosition;
vec3 coordinateOrigin;
vec3 commonOrigin;
bool pseudoMeters;
} project;
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
float y = clamp(lat, -89.9, 89.9);
return 1.0 / cos(radians(y));
}
float project_size() {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR &&
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
project.pseudoMeters == false) {
if (geometry.position.w == 0.0) {
return project_size_at_latitude(geometry.worldPosition.y);
}
float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
float y2 = y * y;
float y4 = y2 * y2;
float y6 = y4 * y2;
return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
}
return 1.0;
}
float project_size_at_latitude(float meters, float lat) {
return meters * project.commonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
return meters * project.commonUnitsPerMeter.z * project_size();
}
vec2 project_size(vec2 meters) {
return meters * project.commonUnitsPerMeter.xy * project_size();
}
vec3 project_size(vec3 meters) {
return meters * project.commonUnitsPerMeter * project_size();
}
vec4 project_size(vec4 meters) {
return vec4(meters.xyz * project.commonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
vec3 uz = normalize(up);
vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
vec3 uy = cross(uz, ux);
return mat3(ux, uy, uz);
}
bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
transform = project_get_orientation_matrix(commonPosition);
return true;
}
return false;
}
vec3 project_normal(vec3 vector) {
vec4 normal_modelspace = project.modelMatrix * vec4(vector, 0.0);
vec3 n = normalize(normal_modelspace.xyz * project.commonUnitsPerMeter);
mat3 rotation;
if (project_needs_rotation(geometry.position.xyz, rotation)) {
n = rotation * n;
}
return n;
}
vec4 project_offset_(vec4 offset) {
float dy = offset.y;
vec3 commonUnitsPerWorldUnit = project.commonUnitsPerWorldUnit + project.commonUnitsPerWorldUnit2 * dy;
return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
float x = lnglat.x;
if (project.wrapLongitude) {
x = mod(x + 180., 360.0) - 180.;
}
float y = clamp(lnglat.y, -89.9, 89.9);
return vec2(
radians(x) + PI,
PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
) * WORLD_SCALE;
}
vec3 project_globe_(vec3 lnglatz) {
float lambda = radians(lnglatz.x);
float phi = radians(lnglatz.y);
float cosPhi = cos(phi);
float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;
return vec3(
sin(lambda) * cosPhi,
-cos(lambda) * cosPhi,
sin(phi)
) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
vec4 position_world = project.modelMatrix * position;
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_mercator_(position_world.xy),
project_size_at_latitude(position_world.z, position_world.y),
position_world.w
);
}
if (project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
position_world.xyz += project.coordinateOrigin;
}
}
if (project.projectionMode == PROJECTION_MODE_GLOBE) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
return vec4(
project_globe_(position_world.xyz),
position_world.w
);
}
}
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
if (abs(position_world.y - project.coordinateOrigin.y) > 0.25) {
return vec4(
project_mercator_(position_world.xy) - project.commonOrigin.xy,
project_size(position_world.z),
position_world.w
);
}
}
}
if (project.projectionMode == PROJECTION_MODE_IDENTITY ||
(project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
(project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
position_world.xyz -= project.coordinateOrigin;
}
return project_offset_(position_world) + project_offset_(project.modelMatrix * vec4(position64Low, 0.0));
}
vec4 project_position(vec4 position) {
return project_position(position, ZERO_64_LOW);
}
vec3 project_position(vec3 position, vec3 position64Low) {
vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
return projected_position.xyz;
}
vec3 project_position(vec3 position) {
vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
return projected_position.xyz;
}
vec2 project_position(vec2 position) {
vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
return projected_position.xy;
}
vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
return project_common_position_to_clipspace(position, project.viewProjectionMatrix, project.center);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
vec2 offset = pixels / project.viewportSize * project.devicePixelRatio * 2.0;
return offset * project.focalDistance;
}
float project_size_to_pixel(float meters) {
return project_size(meters) * project.scale;
}
float project_size_to_pixel(float size, int unit) {
if (unit == UNIT_METERS) return project_size_to_pixel(size);
if (unit == UNIT_COMMON) return size * project.scale;
return size;
}
float project_pixel_size(float pixels) {
return pixels / project.scale;
}
vec2 project_pixel_size(vec2 pixels) {
return pixels / project.scale;
}
`,Fct={};function Lct(t=Fct){return"viewport"in t?Mct(t):{}}const VB={name:"project",dependencies:[clt,fV],source:Dct,vs:Nct,getUniforms:Lct,uniformTypes:{wrapLongitude:"f32",coordinateSystem:"i32",commonUnitsPerMeter:"vec3<f32>",projectionMode:"i32",scale:"f32",commonUnitsPerWorldUnit:"vec3<f32>",commonUnitsPerWorldUnit2:"vec3<f32>",center:"vec4<f32>",modelMatrix:"mat4x4<f32>",viewProjectionMatrix:"mat4x4<f32>",viewportSize:"vec2<f32>",devicePixelRatio:"f32",focalDistance:"f32",cameraPosition:"vec3<f32>",coordinateOrigin:"vec3<f32>",commonOrigin:"vec3<f32>",pseudoMeters:"f32"}},Uct=`// Define a structure to hold both the clip-space position and the common position.
struct ProjectResult {
  clipPosition: vec4<f32>,
  commonPosition: vec4<f32>,
};

// This function mimics the GLSL version with the 'out' parameter by returning both values.
fn project_position_to_clipspace_and_commonspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> ProjectResult {
  // Compute the projected position.
  let projectedPosition: vec3<f32> = project_position_vec3_f64(position, position64Low);

  // Start with the provided offset.
  var finalOffset: vec3<f32> = offset;

  // Get whether a rotation is needed and the rotation matrix.
  let rotationResult = project_needs_rotation(projectedPosition);

  // If rotation is needed, update the offset.
  if (rotationResult.needsRotation) {
    finalOffset = rotationResult.transform * offset;
  }

  // Compute the common position.
  let commonPosition: vec4<f32> = vec4<f32>(projectedPosition + finalOffset, 1.0);

  // Convert to clip-space.
  let clipPosition: vec4<f32> = project_common_position_to_clipspace(commonPosition);

  return ProjectResult(clipPosition, commonPosition);
}

// A convenience overload that returns only the clip-space position.
fn project_position_to_clipspace(
    position: vec3<f32>,
    position64Low: vec3<f32>,
    offset: vec3<f32>
) -> vec4<f32> {
  return project_position_to_clipspace_and_commonspace(position, position64Low, offset).clipPosition;
}
`,kct=`vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,ml={name:"project32",dependencies:[VB],source:Uct,vs:kct};function jct(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function IA(t,e){const i=A0([],e,t);return rV(i,i,1/i[3]),i}function EF(t,e){const i=t%e;return i<0?e+i:i}function rI(t,e,i){return t<e?e:t>i?i:t}function zct(t){return Math.log(t)*Math.LOG2E}const $B=Math.log2||zct;function Ic(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Bo=Math.PI,TV=Bo/4,Wa=Bo/180,sI=180/Bo,XA=512,A2=4003e4,Su=85.051129,Vct=1.5;function $ct(t){return $B(t)}function b_(t){const[e,i]=t;Ic(Number.isFinite(e)),Ic(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude");const n=e*Wa,r=i*Wa,s=XA*(n+Bo)/(2*Bo),a=XA*(Bo+Math.log(Math.tan(TV+r*.5)))/(2*Bo);return[s,a]}function QA(t){const[e,i]=t,n=e/XA*(2*Bo)-Bo,r=2*(Math.atan(Math.exp(i/XA*(2*Bo)-Bo))-TV);return[n*sI,r*sI]}function Wct(t){const{latitude:e}=t;Ic(Number.isFinite(e));const i=Math.cos(e*Wa);return $ct(A2*i)-9}function Sv(t){const e=Math.cos(t*Wa);return XA/A2/e}function aI(t){const{latitude:e,longitude:i,highPrecision:n=!1}=t;Ic(Number.isFinite(e)&&Number.isFinite(i));const r=XA,s=Math.cos(e*Wa),a=r/360,o=a/s,l=r/A2/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,o,l],degreesPerUnit:[1/a,1/o,1/l]};if(n){const h=Wa*Math.tan(e*Wa)/s,A=a*h/2,m=r/A2*h,b=m/o*l;c.unitsPerDegree2=[0,A,m],c.unitsPerMeter2=[b,0,b]}return c}function SV(t,e){const[i,n,r]=t,[s,a,o]=e,{unitsPerMeter:l,unitsPerMeter2:c}=aI({longitude:i,latitude:n,highPrecision:!0}),h=b_(t);h[0]+=s*(l[0]+c[0]*a),h[1]+=a*(l[1]+c[1]*a);const A=QA(h),m=(r||0)+(o||0);return Number.isFinite(r)||Number.isFinite(o)?[A[0],A[1],m]:A}function Hct(t){const{height:e,pitch:i,bearing:n,altitude:r,scale:s,center:a}=t,o=jct();f2(o,o,[0,0,-r]),iV(o,o,-i*Wa),nV(o,o,n*Wa);const l=s/e;return zB(o,o,[l,l,l]),a&&f2(o,o,Oot([],a)),o}function qct(t){const{width:e,height:i,altitude:n,pitch:r=0,offset:s,center:a,scale:o,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:h=v_(Vct)}=t;n!==void 0&&(h=v_(n));const A=h*Wa,m=r*Wa,b=WB(h);let S=b;a&&(S+=a[2]*o/Math.cos(m)/i);const M=A*(.5+(s?s[1]:0)/i),I=Math.sin(M)*S/Math.sin(rI(Math.PI/2-m-M,.01,Math.PI-.01)),O=Math.sin(m)*I+S,D=S*10,B=Math.min(O*c,D);return{fov:A,aspect:e/i,focalDistance:b,near:l,far:B}}function v_(t){return 2*Math.atan(.5/t)*sI}function WB(t){return .5/Math.tan(.5*t*Wa)}function wV(t,e){const[i,n,r=0]=t;return Ic(Number.isFinite(i)&&Number.isFinite(n)&&Number.isFinite(r)),IA(e,[i,n,r,1])}function HB(t,e,i=0){const[n,r,s]=t;if(Ic(Number.isFinite(n)&&Number.isFinite(r),"invalid pixel coordinate"),Number.isFinite(s))return IA(e,[n,r,s,1]);const a=IA(e,[n,r,0,1]),o=IA(e,[n,r,1,1]),l=a[2],c=o[2],h=l===c?0:((i||0)-l)/(c-l);return Zz([],a,o,h)}function Yct(t){const{width:e,height:i,bounds:n,minExtent:r=0,maxZoom:s=24,offset:a=[0,0]}=t,[[o,l],[c,h]]=n,A=Gct(t.padding),m=b_([o,rI(h,-Su,Su)]),b=b_([c,rI(l,-Su,Su)]),S=[Math.max(Math.abs(b[0]-m[0]),r),Math.max(Math.abs(b[1]-m[1]),r)],M=[e-A.left-A.right-Math.abs(a[0])*2,i-A.top-A.bottom-Math.abs(a[1])*2];Ic(M[0]>0&&M[1]>0);const I=M[0]/S[0],O=M[1]/S[1],D=(A.right-A.left)/2/I,B=(A.top-A.bottom)/2/O,P=[(b[0]+m[0])/2+D,(b[1]+m[1])/2+B],j=QA(P),N=Math.min(s,$B(Math.abs(Math.min(I,O))));return Ic(Number.isFinite(N)),{longitude:j[0],latitude:j[1],zoom:N}}function Gct(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Ic(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const BF=Math.PI/180;function Xct(t,e=0){const{width:i,height:n,unproject:r}=t,s={targetZ:e},a=r([0,n],s),o=r([i,n],s);let l,c;const h=t.fovy?.5*t.fovy*BF:Math.atan(.5/t.altitude),A=(90-t.pitch)*BF;return h>A-.01?(l=OF(t,0,e),c=OF(t,i,e)):(l=r([0,0],s),c=r([i,0],s)),[a,o,c,l]}function OF(t,e,i){const{pixelUnprojectionMatrix:n}=t,r=IA(n,[e,0,1,1]),s=IA(n,[e,t.height,1,1]),o=(i*t.distanceScales.unitsPerMeter[2]-r[2])/(s[2]-r[2]),l=Zz([],r,s,o),c=QA(l);return c.push(i),c}const RF=512;function Qct(t){const{width:e,height:i,pitch:n=0}=t;let{longitude:r,latitude:s,zoom:a,bearing:o=0}=t;(r<-180||r>180)&&(r=EF(r+180,360)-180),(o<-180||o>180)&&(o=EF(o+180,360)-180);const l=$B(i/RF);if(a<=l)a=l,s=0;else{const c=i/2/Math.pow(2,a),h=QA([0,c])[1];if(s<h)s=h;else{const A=QA([0,RF-c])[1];s>A&&(s=A)}}return{width:e,height:i,longitude:r,latitude:s,zoom:a,pitch:n,bearing:o}}const MV=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,Kct=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Zct=`
${MV}
${Kct}
`,Jct=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,tut=`
${MV}
${Jct}
`,eut=r1(aut),iut=r1(out),nut=[0,0,0,1],rut=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function sut(t,e){const[i,n,r]=t,s=HB([i,n,r],e);return Number.isFinite(r)?s:[s[0],s[1],0]}function aut({viewport:t,center:e}){return new Po(t.viewProjectionMatrix).invert().transform(e)}function out({viewport:t,shadowMatrices:e}){const i=[],n=t.pixelUnprojectionMatrix,r=t.isGeospatial?void 0:1,s=[[0,0,r],[t.width,0,r],[0,t.height,r],[t.width,t.height,r],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(a=>sut(a,n));for(const a of e){const o=a.clone().translate(new Al(t.center).negate()),l=s.map(h=>o.transform(h)),c=new Po().ortho({left:Math.min(...l.map(h=>h[0])),right:Math.max(...l.map(h=>h[0])),bottom:Math.min(...l.map(h=>h[1])),top:Math.max(...l.map(h=>h[1])),near:Math.min(...l.map(h=>-h[2])),far:Math.max(...l.map(h=>-h[2]))});i.push(c.multiplyRight(a))}return i}function lut(t){const{shadowEnabled:e=!0,project:i}=t;if(!e||!i||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};const n=VB.getUniforms(i),r=eut({viewport:i.viewport,center:n.center}),s=[],a=iut({shadowMatrices:t.shadowMatrices,viewport:i.viewport}).slice();for(let l=0;l<t.shadowMatrices.length;l++){const c=a[l],h=c.clone().translate(new Al(i.viewport.center).negate());n.coordinateSystem===Hi.LNGLAT&&n.projectionMode===ma.WEB_MERCATOR?(a[l]=h,s[l]=r):(a[l]=c.clone().multiplyRight(rut),s[l]=h.transform(r))}const o={drawShadowMap:!!t.drawToShadowMap,useShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,color:t.shadowColor||nut,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let l=0;l<a.length;l++)o[`viewProjectionMatrix${l}`]=a[l],o[`projectCenter${l}`]=s[l];for(let l=0;l<2;l++)o[`shadow_uShadowMap${l}`]=t.shadowMaps&&t.shadowMaps[l]||t.dummyShadowMap;return o}const DF={name:"shadow",dependencies:[VB],vs:Zct,fs:tut,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:lut,uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}},Yu={...lF,defaultUniforms:{...lF.defaultUniforms,useFloatColors:!1},inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}}},cut=[fV],uut=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],hut=[];function fut(t){const e=t2.getDefaultShaderAssembler();for(const n of cut)e.addDefaultModule(n);const i=t==="glsl"?uut:hut;for(const n of i)e.addShaderHook(n);return e}const dut=[255,255,255],Aut=1;let gut=0;class yut{constructor(e={}){this.type="ambient";const{color:i=dut}=e,{intensity:n=Aut}=e;this.id=e.id||`ambient-${gut++}`,this.color=i,this.intensity=n}}const put=[255,255,255],mut=1,_ut=[0,0,-1];let but=0;class CF{constructor(e={}){this.type="directional";const{color:i=put}=e,{intensity:n=mut}=e,{direction:r=_ut}=e,{_shadow:s=!1}=e;this.id=e.id||`directional-${but++}`,this.color=i,this.intensity=n,this.type="directional",this.direction=new Al(r).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class vut{constructor(e,i={id:"pass"}){const{id:n}=i;this.id=n,this.device=e,this.props={...i}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class qB extends vut{constructor(){super(...arguments),this._lastRenderIndex=-1}render(e){const[i,n]=this.device.canvasContext.getDrawingBufferSize(),r=e.clearCanvas??!0,s=e.clearColor??(r?[0,0,0,0]:!1),a=r?1:!1,o=r?0:!1,l=e.colorMask??15,c={viewport:[0,0,i,n]};e.colorMask&&(c.colorMask=l),e.scissorRect&&(c.scissorRect=e.scissorRect);const h=this.device.beginRenderPass({framebuffer:e.target,parameters:c,clearColor:s,clearDepth:a,clearStencil:o});try{return this._drawLayers(h,e)}finally{h.end(),this.device.submit()}}_drawLayers(e,i){const{target:n,shaderModuleProps:r,viewports:s,views:a,onViewportActive:o,clearStack:l=!0}=i;i.pass=i.pass||"unknown",l&&(this._lastRenderIndex=-1);const c=[];for(const h of s){const A=a&&a[h.id];o==null||o(h);const m=this._getDrawLayerParams(h,i),b=h.subViewports||[h];for(const S of b){const M=this._drawLayersInViewport(e,{target:n,shaderModuleProps:r,viewport:S,view:A,pass:i.pass,layers:i.layers},m);c.push(M)}}return c}_getDrawLayerParams(e,{layers:i,pass:n,isPicking:r=!1,layerFilter:s,cullRect:a,effects:o,shaderModuleProps:l},c=!1){var S;const h=[],A=IV(this._lastRenderIndex+1),m={layer:i[0],viewport:e,isPicking:r,renderPass:n,cullRect:a},b={};for(let M=0;M<i.length;M++){const I=i[M],O=this._shouldDrawLayer(I,m,s,b),D={shouldDrawLayer:O};O&&!c&&(D.shouldDrawLayer=!0,D.layerRenderIndex=A(I,O),D.shaderModuleProps=this._getShaderModuleProps(I,o,n,l),D.layerParameters={...(S=I.context.deck)==null?void 0:S.props.parameters,...this.getLayerParameters(I,M,e)}),h[M]=D}return h}_drawLayersInViewport(e,{layers:i,shaderModuleProps:n,pass:r,target:s,viewport:a,view:o},l){const c=Tut(this.device,{shaderModuleProps:n,target:s,viewport:a});if(o&&o.props.clear){const A=o.props.clear===!0?{color:!0,depth:!0}:o.props.clear;this.device.beginRenderPass({framebuffer:s,parameters:{viewport:c,scissorRect:c},clearColor:A.color?[0,0,0,0]:!1,clearDepth:A.depth?1:!1}).end()}const h={totalCount:i.length,visibleCount:0,compositeCount:0,pickableCount:0};e.setParameters({viewport:c});for(let A=0;A<i.length;A++){const m=i[A],b=l[A],{shouldDrawLayer:S}=b;if(S&&m.props.pickable&&h.pickableCount++,m.isComposite&&h.compositeCount++,m.isDrawable&&b.shouldDrawLayer){const{layerRenderIndex:M,shaderModuleProps:I,layerParameters:O}=b;h.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,M),I.project&&(I.project.viewport=a),m.context.renderPass=e;try{m._drawLayer({renderPass:e,shaderModuleProps:I,uniforms:{layerIndex:M},parameters:O})}catch(D){m.raiseError(D,`drawing ${m} to ${r}`)}}}return h}shouldDrawLayer(e){return!0}getShaderModuleProps(e,i,n){return null}getLayerParameters(e,i,n){return e.props.parameters}_shouldDrawLayer(e,i,n,r){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;i.layer=e;let a=e.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(i))return!1;i.layer=a,a=a.parent}if(n){const o=i.layer.id;if(o in r||(r[o]=n(i)),!r[o])return!1}return e.activateViewport(i.viewport),!0}_getShaderModuleProps(e,i,n,r){var l,c;const s=this.device.canvasContext.cssToDeviceRatio(),a=((l=e.internalState)==null?void 0:l.propsInTransition)||e.props,o={layer:a,picking:{isActive:!1},project:{viewport:e.context.viewport,devicePixelRatio:s,modelMatrix:a.modelMatrix,coordinateSystem:a.coordinateSystem,coordinateOrigin:a.coordinateOrigin,autoWrapLongitude:e.wrapLongitude}};if(i)for(const h of i)PF(o,(c=h.getShaderModuleProps)==null?void 0:c.call(h,e,o));return PF(o,this.getShaderModuleProps(e,i,o),r)}}function IV(t=0,e={}){const i={},n=(r,s)=>{const a=r.props._offset,o=r.id,l=r.parent&&r.parent.id;let c;if(l&&!(l in e)&&n(r.parent,!1),l in i){const h=i[l]=i[l]||IV(e[l],e);c=h(r,s),i[o]=h}else Number.isFinite(a)?(c=a+(e[l]||0),i[o]=null):c=t;return s&&c>=t&&(t=c+1),e[o]=c,c};return n}function Tut(t,{shaderModuleProps:e,target:i,viewport:n}){var l;const r=((l=e==null?void 0:e.project)==null?void 0:l.devicePixelRatio)??t.canvasContext.cssToDeviceRatio(),[,s]=t.canvasContext.getDrawingBufferSize(),a=i?i.height:s,o=n;return[o.x*r,a-(o.y+o.height)*r,o.width*r,o.height*r]}function PF(t,...e){for(const i of e)if(i)for(const n in i)t[n]?Object.assign(t[n],i[n]):t[n]=i[n];return t}class Sut extends qB{constructor(e,i){super(e,i);const n=e.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),r=e.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=e.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[n],depthStencilAttachment:r})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(e){const i=this.fbo,n=this.device.canvasContext.cssToDeviceRatio(),r=e.viewports[0],s=r.width*n,a=r.height*n,o=[1,1,1,1];(s!==i.width||a!==i.height)&&i.resize({width:s,height:a}),super.render({...e,clearColor:o,target:i,pass:"shadow"})}getLayerParameters(e,i,n){return{...e.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getShaderModuleProps(e,i,n){return{shadow:{project:n.project,drawToShadowMap:!0}}}}const wut={color:[255,255,255],intensity:1},xF=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],Mut=[0,0,0,200/255];class EV{constructor(e={}){this.id="lighting-effect",this.shadowColor=Mut,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(e)}setup(e){this.context=e;const{device:i,deck:n}=e;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(i),n._addDefaultShaderModule(DF),this.dummyShadowMap=i.createTexture({width:1,height:1}))}setProps(e){this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[];for(const i in e){const n=e[i];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(i=>i.shadow),this.context&&this.setup(this.context),this.props=e}preRender({layers:e,layerFilter:i,viewports:n,onViewportActive:r,views:s}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:e,layerFilter:i,viewports:n,onViewportActive:r,views:s,shaderModuleProps:{shadow:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(e,i){const n=this.shadow?{project:i.project,shadowMaps:this.shadowPasses.map(a=>a.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},r={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(a=>a.getProjectedLight({layer:e})),pointLights:this.pointLights.map(a=>a.getProjectedLight({layer:e}))},s=e.props.material;return{shadow:n,lighting:r,phongMaterial:s,gouraudMaterial:s}}cleanup(e){for(const i of this.shadowPasses)i.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,e.deck._removeDefaultShaderModule(DF))}_calculateMatrices(){const e=[];for(const i of this.directionalLights){const n=new Po().lookAt({eye:new Al(i.direction).negate()});e.push(n)}return e}_createShadowPasses(e){for(let i=0;i<this.directionalLights.length;i++){const n=new Sut(e);this.shadowPasses[i]=n}}_applyDefaultLights(){const{ambientLight:e,pointLights:i,directionalLights:n}=this;!e&&i.length===0&&n.length===0&&(this.ambientLight=new yut(wut),this.directionalLights.push(new CF(xF[0]),new CF(xF[1])))}}class Iut{constructor(e={}){this._pool=[],this.opts={overAlloc:2,poolSize:100},this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,i,{size:n=1,type:r,padding:s=0,copy:a=!1,initialize:o=!1,maxCount:l}){const c=r||e&&e.constructor||Float32Array,h=i*n+s;if(ArrayBuffer.isView(e)){if(h<=e.length)return e;if(h*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,h)}let A=1/0;l&&(A=l*n+s);const m=this._allocate(c,h,o,A);return e&&a?m.set(e):o||m.fill(0,0,4),this._release(e),m}release(e){this._release(e)}_allocate(e,i,n,r){let s=Math.max(Math.ceil(i*this.opts.overAlloc),1);s>r&&(s=r);const a=this._pool,o=e.BYTES_PER_ELEMENT*s,l=a.findIndex(c=>c.byteLength>=o);if(l>=0){const c=new e(a.splice(l,1)[0],0,s);return n&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const i=this._pool,{buffer:n}=e,{byteLength:r}=n,s=i.findIndex(a=>a.byteLength>=r);s<0?i.push(n):(s>0||i.length<this.opts.poolSize)&&i.splice(s,0,n),i.length>this.opts.poolSize&&i.shift()}}const KA=new Iut;function Um(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Eut(t,e){const i=t%e;return i<0?e+i:i}function But(t){return[t[12],t[13],t[14]]}function Out(t){return{left:Hd(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Hd(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Hd(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Hd(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Hd(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Hd(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const NF=new Al;function Hd(t,e,i,n){NF.set(t,e,i);const r=NF.len();return{distance:n/r,normal:new Al(-t/r,-e/r,-i/r)}}function Rut(t){return t-Math.fround(t)}let vm;function N3(t,e){const{size:i=1,startIndex:n=0}=e,r=e.endIndex!==void 0?e.endIndex:t.length,s=(r-n)/i;vm=KA.allocate(vm,s,{type:Float32Array,size:i*2});let a=n,o=0;for(;a<r;){for(let l=0;l<i;l++){const c=t[a++];vm[o+l]=c,vm[o+l+i]=Rut(c)}o+=i*2}return vm.subarray(0,s*i*2)}function Dut(t){let e=null,i=!1;for(const n of t)n&&(e?(i||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],i=!0),e[0][0]=Math.min(e[0][0],n[0][0]),e[0][1]=Math.min(e[0][1],n[0][1]),e[1][0]=Math.max(e[1][0],n[1][0]),e[1][1]=Math.max(e[1][1],n[1][1])):e=n);return e}const Cut=Math.PI/180,Put=Um(),FF=[0,0,0],xut={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function Nut({width:t,height:e,orthographic:i,fovyRadians:n,focalDistance:r,padding:s,near:a,far:o}){const l=t/e,c=i?new Po().orthographic({fovy:n,aspect:l,focalDistance:r,near:a,far:o}):new Po().perspective({fovy:n,aspect:l,near:a,far:o});if(s){const{left:h=0,right:A=0,top:m=0,bottom:b=0}=s,S=al((h+t-A)/2,0,t)-t/2,M=al((m+e-b)/2,0,e)-e/2;c[8]-=S*2/t,c[9]+=M*2/e}return c}class g0{constructor(e={}){this._frustumPlanes={},this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||xut,this.focalDistance=e.focalDistance||1,this.position=e.position||FF,this.modelMatrix=e.modelMatrix||null;const{longitude:i,latitude:n}=e;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(i),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?ma.WEB_MERCATOR:ma.WEB_MERCATOR_AUTO_OFFSET:ma.IDENTITY}equals(e){return e instanceof g0?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&m_(e.projectionMatrix,this.projectionMatrix)&&m_(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:i=!0}={}){const n=this.projectPosition(e),r=wV(n,this.pixelProjectionMatrix),[s,a]=r,o=i?a:this.height-a;return e.length===2?[s,o]:[s,o,r[2]]}unproject(e,{topLeft:i=!0,targetZ:n}={}){const[r,s,a]=e,o=i?s:this.height-s,l=n&&n*this.distanceScales.unitsPerMeter[2],c=HB([r,o,a],this.pixelUnprojectionMatrix,l),[h,A,m]=this.unprojectPosition(c);return Number.isFinite(a)?[h,A,m]:Number.isFinite(n)?[h,A,n]:[h,A]}projectPosition(e){const[i,n]=this.projectFlat(e),r=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[i,n,r]}unprojectPosition(e){const[i,n]=this.unprojectFlat(e),r=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[i,n,r]}projectFlat(e){if(this.isGeospatial){const i=b_(e);return i[1]=al(i[1],-318,830),i}return e}unprojectFlat(e){return this.isGeospatial?QA(e):e}getBounds(e={}){const i={targetZ:e.z||0},n=this.unproject([0,0],i),r=this.unproject([this.width,0],i),s=this.unproject([0,this.height],i),a=this.unproject([this.width,this.height],i);return[Math.min(n[0],r[0],s[0],a[0]),Math.min(n[1],r[1],s[1],a[1]),Math.max(n[0],r[0],s[0],a[0]),Math.max(n[1],r[1],s[1],a[1])]}getDistanceScales(e){return e&&this.isGeospatial?aI({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:i,width:n=1,height:r=1}){return e<this.x+this.width&&this.x<e+n&&i<this.y+this.height&&this.y<i+r}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,Out(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,i){return null}_initProps(e){const i=e.longitude,n=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=Wct({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||aI({latitude:n,longitude:i}));const r=Math.pow(2,this.zoom);this.scale=r;const{position:s,modelMatrix:a}=e;let o=FF;if(s&&(o=a?new Po(a).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([i,n,0]);this.center=new Al(o).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(o)}_initMatrices(e){const{viewMatrix:i=Put,projectionMatrix:n=null,orthographic:r=!1,fovyRadians:s,fovy:a=75,near:o=.1,far:l=1e3,padding:c=null,focalDistance:h=1}=e;this.viewMatrixUncentered=i,this.viewMatrix=new Po().multiplyRight(i).translate(new Al(this.center).negate()),this.projectionMatrix=n||Nut({width:this.width,height:this.height,orthographic:r,fovyRadians:s||a*Cut,focalDistance:h,padding:c,near:o,far:l});const A=Um();cf(A,A,this.projectionMatrix),cf(A,A,this.viewMatrix),this.viewProjectionMatrix=A,this.viewMatrixInverse=KM([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=But(this.viewMatrixInverse);const m=Um(),b=Um();zB(m,m,[this.width/2,-this.height/2,1]),f2(m,m,[1,-1,0]),cf(b,m,this.viewProjectionMatrix),this.pixelProjectionMatrix=b,this.pixelUnprojectionMatrix=KM(Um(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ji.warn("Pixel project matrix not invertible")()}}g0.displayName="Viewport";class _f extends g0{constructor(e={}){const{latitude:i=0,longitude:n=0,zoom:r=0,pitch:s=0,bearing:a=0,nearZMultiplier:o=.1,farZMultiplier:l=1.01,nearZ:c,farZ:h,orthographic:A=!1,projectionMatrix:m,repeat:b=!1,worldOffset:S=0,position:M,padding:I,legacyMeterSizes:O=!1}=e;let{width:D,height:B,altitude:P=1.5}=e;const j=Math.pow(2,r);D=D||1,B=B||1;let N,F=null;if(m)P=m[5]/2,N=v_(P);else{e.fovy?(N=e.fovy,P=WB(N)):N=v_(P);let V;if(I){const{top:Z=0,bottom:nt=0}=I;V=[0,al((Z+B-nt)/2,0,B)-B/2]}F=qct({width:D,height:B,scale:j,center:M&&[0,0,M[2]*Sv(i)],offset:V,pitch:s,fovy:N,nearZMultiplier:o,farZMultiplier:l}),Number.isFinite(c)&&(F.near=c),Number.isFinite(h)&&(F.far=h)}let $=Hct({height:B,pitch:s,bearing:a,scale:j,altitude:P});S&&($=new Po().translate([512*S,0,0]).multiplyLeft($)),super({...e,width:D,height:B,viewMatrix:$,longitude:n,latitude:i,zoom:r,...F,fovy:N,focalDistance:P}),this.latitude=i,this.longitude=n,this.zoom=r,this.pitch=s,this.bearing=a,this.altitude=P,this.fovy=N,this.orthographic=A,this._subViewports=b?[]:null,this._pseudoMeters=O,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),i=Math.floor((e[0]+180)/360),n=Math.ceil((e[2]-180)/360);for(let r=i;r<=n;r++){const s=r?new _f({...this,worldOffset:r}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[i,n]=this.projectFlat(e),r=(e[2]||0)*Sv(e[1]);return[i,n,r]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[i,n]=this.unprojectFlat(e),r=(e[2]||0)/Sv(n);return[i,n,r]}addMetersToLngLat(e,i){return SV(e,i)}panByPosition(e,i){const n=HB(i,this.pixelUnprojectionMatrix),r=this.projectFlat(e),s=aF([],r,vot([],n)),a=aF([],this.center,s),[o,l]=this.unprojectFlat(a);return{longitude:o,latitude:l}}getBounds(e={}){const i=Xct(this,e.z||0);return[Math.min(i[0][0],i[1][0],i[2][0],i[3][0]),Math.min(i[0][1],i[1][1],i[2][1],i[3][1]),Math.max(i[0][0],i[1][0],i[2][0],i[3][0]),Math.max(i[0][1],i[1][1],i[2][1],i[3][1])]}fitBounds(e,i={}){const{width:n,height:r}=this,{longitude:s,latitude:a,zoom:o}=Yct({width:n,height:r,bounds:e,...i});return new _f({width:n,height:r,longitude:s,latitude:a,zoom:o})}}_f.displayName="WebMercatorViewport";const LF=[0,0,0];function F3(t,e,i=!1){const n=e.projectPosition(t);if(i&&e instanceof _f){const[r,s,a=0]=t,o=e.getDistanceScales([r,s]);n[2]=a*o.unitsPerMeter[2]}return n}function Fut(t){const{viewport:e,modelMatrix:i,coordinateOrigin:n}=t;let{coordinateSystem:r,fromCoordinateSystem:s,fromCoordinateOrigin:a}=t;return r===Hi.DEFAULT&&(r=e.isGeospatial?Hi.LNGLAT:Hi.CARTESIAN),s===void 0&&(s=r),a===void 0&&(a=n),{viewport:e,coordinateSystem:r,coordinateOrigin:n,modelMatrix:i,fromCoordinateSystem:s,fromCoordinateOrigin:a}}function BV(t,{viewport:e,modelMatrix:i,coordinateSystem:n,coordinateOrigin:r,offsetMode:s}){let[a,o,l=0]=t;switch(i&&([a,o,l]=A0([],[a,o,l,1],i)),n){case Hi.LNGLAT:return F3([a,o,l],e,s);case Hi.LNGLAT_OFFSETS:return F3([a+r[0],o+r[1],l+(r[2]||0)],e,s);case Hi.METER_OFFSETS:return F3(SV(r,[a,o,l]),e,s);case Hi.CARTESIAN:default:return e.isGeospatial?[a+r[0],o+r[1],l+r[2]]:e.projectPosition([a,o,l])}}function Lut(t,e){const{viewport:i,coordinateSystem:n,coordinateOrigin:r,modelMatrix:s,fromCoordinateSystem:a,fromCoordinateOrigin:o}=Fut(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=LF,shaderCoordinateOrigin:h=LF,offsetMode:A=!1}=l?vV(i,n,r):{},m=BV(t,{viewport:i,modelMatrix:s,coordinateSystem:a,coordinateOrigin:o,offsetMode:A});if(A){const b=i.projectPosition(c||h);eV(m,m,b)}return m}let Uut=1,kut=1;class OV{constructor(){rt(this,"time",0);rt(this,"channels",new Map);rt(this,"animations",new Map);rt(this,"playing",!1);rt(this,"lastEngineTime",-1)}addChannel(e){const{delay:i=0,duration:n=Number.POSITIVE_INFINITY,rate:r=1,repeat:s=1}=e,a=Uut++,o={time:0,delay:i,duration:n,rate:r,repeat:s};return this._setChannelTime(o,this.time),this.channels.set(a,o),a}removeChannel(e){this.channels.delete(e);for(const[i,n]of this.animations)n.channel===e&&this.detachAnimation(i)}isFinished(e){const i=this.channels.get(e);return i===void 0?!1:this.time>=i.delay+i.duration*i.repeat}getTime(e){if(e===void 0)return this.time;const i=this.channels.get(e);return i===void 0?-1:i.time}setTime(e){this.time=Math.max(0,e);const i=this.channels.values();for(const r of i)this._setChannelTime(r,this.time);const n=this.animations.values();for(const r of n){const{animation:s,channel:a}=r;s.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,i){const n=kut++;return this.animations.set(n,{animation:e,channel:i}),e.setTime(this.getTime(i)),n}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,i){const n=i-e.delay,r=e.duration*e.repeat;n>=r?e.time=e.duration*e.rate:(e.time=Math.max(0,n)%e.duration,e.time*=e.rate)}}function jut(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function zut(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}let Vut=0;const $ut={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:jM.stats.get(`animation-loop-${Vut++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class Wut{constructor(e){rt(this,"device",null);rt(this,"canvas",null);rt(this,"props");rt(this,"animationProps",null);rt(this,"timeline",null);rt(this,"stats");rt(this,"cpuTime");rt(this,"gpuTime");rt(this,"frameRate");rt(this,"display");rt(this,"needsRedraw","initialized");rt(this,"_initialized",!1);rt(this,"_running",!1);rt(this,"_animationFrameId",null);rt(this,"_nextFramePromise",null);rt(this,"_resolveNextFrame",null);rt(this,"_cpuStartTime",0);rt(this,"_error",null);if(this.props={...$ut,...e},e=this.props,!e.device)throw new Error("No device provided");const{useDevicePixels:i=!0}=this.props;this.stats=e.stats||new IT({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:e.autoResizeViewport,autoResizeDrawingBuffer:e.autoResizeDrawingBuffer,useDevicePixels:i}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(e){var n,r;if(this.props.onError(e),this._error=Error(),((r=(n=this.device)==null?void 0:n.canvasContext)==null?void 0:r.canvas)instanceof HTMLCanvasElement){const s=document.createElement("h1");s.innerHTML=e.message,s.style.position="absolute",s.style.top="20%",s.style.left="10px",s.style.color="black",s.style.backgroundColor="red",document.body.appendChild(s)}}setNeedsRedraw(e){return this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.props.autoResizeViewport=e.autoResizeViewport||!1),"autoResizeDrawingBuffer"in e&&(this.props.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer||!1),"useDevicePixels"in e&&(this.props.useDevicePixels=e.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let e;return this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),this._running?(e!==!1&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this):null}catch(e){const i=e instanceof Error?e:new Error("Unknown error");throw this.props.onError(i),i}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){var e;return(e=this.device)!=null&&e.isLost||this._error?this:(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers(),this)}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw new Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(e){this.display&&(this.display.destroy(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_requestAnimationFrame(){this._running&&(this._animationFrameId=jut(this._animationFrame.bind(this)))}_cancelAnimationFrame(){this._animationFrameId!==null&&(zut(this._animationFrameId),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(e){var i;if(this.display){this.display._renderFrame(e);return}this.props.onRender(this._getAnimationProps()),(i=this.device)==null||i.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){var i,n;const e=(n=(i=this.device)==null?void 0:i.canvasContext)==null?void 0:n.canvas;if(!this.device||!e)throw new Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:e,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw new Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;const{width:e,height:i,aspect:n}=this._getSizeAndAspect();(e!==this.animationProps.width||i!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=i,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){var e;if(this.device=await this.props.device,!this.device)throw new Error("No device provided");this.canvas=((e=this.device.canvasContext)==null?void 0:e.canvas)||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const i=document.createElement("div");i.style.position="absolute",i.style.left="10px",i.style.bottom="10px",i.style.width="300px",i.style.background="white",this.canvas instanceof HTMLCanvasElement&&e.appendChild(this.canvas),e.appendChild(i);const n=this.props.onAddHTML(i);n&&(i.innerHTML=n)}}_getSizeAndAspect(){var s,a,o,l;if(!this.device)return{width:1,height:1,aspect:1};const[e,i]=((a=(s=this.device)==null?void 0:s.canvasContext)==null?void 0:a.getPixelSize())||[1,1];let n=1;const r=(l=(o=this.device)==null?void 0:o.canvasContext)==null?void 0:l.canvas;return r&&r.clientHeight?n=r.clientWidth/r.clientHeight:e>0&&i>0&&(n=e/i),{width:e,height:i,aspect:n}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){var e,i;this.props.autoResizeDrawingBuffer&&((i=(e=this.device)==null?void 0:e.canvasContext)==null||i.resize({useDevicePixels:this.props.useDevicePixels}))}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(e){e instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[e.offsetX,e.offsetY])}_onMouseleave(e){this._getAnimationProps()._mousePosition=null}}const L3={};function DT(t="id"){L3[t]=L3[t]||1;const e=L3[t]++;return`${t}-${e}`}class UF{constructor(e){rt(this,"id");rt(this,"userData",{});rt(this,"topology");rt(this,"bufferLayout",[]);rt(this,"vertexCount");rt(this,"indices");rt(this,"attributes");if(this.id=e.id||DT("geometry"),this.topology=e.topology,this.indices=e.indices||null,this.attributes=e.attributes,this.vertexCount=e.vertexCount,this.bufferLayout=e.bufferLayout||[],this.indices&&!(this.indices.usage&Dn.INDEX))throw new Error("Index buffer must have INDEX usage")}destroy(){var e;(e=this.indices)==null||e.destroy();for(const i of Object.values(this.attributes))i.destroy()}getVertexCount(){return this.vertexCount}getAttributes(){return this.attributes}getIndexes(){return this.indices||null}_calculateVertexCount(e){return e.byteLength/12}}function Hut(t,e){if(e instanceof UF)return e;const i=qut(t,e),{attributes:n,bufferLayout:r}=Yut(t,e);return new UF({topology:e.topology||"triangle-list",bufferLayout:r,vertexCount:e.vertexCount,indices:i,attributes:n})}function qut(t,e){if(!e.indices)return;const i=e.indices.value;return t.createBuffer({usage:Dn.INDEX,data:i})}function Yut(t,e){const i=[],n={};for(const[s,a]of Object.entries(e.attributes)){let o=s;switch(s){case"POSITION":o="positions";break;case"NORMAL":o="normals";break;case"TEXCOORD_0":o="texCoords";break;case"COLOR_0":o="colors";break}if(a){n[o]=t.createBuffer({data:a.value,id:`${s}-buffer`});const{value:l,size:c,normalized:h}=a;i.push({name:o,format:Nat(l,c,h)})}}const r=e._calculateVertexCount(e.attributes,e.indices);return{attributes:n,bufferLayout:i,vertexCount:r}}const K2=class K2{constructor(e){rt(this,"device");rt(this,"destroyPolicy");rt(this,"_hashCounter",0);rt(this,"_hashes",{});rt(this,"_renderPipelineCache",{});rt(this,"_computePipelineCache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultPipelineFactory(e){return e._lumaData.defaultPipelineFactory=e._lumaData.defaultPipelineFactory||new K2(e),e._lumaData.defaultPipelineFactory}createRenderPipeline(e){const i={...WA.defaultProps,...e},n=this._hashRenderPipeline(i);if(!this._renderPipelineCache[n]){const r=this.device.createRenderPipeline({...i,id:i.id?`${i.id}-cached`:void 0});r.hash=n,this._renderPipelineCache[n]={pipeline:r,useCount:0}}return this._renderPipelineCache[n].useCount++,this._renderPipelineCache[n].pipeline}createComputePipeline(e){const i={...s2.defaultProps,...e},n=this._hashComputePipeline(i);if(!this._computePipelineCache[n]){const r=this.device.createComputePipeline({...i,id:i.id?`${i.id}-cached`:void 0});r.hash=n,this._computePipelineCache[n]={pipeline:r,useCount:0}}return this._computePipelineCache[n].useCount++,this._computePipelineCache[n].pipeline}release(e){const i=e.hash,n=e instanceof s2?this._computePipelineCache:this._renderPipelineCache;n[i].useCount--,n[i].useCount===0&&this.destroyPolicy==="unused"&&(n[i].pipeline.destroy(),delete n[i])}_hashComputePipeline(e){return`${this._getHash(e.shader.source)}`}_hashRenderPipeline(e){const i=e.vs?this._getHash(e.vs.source):0,n=e.fs?this._getHash(e.fs.source):0,r="-",s=this._getHash(JSON.stringify(e.bufferLayout));switch(this.device.type){case"webgl":return`${i}/${n}V${r}BL${s}`;default:const a=this._getHash(JSON.stringify(e.parameters));return`${i}/${n}V${r}T${e.topology}P${a}BL${s}`}}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}};rt(K2,"defaultProps",{...WA.defaultProps});let oI=K2;const Z2=class Z2{constructor(e){rt(this,"device");rt(this,"destroyPolicy");rt(this,"_cache",{});this.device=e,this.destroyPolicy=e.props._factoryDestroyPolicy}static getDefaultShaderFactory(e){var i;return(i=e._lumaData).defaultShaderFactory||(i.defaultShaderFactory=new Z2(e)),e._lumaData.defaultShaderFactory}createShader(e){const i=this._hashShader(e);let n=this._cache[i];if(!n){const r=this.device.createShader({...e,id:e.id?`${e.id}-cached`:void 0});this._cache[i]=n={shader:r,useCount:0}}return n.useCount++,n.shader}release(e){const i=this._hashShader(e),n=this._cache[i];n&&(n.useCount--,n.useCount===0&&this.destroyPolicy==="unused"&&(delete this._cache[i],n.shader.destroy()))}_hashShader(e){return`${e.stage}:${e.source}`}};rt(Z2,"defaultProps",{...i2.defaultProps});let lI=Z2;function Gut(t,e){var r;const i={},n="Values";if(t.attributes.length===0&&!((r=t.varyings)!=null&&r.length))return{"No attributes or varyings":{[n]:"N/A"}};for(const s of t.attributes)if(s){const a=`${s.location} ${s.name}: ${s.type}`;i[`in ${a}`]={[n]:s.stepMode||"vertex"}}for(const s of t.varyings||[]){const a=`${s.location} ${s.name}`;i[`out ${a}`]={[n]:JSON.stringify(s)}}return i}let Or=null,Gh=null;function Xut(t,{id:e,minimap:i,opaque:n,top:r="0",left:s="0",rgbaScale:a=1}){Or||(Or=document.createElement("canvas"),Or.id=e,Or.title=e,Or.style.zIndex="100",Or.style.position="absolute",Or.style.top=r,Or.style.left=s,Or.style.border="blue 5px solid",Or.style.transform="scaleY(-1)",document.body.appendChild(Or),Gh=Or.getContext("2d")),(Or.width!==t.width||Or.height!==t.height)&&(Or.width=t.width/2,Or.height=t.height/2,Or.style.width="400px",Or.style.height="400px");const o=t.device.readPixelsToArrayWebGL(t),l=Gh==null?void 0:Gh.createImageData(t.width,t.height);if(l){for(let h=0;h<o.length;h+=4)l.data[0+h+0]=o[h+0]*a,l.data[0+h+1]=o[h+1]*a,l.data[0+h+2]=o[h+2]*a,l.data[0+h+3]=n?255:o[h+3]*a;Gh==null||Gh.putImageData(l,0,0)}}function cI(t,e,i){if(t===e)return!0;if(!i||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!cI(t[n],e[n],i-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!e.hasOwnProperty(s)||!cI(t[s],e[s],i-1))return!1;return!0}return!1}function Qut(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Kut(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":!1}function RV(t){return Qut(t)||Kut(t)}function Zut(t){return RV(t)||typeof t=="number"||typeof t=="boolean"}function DV(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(i=>{const n=t[i];Zut(n)?e.uniforms[i]=n:e.bindings[i]=n}),e}class Jut{constructor(e,i){rt(this,"options",{disableWarnings:!1});rt(this,"modules");rt(this,"moduleUniforms");rt(this,"moduleBindings");Object.assign(this.options,i);const n=RB(Object.values(e).filter(r=>r.dependencies));for(const r of n)e[r.name]=r;we.log(1,"Creating ShaderInputs with modules",Object.keys(e))(),this.modules=e,this.moduleUniforms={},this.moduleBindings={};for(const[r,s]of Object.entries(e))this._addModule(s),s.name&&r!==s.name&&!this.options.disableWarnings&&we.warn(`Module name: ${r} vs ${s.name}`)()}destroy(){}setProps(e){var i;for(const n of Object.keys(e)){const r=n,s=e[r]||{},a=this.modules[r];if(!a){this.options.disableWarnings||we.warn(`Module ${n} not found`)();continue}const o=this.moduleUniforms[r],l=this.moduleBindings[r],c=((i=a.getUniforms)==null?void 0:i.call(a,s,o))||s,{uniforms:h,bindings:A}=DV(c);this.moduleUniforms[r]={...o,...h},this.moduleBindings[r]={...l,...A}}}getModules(){return Object.values(this.modules)}getUniformValues(){return this.moduleUniforms}getBindingValues(){const e={};for(const i of Object.values(this.moduleBindings))Object.assign(e,i);return e}getDebugTable(){var i;const e={};for(const[n,r]of Object.entries(this.moduleUniforms))for(const[s,a]of Object.entries(r))e[`${n}.${s}`]={type:(i=this.modules[n].uniformTypes)==null?void 0:i[s],value:String(a)};return e}_addModule(e){const i=e.name;this.moduleUniforms[i]=e.defaultUniforms||{},this.moduleBindings[i]={}}}let tht="";async function eht(t,e){const i=new Image;return i.crossOrigin="anonymous",i.src=t.startsWith("http")?t:tht+t,await i.decode(),e?await createImageBitmap(i,e):await createImageBitmap(i)}class U3{constructor(e,i){rt(this,"device");rt(this,"id");rt(this,"texture");rt(this,"sampler");rt(this,"view");rt(this,"ready");rt(this,"isReady",!1);rt(this,"destroyed",!1);rt(this,"resolveReady",()=>{});rt(this,"rejectReady",()=>{});this.device=e,this.id=i.id||DT("async-texture"),typeof(i==null?void 0:i.data)=="string"&&i.dimension==="2d"&&(i={...i,data:eht(i.data)}),this.ready=new Promise((n,r)=>{this.resolveReady=()=>{this.isReady=!0,n()},this.rejectReady=r}),this.initAsync(i)}get[Symbol.toStringTag](){return"AsyncTexture"}toString(){return`AsyncTexture:"${this.id}"(${this.isReady?"ready":"loading"})`}async initAsync(e){const i=e.data;let n;try{n=await CV(i)}catch(s){this.rejectReady(s)}if(this.destroyed)return;const r={...e,data:n};this.texture=this.device.createTexture(r),this.sampler=this.texture.sampler,this.view=this.texture.view,this.isReady=!0,this.resolveReady()}destroy(){this.texture&&(this.texture.destroy(),this.texture=null),this.destroyed=!0}resize(e){if(!this.isReady)throw new Error("Cannot resize texture before it is ready");if(e.width===this.texture.width&&e.height===this.texture.height)return!1;if(this.texture){const i=this.texture;this.texture=i.clone(e),i.destroy()}return!0}}async function CV(t){if(t=await t,Array.isArray(t))return await Promise.all(t.map(CV));if(t&&typeof t=="object"&&t.constructor===Object){const e=t,i=await Promise.all(Object.values(e)),n=Object.keys(e),r={};for(let s=0;s<n.length;s++)r[n[s]]=i[s];return r}return t}const Xh=2,iht=1e4,J2=class J2{constructor(e,i){rt(this,"device");rt(this,"id");rt(this,"source");rt(this,"vs");rt(this,"fs");rt(this,"pipelineFactory");rt(this,"shaderFactory");rt(this,"userData",{});rt(this,"parameters");rt(this,"topology");rt(this,"bufferLayout");rt(this,"isInstanced");rt(this,"instanceCount",0);rt(this,"vertexCount");rt(this,"indexBuffer",null);rt(this,"bufferAttributes",{});rt(this,"constantAttributes",{});rt(this,"bindings",{});rt(this,"uniforms",{});rt(this,"vertexArray");rt(this,"transformFeedback",null);rt(this,"pipeline");rt(this,"shaderInputs");rt(this,"_uniformStore");rt(this,"_attributeInfos",{});rt(this,"_gpuGeometry",null);rt(this,"_getModuleUniforms");rt(this,"props");rt(this,"_pipelineNeedsUpdate","newly created");rt(this,"_needsRedraw","initializing");rt(this,"_destroyed",!1);rt(this,"_lastDrawTimestamp",-1);rt(this,"_lastLogTime",0);rt(this,"_logOpen",!1);rt(this,"_drawCount",0);var l,c,h,A;this.props={...J2.defaultProps,...i},i=this.props,this.id=i.id||DT("model"),this.device=e,Object.assign(this.userData,i.userData);const n=Object.fromEntries(((l=this.props.modules)==null?void 0:l.map(m=>[m.name,m]))||[]),r=i.shaderInputs||new Jut(n,{disableWarnings:this.props.disableWarnings});this.setShaderInputs(r);const s=rht(e),a=(((c=this.props.modules)==null?void 0:c.length)>0?this.props.modules:(h=this.shaderInputs)==null?void 0:h.getModules())||[];if(this.device.type==="webgpu"&&this.props.source){const{source:m,getUniforms:b}=this.props.shaderAssembler.assembleWGSLShader({platformInfo:s,...this.props,modules:a});this.source=m,this._getModuleUniforms=b,(A=this.props).shaderLayout||(A.shaderLayout=hot(this.source))}else{const{vs:m,fs:b,getUniforms:S}=this.props.shaderAssembler.assembleGLSLShaderPair({platformInfo:s,...this.props,modules:a});this.vs=m,this.fs=b,this._getModuleUniforms=S}this.vertexCount=this.props.vertexCount,this.instanceCount=this.props.instanceCount,this.topology=this.props.topology,this.bufferLayout=this.props.bufferLayout,this.parameters=this.props.parameters,i.geometry&&this.setGeometry(i.geometry),this.pipelineFactory=i.pipelineFactory||oI.getDefaultPipelineFactory(this.device),this.shaderFactory=i.shaderFactory||lI.getDefaultShaderFactory(this.device),this.pipeline=this._updatePipeline(),this.vertexArray=e.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry),"isInstanced"in i&&(this.isInstanced=i.isInstanced),i.instanceCount&&this.setInstanceCount(i.instanceCount),i.vertexCount&&this.setVertexCount(i.vertexCount),i.indexBuffer&&this.setIndexBuffer(i.indexBuffer),i.attributes&&this.setAttributes(i.attributes),i.constantAttributes&&this.setConstantAttributes(i.constantAttributes),i.bindings&&this.setBindings(i.bindings),i.uniforms&&this.setUniformsWebGL(i.uniforms),i.moduleSettings&&this.updateModuleSettingsWebGL(i.moduleSettings),i.transformFeedback&&(this.transformFeedback=i.transformFeedback),Object.seal(this)}get[Symbol.toStringTag](){return"Model"}toString(){return`Model(${this.id})`}destroy(){var e;this._destroyed||(this.pipelineFactory.release(this.pipeline),this.shaderFactory.release(this.pipeline.vs),this.pipeline.fs&&this.shaderFactory.release(this.pipeline.fs),this._uniformStore.destroy(),(e=this._gpuGeometry)==null||e.destroy(),this._destroyed=!0)}needsRedraw(){this._getBindingsUpdateTimestamp()>this._lastDrawTimestamp&&this.setNeedsRedraw("contents of bound textures or buffers updated");const e=this._needsRedraw;return this._needsRedraw=!1,e}setNeedsRedraw(e){this._needsRedraw||(this._needsRedraw=e)}predraw(){this.updateShaderInputs(),this.pipeline=this._updatePipeline()}draw(e){const i=this._areBindingsLoading();if(i)return we.info(Xh,`>>> DRAWING ABORTED ${this.id}: ${i} not loaded`)(),!1;try{e.pushDebugGroup(`${this}.predraw(${e})`),this.predraw()}finally{e.popDebugGroup()}let n;try{e.pushDebugGroup(`${this}.draw(${e})`),this._logDrawCallStart(),this.pipeline=this._updatePipeline();const r=this._getBindings();this.pipeline.setBindings(r,{disableWarnings:this.props.disableWarnings}),uI(this.uniforms)||this.pipeline.setUniformsWebGL(this.uniforms);const{indexBuffer:s}=this.vertexArray,a=s?s.byteLength/(s.indexType==="uint32"?4:2):void 0;n=this.pipeline.draw({renderPass:e,vertexArray:this.vertexArray,isInstanced:this.isInstanced,vertexCount:this.vertexCount,instanceCount:this.instanceCount,indexCount:a,transformFeedback:this.transformFeedback||void 0,parameters:this.parameters,topology:this.topology})}finally{e.popDebugGroup(),this._logDrawCallEnd()}return this._logFramebuffer(e),n?(this._lastDrawTimestamp=this.device.timestamp,this._needsRedraw=!1):this._needsRedraw="waiting for resource initialization",n}setGeometry(e){var n;(n=this._gpuGeometry)==null||n.destroy();const i=e&&Hut(this.device,e);if(i){this.setTopology(i.topology||"triangle-list");const r=new w3(this.bufferLayout);this.bufferLayout=r.mergeBufferLayouts(i.bufferLayout,this.bufferLayout),this.vertexArray&&this._setGeometryAttributes(i)}this._gpuGeometry=i}setTopology(e){e!==this.topology&&(this.topology=e,this._setPipelineNeedsUpdate("topology"))}setBufferLayout(e){const i=new w3(this.bufferLayout);this.bufferLayout=this._gpuGeometry?i.mergeBufferLayouts(e,this._gpuGeometry.bufferLayout):e,this._setPipelineNeedsUpdate("bufferLayout"),this.pipeline=this._updatePipeline(),this.vertexArray=this.device.createVertexArray({renderPipeline:this.pipeline}),this._gpuGeometry&&this._setGeometryAttributes(this._gpuGeometry)}setParameters(e){cI(e,this.parameters,2)||(this.parameters=e,this._setPipelineNeedsUpdate("parameters"))}setInstanceCount(e){this.instanceCount=e,this.isInstanced===void 0&&e>0&&(this.isInstanced=!0),this.setNeedsRedraw("instanceCount")}setVertexCount(e){this.vertexCount=e,this.setNeedsRedraw("vertexCount")}setShaderInputs(e){this.shaderInputs=e,this._uniformStore=new xat(this.shaderInputs.modules);for(const[i,n]of Object.entries(this.shaderInputs.modules))if(nht(n)){const r=this._uniformStore.getManagedUniformBuffer(this.device,i);this.bindings[`${i}Uniforms`]=r}this.setNeedsRedraw("shaderInputs")}updateShaderInputs(){this._uniformStore.setUniforms(this.shaderInputs.getUniformValues()),this.setBindings(this.shaderInputs.getBindingValues()),this.setNeedsRedraw("shaderInputs")}setBindings(e){Object.assign(this.bindings,e),this.setNeedsRedraw("bindings")}setTransformFeedback(e){this.transformFeedback=e,this.setNeedsRedraw("transformFeedback")}setIndexBuffer(e){this.vertexArray.setIndexBuffer(e),this.setNeedsRedraw("indexBuffer")}setAttributes(e,i){const n=(i==null?void 0:i.disableWarnings)??this.props.disableWarnings;e.indices&&we.warn(`Model:${this.id} setAttributes() - indexBuffer should be set using setIndexBuffer()`)(),this.bufferLayout=Fat(this.pipeline.shaderLayout,this.bufferLayout);const r=new w3(this.bufferLayout);for(const[s,a]of Object.entries(e)){const o=r.getBufferLayout(s);if(!o){n||we.warn(`Model(${this.id}): Missing layout for buffer "${s}".`)();continue}const l=r.getAttributeNamesForBuffer(o);let c=!1;for(const h of l){const A=this._attributeInfos[h];if(A){const m=this.device.type==="webgpu"?r.getBufferIndex(A.bufferName):A.location;this.vertexArray.setBuffer(m,a),c=!0}}!c&&!n&&we.warn(`Model(${this.id}): Ignoring buffer "${a.id}" for unknown attribute "${s}"`)()}this.setNeedsRedraw("attributes")}setConstantAttributes(e,i){for(const[n,r]of Object.entries(e)){const s=this._attributeInfos[n];s?this.vertexArray.setConstantWebGL(s.location,r):((i==null?void 0:i.disableWarnings)??this.props.disableWarnings)||we.warn(`Model "${this.id}: Ignoring constant supplied for unknown attribute "${n}"`)()}this.setNeedsRedraw("constants")}setUniforms(e){this.setUniformsWebGL(e)}setUniformsWebGL(e){uI(e)||(this.pipeline.setUniformsWebGL(e),Object.assign(this.uniforms,e)),this.setNeedsRedraw("uniforms")}updateModuleSettingsWebGL(e){const{bindings:i,uniforms:n}=DV(this._getModuleUniforms(e));Object.assign(this.bindings,i),Object.assign(this.uniforms,n),this.setNeedsRedraw("moduleSettings")}_areBindingsLoading(){for(const e of Object.values(this.bindings))if(e instanceof U3&&!e.isReady)return e.id;return!1}_getBindings(){const e={};for(const[i,n]of Object.entries(this.bindings))n instanceof U3?n.isReady&&(e[i]=n.texture):e[i]=n;return e}_getBindingsUpdateTimestamp(){let e=0;for(const i of Object.values(this.bindings))i instanceof e2?e=Math.max(e,i.texture.updateTimestamp):i instanceof Dn||i instanceof Zn?e=Math.max(e,i.updateTimestamp):i instanceof U3?e=i.texture?Math.max(e,i.texture.updateTimestamp):1/0:i instanceof n2||(e=Math.max(e,i.buffer.updateTimestamp));return e}_setGeometryAttributes(e){const i={...e.attributes};for(const[n]of Object.entries(i))!this.pipeline.shaderLayout.attributes.find(r=>r.name===n)&&n!=="positions"&&delete i[n];this.vertexCount=e.vertexCount,this.setIndexBuffer(e.indices||null),this.setAttributes(e.attributes,{disableWarnings:!0}),this.setAttributes(i,{disableWarnings:this.props.disableWarnings}),this.setNeedsRedraw("geometry attributes")}_setPipelineNeedsUpdate(e){this._pipelineNeedsUpdate||(this._pipelineNeedsUpdate=e),this.setNeedsRedraw(e)}_updatePipeline(){if(this._pipelineNeedsUpdate){let e=null,i=null;this.pipeline&&(we.log(1,`Model ${this.id}: Recreating pipeline because "${this._pipelineNeedsUpdate}".`)(),e=this.pipeline.vs,i=this.pipeline.fs),this._pipelineNeedsUpdate=!1;const n=this.shaderFactory.createShader({id:`${this.id}-vertex`,stage:"vertex",source:this.source||this.vs,debugShaders:this.props.debugShaders});let r=null;this.source?r=n:this.fs&&(r=this.shaderFactory.createShader({id:`${this.id}-fragment`,stage:"fragment",source:this.source||this.fs,debugShaders:this.props.debugShaders})),this.pipeline=this.pipelineFactory.createRenderPipeline({...this.props,bufferLayout:this.bufferLayout,topology:this.topology,parameters:this.parameters,bindings:this._getBindings(),vs:n,fs:r}),this._attributeInfos=Iz(this.pipeline.shaderLayout,this.bufferLayout),e&&this.shaderFactory.release(e),i&&this.shaderFactory.release(i)}return this.pipeline}_logDrawCallStart(){const e=we.level>3?0:iht;we.level<2||Date.now()-this._lastLogTime<e||(this._lastLogTime=Date.now(),this._logOpen=!0,we.group(Xh,`>>> DRAWING MODEL ${this.id}`,{collapsed:we.level<=2})())}_logDrawCallEnd(){if(this._logOpen){const e=Gut(this.pipeline.shaderLayout,this.id);we.table(Xh,e)();const i=this.shaderInputs.getDebugTable();for(const[r,s]of Object.entries(this.uniforms))i[r]={value:s};we.table(Xh,i)();const n=this._getAttributeDebugTable();we.table(Xh,this._attributeInfos)(),we.table(Xh,n)(),we.groupEnd(Xh)(),this._logOpen=!1}}_logFramebuffer(e){const i=this.device.props.debugFramebuffers;if(this._drawCount++,!i)return;const n=e.props.framebuffer;n&&Xut(n,{id:n.id,minimap:!0})}_getAttributeDebugTable(){const e={};for(const[i,n]of Object.entries(this._attributeInfos)){const r=this.vertexArray.attributes[n.location];e[n.location]={name:i,type:n.shaderType,values:r?this._getBufferOrConstantValues(r,n.bufferDataType):"null"}}if(this.vertexArray.indexBuffer){const{indexBuffer:i}=this.vertexArray,n=i.indexType==="uint32"?new Uint32Array(i.debugData):new Uint16Array(i.debugData);e.indices={name:"indices",type:i.indexType,values:n.toString()}}return e}_getBufferOrConstantValues(e,i){const n=Oz(i);return(e instanceof Dn?new n(e.debugData):e).toString()}};rt(J2,"defaultProps",{...WA.defaultProps,source:void 0,vs:null,fs:null,id:"unnamed",handle:void 0,userData:{},defines:{},modules:[],moduleSettings:void 0,geometry:null,indexBuffer:null,attributes:{},constantAttributes:{},varyings:[],isInstanced:void 0,instanceCount:0,vertexCount:0,shaderInputs:void 0,pipelineFactory:void 0,shaderFactory:void 0,transformFeedback:void 0,shaderAssembler:t2.getDefaultShaderAssembler(),debugShaders:void 0,disableWarnings:void 0});let Yr=J2;function nht(t){return!!(t.uniformTypes&&!uI(t.uniformTypes))}function rht(t){return{type:t.type,shaderLanguage:t.info.shadingLanguage,shaderLanguageVersion:t.info.shadingLanguageVersion,gpu:t.info.gpu,features:t.features}}function uI(t){for(const e in t)return!1;return!0}const c_=class c_{constructor(e,i=c_.defaultProps){rt(this,"device");rt(this,"model");rt(this,"transformFeedback");if(!c_.isSupported(e))throw new Error("BufferTransform not yet implemented on WebGPU");this.device=e,this.model=new Yr(this.device,{id:i.id||"buffer-transform-model",fs:i.fs||mz(),topology:i.topology||"point-list",varyings:i.outputs||i.varyings,...i}),this.transformFeedback=this.device.createTransformFeedback({layout:this.model.pipeline.shaderLayout,buffers:i.feedbackBuffers}),this.model.setTransformFeedback(this.transformFeedback),Object.seal(this)}static isSupported(e){var i;return((i=e==null?void 0:e.info)==null?void 0:i.type)==="webgl"}destroy(){this.model&&this.model.destroy()}delete(){this.destroy()}run(e){e!=null&&e.inputBuffers&&this.model.setAttributes(e.inputBuffers),e!=null&&e.outputBuffers&&this.transformFeedback.setBuffers(e.outputBuffers);const i=this.device.beginRenderPass(e);this.model.draw(i),i.end()}getBuffer(e){return this.transformFeedback.getBuffer(e)}readAsync(e){const i=this.getBuffer(e);if(!i)throw new Error("BufferTransform#getBuffer");if(i instanceof Dn)return i.readAsync();const{buffer:n,byteOffset:r=0,byteLength:s=n.byteLength}=i;return n.readAsync(r,s)}};rt(c_,"defaultProps",{...Yr.defaultProps,outputs:void 0,feedbackBuffers:void 0});let T_=c_;const sht="transform_output";class kF{constructor(e,i){rt(this,"device");rt(this,"model");rt(this,"sampler");rt(this,"currentIndex",0);rt(this,"samplerTextureMap",null);rt(this,"bindings",[]);rt(this,"resources",{});this.device=e,this.sampler=e.createSampler({addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge",minFilter:"nearest",magFilter:"nearest",mipmapFilter:"nearest"}),this.model=new Yr(this.device,{id:i.id||"texture-transform-model",fs:i.fs||mz({input:i.targetTextureVarying,inputChannels:i.targetTextureChannels,output:sht}),vertexCount:i.vertexCount,...i}),this._initialize(i),Object.seal(this)}destroy(){var e;this.model.destroy();for(const i of this.bindings)(e=i.framebuffer)==null||e.destroy()}delete(){this.destroy()}run(e){const{framebuffer:i}=this.bindings[this.currentIndex],n=this.device.beginRenderPass({framebuffer:i,...e});this.model.draw(n),n.end()}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}_initialize(e){this._updateBindings(e)}_updateBindings(e){this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e)}_updateBinding(e,{sourceBuffers:i,sourceTextures:n,targetTexture:r}){if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,n),Object.assign(e.sourceBuffers,i),r){e.targetTexture=r;const{width:s,height:a}=r;e.framebuffer&&e.framebuffer.destroy(),e.framebuffer=this.device.createFramebuffer({id:"transform-framebuffer",width:s,height:a,colorAttachments:[r]}),e.framebuffer.resize({width:s,height:a})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:i}=this.bindings[e];for(const n in i)i[n].sampler=this.sampler}}class Uu{constructor(e){rt(this,"id");rt(this,"topology");rt(this,"vertexCount");rt(this,"indices");rt(this,"attributes");rt(this,"userData",{});const{attributes:i={},indices:n=null,vertexCount:r=null}=e;this.id=e.id||DT("geometry"),this.topology=e.topology,n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n),this.attributes={};for(const[s,a]of Object.entries(i)){const o=ArrayBuffer.isView(a)?{value:a}:a;if(!ArrayBuffer.isView(o.value))throw new Error(`${this._print(s)}: must be typed array or object with value as typed array`);if((s==="POSITION"||s==="positions")&&!o.size&&(o.size=3),s==="indices"){if(this.indices)throw new Error("Multiple indices detected");this.indices=o}else this.attributes[s]=o}this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this.vertexCount=r||this._calculateVertexCount(this.attributes,this.indices)}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return`Geometry ${this.id} attribute ${e}`}_setAttributes(e,i){return this}_calculateVertexCount(e,i){if(i)return i.value.length;let n=1/0;for(const r of Object.values(e)){const{value:s,size:a,constant:o}=r;!o&&s&&a!==void 0&&a>=1&&(n=Math.min(n,s.length/a))}return n}}const aht={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class PV extends qB{constructor(){super(...arguments),this._colorEncoderState=null}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:i,views:n,viewports:r,onViewportActive:s,pickingFBO:a,deviceRect:{x:o,y:l,width:c,height:h},cullRect:A,effects:m,pass:b="picking",pickZ:S,shaderModuleProps:M}){this.pickZ=S;const I=this._resetColorEncoder(S),O=[o,l,c,h],D=super.render({target:a,layers:e,layerFilter:i,views:n,viewports:r,onViewportActive:s,cullRect:A,effects:m==null?void 0:m.filter(P=>P.useInPicking),pass:b,isPicking:!0,shaderModuleProps:M,clearColor:[0,0,0,0],colorMask:15,scissorRect:O});return this._colorEncoderState=null,{decodePickingColor:I&&lht.bind(null,I),stats:D}}shouldDrawLayer(e){const{pickable:i,operation:n}=e.props;return i&&n.includes("draw")||n.includes("terrain")||n.includes("mask")}getShaderModuleProps(e,i,n){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(e,i,n){const r={...e.props.parameters},{pickable:s,operation:a}=e.props;return!this._colorEncoderState||a.includes("terrain")?r.blend=!1:s&&a.includes("draw")&&(Object.assign(r,aht),r.blend=!0,r.blendColor=oht(this._colorEncoderState,e,n)),r}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function oht(t,e,i){const{byLayer:n,byAlpha:r}=t;let s,a=n.get(e);return a?(a.viewports.push(i),s=a.a):(s=n.size+1,s<=255?(a={a:s,layer:e,viewports:[i]},n.set(e,a),r[s]=a):(Ji.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function lht(t,e){const i=t.byAlpha[e[3]];return i&&{pickedLayer:i.layer,pickedViewports:i.viewports,pickedObjectIndex:i.layer.decodePickingColor(e)}}const Jd={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},g2=Symbol.for("component"),Ru=Symbol.for("propTypes"),k3=Symbol.for("deprecatedProps"),EA=Symbol.for("asyncPropDefaults"),bf=Symbol.for("asyncPropOriginal"),wu=Symbol.for("asyncPropResolved");function ZA(t,e=()=>!0){return Array.isArray(t)?xV(t,e,[]):e(t)?[t]:[]}function xV(t,e,i){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?xV(r,e,i):e(r)&&i.push(r)}return i}function cht({target:t,source:e,start:i=0,count:n=1}){const r=e.length,s=n*r;let a=0;for(let o=i;a<r;a++)t[o++]=e[a];for(;a<s;)a<s-a?(t.copyWithin(i+a,i,i+a),a*=2):(t.copyWithin(i+a,i,i+s-a),a=s);return t}class uht{constructor(e,i,n){this._loadCount=0,this._subscribers=new Set,this.id=e,this.context=n,this.setData(i)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,i){if(e===this._data&&!i)return;this._data=e;const n=++this._loadCount;let r=e;typeof e=="string"&&(r=Kv(e)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(s=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===n&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class hht{constructor(e){var i;this.protocol=e.protocol||"resource://",this._context={device:e.device,gl:(i=e.device)==null?void 0:i.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:i,forceUpdate:n=!1,persistent:r=!0}){let s=this._resources[e];s?s.setData(i,n):(s=new uht(e,i,this._context),this._resources[e]=s),s.persistent=r}remove(e){const i=this._resources[e];i&&(i.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const i=this._consumers[e];if(i){for(const n in i){const r=i[n],s=this._resources[r.resourceId];s&&s.unsubscribe(r)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:i,consumerId:n,requestId:r="default"}){const{_resources:s,protocol:a}=this;e.startsWith(a)&&(e=e.replace(a,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const o=s[e];if(this._track(n,r,o,i),o)return o.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,i,n,r){const s=this._consumers,a=s[e]=s[e]||{};let o=a[i];const l=o&&o.resourceId&&this._resources[o.resourceId];l&&(l.unsubscribe(o),this.prune()),n&&(o?(o.onChange=r,o.resourceId=n.id):o={onChange:r,resourceId:n.id},a[i]=o,n.subscribe(o))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const i=this._resources[e];!i.persistent&&!i.inUse()&&(i.delete(),delete this._resources[e])}}}const fht="layerManager.setLayers",dht="layerManager.activateViewport";class Aht{constructor(e,i){var o;this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=l=>{as(dht,this,l),l&&(this.context.viewport=l)};const{deck:n,stats:r,viewport:s,timeline:a}=i||{};this.layers=[],this.resourceManager=new hht({device:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:e,gl:e==null?void 0:e.gl,deck:n,shaderAssembler:fut(((o=e==null?void 0:e.info)==null?void 0:o.shadingLanguage)||"glsl"),defaultShaderModules:[Tlt],renderPass:void 0,stats:r||new IT({id:"deck.gl"}),viewport:s||new g0({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:a||new OV,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let i=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const r=n.getNeedsRedraw(e);i=i||r}return i}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(i=>e.find(n=>i.id.indexOf(n)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,i){as(fht,this,i,e),this._lastRenderedLayers=e;const n=ZA(e,Boolean);for(const r of n)r.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw(`updating layers: ${e}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}addDefaultShaderModule(e){const{defaultShaderModules:i}=this.context;i.find(n=>n.name===e.name)||(i.push(e),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(e){const{defaultShaderModules:i}=this.context,n=i.findIndex(r=>r.name===e.name);n>=0&&(i.splice(n,1),this._defaultShaderModulesChanged=!0)}_handleError(e,i,n){n.raiseError(i,`${e} of ${n}`)}_updateLayers(e,i){const n={};for(const a of e)n[a.id]?Ji.warn(`Multiple old layers with same id ${a.id}`)():n[a.id]=a;if(this._defaultShaderModulesChanged){for(const a of e)a.setNeedsUpdate(),a.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}const r=[];this._updateSublayersRecursively(i,n,r),this._finalizeOldLayers(n);let s=!1;for(const a of r)if(a.hasUniformTransition()){s=`Uniform transition in ${a}`;break}this._needsUpdate=s,this.layers=r}_updateSublayersRecursively(e,i,n){for(const r of e){r.context=this.context;const s=i[r.id];s===null&&Ji.warn(`Multiple new layers with same id ${r.id}`)(),i[r.id]=null;let a=null;try{this._debug&&s!==r&&r.validateProps(),s?(this._transferLayerState(s,r),this._updateLayer(r)):this._initializeLayer(r),n.push(r),a=r.isComposite?r.getSubLayers():null}catch(o){this._handleError("matching",o,r)}a&&this._updateSublayersRecursively(a,i,n)}}_finalizeOldLayers(e){for(const i in e){const n=e[i];n&&this._finalizeLayer(n)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Jd.INITIALIZED}catch(i){this._handleError("initialization",i,e)}}_transferLayerState(e,i){i._transferState(e),i.lifecycle=Jd.MATCHED,i!==e&&(e.lifecycle=Jd.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(i){this._handleError("update",i,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||`finalized ${e}`,e.lifecycle=Jd.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Jd.FINALIZED}catch(i){this._handleError("finalization",i,e)}}}function Oo(t,e,i){if(t===e)return!0;if(!i||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Oo(t[n],e[n],i-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n)if(!e.hasOwnProperty(s)||!Oo(t[s],e[s],i-1))return!1;return!0}return!1}class ght{constructor(e){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const i=this.controllers[e];i&&i.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const i=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),i}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const i=this.controllers[e];i&&i.updateTransition()}}getViewports(e){return e?this._viewports.filter(i=>i.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(i=>{e[i.id]=i}),e}getView(e){return this.views.find(i=>i.id===e)}getViewState(e){const i=typeof e=="string"?this.getView(e):e,n=i&&this.viewState[i.getViewStateId()]||this.viewState;return i?i.filterViewState(n):n}getViewport(e){return this._viewportMap[e]}unproject(e,i){const n=this.getViewports(),r={x:e[0],y:e[1]};for(let s=n.length-1;s>=0;--s){const a=n[s];if(a.containsPixel(r)){const o=e.slice();return o[0]-=a.x,o[1]-=a.y,a.unproject(o,i)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,i){(e!==this.width||i!==this.height)&&(this.width=e,this.height=i,this.setNeedsUpdate("Size changed"))}_setViews(e){e=ZA(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!Oo(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Ji.warn("missing `viewState` or `initialViewState`")()}_createController(e,i){const n=i.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var a;return(a=this.getView(e.id))==null?void 0:a.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,i,n,r){const s=e.controller;if(s&&n){const a={...i,...s,id:e.id,x:n.x,y:n.y,width:n.width,height:n.height};return(!r||r.constructor!==s.type)&&(r=this._createController(e,a)),r&&r.setProps(a),r}return null}_rebuildViewports(){const{views:e}=this,i=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let r=e.length;r--;){const s=e[r],a=this.getViewState(s),o=s.makeViewport({viewState:a,width:this.width,height:this.height});let l=i[s.id];const c=!!s.controller;c&&!l&&(n=!0),(n||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,a,o,l),o&&this._viewports.unshift(o)}for(const r in i){const s=i[r];s&&!this.controllers[r]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,i){return e.length!==i.length?!0:e.some((n,r)=>!e[r].equals(i[r]))}}const yht=/([0-9]+\.?[0-9]*)(%|px)/;function du(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=yht.exec(t);if(e&&e.length>=3){const i=e[2]==="%",n=parseFloat(e[1]);return{position:i?n/100:n,relative:i}}default:throw new Error(`Could not parse position string ${t}`)}}function Au(t,e){return t.relative?Math.round(t.position*e):t.position}class NV{constructor(e){const{id:i,x:n=0,y:r=0,width:s="100%",height:a="100%",padding:o=null}=e;this.id=i||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=du(n),this._y=du(r),this._width=du(s),this._height=du(a),this._padding=o&&{left:du(o.left||0),right:du(o.right||0),top:du(o.top||0),bottom:du(o.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.constructor===e.constructor&&Oo(this.props,e.props,2)}makeViewport({width:e,height:i,viewState:n}){n=this.filterViewState(n);const r=this.getDimensions({width:e,height:i});if(!r.height||!r.width)return null;const s=this.getViewportType(n);return new s({...n,...this.props,...r})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const i={...e};for(const n in this.props.viewState)n!=="id"&&(i[n]=this.props.viewState[n]);return i}return e}getDimensions({width:e,height:i}){const n={x:Au(this._x,e),y:Au(this._y,i),width:Au(this._width,e),height:Au(this._height,i)};return this._padding&&(n.padding={left:Au(this._padding.left,e),top:Au(this._padding.top,i),right:Au(this._padding.right,e),bottom:Au(this._padding.bottom,i)}),n}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class CT{constructor(e){this._inProgress=!1,this._handle=null,this.time=0,this.settings={duration:0},this._timeline=e}get inProgress(){return this._inProgress}start(e){var i,n;this.cancel(),this.settings=e,this._inProgress=!0,(n=(i=this.settings).onStart)==null||n.call(i,this)}end(){var e,i;this._inProgress&&(this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(i=(e=this.settings).onEnd)==null||i.call(e,this))}cancel(){var e,i;this._inProgress&&((i=(e=this.settings).onInterrupt)==null||i.call(e,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1)}update(){var e,i;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:r}=this;this._handle=n.addChannel({delay:n.getTime(),duration:r.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(i=(e=this.settings).onUpdate)==null||i.call(e,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const jF=()=>{},hI={BREAK:1,SNAP_TO_END:2,IGNORE:3},pht=t=>t,mht=hI.BREAK;class _ht{constructor(e){this._onTransitionUpdate=i=>{const{time:n,settings:{interpolator:r,startProps:s,endProps:a,duration:o,easing:l}}=i,c=l(n/o),h=r.interpolateProps(s,a,c);this.propsInTransition=this.getControllerState({...this.props,...h}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new CT(e.timeline),this.onViewStateChange=e.onViewStateChange||jF,this.onStateChange=e.onStateChange||jF}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let i=!1;const n=this.props;if(this.props=e,!n||this._shouldIgnoreViewportChange(n,e))return!1;if(this._isTransitionEnabled(e)){let r=n;if(this.transition.inProgress){const{interruption:s,endProps:a}=this.transition.settings;r={...n,...s===hI.SNAP_TO_END?a:this.propsInTransition||n}}this._triggerTransition(r,e),i=!0}else this.transition.cancel();return i}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:i,transitionInterpolator:n}=e;return(i>0||i==="auto")&&!!n}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,i){return this.transition.inProgress?this.transition.settings.interruption===hI.IGNORE||this._isUpdateDueToCurrentTransition(i):this._isTransitionEnabled(i)?i.transitionInterpolator.arePropsEqual(e,i):!0}_triggerTransition(e,i){const n=this.getControllerState(e),r=this.getControllerState(i).shortestPathFrom(n),s=i.transitionInterpolator,a=s.getDuration?s.getDuration(e,i):i.transitionDuration;if(a===0)return;const o=s.initializeProps(e,r);this.propsInTransition={};const l={duration:a,easing:i.transitionEasing||pht,interpolator:s,interruption:i.transitionInterruption||mht,startProps:o.start,endProps:o.end,onStart:i.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(i.onTransitionInterrupt),onEnd:this._onTransitionEnd(i.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return i=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(i)}}}function on(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class bht{constructor(e){const{compare:i,extract:n,required:r}=e;this._propsToCompare=i,this._propsToExtract=n||i,this._requiredProps=r}arePropsEqual(e,i){for(const n of this._propsToCompare)if(!(n in e)||!(n in i)||!m_(e[n],i[n]))return!1;return!0}initializeProps(e,i){const n={},r={};for(const s of this._propsToExtract)(s in e||s in i)&&(n[s]=e[s],r[s]=i[s]);return this._checkRequiredProps(n),this._checkRequiredProps(r),{start:n,end:r}}getDuration(e,i){return i.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(i=>{const n=e[i];on(Number.isFinite(n)||Array.isArray(n),`${i} is required for transition`)})}}const vht=["longitude","latitude","zoom","bearing","pitch"],Tht=["longitude","latitude","zoom"];class YB extends bht{constructor(e={}){const i=Array.isArray(e)?e:e.transitionProps,n=Array.isArray(e)?{}:e;n.transitionProps=Array.isArray(i)?{compare:i,required:i}:i||{compare:vht,required:Tht},super(n.transitionProps),this.opts=n}initializeProps(e,i){const n=super.initializeProps(e,i),{makeViewport:r,around:s}=this.opts;if(r&&s){const a=r(e),o=r(i),l=a.unproject(s);n.start.around=s,Object.assign(n.end,{around:o.project(l),aroundPosition:l,width:i.width,height:i.height})}return n}interpolateProps(e,i,n){const r={};for(const s of this._propsToExtract)r[s]=YA(e[s]||0,i[s]||0,n);if(i.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...i,...r});Object.assign(r,s.panByPosition(i.aroundPosition,YA(e.around,i.around,n)))}return r}}const gu={transitionDuration:0},Sht=300,Gb=t=>1-(1-t)*(1-t),qd={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],MULTI_PAN:["multipanstart","multipanmove","multipanend"],DOUBLE_CLICK:["dblclick"],KEYBOARD:["keydown"]},Qh={};class FV{constructor(e){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new _ht({...e,getControllerState:i=>new this.ControllerState(i),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){var e;for(const i in this._events)this._events[i]&&((e=this.eventManager)==null||e.off(i,this.handleEvent));this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const i=this._eventStartBlocked;switch(e.type){case"panstart":return i?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return i?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"multipanstart":return i?!1:this._onMultiPanStart(e);case"multipanmove":return this._onMultiPan(e);case"multipanend":return this._onMultiPanEnd(e);case"dblclick":return this._onDoubleClick(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:i,y:n}=this.props,{offsetCenter:r}=e;return[r.x-i,r.y-n]}isPointInBounds(e,i){const{width:n,height:r}=this.props;if(i&&i.handled)return!1;const s=e[0]>=0&&e[0]<=n&&e[1]>=0&&e[1]<=r;return s&&i&&i.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:i}=e;return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const i=setTimeout(()=>{this._eventStartBlocked===i&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=i}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:i}=e;this.inertia=Number.isFinite(i)?i:i===!0?Sht:0;const{scrollZoom:n=!0,dragPan:r=!0,dragRotate:s=!0,doubleClickZoom:a=!0,touchZoom:o=!0,touchRotate:l=!1,keyboard:c=!0}=e,h=!!this.onViewStateChange;this.toggleEvents(qd.WHEEL,h&&n),this.toggleEvents(qd.PAN,h),this.toggleEvents(qd.PINCH,h&&(o||l)),this.toggleEvents(qd.MULTI_PAN,h&&l),this.toggleEvents(qd.DOUBLE_CLICK,h&&a),this.toggleEvents(qd.KEYBOARD,h&&c),this.scrollZoom=n,this.dragPan=r,this.dragRotate=s,this.doubleClickZoom=a,this.touchZoom=o,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,i){this.eventManager&&e.forEach(n=>{this._events[n]!==i&&(this._events[n]=i,i?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(e,i=null,n={}){const r={...e.getViewportProps(),...i},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(n),s){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:a,viewId:this.props.id})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;let n=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const r=this.controllerState[n?"panStart":"rotateStart"]({pos:i});return this._panMove=n,this.updateViewport(r,gu,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const i=this.getCenter(e),n=this.controllerState.pan({pos:i});return this.updateViewport(n,gu,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:i}=this;if(this.dragPan&&i&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*i/2,n[1]+e.velocityY*i/2],s=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:i,transitionEasing:Gb},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const i=this.getCenter(e),n=this.controllerState.rotate({pos:i});return this.updateViewport(n,gu,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:i}=this;if(this.dragRotate&&i&&e.velocity){const n=this.getCenter(e),r=[n[0]+e.velocityX*i/2,n[1]+e.velocityY*i/2],s=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:i,transitionEasing:Gb},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;e.srcEvent.preventDefault();const{speed:n=.01,smooth:r=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let a=2/(1+Math.exp(-Math.abs(s*n)));s<0&&a!==0&&(a=1/a);const o=this.controllerState.zoom({pos:i,scale:a});return this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(e){const i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;const n=this.controllerState.rotateStart({pos:i});return this.updateViewport(n,gu,{isDragging:!0}),!0}_onMultiPan(e){if(!this.touchRotate||!this.isDragging())return!1;const i=this.getCenter(e);i[0]-=e.deltaX;const n=this.controllerState.rotate({pos:i});return this.updateViewport(n,gu,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(e){if(!this.isDragging())return!1;const{inertia:i}=this;if(this.touchRotate&&i&&e.velocityY){const n=this.getCenter(e),r=[n[0],n[1]+=e.velocityY*i/2],s=this.controllerState.rotate({pos:r});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:i,transitionEasing:Gb},{isDragging:!1,isRotating:!0}),this.blockEvents(i)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;const n=this.controllerState.zoomStart({pos:i}).rotateStart({pos:i});return Qh._startPinchRotation=e.rotation,Qh._lastPinchEvent=e,this.updateViewport(n,gu,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let i=this.controllerState;if(this.touchZoom){const{scale:n}=e,r=this.getCenter(e);i=i.zoom({pos:r,scale:n})}if(this.touchRotate){const{rotation:n}=e;i=i.rotate({deltaAngleX:Qh._startPinchRotation-n})}return this.updateViewport(i,gu,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Qh._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:i}=this,{_lastPinchEvent:n}=Qh;if(this.touchZoom&&i&&n&&e.scale!==n.scale){const r=this.getCenter(e);let s=this.controllerState.rotateEnd();const a=Math.log2(e.scale),o=(a-Math.log2(n.scale))/(e.deltaTime-n.deltaTime),l=Math.pow(2,a+o*i/2);s=s.zoom({pos:r,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i,transitionEasing:Gb},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(i)}else{const r=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Qh._startPinchRotation=null,Qh._lastPinchEvent=null,!0}_onDoubleClick(e){if(!this.doubleClickZoom)return!1;const i=this.getCenter(e);if(!this.isPointInBounds(i,e))return!1;const n=this.isFunctionKeyPressed(e),r=this.controllerState.zoom({pos:i,scale:n?.5:2});return this.updateViewport(r,this._getTransitionProps({around:i}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const i=this.isFunctionKeyPressed(e),{zoomSpeed:n,moveSpeed:r,rotateSpeedX:s,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:o}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=i?o.zoomOut(n).zoomOut(n):o.zoomOut(n),c.isZooming=!0;break;case"Equal":l=i?o.zoomIn(n).zoomIn(n):o.zoomIn(n),c.isZooming=!0;break;case"ArrowLeft":i?(l=o.rotateLeft(s),c.isRotating=!0):(l=o.moveLeft(r),c.isPanning=!0);break;case"ArrowRight":i?(l=o.rotateRight(s),c.isRotating=!0):(l=o.moveRight(r),c.isPanning=!0);break;case"ArrowUp":i?(l=o.rotateUp(a),c.isRotating=!0):(l=o.moveUp(r),c.isPanning=!0);break;case"ArrowDown":i?(l=o.rotateDown(a),c.isRotating=!0):(l=o.moveDown(r),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:i}=this;return!i||!i.transitionInterpolator?gu:e?{...i,transitionInterpolator:new YB({...e,...i.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:i}}class wht{constructor(e,i){this._viewportProps=this.applyConstraints(e),this._state=i}getViewportProps(){return this._viewportProps}getState(){return this._state}}const zF=5,Mht=1.2;class LV extends wht{constructor(e){const{width:i,height:n,latitude:r,longitude:s,zoom:a,bearing:o=0,pitch:l=0,altitude:c=1.5,position:h=[0,0,0],maxZoom:A=20,minZoom:m=0,maxPitch:b=60,minPitch:S=0,startPanLngLat:M,startZoomLngLat:I,startRotatePos:O,startBearing:D,startPitch:B,startZoom:P,normalize:j=!0}=e;on(Number.isFinite(s)),on(Number.isFinite(r)),on(Number.isFinite(a)),super({width:i,height:n,latitude:r,longitude:s,zoom:a,bearing:o,pitch:l,altitude:c,maxZoom:A,minZoom:m,maxPitch:b,minPitch:S,normalize:j,position:h},{startPanLngLat:M,startZoomLngLat:I,startRotatePos:O,startBearing:D,startPitch:B,startZoom:P}),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:i}){const n=this.getState().startPanLngLat||this._unproject(i);if(!n)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(n,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:i=0,deltaAngleY:n=0}){const{startRotatePos:r,startBearing:s,startPitch:a}=this.getState();if(!r||s===void 0||a===void 0)return this;let o;return e?o=this._getNewRotation(e,r,a,s):o={bearing:s+i,pitch:a+n},this._getUpdatedState(o)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:i,scale:n}){let{startZoom:r,startZoomLngLat:s}=this.getState();if(s||(r=this.getViewportProps().zoom,s=this._unproject(i)||this._unproject(e)),!s)return this;const{maxZoom:a,minZoom:o}=this.getViewportProps();let l=r+Math.log2(n);l=al(l,o,a);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const i=e.getViewportProps(),n={...this.getViewportProps()},{bearing:r,longitude:s}=n;return Math.abs(r-i.bearing)>180&&(n.bearing=r<0?r+360:r-360),Math.abs(s-i.longitude)>180&&(n.longitude=s<0?s+360:s-360),n}applyConstraints(e){const{maxZoom:i,minZoom:n,zoom:r}=e;e.zoom=al(r,n,i);const{maxPitch:s,minPitch:a,pitch:o}=e;e.pitch=al(o,a,s);const{normalize:l=!0}=e;return l&&Object.assign(e,Qct(e)),e}_zoomFromCenter(e){const{width:i,height:n}=this.getViewportProps();return this.zoom({pos:[i/2,n/2],scale:e})}_panFromCenter(e){const{width:i,height:n}=this.getViewportProps();return this.pan({startPos:[i/2,n/2],pos:[i/2+e[0],n/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const i=this.makeViewport(this.getViewportProps());return e&&i.unproject(e)}_getNewRotation(e,i,n,r){const s=e[0]-i[0],a=e[1]-i[1],o=e[1],l=i[1],{width:c,height:h}=this.getViewportProps(),A=s/c;let m=0;a>0?Math.abs(h-l)>zF&&(m=a/(l-h)*Mht):a<0&&l>zF&&(m=1-o/l),m=al(m,-1,1);const{minPitch:b,maxPitch:S}=this.getViewportProps(),M=r+180*A;let I=n;return m>0?I=n+m*(S-n):m<0&&(I=n-m*(b-n)),{pitch:I,bearing:M}}}class Iht extends FV{constructor(){super(...arguments),this.ControllerState=LV,this.transition={transitionDuration:300,transitionInterpolator:new YB({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(e){e.position=e.position||[0,0,0];const i=this.props;super.setProps(e),(!i||i.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class GB extends NV{constructor(e={}){super(e)}getViewportType(){return _f}get ControllerType(){return Iht}}GB.displayName="MapView";const Eht=new EV;function Bht(t,e){const i=t.order??1/0,n=e.order??1/0;return i-n}class Oht{constructor(e){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=e,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const i=this._defaultEffects;if(!i.find(n=>n.id===e.id)){const n=i.findIndex(r=>Bht(r,e)>0);n<0?i.push(e):i.splice(n,0,e),e.setup(this._context),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(Oo(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const i=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),i}getEffects(){return this._resolvedEffects}_setEffects(e){const i={};for(const r of this.effects)i[r.id]=r;const n=[];for(const r of e){const s=i[r.id];let a=r;s&&s!==r?s.setProps?(s.setProps(r.props),a=s):s.cleanup(this._context):s||r.setup(this._context),n.push(a),delete i[r.id]}for(const r in i)i[r].cleanup(this._context);this.effects=n,this._resolvedEffects=n.concat(this._defaultEffects),e.some(r=>r instanceof EV)||this._resolvedEffects.push(Eht),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class Rht extends qB{shouldDrawLayer(e){const{operation:i}=e.props;return i.includes("draw")||i.includes("terrain")}}const Dht="deckRenderer.renderLayers";class Cht{constructor(e){this.device=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new Rht(e),this.pickLayersPass=new PV(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const i=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,n={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e};n.effects&&this._preRender(n.effects,n);const r=this.lastPostProcessEffect?this.renderBuffers[0]:n.target;this.lastPostProcessEffect&&(n.clearColor=[0,0,0,0],n.clearCanvas=!0);const s=i.render({...n,target:r});n.effects&&this._postRender(n.effects,n),this.renderCount++,as(Dht,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const i=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),i}finalize(){const{renderBuffers:e}=this;for(const i of e)i.delete();e.length=0}_preRender(e,i){this.lastPostProcessEffect=null,i.preRenderStats=i.preRenderStats||{};for(const n of e)i.preRenderStats[n.id]=n.preRender(i),n.postRender&&(this.lastPostProcessEffect=n.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this,i=this.device.canvasContext.getDrawingBufferSize();e.length===0&&[0,1].map(n=>{const r=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});e.push(this.device.createFramebuffer({id:`deck-renderbuffer-${n}`,colorAttachments:[r]}))});for(const n of e)n.resize(i)}_postRender(e,i){const{renderBuffers:n}=this,r={...i,inputBuffer:n[0],swapBuffer:n[1]};for(const s of e)if(s.postRender){r.target=s.id===this.lastPostProcessEffect?i.target:void 0;const a=s.postRender(r);r.inputBuffer=a,r.swapBuffer=a===n[0]?n[1]:n[0]}}}const Pht={pickedColor:null,pickedObjectIndex:-1};function xht({pickedColors:t,decodePickingColor:e,deviceX:i,deviceY:n,deviceRadius:r,deviceRect:s}){const{x:a,y:o,width:l,height:c}=s;let h=r*r,A=-1,m=0;for(let b=0;b<c;b++){const S=b+o-n,M=S*S;if(M>h)m+=4*l;else for(let I=0;I<l;I++){if(t[m+3]-1>=0){const D=I+a-i,B=D*D+M;B<=h&&(h=B,A=m)}m+=4}}if(A>=0){const b=t.slice(A,A+4),S=e(b);if(S){const M=Math.floor(A/4/l),I=A/4-M*l;return{...S,pickedColor:b,pickedX:a+I,pickedY:o+M}}Ji.error("Picked non-existent layer. Is picking buffer corrupt?")()}return Pht}function Nht({pickedColors:t,decodePickingColor:e}){const i=new Map;if(t){for(let n=0;n<t.length;n+=4)if(t[n+3]-1>=0){const s=t.slice(n,n+4),a=s.join(",");if(!i.has(a)){const o=e(s);o?i.set(a,{...o,color:s}):Ji.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(i.values())}function UV({pickInfo:t,viewports:e,pixelRatio:i,x:n,y:r,z:s}){let a=e[0];e.length>1&&(a=Lht((t==null?void 0:t.pickedViewports)||e,{x:n,y:r}));let o;if(a){const l=[n-a.x,r-a.y];s!==void 0&&(l[2]=s),o=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:r,pixel:[n,r],coordinate:o,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:i}}function Fht(t){const{pickInfo:e,lastPickedInfo:i,mode:n,layers:r}=t,{pickedColor:s,pickedLayer:a,pickedObjectIndex:o}=e,l=a?[a]:[];if(n==="hover"){const A=i.index,m=i.layerId,b=a?a.props.id:null;if(b!==m||o!==A){if(b!==m){const S=r.find(M=>M.props.id===m);S&&l.unshift(S)}i.layerId=b,i.index=o,i.info=null}}const c=UV(t),h=new Map;return h.set(null,c),l.forEach(A=>{let m={...c};A===a&&(m.color=s,m.index=o,m.picked=!0),m=kV({layer:A,info:m,mode:n});const b=m.layer;A===a&&n==="hover"&&(i.info=m),h.set(b.id,m),n==="hover"&&b.updateAutoHighlight(m)}),h}function kV({layer:t,info:e,mode:i}){for(;t&&e;){const n=e.layer||null;e.sourceLayer=n,e.layer=t,e=t.getPickingInfo({info:e,mode:i,sourceLayer:n}),t=t.parent}return e}function Lht(t,e){for(let i=t.length-1;i>=0;i--){const n=t[i];if(n.containsPixel(e))return n}return t[0]}class Uht{constructor(e){this._pickable=!0,this.device=e,this.pickLayersPass=new PV(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:i,layers:n,viewports:r},s=this.lastPickedInfo.info){const a=s&&s.layer&&s.layer.id,o=s&&s.viewport&&s.viewport.id,l=a?n.find(m=>m.id===a):null,c=o&&r.find(m=>m.id===o)||r[0],h=c&&c.unproject([e-c.x,i-c.y]);return{...s,...{x:e,y:i,viewport:c,coordinate:h,layer:l}}}_resizeBuffer(){var i,n;if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){const r=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=r}const{canvas:e}=this.device.getDefaultCanvasContext();(i=this.pickingFBO)==null||i.resize({width:e.width,height:e.height}),(n=this.depthFBO)==null||n.resize({width:e.width,height:e.height})}_getPickable(e){if(this._pickable===!1)return null;const i=e.filter(n=>this.pickLayersPass.shouldDrawLayer(n)&&!n.isComposite);return i.length?i:null}_pickClosestObject({layers:e,views:i,viewports:n,x:r,y:s,radius:a=0,depth:o=1,mode:l="query",unproject3D:c,onViewportActive:h,effects:A}){const m=this.device.canvasContext.cssToDeviceRatio(),b=this._getPickable(e);if(!b||n.length===0)return{result:[],emptyInfo:UV({viewports:n,x:r,y:s,pixelRatio:m})};this._resizeBuffer();const S=this.device.canvasContext.cssToDevicePixels([r,s],!0),M=[S.x+Math.floor(S.width/2),S.y+Math.floor(S.height/2)],I=Math.round(a*m),{width:O,height:D}=this.pickingFBO,B=this._getPickingRect({deviceX:M[0],deviceY:M[1],deviceRadius:I,deviceWidth:O,deviceHeight:D}),P={x:r-a,y:s-a,width:a*2+1,height:a*2+1};let j;const N=[],F=new Set;for(let $=0;$<o;$++){let V;if(B){const nt=this._drawAndSample({layers:b,views:i,viewports:n,onViewportActive:h,deviceRect:B,cullRect:P,effects:A,pass:`picking:${l}`});V=xht({...nt,deviceX:M[0],deviceY:M[1],deviceRadius:I,deviceRect:B})}else V={pickedColor:null,pickedObjectIndex:-1};let Z;if(V.pickedLayer&&c&&this.depthFBO){const{pickedColors:nt}=this._drawAndSample({layers:[V.pickedLayer],views:i,viewports:n,onViewportActive:h,deviceRect:{x:V.pickedX,y:V.pickedY,width:1,height:1},cullRect:P,effects:A,pass:`picking:${l}:z`},!0);nt[3]&&(Z=nt[0])}V.pickedLayer&&$+1<o&&(F.add(V.pickedLayer),V.pickedLayer.disablePickingIndex(V.pickedObjectIndex)),j=Fht({pickInfo:V,lastPickedInfo:this.lastPickedInfo,mode:l,layers:b,viewports:n,x:r,y:s,z:Z,pixelRatio:m});for(const nt of j.values())nt.layer&&N.push(nt);if(!V.pickedColor)break}for(const $ of F)$.restorePickingColors();return{result:N,emptyInfo:j.get(null)}}_pickVisibleObjects({layers:e,views:i,viewports:n,x:r,y:s,width:a=1,height:o=1,mode:l="query",maxObjects:c=null,onViewportActive:h,effects:A}){const m=this._getPickable(e);if(!m||n.length===0)return[];this._resizeBuffer();const b=this.device.canvasContext.cssToDeviceRatio(),S=this.device.canvasContext.cssToDevicePixels([r,s],!0),M=S.x,I=S.y+S.height,O=this.device.canvasContext.cssToDevicePixels([r+a,s+o],!0),D=O.x+O.width,B=O.y,P={x:M,y:B,width:D-M,height:I-B},j=this._drawAndSample({layers:m,views:i,viewports:n,onViewportActive:h,deviceRect:P,cullRect:{x:r,y:s,width:a,height:o},effects:A,pass:`picking:${l}`}),N=Nht(j),F=new Map,$=[],V=Number.isFinite(c);for(let Z=0;Z<N.length&&!(V&&$.length>=c);Z++){const nt=N[Z];let X={color:nt.pickedColor,layer:null,index:nt.pickedObjectIndex,picked:!0,x:r,y:s,pixelRatio:b};X=kV({layer:nt.pickedLayer,info:X,mode:l});const bt=X.layer.id;F.has(bt)||F.set(bt,new Set);const Tt=F.get(bt),Ot=X.object??X.index;Tt.has(Ot)||(Tt.add(Ot),$.push(X))}return $}_drawAndSample({layers:e,views:i,viewports:n,onViewportActive:r,deviceRect:s,cullRect:a,effects:o,pass:l},c=!1){const h=c?this.depthFBO:this.pickingFBO,A={layers:e,layerFilter:this.layerFilter,views:i,viewports:n,onViewportActive:r,pickingFBO:h,deviceRect:s,cullRect:a,effects:o,pass:l,pickZ:c,preRenderStats:{},isPicking:!0};for(const D of o)D.useInPicking&&(A.preRenderStats[D.id]=D.preRender(A));const{decodePickingColor:m}=this.pickLayersPass.render(A),{x:b,y:S,width:M,height:I}=s,O=new(c?Float32Array:Uint8Array)(M*I*4);return this.device.readPixelsToArrayWebGL(h,{sourceX:b,sourceY:S,sourceWidth:M,sourceHeight:I,target:O}),{pickedColors:O,decodePickingColor:m}}_getPickingRect({deviceX:e,deviceY:i,deviceRadius:n,deviceWidth:r,deviceHeight:s}){const a=Math.max(0,e-n),o=Math.max(0,i-n),l=Math.min(r,e+n+1)-a,c=Math.min(s,i+n+1)-o;return l<=0||c<=0?null:{x:a,y:o,width:l,height:c}}}const kht={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},jht="top-left",VF="__root";class zht{constructor({deck:e,parentElement:i}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=e,this.parentElement=i}getWidgets(){return this.resolvedWidgets}setProps(e){e.widgets&&!Oo(e.widgets,this.widgets,1)&&this._setWidgets(e.widgets)}finalize(){for(const e of this.getWidgets())this._remove(e);this.defaultWidgets.length=0,this.resolvedWidgets.length=0;for(const e in this.containers)this.containers[e].remove()}addDefault(e){this.defaultWidgets.find(i=>i.id===e.id)||(this._add(e),this.defaultWidgets.push(e),this._setWidgets(this.widgets))}_setWidgets(e){const i={};for(const n of this.resolvedWidgets)i[n.id]=n;this.resolvedWidgets.length=0;for(const n of this.defaultWidgets)i[n.id]=null,this.resolvedWidgets.push(n);for(let n of e){const r=i[n.id];r?r.viewId!==n.viewId||r.placement!==n.placement?(this._remove(r),this._add(n)):n!==r&&(r.setProps(n.props),n=r):this._add(n),i[n.id]=null,this.resolvedWidgets.push(n)}for(const n in i){const r=i[n];r&&this._remove(r)}this.widgets=e}_add(e){const{viewId:i=null,placement:n=jht}=e,r=e.onAdd({deck:this.deck,viewId:i});r&&this._getContainer(i,n).append(r),e._element=r}_remove(e){var i;(i=e.onRemove)==null||i.call(e),e._element&&e._element.remove(),e._element=void 0}_getContainer(e,i){var a;const n=e||VF;let r=this.containers[n];r||(r=document.createElement("div"),r.style.pointerEvents="none",r.style.position="absolute",r.style.overflow="hidden",(a=this.parentElement)==null||a.append(r),this.containers[n]=r);let s=r.querySelector(`.${i}`);return s||(s=document.createElement("div"),s.className=i,s.style.position="absolute",s.style.zIndex="2",Object.assign(s.style,kht[i]),r.append(s)),s}_updateContainers(){const e=this.deck.width,i=this.deck.height;for(const n in this.containers){const r=this.lastViewports[n]||null,s=n===VF||r,a=this.containers[n];s?(a.style.display="block",a.style.left=`${r?r.x:0}px`,a.style.top=`${r?r.y:0}px`,a.style.width=`${r?r.width:e}px`,a.style.height=`${r?r.height:i}px`):a.style.display="none"}}onRedraw({viewports:e,layers:i}){var r,s;const n=e.reduce((a,o)=>(a[o.id]=o,a),{});for(const a of this.getWidgets()){const{viewId:o}=a;if(o){const l=n[o];l&&(a.onViewportChange&&a.onViewportChange(l),(r=a.onRedraw)==null||r.call(a,{viewports:[l],layers:i}))}else{if(a.onViewportChange)for(const l of e)a.onViewportChange(l);(s=a.onRedraw)==null||s.call(a,{viewports:e,layers:i})}}this.lastViewports=n,this._updateContainers()}onHover(e,i){var n,r;for(const s of this.getWidgets()){const{viewId:a}=s;(!a||a===((n=e.viewport)==null?void 0:n.id))&&((r=s.onHover)==null||r.call(s,e,i))}}onEvent(e,i){var r,s;const n=nI[i.type];if(n)for(const a of this.getWidgets()){const{viewId:o}=a;(!o||o===((r=e.viewport)==null?void 0:r.id))&&((s=a[n])==null||s.call(a,e,i))}}}const Vht={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class $ht{constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:e}){const i=document.createElement("div");return i.className="deck-tooltip",Object.assign(i.style,Vht),this.deck=e,this.element=i,i}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(e){var i;this.isVisible&&e.id===((i=this.lastViewport)==null?void 0:i.id)&&e!==this.lastViewport&&this.setTooltip(null)}onHover(e){const{deck:i}=this,n=i&&i.props.getTooltip;if(!n)return;const r=n(e);this.lastViewport=e.viewport,this.setTooltip(r,e.x,e.y)}setTooltip(e,i,n){const r=this.element;if(r){if(typeof e=="string")r.innerText=e;else if(e)e.text&&(r.innerText=e.text),e.html&&(r.innerHTML=e.html),e.className&&(r.className=e.className);else{this.isVisible=!1,r.style.display="none";return}this.isVisible=!0,r.style.display="block",r.style.transform=`translate(${i}px, ${n}px)`,e&&typeof e=="object"&&"style"in e&&Object.assign(r.style,e.style)}}}var oA;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.R16_EXT=33322]="R16_EXT",t[t.RG16_EXT=33324]="RG16_EXT",t[t.RGB16_EXT=32852]="RGB16_EXT",t[t.RGBA16_EXT=32859]="RGBA16_EXT",t[t.R16_SNORM_EXT=36760]="R16_SNORM_EXT",t[t.RG16_SNORM_EXT=36761]="RG16_SNORM_EXT",t[t.RGB16_SNORM_EXT=36762]="RGB16_SNORM_EXT",t[t.RGBA16_SNORM_EXT=36763]="RGBA16_SNORM_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_RED_RGTC1_EXT=36283]="COMPRESSED_RED_RGTC1_EXT",t[t.COMPRESSED_SIGNED_RED_RGTC1_EXT=36284]="COMPRESSED_SIGNED_RED_RGTC1_EXT",t[t.COMPRESSED_RED_GREEN_RGTC2_EXT=36285]="COMPRESSED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT=36286]="COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x4_KHR=37809]="COMPRESSED_RGBA_ASTC_5x4_KHR",t[t.COMPRESSED_RGBA_ASTC_5x5_KHR=37810]="COMPRESSED_RGBA_ASTC_5x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x5_KHR=37811]="COMPRESSED_RGBA_ASTC_6x5_KHR",t[t.COMPRESSED_RGBA_ASTC_6x6_KHR=37812]="COMPRESSED_RGBA_ASTC_6x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x5_KHR=37813]="COMPRESSED_RGBA_ASTC_8x5_KHR",t[t.COMPRESSED_RGBA_ASTC_8x6_KHR=37814]="COMPRESSED_RGBA_ASTC_8x6_KHR",t[t.COMPRESSED_RGBA_ASTC_8x8_KHR=37815]="COMPRESSED_RGBA_ASTC_8x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x5_KHR=37816]="COMPRESSED_RGBA_ASTC_10x5_KHR",t[t.COMPRESSED_RGBA_ASTC_10x6_KHR=37817]="COMPRESSED_RGBA_ASTC_10x6_KHR",t[t.COMPRESSED_RGBA_ASTC_10x8_KHR=37818]="COMPRESSED_RGBA_ASTC_10x8_KHR",t[t.COMPRESSED_RGBA_ASTC_10x10_KHR=37819]="COMPRESSED_RGBA_ASTC_10x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x10_KHR=37820]="COMPRESSED_RGBA_ASTC_12x10_KHR",t[t.COMPRESSED_RGBA_ASTC_12x12_KHR=37821]="COMPRESSED_RGBA_ASTC_12x12_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR=37840]="COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR=37841]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR=37842]="COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR=37843]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR=37844]="COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR=37845]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR=37846]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR=37847]="COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR=37848]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR=37849]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR=37850]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR=37851]="COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR=37852]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR",t[t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR=37853]="COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT",t[t.COMPLETION_STATUS_KHR=37297]="COMPLETION_STATUS_KHR",t[t.DEPTH_CLAMP_EXT=34383]="DEPTH_CLAMP_EXT",t[t.FIRST_VERTEX_CONVENTION_WEBGL=36429]="FIRST_VERTEX_CONVENTION_WEBGL",t[t.LAST_VERTEX_CONVENTION_WEBGL=36430]="LAST_VERTEX_CONVENTION_WEBGL",t[t.PROVOKING_VERTEX_WEBL=36431]="PROVOKING_VERTEX_WEBL",t[t.POLYGON_MODE_WEBGL=2880]="POLYGON_MODE_WEBGL",t[t.POLYGON_OFFSET_LINE_WEBGL=10754]="POLYGON_OFFSET_LINE_WEBGL",t[t.LINE_WEBGL=6913]="LINE_WEBGL",t[t.FILL_WEBGL=6914]="FILL_WEBGL",t[t.MAX_CLIP_DISTANCES_WEBGL=3378]="MAX_CLIP_DISTANCES_WEBGL",t[t.MAX_CULL_DISTANCES_WEBGL=33529]="MAX_CULL_DISTANCES_WEBGL",t[t.MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL=33530]="MAX_COMBINED_CLIP_AND_CULL_DISTANCES_WEBGL",t[t.CLIP_DISTANCE0_WEBGL=12288]="CLIP_DISTANCE0_WEBGL",t[t.CLIP_DISTANCE1_WEBGL=12289]="CLIP_DISTANCE1_WEBGL",t[t.CLIP_DISTANCE2_WEBGL=12290]="CLIP_DISTANCE2_WEBGL",t[t.CLIP_DISTANCE3_WEBGL=12291]="CLIP_DISTANCE3_WEBGL",t[t.CLIP_DISTANCE4_WEBGL=12292]="CLIP_DISTANCE4_WEBGL",t[t.CLIP_DISTANCE5_WEBGL=12293]="CLIP_DISTANCE5_WEBGL",t[t.CLIP_DISTANCE6_WEBGL=12294]="CLIP_DISTANCE6_WEBGL",t[t.CLIP_DISTANCE7_WEBGL=12295]="CLIP_DISTANCE7_WEBGL",t[t.POLYGON_OFFSET_CLAMP_EXT=36379]="POLYGON_OFFSET_CLAMP_EXT",t[t.LOWER_LEFT_EXT=36001]="LOWER_LEFT_EXT",t[t.UPPER_LEFT_EXT=36002]="UPPER_LEFT_EXT",t[t.NEGATIVE_ONE_TO_ONE_EXT=37726]="NEGATIVE_ONE_TO_ONE_EXT",t[t.ZERO_TO_ONE_EXT=37727]="ZERO_TO_ONE_EXT",t[t.CLIP_ORIGIN_EXT=37724]="CLIP_ORIGIN_EXT",t[t.CLIP_DEPTH_MODE_EXT=37725]="CLIP_DEPTH_MODE_EXT",t[t.SRC1_COLOR_WEBGL=35065]="SRC1_COLOR_WEBGL",t[t.SRC1_ALPHA_WEBGL=34185]="SRC1_ALPHA_WEBGL",t[t.ONE_MINUS_SRC1_COLOR_WEBGL=35066]="ONE_MINUS_SRC1_COLOR_WEBGL",t[t.ONE_MINUS_SRC1_ALPHA_WEBGL=35067]="ONE_MINUS_SRC1_ALPHA_WEBGL",t[t.MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL=35068]="MAX_DUAL_SOURCE_DRAW_BUFFERS_WEBGL",t[t.MIRROR_CLAMP_TO_EDGE_EXT=34627]="MIRROR_CLAMP_TO_EDGE_EXT"})(oA||(oA={}));const XB={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,35725:null,36006:null,36007:null,34229:null,34964:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32926:!1,32928:!1,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],36389:null,36662:null,36663:null,35053:null,35055:null,35723:4352,36010:null,35977:!1,3333:4,3317:4,37440:!1,37441:!1,37443:37444,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},fr=(t,e,i)=>e?t.enable(i):t.disable(i),$F=(t,e,i)=>t.hint(i,e),Aa=(t,e,i)=>t.pixelStorei(i,e),WF=(t,e,i)=>{const n=i===36006?36009:36008;return t.bindFramebuffer(n,e)},Tm=(t,e,i)=>{const r={34964:34962,36662:36662,36663:36663,35053:35051,35055:35052}[i];t.bindBuffer(r,e)};function j3(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}const Wht={3042:fr,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:fr,2885:(t,e)=>t.cullFace(e),2929:fr,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:fr,35723:$F,35725:(t,e)=>t.useProgram(e),36007:(t,e)=>t.bindRenderbuffer(36161,e),36389:(t,e)=>{var i;return(i=t.bindTransformFeedback)==null?void 0:i.call(t,36386,e)},34229:(t,e)=>t.bindVertexArray(e),36006:WF,36010:WF,34964:Tm,36662:Tm,36663:Tm,35053:Tm,35055:Tm,2886:(t,e)=>t.frontFace(e),33170:$F,2849:(t,e)=>t.lineWidth(e),32823:fr,32824:"polygonOffset",10752:"polygonOffset",35977:fr,32926:fr,32928:fr,32938:"sampleCoverage",32939:"sampleCoverage",3089:fr,3088:(t,e)=>t.scissor(...e),2960:fr,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),34383:fr,10754:fr,12288:fr,12289:fr,12290:fr,12291:fr,12292:fr,12293:fr,12294:fr,12295:fr,3333:Aa,3317:Aa,37440:Aa,37441:Aa,37443:Aa,3330:Aa,3332:Aa,3331:Aa,3314:Aa,32878:Aa,3316:Aa,3315:Aa,32877:Aa,framebuffer:(t,e)=>{const i=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,i)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{const i=typeof e=="number"?[e,e]:e;t.blendEquationSeparate(...i)},blendFunc:(t,e)=>{const i=(e==null?void 0:e.length)===2?[...e,...e]:e;t.blendFuncSeparate(...i)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(e[0],e[1]||!1),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=j3(e)?e:[e,e];const[i,n]=e;t.stencilMaskSeparate(1028,i),t.stencilMaskSeparate(1029,n)},stencilFunc:(t,e)=>{e=j3(e)&&e.length===3?[...e,...e]:e;const[i,n,r,s,a,o]=e;t.stencilFuncSeparate(1028,i,n,r),t.stencilFuncSeparate(1029,s,a,o)},stencilOp:(t,e)=>{e=j3(e)&&e.length===3?[...e,...e]:e;const[i,n,r,s,a,o]=e;t.stencilOpSeparate(1028,i,n,r),t.stencilOpSeparate(1029,s,a,o)},viewport:(t,e)=>t.viewport(...e)};function Kn(t,e,i){return e[t]!==void 0?e[t]:i[t]}const Hht={blendEquation:(t,e,i)=>t.blendEquationSeparate(Kn(32777,e,i),Kn(34877,e,i)),blendFunc:(t,e,i)=>t.blendFuncSeparate(Kn(32969,e,i),Kn(32968,e,i),Kn(32971,e,i),Kn(32970,e,i)),polygonOffset:(t,e,i)=>t.polygonOffset(Kn(32824,e,i),Kn(10752,e,i)),sampleCoverage:(t,e,i)=>t.sampleCoverage(Kn(32938,e,i),Kn(32939,e,i)),stencilFuncFront:(t,e,i)=>t.stencilFuncSeparate(1028,Kn(2962,e,i),Kn(2967,e,i),Kn(2963,e,i)),stencilFuncBack:(t,e,i)=>t.stencilFuncSeparate(1029,Kn(34816,e,i),Kn(36003,e,i),Kn(36004,e,i)),stencilOpFront:(t,e,i)=>t.stencilOpSeparate(1028,Kn(2964,e,i),Kn(2965,e,i),Kn(2966,e,i)),stencilOpBack:(t,e,i)=>t.stencilOpSeparate(1029,Kn(34817,e,i),Kn(34818,e,i),Kn(34819,e,i))},HF={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,i)=>t({[e]:i}),hint:(t,e,i)=>t({[e]:i}),useProgram:(t,e)=>t({35725:e}),bindRenderbuffer:(t,e,i)=>t({36007:i}),bindTransformFeedback:(t,e,i)=>t({36389:i}),bindVertexArray:(t,e)=>t({34229:e}),bindFramebuffer:(t,e,i)=>{switch(e){case 36160:return t({36006:i,36010:i});case 36009:return t({36006:i});case 36008:return t({36010:i});default:return null}},bindBuffer:(t,e,i)=>{const n={34962:[34964],36662:[36662],36663:[36663],35051:[35053],35052:[35055]}[e];return n?t({[n]:i}):{valueChanged:!0}},blendColor:(t,e,i,n,r)=>t({32773:new Float32Array([e,i,n,r])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,i)=>t({32777:e,34877:i}),blendFunc:(t,e,i)=>t({32969:e,32968:i,32971:e,32970:i}),blendFuncSeparate:(t,e,i,n,r)=>t({32969:e,32968:i,32971:n,32970:r}),clearColor:(t,e,i,n,r)=>t({3106:new Float32Array([e,i,n,r])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,i,n,r)=>t({3107:[e,i,n,r]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,i)=>t({2928:new Float32Array([e,i])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,i)=>t({32824:e,10752:i}),sampleCoverage:(t,e,i)=>t({32938:e,32939:i}),scissor:(t,e,i,n,r)=>t({3088:new Int32Array([e,i,n,r])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,i)=>t({[e===1028?2968:36005]:i}),stencilFunc:(t,e,i,n)=>t({2962:e,2967:i,2963:n,34816:e,36003:i,36004:n}),stencilFuncSeparate:(t,e,i,n,r)=>t({[e===1028?2962:34816]:i,[e===1028?2967:36003]:n,[e===1028?2963:36004]:r}),stencilOp:(t,e,i,n)=>t({2964:e,2965:i,2966:n,34817:e,34818:i,34819:n}),stencilOpSeparate:(t,e,i,n,r)=>t({[e===1028?2964:34817]:i,[e===1028?2965:34818]:n,[e===1028?2966:34819]:r}),viewport:(t,e,i,n,r)=>t({2978:[e,i,n,r]})},Xo=(t,e)=>t.isEnabled(e),qF={3042:Xo,2884:Xo,2929:Xo,3024:Xo,32823:Xo,32926:Xo,32928:Xo,3089:Xo,2960:Xo,35977:Xo},qht=new Set([34016,36388,36387,35983,35368,34965,35739,35738,3074,34853,34854,34855,34856,34857,34858,34859,34860,34861,34862,34863,34864,34865,34866,34867,34868,35097,32873,35869,32874,34068]);function y0(t,e){if(Ght(e))return;const i={};for(const r in e){const s=Number(r),a=Wht[r];a&&(typeof a=="string"?i[a]=!0:a(t,e[r],s))}const n=t.state&&t.state.cache;if(n)for(const r in i){const s=Hht[r];s(t,e,n)}}function jV(t,e=XB){if(typeof e=="number"){const r=e,s=qF[r];return s?s(t,r):t.getParameter(r)}const i=Array.isArray(e)?e:Object.keys(e),n={};for(const r of i){const s=qF[r];n[r]=s?s(t,Number(r)):t.getParameter(Number(r))}return n}function Yht(t){y0(t,XB)}function Ght(t){for(const e in t)return!1;return!0}function Xht(t,e){if(t===e)return!0;const i=Array.isArray(t)||ArrayBuffer.isView(t),n=Array.isArray(e)||ArrayBuffer.isView(e);if(i&&n&&t.length===e.length){for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}return!1}class uf{constructor(e,i){rt(this,"gl");rt(this,"program",null);rt(this,"stateStack",[]);rt(this,"enable",!0);rt(this,"cache",null);rt(this,"log");rt(this,"initialized",!1);this.gl=e,this.log=(i==null?void 0:i.log)||(()=>{}),this._updateCache=this._updateCache.bind(this),Object.seal(this)}static get(e){return e.state}push(e={}){this.stateStack.push({})}pop(){const e=this.stateStack[this.stateStack.length-1];y0(this.gl,e),this.stateStack.pop()}trackState(e,i){if(this.cache=i.copyState?jV(e):Object.assign({},XB),this.initialized)throw new Error("WebGLStateTracker");this.initialized=!0,this.gl.state=this,Kht(e);for(const n in HF){const r=HF[n];Qht(e,n,r)}YF(e,"getParameter"),YF(e,"isEnabled")}_updateCache(e){let i=!1,n;const r=this.stateStack.length>0?this.stateStack[this.stateStack.length-1]:null;for(const s in e){const a=e[s],o=this.cache[s];Xht(a,o)||(i=!0,n=o,r&&!(s in r)&&(r[s]=o),this.cache[s]=a)}return{valueChanged:i,oldValue:n}}}function YF(t,e){const i=t[e].bind(t);t[e]=function(r){if(r===void 0||qht.has(r))return i(r);const s=uf.get(t);return r in s.cache||(s.cache[r]=i(r)),s.enable?s.cache[r]:i(r)},Object.defineProperty(t[e],"name",{value:`${e}-from-cache`,configurable:!1})}function Qht(t,e,i){if(!t[e])return;const n=t[e].bind(t);t[e]=function(...s){const a=uf.get(t),{valueChanged:o,oldValue:l}=i(a._updateCache,...s);return o&&n(...s),l},Object.defineProperty(t[e],"name",{value:`${e}-to-cache`,configurable:!1})}function Kht(t){const e=t.useProgram.bind(t);t.useProgram=function(n){const r=uf.get(t);r.program!==n&&(e(n),r.program=n)}}function Zht(t,e,i){let n="";const r={preserveDrawingBuffer:!0,...i};let s=null;if(s||(s=t.getContext("webgl2",r)),r.failIfMajorPerformanceCaveat&&(n||(n="Only software GPU is available. Set `failIfMajorPerformanceCaveat: false` to allow.")),!s&&!i.failIfMajorPerformanceCaveat&&(r.failIfMajorPerformanceCaveat=!1,s=t.getContext("webgl2",r),s.luma||(s.luma={}),s.luma.softwareRenderer=!0),s||(s=t.getContext("webgl",{}),s&&(s=null,n||(n="Your browser only supports WebGL1"))),!s)throw n||(n="Your browser does not support WebGL"),new Error(`Failed to create WebGL context: ${n}`);const{onContextLost:a,onContextRestored:o}=e;return t.addEventListener("webglcontextlost",l=>a(l),!1),t.addEventListener("webglcontextrestored",l=>o(l),!1),s.luma||(s.luma={}),s}function JA(t,e,i){return i[e]===void 0&&(i[e]=t.getExtension(e)||null),i[e]}function Jht(t,e){const i=t.getParameter(7936),n=t.getParameter(7937);JA(t,"WEBGL_debug_renderer_info",e);const r=e.WEBGL_debug_renderer_info,s=t.getParameter(r?r.UNMASKED_VENDOR_WEBGL:7936),a=t.getParameter(r?r.UNMASKED_RENDERER_WEBGL:7937),o=s||i,l=a||n,c=t.getParameter(7938),h=zV(o,l),A=tft(o,l),m=eft(o,l);return{type:"webgl",gpu:h,gpuType:m,gpuBackend:A,vendor:o,renderer:l,version:c,shadingLanguage:"glsl",shadingLanguageVersion:300}}function zV(t,e){return/NVIDIA/i.exec(t)||/NVIDIA/i.exec(e)?"nvidia":/INTEL/i.exec(t)||/INTEL/i.exec(e)?"intel":/Apple/i.exec(t)||/Apple/i.exec(e)?"apple":/AMD/i.exec(t)||/AMD/i.exec(e)||/ATI/i.exec(t)||/ATI/i.exec(e)?"amd":/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e)?"software":"unknown"}function tft(t,e){return/Metal/i.exec(t)||/Metal/i.exec(e)?"metal":/ANGLE/i.exec(t)||/ANGLE/i.exec(e)?"opengl":"unknown"}function eft(t,e){if(/SwiftShader/i.exec(t)||/SwiftShader/i.exec(e))return"cpu";switch(zV(t,e)){case"intel":return"integrated";case"software":return"cpu";case"unknown":return"unknown";default:return"discrete"}}function VV(t){switch(t){case"uint8":return 5121;case"sint8":return 5120;case"unorm8":return 5121;case"snorm8":return 5120;case"uint16":return 5123;case"sint16":return 5122;case"unorm16":return 5123;case"snorm16":return 5122;case"uint32":return 5125;case"sint32":return 5124;case"float16":return 5131;case"float32":return 5126}throw new Error(String(t))}const km="WEBGL_compressed_texture_s3tc",jm="WEBGL_compressed_texture_s3tc_srgb",lA="EXT_texture_compression_rgtc",cA="EXT_texture_compression_bptc",ift="WEBGL_compressed_texture_etc",nft="WEBGL_compressed_texture_astc",rft="WEBGL_compressed_texture_etc1",sft="WEBGL_compressed_texture_pvrtc",aft="WEBGL_compressed_texture_atc",GF="EXT_texture_norm16",XF="EXT_render_snorm",oft="EXT_color_buffer_float",QB={"float32-renderable-webgl":["EXT_color_buffer_float"],"float16-renderable-webgl":["EXT_color_buffer_half_float"],"rgb9e5ufloat-renderable-webgl":["WEBGL_render_shared_exponent"],"snorm8-renderable-webgl":[XF],"norm16-renderable-webgl":[GF],"snorm16-renderable-webgl":[GF,XF],"float32-filterable":["OES_texture_float_linear"],"float16-filterable-webgl":["OES_texture_half_float_linear"],"texture-filterable-anisotropic-webgl":["EXT_texture_filter_anisotropic"],"texture-blend-float-webgl":["EXT_float_blend"],"texture-compression-bc":[km,jm,lA,cA],"texture-compression-bc5-webgl":[lA],"texture-compression-bc7-webgl":[cA],"texture-compression-etc2":[ift],"texture-compression-astc":[nft],"texture-compression-etc1-webgl":[rft],"texture-compression-pvrtc-webgl":[sft],"texture-compression-atc-webgl":[aft]};function lft(t){return t in QB}function cft(t,e,i){return(QB[e]||[]).every(r=>JA(t,r,i))}const KB={r8unorm:{gl:33321,rb:!0},r8snorm:{gl:36756},r8uint:{gl:33330,rb:!0},r8sint:{gl:33329,rb:!0},rg8unorm:{gl:33323,rb:!0},rg8snorm:{gl:36757},rg8uint:{gl:33336,rb:!0},rg8sint:{gl:33335,rb:!0},r16uint:{gl:33332,rb:!0},r16sint:{gl:33331,rb:!0},r16float:{gl:33325,rb:!0},"r16unorm-webgl":{gl:33322,rb:!0},"r16snorm-webgl":{gl:36760},"rgba4unorm-webgl":{gl:32854,rb:!0},"rgb565unorm-webgl":{gl:36194,rb:!0},"rgb5a1unorm-webgl":{gl:32855,rb:!0},"rgb8unorm-webgl":{gl:32849},"rgb8snorm-webgl":{gl:36758},rgba8unorm:{gl:32856},"rgba8unorm-srgb":{gl:35907},rgba8snorm:{gl:36759},rgba8uint:{gl:36220},rgba8sint:{gl:36238},bgra8unorm:{},"bgra8unorm-srgb":{},rg16uint:{gl:33338},rg16sint:{gl:33337},rg16float:{gl:33327,rb:!0},"rg16unorm-webgl":{gl:33324},"rg16snorm-webgl":{gl:36761},r32uint:{gl:33334,rb:!0},r32sint:{gl:33333,rb:!0},r32float:{gl:33326},rgb9e5ufloat:{gl:35901},rg11b10ufloat:{gl:35898,rb:!0},rgb10a2unorm:{gl:32857,rb:!0},"rgb10a2uint-webgl":{gl:36975,rb:!0},"rgb16unorm-webgl":{gl:32852},"rgb16snorm-webgl":{gl:36762},rg32uint:{gl:33340,rb:!0},rg32sint:{gl:33339,rb:!0},rg32float:{gl:33328,rb:!0},rgba16uint:{gl:36214,rb:!0},rgba16sint:{gl:36232,rb:!0},rgba16float:{gl:34842},"rgba16unorm-webgl":{gl:32859,rb:!0},"rgba16snorm-webgl":{gl:36763},"rgb32float-webgl":{gl:34837,x:oft,dataFormat:6407,types:[5126]},rgba32uint:{gl:36208,rb:!0},rgba32sint:{gl:36226,rb:!0},rgba32float:{gl:34836,rb:!0},stencil8:{gl:36168,rb:!0},depth16unorm:{gl:33189,dataFormat:6402,types:[5123],rb:!0},depth24plus:{gl:33190,dataFormat:6402,types:[5125]},depth32float:{gl:36012,dataFormat:6402,types:[5126],rb:!0},"depth24plus-stencil8":{gl:35056,rb:!0,depthTexture:!0,dataFormat:34041,types:[34042]},"depth32float-stencil8":{gl:36013,dataFormat:34041,types:[36269],rb:!0},"bc1-rgb-unorm-webgl":{gl:33776,x:km},"bc1-rgb-unorm-srgb-webgl":{gl:35916,x:jm},"bc1-rgba-unorm":{gl:33777,x:km},"bc1-rgba-unorm-srgb":{gl:35916,x:jm},"bc2-rgba-unorm":{gl:33778,x:km},"bc2-rgba-unorm-srgb":{gl:35918,x:jm},"bc3-rgba-unorm":{gl:33779,x:km},"bc3-rgba-unorm-srgb":{gl:35919,x:jm},"bc4-r-unorm":{gl:36283,x:lA},"bc4-r-snorm":{gl:36284,x:lA},"bc5-rg-unorm":{gl:36285,x:lA},"bc5-rg-snorm":{gl:36286,x:lA},"bc6h-rgb-ufloat":{gl:36495,x:cA},"bc6h-rgb-float":{gl:36494,x:cA},"bc7-rgba-unorm":{gl:36492,x:cA},"bc7-rgba-unorm-srgb":{gl:36493,x:cA},"etc2-rgb8unorm":{gl:37492},"etc2-rgb8unorm-srgb":{gl:37494},"etc2-rgb8a1unorm":{gl:37496},"etc2-rgb8a1unorm-srgb":{gl:37497},"etc2-rgba8unorm":{gl:37493},"etc2-rgba8unorm-srgb":{gl:37495},"eac-r11unorm":{gl:37488},"eac-r11snorm":{gl:37489},"eac-rg11unorm":{gl:37490},"eac-rg11snorm":{gl:37491},"astc-4x4-unorm":{gl:37808},"astc-4x4-unorm-srgb":{gl:37840},"astc-5x4-unorm":{gl:37809},"astc-5x4-unorm-srgb":{gl:37841},"astc-5x5-unorm":{gl:37810},"astc-5x5-unorm-srgb":{gl:37842},"astc-6x5-unorm":{gl:37811},"astc-6x5-unorm-srgb":{gl:37843},"astc-6x6-unorm":{gl:37812},"astc-6x6-unorm-srgb":{gl:37844},"astc-8x5-unorm":{gl:37813},"astc-8x5-unorm-srgb":{gl:37845},"astc-8x6-unorm":{gl:37814},"astc-8x6-unorm-srgb":{gl:37846},"astc-8x8-unorm":{gl:37815},"astc-8x8-unorm-srgb":{gl:37847},"astc-10x5-unorm":{gl:37819},"astc-10x5-unorm-srgb":{gl:37851},"astc-10x6-unorm":{gl:37817},"astc-10x6-unorm-srgb":{gl:37849},"astc-10x8-unorm":{gl:37818},"astc-10x8-unorm-srgb":{gl:37850},"astc-10x10-unorm":{gl:37819},"astc-10x10-unorm-srgb":{gl:37851},"astc-12x10-unorm":{gl:37820},"astc-12x10-unorm-srgb":{gl:37852},"astc-12x12-unorm":{gl:37821},"astc-12x12-unorm-srgb":{gl:37853},"pvrtc-rgb4unorm-webgl":{gl:35840},"pvrtc-rgba4unorm-webgl":{gl:35842},"pvrtc-rbg2unorm-webgl":{gl:35841},"pvrtc-rgba2unorm-webgl":{gl:35843},"etc1-rbg-unorm-webgl":{gl:36196},"atc-rgb-unorm-webgl":{gl:35986},"atc-rgba-unorm-webgl":{gl:35986},"atc-rgbai-unorm-webgl":{gl:34798}};function uft(t,e,i){let n=e.create;const r=KB[e.format];return(r==null?void 0:r.gl)===void 0&&(n=!1),r!=null&&r.x&&(n=n&&!!JA(t,r.x,i)),{format:e.format,create:n&&e.create,render:n&&e.render,filter:n&&e.filter,blend:n&&e.blend,store:n&&e.store}}function $V(t){var r;const e=KB[t],i=dft(t),n=DB(t);return{internalFormat:i,format:(e==null?void 0:e.dataFormat)||fft(n.channels,n.integer,n.normalized,i),type:n.dataType?VV(n.dataType):((r=e==null?void 0:e.types)==null?void 0:r[0])||5121,compressed:n.compressed||!1}}function hft(t){switch(DB(t).attachment){case"depth":return 36096;case"stencil":return 36128;case"depth-stencil":return 33306;default:throw new Error(`Not a depth stencil format: ${t}`)}}function fft(t,e,i,n){if(n===6408||n===6407)return n;switch(t){case"r":return e&&!i?36244:6403;case"rg":return e&&!i?33320:33319;case"rgb":return e&&!i?36248:6407;case"rgba":return e&&!i?36249:6408;case"bgra":throw new Error("bgra pixels not supported by WebGL");default:return 6408}}function dft(t){const e=KB[t],i=e==null?void 0:e.gl;if(i===void 0)throw new Error(`Unsupported texture format ${t}`);return i}const QF={"depth-clip-control":"EXT_depth_clamp","timer-query-webgl":"EXT_disjoint_timer_query_webgl2","compilation-status-async-webgl":"KHR_parallel_shader_compile","polygon-mode-webgl":"WEBGL_polygon_mode","provoking-vertex-webgl":"WEBGL_provoking_vertex","shader-clip-cull-distance-webgl":"WEBGL_clip_cull_distance","shader-noperspective-interpolation-webgl":"NV_shader_noperspective_interpolation","shader-conservative-depth-webgl":"EXT_conservative_depth"};class Aft extends Jst{constructor(i,n,r){super([],r);rt(this,"gl");rt(this,"extensions");rt(this,"testedFeatures",new Set);this.gl=i,this.extensions=n,JA(i,"EXT_color_buffer_float",n)}*[Symbol.iterator](){const i=this.getFeatures();for(const n of i)this.has(n)&&(yield n);return[]}has(i){var n;return(n=this.disabledFeatures)!=null&&n[i]?!1:(this.testedFeatures.has(i)||(this.testedFeatures.add(i),lft(i)&&cft(this.gl,i,this.extensions)&&this.features.add(i),this.getWebGLFeature(i)&&this.features.add(i)),this.features.has(i))}initializeFeatures(){const i=this.getFeatures().filter(n=>n!=="polygon-mode-webgl");for(const n of i)this.has(n)}getFeatures(){return[...Object.keys(QF),...Object.keys(QB)]}getWebGLFeature(i){const n=QF[i];return typeof n=="string"?!!JA(this.gl,n,this.extensions):!!n}}class gft extends Zst{constructor(i){super();rt(this,"gl");rt(this,"limits",{});this.gl=i}get maxTextureDimension1D(){return 0}get maxTextureDimension2D(){return this.getParameter(3379)}get maxTextureDimension3D(){return this.getParameter(32883)}get maxTextureArrayLayers(){return this.getParameter(35071)}get maxBindGroups(){return 0}get maxDynamicUniformBuffersPerPipelineLayout(){return 0}get maxDynamicStorageBuffersPerPipelineLayout(){return 0}get maxSampledTexturesPerShaderStage(){return this.getParameter(35660)}get maxSamplersPerShaderStage(){return this.getParameter(35661)}get maxStorageBuffersPerShaderStage(){return 0}get maxStorageTexturesPerShaderStage(){return 0}get maxUniformBuffersPerShaderStage(){return this.getParameter(35375)}get maxUniformBufferBindingSize(){return this.getParameter(35376)}get maxStorageBufferBindingSize(){return 0}get minUniformBufferOffsetAlignment(){return this.getParameter(35380)}get minStorageBufferOffsetAlignment(){return 0}get maxVertexBuffers(){return 16}get maxVertexAttributes(){return this.getParameter(34921)}get maxVertexBufferArrayStride(){return 2048}get maxInterStageShaderComponents(){return this.getParameter(35659)}get maxComputeWorkgroupStorageSize(){return 0}get maxComputeInvocationsPerWorkgroup(){return 0}get maxComputeWorkgroupSizeX(){return 0}get maxComputeWorkgroupSizeY(){return 0}get maxComputeWorkgroupSizeZ(){return 0}get maxComputeWorkgroupsPerDimension(){return 0}getParameter(i){return this.limits[i]===void 0&&(this.limits[i]=this.gl.getParameter(i)),this.limits[i]||0}}class i_ extends r2{constructor(i,n){super(i,n);rt(this,"device");rt(this,"gl");rt(this,"handle");rt(this,"colorAttachments",[]);rt(this,"depthStencilAttachment",null);const r=n.handle===null;this.device=i,this.gl=i.gl,this.handle=this.props.handle||r?this.props.handle:this.gl.createFramebuffer(),r||(i.setSpectorMetadata(this.handle,{id:this.props.id,props:this.props}),this.autoCreateAttachmentTextures(),this.updateAttachments())}destroy(){super.destroy(),!this.destroyed&&this.handle!==null&&this.gl.deleteFramebuffer(this.handle)}updateAttachments(){const i=this.gl.bindFramebuffer(36160,this.handle);for(let n=0;n<this.colorAttachments.length;++n){const r=this.colorAttachments[n];if(r){const s=36064+n;this._attachTextureView(s,r)}}if(this.depthStencilAttachment){const n=hft(this.depthStencilAttachment.props.format);this._attachTextureView(n,this.depthStencilAttachment)}if(this.device.props.debug){const n=this.gl.checkFramebufferStatus(36160);if(n!==36053)throw new Error(`Framebuffer ${pft(n)}`)}this.gl.bindFramebuffer(36160,i)}_attachTextureView(i,n){const{gl:r}=this.device,{texture:s}=n,a=n.props.baseMipLevel,o=n.props.baseArrayLayer;switch(r.bindTexture(s.glTarget,s.handle),s.glTarget){case 35866:case 32879:r.framebufferTextureLayer(36160,i,s.handle,a,o);break;case 34067:const l=yft(o);r.framebufferTexture2D(36160,i,l,s.handle,a);break;case 3553:r.framebufferTexture2D(36160,i,3553,s.handle,a);break;default:throw new Error("Illegal texture type")}r.bindTexture(s.glTarget,null)}}function yft(t){return t<34069?t+34069:t}function pft(t){switch(t){case 36053:return"success";case 36054:return"Mismatched attachments";case 36055:return"No attachments";case 36057:return"Height/width mismatch";case 36061:return"Unsupported or split attachments";case 36182:return"Samples mismatch";default:return`${t}`}}class mft extends zM{constructor(i,n){super(n);rt(this,"device");rt(this,"format","rgba8unorm");rt(this,"depthStencilFormat","depth24plus");rt(this,"presentationSize");rt(this,"_framebuffer",null);this.device=i,this.presentationSize=[-1,-1],this._setAutoCreatedCanvasId(`${this.device.id}-canvas`),this.update()}get[Symbol.toStringTag](){return"WebGLCanvasContext"}getCurrentFramebuffer(){return this.update(),this._framebuffer=this._framebuffer||new i_(this.device,{handle:null}),this._framebuffer}update(){const i=this.getPixelSize();(i[0]!==this.presentationSize[0]||i[1]!==this.presentationSize[1])&&(this.presentationSize=i,this.resize())}resize(i){if(this.device.gl&&this.canvas){const n=this.getDevicePixelRatio(i==null?void 0:i.useDevicePixels);this.setDevicePixelRatio(n,i);return}}commit(){}}async function WV(t,e){const i=document.getElementsByTagName("head")[0];if(!i)throw new Error("loadScript");const n=document.createElement("script");return n.setAttribute("type","text/javascript"),n.setAttribute("src",t),new Promise((r,s)=>{n.onload=r,n.onerror=a=>s(new Error(`Unable to load script '${t}': ${a}`)),i.appendChild(n)})}const _ft=1;let Mn=null,KF=!1;const ZB={debugSpectorJS:we.get("debug-spectorjs"),debugSpectorJSUrl:"https://cdn.jsdelivr.net/npm/spectorjs@0.9.30/dist/spector.bundle.js",gl:void 0};async function bft(t){if(!globalThis.SPECTOR)try{await WV(t.debugSpectorJSUrl||ZB.debugSpectorJSUrl)}catch(e){we.warn(String(e))}}function vft(t){var e;if(t={...ZB,...t},!t.debugSpectorJS)return null;if(!Mn&&globalThis.SPECTOR&&!((e=globalThis.luma)!=null&&e.spector)){we.probe(_ft,"SPECTOR found and initialized. Start with `luma.spector.displayUI()`")();const{Spector:i}=globalThis.SPECTOR;Mn=new i,globalThis.luma&&(globalThis.luma.spector=Mn)}if(!Mn)return null;if(KF||(KF=!0,Mn.spyCanvases(),Mn==null||Mn.onCaptureStarted.add(i=>we.info("Spector capture started:",i)()),Mn==null||Mn.onCapture.add(i=>{we.info("Spector capture complete:",i)(),Mn==null||Mn.getResultUI(),Mn==null||Mn.resultView.display(),Mn==null||Mn.resultView.addCapture(i)})),t.gl){const i=t.gl,n=i.device;Mn==null||Mn.startCapture(t.gl,500),i.device=n,new Promise(r=>setTimeout(r,2e3)).then(r=>{we.info("Spector capture stopped after 2 seconds")(),Mn==null||Mn.stopCapture()})}return Mn}const Tft="https://unpkg.com/webgl-debug@2.0.1/index.js";function HV(t){return t.luma=t.luma||{},t.luma}async function Sft(){Wf()&&!globalThis.WebGLDebugUtils&&(globalThis.global=globalThis.global||globalThis,globalThis.global.module={},await WV(Tft))}function wft(t,e={}){return e.debugWebGL||e.traceWebGL?Ift(t,e):Mft(t)}function Mft(t){const e=HV(t);return e.realContext?e.realContext:t}function Ift(t,e){if(!globalThis.WebGLDebugUtils)return we.warn("webgl-debug not loaded")(),t;const i=HV(t);if(i.debugContext)return i.debugContext;globalThis.WebGLDebugUtils.init({...oA,...t});const n=globalThis.WebGLDebugUtils.makeDebugContext(t,Eft.bind(null,e),Bft.bind(null,e));for(const a in oA)!(a in n)&&typeof oA[a]=="number"&&(n[a]=oA[a]);class r{}Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.setPrototypeOf(r,n);const s=Object.create(r);return i.realContext=t,i.debugContext=s,s.debug=!0,s}function ZF(t,e){e=Array.from(e).map(n=>n===void 0?"undefined":n);let i=globalThis.WebGLDebugUtils.glFunctionArgsToString(t,e);return i=`${i.slice(0,100)}${i.length>100?"...":""}`,`gl.${t}(${i})`}function Eft(t,e,i,n){n=Array.from(n).map(o=>o===void 0?"undefined":o);const r=globalThis.WebGLDebugUtils.glEnumToString(e),s=globalThis.WebGLDebugUtils.glFunctionArgsToString(i,n),a=`${r} in gl.${i}(${s})`;we.error(a)();debugger}function Bft(t,e,i){let n="";we.level>=1&&(n=ZF(e,i),t.traceWebGL&&we.log(1,n)());for(const r of i)if(r===void 0){n=n||ZF(e,i);debugger}}const z3={};function Oft(t="id"){z3[t]=z3[t]||1;const e=z3[t]++;return`${t}-${e}`}class n_ extends Dn{constructor(i,n={}){super(i,n);rt(this,"device");rt(this,"gl");rt(this,"handle");rt(this,"glTarget");rt(this,"glUsage");rt(this,"glIndexType",5123);rt(this,"byteLength");rt(this,"bytesUsed");this.device=i,this.gl=this.device.gl;const r=typeof n=="object"?n.handle:void 0;this.handle=r||this.gl.createBuffer(),i.setSpectorMetadata(this.handle,{...this.props,data:typeof this.props.data}),this.glTarget=Rft(this.props.usage),this.glUsage=Dft(this.props.usage),this.glIndexType=this.props.indexType==="uint32"?5125:5123,n.data?this._initWithData(n.data,n.byteOffset,n.byteLength):this._initWithByteLength(n.byteLength||0)}_initWithData(i,n=0,r=i.byteLength+n){const s=this.glTarget;this.gl.bindBuffer(s,this.handle),this.gl.bufferData(s,r,this.glUsage),this.gl.bufferSubData(s,n,i),this.gl.bindBuffer(s,null),this.bytesUsed=r,this.byteLength=r,this._setDebugData(i,n,r),this.trackAllocatedMemory(r)}_initWithByteLength(i){let n=i;i===0&&(n=new Float32Array(0));const r=this.glTarget;return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,this.glUsage),this.gl.bindBuffer(r,null),this.bytesUsed=i,this.byteLength=i,this._setDebugData(null,0,i),this.trackAllocatedMemory(i),this}destroy(){!this.destroyed&&this.handle&&(this.removeStats(),this.trackDeallocatedMemory(),this.gl.deleteBuffer(this.handle),this.destroyed=!0,this.handle=null)}write(i,n=0){this.gl.bindBuffer(36663,this.handle),this.gl.bufferSubData(36663,n,i),this.gl.bindBuffer(36663,null),this._setDebugData(i,n,i.byteLength)}async readAsync(i=0,n){return this.readSyncWebGL(i,n)}readSyncWebGL(i=0,n){n=n??this.byteLength-i;const r=new Uint8Array(n),s=0;return this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,i,r,s,n),this.gl.bindBuffer(36662,null),this._setDebugData(r,i,n),r}}function Rft(t){return t&Dn.INDEX?34963:t&Dn.VERTEX?34962:t&Dn.UNIFORM?35345:34962}function Dft(t){return t&Dn.INDEX||t&Dn.VERTEX?35044:t&Dn.UNIFORM?35048:35044}function Cft(t){const e=t.split(/\r?\n/),i=[];for(const n of e){if(n.length<=1)continue;const r=n.split(":");if(r.length===2){const[A,m]=r;i.push({message:m.trim(),type:JF(A),lineNum:0,linePos:0});continue}const[s,a,o,...l]=r;let c=parseInt(o,10);isNaN(c)&&(c=0);let h=parseInt(a,10);isNaN(h)&&(h=0),i.push({message:l.join(":").trim(),type:JF(s),lineNum:c,linePos:h})}return i}function JF(t){const e=["warning","error","info"],i=t.toLowerCase();return e.includes(i)?i:"info"}class Pft extends i2{constructor(i,n){super(i,n);rt(this,"device");rt(this,"handle");switch(this.device=i,this.props.stage){case"vertex":this.handle=this.props.handle||this.device.gl.createShader(35633);break;case"fragment":this.handle=this.props.handle||this.device.gl.createShader(35632);break;default:throw new Error(this.props.stage)}this._compile(this.source)}destroy(){this.handle&&(this.removeStats(),this.device.gl.deleteShader(this.handle),this.destroyed=!0)}get asyncCompilationStatus(){return this._waitForCompilationComplete().then(()=>this.compilationStatus)}async getCompilationInfo(){return await this._waitForCompilationComplete(),this.getCompilationInfoSync()}getCompilationInfoSync(){const i=this.device.gl.getShaderInfoLog(this.handle);return i?Cft(i):[]}getTranslatedSource(){const n=this.device.getExtension("WEBGL_debug_shaders").WEBGL_debug_shaders;return(n==null?void 0:n.getTranslatedShaderSource(this.handle))||null}async _compile(i){i=i.startsWith("#version ")?i:`#version 300 es
${i}`;const{gl:n}=this.device;if(n.shaderSource(this.handle,i),n.compileShader(this.handle),!this.device.props.debug){this.compilationStatus="pending";return}if(!this.device.features.has("compilation-status-async-webgl")){if(this._getCompilationStatus(),this.debugShader(),this.compilationStatus==="error")throw new Error(`GLSL compilation errors in ${this.props.stage} shader ${this.props.id}`);return}we.once(1,"Shader compilation is asynchronous")(),await this._waitForCompilationComplete(),we.info(2,`Shader ${this.id} - async compilation complete: ${this.compilationStatus}`)(),this._getCompilationStatus(),this.debugShader()}async _waitForCompilationComplete(){const i=async s=>await new Promise(a=>setTimeout(a,s));if(!this.device.features.has("compilation-status-async-webgl")){await i(10);return}const{gl:r}=this.device;for(;;){if(r.getShaderParameter(this.handle,37297))return;await i(10)}}_getCompilationStatus(){this.compilationStatus=this.device.gl.getShaderParameter(this.handle,35713)?"success":"error"}}function xft(t,e,i,n){if(Uft(e))return n(t);const r=t;r.pushState();try{return Nft(t,e),y0(r.gl,i),n(t)}finally{r.popState()}}function Nft(t,e){const i=t,{gl:n}=i;if(e.cullMode)switch(e.cullMode){case"none":n.disable(2884);break;case"front":n.enable(2884),n.cullFace(1028);break;case"back":n.enable(2884),n.cullFace(1029);break}if(e.frontFace&&n.frontFace(hf("frontFace",e.frontFace,{ccw:2305,cw:2304})),e.unclippedDepth&&t.features.has("depth-clip-control")&&n.enable(34383),e.depthBias!==void 0&&(n.enable(32823),n.polygonOffset(e.depthBias,e.depthBiasSlopeScale||0)),e.provokingVertex&&t.features.has("provoking-vertex-webgl")){const s=i.getExtension("WEBGL_provoking_vertex").WEBGL_provoking_vertex,a=hf("provokingVertex",e.provokingVertex,{first:36429,last:36430});s==null||s.provokingVertexWEBGL(a)}if((e.polygonMode||e.polygonOffsetLine)&&t.features.has("polygon-mode-webgl")){if(e.polygonMode){const s=i.getExtension("WEBGL_polygon_mode").WEBGL_polygon_mode,a=hf("polygonMode",e.polygonMode,{fill:6914,line:6913});s==null||s.polygonModeWEBGL(1028,a),s==null||s.polygonModeWEBGL(1029,a)}e.polygonOffsetLine&&n.enable(10754)}if(t.features.has("shader-clip-cull-distance-webgl")&&(e.clipDistance0&&n.enable(12288),e.clipDistance1&&n.enable(12289),e.clipDistance2&&n.enable(12290),e.clipDistance3&&n.enable(12291),e.clipDistance4&&n.enable(12292),e.clipDistance5&&n.enable(12293),e.clipDistance6&&n.enable(12294),e.clipDistance7&&n.enable(12295)),e.depthWriteEnabled!==void 0&&n.depthMask(Lft("depthWriteEnabled",e.depthWriteEnabled)),e.depthCompare&&(e.depthCompare!=="always"?n.enable(2929):n.disable(2929),n.depthFunc(fI("depthCompare",e.depthCompare))),e.stencilWriteMask){const r=e.stencilWriteMask;n.stencilMaskSeparate(1028,r),n.stencilMaskSeparate(1029,r)}if(e.stencilReadMask&&we.warn("stencilReadMask not supported under WebGL"),e.stencilCompare){const r=e.stencilReadMask||4294967295,s=fI("depthCompare",e.stencilCompare);e.stencilCompare!=="always"?n.enable(2960):n.disable(2960),n.stencilFuncSeparate(1028,s,0,r),n.stencilFuncSeparate(1029,s,0,r)}if(e.stencilPassOperation&&e.stencilFailOperation&&e.stencilDepthFailOperation){const r=V3("stencilPassOperation",e.stencilPassOperation),s=V3("stencilFailOperation",e.stencilFailOperation),a=V3("stencilDepthFailOperation",e.stencilDepthFailOperation);n.stencilOpSeparate(1028,s,a,r),n.stencilOpSeparate(1029,s,a,r)}switch(e.blend){case!0:n.enable(3042);break;case!1:n.disable(3042);break}if(e.blendColorOperation||e.blendAlphaOperation){const r=tL("blendColorOperation",e.blendColorOperation||"add"),s=tL("blendAlphaOperation",e.blendAlphaOperation||"add");n.blendEquationSeparate(r,s);const a=Xb("blendColorSrcFactor",e.blendColorSrcFactor||"one"),o=Xb("blendColorDstFactor",e.blendColorDstFactor||"zero"),l=Xb("blendAlphaSrcFactor",e.blendAlphaSrcFactor||"one"),c=Xb("blendAlphaDstFactor",e.blendAlphaDstFactor||"zero");n.blendFuncSeparate(a,o,l,c)}}function fI(t,e){return hf(t,e,{never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519})}function V3(t,e){return hf(t,e,{keep:7680,zero:0,replace:7681,invert:5386,"increment-clamp":7682,"decrement-clamp":7683,"increment-wrap":34055,"decrement-wrap":34056})}function tL(t,e){return hf(t,e,{add:32774,subtract:32778,"reverse-subtract":32779,min:32775,max:32776})}function Xb(t,e){return hf(t,e,{one:1,zero:0,"src-color":768,"one-minus-src-color":769,"dst-color":774,"one-minus-dst-color":775,"src-alpha":770,"one-minus-src-alpha":771,"dst-alpha":772,"one-minus-dst-alpha":773,"src-alpha-saturated":776,"constant-color":32769,"one-minus-constant-color":32770,"constant-alpha":32771,"one-minus-constant-alpha":32772})}function Fft(t,e){return`Illegal parameter ${e} for ${t}`}function hf(t,e,i){if(!(e in i))throw new Error(Fft(t,e));return i[e]}function Lft(t,e){return e}function Uft(t){let e=!0;for(const i in t){e=!1;break}return e}function qV(t){const e={};return t.addressModeU&&(e[10242]=$3(t.addressModeU)),t.addressModeV&&(e[10243]=$3(t.addressModeV)),t.addressModeW&&(e[32882]=$3(t.addressModeW)),t.magFilter&&(e[10240]=dI(t.magFilter)),(t.minFilter||t.mipmapFilter)&&(e[10241]=kft(t.minFilter||"linear",t.mipmapFilter)),t.lodMinClamp!==void 0&&(e[33082]=t.lodMinClamp),t.lodMaxClamp!==void 0&&(e[33083]=t.lodMaxClamp),t.type==="comparison-sampler"&&(e[34892]=34894),t.compare&&(e[34893]=fI("compare",t.compare)),t.maxAnisotropy&&(e[34046]=t.maxAnisotropy),e}function $3(t){switch(t){case"clamp-to-edge":return 33071;case"repeat":return 10497;case"mirror-repeat":return 33648}}function dI(t){switch(t){case"nearest":return 9728;case"linear":return 9729}}function kft(t,e="none"){if(!e)return dI(t);switch(e){case"none":return dI(t);case"nearest":return t==="nearest"?9984:9986;case"linear":return t==="nearest"?9985:9987}}class AI extends n2{constructor(i,n){super(i,n);rt(this,"device");rt(this,"handle");rt(this,"parameters");this.device=i,this.parameters=qV(n),this.handle=this.handle||this.device.gl.createSampler(),this._setSamplerParameters(this.parameters)}destroy(){this.handle&&(this.device.gl.deleteSampler(this.handle),this.handle=void 0)}toString(){return`Sampler(${this.id},${JSON.stringify(this.props)})`}_setSamplerParameters(i){for(const[n,r]of Object.entries(i)){const s=Number(n);switch(s){case 33082:case 33083:this.device.gl.samplerParameterf(this.handle,s,r);break;default:this.device.gl.samplerParameteri(this.handle,s,r);break}}}}class uA extends e2{constructor(i,n){super(i,{...Zn.defaultProps,...n});rt(this,"device");rt(this,"gl");rt(this,"handle");rt(this,"texture");this.device=i,this.gl=this.device.gl,this.handle=null,this.texture=n.texture}}const jft="Failed to deduce GL constant from typed array";function zft(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(jft)}}function Vft(t,e){const{clamped:i=!0}=e||{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return i?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function YV(t){switch(t){case 6406:case 33326:case 6403:case 36244:return 1;case 33339:case 33340:case 33328:case 33320:case 33319:return 2;case 6407:case 36248:case 34837:return 3;case 6408:case 36249:case 34836:return 4;default:return 0}}function $ft(t){switch(t){case 5121:return 1;case 33635:case 32819:case 32820:return 2;case 5126:return 4;default:return 0}}function y2(t,e,i){if(Wft(e))return i(t);const{nocatch:n=!0}=e,r=uf.get(t);r.push(),y0(t,e);let s;if(n)s=i(t),r.pop();else try{s=i(t)}finally{r.pop()}return s}function Wft(t){for(const e in t)return!1;return!0}function Hft(t,e,i){const{dimension:n,width:r,height:s,depth:a=0}=i,{glInternalFormat:o}=i,l=i.glTarget;switch(n){case"2d-array":case"3d":t.texStorage3D(l,e,o,r,s,a);break;default:t.texStorage2D(l,e,o,r,s)}}function eL(t,e,i,n){const{width:r,height:s}=n,{dimension:a,depth:o=0,mipLevel:l=0}=n,{x:c=0,y:h=0,z:A=0}=n,{glFormat:m,glType:b}=n,S=GV(n.glTarget,a,o),M=n.flipY?{37440:!0}:{};y2(t,M,()=>{switch(a){case"2d-array":case"3d":t.bindTexture(S,e),t.texSubImage3D(S,l,c,h,A,r,s,o,m,b,i),t.bindTexture(S,null);break;case"2d":case"cube":t.bindTexture(S,e),t.texSubImage2D(S,l,c,h,r,s,m,b,i),t.bindTexture(S,null);break;default:throw new Error(a)}})}function iL(t,e,i){const{dimension:n,width:r,height:s,depth:a=0,mipLevel:o=0,byteOffset:l=0}=i,{x:c=0,y:h=0,z:A=0}=i,{glFormat:m,glType:b,compressed:S}=i,M=GV(i.glTarget,n,a);switch(n){case"2d-array":case"3d":S?t.compressedTexSubImage3D(M,o,c,h,A,r,s,a,m,e,l):t.texSubImage3D(M,o,c,h,A,r,s,a,m,b,e,l);break;case"2d":case"cube":S?t.compressedTexSubImage2D(M,o,c,h,r,s,m,e,l):t.texSubImage2D(M,o,c,h,r,s,m,b,e,l);break;default:throw new Error(n)}}function qft(t){switch(t){case"1d":break;case"2d":return 3553;case"3d":return 32879;case"cube":return 34067;case"2d-array":return 35866}throw new Error(t)}function GV(t,e,i){return e==="cube"?34069+i:t}function Yft(t,e){var O;const{sourceX:i=0,sourceY:n=0,sourceAttachment:r=0}=e||{};let{target:s=null,sourceWidth:a,sourceHeight:o,sourceDepth:l,sourceFormat:c,sourceType:h}=e||{};const{framebuffer:A,deleteFramebuffer:m}=XV(t),{gl:b,handle:S}=A;a||(a=A.width),o||(o=A.height);const M=(O=A.colorAttachments[r])==null?void 0:O.texture;if(!M)throw new Error(`Invalid framebuffer attachment ${r}`);l=(M==null?void 0:M.depth)||1,c||(c=(M==null?void 0:M.glFormat)||6408),h||(h=(M==null?void 0:M.glType)||5121),s=Qft(s,h,c,a,o),h=h||zft(s);const I=b.bindFramebuffer(36160,S);return b.readBuffer(36064+r),b.readPixels(i,n,a,o,c,h,s),b.readBuffer(36064),b.bindFramebuffer(36160,I||null),m&&A.destroy(),s}function Gft(t,e){const{target:i,sourceX:n=0,sourceY:r=0,sourceFormat:s=6408,targetByteOffset:a=0}=e||{};let{sourceWidth:o,sourceHeight:l,sourceType:c}=e||{};const{framebuffer:h,deleteFramebuffer:A}=XV(t);o=o||h.width,l=l||h.height;const m=h;c=c||5121;let b=i;if(!b){const M=YV(s),I=$ft(c),O=a+o*l*M*I;b=m.device.createBuffer({byteLength:O})}const S=t.device.createCommandEncoder();return S.copyTextureToBuffer({sourceTexture:t,width:o,height:l,origin:[n,r],destinationBuffer:b,byteOffset:a}),S.destroy(),A&&h.destroy(),b}function XV(t){return t instanceof r2?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Xft(t),deleteFramebuffer:!0}}function Xft(t,e){const{device:i,width:n,height:r,id:s}=t;return i.createFramebuffer({...e,id:`framebuffer-for-${s}`,width:n,height:r,colorAttachments:[t]})}function Qft(t,e,i,n,r,s){if(t)return t;e||(e=5121);const a=Vft(e,{clamped:!1}),o=YV(i);return new a(n*r*o)}class r_ extends Zn{constructor(i,n){super(i,n);rt(this,"device");rt(this,"gl");rt(this,"handle");rt(this,"sampler");rt(this,"view");rt(this,"mipmaps");rt(this,"compressed");rt(this,"glTarget");rt(this,"glFormat");rt(this,"glType");rt(this,"glInternalFormat");rt(this,"textureUnit",0);const r={...this.props};r.data=n.data,this.device=i,this.gl=this.device.gl,this.glTarget=qft(this.props.dimension);const s=$V(this.props.format);this.glInternalFormat=s.internalFormat,this.glFormat=s.format,this.glType=s.type,this.compressed=s.compressed,this.mipmaps=!!this.props.mipmaps,this._initialize(r),Object.seal(this)}_initialize(i){this.handle=this.props.handle||this.gl.createTexture(),this.device.setSpectorMetadata(this.handle,{...this.props,data:i.data});let{width:n,height:r}=i;if(!n||!r){const s=Zn.getTextureDataSize(i.data);n=(s==null?void 0:s.width)||1,r=(s==null?void 0:s.height)||1}if(this.width=n,this.height=r,this.depth=i.depth,this.setSampler(i.sampler),this.view=new uA(this.device,{...this.props,texture:this}),this.bind(),Hft(this.gl,this.mipLevels,this),i.data)switch(i.dimension){case"1d":this.setTexture1DData(i.data);break;case"2d":this.setTexture2DData(i.data);break;case"3d":this.setTexture3DData(i.data);break;case"cube":this.setTextureCubeData(i.data);break;case"2d-array":this.setTextureArrayData(i.data);break;case"cube-array":this.setTextureCubeArrayData(i.data);break;default:throw new Error(i.dimension)}this.mipmaps&&this.generateMipmap()}destroy(){this.handle&&(this.gl.deleteTexture(this.handle),this.removeStats(),this.trackDeallocatedMemory("Texture"),this.destroyed=!0)}createView(i){return new uA(this.device,{...i,texture:this})}setSampler(i={}){let n;i instanceof AI?(this.sampler=i,n=i.props):(this.sampler=new AI(this.device,i),n=i);const r=qV(n);this._setSamplerParameters(r)}generateMipmap(i){if(!(!(this.device.isTextureFormatRenderable(this.props.format)&&this.device.isTextureFormatFilterable(this.props.format))&&(we.warn(`${this} is not renderable or filterable, may not be able to generate mipmaps`)(),!(i!=null&&i.force))))try{this.gl.bindTexture(this.glTarget,this.handle),this.gl.generateMipmap(this.glTarget)}catch(r){we.warn(`Error generating mipmap for ${this}: ${r.message}`)()}finally{this.gl.bindTexture(this.glTarget,null)}}copyExternalImage(i){const n=Zn.getExternalImageSize(i.image),r={...Zn.defaultCopyExternalImageOptions,...n,...i},{image:s,depth:a,mipLevel:o,x:l,y:c,z:h,flipY:A}=r;let{width:m,height:b}=r;const{dimension:S,glTarget:M,glFormat:I,glInternalFormat:O,glType:D}=this;if(m=Math.min(m,this.width-l),b=Math.min(b,this.height-c),i.sourceX||i.sourceY)throw new Error("WebGL does not support sourceX/sourceY)");return eL(this.device.gl,this.handle,s,{dimension:S,mipLevel:o,x:l,y:c,z:h,width:m,height:b,depth:a,glFormat:I,glType:D,glTarget:M,flipY:A}),{width:r.width,height:r.height}}setTexture1DData(i){throw new Error("setTexture1DData not supported in WebGL.")}setTexture2DData(i,n=0){this.bind();const r=Zn.normalizeTextureData(i,this);r.length>1&&this.props.mipmaps!==!1&&we.warn(`Texture ${this.id} mipmap and multiple LODs.`)();for(let s=0;s<r.length;s++){const a=r[s];this._setMipLevel(n,s,a)}this.unbind()}setTexture3DData(i){if(this.props.dimension!=="3d")throw new Error(this.id);ArrayBuffer.isView(i)&&(this.bind(),iL(this.device.gl,i,this),this.unbind())}setTextureCubeData(i,n=0){if(this.props.dimension!=="cube")throw new Error(this.id);for(const r of Zn.CubeFaces)this.setTextureCubeFaceData(i[r],r)}setTextureArrayData(i){throw this.props.dimension!=="2d-array"?new Error(this.id):new Error("setTextureArrayData not implemented.")}setTextureCubeArrayData(i){throw new Error("setTextureCubeArrayData not supported in WebGL2.")}setTextureCubeFaceData(i,n,r=0){Array.isArray(i)&&i.length>1&&this.props.mipmaps!==!1&&we.warn(`${this.id} has mipmap and multiple LODs.`)();const s=Zn.CubeFaces.indexOf(n);this.setTexture2DData(i,s)}update(){throw new Error("Texture.update() not implemented. Use ExternalTexture")}setImageDataForFace(i){const{face:n,width:r,height:s,pixels:a,data:o,format:l=6408,type:c=5121}=i,{gl:h}=this,A=a||o;this.bind(),A instanceof Promise?A.then(m=>this.setImageDataForFace(Object.assign({},i,{face:n,data:m,pixels:m}))):this.width||this.height?h.texImage2D(n,0,l,r,s,0,l,c,A):h.texImage2D(n,0,l,l,c,A)}_getImageDataMap(i){for(let n=0;n<Zn.CubeFaces.length;++n){const r=Zn.CubeFaces[n];i[r]&&(i[34069+n]=i[r],delete i[r])}return i}_setSamplerParameters(i){we.log(1,`${this.id} sampler parameters`,this.device.getGLKeys(i))(),this.gl.bindTexture(this.glTarget,this.handle);for(const[n,r]of Object.entries(i)){const s=Number(n),a=r;switch(s){case 33082:case 33083:this.gl.texParameterf(this.glTarget,s,a);break;case 10241:this.gl.texParameteri(this.glTarget,s,a);break;case 10242:case 10243:this.gl.texParameteri(this.glTarget,s,a);break;case 34046:this.device.features.has("texture-filterable-anisotropic-webgl")&&this.gl.texParameteri(this.glTarget,s,a);break;default:this.gl.texParameteri(this.glTarget,s,a);break}}this.gl.bindTexture(this.glTarget,null)}_setMipLevel(i,n,r,s=this.glTarget){if(Zn.isExternalImage(r)){eL(this.device.gl,this.handle,r,{...this,depth:i,mipLevel:n,glTarget:s,flipY:this.props.flipY});return}if(Zn.isTextureLevelData(r)){iL(this.device.gl,r.data,{...this,depth:i,mipLevel:n,glTarget:s});return}throw new Error("Texture: invalid image data")}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(i){const{gl:n}=this;return i!==void 0&&(this.textureUnit=i,n.activeTexture(33984+i)),n.bindTexture(this.glTarget,this.handle),i}unbind(i){const{gl:n}=this;return i!==void 0&&(this.textureUnit=i,n.activeTexture(33984+i)),n.bindTexture(this.glTarget,null),i}}const Kft=[1,2,4,8];class Zft extends VM{constructor(i,n){var a;super(i,n);rt(this,"device");rt(this,"glParameters");this.device=i;let r;if(!((a=n==null?void 0:n.parameters)!=null&&a.viewport))if(n!=null&&n.framebuffer){const{width:o,height:l}=n.framebuffer;r=[0,0,o,l]}else{const[o,l]=i.getCanvasContext().getDrawingBufferSize();r=[0,0,o,l]}this.device.pushState(),this.setParameters({viewport:r,...this.props.parameters});const s=this.props.framebuffer;if(s!=null&&s.handle)if(this.props.framebuffer){const o=this.props.framebuffer.colorAttachments.map((l,c)=>36064+c);this.device.gl.drawBuffers(o)}else this.device.gl.drawBuffers([1029]);this.clear()}end(){this.device.popState()}pushDebugGroup(i){}popDebugGroup(){}insertDebugMarker(i){}setParameters(i={}){const n={...this.glParameters};n.framebuffer=this.props.framebuffer||null,this.props.depthReadOnly&&(n.depthMask=!this.props.depthReadOnly),n.stencilMask=this.props.stencilReadOnly?0:1,n[35977]=this.props.discard,i.viewport&&(i.viewport.length>=6?(n.viewport=i.viewport.slice(0,4),n.depthRange=[i.viewport[4],i.viewport[5]]):n.viewport=i.viewport),i.scissorRect&&(n.scissorTest=!0,n.scissor=i.scissorRect),i.blendConstant&&(n.blendColor=i.blendConstant),i.stencilReference&&(console.warn("RenderPassParameters.stencilReference not yet implemented in WebGL"),i[2967]=i.stencilReference),i.colorMask&&(n.colorMask=Kft.map(r=>!!(r&i.colorMask))),this.glParameters=n,y0(this.device.gl,n)}beginOcclusionQuery(i){const n=this.props.occlusionQuerySet;n==null||n.beginOcclusionQuery()}endOcclusionQuery(){const i=this.props.occlusionQuerySet;i==null||i.endOcclusionQuery()}clear(){const i={...this.glParameters};let n=0;this.props.clearColors&&this.props.clearColors.forEach((r,s)=>{r&&this.clearColorBuffer(s,r)}),this.props.clearColor!==!1&&this.props.clearColors===void 0&&(n|=16384,i.clearColor=this.props.clearColor),this.props.clearDepth!==!1&&(n|=256,i.clearDepth=this.props.clearDepth),this.props.clearStencil!==!1&&(n|=1024,i.clearStencil=this.props.clearStencil),n!==0&&y2(this.device.gl,i,()=>{this.device.gl.clear(n)})}clearColorBuffer(i=0,n=[0,0,0,0]){y2(this.device.gl,{framebuffer:this.props.framebuffer},()=>{switch(n.constructor){case Int8Array:case Int16Array:case Int32Array:this.device.gl.clearBufferiv(6144,i,n);break;case Uint8Array:case Uint8ClampedArray:case Uint16Array:case Uint32Array:this.device.gl.clearBufferuiv(6144,i,n);break;case Float32Array:this.device.gl.clearBufferfv(6144,i,n);break;default:throw new Error("clearColorBuffer: color must be typed array")}})}}function Jft(t){return tdt.includes(t)}const tdt=[35678,35680,35679,35682,36289,36292,36293,36298,36299,36300,36303,36306,36307,36308,36311],QV={5126:[5126,1,"float","f32","float32"],35664:[5126,2,"vec2","vec2<f32>","float32x2"],35665:[5126,3,"vec3","vec3<f32>","float32x3"],35666:[5126,4,"vec4","vec4<f32>","float32x4"],5124:[5124,1,"int","i32","sint32"],35667:[5124,2,"ivec2","vec2<i32>","sint32x2"],35668:[5124,3,"ivec3","vec3<i32>","sint32x3"],35669:[5124,4,"ivec4","vec4<i32>","sint32x4"],5125:[5125,1,"uint","u32","uint32"],36294:[5125,2,"uvec2","vec2<u32>","uint32x2"],36295:[5125,3,"uvec3","vec3<u32>","uint32x3"],36296:[5125,4,"uvec4","vec4<u32>","uint32x4"],35670:[5126,1,"bool","f32","float32"],35671:[5126,2,"bvec2","vec2<f32>","float32x2"],35672:[5126,3,"bvec3","vec3<f32>","float32x3"],35673:[5126,4,"bvec4","vec4<f32>","float32x4"],35674:[5126,8,"mat2","mat2x2<f32>"],35685:[5126,8,"mat2x3","mat2x3<f32>"],35686:[5126,8,"mat2x4","mat2x4<f32>"],35687:[5126,12,"mat3x2","mat3x2<f32>"],35675:[5126,12,"mat3","mat3x3<f32>"],35688:[5126,12,"mat3x4","mat3x4<f32>"],35689:[5126,16,"mat4x2","mat4x2<f32>"],35690:[5126,16,"mat4x3","mat4x3<f32>"],35676:[5126,16,"mat4","mat4x4<f32>"]};function KV(t){const e=QV[t];if(!e)throw new Error("uniform");const[i,n,,r]=e;return{format:r,components:n,glType:i}}function edt(t){const e=QV[t];if(!e)throw new Error("attribute");const[,i,,n,r]=e;return{attributeType:n,vertexFormat:r,components:i}}function idt(t,e){const i={attributes:[],bindings:[]};i.attributes=ndt(t,e);const n=adt(t,e);for(const o of n){const l=o.uniforms.map(c=>({name:c.name,format:c.format,byteOffset:c.byteOffset,byteStride:c.byteStride,arrayLength:c.arrayLength}));i.bindings.push({type:"uniform",name:o.name,group:0,location:o.location,visibility:(o.vertex?1:0)&(o.fragment?2:0),minBindingSize:o.byteLength,uniforms:l})}const r=sdt(t,e);let s=0;for(const o of r)if(Jft(o.type)){const{viewDimension:l,sampleType:c}=ldt(o.type);i.bindings.push({type:"texture",name:o.name,group:0,location:s,viewDimension:l,sampleType:c}),o.textureUnit=s,s+=1}r.length&&(i.uniforms=r);const a=rdt(t,e);return a!=null&&a.length&&(i.varyings=a),i}function ndt(t,e){const i=[],n=t.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=t.getActiveAttrib(e,r);if(!s)throw new Error("activeInfo");const{name:a,type:o}=s,l=t.getAttribLocation(e,a);if(l>=0){const{attributeType:c}=edt(o),h=/instance/i.test(a)?"instance":"vertex";i.push({name:a,location:l,stepMode:h,type:c})}}return i.sort((r,s)=>r.location-s.location),i}function rdt(t,e){const i=[],n=t.getProgramParameter(e,35971);for(let r=0;r<n;r++){const s=t.getTransformFeedbackVarying(e,r);if(!s)throw new Error("activeInfo");const{name:a,type:o,size:l}=s,{glType:c,components:h}=KV(o),A={location:r,name:a,type:c,size:l*h};i.push(A)}return i.sort((r,s)=>r.location-s.location),i}function sdt(t,e){const i=[],n=t.getProgramParameter(e,35718);for(let r=0;r<n;r++){const s=t.getActiveUniform(e,r);if(!s)throw new Error("activeInfo");const{name:a,size:o,type:l}=s,{name:c,isArray:h}=cdt(a);let A=t.getUniformLocation(e,c);const m={location:A,name:c,size:o,type:l,isArray:h};if(i.push(m),m.size>1)for(let b=0;b<m.size;b++){const S=`${c}[${b}]`;A=t.getUniformLocation(e,S);const M={...m,name:S,location:A};i.push(M)}}return i}function adt(t,e){const i=(s,a)=>t.getActiveUniformBlockParameter(e,s,a),n=[],r=t.getProgramParameter(e,35382);for(let s=0;s<r;s++){const a={name:t.getActiveUniformBlockName(e,s)||"",location:i(s,35391),byteLength:i(s,35392),vertex:i(s,35396),fragment:i(s,35398),uniformCount:i(s,35394),uniforms:[]},o=i(s,35395)||[],l=t.getActiveUniforms(e,o,35383),c=t.getActiveUniforms(e,o,35384),h=t.getActiveUniforms(e,o,35387),A=t.getActiveUniforms(e,o,35388);for(let m=0;m<a.uniformCount;++m){const b=t.getActiveUniform(e,o[m]);if(!b)throw new Error("activeInfo");a.uniforms.push({name:b.name,format:KV(l[m]).format,type:l[m],arrayLength:c[m],byteOffset:h[m],byteStride:A[m]})}n.push(a)}return n.sort((s,a)=>s.location-a.location),n}const odt={35678:["2d","float"],35680:["cube","float"],35679:["3d","float"],35682:["3d","depth"],36289:["2d-array","float"],36292:["2d-array","depth"],36293:["cube","float"],36298:["2d","sint"],36299:["3d","sint"],36300:["cube","sint"],36303:["2d-array","uint"],36306:["2d","uint"],36307:["3d","uint"],36308:["cube","uint"],36311:["2d-array","uint"]};function ldt(t){const e=odt[t];if(!e)throw new Error("sampler");const[i,n]=e;return{viewDimension:i,sampleType:n}}function cdt(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const i=/([^[]*)(\[[0-9]+\])?/.exec(t);if(!i||i.length<2)throw new Error(`Failed to parse GLSL uniform name ${t}`);return{name:i[1],length:i[2]?1:0,isArray:!!i[2]}}function udt(t,e,i,n){const r=t;let s=n;s===!0&&(s=1),s===!1&&(s=0);const a=typeof s=="number"?[s]:s;switch(i){case 35678:case 35680:case 35679:case 35682:case 36289:case 36292:case 36293:case 36298:case 36299:case 36300:case 36303:case 36306:case 36307:case 36308:case 36311:if(typeof n!="number")throw new Error("samplers must be set to integers");return t.uniform1i(e,n);case 5126:return t.uniform1fv(e,a);case 35664:return t.uniform2fv(e,a);case 35665:return t.uniform3fv(e,a);case 35666:return t.uniform4fv(e,a);case 5124:return t.uniform1iv(e,a);case 35667:return t.uniform2iv(e,a);case 35668:return t.uniform3iv(e,a);case 35669:return t.uniform4iv(e,a);case 35670:return t.uniform1iv(e,a);case 35671:return t.uniform2iv(e,a);case 35672:return t.uniform3iv(e,a);case 35673:return t.uniform4iv(e,a);case 5125:return r.uniform1uiv(e,a,1);case 36294:return r.uniform2uiv(e,a,2);case 36295:return r.uniform3uiv(e,a,3);case 36296:return r.uniform4uiv(e,a,4);case 35674:return t.uniformMatrix2fv(e,!1,a);case 35675:return t.uniformMatrix3fv(e,!1,a);case 35676:return t.uniformMatrix4fv(e,!1,a);case 35685:return r.uniformMatrix2x3fv(e,!1,a);case 35686:return r.uniformMatrix2x4fv(e,!1,a);case 35687:return r.uniformMatrix3x2fv(e,!1,a);case 35688:return r.uniformMatrix3x4fv(e,!1,a);case 35689:return r.uniformMatrix4x2fv(e,!1,a);case 35690:return r.uniformMatrix4x3fv(e,!1,a)}throw new Error("Illegal uniform")}function hdt(t){return RV(t)!==null||typeof t=="number"||typeof t=="boolean"}function fdt(t){const e={bindings:{},uniforms:{}};return Object.keys(t).forEach(i=>{const n=t[i];hdt(n)?e.uniforms[i]=n:e.bindings[i]=n}),e}function ddt(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 3;case"triangle-list":return 4;case"triangle-strip":return 5;default:throw new Error(t)}}function Adt(t){switch(t){case"point-list":return 0;case"line-list":return 1;case"line-strip":return 1;case"triangle-list":return 4;case"triangle-strip":return 4;default:throw new Error(t)}}const nL=4;class gdt extends WA{constructor(i,n){super(i,n);rt(this,"device");rt(this,"handle");rt(this,"vs");rt(this,"fs");rt(this,"introspectedLayout");rt(this,"uniforms",{});rt(this,"bindings",{});rt(this,"varyings",null);rt(this,"_uniformCount",0);rt(this,"_uniformSetters",{});this.device=i,this.handle=this.props.handle||this.device.gl.createProgram(),this.device.setSpectorMetadata(this.handle,{id:this.props.id}),this.vs=n.vs,this.fs=n.fs;const{varyings:r,bufferMode:s=35981}=n;r&&r.length>0&&(this.varyings=r,this.device.gl.transformFeedbackVaryings(this.handle,r,s)),this._linkShaders(),we.time(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.introspectedLayout=idt(this.device.gl,this.handle),we.timeEnd(1,`RenderPipeline ${this.id} - shaderLayout introspection`)(),this.shaderLayout=ydt(this.introspectedLayout,n.shaderLayout)}destroy(){this.handle&&(this.device.gl.deleteProgram(this.handle),this.destroyed=!0)}setBindings(i,n){for(const[r,s]of Object.entries(i)){const a=this.shaderLayout.bindings.find(o=>o.name===r)||this.shaderLayout.bindings.find(o=>o.name===`${r}Uniforms`);if(!a){const o=this.shaderLayout.bindings.map(l=>`"${l.name}"`).join(", ");n!=null&&n.disableWarnings||we.warn(`No binding "${r}" in render pipeline "${this.id}", expected one of ${o}`,s)();continue}switch(s||we.warn(`Unsetting binding "${r}" in render pipeline "${this.id}"`)(),a.type){case"uniform":if(!(s instanceof n_)&&!(s.buffer instanceof n_))throw new Error("buffer value");break;case"texture":if(!(s instanceof uA||s instanceof r_||s instanceof i_))throw new Error("texture value");break;case"sampler":we.warn(`Ignoring sampler ${r}`)();break;default:throw new Error(a.type)}this.bindings[r]=s}}draw(i){var I;const{renderPass:n,parameters:r=this.props.parameters,topology:s=this.props.topology,vertexArray:a,vertexCount:o,instanceCount:l,isInstanced:c=!1,firstVertex:h=0,transformFeedback:A}=i,m=ddt(s),b=!!a.indexBuffer,S=(I=a.indexBuffer)==null?void 0:I.glIndexType;if(this.linkStatus!=="success")return we.info(2,`RenderPipeline:${this.id}.draw() aborted - waiting for shader linking`)(),!1;if(!this._areTexturesRenderable())return we.info(2,`RenderPipeline:${this.id}.draw() aborted - textures not yet loaded`)(),!1;this.device.gl.useProgram(this.handle),a.bindBeforeRender(n),A&&A.begin(this.props.topology),this._applyBindings(),this._applyUniforms();const M=n;return xft(this.device,r,M.glParameters,()=>{b&&c?this.device.gl.drawElementsInstanced(m,o||0,S,h,l||0):b?this.device.gl.drawElements(m,o||0,S,h):c?this.device.gl.drawArraysInstanced(m,h,o||0,l||0):this.device.gl.drawArrays(m,h,o||0),A&&A.end()}),a.unbindAfterRender(n),!0}setUniformsWebGL(i){const{bindings:n}=fdt(i);Object.keys(n).forEach(r=>{we.warn(`Unsupported value "${JSON.stringify(n[r])}" used in setUniforms() for key ${r}. Use setBindings() instead?`)()}),Object.assign(this.uniforms,i)}async _linkShaders(){const{gl:i}=this.device;if(i.attachShader(this.handle,this.vs.handle),i.attachShader(this.handle,this.fs.handle),we.time(nL,`linkProgram for ${this.id}`)(),i.linkProgram(this.handle),we.timeEnd(nL,`linkProgram for ${this.id}`)(),we.level,!this.device.features.has("compilation-status-async-webgl")){const r=this._getLinkStatus();this._reportLinkStatus(r);return}we.once(1,"RenderPipeline linking is asynchronous")(),await this._waitForLinkComplete(),we.info(2,`RenderPipeline ${this.id} - async linking complete: ${this.linkStatus}`)();const n=this._getLinkStatus();this._reportLinkStatus(n)}async _reportLinkStatus(i){var n;switch(i){case"success":return;default:switch(this.vs.compilationStatus){case"error":throw this.vs.debugShader(),new Error(`Error during compilation of shader ${this.vs.id}`);case"pending":this.vs.asyncCompilationStatus.then(()=>this.vs.debugShader());break}switch((n=this.fs)==null?void 0:n.compilationStatus){case"error":throw this.fs.debugShader(),new Error(`Error during compilation of shader ${this.fs.id}`);case"pending":this.fs.asyncCompilationStatus.then(()=>this.fs.debugShader());break}const r=this.device.gl.getProgramInfoLog(this.handle);throw new Error(`Error during ${i}: ${r}`)}}_getLinkStatus(){const{gl:i}=this.device;return i.getProgramParameter(this.handle,35714)?(i.validateProgram(this.handle),i.getProgramParameter(this.handle,35715)?(this.linkStatus="success","success"):(this.linkStatus="error","validation")):(this.linkStatus="error","linking")}async _waitForLinkComplete(){const i=async s=>await new Promise(a=>setTimeout(a,s));if(!this.device.features.has("compilation-status-async-webgl")){await i(10);return}const{gl:r}=this.device;for(;;){if(r.getProgramParameter(this.handle,37297))return;await i(10)}}_areTexturesRenderable(){let i=!0;for(const n of this.shaderLayout.bindings)!this.bindings[n.name]&&!this.bindings[n.name.replace(/Uniforms$/,"")]&&(we.warn(`Binding ${n.name} not found in ${this.id}`)(),i=!1);return i}_applyBindings(){if(this.linkStatus!=="success")return;const{gl:i}=this.device;i.useProgram(this.handle);let n=0,r=0;for(const s of this.shaderLayout.bindings){const a=this.bindings[s.name]||this.bindings[s.name.replace(/Uniforms$/,"")];if(!a)throw new Error(`No value for binding ${s.name} in ${this.id}`);switch(s.type){case"uniform":const{name:o}=s,l=i.getUniformBlockIndex(this.handle,o);if(l===4294967295)throw new Error(`Invalid uniform block name ${o}`);i.uniformBlockBinding(this.handle,r,l),a instanceof n_?i.bindBufferBase(35345,r,a.handle):i.bindBufferRange(35345,r,a.buffer.handle,a.offset||0,a.size||a.buffer.byteLength-a.offset),r+=1;break;case"texture":if(!(a instanceof uA||a instanceof r_||a instanceof i_))throw new Error("texture");let c;if(a instanceof uA)c=a.texture;else if(a instanceof r_)c=a;else if(a instanceof i_&&a.colorAttachments[0]instanceof uA)we.warn("Passing framebuffer in texture binding may be deprecated. Use fbo.colorAttachments[0] instead")(),c=a.colorAttachments[0].texture;else throw new Error("No texture");i.activeTexture(33984+n),i.bindTexture(c.glTarget,c.handle),n+=1;break;case"sampler":break;case"storage":case"read-only-storage":throw new Error(`binding type '${s.type}' not supported in WebGL`)}}}_applyUniforms(){for(const i of this.shaderLayout.uniforms||[]){const{name:n,location:r,type:s,textureUnit:a}=i,o=this.uniforms[n]??a;o!==void 0&&udt(this.device.gl,r,s,o)}}}function ydt(t,e){const i={...t,attributes:t.attributes.map(n=>({...n}))};for(const n of(e==null?void 0:e.attributes)||[]){const r=i.attributes.find(s=>s.name===n.name);r?(r.type=n.type||r.type,r.stepMode=n.stepMode||r.stepMode):we.warn(`shader layout attribute ${n.name} not present in shader`)}return i}class pdt extends WM{constructor(i){super(i,{});rt(this,"device");rt(this,"commands",[]);this.device=i}submitCommands(i=this.commands){for(const n of i)switch(n.name){case"copy-buffer-to-buffer":mdt(this.device,n.options);break;case"copy-buffer-to-texture":_dt(this.device,n.options);break;case"copy-texture-to-buffer":bdt(this.device,n.options);break;case"copy-texture-to-texture":vdt(this.device,n.options);break;default:throw new Error(n.name)}}}function mdt(t,e){const i=e.sourceBuffer,n=e.destinationBuffer;t.gl.bindBuffer(36662,i.handle),t.gl.bindBuffer(36663,n.handle),t.gl.copyBufferSubData(36662,36663,e.sourceOffset??0,e.destinationOffset??0,e.size),t.gl.bindBuffer(36662,null),t.gl.bindBuffer(36663,null)}function _dt(t,e){throw new Error("Not implemented")}function bdt(t,e){const{sourceTexture:i,mipLevel:n=0,aspect:r="all",width:s=e.sourceTexture.width,height:a=e.sourceTexture.height,depthOrArrayLayers:o=0,origin:l=[0,0],destinationBuffer:c,byteOffset:h=0,bytesPerRow:A,rowsPerImage:m}=e;if(r!=="all")throw new Error("aspect not supported in WebGL");if(n!==0||o!==0||A||m)throw new Error("not implemented");const{framebuffer:b,destroyFramebuffer:S}=ZV(i);let M;try{const I=c,O=s||b.width,D=a||b.height,B=$V(b.colorAttachments[0].texture.props.format),P=B.format,j=B.type;t.gl.bindBuffer(35051,I.handle),M=t.gl.bindFramebuffer(36160,b.handle),t.gl.readPixels(l[0],l[1],O,D,P,j,h)}finally{t.gl.bindBuffer(35051,null),M!==void 0&&t.gl.bindFramebuffer(36160,M),S&&b.destroy()}}function vdt(t,e){const{sourceTexture:i,destinationMipLevel:n=0,origin:r=[0,0],destinationOrigin:s=[0,0],destinationTexture:a}=e;let{width:o=e.destinationTexture.width,height:l=e.destinationTexture.height}=e;const{framebuffer:c,destroyFramebuffer:h}=ZV(i),[A,m]=r,[b,S,M]=s,I=t.gl.bindFramebuffer(36160,c.handle);let O=null,D;if(a instanceof r_)O=a,o=Number.isFinite(o)?o:O.width,l=Number.isFinite(l)?l:O.height,O.bind(0),D=O.glTarget;else throw new Error("invalid destination");switch(D){case 3553:case 34067:t.gl.copyTexSubImage2D(D,n,b,S,A,m,o,l);break;case 35866:case 32879:t.gl.copyTexSubImage3D(D,n,b,S,M,A,m,o,l);break}O&&O.unbind(),t.gl.bindFramebuffer(36160,I),h&&c.destroy()}function ZV(t){if(t instanceof Zn){const{width:e,height:i,id:n}=t;return{framebuffer:t.device.createFramebuffer({id:`framebuffer-for-${n}`,width:e,height:i,colorAttachments:[t]}),destroyFramebuffer:!0}}return{framebuffer:t,destroyFramebuffer:!1}}class Tdt extends $M{constructor(i,n){super(i,n);rt(this,"device");rt(this,"commandBuffer");this.device=i,this.commandBuffer=new pdt(i)}destroy(){}finish(){this.commandBuffer.submitCommands()}copyBufferToBuffer(i){this.commandBuffer.commands.push({name:"copy-buffer-to-buffer",options:i})}copyBufferToTexture(i){this.commandBuffer.commands.push({name:"copy-buffer-to-texture",options:i})}copyTextureToBuffer(i){this.commandBuffer.commands.push({name:"copy-texture-to-buffer",options:i})}copyTextureToTexture(i){this.commandBuffer.commands.push({name:"copy-texture-to-texture",options:i})}pushDebugGroup(i){}popDebugGroup(){}insertDebugMarker(i){}resolveQuerySet(i,n,r){}}function Sdt(t){const{target:e,source:i,start:n=0,count:r=1}=t,s=i.length,a=r*s;let o=0;for(let l=n;o<s;o++)e[l++]=i[o];for(;o<a;)o<a-o?(e.copyWithin(n+o,n,n+o),o*=2):(e.copyWithin(n+o,n,n+a-o),o=a);return t.target}class JB extends HM{constructor(i,n){super(i,n);rt(this,"device");rt(this,"handle");rt(this,"buffer",null);rt(this,"bufferValue",null);this.device=i,this.handle=this.device.gl.createVertexArray()}get[Symbol.toStringTag](){return"VertexArray"}static isConstantAttributeZeroSupported(i){return $it()==="Chrome"}destroy(){var i;super.destroy(),this.buffer&&((i=this.buffer)==null||i.destroy()),this.handle&&(this.device.gl.deleteVertexArray(this.handle),this.handle=void 0)}setIndexBuffer(i){const n=i;if(n&&n.glTarget!==34963)throw new Error("Use .setBuffer()");this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34963,n?n.handle:null),this.indexBuffer=n,this.device.gl.bindVertexArray(null)}setBuffer(i,n){const r=n;if(r.glTarget===34963)throw new Error("Use .setIndexBuffer()");const{size:s,type:a,stride:o,offset:l,normalized:c,integer:h,divisor:A}=this._getAccessor(i);this.device.gl.bindVertexArray(this.handle),this.device.gl.bindBuffer(34962,r.handle),h?this.device.gl.vertexAttribIPointer(i,s,a,o,l):this.device.gl.vertexAttribPointer(i,s,a,c,o,l),this.device.gl.bindBuffer(34962,null),this.device.gl.enableVertexAttribArray(i),this.device.gl.vertexAttribDivisor(i,A||0),this.attributes[i]=r,this.device.gl.bindVertexArray(null)}setConstantWebGL(i,n){this._enable(i,!1),this.attributes[i]=n}bindBeforeRender(){this.device.gl.bindVertexArray(this.handle),this._applyConstantAttributes()}unbindAfterRender(){this.device.gl.bindVertexArray(null)}_applyConstantAttributes(){for(let i=0;i<this.maxVertexAttributes;++i){const n=this.attributes[i];ArrayBuffer.isView(n)&&this.device.setConstantAttributeWebGL(i,n)}}_getAccessor(i){const n=this.attributeInfos[i];if(!n)throw new Error(`Unknown attribute location ${i}`);const r=VV(n.bufferDataType);return{size:n.bufferComponents,type:r,stride:n.byteStride,offset:n.byteOffset,normalized:n.normalized,integer:n.integer,divisor:n.stepMode==="instance"?1:0}}_enable(i,n=!0){const s=JB.isConstantAttributeZeroSupported(this.device)||i!==0;(n||s)&&(i=Number(i),this.device.gl.bindVertexArray(this.handle),n?this.device.gl.enableVertexAttribArray(i):this.device.gl.disableVertexAttribArray(i),this.device.gl.bindVertexArray(null))}getConstantBuffer(i,n){const r=wdt(n),s=r.byteLength*i,a=r.length*i;if(this.buffer&&s!==this.buffer.byteLength)throw new Error(`Buffer size is immutable, byte length ${s} !== ${this.buffer.byteLength}.`);let o=!this.buffer;if(this.buffer=this.buffer||this.device.createBuffer({byteLength:s}),o=o||!Mdt(r,this.bufferValue),o){const l=Bat(n.constructor,a);Sdt({target:l,source:r,start:0,count:a}),this.buffer.write(l),this.bufferValue=n}return this.buffer}}function wdt(t){return Array.isArray(t)?new Float32Array(t):t}function Mdt(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}class Idt extends qM{constructor(i,n){super(i,n);rt(this,"device");rt(this,"gl");rt(this,"handle");rt(this,"layout");rt(this,"buffers",{});rt(this,"unusedBuffers",{});rt(this,"bindOnUse",!0);rt(this,"_bound",!1);this.device=i,this.gl=i.gl,this.handle=this.props.handle||this.gl.createTransformFeedback(),this.layout=this.props.layout,n.buffers&&this.setBuffers(n.buffers),Object.seal(this)}destroy(){this.gl.deleteTransformFeedback(this.handle),super.destroy()}begin(i="point-list"){this.gl.bindTransformFeedback(36386,this.handle),this.bindOnUse&&this._bindBuffers(),this.gl.beginTransformFeedback(Adt(i))}end(){this.gl.endTransformFeedback(),this.bindOnUse&&this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null)}setBuffers(i){this.buffers={},this.unusedBuffers={},this.bind(()=>{for(const n in i)this.setBuffer(n,i[n])})}setBuffer(i,n){const r=this._getVaryingIndex(i),{buffer:s,byteLength:a,byteOffset:o}=this._getBufferRange(n);if(r<0){this.unusedBuffers[i]=s,we.warn(`${this.id} unusedBuffers varying buffer ${i}`)();return}this.buffers[r]={buffer:s,byteLength:a,byteOffset:o},this.bindOnUse||this._bindBuffer(r,s,o,a)}getBuffer(i){if(rL(i))return this.buffers[i]||null;const n=this._getVaryingIndex(i);return n>=0?this.buffers[n]:null}bind(i=this.handle){if(typeof i!="function")return this.gl.bindTransformFeedback(36386,i),this;let n;return this._bound?n=i():(this.gl.bindTransformFeedback(36386,this.handle),this._bound=!0,n=i(),this._bound=!1,this.gl.bindTransformFeedback(36386,null)),n}unbind(){this.bind(null)}_getBufferRange(i){if(i instanceof n_)return{buffer:i,byteOffset:0,byteLength:i.byteLength};const{buffer:n,byteOffset:r=0,byteLength:s=i.buffer.byteLength}=i;return{buffer:n,byteOffset:r,byteLength:s}}_getVaryingIndex(i){if(rL(i))return Number(i);for(const n of this.layout.varyings)if(i===n.name)return n.location;return-1}_bindBuffers(){for(const i in this.buffers){const{buffer:n,byteLength:r,byteOffset:s}=this._getBufferRange(this.buffers[i]);this._bindBuffer(Number(i),n,s,r)}}_unbindBuffers(){for(const i in this.buffers)this.gl.bindBufferBase(35982,Number(i),null)}_bindBuffer(i,n,r=0,s){const a=n&&n.handle;!a||s===void 0?this.gl.bindBufferBase(35982,i,a):this.gl.bindBufferRange(35982,i,a,r,s)}}function rL(t){return typeof t=="number"?Number.isInteger(t):/^\d+$/.test(t)}class Edt extends YM{constructor(i,n){super(i,n);rt(this,"device");rt(this,"handle");rt(this,"target",null);rt(this,"_queryPending",!1);rt(this,"_pollingPromise",null);if(this.device=i,n.count>1)throw new Error("WebGL QuerySet can only have one value");this.handle=this.device.gl.createQuery(),Object.seal(this)}get[Symbol.toStringTag](){return"Query"}destroy(){this.device.gl.deleteQuery(this.handle)}beginTimestampQuery(){return this._begin(35007)}endTimestampQuery(){this._end()}beginOcclusionQuery(i){return this._begin(i!=null&&i.conservative?36202:35887)}endOcclusionQuery(){this._end()}beginTransformFeedbackQuery(){return this._begin(35976)}endTransformFeedbackQuery(){this._end()}async resolveQuery(){return[await this.pollQuery()]}_begin(i){this._queryPending||(this.target=i,this.device.gl.beginQuery(this.target,this.handle))}_end(){this._queryPending||this.target&&(this.device.gl.endQuery(this.target),this.target=null,this._queryPending=!0)}isResultAvailable(){if(!this._queryPending)return!1;const i=this.device.gl.getQueryParameter(this.handle,34919);return i&&(this._queryPending=!1),i}isTimerDisjoint(){return this.device.gl.getParameter(36795)}getResult(){return this.device.gl.getQueryParameter(this.handle,34918)}getTimerMilliseconds(){return this.getResult()/1e6}pollQuery(i=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,s)=>{const a=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>i?(s("Timed out"),this._pollingPromise=null):requestAnimationFrame(a)};requestAnimationFrame(a)}),this._pollingPromise}}class hA extends Bu{constructor(i){var A,m;super({...i,id:i.id||Oft("webgl-device")});rt(this,"type","webgl");rt(this,"handle");rt(this,"features");rt(this,"limits");rt(this,"info");rt(this,"canvasContext");rt(this,"lost");rt(this,"_resolveContextLost");rt(this,"gl");rt(this,"debug",!1);rt(this,"_canvasSizeInfo",{clientWidth:0,clientHeight:0,devicePixelRatio:1});rt(this,"_extensions",{});rt(this,"_polyfilled",!1);rt(this,"spectorJS");rt(this,"renderPass",null);rt(this,"_constants");const n=Bu._getCanvasContextProps(i);if(!n)throw new Error("WebGLDevice requires props.createCanvasContext to be set");let r=(m=(A=n.canvas)==null?void 0:A.gl)==null?void 0:m.device;if(r)throw new Error(`WebGL context already attached to device ${r.id}`);this.canvasContext=new mft(this,n),this.lost=new Promise(b=>{this._resolveContextLost=b});const s={...i.webgl};n.alphaMode==="premultiplied"&&(s.premultipliedAlpha=!0),i.powerPreference!==void 0&&(s.powerPreference=i.powerPreference);const o=this.props._handle||Zht(this.canvasContext.canvas,{onContextLost:b=>{var S;return(S=this._resolveContextLost)==null?void 0:S.call(this,{reason:"destroyed",message:"Entered sleep mode, or too many apps or browser tabs are using the GPU."})},onContextRestored:b=>console.log("WebGL context restored")},s);if(!o)throw new Error("WebGL context creation failed");if(r=o.device,r){if(i._reuseDevices)return we.log(1,`Not creating a new Device, instead returning a reference to Device ${r.id} already attached to WebGL context`,r)(),r._reused=!0,r;throw new Error(`WebGL context already attached to device ${r.id}`)}this.handle=o,this.gl=o,this.spectorJS=vft({...this.props,gl:this.handle}),this.gl.device=this,this.gl._version=2,this.info=Jht(this.gl,this._extensions),this.limits=new gft(this.gl),this.features=new Aft(this.gl,this._extensions,this.props._disabledFeatures),this.props._initializeFeatures&&this.features.initializeFeatures(),n.autoResize!==!1&&this.canvasContext.resize(),new uf(this.gl,{log:(...b)=>we.log(1,...b)()}).trackState(this.gl,{copyState:!1});const c=i.debugWebGL||i.debug,h=i.debugWebGL;c&&(this.gl=wft(this.gl,{debugWebGL:c,traceWebGL:h}),we.warn("WebGL debug mode activated. Performance reduced.")(),i.debugWebGL&&(we.level=Math.max(we.level,1)))}destroy(){!this.props._reuseDevices&&!this._reused&&delete this.gl.device}get isLost(){return this.gl.isContextLost()}createCanvasContext(i){throw new Error("WebGL only supports a single canvas")}createBuffer(i){const n=this._normalizeBufferProps(i);return new n_(this,n)}createTexture(i){return new r_(this,i)}createExternalTexture(i){throw new Error("createExternalTexture() not implemented")}createSampler(i){return new AI(this,i)}createShader(i){return new Pft(this,i)}createFramebuffer(i){return new i_(this,i)}createVertexArray(i){return new JB(this,i)}createTransformFeedback(i){return new Idt(this,i)}createQuerySet(i){return new Edt(this,i)}createRenderPipeline(i){return new gdt(this,i)}beginRenderPass(i){return new Zft(this,i)}createComputePipeline(i){throw new Error("ComputePipeline not supported in WebGL")}beginComputePass(i){throw new Error("ComputePass not supported in WebGL")}createCommandEncoder(i={}){return new Tdt(this,i)}submit(){var i;(i=this.renderPass)==null||i.end(),this.renderPass=null}readPixelsToArrayWebGL(i,n){return Yft(i,n)}readPixelsToBufferWebGL(i,n){return Gft(i,n)}setParametersWebGL(i){y0(this.gl,i)}getParametersWebGL(i){return jV(this.gl,i)}withParametersWebGL(i,n){return y2(this.gl,i,n)}resetWebGL(){we.warn("WebGLDevice.resetWebGL is deprecated, use only for debugging")(),Yht(this.gl)}_getDeviceSpecificTextureFormatCapabilities(i){return uft(this.gl,i,this._extensions)}loseDevice(){var s;let i=!1;const r=this.getExtension("WEBGL_lose_context").WEBGL_lose_context;return r&&(i=!0,r.loseContext()),(s=this._resolveContextLost)==null||s.call(this,{reason:"destroyed",message:"Application triggered context loss"}),i}pushState(){uf.get(this.gl).push()}popState(){uf.get(this.gl).pop()}setSpectorMetadata(i,n){i.__SPECTOR_Metadata=n}getGLKey(i,n){const r=Number(i);for(const s in this.gl)if(this.gl[s]===r)return`GL.${s}`;return n!=null&&n.emptyIfUnknown?"":String(i)}getGLKeys(i){const n={emptyIfUnknown:!0};return Object.entries(i).reduce((r,[s,a])=>(r[`${s}:${this.getGLKey(s,n)}`]=`${a}:${this.getGLKey(a,n)}`,r),{})}setConstantAttributeWebGL(i,n){const r=this.limits.maxVertexAttributes;this._constants=this._constants||new Array(r).fill(null);const s=this._constants[i];switch(s&&Ddt(s,n)&&we.info(1,`setConstantAttributeWebGL(${i}) could have been skipped, value unchanged`)(),this._constants[i]=n,n.constructor){case Float32Array:Bdt(this,i,n);break;case Int32Array:Odt(this,i,n);break;case Uint32Array:Rdt(this,i,n);break;default:throw new Error("constant")}}getExtension(i){return JA(this.gl,i,this._extensions),this._extensions}}function Bdt(t,e,i){switch(i.length){case 1:t.gl.vertexAttrib1fv(e,i);break;case 2:t.gl.vertexAttrib2fv(e,i);break;case 3:t.gl.vertexAttrib3fv(e,i);break;case 4:t.gl.vertexAttrib4fv(e,i);break}}function Odt(t,e,i){t.gl.vertexAttribI4iv(e,i)}function Rdt(t,e,i){t.gl.vertexAttribI4uiv(e,i)}function Ddt(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}const Cdt={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},Pdt=t=>({drawBuffersWEBGL(e){return t.drawBuffers(e)},COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),xdt=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES(){return t.createVertexArray()},deleteVertexArrayOES(e){return t.deleteVertexArray(e)},isVertexArrayOES(e){return t.isVertexArray(e)},bindVertexArrayOES(e){return t.bindVertexArray(e)}}),Ndt=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE(...e){return t.drawArraysInstanced(...e)},drawElementsInstancedANGLE(...e){return t.drawElementsInstanced(...e)},vertexAttribDivisorANGLE(...e){return t.vertexAttribDivisor(...e)}});function Fdt(t=!0){const e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(i,n){if(i==="webgl"||i==="experimental-webgl"){const r=this.originalGetContext("webgl2",n);return r instanceof HTMLElement&&Ldt(r),r}return this.originalGetContext(i,n)}}function Ldt(t){t.getExtension("EXT_color_buffer_float");const e={...Cdt,WEBGL_disjoint_timer_query:t.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:Pdt(t),OES_vertex_array_object:xdt(t),ANGLE_instanced_arrays:Ndt(t)},i=t.getExtension;t.getExtension=function(r){const s=i.call(t,r);return s||(r in e?e[r]:null)};const n=t.getSupportedExtensions;t.getSupportedExtensions=function(){const r=n.apply(t)||[];return r==null?void 0:r.concat(Object.keys(e))}}const Qb=1;class Udt extends rat{constructor(){super();rt(this,"type","webgl");Bu.defaultProps={...Bu.defaultProps,...ZB},hA.adapter=this}isSupported(){return typeof WebGL2RenderingContext<"u"}enforceWebGL2(i){Fdt(i)}async attach(i){if(i instanceof hA)return i;if((i==null?void 0:i.device)instanceof Bu)return i.device;if(!kdt(i))throw new Error("Invalid WebGL2RenderingContext");return new hA({_handle:i,createCanvasContext:{canvas:i.canvas,autoResize:!1}})}async create(i={}){we.groupCollapsed(Qb,"WebGLDevice created")();const n=[];(i.debugWebGL||i.debug)&&n.push(Sft()),i.debugSpectorJS&&n.push(bft(i));const r=await Promise.allSettled(n);for(const o of r)o.status==="rejected"&&we.error(`Failed to initialize debug libraries ${o.reason}`)();const s=new hA(i),a=`${s._reused?"Reusing":"Created"} device with WebGL2 ${s.debug?"debug ":""}context: ${s.info.vendor}, ${s.info.renderer} for canvas: ${s.canvasContext.id}`;return we.probe(Qb,a)(),we.table(Qb,s.info)(),we.groupEnd(Qb)(),s}}function kdt(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}const sL=new Udt;function yu(){}const jdt=({isDragging:t})=>t?"grabbing":"grab",JV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:yu,onWebGLInitialized:yu,onResize:yu,onViewStateChange:yu,onInteractionStateChange:yu,onBeforeRender:yu,onAfterRender:yu,onLoad:yu,onError:t=>Ji.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:jdt,getTooltip:null,debug:!1,drawPickingColors:!1};class S_{constructor(e){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new IT({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const s=n.offsetCenter;if(!s)return;r.x=s.x,r.y=s.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n},this._onEvent=n=>{const r=nI[n.type],s=n.offsetCenter;if(!r||!s||!this.layerManager)return;const a=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:s.x,y:s.y,layers:a,viewports:this.getViewports(s)},this._lastPointerDownInfo),{layer:l}=o,c=l&&(l[r]||l.props[r]),h=this.props[r];let A=!1;c&&(A=c.call(l,o,n)),A||(h==null||h(o,n),this.widgetManager.onEvent(o,n))},this._onPointerDown=n=>{var a;if(((a=this.device)==null?void 0:a.type)==="webgpu")return;const r=n.offsetCenter,s=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=s.result[0]||s.emptyInfo},this.props={...JV,...e},e=this.props,e.viewState&&e.initialViewState&&Ji.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,e.device&&(this.device=e.device);let i=this.device;!i&&e.gl&&(e.gl instanceof WebGLRenderingContext&&Ji.error("WebGL1 context not supported.")(),i=sL.attach(e.gl)),i||(i=jM.createDevice({type:"best-available",_reuseDevices:!0,adapters:[sL],...e.deviceProps,createCanvasContext:{canvas:this._createCanvas(e),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(i,e),this.setProps(e),e._typedArrayManagerProps&&KA.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,i,n,r,s,a,o,l,c,h;(e=this.animationLoop)==null||e.stop(),(i=this.animationLoop)==null||i.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)==null||n.finalize(),this.layerManager=null,(r=this.viewManager)==null||r.finalize(),this.viewManager=null,(s=this.effectManager)==null||s.finalize(),this.effectManager=null,(a=this.deckRenderer)==null||a.finalize(),this.deckRenderer=null,(o=this.deckPicker)==null||o.finalize(),this.deckPicker=null,(l=this.eventManager)==null||l.destroy(),this.eventManager=null,(c=this.widgetManager)==null||c.finalize(),this.widgetManager=null,!this.props.canvas&&!this.props.device&&!this.props.gl&&this.canvas&&((h=this.canvas.parentElement)==null||h.removeChild(this.canvas),this.canvas=null)}setProps(e){var n;this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Ji.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Ji.removed("onLayerClick","onClick")(),e.initialViewState&&!Oo(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const i=Object.create(this.props);Object.assign(i,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),(n=this.animationLoop)==null||n.setProps(i),this.layerManager&&(this.viewManager.setProps(i),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(i),this.effectManager.setProps(i),this.deckRenderer.setProps(i),this.deckPicker.setProps(i),this.widgetManager.setProps(i)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let i=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(e),r=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),a=this.deckRenderer.needsRedraw(e);return i=i||n||r||s||a,i}redraw(e){if(!this.layerManager)return;let i=this.needsRedraw({clearRedrawFlags:!0});i=e||i,i&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(i):this._drawLayers(i))}get isInitialized(){return this.viewManager!==null}getViews(){return on(this.viewManager),this.viewManager.views}getViewports(e){return on(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const i=this._pick("pickObject","pickObject Time",e).result;return i.length?i[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,i=!1){for(const n in e)this.layerManager.resourceManager.add({resourceId:n,data:e[n],forceUpdate:i})}_removeResources(e){for(const i of e)this.layerManager.resourceManager.remove(i)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_addDefaultShaderModule(e){this.layerManager.addDefaultShaderModule(e)}_removeDefaultShaderModule(e){var i;(i=this.layerManager)==null||i.removeDefaultShaderModule(e)}_pick(e,i,n){on(this.deckPicker);const{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(i).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return r.get(i).timeEnd(),s}_createCanvas(e){let i=e.canvas;return typeof i=="string"&&(i=document.getElementById(i),on(i)),i||(i=document.createElement("canvas"),i.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(i)),Object.assign(i.style,e.style),i}_setCanvasSize(e){var r;if(!this.canvas)return;const{width:i,height:n}=e;if(i||i===0){const s=Number.isFinite(i)?`${i}px`:i;this.canvas.style.width=s}if(n||n===0){const s=Number.isFinite(n)?`${n}px`:n;this.canvas.style.position=((r=e.style)==null?void 0:r.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var r,s;const{canvas:e}=this;if(!e)return;const i=e.clientWidth??e.width,n=e.clientHeight??e.height;(i!==this.width||n!==this.height)&&(this.width=i,this.height=n,(r=this.viewManager)==null||r.setProps({width:i,height:n}),(s=this.layerManager)==null||s.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:n}))}_createAnimationLoop(e,i){const{gl:n,onError:r,useDevicePixels:s}=i;return new Wut({device:e,useDevicePixels:s,autoResizeDrawingBuffer:!n,autoResizeViewport:!1,onInitialize:a=>this._setDevice(a.device),onRender:this._onRenderFrame.bind(this),onError:r})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){const{views:e}=this.props,i=Array.isArray(e)?e:e?[e]:[new GB({id:"default-view"})];return i.length&&this.props.controller&&(i[0].props.controller=this.props.controller),i}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){var i,n,r,s;if(((i=this.device)==null?void 0:i.type)==="webgpu")return;const{_pickRequest:e}=this;if(e.event){const{result:a,emptyInfo:o}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=a.length>0;let l=o,c=!1;for(const h of a)l=h,c=((n=h.layer)==null?void 0:n.onHover(h,e.event))||c;c||((s=(r=this.props).onHover)==null||s.call(r,l,e.event),this.widgetManager.onHover(l,e.event)),e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(e){var r,s;if(this.device=e,!this.animationLoop)return;this.canvas||(this.canvas=(r=this.device.canvasContext)==null?void 0:r.canvas),this.device.type==="webgl"&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device.type==="webgl"&&this.props.onWebGLInitialized(this.device.gl);const i=new OV;i.play(),this.animationLoop.attachTimeline(i),this.eventManager=new _ct(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(MF).map(a=>{var b;const[o,l,c,h]=MF[a],A=(b=this.props.eventRecognizerOptions)==null?void 0:b[a],m={...l,...A,event:a};return{recognizer:new o(m),recognizeWith:c,requestFailure:h}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const a in nI)this.eventManager.on(a,this._onEvent);this.viewManager=new ght({timeline:i,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new Aht(this.device,{deck:this,stats:this.stats,viewport:n,timeline:i}),this.effectManager=new Oht({deck:this,device:this.device}),this.deckRenderer=new Cht(this.device),this.deckPicker=new Uht(this.device),this.widgetManager=new zht({deck:this,parentElement:(s=this.canvas)==null?void 0:s.parentElement}),this.widgetManager.addDefault(new $ht),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,i){var a;const{device:n,gl:r}=this.layerManager.context;this.props.onBeforeRender({device:n,gl:r});const s={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...i};(a=this.deckRenderer)==null||a.renderLayers(s),s.pass==="screen"&&this.widgetManager.onRedraw({viewports:s.viewports,layers:s.layers}),this.props.onAfterRender({device:n,gl:r})}_onRenderFrame(){var e;this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Ji.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),((e=this.device)==null?void 0:e.type)!=="webgpu"&&this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const i=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:i},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const i=this.animationLoop.stats;e.get("GPU Time").addTime(i.get("GPU Time").lastTiming),e.get("CPU Time").addTime(i.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:i}=this;e.fps=i.get("frameRate").getHz(),e.setPropsTime=i.get("setProps Time").time,e.updateAttributesTime=i.get("Update Attributes").time,e.framesRedrawn=i.get("Redraw Count").count,e.pickTime=i.get("pickObject Time").time+i.get("pickMultipleObjects Time").time+i.get("pickObjects Time").time,e.pickCount=i.get("Pick Count").count,e.gpuTime=i.get("GPU Time").time,e.cpuTime=i.get("CPU Time").time,e.gpuTimePerFrame=i.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=i.get("CPU Time").getAverageTime();const n=jM.stats.get("Memory Usage");e.bufferMemory=n.get("Buffer Memory").count,e.textureMemory=n.get("Texture Memory").count,e.renderbufferMemory=n.get("Renderbuffer Memory").count,e.gpuMemory=n.get("GPU Memory").count}}S_.defaultProps=JV;S_.VERSION=ust;function zdt(t){switch(t){case"float64":return Float64Array;case"uint8":case"unorm8":return Uint8ClampedArray;default:return Oz(t)}}const Vdt=Bz;function Kb(t,e,i){const n=i==="webgpu"&&e.type==="uint8"?"unorm8":e.type;return{attribute:t,format:e.size>1?`${n}x${e.size}`:e.type,byteOffset:e.offset||0}}function of(t){return t.stride||t.size*t.bytesPerElement}function $dt(t,e){return t.type===e.type&&t.size===e.size&&of(t)===of(e)&&(t.offset||0)===(e.offset||0)}function gI(t,e){e.offset&&Ji.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const i=of(t),n=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,r=e.elementOffset||0,s=n*i+r*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:i}}function Wdt(t,e){const i=gI(t,e);return{high:i,low:{...i,offset:i.offset+t.size*4}}}class Hdt{constructor(e,i,n){this._buffer=null,this.device=e,this.id=i.id||"",this.size=i.size||1;const r=i.logicalType||i.type,s=r==="float64";let{defaultValue:a}=i;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let o;s?o="float32":!r&&i.isIndexed?o="uint32":o=r||"float32";let l=zdt(r||o);this.doublePrecision=s,s&&i.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...i,defaultType:l,defaultValue:a,logicalType:r,type:o,normalized:o.includes("norm"),size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1}}get isConstant(){return this.state.constant}get buffer(){return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*of(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),KA.release(this.state.allocatedValue)}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(e=this.id,i=null){const n={};if(this.state.constant){const r=this.value;if(i){const s=gI(this.getAccessor(),i),a=s.offset/r.BYTES_PER_ELEMENT,o=s.size||this.size;n[e]=r.subarray(a,a+o)}else n[e]=r}else n[e]=this.getBuffer();return this.doublePrecision&&(this.value instanceof Float64Array?n[`${e}64Low`]=n[e]:n[`${e}64Low`]=new Float32Array(this.size)),n}_getBufferLayout(e=this.id,i=null){const n=this.getAccessor(),r=[],s={name:this.id,byteStride:of(n),attributes:r};if(this.doublePrecision){const a=Wdt(n,i||{});r.push(Kb(e,{...n,...a.high},this.device.type),Kb(`${e}64Low`,{...n,...a.low},this.device.type))}else if(i){const a=gI(n,i);r.push(Kb(e,{...n,...a},this.device.type))}else r.push(Kb(e,n,this.device.type));return s}setAccessor(e){this.state.bufferAccessor=e}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const i=Array.from(this.value);e=[i,i]}else{const{value:i,numInstances:n,size:r}=this,s=n*r;if(i&&s&&i.length>=s){const a=new Array(r).fill(1/0),o=new Array(r).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<r;c++){const h=i[l++];h<a[c]&&(a[c]=h),h>o[c]&&(o[c]=h)}e=[a,o]}}return this.state.bounds=e,e}setData(e){const{state:i}=this;let n;ArrayBuffer.isView(e)?n={value:e}:e instanceof Dn?n={buffer:e}:n=e;const r={...this.settings,...n};if(ArrayBuffer.isView(n.value)){if(!n.type)if(this.doublePrecision&&n.value instanceof Float64Array)r.type="float32";else{const a=Vdt(n.value);r.type=r.normalized?a.replace("int","norm"):a}r.bytesPerElement=n.value.BYTES_PER_ELEMENT,r.stride=of(r)}if(i.bounds=null,n.constant){let s=n.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!i.constant||!this._areValuesEqual(s,this.value)))return!1;i.externalBuffer=null,i.constant=!0,this.value=ArrayBuffer.isView(s)?s:new Float32Array(s)}else if(n.buffer){const s=n.buffer;i.externalBuffer=s,i.constant=!1,this.value=n.value||null}else if(n.value){this._checkExternalBuffer(n);let s=n.value;i.externalBuffer=null,i.constant=!1,this.value=s;let{buffer:a}=this;const o=of(r),l=(r.vertexOffset||0)*o;if(this.doublePrecision&&s instanceof Float64Array&&(s=N3(s,r)),this.settings.isIndexed){const h=this.settings.defaultType;s.constructor!==h&&(s=new h(s))}const c=s.byteLength+l+o*2;(!a||a.byteLength<c)&&(a=this._createBuffer(c)),a.write(s,l)}return this.setAccessor(r),!0}updateSubBuffer(e={}){this.state.bounds=null;const i=this.value,{startOffset:n=0,endOffset:r}=e;this.buffer.write(this.doublePrecision&&i instanceof Float64Array?N3(i,{size:this.size,startIndex:n,endIndex:r}):i.subarray(n,r),n*i.BYTES_PER_ELEMENT+this.byteOffset)}allocate(e,i=!1){const{state:n}=this,r=n.allocatedValue,s=KA.allocate(r,e+1,{size:this.size,type:this.settings.defaultType,copy:i});this.value=s;const{byteOffset:a}=this;let{buffer:o}=this;return(!o||o.byteLength<s.byteLength+a)&&(o=this._createBuffer(s.byteLength+a),i&&r&&o.write(r instanceof Float64Array?N3(r,this):r,a)),n.allocatedValue=s,n.constant=!1,n.externalBuffer=null,this.setAccessor(this.settings),!0}_checkExternalBuffer(e){const{value:i}=e;if(!ArrayBuffer.isView(i))throw new Error(`Attribute ${this.id} value is not TypedArray`);const n=this.settings.defaultType;let r=!1;if(this.doublePrecision&&(r=i.BYTES_PER_ELEMENT<4),r)throw new Error(`Attribute ${this.id} does not support ${i.constructor.name}`);!(i instanceof n)&&this.settings.normalized&&!("normalized"in e)&&Ji.warn(`Attribute ${this.id} is normalized`)()}normalizeConstant(e){switch(this.settings.type){case"snorm8":return new Float32Array(e).map(i=>(i+128)/255*2-1);case"snorm16":return new Float32Array(e).map(i=>(i+32768)/65535*2-1);case"unorm8":return new Float32Array(e).map(i=>i/255);case"unorm16":return new Float32Array(e).map(i=>i/65535);default:return e}}_normalizeValue(e,i,n){const{defaultValue:r,size:s}=this.settings;if(Number.isFinite(e))return i[n]=e,i;if(!e){let a=s;for(;--a>=0;)i[n+a]=r[a];return i}switch(s){case 4:i[n+3]=Number.isFinite(e[3])?e[3]:r[3];case 3:i[n+2]=Number.isFinite(e[2])?e[2]:r[2];case 2:i[n+1]=Number.isFinite(e[1])?e[1]:r[1];case 1:i[n+0]=Number.isFinite(e[0])?e[0]:r[0];break;default:let a=s;for(;--a>=0;)i[n+a]=Number.isFinite(e[a])?e[a]:r[a]}return i}_areValuesEqual(e,i){if(!e||!i)return!1;const{size:n}=this;for(let r=0;r<n;r++)if(e[r]!==i[r])return!1;return!0}_createBuffer(e){var r;this._buffer&&this._buffer.destroy();const{isIndexed:i,type:n}=this.settings;return this._buffer=this.device.createBuffer({...(r=this._buffer)==null?void 0:r.props,id:this.id,usage:(i?Dn.INDEX:Dn.VERTEX)|Dn.COPY_DST,indexType:i?n:void 0,byteLength:e}),this._buffer}}const aL=[],oL=[];function p0(t,e=0,i=1/0){let n=aL;const r={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?n=t:t.length>0&&(oL.length=t.length,n=oL):n=aL,(e>0||Number.isFinite(i))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(e,i),r.index=e-1),{iterable:n,objectInfo:r}}function t$(t){return t&&t[Symbol.asyncIterator]}function e$(t,e){const{size:i,stride:n,offset:r,startIndices:s,nested:a}=e,o=t.BYTES_PER_ELEMENT,l=n?n/o:i,c=r?r/o:0,h=Math.floor((t.length-c)/l);return(A,{index:m,target:b})=>{if(!s){const O=m*l+c;for(let D=0;D<i;D++)b[D]=t[O+D];return b}const S=s[m],M=s[m+1]||h;let I;if(a){I=new Array(M-S);for(let O=S;O<M;O++){const D=O*l+c;b=new Array(i);for(let B=0;B<i;B++)b[B]=t[D+B];I[O-S]=b}}else if(l===i)I=t.subarray(S*i+c,M*i+c);else{I=new t.constructor((M-S)*i);let O=0;for(let D=S;D<M;D++){const B=D*l+c;for(let P=0;P<i;P++)I[O++]=t[B+P]}}return I}}const qdt=[],wv=[[0,1/0]];function Ydt(t,e){if(t===wv||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const i=[],n=t.length;let r=0;for(let s=0;s<n;s++){const a=t[s];a[1]<e[0]?(i.push(a),r=s+1):a[0]>e[1]?i.push(a):e=[Math.min(a[0],e[0]),Math.max(a[1],e[1])]}return i.splice(r,0,e),i}const Gdt={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function i$(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const i=t.type||"interpolation";return{...Gdt[i],...e,...t,type:i}}class n$ extends Hdt{constructor(e,i){super(e,i,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,layoutChanged:!1,updateRanges:wv}),this.constant=!1,this.settings.update=i.update||(i.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const i=this.state.needsRedraw;return this.state.needsRedraw=i&&!e,i}layoutChanged(){return this.state.layoutChanged}setAccessor(e){var i;(i=this.state).layoutChanged||(i.layoutChanged=!$dt(e,this.getAccessor())),super.setAccessor(e)}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:i}=this.settings,n=this.settings.transition,r=Array.isArray(i)?e[i.find(s=>e[s])]:e[i];return i$(r,n)}setNeedsUpdate(e=this.id,i){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),i){const{startRow:n=0,endRow:r=1/0}=i;this.state.updateRanges=Ydt(this.state.updateRanges,[n,r])}else this.state.updateRanges=wv}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=qdt}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:i,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(e,i.updateRanges!==wv),!0):!1}updateBuffer({numInstances:e,data:i,props:n,context:r}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:a,noAlloc:o}}=this;let l=!0;if(a){for(const[c,h]of s)a.call(r,this,{data:i,startRow:c,endRow:h,props:n,numInstances:e});if(this.value)if(this.constant||!this.buffer||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,h]of s){const A=Number.isFinite(c)?this.getVertexOffset(c):0,m=Number.isFinite(h)?this.getVertexOffset(h):o||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:A,endOffset:m})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return this.device.type==="webgpu"||e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:i}=this;return e?(this.clearNeedsUpdate(),i.lastExternalBuffer===e||(i.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(i.lastExternalBuffer=null,!1)}setBinaryValue(e,i=null){const{state:n,settings:r}=this;if(!e)return n.binaryValue=null,n.binaryAccessor=null,!1;if(r.noAlloc)return!1;if(n.binaryValue===e)return this.clearNeedsUpdate(),!0;if(n.binaryValue=e,this.setNeedsRedraw(),r.transform||i!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const a=e;on(ArrayBuffer.isView(a.value),`invalid ${r.accessor}`);const o=!!a.size&&a.size!==this.size;return n.binaryAccessor=e$(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:i,nested:o}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:i}=this;return(i?e<i.length?i[e]:this.numInstances:e)*this.size}getValue(){const e=this.settings.shaderAttributes,i=super.getValue();if(!e)return i;for(const n in e)Object.assign(i,super.getValue(n,e[n]));return i}getBufferLayout(e){this.state.layoutChanged=!1;const i=this.settings.shaderAttributes,n=super._getBufferLayout(),{stepMode:r}=this.settings;if(r==="dynamic"?n.stepMode=e?e.isInstanced?"instance":"vertex":"instance":n.stepMode=r??"vertex",!i)return n;for(const s in i){const a=super._getBufferLayout(s,i[s]);n.attributes.push(...a.attributes)}return n}_autoUpdater(e,{data:i,startRow:n,endRow:r,props:s,numInstances:a}){if(e.constant&&this.context.device.type!=="webgpu")return;const{settings:o,state:l,value:c,size:h,startIndices:A}=e,{accessor:m,transform:b}=o;let S=l.binaryAccessor||(typeof m=="function"?m:s[m]);typeof S!="function"&&(S=()=>S),on(typeof S=="function",`accessor "${m}" is not a function`);let M=e.getVertexOffset(n);const{iterable:I,objectInfo:O}=p0(i,n,r);for(const D of I){O.index++;let B=S(D,O);if(b&&(B=b.call(this,B)),A){const P=(O.index<A.length-1?A[O.index+1]:a)-A[O.index];if(B&&Array.isArray(B[0])){let j=M;for(const N of B)e._normalizeValue(N,c,j),j+=h}else B&&B.length>h?c.set(B,M):(e._normalizeValue(B,O.target,0),cht({target:c,source:O.target,start:M,count:P}));M+=P*h}else e._normalizeValue(B,c,M),M+=h}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error(`Attribute ${this.id} missing update or accessor`)}_checkAttributeArray(){const{value:e}=this,i=Math.min(4,this.size);if(e&&e.length>=i){let n=!0;switch(i){case 4:n=n&&Number.isFinite(e[3]);case 3:n=n&&Number.isFinite(e[2]);case 2:n=n&&Number.isFinite(e[1]);case 1:n=n&&Number.isFinite(e[0]);break;default:n=!1}if(!n)throw new Error(`Illegal attribute generated for ${this.id}`)}}}function W3(t){const{source:e,target:i,start:n=0,size:r,getData:s}=t,a=t.end||i.length,o=e.length,l=a-n;if(o>l){i.set(e.subarray(0,l),n);return}if(i.set(e,n),!s)return;let c=o;for(;c<l;){const h=s(c,e);for(let A=0;A<r;A++)i[n+c]=h[A]||0,c++}}function Xdt({source:t,target:e,size:i,getData:n,sourceStartIndices:r,targetStartIndices:s}){if(!r||!s)return W3({source:t,target:e,size:i,getData:n}),e;let a=0,o=0;const l=n&&((h,A)=>n(h+o,A)),c=Math.min(r.length,s.length);for(let h=1;h<c;h++){const A=r[h]*i,m=s[h]*i;W3({source:t.subarray(a,A),target:e,start:o,end:m,size:i,getData:l}),a=A,o=m}return o<e.length&&W3({source:[],target:e,start:o,size:i,getData:l}),e}function Qdt(t){const{device:e,settings:i,value:n}=t,r=new n$(e,i);return r.setData({value:n instanceof Float64Array?new Float64Array(0):new Float32Array(0),normalized:i.normalized}),r}function r$(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error(`No defined attribute type for size "${t}"`)}}function s$(t){switch(t){case 1:return"float32";case 2:return"float32x2";case 3:return"float32x3";case 4:return"float32x4";default:throw new Error("invalid type size")}}function a$(t){t.push(t.shift())}function Kdt(t,e){const{doublePrecision:i,settings:n,value:r,size:s}=t,a=i&&r instanceof Float64Array?2:1;let o=0;const{shaderAttributes:l}=t.settings;if(l)for(const c of Object.values(l))o=Math.max(o,c.vertexOffset??0);return(n.noAlloc?r.length:(e+o)*s)*a}function o$({device:t,source:e,target:i}){return(!i||i.byteLength<e.byteLength)&&(i==null||i.destroy(),i=t.createBuffer({byteLength:e.byteLength,usage:e.usage})),i}function l$({device:t,buffer:e,attribute:i,fromLength:n,toLength:r,fromStartIndices:s,getData:a=o=>o}){const o=i.doublePrecision&&i.value instanceof Float64Array?2:1,l=i.size*o,c=i.byteOffset,h=i.settings.bytesPerElement<4?c/i.settings.bytesPerElement*4:c,A=i.startIndices,m=s&&A,b=i.isConstant;if(!m&&e&&n>=r)return e;const S=i.value instanceof Float64Array?Float32Array:i.value.constructor,M=b?i.value:new S(i.getBuffer().readSyncWebGL(c,r*S.BYTES_PER_ELEMENT).buffer);if(i.settings.normalized&&!b){const B=a;a=(P,j)=>i.normalizeConstant(B(P,j))}const I=b?(B,P)=>a(M,P):(B,P)=>a(M.subarray(B+c,B+c+l),P),O=e?new Float32Array(e.readSyncWebGL(h,n*4).buffer):new Float32Array(0),D=new Float32Array(r);return Xdt({source:O,target:D,sourceStartIndices:s,targetStartIndices:A,size:l,getData:I}),(!e||e.byteLength<D.byteLength+h)&&(e==null||e.destroy(),e=t.createBuffer({byteLength:D.byteLength+h,usage:35050})),e.write(D,h),e}class c${constructor({device:e,attribute:i,timeline:n}){this.buffers=[],this.currentLength=0,this.device=e,this.transition=new CT(n),this.attribute=i,this.attributeInTransition=Qdt(i),this.currentStartIndices=i.startIndices}get inProgress(){return this.transition.inProgress}start(e,i,n=1/0){this.settings=e,this.currentStartIndices=this.attribute.startIndices,this.currentLength=Kdt(this.attribute,i),this.transition.start({...e,duration:n})}update(){const e=this.transition.update();return e&&this.onUpdate(),e}setBuffer(e){this.attributeInTransition.setData({buffer:e,normalized:this.attribute.settings.normalized,value:this.attributeInTransition.value})}cancel(){this.transition.cancel()}delete(){this.cancel();for(const e of this.buffers)e.destroy();this.buffers.length=0}}class Zdt extends c${constructor({device:e,attribute:i,timeline:n}){super({device:e,attribute:i,timeline:n}),this.type="interpolation",this.transform=iAt(e,i)}start(e,i){const n=this.currentLength,r=this.currentStartIndices;if(super.start(e,i,e.duration),e.duration<=0){this.transition.cancel();return}const{buffers:s,attribute:a}=this;a$(s),s[0]=l$({device:this.device,buffer:s[0],attribute:a,fromLength:n,toLength:this.currentLength,fromStartIndices:r,getData:e.enter}),s[1]=o$({device:this.device,source:s[0],target:s[1]}),this.setBuffer(s[1]);const{transform:o}=this,l=o.model;let c=Math.floor(this.currentLength/a.size);u$(a)&&(c/=2),l.setVertexCount(c),a.isConstant?(l.setAttributes({aFrom:s[0]}),l.setConstantAttributes({aTo:a.value})):l.setAttributes({aFrom:s[0],aTo:a.getBuffer()}),o.transformFeedback.setBuffers({vCurrent:s[1]})}onUpdate(){const{duration:e,easing:i}=this.settings,{time:n}=this.transition;let r=n/e;i&&(r=i(r));const{model:s}=this.transform,a={time:r};s.shaderInputs.setProps({interpolation:a}),this.transform.run({discard:!0})}delete(){super.delete(),this.transform.destroy()}}const Jdt=`uniform interpolationUniforms {
  float time;
} interpolation;
`,lL={name:"interpolation",vs:Jdt,uniformTypes:{time:"f32"}},tAt=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, interpolation.time);
  gl_Position = vec4(0.0);
}
`,eAt=`#version 300 es
#define SHADER_NAME interpolation-transition-vertex-shader

in ATTRIBUTE_TYPE aFrom;
in ATTRIBUTE_TYPE aFrom64Low;
in ATTRIBUTE_TYPE aTo;
in ATTRIBUTE_TYPE aTo64Low;
out ATTRIBUTE_TYPE vCurrent;
out ATTRIBUTE_TYPE vCurrent64Low;

vec2 mix_fp64(vec2 a, vec2 b, float x) {
  vec2 range = sub_fp64(b, a);
  return sum_fp64(a, mul_fp64(range, vec2(x, 0.0)));
}

void main(void) {
  for (int i=0; i<ATTRIBUTE_SIZE; i++) {
    vec2 value = mix_fp64(vec2(aFrom[i], aFrom64Low[i]), vec2(aTo[i], aTo64Low[i]), interpolation.time);
    vCurrent[i] = value.x;
    vCurrent64Low[i] = value.y;
  }
  gl_Position = vec4(0.0);
}
`;function u$(t){return t.doublePrecision&&t.value instanceof Float64Array}function iAt(t,e){const i=e.size,n=r$(i),r=s$(i),s=e.getBufferLayout();return u$(e)?new T_(t,{vs:eAt,bufferLayout:[{name:"aFrom",byteStride:8*i,attributes:[{attribute:"aFrom",format:r,byteOffset:0},{attribute:"aFrom64Low",format:r,byteOffset:4*i}]},{name:"aTo",byteStride:8*i,attributes:[{attribute:"aTo",format:r,byteOffset:0},{attribute:"aTo64Low",format:r,byteOffset:4*i}]}],modules:[flt,lL],defines:{ATTRIBUTE_TYPE:n,ATTRIBUTE_SIZE:i},moduleSettings:{},varyings:["vCurrent","vCurrent64Low"],bufferMode:35980,disableWarnings:!0}):new T_(t,{vs:tAt,bufferLayout:[{name:"aFrom",format:r},{name:"aTo",format:s.attributes[0].format}],modules:[lL],defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"],disableWarnings:!0})}class nAt extends c${constructor({device:e,attribute:i,timeline:n}){super({device:e,attribute:i,timeline:n}),this.type="spring",this.texture=cAt(e),this.framebuffer=uAt(e,this.texture),this.transform=lAt(e,i)}start(e,i){const n=this.currentLength,r=this.currentStartIndices;super.start(e,i);const{buffers:s,attribute:a}=this;for(let l=0;l<2;l++)s[l]=l$({device:this.device,buffer:s[l],attribute:a,fromLength:n,toLength:this.currentLength,fromStartIndices:r,getData:e.enter});s[2]=o$({device:this.device,source:s[0],target:s[2]}),this.setBuffer(s[1]);const{model:o}=this.transform;o.setVertexCount(Math.floor(this.currentLength/a.size)),a.isConstant?o.setConstantAttributes({aTo:a.value}):o.setAttributes({aTo:a.getBuffer()})}onUpdate(){const{buffers:e,transform:i,framebuffer:n,transition:r}=this,s=this.settings;i.model.setAttributes({aPrev:e[0],aCur:e[1]}),i.transformFeedback.setBuffers({vNext:e[2]});const a={stiffness:s.stiffness,damping:s.damping};i.model.shaderInputs.setProps({spring:a}),i.run({framebuffer:n,discard:!1,parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]}),a$(e),this.setBuffer(e[1]),this.device.readPixelsToArrayWebGL(n)[0]>0||r.end()}delete(){super.delete(),this.transform.destroy(),this.texture.destroy(),this.framebuffer.destroy()}}const rAt=`uniform springUniforms {
  float damping;
  float stiffness;
} spring;
`,sAt={name:"spring",vs:rAt,uniformTypes:{damping:"f32",stiffness:"f32"}},aAt=`#version 300 es
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

in ATTRIBUTE_TYPE aPrev;
in ATTRIBUTE_TYPE aCur;
in ATTRIBUTE_TYPE aTo;
out ATTRIBUTE_TYPE vNext;
out float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE force = delta * spring.stiffness;
  ATTRIBUTE_TYPE resistance = velocity * spring.damping;
  return force - resistance + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,oAt=`#version 300 es
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

in float vIsTransitioningFlag;

out vec4 fragColor;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  fragColor = vec4(1.0);
}`;function lAt(t,e){const i=r$(e.size),n=s$(e.size);return new T_(t,{vs:aAt,fs:oAt,bufferLayout:[{name:"aPrev",format:n},{name:"aCur",format:n},{name:"aTo",format:e.getBufferLayout().attributes[0].format}],varyings:["vNext"],modules:[sAt],defines:{ATTRIBUTE_TYPE:i},parameters:{depthCompare:"always",blendColorOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaOperation:"max",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}})}function cAt(t){return t.createTexture({data:new Uint8Array(4),format:"rgba8unorm",mipmaps:!1,width:1,height:1})}function uAt(t,e){return t.createFramebuffer({id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,colorAttachments:[e]})}const hAt={interpolation:Zdt,spring:nAt};class fAt{constructor(e,{id:i,timeline:n}){if(!e)throw new Error("AttributeTransitionManager is constructed without device");this.id=i,this.device=e,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:i,numInstances:n}){this.numInstances=n||1;for(const r in e){const s=e[r],a=s.getTransitionSetting(i);a&&this._updateAttribute(r,s,a)}for(const r in this.transitions){const s=e[r];(!s||!s.getTransitionSetting(i))&&this._removeTransition(r)}}hasAttribute(e){const i=this.transitions[e];return i&&i.inProgress}getAttributes(){const e={};for(const i in this.transitions){const n=this.transitions[i];n.inProgress&&(e[i]=n.attributeInTransition)}return e}run(){if(this.numInstances===0)return!1;for(const i in this.transitions)this.transitions[i].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].delete(),delete this.transitions[e]}_updateAttribute(e,i,n){const r=this.transitions[e];let s=!r||r.type!==n.type;if(s){r&&this._removeTransition(e);const a=hAt[n.type];a?this.transitions[e]=new a({attribute:i,timeline:this.timeline,device:this.device}):(Ji.error(`unsupported transition type '${n.type}'`)(),s=!1)}(s||i.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(n,this.numInstances))}}const cL="attributeManager.invalidate",dAt="attributeManager.updateStart",AAt="attributeManager.updateEnd",gAt="attribute.updateStart",yAt="attribute.allocate",pAt="attribute.updateEnd";class tO{constructor(e,{id:i="attribute-manager",stats:n,timeline:r}={}){this.mergeBoundsMemoized=r1(Dut),this.id=i,this.device=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new fAt(e,{id:`${i}-transitions`,timeline:r}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const i=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,i&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{stepMode:"instance"})}remove(e){for(const i of e)this.attributes[i]!==void 0&&(this.attributes[i].delete(),delete this.attributes[i])}invalidate(e,i){const n=this._invalidateTrigger(e,i);as(cL,this,e,n)}invalidateAll(e){for(const i in this.attributes)this.attributes[i].setNeedsUpdate(i,e);as(cL,this,"all")}update({data:e,numInstances:i,startIndices:n=null,transitions:r,props:s={},buffers:a={},context:o={}}){let l=!1;as(dAt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const h=this.attributes[c],A=h.settings.accessor;h.startIndices=n,h.numInstances=i,s[c]&&Ji.removed(`props.${c}`,`data.attributes.${c}`)(),h.setExternalBuffer(a[c])||h.setBinaryValue(typeof A=="string"?a[A]:void 0,e.startIndices)||typeof A=="string"&&!a[A]&&h.setConstantValue(s[A])||h.needsUpdate()&&(l=!0,this._updateAttribute({attribute:h,numInstances:i,data:e,props:s,context:o})),this.needsRedraw=this.needsRedraw||h.needsRedraw()}l&&as(AAt,this,i),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:i,transitions:r})}updateTransition(){const{attributeTransitionManager:e}=this,i=e.run();return this.needsRedraw=this.needsRedraw||i,i}getAttributes(){return{...this.attributes,...this.attributeTransitionManager.getAttributes()}}getBounds(e){const i=e.map(n=>{var r;return(r=this.attributes[n])==null?void 0:r.getBounds()});return this.mergeBoundsMemoized(i)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:i,attributeTransitionManager:n}=this,r={...n.getAttributes()};for(const s in i){const a=i[s];a.needsRedraw(e)&&!n.hasAttribute(s)&&(r[s]=a)}return r}getBufferLayouts(e){return Object.values(this.getAttributes()).map(i=>i.getBufferLayout(e))}_add(e,i){for(const n in e){const r=e[n],s={...r,id:n,size:r.isIndexed&&1||r.size||1,...i};this.attributes[n]=new n$(this.device,s)}this._mapUpdateTriggersToAttributes()}_mapUpdateTriggersToAttributes(){const e={};for(const i in this.attributes)this.attributes[i].getUpdateTriggers().forEach(r=>{e[r]||(e[r]=[]),e[r].push(i)});this.updateTriggers=e}_invalidateTrigger(e,i){const{attributes:n,updateTriggers:r}=this,s=r[e];return s&&s.forEach(a=>{const o=n[a];o&&o.setNeedsUpdate(o.id,i)}),s}_updateAttribute(e){const{attribute:i,numInstances:n}=e;if(as(gAt,i),i.constant){i.setConstantValue(i.value);return}i.allocate(n)&&as(yAt,i,n),i.updateBuffer(e)&&(this.needsRedraw=!0,as(pAt,i,n))}}class mAt extends CT{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:i,toValue:n,duration:r,easing:s}}=this,a=s(e/r);this._value=YA(i,n,a)}}const uL=1e-5;function hL(t,e,i,n,r){const s=e-t,o=(i-e)*r,l=-s*n;return o+l+s+e}function _At(t,e,i,n,r){if(Array.isArray(i)){const s=[];for(let a=0;a<i.length;a++)s[a]=hL(t[a],e[a],i[a],n,r);return s}return hL(t,e,i,n,r)}function fL(t,e){if(Array.isArray(t)){let i=0;for(let n=0;n<t.length;n++){const r=t[n]-e[n];i+=r*r}return Math.sqrt(i)}return Math.abs(t-e)}class bAt extends CT{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:i,damping:n,stiffness:r}=this.settings,{_prevValue:s=e,_currValue:a=e}=this;let o=_At(s,a,i,n,r);const l=fL(o,i),c=fL(o,a);l<uL&&c<uL&&(o=i,this.end()),this._prevValue=a,this._currValue=o}}const vAt={interpolation:mAt,spring:bAt};class TAt{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,i,n,r){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;i=c,this.remove(e)}if(r=i$(r),!r)return;const a=vAt[r.type];if(!a){Ji.error(`unsupported transition type '${r.type}'`)();return}const o=new a(this.timeline);o.start({...r,fromValue:i,toValue:n}),s.set(e,o)}remove(e){const{transitions:i}=this;i.has(e)&&(i.get(e).cancel(),i.delete(e))}update(){const e={};for(const[i,n]of this.transitions)n.update(),e[i]=n.value,n.inProgress||this.remove(i);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function SAt(t){const e=t[Ru];for(const i in e){const n=e[i],{validate:r}=n;if(r&&!r(t[i],n))throw new Error(`Invalid prop ${i}: ${t[i]}`)}}function wAt(t,e){const i=eO({newProps:t,oldProps:e,propTypes:t[Ru],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=IAt(t,e);let r=!1;return n||(r=EAt(t,e)),{dataChanged:n,propsChanged:i,updateTriggersChanged:r,extensionsChanged:BAt(t,e),transitionsChanged:MAt(t,e)}}function MAt(t,e){if(!t.transitions)return!1;const i={},n=t[Ru];let r=!1;for(const s in t.transitions){const a=n[s],o=a&&a.type;(o==="number"||o==="color"||o==="array")&&yI(t[s],e[s],a)&&(i[s]=!0,r=!0)}return r?i:!1}function eO({newProps:t,oldProps:e,ignoreProps:i={},propTypes:n={},triggerName:r="props"}){if(e===t)return!1;if(typeof t!="object"||t===null)return`${r} changed shallowly`;if(typeof e!="object"||e===null)return`${r} changed shallowly`;for(const s of Object.keys(t))if(!(s in i)){if(!(s in e))return`${r}.${s} added`;const a=yI(t[s],e[s],n[s]);if(a)return`${r}.${s} ${a}`}for(const s of Object.keys(e))if(!(s in i)){if(!(s in t))return`${r}.${s} dropped`;if(!Object.hasOwnProperty.call(t,s)){const a=yI(t[s],e[s],n[s]);if(a)return`${r}.${s} ${a}`}}return!1}function yI(t,e,i){let n=i&&i.equal;return n&&!n(t,e,i)||!n&&(n=t&&e&&t.equals,n&&!n.call(t,e))?"changed deeply":!n&&e!==t?"changed shallowly":null}function IAt(t,e){if(e===null)return"oldProps is null, initial diff";let i=!1;const{dataComparator:n,_dataDiff:r}=t;return n?n(t.data,e.data)||(i="Data comparator detected a change"):t.data!==e.data&&(i="A new data container was supplied"),i&&r&&(i=r(t.data,e.data)||i),i}function EAt(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&dL(t,e,"all"))return{all:!0};const i={};let n=!1;for(const r in t.updateTriggers)r!=="all"&&dL(t,e,r)&&(i[r]=!0,n=!0);return n?i:!1}function BAt(t,e){if(e===null)return!0;const i=e.extensions,{extensions:n}=t;if(n===i)return!1;if(!i||!n||n.length!==i.length)return!0;for(let r=0;r<n.length;r++)if(!n[r].equals(i[r]))return!0;return!1}function dL(t,e,i){let n=t.updateTriggers[i];n=n??{};let r=e.updateTriggers[i];return r=r??{},eO({oldProps:r,newProps:n,triggerName:i})}const OAt="count(): argument not an object",RAt="count(): argument not a container";function DAt(t){if(!PAt(t))throw new Error(OAt);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(CAt(t))return Object.keys(t).length;throw new Error(RAt)}function CAt(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function PAt(t){return t!==null&&typeof t=="object"}function AL(t,e){if(!e)return t;const i={...t,...e};if("defines"in e&&(i.defines={...t.defines,...e.defines}),"modules"in e&&(i.modules=(t.modules||[]).concat(e.modules),e.modules.some(n=>n.name==="project64"))){const n=i.modules.findIndex(r=>r.name==="project32");n>=0&&i.modules.splice(n,1)}if("inject"in e)if(!t.inject)i.inject=e.inject;else{const n={...t.inject};for(const r in e.inject)n[r]=(n[r]||"")+e.inject[r];i.inject=n}return i}const xAt={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},pI={};function NAt(t,e,i,n){if(i instanceof Zn)return i;i.constructor&&i.constructor.name!=="Object"&&(i={data:i});let r=null;i.compressed&&(r={minFilter:"linear",mipmapFilter:i.data.length>1?"nearest":"linear"});const s=e.createTexture({...i,sampler:{...xAt,...r,...n},mipmaps:!0});return pI[s.id]=t,s}function FAt(t,e){!e||!(e instanceof Zn)||pI[e.id]===t&&(e.delete(),delete pI[e.id])}const LAt={boolean:{validate(t,e){return!0},equal(t,e,i){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||mI(t)&&(t.length===3||t.length===4)},equal(t,e,i){return Oo(t,e,1)}},accessor:{validate(t,e){const i=p2(t);return i==="function"||i===p2(e.value)},equal(t,e,i){return typeof e=="function"?!0:Oo(t,e,1)}},array:{validate(t,e){return e.optional&&!t||mI(t)},equal(t,e,i){const{compare:n}=i,r=Number.isInteger(n)?n:n?1:0;return n?Oo(t,e,r):t===e}},object:{equal(t,e,i){if(i.ignore)return!0;const{compare:n}=i,r=Number.isInteger(n)?n:n?1:0;return n?Oo(t,e,r):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,i){return!i.compare&&i.ignore!==!1||t===e}},data:{transform:(t,e,i)=>{if(!t)return t;const{dataTransform:n}=i.props;return n?n(t):typeof t.shape=="string"&&t.shape.endsWith("-table")&&Array.isArray(t.data)?t.data:t}},image:{transform:(t,e,i)=>{const n=i.context;return!n||!n.device?null:NAt(i.id,n.device,t,{...e.parameters,...i.props.textureParameters})},release:(t,e,i)=>{FAt(i.id,t)}}};function UAt(t){const e={},i={},n={};for(const[r,s]of Object.entries(t)){const a=s==null?void 0:s.deprecatedFor;if(a)n[r]=Array.isArray(a)?a:[a];else{const o=kAt(r,s);e[r]=o,i[r]=o.value}}return{propTypes:e,defaultProps:i,deprecatedProps:n}}function kAt(t,e){switch(p2(e)){case"object":return Sm(t,e);case"array":return Sm(t,{type:"array",value:e,compare:!1});case"boolean":return Sm(t,{type:"boolean",value:e});case"number":return Sm(t,{type:"number",value:e});case"function":return Sm(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function Sm(t,e){return"type"in e?{name:t,...LAt[e.type],...e}:"value"in e?{name:t,type:p2(e.value),...e}:{name:t,type:"object",value:e}}function mI(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function p2(t){return mI(t)?"array":t===null?"null":typeof t}function jAt(t,e){let i;for(let s=e.length-1;s>=0;s--){const a=e[s];"extensions"in a&&(i=a.extensions)}const n=_I(t.constructor,i),r=Object.create(n);r[g2]=t,r[bf]={},r[wu]={};for(let s=0;s<e.length;++s){const a=e[s];for(const o in a)r[o]=a[o]}return Object.freeze(r),r}const zAt="_mergedDefaultProps";function _I(t,e){if(!(t instanceof PT.constructor))return{};let i=zAt;if(e)for(const r of e){const s=r.constructor;s&&(i+=`:${s.extensionName||s.name}`)}const n=h$(t,i);return n||(t[i]=VAt(t,e||[]))}function VAt(t,e){if(!t.prototype)return null;const n=Object.getPrototypeOf(t),r=_I(n),s=h$(t,"defaultProps")||{},a=UAt(s),o=Object.assign(Object.create(null),r,a.defaultProps),l=Object.assign(Object.create(null),r==null?void 0:r[Ru],a.propTypes),c=Object.assign(Object.create(null),r==null?void 0:r[k3],a.deprecatedProps);for(const h of e){const A=_I(h.constructor);A&&(Object.assign(o,A),Object.assign(l,A[Ru]),Object.assign(c,A[k3]))}return $At(o,t),HAt(o,l),WAt(o,c),o[Ru]=l,o[k3]=c,e.length===0&&!iO(t,"_propTypes")&&(t._propTypes=l),o}function $At(t,e){const i=YAt(e);Object.defineProperties(t,{id:{writable:!0,value:i}})}function WAt(t,e){for(const i in e)Object.defineProperty(t,i,{enumerable:!1,set(n){const r=`${this.id}: ${i}`;for(const s of e[i])iO(this,s)||(this[s]=n);Ji.deprecated(r,e[i].join("/"))()}})}function HAt(t,e){const i={},n={};for(const r in e){const s=e[r],{name:a,value:o}=s;s.async&&(i[a]=o,n[a]=qAt(a))}t[EA]=i,t[bf]={},Object.defineProperties(t,n)}function qAt(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||t$(e)?this[bf][t]=e:this[wu][t]=e},get(){if(this[wu]){if(t in this[wu])return this[wu][t]||this[EA][t];if(t in this[bf]){const e=this[g2]&&this[g2].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[EA][t]}}return this[EA][t]}}}function iO(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h$(t,e){return iO(t,e)&&t[e]}function YAt(t){const e=t.componentName;return e||Ji.warn(`${t.name}.componentName not specified`)(),e||t.name}let GAt=0;class PT{constructor(...e){this.props=jAt(this,e),this.id=this.props.id,this.count=GAt++}clone(e){const{props:i}=this,n={};for(const r in i[EA])r in i[wu]?n[r]=i[wu][r]:r in i[bf]&&(n[r]=i[bf][r]);return new this.constructor({...i,...n,...e})}}PT.componentName="Component";PT.defaultProps={};const XAt=Object.freeze({});class QAt{constructor(e){this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const i=this.asyncProps[e];i&&i.type&&i.type.release&&i.type.release(i.resolvedValue,i.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||XAt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const i=this.asyncProps[e];return i&&i.resolvedValue}isAsyncPropLoading(e){if(e){const i=this.asyncProps[e];return!!(i&&i.pendingLoadCount>0&&i.pendingLoadCount!==i.resolvedLoadCount)}for(const i in this.asyncProps)if(this.isAsyncPropLoading(i))return!0;return!1}reloadAsyncProp(e,i){this._watchPromise(e,Promise.resolve(i))}setAsyncProps(e){this.component=e[g2]||this.component;const i=e[wu]||{},n=e[bf]||e,r=e[EA]||{};for(const s in i){const a=i[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,a),i[s]=this.getAsyncProp(s)}for(const s in n){const a=n[s];this._createAsyncPropData(s,r[s]),this._updateAsyncProp(s,a)}}_fetch(e,i){return null}_onResolve(e,i){}_onError(e,i){}_updateAsyncProp(e,i){if(this._didAsyncInputValueChange(e,i)){if(typeof i=="string"&&(i=this._fetch(e,i)),i instanceof Promise){this._watchPromise(e,i);return}if(t$(i)){this._resolveAsyncIterable(e,i);return}this._setPropValue(e,i)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,i){const n=this.asyncProps[e];return i===n.resolvedValue||i===n.lastValue?!1:(n.lastValue=i,!0)}_setPropValue(e,i){this._freezeAsyncOldProps();const n=this.asyncProps[e];n&&(i=this._postProcessValue(n,i),n.resolvedValue=i,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(e,i,n){const r=this.asyncProps[e];r&&n>=r.resolvedLoadCount&&i!==void 0&&(this._freezeAsyncOldProps(),r.resolvedValue=i,r.resolvedLoadCount=n,this.onAsyncPropUpdated(e,i))}_watchPromise(e,i){const n=this.asyncProps[e];if(n){n.pendingLoadCount++;const r=n.pendingLoadCount;i.then(s=>{this.component&&(s=this._postProcessValue(n,s),this._setAsyncPropValue(e,s,r),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,i){if(e!=="data"){this._setPropValue(e,i);return}const n=this.asyncProps[e];if(!n)return;n.pendingLoadCount++;const r=n.pendingLoadCount;let s=[],a=0;for await(const o of i){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(o,s):s=s.concat(o),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:a,endRow:s.length}]}),a=s.length,this._setAsyncPropValue(e,s,r)}this._onResolve(e,s)}_postProcessValue(e,i){const n=e.type;return n&&this.component&&(n.release&&n.release(e.resolvedValue,n,this.component),n.transform)?n.transform(i,n,this.component):i}_createAsyncPropData(e,i){if(!this.asyncProps[e]){const r=this.component&&this.component.props[Ru];this.asyncProps[e]={type:r&&r[e],lastValue:null,resolvedValue:i,pendingLoadCount:0,resolvedLoadCount:0}}}}class KAt extends QAt{constructor({attributeManager:e,layer:i}){super(i),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,i){const n=this.layer,r=n==null?void 0:n.props.fetch;return r?r(i,{propName:e,layer:n}):super._fetch(e,i)}_onResolve(e,i){const n=this.layer;if(n){const r=n.props.onDataLoad;e==="data"&&r&&r(i,{propName:e,layer:n})}}_onError(e,i){const n=this.layer;n&&n.raiseError(i,`loading ${e} of ${this.layer}`)}}const ZAt="layer.changeFlag",JAt="layer.initialize",t0t="layer.update",e0t="layer.finalize",i0t="layer.matched",gL=2**24-1,n0t=Object.freeze([]),r0t=r1(({oldViewport:t,viewport:e})=>t.equals(e));let vo=new Uint8ClampedArray(0);const s0t={data:{type:"data",value:n0t,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:i,loaders:n,loadOptions:r,signal:s})=>{const{resourceManager:a}=i.context;r=r||i.getLoadOptions(),n=n||i.props.loaders,s&&(r={...r,fetch:{...r==null?void 0:r.fetch,signal:s}});let o=a.contains(t);return!o&&!r&&(a.add({resourceId:t,data:Kv(t,n),persistent:!1}),o=!0),o?a.subscribe({resourceId:t,onChange:l=>{var c;return(c=i.internalState)==null?void 0:c.reloadAsyncProp(e,l)},consumerId:i.id,requestId:e}):Kv(t,n,r)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:Hi.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Za extends PT{constructor(){super(...arguments),this.internalState=null,this.lifecycle=Jd.NO_STATE,this.parent=null}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){return`${this.constructor.layerName||this.constructor.name}({id: '${this.props.id}'})`}project(e){on(this.internalState);const i=this.internalState.viewport||this.context.viewport,n=BV(e,{viewport:i,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[r,s,a]=wV(n,i.pixelProjectionMatrix);return e.length===2?[r,s]:[r,s,a]}unproject(e){return on(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,i){on(this.internalState);const n=this.internalState.viewport||this.context.viewport;return Lut(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...i})}get isComposite(){return!1}get isDrawable(){return!0}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){const e=this.state;return e&&(e.models||e.model&&[e.model])||[]}setShaderModuleProps(...e){for(const i of this.getModels())i.shaderInputs.setProps(...e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===Hi.DEFAULT||e===Hi.LNGLAT||e===Hi.CARTESIAN}onHover(e,i){return this.props.onHover&&this.props.onHover(e,i)||!1}onClick(e,i){return this.props.onClick&&this.props.onClick(e,i)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,i=[]){return i[0]=e+1&255,i[1]=e+1>>8&255,i[2]=e+1>>8>>8&255,i}decodePickingColor(e){on(e instanceof Uint8Array);const[i,n,r]=e;return i+n*256+r*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:DAt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){e=AL(e,{disableWarnings:!0,modules:this.context.defaultShaderModules});for(const i of this.props.extensions)e=AL(e,i.getShaders.call(this,i));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const i=this.getAttributeManager(),{dataChanged:n}=e.changeFlags;if(n&&i)if(Array.isArray(n))for(const r of n)i.invalidateAll(r);else i.invalidateAll();if(i){const{props:r}=e,s=this.internalState.hasPickingBuffer,a=Number.isInteger(r.highlightedObjectIndex)||r.pickable||r.extensions.some(o=>o.getNeedsPickingBuffer.call(this,o));if(s!==a){this.internalState.hasPickingBuffer=a;const{pickingColors:o,instancePickingColors:l}=i.attributes,c=o||l;c&&(a&&c.constant&&(c.constant=!1,i.invalidate(c.id)),!c.value&&!a&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const n of this.getModels())n.destroy();const i=this.getAttributeManager();i&&i.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const i of this.getModels())i.draw(e.renderPass)}getPickingInfo({info:e,mode:i,sourceLayer:n}){const{index:r}=e;return r>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[r]),e}raiseError(e,i){var n,r,s,a;i&&(e=new Error(`${i}: ${e.message}`,{cause:e})),(r=(n=this.props).onError)!=null&&r.call(n,e)||(a=(s=this.context)==null?void 0:s.onError)==null||a.call(s,e,this)}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)==null?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const i=this.internalState.viewport;this.internalState.viewport=e,(!i||!r0t({oldViewport:i,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const i=this.getAttributeManager();i&&(e==="all"?i.invalidateAll():i.invalidate(e))}updateAttributes(e){let i=!1;for(const n in e)e[n].layoutChanged()&&(i=!0);for(const n of this.getModels())this._setModelAttributes(n,e,i)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const i=this.props,n=this.getNumInstances(),r=this.getStartIndices();e.update({data:i.data,numInstances:n,startIndices:r,props:i,transitions:i.transitions,buffers:i.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const i=e.update(),n=Object.create(this.props);for(const r in i)Object.defineProperty(n,r,{value:i[r]});return n}return this.props}calculateInstancePickingColors(e,{numInstances:i}){if(e.constant)return;const n=Math.floor(vo.length/4);if(this.internalState.usesPickingColorCache=!0,n<i){i>gL&&Ji.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),vo=KA.allocate(vo,i,{size:4,copy:!0,maxCount:Math.max(i,gL)});const r=Math.floor(vo.length/4),s=[0,0,0];for(let a=n;a<r;a++)this.encodePickingColor(a,s),vo[a*4+0]=s[0],vo[a*4+1]=s[1],vo[a*4+2]=s[2],vo[a*4+3]=0}e.value=vo.subarray(0,i*4)}_setModelAttributes(e,i,n=!1){var o;if(!Object.keys(i).length)return;if(n){const l=this.getAttributeManager();e.setBufferLayout(l.getBufferLayouts(e)),i=l.getAttributes()}const r=((o=e.userData)==null?void 0:o.excludeAttributes)||{},s={},a={};for(const l in i){if(r[l])continue;const c=i[l].getValue();for(const h in c){const A=c[h];A instanceof Dn?i[l].settings.isIndexed?e.setIndexBuffer(A):s[h]=A:A&&(a[h]=A)}}e.setAttributes(s),e.setConstantAttributes(a)}disablePickingIndex(e){const i=this.props.data;if(!("attributes"in i)){this._disablePickingIndex(e);return}const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,s=n||r,a=s&&i.attributes&&i.attributes[s.id];if(a&&a.value){const o=a.value,l=this.encodePickingColor(e);for(let c=0;c<i.length;c++){const h=s.getVertexOffset(c);o[h]===l[0]&&o[h+1]===l[1]&&o[h+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:i,instancePickingColors:n}=this.getAttributeManager().attributes,r=i||n;if(!r)return;const s=r.getVertexOffset(e),a=r.getVertexOffset(e+1);r.buffer.write(new Uint8Array(a-s),s)}restorePickingColors(){const{pickingColors:e,instancePickingColors:i}=this.getAttributeManager().attributes,n=e||i;n&&(this.internalState.usesPickingColorCache&&n.value.buffer!==vo.buffer&&(n.value=vo.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){on(!this.internalState),on(Number.isFinite(this.props.coordinateSystem)),as(JAt,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:"uint8",size:4,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new KAt({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Ji.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new TAt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const i of this.props.extensions)i.initializeState.call(this,this.context,i);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){as(i0t,this,this===e);const{state:i,internalState:n}=e;this!==e&&(this.internalState=n,this.state=i,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(as(t0t,this,e),!e)return;const i=this.props,n=this.context,r=this.internalState,s=n.viewport,a=this._updateUniformTransition();r.propsInTransition=a,n.viewport=r.viewport||s,this.props=a;try{const o=this._getUpdateParams(),l=this.getModels();if(n.device)this.updateState(o);else try{this.updateState(o)}catch{}for(const h of this.props.extensions)h.updateState.call(this,o,h);this.setNeedsRedraw(),this._updateAttributes();const c=this.getModels()[0]!==l[0];this._postUpdate(o,c)}finally{n.viewport=s,this.props=i,this._clearChangeFlags(),r.needsUpdate=!1,r.resetOldProps()}}_finalize(){as(e0t,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({renderPass:e,shaderModuleProps:i=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const s=this.props,a=this.context;this.props=this.internalState.propsInTransition||s;try{i&&this.setShaderModuleProps(i);const{getPolygonOffset:o}=this.props,l=o&&o(n)||[0,0];a.device instanceof hA&&a.device.setParametersWebGL({polygonOffset:l});for(const c of this.getModels())c.device.type==="webgpu"?c.setParameters({...c.parameters,...r}):c.setParameters(r);if(a.device instanceof hA)a.device.withParametersWebGL(r,()=>{const c={renderPass:e,shaderModuleProps:i,uniforms:n,parameters:r,context:a};for(const h of this.props.extensions)h.draw.call(this,c,h);this.draw(c)});else{const c={renderPass:e,shaderModuleProps:i,uniforms:n,parameters:r,context:a};for(const h of this.props.extensions)h.draw.call(this,c,h);this.draw(c)}}finally{this.props=s}}getChangeFlags(){var e;return(e=this.internalState)==null?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:i}=this.internalState;for(const r in e)if(e[r]){let s=!1;switch(r){case"dataChanged":const a=e[r],o=i[r];a&&Array.isArray(o)&&(i.dataChanged=Array.isArray(a)?o.concat(a):a,s=!0);default:i[r]||(i[r]=e[r],s=!0)}s&&as(ZAt,this,r,e)}const n=!!(i.dataChanged||i.updateTriggersChanged||i.propsChanged||i.extensionsChanged);i.propsOrDataChanged=n,i.somethingChanged=n||i.viewportChanged||i.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,i){var r;const n=wAt(e,i);if(n.updateTriggersChanged)for(const s in n.updateTriggersChanged)n.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(n.transitionsChanged)for(const s in n.transitionsChanged)this.internalState.uniformTransitions.add(s,i[s],e[s],(r=e.transitions)==null?void 0:r[s]);return this.setChangeFlags(n)}validateProps(){SAt(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const i={highlightedObjectColor:e.picked?e.color:null},{highlightColor:n}=this.props;e.picked&&typeof n=="function"&&(i.highlightColor=n(e)),this.setShaderModuleProps({picking:i}),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new tO(e.device,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,i){const{props:n,oldProps:r}=e,s=this.state.model;s!=null&&s.isInstanced&&s.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:o,highlightColor:l}=n;if(i||r.autoHighlight!==a||r.highlightedObjectIndex!==o||r.highlightColor!==l){const c={};Array.isArray(l)&&(c.highlightColor=l),(i||r.autoHighlight!==a||o!==r.highlightedObjectIndex)&&(c.highlightedObjectColor=Number.isFinite(o)&&o>=0?this.encodePickingColor(o):null),this.setShaderModuleProps({picking:c})}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let i=!1;i=i||this.internalState.needsRedraw&&this.id;const n=this.getAttributeManager(),r=n?n.getNeedsRedraw(e):!1;if(i=i||r,i)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,i}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}Za.defaultProps=s0t;Za.layerName="Layer";const a0t="compositeLayer.renderLayers";class Gu extends Za{get isComposite(){return!0}get isDrawable(){return!1}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:i}=e;return i&&i.__source&&i.__source.parent&&i.__source.parent.id===this.id&&(e.object=i.__source.object,e.index=i.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,i){return i&&i.length}getSubLayerClass(e,i){const{_subLayerProps:n}=this.props;return n&&n[e]&&n[e].type||i}getSubLayerRow(e,i,n){return e.__source={parent:this,object:i,index:n},e}getSubLayerAccessor(e){if(typeof e=="function"){const i={index:-1,data:this.props.data,target:[]};return(n,r)=>n&&n.__source?(i.index=n.__source.index,e(n.__source.object,i)):e(n,r)}return e}getSubLayerProps(e={}){var F;const{opacity:i,pickable:n,visible:r,parameters:s,getPolygonOffset:a,highlightedObjectIndex:o,autoHighlight:l,highlightColor:c,coordinateSystem:h,coordinateOrigin:A,wrapLongitude:m,positionFormat:b,modelMatrix:S,extensions:M,fetch:I,operation:O,_subLayerProps:D}=this.props,B={id:"",updateTriggers:{},opacity:i,pickable:n,visible:r,parameters:s,getPolygonOffset:a,highlightedObjectIndex:o,autoHighlight:l,highlightColor:c,coordinateSystem:h,coordinateOrigin:A,wrapLongitude:m,positionFormat:b,modelMatrix:S,extensions:M,fetch:I,operation:O},P=D&&e.id&&D[e.id],j=P&&P.updateTriggers,N=e.id||"sublayer";if(P){const $=this.props[Ru],V=e.type?e.type._propTypes:{};for(const Z in P){const nt=V[Z]||$[Z];nt&&nt.type==="accessor"&&(P[Z]=this.getSubLayerAccessor(P[Z]))}}Object.assign(B,e,P),B.id=`${this.props.id}-${N}`,B.updateTriggers={all:(F=this.props.updateTriggers)==null?void 0:F.all,...e.updateTriggers,...j};for(const $ of M){const V=$.getSubLayerProps.call(this,$);V&&Object.assign(B,V,{updateTriggers:Object.assign(B.updateTriggers,V.updateTriggers)})}return B}_updateAutoHighlight(e){for(const i of this.getSubLayers())i.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,i){let n=this.internalState.subLayers;const r=!n||this.needsUpdate();if(r){const s=this.renderLayers();n=ZA(s,Boolean),this.internalState.subLayers=n}as(a0t,this,r,n);for(const s of n)s.parent=this}}Gu.layerName="CompositeLayer";const Zb=Math.PI/180,yL=180/Math.PI,Mv=6370972,fA=256;function o0t(){const t=fA/Mv,e=Math.PI/180*fA;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class l0t extends g0{constructor(e={}){const{longitude:i=0,zoom:n=0,nearZMultiplier:r=.5,farZMultiplier:s=1,resolution:a=10}=e;let{latitude:o=0,height:l,altitude:c=1.5,fovy:h}=e;o=Math.max(Math.min(o,Su),-Su),l=l||1,h?c=WB(h):h=v_(c);const A=1/Math.PI/Math.cos(o*Math.PI/180),m=Math.pow(2,n)*A,b=e.nearZ??r,S=e.farZ??(c+fA*2*m/l)*s,M=new Po().lookAt({eye:[0,-c,0],up:[0,0,1]});M.rotateX(o*Zb),M.rotateZ(-i*Zb),M.scale(m/l),super({...e,height:l,viewMatrix:M,longitude:i,latitude:o,zoom:n,distanceScales:o0t(),fovy:h,focalDistance:c,near:b,far:S}),this.scale=m,this.latitude=o,this.longitude=i,this.resolution=a}get projectionMode(){return ma.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const i={targetZ:e.z||0},n=this.unproject([0,this.height/2],i),r=this.unproject([this.width/2,0],i),s=this.unproject([this.width,this.height/2],i),a=this.unproject([this.width/2,this.height],i);return s[0]<this.longitude&&(s[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],s[0],r[0],a[0]),Math.min(n[1],s[1],r[1],a[1]),Math.max(n[0],s[0],r[0],a[0]),Math.max(n[1],s[1],r[1],a[1])]}unproject(e,{topLeft:i=!0,targetZ:n}={}){const[r,s,a]=e,o=i?s:this.height-s,{pixelUnprojectionMatrix:l}=this;let c;if(Number.isFinite(a))c=H3(l,[r,o,a,1]);else{const b=H3(l,[r,o,-1,1]),S=H3(l,[r,o,1,1]),M=((n||0)/Mv+1)*fA,I=B3(eV([],b,S)),O=B3(b),D=B3(S),P=4*((4*O*D-(I-O-D)**2)/16)/I,j=Math.sqrt(O-P),N=Math.sqrt(Math.max(0,M*M-P)),F=(j-N)/Math.sqrt(I);c=Cot([],b,S,F)}const[h,A,m]=this.unprojectPosition(c);return Number.isFinite(a)?[h,A,m]:Number.isFinite(n)?[h,A,n]:[h,A]}projectPosition(e){const[i,n,r=0]=e,s=i*Zb,a=n*Zb,o=Math.cos(a),l=(r/Mv+1)*fA;return[Math.sin(s)*o*l,-Math.cos(s)*o*l,Math.sin(a)*l]}unprojectPosition(e){const[i,n,r]=e,s=kot(e),a=Math.asin(r/s),l=Math.atan2(i,-n)*yL,c=a*yL,h=(s/fA-1)*Mv;return[l,c,h]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,i){const n=this.unproject(i);return{longitude:e[0]-n[0]+this.longitude,latitude:e[1]-n[1]+this.latitude}}}function H3(t,e){const i=A0([],e,t);return rV(i,i,1/i[3]),i}class c0t extends LV{applyConstraints(e){const{maxZoom:i,minZoom:n,zoom:r}=e;e.zoom=al(r,n,i);const{longitude:s,latitude:a}=e;return(s<-180||s>180)&&(e.longitude=Eut(s+180,360)-180),e.latitude=al(a,-Su,Su),e}}class u0t extends FV{constructor(){super(...arguments),this.ControllerState=c0t,this.transition={transitionDuration:300,transitionInterpolator:new YB(["longitude","latitude","zoom"])},this.dragMode="pan"}setProps(e){super.setProps(e),this.dragRotate=!1,this.touchRotate=!1}}class f$ extends NV{constructor(e={}){super(e)}getViewportType(e){return e.zoom>12?_f:l0t}get ControllerType(){return u0t}}f$.displayName="GlobeView";class d${constructor(e){this.indexStarts=[0],this.vertexStarts=[0],this.vertexCount=0,this.instanceCount=0;const{attributes:i={}}=e;this.typedArrayManager=KA,this.attributes={},this._attributeDefs=i,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:i,buffers:n={},getGeometry:r,geometryBuffer:s,positionFormat:a,dataChanged:o,normalize:l=!0}=this.opts;if(this.data=i,this.getGeometry=r,this.positionSize=s&&s.size||(a==="XY"?2:3),this.buffers=n,this.normalize=l,s&&(on(i.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(n.vertexPositions=s)),this.geometryBuffer=n.vertexPositions,Array.isArray(o))for(const c of o)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:i}){this._rebuildGeometry({startRow:e,endRow:i})}getGeometryFromBuffer(e){const i=e.value||e;return ArrayBuffer.isView(i)?e$(i,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,i){const{attributes:n,buffers:r,_attributeDefs:s,typedArrayManager:a}=this;for(const o in s)if(o in r)a.release(n[o]),n[o]=null;else{const l=s[o];l.copy=i,n[o]=a.allocate(n[o],e,l)}}_forEachGeometry(e,i,n){const{data:r,getGeometry:s}=this,{iterable:a,objectInfo:o}=p0(r,i,n);for(const l of a){o.index++;const c=s?s(l,o):null;e(c,o.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:i,vertexStarts:n,instanceCount:r}=this;const{data:s,geometryBuffer:a}=this,{startRow:o=0,endRow:l=1/0}=e||{},c={};if(e||(i=[0],n=[0]),this.normalize||!a)this._forEachGeometry((A,m)=>{const b=A&&this.normalizeGeometry(A);c[m]=b,n[m+1]=n[m]+(b?this.getGeometrySize(b):0)},o,l),r=n[n.length-1];else if(n=s.startIndices,r=n[s.length]||0,ArrayBuffer.isView(a))r=r||a.length/this.positionSize;else if(a instanceof Dn){const A=this.positionSize*4;r=r||a.byteLength/A}else if(a.buffer){const A=a.stride||this.positionSize*4;r=r||a.buffer.byteLength/A}else if(a.value){const A=a.value,m=a.stride/A.BYTES_PER_ELEMENT||this.positionSize;r=r||A.length/m}this._allocate(r,!!e),this.indexStarts=i,this.vertexStarts=n,this.instanceCount=r;const h={};this._forEachGeometry((A,m)=>{const b=c[m]||A;h.vertexStart=n[m],h.indexStart=i[m];const S=m<n.length-1?n[m+1]:r;h.geometrySize=S-n[m],h.geometryIndex=m,this.updateGeometryAttributes(b,h)},o,l),this.vertexCount=i[i.length-1]}}const q3=512,h0t=Math.PI/180;function A$({map:t,gl:e,deck:i}){if(t.__deck)return t.__deck;const n=i==null?void 0:i.props._customRender,r=i==null?void 0:i.props.onLoad,s={...i==null?void 0:i.props,_customRender:()=>{t.triggerRepaint(),n==null||n("")}};s.parameters={...bI(t,!0),...s.parameters},s.views||(s.views=m2(t));let a;return(!i||i.props.gl===e)&&(Object.assign(s,{gl:e,width:null,height:null,touchAction:"unset",viewState:w_(t)}),i!=null&&i.isInitialized?pL(i,t):s.onLoad=()=>{r==null||r(),pL(a,t)}),i?(a=i,i.setProps(s),i.userData.isExternal=!0):(a=new S_(s),t.on("remove",()=>{g$(t)})),a.userData.mapboxLayers=new Set,t.__deck=a,t.on("render",()=>{a.isInitialized&&p0t(a,t)}),a}function pL(t,e){const i=()=>{t.isInitialized?m0t(t,e):e.off("move",i)};e.on("move",i)}function g$(t){var e;(e=t.__deck)==null||e.finalize(),t.__deck=null}function bI(t,e){const i=e?{depthWriteEnabled:!0,depthCompare:"less-equal",depthBias:0,blend:!0,blendColorSrcFactor:"src-alpha",blendColorDstFactor:"one-minus-src-alpha",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one-minus-src-alpha",blendColorOperation:"add",blendAlphaOperation:"add"}:{};return y$(t)==="globe"&&(i.cullMode="back"),i}function f0t(t,e){t.userData.mapboxLayers.add(e),nO(t)}function d0t(t,e){t.userData.mapboxLayers.delete(e),nO(t)}function A0t(t,e){nO(t)}function g0t(t,e,i,n){let{currentViewport:r}=t.userData,s=!1;r||(r=p$(t,e,n),t.userData.currentViewport=r,s=!0),t.isInitialized&&t._drawLayers("mapbox-repaint",{viewports:[r],layerFilter:({layer:a})=>i.id===a.id||a.props.operation.includes("terrain"),clearStack:s,clearCanvas:!1})}function y$(t){var n;const e=(n=t.getProjection)==null?void 0:n.call(t),i=(e==null?void 0:e.type)||(e==null?void 0:e.name);if(i==="globe")return"globe";if(i&&i!=="mercator")throw new Error("Unsupported projection");return"mercator"}function m2(t){return y$(t)==="globe"?new f$({id:"mapbox"}):new GB({id:"mapbox"})}function w_(t){var r;const{lng:e,lat:i}=t.getCenter(),n={longitude:(e+540)%360-180,latitude:i,zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),padding:t.getPadding(),repeat:t.getRenderWorldCopies()};return(r=t.getTerrain)!=null&&r.call(t)&&y0t(t,n),n}function y0t(t,e){if(t.getFreeCameraOptions){const{position:i}=t.getFreeCameraOptions();if(!i||i.z===void 0)return;const n=t.transform.height,{longitude:r,latitude:s,pitch:a}=e,o=i.x*q3,l=(1-i.y)*q3,c=i.z*q3,h=b_([r,s]),A=o-h[0],m=l-h[1],b=Math.sqrt(A*A+m*m),S=a*h0t,M=1.5*n,I=S<.001?M*Math.cos(S)/c:M*Math.sin(S)/b;e.zoom=Math.log2(I);const O=M*Math.cos(S)/I,D=c-O;e.position=[0,0,D/Sv(s)]}else typeof t.transform.elevation=="number"&&(e.position=[0,0,t.transform.elevation])}function p$(t,e,i){const n=w_(e),r=m2(e);i&&(r.props.nearZMultiplier=.2);const s=(i==null?void 0:i.nearZ)??e.transform._nearZ,a=(i==null?void 0:i.farZ)??e.transform._farZ;return Number.isFinite(s)&&(n.nearZ=s/e.transform.height,n.farZ=a/e.transform.height),r.makeViewport({width:t.width,height:t.height,viewState:n})}function p0t(t,e){const{mapboxLayers:i,isExternal:n}=t.userData;if(n){const r=Array.from(i,h=>h.id),a=ZA(t.props.layers,Boolean).some(h=>h&&!r.includes(h.id));let o=t.getViewports();const l=o.findIndex(h=>h.id==="mapbox"),c=o.length>1||l<0;(a||c)&&(l>=0&&(o=o.slice(),o[l]=p$(t,e)),t._drawLayers("mapbox-repaint",{viewports:o,layerFilter:h=>(!t.props.layerFilter||t.props.layerFilter(h))&&(h.viewport.id!=="mapbox"||!r.includes(h.layer.id)),clearCanvas:!1}))}t.userData.currentViewport=null}function m0t(t,e){t.setProps({viewState:w_(e)}),t.needsRedraw({clearRedrawFlags:!0})}function nO(t){if(t.userData.isExternal)return;const e=[];t.userData.mapboxLayers.forEach(i=>{const n=i.props.type,r=new n(i.props);e.push(r)}),t.setProps({layers:e})}class _0t{constructor(e){if(!e.id)throw new Error("Layer must have an unique id");this.id=e.id,this.type="custom",this.renderingMode=e.renderingMode||"3d",this.slot=e.slot,this.map=null,this.deck=null,this.props=e}onAdd(e,i){this.map=e,this.deck=A$({map:e,gl:i,deck:this.props.deck}),f0t(this.deck,this)}onRemove(){this.deck&&d0t(this.deck,this)}setProps(e){Object.assign(this.props,e,{id:this.id}),this.deck&&A0t(this.deck)}render(e,i){g0t(this.deck,this.map,this,i)}}const Y3="__UNDEFINED__";function Jb(t,e,i,n){if(!t||!e||!t.style||!t.style._loaded)return;const r=ZA(n,Boolean);if(i!==n){const o=ZA(i,Boolean),l=new Set(o.map(c=>c.id));for(const c of r)l.delete(c.id);for(const c of l)t.getLayer(c)&&t.removeLayer(c)}for(const o of r){const l=t.getLayer(o.id);l?(l.implementation||l).setProps(o.props):t.addLayer(new _0t({id:o.id,deck:e,slot:o.props.slot}),o.props.beforeId)}const s=t.style._order,a={};for(const o of r){let{beforeId:l}=o.props;(!l||!s.includes(l))&&(l=Y3),a[l]=a[l]||[],a[l].push(o.id)}for(const o in a){const l=a[o];let c=o===Y3?s.length:s.indexOf(o),h=o===Y3?void 0:o;for(let A=l.length-1;A>=0;A--){const m=l[A],b=s.indexOf(m);b!==c-1&&(t.moveLayer(m,h),b>c&&c++),c--,h=m}}}class b0t{constructor(e){this._handleStyleChange=()=>{Jb(this._map,this._deck,this._props.layers,this._props.layers)},this._updateContainerSize=()=>{if(this._map&&this._container){const{clientWidth:r,clientHeight:s}=this._map.getContainer();Object.assign(this._container.style,{width:`${r}px`,height:`${s}px`})}},this._updateViewState=()=>{const r=this._deck,s=this._map;r&&s&&(r.setProps({views:this._props.views||m2(s),viewState:w_(s)}),r.isInitialized&&r.redraw())},this._handleMouseEvent=r=>{const s=this._deck;if(!s||!s.isInitialized)return;const a={type:r.type,offsetCenter:r.point,srcEvent:r},o=this._lastMouseDownPoint;switch(!r.point&&o&&(a.deltaX=r.originalEvent.clientX-o.clientX,a.deltaY=r.originalEvent.clientY-o.clientY,a.offsetCenter={x:o.x+a.deltaX,y:o.y+a.deltaY}),a.type){case"mousedown":s._onPointerDown(a),this._lastMouseDownPoint={...r.point,clientX:r.originalEvent.clientX,clientY:r.originalEvent.clientY};break;case"dragstart":a.type="panstart",s._onEvent(a);break;case"drag":a.type="panmove",s._onEvent(a);break;case"dragend":a.type="panend",s._onEvent(a);break;case"click":a.tapCount=1,s._onEvent(a);break;case"dblclick":a.type="click",a.tapCount=2,s._onEvent(a);break;case"mousemove":a.type="pointermove",s._onPointerMove(a);break;case"mouseout":a.type="pointerleave",s._onPointerMove(a);break;default:return}};const{interleaved:i=!1,...n}=e;this._interleaved=i,this._props=n}setProps(e){this._interleaved&&e.layers&&Jb(this._map,this._deck,this._props.layers,e.layers),Object.assign(this._props,e),this._deck&&this._map&&this._deck.setProps({...this._props,parameters:{...bI(this._map,this._interleaved),...this._props.parameters}})}onAdd(e){return this._map=e,this._interleaved?this._onAddInterleaved(e):this._onAddOverlaid(e)}_onAddOverlaid(e){const i=document.createElement("div");return Object.assign(i.style,{position:"absolute",left:0,top:0,textAlign:"initial",pointerEvents:"none"}),this._container=i,this._deck=new S_({...this._props,parent:i,parameters:{...bI(e,!1),...this._props.parameters},views:this._props.views||m2(e),viewState:w_(e)}),e.on("resize",this._updateContainerSize),e.on("render",this._updateViewState),e.on("mousedown",this._handleMouseEvent),e.on("dragstart",this._handleMouseEvent),e.on("drag",this._handleMouseEvent),e.on("dragend",this._handleMouseEvent),e.on("mousemove",this._handleMouseEvent),e.on("mouseout",this._handleMouseEvent),e.on("click",this._handleMouseEvent),e.on("dblclick",this._handleMouseEvent),this._updateContainerSize(),i}_onAddInterleaved(e){const i=e.painter.context.gl;return i instanceof WebGLRenderingContext&&Ji.warn("Incompatible basemap library. See: https://deck.gl/docs/api-reference/mapbox/overview#compatibility")(),this._deck=A$({map:e,gl:i,deck:new S_({...this._props,gl:i})}),e.on("styledata",this._handleStyleChange),Jb(e,this._deck,[],this._props.layers),document.createElement("div")}onRemove(){const e=this._map;e&&(this._interleaved?this._onRemoveInterleaved(e):this._onRemoveOverlaid(e)),this._deck=void 0,this._map=void 0,this._container=void 0}_onRemoveOverlaid(e){var i;e.off("resize",this._updateContainerSize),e.off("render",this._updateViewState),e.off("mousedown",this._handleMouseEvent),e.off("dragstart",this._handleMouseEvent),e.off("drag",this._handleMouseEvent),e.off("dragend",this._handleMouseEvent),e.off("mousemove",this._handleMouseEvent),e.off("mouseout",this._handleMouseEvent),e.off("click",this._handleMouseEvent),e.off("dblclick",this._handleMouseEvent),(i=this._deck)==null||i.finalize()}_onRemoveInterleaved(e){e.off("styledata",this._handleStyleChange),Jb(e,this._deck,this._props.layers,[]),g$(e)}getDefaultPosition(){return"top-left"}pickObject(e){return on(this._deck),this._deck.pickObject(e)}pickMultipleObjects(e){return on(this._deck),this._deck.pickMultipleObjects(e)}pickObjects(e){return on(this._deck),this._deck.pickObjects(e)}finalize(){this._map&&this._map.removeControl(this)}getCanvas(){return this._map?this._interleaved?this._map.getCanvas():this._deck.getCanvas():null}}const mL=`uniform arcUniforms {
  bool greatCircle;
  bool useShortestPath;
  float numSegments;
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  highp int widthUnits;
} arc;
`,v0t={name:"arc",vs:mL,fs:mL,uniformTypes:{greatCircle:"f32",useShortestPath:"f32",numSegments:"f32",widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",widthUnits:"i32"}},T0t=`#version 300 es
#define SHADER_NAME arc-layer-vertex-shader
in vec4 instanceSourceColors;
in vec4 instanceTargetColors;
in vec3 instanceSourcePositions;
in vec3 instanceSourcePositions64Low;
in vec3 instanceTargetPositions;
in vec3 instanceTargetPositions64Low;
in vec3 instancePickingColors;
in float instanceWidths;
in float instanceHeights;
in float instanceTilts;
out vec4 vColor;
out vec2 uv;
out float isValid;
float paraboloid(float distance, float sourceZ, float targetZ, float ratio) {
float deltaZ = targetZ - sourceZ;
float dh = distance * instanceHeights;
if (dh == 0.0) {
return sourceZ + deltaZ * ratio;
}
float unitZ = deltaZ / dh;
float p2 = unitZ * unitZ + 1.0;
float dir = step(deltaZ, 0.0);
float z0 = mix(sourceZ, targetZ, dir);
float r = mix(ratio, 1.0 - ratio, dir);
return sqrt(r * (p2 - r)) * dh + z0;
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
vec2 dir_screenspace = normalize(line_clipspace * project.viewportSize);
dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
return dir_screenspace * offset_direction * width / 2.0;
}
float getSegmentRatio(float index) {
return smoothstep(0.0, 1.0, index / (arc.numSegments - 1.0));
}
vec3 interpolateFlat(vec3 source, vec3 target, float segmentRatio) {
float distance = length(source.xy - target.xy);
float z = paraboloid(distance, source.z, target.z, segmentRatio);
float tiltAngle = radians(instanceTilts);
vec2 tiltDirection = normalize(target.xy - source.xy);
vec2 tilt = vec2(-tiltDirection.y, tiltDirection.x) * z * sin(tiltAngle);
return vec3(
mix(source.xy, target.xy, segmentRatio) + tilt,
z * cos(tiltAngle)
);
}
float getAngularDist (vec2 source, vec2 target) {
vec2 sourceRadians = radians(source);
vec2 targetRadians = radians(target);
vec2 sin_half_delta = sin((sourceRadians - targetRadians) / 2.0);
vec2 shd_sq = sin_half_delta * sin_half_delta;
float a = shd_sq.y + cos(sourceRadians.y) * cos(targetRadians.y) * shd_sq.x;
return 2.0 * asin(sqrt(a));
}
vec3 interpolateGreatCircle(vec3 source, vec3 target, vec3 source3D, vec3 target3D, float angularDist, float t) {
vec2 lngLat;
if(abs(angularDist - PI) < 0.001) {
lngLat = (1.0 - t) * source.xy + t * target.xy;
} else {
float a = sin((1.0 - t) * angularDist);
float b = sin(t * angularDist);
vec3 p = source3D.yxz * a + target3D.yxz * b;
lngLat = degrees(vec2(atan(p.y, -p.x), atan(p.z, length(p.xy))));
}
float z = paraboloid(angularDist * EARTH_RADIUS, source.z, target.z, t);
return vec3(lngLat, z);
}
void main(void) {
geometry.worldPosition = instanceSourcePositions;
geometry.worldPositionAlt = instanceTargetPositions;
float segmentIndex = float(gl_VertexID / 2);
float segmentSide = mod(float(gl_VertexID), 2.) == 0. ? -1. : 1.;
float segmentRatio = getSegmentRatio(segmentIndex);
float prevSegmentRatio = getSegmentRatio(max(0.0, segmentIndex - 1.0));
float nextSegmentRatio = getSegmentRatio(min(arc.numSegments - 1.0, segmentIndex + 1.0));
float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
isValid = 1.0;
uv = vec2(segmentRatio, segmentSide);
geometry.uv = uv;
geometry.pickingColor = instancePickingColors;
vec4 curr;
vec4 next;
vec3 source;
vec3 target;
if ((arc.greatCircle || project.projectionMode == PROJECTION_MODE_GLOBE) && project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
source = project_globe_(vec3(instanceSourcePositions.xy, 0.0));
target = project_globe_(vec3(instanceTargetPositions.xy, 0.0));
float angularDist = getAngularDist(instanceSourcePositions.xy, instanceTargetPositions.xy);
vec3 prevPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, prevSegmentRatio);
vec3 currPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, segmentRatio);
vec3 nextPos = interpolateGreatCircle(instanceSourcePositions, instanceTargetPositions, source, target, angularDist, nextSegmentRatio);
if (abs(currPos.x - prevPos.x) > 180.0) {
indexDir = -1.0;
isValid = 0.0;
} else if (abs(currPos.x - nextPos.x) > 180.0) {
indexDir = 1.0;
isValid = 0.0;
}
nextPos = indexDir < 0.0 ? prevPos : nextPos;
nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;
if (isValid == 0.0) {
nextPos.x += nextPos.x > 0.0 ? -360.0 : 360.0;
float t = ((currPos.x > 0.0 ? 180.0 : -180.0) - currPos.x) / (nextPos.x - currPos.x);
currPos = mix(currPos, nextPos, t);
segmentRatio = mix(segmentRatio, nextSegmentRatio, t);
}
vec3 currPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, segmentRatio);
vec3 nextPos64Low = mix(instanceSourcePositions64Low, instanceTargetPositions64Low, nextSegmentRatio);
curr = project_position_to_clipspace(currPos, currPos64Low, vec3(0.0), geometry.position);
next = project_position_to_clipspace(nextPos, nextPos64Low, vec3(0.0));
} else {
vec3 source_world = instanceSourcePositions;
vec3 target_world = instanceTargetPositions;
if (arc.useShortestPath) {
source_world.x = mod(source_world.x + 180., 360.0) - 180.;
target_world.x = mod(target_world.x + 180., 360.0) - 180.;
float deltaLng = target_world.x - source_world.x;
if (deltaLng > 180.) target_world.x -= 360.;
if (deltaLng < -180.) source_world.x -= 360.;
}
source = project_position(source_world, instanceSourcePositions64Low);
target = project_position(target_world, instanceTargetPositions64Low);
float antiMeridianX = 0.0;
if (arc.useShortestPath) {
if (project.projectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
antiMeridianX = -(project.coordinateOrigin.x + 180.) / 360. * TILE_SIZE;
}
float thresholdRatio = (antiMeridianX - source.x) / (target.x - source.x);
if (prevSegmentRatio <= thresholdRatio && nextSegmentRatio > thresholdRatio) {
isValid = 0.0;
indexDir = sign(segmentRatio - thresholdRatio);
segmentRatio = thresholdRatio;
}
}
nextSegmentRatio = indexDir < 0.0 ? prevSegmentRatio : nextSegmentRatio;
vec3 currPos = interpolateFlat(source, target, segmentRatio);
vec3 nextPos = interpolateFlat(source, target, nextSegmentRatio);
if (arc.useShortestPath) {
if (nextPos.x < antiMeridianX) {
currPos.x += TILE_SIZE;
nextPos.x += TILE_SIZE;
}
}
curr = project_common_position_to_clipspace(vec4(currPos, 1.0));
next = project_common_position_to_clipspace(vec4(nextPos, 1.0));
geometry.position = vec4(currPos, 1.0);
}
float widthPixels = clamp(
project_size_to_pixel(instanceWidths * arc.widthScale, arc.widthUnits),
arc.widthMinPixels, arc.widthMaxPixels
);
vec3 offset = vec3(
getExtrusionOffset((next.xy - curr.xy) * indexDir, segmentSide, widthPixels),
0.0);
DECKGL_FILTER_SIZE(offset, geometry);
DECKGL_FILTER_GL_POSITION(curr, geometry);
gl_Position = curr + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio);
vColor = vec4(color.rgb, color.a * layer.opacity);
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,S0t=`#version 300 es
#define SHADER_NAME arc-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 uv;
in float isValid;
out vec4 fragColor;
void main(void) {
if (isValid == 0.0) {
discard;
}
fragColor = vColor;
geometry.uv = uv;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,_2=[0,0,0,255],w0t={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getSourceColor:{type:"accessor",value:_2},getTargetColor:{type:"accessor",value:_2},getWidth:{type:"accessor",value:1},getHeight:{type:"accessor",value:1},getTilt:{type:"accessor",value:0},greatCircle:!1,numSegments:{type:"number",value:50,min:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class rO extends Za{getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:T0t,fs:S0t,modules:[ml,Yu,v0t]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceSourceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getSourceColor",defaultValue:_2},instanceTargetColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getTargetColor",defaultValue:_2},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1},instanceHeights:{size:1,transition:!0,accessor:"getHeight",defaultValue:1},instanceTilts:{size:1,transition:!0,accessor:"getTilt",defaultValue:0}})}updateState(e){var i;super.updateState(e),e.changeFlags.extensionsChanged&&((i=this.state.model)==null||i.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{widthUnits:i,widthScale:n,widthMinPixels:r,widthMaxPixels:s,greatCircle:a,wrapLongitude:o,numSegments:l}=this.props,c={numSegments:l,widthUnits:ba[i],widthScale:n,widthMinPixels:r,widthMaxPixels:s,greatCircle:a,useShortestPath:o},h=this.state.model;h.shaderInputs.setProps({arc:c}),h.setVertexCount(l*2),h.draw(this.context.renderPass)}_getModel(){return new Yr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),topology:"triangle-strip",isInstanced:!0})}}rO.layerName="ArcLayer";rO.defaultProps=w0t;const _L=`uniform iconUniforms {
  float sizeScale;
  vec2 iconsTextureDim;
  float sizeMinPixels;
  float sizeMaxPixels;
  bool billboard;
  highp int sizeUnits;
  float alphaCutoff;
} icon;
`,M0t={name:"icon",vs:_L,fs:_L,uniformTypes:{sizeScale:"f32",iconsTextureDim:"vec2<f32>",sizeMinPixels:"f32",sizeMaxPixels:"f32",billboard:"f32",sizeUnits:"i32",alphaCutoff:"f32"}},I0t=`#version 300 es
#define SHADER_NAME icon-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceSizes;
in float instanceAngles;
in vec4 instanceColors;
in vec3 instancePickingColors;
in vec4 instanceIconFrames;
in float instanceColorModes;
in vec2 instanceOffsets;
in vec2 instancePixelOffset;
out float vColorMode;
out vec4 vColor;
out vec2 vTextureCoords;
out vec2 uv;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = angle * PI / 180.0;
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vec2 iconSize = instanceIconFrames.zw;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * icon.sizeScale, icon.sizeUnits),
icon.sizeMinPixels, icon.sizeMaxPixels
);
float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
pixelOffset += instancePixelOffset;
pixelOffset.y *= -1.0;
if (icon.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vTextureCoords = mix(
instanceIconFrames.xy,
instanceIconFrames.xy + iconSize,
(positions.xy + 1.0) / 2.0
) / icon.iconsTextureDim;
vColor = instanceColors;
DECKGL_FILTER_COLOR(vColor, geometry);
vColorMode = instanceColorModes;
}
`,E0t=`#version 300 es
#define SHADER_NAME icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in float vColorMode;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
vec4 texColor = texture(iconsTexture, vTextureCoords);
vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
float a = texColor.a * layer.opacity * vColor.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color, a);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,B0t=1024,O0t=4,bL=()=>{},vL={minFilter:"linear",mipmapFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},R0t={x:0,y:0,width:0,height:0};function D0t(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function C0t(t,e,i,n){const r=Math.min(i/e.width,n/e.height),s=Math.floor(e.width*r),a=Math.floor(e.height*r);return r===1?{image:e,width:s,height:a}:(t.canvas.height=a,t.canvas.width=s,t.clearRect(0,0,s,a),t.drawImage(e,0,0,e.width,e.height,0,0,s,a),{image:t.canvas,width:s,height:a})}function M_(t){return t&&(t.id||t.url)}function P0t(t,e,i,n){const{width:r,height:s,device:a}=t,o=a.createTexture({format:"rgba8unorm",width:e,height:i,sampler:n,mipmaps:!0}),l=a.createCommandEncoder();return l.copyTextureToTexture({sourceTexture:t,destinationTexture:o,width:r,height:s}),l.finish(),t.destroy(),o}function TL(t,e,i){for(let n=0;n<e.length;n++){const{icon:r,xOffset:s}=e[n],a=M_(r);t[a]={...r,x:s,y:i}}}function x0t({icons:t,buffer:e,mapping:i={},xOffset:n=0,yOffset:r=0,rowHeight:s=0,canvasWidth:a}){let o=[];for(let l=0;l<t.length;l++){const c=t[l],h=M_(c);if(!i[h]){const{height:A,width:m}=c;n+m+e>a&&(TL(i,o,r),n=0,r=s+r+e,s=0,o=[]),o.push({icon:c,xOffset:n}),n=n+m+e,s=Math.max(s,A)}}return o.length>0&&TL(i,o,r),{mapping:i,rowHeight:s,xOffset:n,yOffset:r,canvasWidth:a,canvasHeight:D0t(s+r+e)}}function N0t(t,e,i){if(!t||!e)return null;i=i||{};const n={},{iterable:r,objectInfo:s}=p0(t);for(const a of r){s.index++;const o=e(a,s),l=M_(o);if(!o)throw new Error("Icon is missing.");if(!o.url)throw new Error("Icon url is missing.");!n[l]&&(!i[l]||o.url!==i[l].url)&&(n[l]={...o,source:a,sourceIndex:s.index})}return n}class F0t{constructor(e,{onUpdate:i=bL,onError:n=bL}){this._loadOptions=null,this._texture=null,this._externalTexture=null,this._mapping={},this._samplerParameters=null,this._pendingCount=0,this._autoPacking=!1,this._xOffset=0,this._yOffset=0,this._rowHeight=0,this._buffer=O0t,this._canvasWidth=B0t,this._canvasHeight=0,this._canvas=null,this.device=e,this.onUpdate=i,this.onError=n}finalize(){var e;(e=this._texture)==null||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const i=this._autoPacking?M_(e):e;return this._mapping[i]||R0t}setProps({loadOptions:e,autoPacking:i,iconAtlas:n,iconMapping:r,textureParameters:s}){var a;e&&(this._loadOptions=e),i!==void 0&&(this._autoPacking=i),r&&(this._mapping=r),n&&((a=this._texture)==null||a.delete(),this._texture=null,this._externalTexture=n),s&&(this._samplerParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,i){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(N0t(e,i,this._mapping)||{});if(n.length>0){const{mapping:r,xOffset:s,yOffset:a,rowHeight:o,canvasHeight:l}=x0t({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=o,this._mapping=r,this._xOffset=s,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=this.device.createTexture({format:"rgba8unorm",width:this._canvasWidth,height:this._canvasHeight,sampler:this._samplerParameters||vL,mipmaps:!0})),this._texture.height!==this._canvasHeight&&(this._texture=P0t(this._texture,this._canvasWidth,this._canvasHeight,this._samplerParameters||vL)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(e){const i=this._canvas.getContext("2d",{willReadFrequently:!0});for(const n of e)this._pendingCount++,Kv(n.url,this._loadOptions).then(r=>{var S;const s=M_(n),a=this._mapping[s],{x:o,y:l,width:c,height:h}=a,{image:A,width:m,height:b}=C0t(i,r,c,h);(S=this._texture)==null||S.copyExternalImage({image:A,x:o+(c-m)/2,y:l+(h-b)/2,width:m,height:b}),a.width=m,a.height=b,this._texture.generateMipmap(),this.onUpdate()}).catch(r=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:r})}).finally(()=>{this._pendingCount--})}}const m$=[0,0,0,255],L0t={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:m$},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0,value:null}};class sO extends Za{getShaders(){return super.getShaders({vs:I0t,fs:E0t,modules:[ml,Yu,M0t]})}initializeState(){this.state={iconManager:new F0t(this.context.device,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:"uint8",accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:m$},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){var b;super.updateState(e);const{props:i,oldProps:n,changeFlags:r}=e,s=this.getAttributeManager(),{iconAtlas:a,iconMapping:o,data:l,getIcon:c,textureParameters:h}=i,{iconManager:A}=this.state;if(typeof a=="string")return;const m=a||this.internalState.isAsyncPropLoading("iconAtlas");A.setProps({loadOptions:i.loadOptions,autoPacking:!m,iconAtlas:a,iconMapping:m?o:null,textureParameters:h}),m?n.iconMapping!==i.iconMapping&&s.invalidate("getIcon"):(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getIcon))&&A.packIcons(l,c),r.extensionsChanged&&((b=this.state.model)==null||b.destroy(),this.state.model=this._getModel(),s.invalidateAll())}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:i,sizeMinPixels:n,sizeMaxPixels:r,sizeUnits:s,billboard:a,alphaCutoff:o}=this.props,{iconManager:l}=this.state,c=l.getTexture();if(c){const h=this.state.model,A={iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:ba[s],sizeScale:i,sizeMinPixels:n,sizeMaxPixels:r,billboard:a,alphaCutoff:o};h.shaderInputs.setProps({icon:A}),h.draw(this.context.renderPass)}}_getModel(){const e=[-1,-1,1,-1,-1,1,1,1];return new Yr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Uu({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const i=(n=this.getCurrentLayer())==null?void 0:n.props.onIconError;i?i(e):Ji.error(e.error.message)()}getInstanceOffset(e){const{width:i,height:n,anchorX:r=i/2,anchorY:s=n/2}=this.state.iconManager.getIconMapping(e);return[i/2-r,n/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:i,y:n,width:r,height:s}=this.state.iconManager.getIconMapping(e);return[i,n,r,s]}}sO.defaultProps=L0t;sO.layerName="IconLayer";const SL=`uniform pointCloudUniforms {
  float radiusPixels;
  highp int sizeUnits;
} pointCloud;
`,U0t={name:"pointCloud",vs:SL,fs:SL,uniformTypes:{radiusPixels:"f32",sizeUnits:"i32"}},k0t=`#version 300 es
#define SHADER_NAME point-cloud-layer-vertex-shader
in vec3 positions;
in vec3 instanceNormals;
in vec4 instanceColors;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec3 instancePickingColors;
out vec4 vColor;
out vec2 unitPosition;
void main(void) {
geometry.worldPosition = instancePositions;
geometry.normal = project_normal(instanceNormals);
unitPosition = positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
vec3 offset = vec3(positions.xy * project_size_to_pixel(pointCloud.radiusPixels, pointCloud.sizeUnits), 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
vec3 lightColor = lighting_getLightColor(instanceColors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, instanceColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,j0t=`#version 300 es
#define SHADER_NAME point-cloud-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 unitPosition;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition.xy;
float distToCenter = length(unitPosition);
if (distToCenter > 1.0) {
discard;
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,_$=[0,0,0,255],b$=[0,0,1],z0t={sizeUnits:"pixels",pointSize:{type:"number",min:0,value:10},getPosition:{type:"accessor",value:t=>t.position},getNormal:{type:"accessor",value:b$},getColor:{type:"accessor",value:_$},material:!0,radiusPixels:{deprecatedFor:"pointSize"}};function V0t(t){const{header:e,attributes:i}=t;if(!(!e||!i)&&(t.length=e.vertexCount,i.POSITION&&(i.instancePositions=i.POSITION),i.NORMAL&&(i.instanceNormals=i.NORMAL),i.COLOR_0)){const{size:n,value:r}=i.COLOR_0;i.instanceColors={size:n,type:"unorm8",value:r}}}class aO extends Za{getShaders(){return super.getShaders({vs:k0t,fs:j0t,modules:[ml,OT,Yu,U0t]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceNormals:{size:3,transition:!0,accessor:"getNormal",defaultValue:b$},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getColor",defaultValue:_$}})}updateState(e){var r;const{changeFlags:i,props:n}=e;super.updateState(e),i.extensionsChanged&&((r=this.state.model)==null||r.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll()),i.dataChanged&&V0t(n.data)}draw({uniforms:e}){const{pointSize:i,sizeUnits:n}=this.props,r=this.state.model,s={sizeUnits:ba[n],radiusPixels:i};r.shaderInputs.setProps({pointCloud:s}),r.draw(this.context.renderPass)}_getModel(){const e=[];for(let i=0;i<3;i++){const n=i/3*Math.PI*2;e.push(Math.cos(n)*2,Math.sin(n)*2,0)}return new Yr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Uu({topology:"triangle-list",attributes:{positions:new Float32Array(e)}}),isInstanced:!0})}}aO.layerName="PointCloudLayer";aO.defaultProps=z0t;const wL=`uniform scatterplotUniforms {
  float radiusScale;
  float radiusMinPixels;
  float radiusMaxPixels;
  float lineWidthScale;
  float lineWidthMinPixels;
  float lineWidthMaxPixels;
  float stroked;
  float filled;
  bool antialiasing;
  bool billboard;
  highp int radiusUnits;
  highp int lineWidthUnits;
} scatterplot;
`,$0t={name:"scatterplot",vs:wL,fs:wL,source:"",uniformTypes:{radiusScale:"f32",radiusMinPixels:"f32",radiusMaxPixels:"f32",lineWidthScale:"f32",lineWidthMinPixels:"f32",lineWidthMaxPixels:"f32",stroked:"f32",filled:"f32",antialiasing:"f32",billboard:"f32",radiusUnits:"i32",lineWidthUnits:"i32"}},W0t=`#version 300 es
#define SHADER_NAME scatterplot-layer-vertex-shader
in vec3 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in float instanceRadius;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out vec2 unitPosition;
out float innerUnitRadius;
out float outerRadiusPixels;
void main(void) {
geometry.worldPosition = instancePositions;
outerRadiusPixels = clamp(
project_size_to_pixel(scatterplot.radiusScale * instanceRadius, scatterplot.radiusUnits),
scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
);
float lineWidthPixels = clamp(
project_size_to_pixel(scatterplot.lineWidthScale * instanceLineWidths, scatterplot.lineWidthUnits),
scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
);
outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
float edgePadding = scatterplot.antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
unitPosition = edgePadding * positions.xy;
geometry.uv = unitPosition;
geometry.pickingColor = instancePickingColors;
innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / outerRadiusPixels;
if (scatterplot.billboard) {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = edgePadding * positions * outerRadiusPixels;
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,H0t=`#version 300 es
#define SHADER_NAME scatterplot-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in vec2 unitPosition;
in float innerUnitRadius;
in float outerRadiusPixels;
out vec4 fragColor;
void main(void) {
geometry.uv = unitPosition;
float distToCenter = length(unitPosition) * outerRadiusPixels;
float inCircle = scatterplot.antialiasing ?
smoothedge(distToCenter, outerRadiusPixels) :
step(distToCenter, outerRadiusPixels);
if (inCircle == 0.0) {
discard;
}
if (scatterplot.stroked > 0.5) {
float isLine = scatterplot.antialiasing ?
smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
step(innerUnitRadius * outerRadiusPixels, distToCenter);
if (scatterplot.filled > 0.5) {
fragColor = mix(vFillColor, vLineColor, isLine);
} else {
if (isLine == 0.0) {
discard;
}
fragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
}
} else if (scatterplot.filled < 0.5) {
discard;
} else {
fragColor = vFillColor;
}
fragColor.a *= inCircle;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,q0t=`// TODO(ibgreen): Hack for Layer uniforms (move to new "color" module?)

struct LayerUniforms {
  opacity: f32,
};

var<private> layer: LayerUniforms = LayerUniforms(1.0);
// @group(0) @binding(1) var<uniform> layer: LayerUniforms;

// Main shaders

struct ScatterplotUniforms {
  radiusScale: f32,
  radiusMinPixels: f32,
  radiusMaxPixels: f32,
  lineWidthScale: f32,
  lineWidthMinPixels: f32,
  lineWidthMaxPixels: f32,
  stroked: f32,
  filled: i32,
  antialiasing: i32,
  billboard: i32,
  radiusUnits: i32,
  lineWidthUnits: i32,
};

struct ConstantAttributeUniforms {
 instancePositions: vec3<f32>,
 instancePositions64Low: vec3<f32>,
 instanceRadius: f32,
 instanceLineWidths: f32,
 instanceFillColors: vec4<f32>,
 instanceLineColors: vec4<f32>,
 instancePickingColors: vec3<f32>,

 instancePositionsConstant: i32,
 instancePositions64LowConstant: i32,
 instanceRadiusConstant: i32,
 instanceLineWidthsConstant: i32,
 instanceFillColorsConstant: i32,
 instanceLineColorsConstant: i32,
 instancePickingColorsConstant: i32
};

@group(0) @binding(2) var<uniform> scatterplot: ScatterplotUniforms;

struct ConstantAttributes {
  instancePositions: vec3<f32>,
  instancePositions64Low: vec3<f32>,
  instanceRadius: f32,
  instanceLineWidths: f32,
  instanceFillColors: vec4<f32>,
  instanceLineColors: vec4<f32>,
  instancePickingColors: vec3<f32>
};

const constants = ConstantAttributes(
  vec3<f32>(0.0),
  vec3<f32>(0.0),
  0.0,
  0.0,
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec4<f32>(0.0, 0.0, 0.0, 1.0),
  vec3<f32>(0.0)
);

struct Attributes {
  @builtin(instance_index) instanceIndex : u32,
  @builtin(vertex_index) vertexIndex : u32,
  @location(0) positions: vec3<f32>,
  @location(1) instancePositions: vec3<f32>,
  @location(2) instancePositions64Low: vec3<f32>,
  @location(3) instanceRadius: f32,
  @location(4) instanceLineWidths: f32,
  @location(5) instanceFillColors: vec4<f32>,
  @location(6) instanceLineColors: vec4<f32>,
  @location(7) instancePickingColors: vec3<f32>
};

struct Varyings {
  @builtin(position) position: vec4<f32>,
  @location(0) vFillColor: vec4<f32>,
  @location(1) vLineColor: vec4<f32>,
  @location(2) unitPosition: vec2<f32>,
  @location(3) innerUnitRadius: f32,
  @location(4) outerRadiusPixels: f32,
};

@vertex
fn vertexMain(attributes: Attributes) -> Varyings {
  var varyings: Varyings;

  // Draw an inline geometry constant array clip space triangle to verify that rendering works.
  // var positions = array<vec2<f32>, 3>(vec2(0.0, 0.5), vec2(-0.5, -0.5), vec2(0.5, -0.5));
  // if (attributes.instanceIndex == 0) {
  //   varyings.position = vec4<f32>(positions[attributes.vertexIndex], 0.0, 1.0);
  //   return varyings;
  // }

  // var geometry: Geometry;
  // geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  varyings.outerRadiusPixels = clamp(
    project_unit_size_to_pixel(scatterplot.radiusScale * attributes.instanceRadius, scatterplot.radiusUnits),
    scatterplot.radiusMinPixels, scatterplot.radiusMaxPixels
  );

  // Multiply out line width and clamp to limits
  let lineWidthPixels = clamp(
    project_unit_size_to_pixel(scatterplot.lineWidthScale * attributes.instanceLineWidths, scatterplot.lineWidthUnits),
    scatterplot.lineWidthMinPixels, scatterplot.lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  varyings.outerRadiusPixels += scatterplot.stroked * lineWidthPixels / 2.0;
  // Expand geometry to accommodate edge smoothing
  let edgePadding = select(
    (varyings.outerRadiusPixels + SMOOTH_EDGE_RADIUS) / varyings.outerRadiusPixels,
    1.0,
    scatterplot.antialiasing != 0
  );

  // position on the containing square in [-1, 1] space
  varyings.unitPosition = edgePadding * attributes.positions.xy;
  geometry.uv = varyings.unitPosition;
  geometry.pickingColor = attributes.instancePickingColors;

  varyings.innerUnitRadius = 1.0 - scatterplot.stroked * lineWidthPixels / varyings.outerRadiusPixels;

  if (scatterplot.billboard != 0) {
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, vec3<f32>(0.0)); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
    let offset = attributes.positions; // * edgePadding * varyings.outerRadiusPixels;
    // DECKGL_FILTER_SIZE(offset, geometry);
    let clipPixels = project_pixel_size_to_clipspace(offset.xy);
    varyings.position.x = clipPixels.x;
    varyings.position.y = clipPixels.y;
  } else {
    let offset = edgePadding * attributes.positions * project_pixel_size_float(varyings.outerRadiusPixels);
    // DECKGL_FILTER_SIZE(offset, geometry);
    varyings.position = project_position_to_clipspace(attributes.instancePositions, attributes.instancePositions64Low, offset); // TODO , geometry.position);
    // DECKGL_FILTER_GL_POSITION(varyings.position, geometry);
  }

  // Apply opacity to instance color, or return instance picking color
  varyings.vFillColor = vec4<f32>(attributes.instanceFillColors.rgb, attributes.instanceFillColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vFillColor, geometry);
  varyings.vLineColor = vec4<f32>(attributes.instanceLineColors.rgb, attributes.instanceLineColors.a * layer.opacity);
  // DECKGL_FILTER_COLOR(varyings.vLineColor, geometry);

  return varyings;
}

@fragment
fn fragmentMain(varyings: Varyings) -> @location(0) vec4<f32> {
  // var geometry: Geometry;
  // geometry.uv = unitPosition;

  let distToCenter = length(varyings.unitPosition) * varyings.outerRadiusPixels;
  let inCircle = select(
    smoothedge(distToCenter, varyings.outerRadiusPixels),
    step(distToCenter, varyings.outerRadiusPixels),
    scatterplot.antialiasing != 0
  );

  if (inCircle == 0.0) {
    // discard;
  }

  var fragColor: vec4<f32>;

  if (scatterplot.stroked != 0) {
    let isLine = select(
      smoothedge(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      step(varyings.innerUnitRadius * varyings.outerRadiusPixels, distToCenter),
      scatterplot.antialiasing != 0
    );

    if (scatterplot.filled != 0) {
      fragColor = mix(varyings.vFillColor, varyings.vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        // discard;
      }
      fragColor = vec4<f32>(varyings.vLineColor.rgb, varyings.vLineColor.a * isLine);
    }
  } else if (scatterplot.filled == 0) {
    // discard;
  } else {
    fragColor = varyings.vFillColor;
  }

  fragColor.a *= inCircle;
  // DECKGL_FILTER_COLOR(fragColor, geometry);

  return fragColor;
  // return vec4<f32>(0, 0, 1, 1);
}
`,ML=[0,0,0,255],Y0t={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:ML},getLineColor:{type:"accessor",value:ML},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class oO extends Za{getShaders(){return super.getShaders({vs:W0t,fs:H0t,source:q0t,modules:[ml,Yu,$0t]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var i;super.updateState(e),e.changeFlags.extensionsChanged&&((i=this.state.model)==null||i.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{radiusUnits:i,radiusScale:n,radiusMinPixels:r,radiusMaxPixels:s,stroked:a,filled:o,billboard:l,antialiasing:c,lineWidthUnits:h,lineWidthScale:A,lineWidthMinPixels:m,lineWidthMaxPixels:b}=this.props,S={stroked:a,filled:o,billboard:l,antialiasing:c,radiusUnits:ba[i],radiusScale:n,radiusMinPixels:r,radiusMaxPixels:s,lineWidthUnits:ba[h],lineWidthScale:A,lineWidthMinPixels:m,lineWidthMaxPixels:b},M=this.state.model;M.shaderInputs.setProps({scatterplot:S}),M.draw(this.context.renderPass)}_getModel(){const e=[-1,-1,0,1,-1,0,-1,1,0,1,1,0];return new Yr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Uu({topology:"triangle-strip",attributes:{positions:{size:3,value:new Float32Array(e)}}}),isInstanced:!0})}}oO.defaultProps=Y0t;oO.layerName="ScatterplotLayer";const lO={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function cO(t,e,i={}){return G0t(t,i)!==e?(Q0t(t,i),!0):!1}function G0t(t,e={}){return Math.sign(X0t(t,e))}const IL={x:0,y:1,z:2};function X0t(t,e={}){const{start:i=0,end:n=t.length,plane:r="xy"}=e,s=e.size||2;let a=0;const o=IL[r[0]],l=IL[r[1]];for(let c=i,h=n-s;c<n;c+=s)a+=(t[c+o]-t[h+o])*(t[c+l]+t[h+l]),h=c;return a/2}function Q0t(t,e){const{start:i=0,end:n=t.length,size:r=2}=e,s=(n-i)/r,a=Math.floor(s/2);for(let o=0;o<a;++o){const l=i+o*r,c=i+(s-1-o)*r;for(let h=0;h<r;++h){const A=t[l+h];t[l+h]=t[c+h],t[c+h]=A}}}function Ro(t,e){const i=e.length,n=t.length;if(n>0){let r=!0;for(let s=0;s<i;s++)if(t[n-i+s]!==e[s]){r=!1;break}if(r)return!1}for(let r=0;r<i;r++)t[n+r]=e[r];return!0}function vI(t,e){const i=e.length;for(let n=0;n<i;n++)t[n]=e[n]}function I_(t,e,i,n,r=[]){const s=n+e*i;for(let a=0;a<i;a++)r[a]=t[s+a];return r}function TI(t,e,i,n,r=[]){let s,a;if(i&8)s=(n[3]-t[1])/(e[1]-t[1]),a=3;else if(i&4)s=(n[1]-t[1])/(e[1]-t[1]),a=1;else if(i&2)s=(n[2]-t[0])/(e[0]-t[0]),a=2;else if(i&1)s=(n[0]-t[0])/(e[0]-t[0]),a=0;else return null;for(let o=0;o<t.length;o++)r[o]=(a&1)===o?n[a]:s*(e[o]-t[o])+t[o];return r}function Iv(t,e){let i=0;return t[0]<e[0]?i|=1:t[0]>e[2]&&(i|=2),t[1]<e[1]?i|=4:t[1]>e[3]&&(i|=8),i}function v$(t,e){const{size:i=2,broken:n=!1,gridResolution:r=10,gridOffset:s=[0,0],startIndex:a=0,endIndex:o=t.length}=e||{},l=(o-a)/i;let c=[];const h=[c],A=I_(t,0,i,a);let m,b;const S=S$(A,r,s,[]),M=[];Ro(c,A);for(let I=1;I<l;I++){for(m=I_(t,I,i,a,m),b=Iv(m,S);b;){TI(A,m,b,S,M);const O=Iv(M,S);O&&(TI(A,M,O,S,M),b=O),Ro(c,M),vI(A,M),Z0t(S,r,b),n&&c.length>i&&(c=[],h.push(c),Ro(c,A)),b=Iv(m,S)}Ro(c,m),vI(A,m)}return n?h:h[0]}const EL=0,K0t=1;function T$(t,e=null,i){if(!t.length)return[];const{size:n=2,gridResolution:r=10,gridOffset:s=[0,0],edgeTypes:a=!1}=i||{},o=[],l=[{pos:t,types:a?new Array(t.length/n).fill(K0t):null,holes:e||[]}],c=[[],[]];let h=[];for(;l.length;){const{pos:A,types:m,holes:b}=l.shift();J0t(A,n,b[0]||A.length,c),h=S$(c[0],r,s,h);const S=Iv(c[1],h);if(S){let M=BL(A,m,n,0,b[0]||A.length,h,S);const I={pos:M[0].pos,types:M[0].types,holes:[]},O={pos:M[1].pos,types:M[1].types,holes:[]};l.push(I,O);for(let D=0;D<b.length;D++)M=BL(A,m,n,b[D],b[D+1]||A.length,h,S),M[0]&&(I.holes.push(I.pos.length),I.pos=tv(I.pos,M[0].pos),a&&(I.types=tv(I.types,M[0].types))),M[1]&&(O.holes.push(O.pos.length),O.pos=tv(O.pos,M[1].pos),a&&(O.types=tv(O.types,M[1].types)))}else{const M={positions:A};a&&(M.edgeTypes=m),b.length&&(M.holeIndices=b),o.push(M)}}return o}function BL(t,e,i,n,r,s,a){const o=(r-n)/i,l=[],c=[],h=[],A=[],m=[];let b,S,M;const I=I_(t,o-1,i,n);let O=Math.sign(a&8?I[1]-s[3]:I[0]-s[2]),D=e&&e[o-1],B=0,P=0;for(let j=0;j<o;j++)b=I_(t,j,i,n,b),S=Math.sign(a&8?b[1]-s[3]:b[0]-s[2]),M=e&&e[n/i+j],S&&O&&O!==S&&(TI(I,b,a,s,m),Ro(l,m)&&h.push(D),Ro(c,m)&&A.push(D)),S<=0?(Ro(l,b)&&h.push(M),B-=S):h.length&&(h[h.length-1]=EL),S>=0?(Ro(c,b)&&A.push(M),P+=S):A.length&&(A[A.length-1]=EL),vI(I,b),O=S,D=M;return[B?{pos:l,types:e&&h}:null,P?{pos:c,types:e&&A}:null]}function S$(t,e,i,n){const r=Math.floor((t[0]-i[0])/e)*e+i[0],s=Math.floor((t[1]-i[1])/e)*e+i[1];return n[0]=r,n[1]=s,n[2]=r+e,n[3]=s+e,n}function Z0t(t,e,i){i&8?(t[1]+=e,t[3]+=e):i&4?(t[1]-=e,t[3]-=e):i&2?(t[0]+=e,t[2]+=e):i&1&&(t[0]-=e,t[2]-=e)}function J0t(t,e,i,n){let r=1/0,s=-1/0,a=1/0,o=-1/0;for(let l=0;l<i;l+=e){const c=t[l],h=t[l+1];r=c<r?c:r,s=c>s?c:s,a=h<a?h:a,o=h>o?h:o}return n[0][0]=r,n[0][1]=a,n[1][0]=s,n[1][1]=o,n}function tv(t,e){for(let i=0;i<e.length;i++)t.push(e[i]);return t}const tgt=85.051129;function egt(t,e){const{size:i=2,startIndex:n=0,endIndex:r=t.length,normalize:s=!0}=e||{},a=t.slice(n,r);w$(a,i,0,r-n);const o=v$(a,{size:i,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of o)M$(l,i);return o}function igt(t,e=null,i){const{size:n=2,normalize:r=!0,edgeTypes:s=!1}=i||{};e=e||[];const a=[],o=[];let l=0,c=0;for(let A=0;A<=e.length;A++){const m=e[A]||t.length,b=c,S=ngt(t,n,l,m);for(let M=S;M<m;M++)a[c++]=t[M];for(let M=l;M<S;M++)a[c++]=t[M];w$(a,n,b,c),rgt(a,n,b,c,i==null?void 0:i.maxLatitude),l=m,o[A]=c}o.pop();const h=T$(a,o,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(r)for(const A of h)M$(A.positions,n);return h}function ngt(t,e,i,n){let r=-1,s=-1;for(let a=i+1;a<n;a+=e){const o=Math.abs(t[a]);o>r&&(r=o,s=a-1)}return s}function rgt(t,e,i,n,r=tgt){const s=t[i],a=t[n-e];if(Math.abs(s-a)>180){const o=I_(t,0,e,i);o[0]+=Math.round((a-s)/360)*360,Ro(t,o),o[1]=Math.sign(o[1])*r,Ro(t,o),o[0]=s,Ro(t,o)}}function w$(t,e,i,n){let r=t[0],s;for(let a=i;a<n;a+=e){s=t[a];const o=s-r;(o>180||o<-180)&&(s-=Math.round(o/360)*360),t[a]=r=s}}function M$(t,e){let i;const n=t.length/e;for(let s=0;s<n&&(i=t[s*e],(i+180)%360===0);s++);const r=-Math.round(i/360)*360;if(r!==0)for(let s=0;s<n;s++)t[s*e]+=r}class sgt extends Uu{constructor(e){const{indices:i,attributes:n}=agt(e);super({...e,indices:i,attributes:n})}}function agt(t){const{radius:e,height:i=1,nradial:n=10}=t;let{vertices:r}=t;r&&(Ji.assert(r.length>=n),r=r.flatMap(b=>[b[0],b[1]]),cO(r,lO.COUNTER_CLOCKWISE));const s=i>0,a=n+1,o=s?a*3+1:n,l=Math.PI*2/n,c=new Uint16Array(s?n*3*2:0),h=new Float32Array(o*3),A=new Float32Array(o*3);let m=0;if(s){for(let b=0;b<a;b++){const S=b*l,M=b%n,I=Math.sin(S),O=Math.cos(S);for(let D=0;D<2;D++)h[m+0]=r?r[M*2]:O*e,h[m+1]=r?r[M*2+1]:I*e,h[m+2]=(1/2-D)*i,A[m+0]=r?r[M*2]:O,A[m+1]=r?r[M*2+1]:I,m+=3}h[m+0]=h[m-3],h[m+1]=h[m-2],h[m+2]=h[m-1],m+=3}for(let b=s?0:1;b<a;b++){const S=Math.floor(b/2)*Math.sign(.5-b%2),M=S*l,I=(S+n)%n,O=Math.sin(M),D=Math.cos(M);h[m+0]=r?r[I*2]:D*e,h[m+1]=r?r[I*2+1]:O*e,h[m+2]=i/2,A[m+2]=1,m+=3}if(s){let b=0;for(let S=0;S<n;S++)c[b++]=S*2+0,c[b++]=S*2+2,c[b++]=S*2+0,c[b++]=S*2+1,c[b++]=S*2+1,c[b++]=S*2+3}return{indices:c,attributes:{POSITION:{size:3,value:h},NORMAL:{size:3,value:A}}}}const OL=`uniform columnUniforms {
  float radius;
  float angle;
  vec2 offset;
  bool extruded;
  bool stroked;
  bool isStroke;
  float coverage;
  float elevationScale;
  float edgeDistance;
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  highp int radiusUnits;
  highp int widthUnits;
} column;
`,ogt={name:"column",vs:OL,fs:OL,uniformTypes:{radius:"f32",angle:"f32",offset:"vec2<f32>",extruded:"f32",stroked:"f32",isStroke:"f32",coverage:"f32",elevationScale:"f32",edgeDistance:"f32",widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",radiusUnits:"i32",widthUnits:"i32"}},lgt=`#version 300 es
#define SHADER_NAME column-layer-vertex-shader
in vec3 positions;
in vec3 normals;
in vec3 instancePositions;
in float instanceElevations;
in vec3 instancePositions64Low;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in float instanceStrokeWidths;
in vec3 instancePickingColors;
out vec4 vColor;
#ifdef FLAT_SHADING
out vec3 cameraPosition;
out vec4 position_commonspace;
#endif
void main(void) {
geometry.worldPosition = instancePositions;
vec4 color = column.isStroke ? instanceLineColors : instanceFillColors;
mat2 rotationMatrix = mat2(cos(column.angle), sin(column.angle), -sin(column.angle), cos(column.angle));
float elevation = 0.0;
float strokeOffsetRatio = 1.0;
if (column.extruded) {
elevation = instanceElevations * (positions.z + 1.0) / 2.0 * column.elevationScale;
} else if (column.stroked) {
float widthPixels = clamp(
project_size_to_pixel(instanceStrokeWidths * column.widthScale, column.widthUnits),
column.widthMinPixels, column.widthMaxPixels) / 2.0;
float halfOffset = project_pixel_size(widthPixels) / project_size(column.edgeDistance * column.coverage * column.radius);
if (column.isStroke) {
strokeOffsetRatio -= sign(positions.z) * halfOffset;
} else {
strokeOffsetRatio -= halfOffset;
}
}
float shouldRender = float(color.a > 0.0 && instanceElevations >= 0.0);
float dotRadius = column.radius * column.coverage * shouldRender;
geometry.pickingColor = instancePickingColors;
vec3 centroidPosition = vec3(instancePositions.xy, instancePositions.z + elevation);
vec3 centroidPosition64Low = instancePositions64Low;
vec2 offset = (rotationMatrix * positions.xy * strokeOffsetRatio + column.offset) * dotRadius;
if (column.radiusUnits == UNIT_METERS) {
offset = project_size(offset);
}
vec3 pos = vec3(offset, 0.);
DECKGL_FILTER_SIZE(pos, geometry);
gl_Position = project_position_to_clipspace(centroidPosition, centroidPosition64Low, pos, geometry.position);
geometry.normal = project_normal(vec3(rotationMatrix * normals.xy, normals.z));
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (column.extruded && !column.isStroke) {
#ifdef FLAT_SHADING
cameraPosition = project.cameraPosition;
position_commonspace = geometry.position;
vColor = vec4(color.rgb, color.a * layer.opacity);
#else
vec3 lightColor = lighting_getLightColor(color.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, color.a * layer.opacity);
#endif
} else {
vColor = vec4(color.rgb, color.a * layer.opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,cgt=`#version 300 es
#define SHADER_NAME column-layer-fragment-shader
precision highp float;
out vec4 fragColor;
in vec4 vColor;
#ifdef FLAT_SHADING
in vec3 cameraPosition;
in vec4 position_commonspace;
#endif
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
#ifdef FLAT_SHADING
if (column.extruded && !column.isStroke && !bool(picking.isActive)) {
vec3 normal = normalize(cross(dFdx(position_commonspace.xyz), dFdy(position_commonspace.xyz)));
fragColor.rgb = lighting_getLightColor(vColor.rgb, cameraPosition, position_commonspace.xyz, normal);
}
#endif
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,b2=[0,0,0,255],ugt={diskResolution:{type:"number",min:4,value:20},vertices:null,radius:{type:"number",min:0,value:1e3},angle:{type:"number",value:0},offset:{type:"array",value:[0,0]},coverage:{type:"number",min:0,max:1,value:1},elevationScale:{type:"number",min:0,value:1},radiusUnits:"meters",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,extruded:!0,wireframe:!1,filled:!0,stroked:!1,flatShading:!1,getPosition:{type:"accessor",value:t=>t.position},getFillColor:{type:"accessor",value:b2},getLineColor:{type:"accessor",value:b2},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0,getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class xT extends Za{getShaders(){const e={},{flatShading:i}=this.props;return i&&(e.FLAT_SHADING=1),super.getShaders({vs:lgt,fs:cgt,defines:e,modules:[ml,i?uV:OT,Yu,ogt]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceElevations:{size:1,transition:!0,accessor:"getElevation"},instanceFillColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getFillColor",defaultValue:b2},instanceLineColors:{size:this.props.colorFormat.length,type:"unorm8",transition:!0,accessor:"getLineColor",defaultValue:b2},instanceStrokeWidths:{size:1,accessor:"getLineWidth",transition:!0}})}updateState(e){var o;super.updateState(e);const{props:i,oldProps:n,changeFlags:r}=e,s=r.extensionsChanged||i.flatShading!==n.flatShading;s&&((o=this.state.models)==null||o.forEach(l=>l.destroy()),this.setState(this._getModels()),this.getAttributeManager().invalidateAll());const a=this.getNumInstances();this.state.fillModel.setInstanceCount(a),this.state.wireframeModel.setInstanceCount(a),(s||i.diskResolution!==n.diskResolution||i.vertices!==n.vertices||(i.extruded||i.stroked)!==(n.extruded||n.stroked))&&this._updateGeometry(i)}getGeometry(e,i,n){const r=new sgt({radius:1,height:n?2:0,vertices:i,nradial:e});let s=0;if(i)for(let a=0;a<e;a++){const o=i[a],l=Math.sqrt(o[0]*o[0]+o[1]*o[1]);s+=l/e}else s=1;return this.setState({edgeDistance:Math.cos(Math.PI/e)*s}),r}_getModels(){const e=this.getShaders(),i=this.getAttributeManager().getBufferLayouts(),n=new Yr(this.context.device,{...e,id:`${this.props.id}-fill`,bufferLayout:i,isInstanced:!0}),r=new Yr(this.context.device,{...e,id:`${this.props.id}-wireframe`,bufferLayout:i,isInstanced:!0});return{fillModel:n,wireframeModel:r,models:[r,n]}}_updateGeometry({diskResolution:e,vertices:i,extruded:n,stroked:r}){const s=this.getGeometry(e,i,n||r);this.setState({fillVertexCount:s.attributes.POSITION.value.length/3});const a=this.state.fillModel,o=this.state.wireframeModel;a.setGeometry(s),a.setTopology("triangle-strip"),a.setIndexBuffer(null),o.setGeometry(s),o.setTopology("line-list")}draw({uniforms:e}){const{lineWidthUnits:i,lineWidthScale:n,lineWidthMinPixels:r,lineWidthMaxPixels:s,radiusUnits:a,elevationScale:o,extruded:l,filled:c,stroked:h,wireframe:A,offset:m,coverage:b,radius:S,angle:M}=this.props,I=this.state.fillModel,O=this.state.wireframeModel,{fillVertexCount:D,edgeDistance:B}=this.state,P={radius:S,angle:M/180*Math.PI,offset:m,extruded:l,stroked:h,coverage:b,elevationScale:o,edgeDistance:B,radiusUnits:ba[a],widthUnits:ba[i],widthScale:n,widthMinPixels:r,widthMaxPixels:s};l&&A&&(O.shaderInputs.setProps({column:{...P,isStroke:!0}}),O.draw(this.context.renderPass)),c&&(I.setVertexCount(D),I.shaderInputs.setProps({column:{...P,isStroke:!1}}),I.draw(this.context.renderPass)),!l&&h&&(I.setVertexCount(D*2/3),I.shaderInputs.setProps({column:{...P,isStroke:!0}}),I.draw(this.context.renderPass))}}xT.layerName="ColumnLayer";xT.defaultProps=ugt;function hgt(t,e,i,n){let r;if(Array.isArray(t[0])){const s=t.length*e;r=new Array(s);for(let a=0;a<t.length;a++)for(let o=0;o<e;o++)r[a*e+o]=t[a][o]||0}else r=t;return i?v$(r,{size:e,gridResolution:i}):n?egt(r,{size:e}):r}const fgt=1,dgt=2,G3=4;class Agt extends d${constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?hgt(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(RL(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}const i=this.getPathLength(e);return i<2?0:this.isClosed(e)?i<3?0:i+2:i}updateGeometryAttributes(e,i){if(i.geometrySize!==0)if(e&&RL(e))for(const n of e){const r=this.getGeometrySize(n);i.geometrySize=r,this.updateGeometryAttributes(n,i),i.vertexStart+=r}else this._updateSegmentTypes(e,i),this._updatePositions(e,i)}_updateSegmentTypes(e,i){const n=this.attributes.segmentTypes,r=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:a}=i;n.fill(0,s,s+a),r?(n[s]=G3,n[s+a-2]=G3):(n[s]+=fgt,n[s+a-2]+=dgt),n[s+a-1]=G3}_updatePositions(e,i){const{positions:n}=this.attributes;if(!n||!e)return;const{vertexStart:r,geometrySize:s}=i,a=new Array(3);for(let o=r,l=0;l<s;o++,l++)this.getPointOnPath(e,l,a),n[o*3]=a[0],n[o*3+1]=a[1],n[o*3+2]=a[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,i,n=[]){const{positionSize:r}=this;i*r>=e.length&&(i+=1-e.length/r);const s=i*r;return n[0]=e[s],n[1]=e[s+1],n[2]=r===3&&e[s+2]||0,n}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:i}=this,n=e.length-i;return e[0]===e[n]&&e[1]===e[n+1]&&(i===2||e[2]===e[n+2])}}function RL(t){return Array.isArray(t[0])}const DL=`uniform pathUniforms {
  float widthScale;
  float widthMinPixels;
  float widthMaxPixels;
  float jointType;
  float capType;
  float miterLimit;
  bool billboard;
  highp int widthUnits;
} path;
`,ggt={name:"path",vs:DL,fs:DL,uniformTypes:{widthScale:"f32",widthMinPixels:"f32",widthMaxPixels:"f32",jointType:"f32",capType:"f32",miterLimit:"f32",billboard:"f32",widthUnits:"i32"}},ygt=`#version 300 es
#define SHADER_NAME path-layer-vertex-shader
in vec2 positions;
in float instanceTypes;
in vec3 instanceStartPositions;
in vec3 instanceEndPositions;
in vec3 instanceLeftPositions;
in vec3 instanceRightPositions;
in vec3 instanceLeftPositions64Low;
in vec3 instanceStartPositions64Low;
in vec3 instanceEndPositions64Low;
in vec3 instanceRightPositions64Low;
in float instanceStrokeWidths;
in vec4 instanceColors;
in vec3 instancePickingColors;
uniform float opacity;
out vec4 vColor;
out vec2 vCornerOffset;
out float vMiterLength;
out vec2 vPathPosition;
out float vPathLength;
out float vJointType;
const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);
float flipIfTrue(bool flag) {
return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
vec2 width
) {
bool isEnd = positions.x > 0.0;
float sideOfPath = positions.y;
float isJoint = float(sideOfPath == 0.0);
vec3 deltaA3 = (currPoint - prevPoint);
vec3 deltaB3 = (nextPoint - currPoint);
mat3 rotationMatrix;
bool needsRotation = !path.billboard && project_needs_rotation(currPoint, rotationMatrix);
if (needsRotation) {
deltaA3 = deltaA3 * rotationMatrix;
deltaB3 = deltaB3 * rotationMatrix;
}
vec2 deltaA = deltaA3.xy / width;
vec2 deltaB = deltaB3.xy / width;
float lenA = length(deltaA);
float lenB = length(deltaB);
vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);
vec2 perpA = vec2(-dirA.y, dirA.x);
vec2 perpB = vec2(-dirB.y, dirB.x);
vec2 tangent = dirA + dirB;
tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
vec2 miterVec = vec2(-tangent.y, tangent.x);
vec2 dir = isEnd ? dirA : dirB;
vec2 perp = isEnd ? perpA : perpB;
float L = isEnd ? lenA : lenB;
float sinHalfA = abs(dot(miterVec, perp));
float cosHalfA = abs(dot(dirA, miterVec));
float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
float cornerPosition = sideOfPath * turnDirection;
float miterSize = 1.0 / max(sinHalfA, EPSILON);
miterSize = mix(
min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
miterSize,
step(0.0, cornerPosition)
);
vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
* (sideOfPath + isJoint * turnDirection);
bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
bool isCap = isStartCap || isEndCap;
if (isCap) {
offsetVec = mix(perp * sideOfPath, dir * path.capType * 4.0 * flipIfTrue(isStartCap), isJoint);
vJointType = path.capType;
} else {
vJointType = path.jointType;
}
vPathLength = L;
vCornerOffset = offsetVec;
vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
vMiterLength = isCap ? isJoint : vMiterLength;
vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
vPathPosition = vec2(
dot(offsetFromStartOfPath, perp),
dot(offsetFromStartOfPath, dir)
);
geometry.uv = vPathPosition;
float isValid = step(instanceTypes, 3.5);
vec3 offset = vec3(offsetVec * width * isValid, 0.0);
if (needsRotation) {
offset = rotationMatrix * offset;
}
return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
if (position.w < EPSILON) {
float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
position = refPosition + (position - refPosition) * r;
}
}
void main() {
geometry.pickingColor = instancePickingColors;
vColor = vec4(instanceColors.rgb, instanceColors.a * layer.opacity);
float isEnd = positions.x;
vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);
vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);
vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);
geometry.worldPosition = currPosition;
vec2 widthPixels = vec2(clamp(
project_size_to_pixel(instanceStrokeWidths * path.widthScale, path.widthUnits),
path.widthMinPixels, path.widthMaxPixels) / 2.0);
vec3 width;
if (path.billboard) {
vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);
clipLine(prevPositionScreen, currPositionScreen);
clipLine(nextPositionScreen, currPositionScreen);
clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));
width = vec3(widthPixels, 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(
prevPositionScreen.xyz / prevPositionScreen.w,
currPositionScreen.xyz / currPositionScreen.w,
nextPositionScreen.xyz / nextPositionScreen.w,
project_pixel_size_to_clipspace(width.xy)
);
DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
} else {
prevPosition = project_position(prevPosition, prevPosition64Low);
currPosition = project_position(currPosition, currPosition64Low);
nextPosition = project_position(nextPosition, nextPosition64Low);
width = vec3(project_pixel_size(widthPixels), 0.0);
DECKGL_FILTER_SIZE(width, geometry);
vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
geometry.position = vec4(currPosition + offset, 1.0);
gl_Position = project_common_position_to_clipspace(geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,pgt=`#version 300 es
#define SHADER_NAME path-layer-fragment-shader
precision highp float;
in vec4 vColor;
in vec2 vCornerOffset;
in float vMiterLength;
in vec2 vPathPosition;
in float vPathLength;
in float vJointType;
out vec4 fragColor;
void main(void) {
geometry.uv = vPathPosition;
if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
discard;
}
if (vJointType < 0.5 && vMiterLength > path.miterLimit + 1.0) {
discard;
}
}
fragColor = vColor;
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,I$=[0,0,0,255],mgt={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:I$},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},X3={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class t0 extends Za{getShaders(){return super.getShaders({vs:ygt,fs:pgt,modules:[ml,Yu,ggt]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){this.getAttributeManager().addInstanced({vertexPositions:{size:3,vertexOffset:1,type:"float64",fp64:this.use64bitPositions(),transition:X3,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:"uint8",update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:X3,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:"unorm8",accessor:"getColor",transition:X3,defaultValue:I$},instancePickingColors:{size:4,type:"uint8",accessor:(n,{index:r,target:s})=>this.encodePickingColor(n&&n.__source?n.__source.index:r,s)}}),this.setState({pathTesselator:new Agt({fp64:this.use64bitPositions()})})}updateState(e){var a;super.updateState(e);const{props:i,changeFlags:n}=e,r=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:o}=this.state,l=i.data.attributes||{};o.updateGeometry({data:i.data,geometryBuffer:l.getPath,buffers:l,normalize:!i._pathType,loop:i._pathType==="loop",getGeometry:i.getPath,positionFormat:i.positionFormat,wrapLongitude:i.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||r.invalidateAll()}n.extensionsChanged&&((a=this.state.model)==null||a.destroy(),this.state.model=this._getModel(),r.invalidateAll())}getPickingInfo(e){const i=super.getPickingInfo(e),{index:n}=i,r=this.props.data;return r[0]&&r[0].__source&&(i.object=r.find(s=>s.__source.index===n)),i}disablePickingIndex(e){const i=this.props.data;if(i[0]&&i[0].__source)for(let n=0;n<i.length;n++)i[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:i,capRounded:n,billboard:r,miterLimit:s,widthUnits:a,widthScale:o,widthMinPixels:l,widthMaxPixels:c}=this.props,h=this.state.model,A={jointType:Number(i),capType:Number(n),billboard:r,widthUnits:ba[a],widthScale:o,miterLimit:s,widthMinPixels:l,widthMaxPixels:c};h.shaderInputs.setProps({path:A}),h.draw(this.context.renderPass)}_getModel(){const e=[0,1,2,1,4,2,1,3,4,3,5,4],i=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Yr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Uu({topology:"triangle-list",attributes:{indices:new Uint16Array(e),positions:{value:new Float32Array(i),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:i}=this.state;e.startIndices=i.vertexStarts,e.value=i.get("positions")}calculateSegmentTypes(e){const{pathTesselator:i}=this.state;e.startIndices=i.vertexStarts,e.value=i.get("segmentTypes")}}t0.defaultProps=mgt;t0.layerName="PathLayer";var ev={exports:{}},CL;function _gt(){if(CL)return ev.exports;CL=1,ev.exports=t,ev.exports.default=t;function t(H,k,G){G=G||2;var lt=k&&k.length,Q=lt?k[0]*G:H.length,mt=e(H,0,Q,G,!0),wt=[];if(!mt||mt.next===mt.prev)return wt;var Dt,te,ie,ft,Ht,Nt,he;if(lt&&(mt=l(H,k,mt,G)),H.length>80*G){Dt=ie=H[0],te=ft=H[1];for(var me=G;me<Q;me+=G)Ht=H[me],Nt=H[me+1],Ht<Dt&&(Dt=Ht),Nt<te&&(te=Nt),Ht>ie&&(ie=Ht),Nt>ft&&(ft=Nt);he=Math.max(ie-Dt,ft-te),he=he!==0?32767/he:0}return n(mt,wt,G,Dt,te,he,0),wt}function e(H,k,G,lt,Q){var mt,wt;if(Q===Ot(H,k,G,lt)>0)for(mt=k;mt<G;mt+=lt)wt=X(mt,H[mt],H[mt+1],wt);else for(mt=G-lt;mt>=k;mt-=lt)wt=X(mt,H[mt],H[mt+1],wt);return wt&&P(wt,wt.next)&&(bt(wt),wt=wt.next),wt}function i(H,k){if(!H)return H;k||(k=H);var G=H,lt;do if(lt=!1,!G.steiner&&(P(G,G.next)||B(G.prev,G,G.next)===0)){if(bt(G),G=k=G.prev,G===G.next)break;lt=!0}else G=G.next;while(lt||G!==k);return k}function n(H,k,G,lt,Q,mt,wt){if(H){!wt&&mt&&b(H,lt,Q,mt);for(var Dt=H,te,ie;H.prev!==H.next;){if(te=H.prev,ie=H.next,mt?s(H,lt,Q,mt):r(H)){k.push(te.i/G|0),k.push(H.i/G|0),k.push(ie.i/G|0),bt(H),H=ie.next,Dt=ie.next;continue}if(H=ie,H===Dt){wt?wt===1?(H=a(i(H),k,G),n(H,k,G,lt,Q,mt,2)):wt===2&&o(H,k,G,lt,Q,mt):n(i(H),k,G,lt,Q,mt,1);break}}}}function r(H){var k=H.prev,G=H,lt=H.next;if(B(k,G,lt)>=0)return!1;for(var Q=k.x,mt=G.x,wt=lt.x,Dt=k.y,te=G.y,ie=lt.y,ft=Q<mt?Q<wt?Q:wt:mt<wt?mt:wt,Ht=Dt<te?Dt<ie?Dt:ie:te<ie?te:ie,Nt=Q>mt?Q>wt?Q:wt:mt>wt?mt:wt,he=Dt>te?Dt>ie?Dt:ie:te>ie?te:ie,me=lt.next;me!==k;){if(me.x>=ft&&me.x<=Nt&&me.y>=Ht&&me.y<=he&&O(Q,Dt,mt,te,wt,ie,me.x,me.y)&&B(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function s(H,k,G,lt){var Q=H.prev,mt=H,wt=H.next;if(B(Q,mt,wt)>=0)return!1;for(var Dt=Q.x,te=mt.x,ie=wt.x,ft=Q.y,Ht=mt.y,Nt=wt.y,he=Dt<te?Dt<ie?Dt:ie:te<ie?te:ie,me=ft<Ht?ft<Nt?ft:Nt:Ht<Nt?Ht:Nt,Me=Dt>te?Dt>ie?Dt:ie:te>ie?te:ie,pe=ft>Ht?ft>Nt?ft:Nt:Ht>Nt?Ht:Nt,Oe=M(he,me,k,G,lt),Ye=M(Me,pe,k,G,lt),Ee=H.prevZ,qe=H.nextZ;Ee&&Ee.z>=Oe&&qe&&qe.z<=Ye;){if(Ee.x>=he&&Ee.x<=Me&&Ee.y>=me&&Ee.y<=pe&&Ee!==Q&&Ee!==wt&&O(Dt,ft,te,Ht,ie,Nt,Ee.x,Ee.y)&&B(Ee.prev,Ee,Ee.next)>=0||(Ee=Ee.prevZ,qe.x>=he&&qe.x<=Me&&qe.y>=me&&qe.y<=pe&&qe!==Q&&qe!==wt&&O(Dt,ft,te,Ht,ie,Nt,qe.x,qe.y)&&B(qe.prev,qe,qe.next)>=0))return!1;qe=qe.nextZ}for(;Ee&&Ee.z>=Oe;){if(Ee.x>=he&&Ee.x<=Me&&Ee.y>=me&&Ee.y<=pe&&Ee!==Q&&Ee!==wt&&O(Dt,ft,te,Ht,ie,Nt,Ee.x,Ee.y)&&B(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.prevZ}for(;qe&&qe.z<=Ye;){if(qe.x>=he&&qe.x<=Me&&qe.y>=me&&qe.y<=pe&&qe!==Q&&qe!==wt&&O(Dt,ft,te,Ht,ie,Nt,qe.x,qe.y)&&B(qe.prev,qe,qe.next)>=0)return!1;qe=qe.nextZ}return!0}function a(H,k,G){var lt=H;do{var Q=lt.prev,mt=lt.next.next;!P(Q,mt)&&j(Q,lt,lt.next,mt)&&V(Q,mt)&&V(mt,Q)&&(k.push(Q.i/G|0),k.push(lt.i/G|0),k.push(mt.i/G|0),bt(lt),bt(lt.next),lt=H=mt),lt=lt.next}while(lt!==H);return i(lt)}function o(H,k,G,lt,Q,mt){var wt=H;do{for(var Dt=wt.next.next;Dt!==wt.prev;){if(wt.i!==Dt.i&&D(wt,Dt)){var te=nt(wt,Dt);wt=i(wt,wt.next),te=i(te,te.next),n(wt,k,G,lt,Q,mt,0),n(te,k,G,lt,Q,mt,0);return}Dt=Dt.next}wt=wt.next}while(wt!==H)}function l(H,k,G,lt){var Q=[],mt,wt,Dt,te,ie;for(mt=0,wt=k.length;mt<wt;mt++)Dt=k[mt]*lt,te=mt<wt-1?k[mt+1]*lt:H.length,ie=e(H,Dt,te,lt,!1),ie===ie.next&&(ie.steiner=!0),Q.push(I(ie));for(Q.sort(c),mt=0;mt<Q.length;mt++)G=h(Q[mt],G);return G}function c(H,k){return H.x-k.x}function h(H,k){var G=A(H,k);if(!G)return k;var lt=nt(G,H);return i(lt,lt.next),i(G,G.next)}function A(H,k){var G=k,lt=H.x,Q=H.y,mt=-1/0,wt;do{if(Q<=G.y&&Q>=G.next.y&&G.next.y!==G.y){var Dt=G.x+(Q-G.y)*(G.next.x-G.x)/(G.next.y-G.y);if(Dt<=lt&&Dt>mt&&(mt=Dt,wt=G.x<G.next.x?G:G.next,Dt===lt))return wt}G=G.next}while(G!==k);if(!wt)return null;var te=wt,ie=wt.x,ft=wt.y,Ht=1/0,Nt;G=wt;do lt>=G.x&&G.x>=ie&&lt!==G.x&&O(Q<ft?lt:mt,Q,ie,ft,Q<ft?mt:lt,Q,G.x,G.y)&&(Nt=Math.abs(Q-G.y)/(lt-G.x),V(G,H)&&(Nt<Ht||Nt===Ht&&(G.x>wt.x||G.x===wt.x&&m(wt,G)))&&(wt=G,Ht=Nt)),G=G.next;while(G!==te);return wt}function m(H,k){return B(H.prev,H,k.prev)<0&&B(k.next,H,H.next)<0}function b(H,k,G,lt){var Q=H;do Q.z===0&&(Q.z=M(Q.x,Q.y,k,G,lt)),Q.prevZ=Q.prev,Q.nextZ=Q.next,Q=Q.next;while(Q!==H);Q.prevZ.nextZ=null,Q.prevZ=null,S(Q)}function S(H){var k,G,lt,Q,mt,wt,Dt,te,ie=1;do{for(G=H,H=null,mt=null,wt=0;G;){for(wt++,lt=G,Dt=0,k=0;k<ie&&(Dt++,lt=lt.nextZ,!!lt);k++);for(te=ie;Dt>0||te>0&&lt;)Dt!==0&&(te===0||!lt||G.z<=lt.z)?(Q=G,G=G.nextZ,Dt--):(Q=lt,lt=lt.nextZ,te--),mt?mt.nextZ=Q:H=Q,Q.prevZ=mt,mt=Q;G=lt}mt.nextZ=null,ie*=2}while(wt>1);return H}function M(H,k,G,lt,Q){return H=(H-G)*Q|0,k=(k-lt)*Q|0,H=(H|H<<8)&16711935,H=(H|H<<4)&252645135,H=(H|H<<2)&858993459,H=(H|H<<1)&1431655765,k=(k|k<<8)&16711935,k=(k|k<<4)&252645135,k=(k|k<<2)&858993459,k=(k|k<<1)&1431655765,H|k<<1}function I(H){var k=H,G=H;do(k.x<G.x||k.x===G.x&&k.y<G.y)&&(G=k),k=k.next;while(k!==H);return G}function O(H,k,G,lt,Q,mt,wt,Dt){return(Q-wt)*(k-Dt)>=(H-wt)*(mt-Dt)&&(H-wt)*(lt-Dt)>=(G-wt)*(k-Dt)&&(G-wt)*(mt-Dt)>=(Q-wt)*(lt-Dt)}function D(H,k){return H.next.i!==k.i&&H.prev.i!==k.i&&!$(H,k)&&(V(H,k)&&V(k,H)&&Z(H,k)&&(B(H.prev,H,k.prev)||B(H,k.prev,k))||P(H,k)&&B(H.prev,H,H.next)>0&&B(k.prev,k,k.next)>0)}function B(H,k,G){return(k.y-H.y)*(G.x-k.x)-(k.x-H.x)*(G.y-k.y)}function P(H,k){return H.x===k.x&&H.y===k.y}function j(H,k,G,lt){var Q=F(B(H,k,G)),mt=F(B(H,k,lt)),wt=F(B(G,lt,H)),Dt=F(B(G,lt,k));return!!(Q!==mt&&wt!==Dt||Q===0&&N(H,G,k)||mt===0&&N(H,lt,k)||wt===0&&N(G,H,lt)||Dt===0&&N(G,k,lt))}function N(H,k,G){return k.x<=Math.max(H.x,G.x)&&k.x>=Math.min(H.x,G.x)&&k.y<=Math.max(H.y,G.y)&&k.y>=Math.min(H.y,G.y)}function F(H){return H>0?1:H<0?-1:0}function $(H,k){var G=H;do{if(G.i!==H.i&&G.next.i!==H.i&&G.i!==k.i&&G.next.i!==k.i&&j(G,G.next,H,k))return!0;G=G.next}while(G!==H);return!1}function V(H,k){return B(H.prev,H,H.next)<0?B(H,k,H.next)>=0&&B(H,H.prev,k)>=0:B(H,k,H.prev)<0||B(H,H.next,k)<0}function Z(H,k){var G=H,lt=!1,Q=(H.x+k.x)/2,mt=(H.y+k.y)/2;do G.y>mt!=G.next.y>mt&&G.next.y!==G.y&&Q<(G.next.x-G.x)*(mt-G.y)/(G.next.y-G.y)+G.x&&(lt=!lt),G=G.next;while(G!==H);return lt}function nt(H,k){var G=new Tt(H.i,H.x,H.y),lt=new Tt(k.i,k.x,k.y),Q=H.next,mt=k.prev;return H.next=k,k.prev=H,G.next=Q,Q.prev=G,lt.next=G,G.prev=lt,mt.next=lt,lt.prev=mt,lt}function X(H,k,G,lt){var Q=new Tt(H,k,G);return lt?(Q.next=lt.next,Q.prev=lt,lt.next.prev=Q,lt.next=Q):(Q.prev=Q,Q.next=Q),Q}function bt(H){H.next.prev=H.prev,H.prev.next=H.next,H.prevZ&&(H.prevZ.nextZ=H.nextZ),H.nextZ&&(H.nextZ.prevZ=H.prevZ)}function Tt(H,k,G){this.i=H,this.x=k,this.y=G,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}t.deviation=function(H,k,G,lt){var Q=k&&k.length,mt=Q?k[0]*G:H.length,wt=Math.abs(Ot(H,0,mt,G));if(Q)for(var Dt=0,te=k.length;Dt<te;Dt++){var ie=k[Dt]*G,ft=Dt<te-1?k[Dt+1]*G:H.length;wt-=Math.abs(Ot(H,ie,ft,G))}var Ht=0;for(Dt=0;Dt<lt.length;Dt+=3){var Nt=lt[Dt]*G,he=lt[Dt+1]*G,me=lt[Dt+2]*G;Ht+=Math.abs((H[Nt]-H[me])*(H[he+1]-H[Nt+1])-(H[Nt]-H[he])*(H[me+1]-H[Nt+1]))}return wt===0&&Ht===0?0:Math.abs((Ht-wt)/wt)};function Ot(H,k,G,lt){for(var Q=0,mt=k,wt=G-lt;mt<G;mt+=lt)Q+=(H[wt]-H[mt])*(H[mt+1]+H[wt+1]),wt=mt;return Q}return t.flatten=function(H){for(var k=H[0][0].length,G={vertices:[],holes:[],dimensions:k},lt=0,Q=0;Q<H.length;Q++){for(var mt=0;mt<H[Q].length;mt++)for(var wt=0;wt<k;wt++)G.vertices.push(H[Q][mt][wt]);Q>0&&(lt+=H[Q-1].length,G.holes.push(lt))}return G},ev.exports}var bgt=_gt();const vgt=dk(bgt),iv=lO.CLOCKWISE,PL=lO.COUNTER_CLOCKWISE,Mu={};function Tgt(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function zm(t){return"positions"in t?t.positions:t}function Ev(t){return"holeIndices"in t?t.holeIndices:null}function Sgt(t){return Array.isArray(t[0])}function wgt(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function Mgt(t){const e=t[0],i=t[t.length-1];return e[0]===i[0]&&e[1]===i[1]&&e[2]===i[2]}function Igt(t,e,i,n){for(let r=0;r<e;r++)if(t[i+r]!==t[n-e+r])return!1;return!0}function xL(t,e,i,n,r){let s=e;const a=i.length;for(let o=0;o<a;o++)for(let l=0;l<n;l++)t[s++]=i[o][l]||0;if(!Mgt(i))for(let o=0;o<n;o++)t[s++]=i[0][o]||0;return Mu.start=e,Mu.end=s,Mu.size=n,cO(t,r,Mu),s}function NL(t,e,i,n,r=0,s,a){s=s||i.length;const o=s-r;if(o<=0)return e;let l=e;for(let c=0;c<o;c++)t[l++]=i[r+c];if(!Igt(i,n,r,s))for(let c=0;c<n;c++)t[l++]=i[r+c];return Mu.start=e,Mu.end=l,Mu.size=n,cO(t,a,Mu),l}function E$(t,e){Tgt(t);const i=[],n=[];if("positions"in t){const{positions:r,holeIndices:s}=t;if(s){let a=0;for(let o=0;o<=s.length;o++)a=NL(i,a,r,e,s[o-1],s[o],o===0?iv:PL),n.push(a);return n.pop(),{positions:i,holeIndices:n}}t=r}if(!Sgt(t))return NL(i,0,t,e,0,i.length,iv),i;if(!wgt(t)){let r=0;for(const[s,a]of t.entries())r=xL(i,r,a,e,s===0?iv:PL),n.push(r);return n.pop(),{positions:i,holeIndices:n}}return xL(i,0,t,e,iv),i}function Q3(t,e,i){const n=t.length/3;let r=0;for(let s=0;s<n;s++){const a=(s+1)%n;r+=t[s*3+e]*t[a*3+i],r-=t[a*3+e]*t[s*3+i]}return Math.abs(r/2)}function FL(t,e,i,n){const r=t.length/3;for(let s=0;s<r;s++){const a=s*3,o=t[a+0],l=t[a+1],c=t[a+2];t[a+e]=o,t[a+i]=l,t[a+n]=c}}function Egt(t,e,i,n){let r=Ev(t);r&&(r=r.map(o=>o/e));let s=zm(t);const a=n&&e===3;if(i){const o=s.length;s=s.slice();const l=[];for(let c=0;c<o;c+=e){l[0]=s[c],l[1]=s[c+1],a&&(l[2]=s[c+2]);const h=i(l);s[c]=h[0],s[c+1]=h[1],a&&(s[c+2]=h[2])}}if(a){const o=Q3(s,0,1),l=Q3(s,0,2),c=Q3(s,1,2);if(!o&&!l&&!c)return[];o>l&&o>c||(l>c?(i||(s=s.slice()),FL(s,0,2,1)):(i||(s=s.slice()),FL(s,2,0,1)))}return vgt(s,r,e)}class Bgt extends d${constructor(e){const{fp64:i,IndexType:n=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:i?Float64Array:Float32Array},vertexValid:{type:Uint16Array,size:1},indices:{type:n,size:1}}})}get(e){const{attributes:i}=this;return e==="indices"?i.indices&&i.indices.subarray(0,this.vertexCount):i[e]}updateGeometry(e){super.updateGeometry(e);const i=this.buffers.indices;if(i)this.vertexCount=(i.value||i).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const i=E$(e,this.positionSize);return this.opts.resolution?T$(zm(i),Ev(i),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?igt(zm(i),Ev(i),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):i}return e}getGeometrySize(e){if(LL(e)){let i=0;for(const n of e)i+=this.getGeometrySize(n);return i}return zm(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,i){if(e&&LL(e))for(const n of e){const r=this.getGeometrySize(n);i.geometrySize=r,this.updateGeometryAttributes(n,i),i.vertexStart+=r,i.indexStart=this.indexStarts[i.geometryIndex+1]}else{const n=e;this._updateIndices(n,i),this._updatePositions(n,i),this._updateVertexValid(n,i)}}_updateIndices(e,{geometryIndex:i,vertexStart:n,indexStart:r}){const{attributes:s,indexStarts:a,typedArrayManager:o}=this;let l=s.indices;if(!l||!e)return;let c=r;const h=Egt(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=o.allocate(l,r+h.length,{copy:!0});for(let A=0;A<h.length;A++)l[c++]=h[A]+n;a[i+1]=r+h.length,s.indices=l}_updatePositions(e,{vertexStart:i,geometrySize:n}){const{attributes:{positions:r},positionSize:s}=this;if(!r||!e)return;const a=zm(e);for(let o=i,l=0;l<n;o++,l++){const c=a[l*s],h=a[l*s+1],A=s>2?a[l*s+2]:0;r[o*3]=c,r[o*3+1]=h,r[o*3+2]=A}}_updateVertexValid(e,{vertexStart:i,geometrySize:n}){const{positionSize:r}=this,s=this.attributes.vertexValid,a=e&&Ev(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,i):s.fill(1,i,i+n),a)for(let o=0;o<a.length;o++)s[i+a[o]/r-1]=0;s[i+n-1]=0}}function LL(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const UL=`uniform solidPolygonUniforms {
  bool extruded;
  bool isWireframe;
  float elevationScale;
} solidPolygon;
`,Ogt={name:"solidPolygon",vs:UL,fs:UL,uniformTypes:{extruded:"f32",isWireframe:"f32",elevationScale:"f32"}},B$=`in vec4 fillColors;
in vec4 lineColors;
in vec3 pickingColors;
out vec4 vColor;
struct PolygonProps {
vec3 positions;
vec3 positions64Low;
vec3 normal;
float elevations;
};
vec3 project_offset_normal(vec3 vector) {
if (project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
project.coordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
return normalize(vector * project.commonUnitsPerWorldUnit);
}
return project_normal(vector);
}
void calculatePosition(PolygonProps props) {
vec3 pos = props.positions;
vec3 pos64Low = props.positions64Low;
vec3 normal = props.normal;
vec4 colors = solidPolygon.isWireframe ? lineColors : fillColors;
geometry.worldPosition = props.positions;
geometry.pickingColor = pickingColors;
if (solidPolygon.extruded) {
pos.z += props.elevations * solidPolygon.elevationScale;
}
gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
if (solidPolygon.extruded) {
#ifdef IS_SIDE_VERTEX
normal = project_offset_normal(normal);
#else
normal = project_normal(normal);
#endif
geometry.normal = normal;
vec3 lightColor = lighting_getLightColor(colors.rgb, project.cameraPosition, geometry.position.xyz, geometry.normal);
vColor = vec4(lightColor, colors.a * layer.opacity);
} else {
vColor = vec4(colors.rgb, colors.a * layer.opacity);
}
DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Rgt=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader
in vec3 vertexPositions;
in vec3 vertexPositions64Low;
in float elevations;
${B$}
void main(void) {
PolygonProps props;
props.positions = vertexPositions;
props.positions64Low = vertexPositions64Low;
props.elevations = elevations;
props.normal = vec3(0.0, 0.0, 1.0);
calculatePosition(props);
}
`,Dgt=`#version 300 es
#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX
in vec2 positions;
in vec3 vertexPositions;
in vec3 nextVertexPositions;
in vec3 vertexPositions64Low;
in vec3 nextVertexPositions64Low;
in float elevations;
in float instanceVertexValid;
${B$}
void main(void) {
if(instanceVertexValid < 0.5){
gl_Position = vec4(0.);
return;
}
PolygonProps props;
vec3 pos;
vec3 pos64Low;
vec3 nextPos;
vec3 nextPos64Low;
#if RING_WINDING_ORDER_CW == 1
pos = vertexPositions;
pos64Low = vertexPositions64Low;
nextPos = nextVertexPositions;
nextPos64Low = nextVertexPositions64Low;
#else
pos = nextVertexPositions;
pos64Low = nextVertexPositions64Low;
nextPos = vertexPositions;
nextPos64Low = vertexPositions64Low;
#endif
props.positions = mix(pos, nextPos, positions.x);
props.positions64Low = mix(pos64Low, nextPos64Low, positions.x);
props.normal = vec3(
pos.y - nextPos.y + (pos64Low.y - nextPos64Low.y),
nextPos.x - pos.x + (nextPos64Low.x - pos64Low.x),
0.0);
props.elevations = elevations * positions.y;
calculatePosition(props);
}
`,Cgt=`#version 300 es
#define SHADER_NAME solid-polygon-layer-fragment-shader
precision highp float;
in vec4 vColor;
out vec4 fragColor;
void main(void) {
fragColor = vColor;
geometry.uv = vec2(0.);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,v2=[0,0,0,255],Pgt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:v2},getLineColor:{type:"accessor",value:v2},material:!0},nv={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class e0 extends Za{getShaders(e){return super.getShaders({vs:e==="top"?Rgt:Dgt,fs:Cgt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[ml,OT,Yu,Ogt]})}get wrapLongitude(){return!1}getBounds(){var e;return(e=this.getAttributeManager())==null?void 0:e.getBounds(["vertexPositions"])}initializeState(){const{viewport:e}=this.context;let{coordinateSystem:i}=this.props;const{_full3d:n}=this.props;e.isGeospatial&&i===Hi.DEFAULT&&(i=Hi.LNGLAT);let r;i===Hi.LNGLAT&&(n?r=e.projectPosition.bind(e):r=e.projectFlat.bind(e)),this.setState({numInstances:0,polygonTesselator:new Bgt({preproject:r,fp64:this.use64bitPositions(),IndexType:Uint32Array})});const s=this.getAttributeManager(),a=!0;s.remove(["instancePickingColors"]),s.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},vertexPositions:{size:3,type:"float64",stepMode:"dynamic",fp64:this.use64bitPositions(),transition:nv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{nextVertexPositions:{vertexOffset:1}}},instanceVertexValid:{size:1,type:"uint16",stepMode:"instance",update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,stepMode:"dynamic",transition:nv,accessor:"getElevation"},fillColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:nv,accessor:"getFillColor",defaultValue:v2},lineColors:{size:this.props.colorFormat.length,type:"unorm8",stepMode:"dynamic",transition:nv,accessor:"getLineColor",defaultValue:v2},pickingColors:{size:4,type:"uint8",stepMode:"dynamic",accessor:(o,{index:l,target:c})=>this.encodePickingColor(o&&o.__source?o.__source.index:l,c)}})}getPickingInfo(e){const i=super.getPickingInfo(e),{index:n}=i,r=this.props.data;return r[0]&&r[0].__source&&(i.object=r.find(s=>s.__source.index===n)),i}disablePickingIndex(e){const i=this.props.data;if(i[0]&&i[0].__source)for(let n=0;n<i.length;n++)i[n].__source.index===e&&this._disablePickingIndex(n);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:i,filled:n,wireframe:r,elevationScale:s}=this.props,{topModel:a,sideModel:o,wireframeModel:l,polygonTesselator:c}=this.state,h={extruded:!!i,elevationScale:s,isWireframe:!1};l&&r&&(l.setInstanceCount(c.instanceCount-1),l.shaderInputs.setProps({solidPolygon:{...h,isWireframe:!0}}),l.draw(this.context.renderPass)),o&&n&&(o.setInstanceCount(c.instanceCount-1),o.shaderInputs.setProps({solidPolygon:h}),o.draw(this.context.renderPass)),a&&n&&(a.setVertexCount(c.vertexCount),a.shaderInputs.setProps({solidPolygon:h}),a.draw(this.context.renderPass))}updateState(e){var o;super.updateState(e),this.updateGeometry(e);const{props:i,oldProps:n,changeFlags:r}=e,s=this.getAttributeManager();(r.extensionsChanged||i.filled!==n.filled||i.extruded!==n.extruded)&&((o=this.state.models)==null||o.forEach(l=>l.destroy()),this.setState(this._getModels()),s.invalidateAll())}updateGeometry({props:e,oldProps:i,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,a=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(){const{id:e,filled:i,extruded:n}=this.props;let r,s,a;if(i){const o=this.getShaders("top");o.defines.NON_INSTANCED_MODEL=1;const l=this.getAttributeManager().getBufferLayouts({isInstanced:!1});r=new Yr(this.context.device,{...o,id:`${e}-top`,topology:"triangle-list",bufferLayout:l,isIndexed:!0,userData:{excludeAttributes:{instanceVertexValid:!0}}})}if(n){const o=this.getAttributeManager().getBufferLayouts({isInstanced:!0});s=new Yr(this.context.device,{...this.getShaders("side"),id:`${e}-side`,bufferLayout:o,geometry:new Uu({topology:"triangle-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,1,1,0,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}}),a=new Yr(this.context.device,{...this.getShaders("side"),id:`${e}-wireframe`,bufferLayout:o,geometry:new Uu({topology:"line-strip",attributes:{positions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),isInstanced:!0,userData:{excludeAttributes:{indices:!0}}})}return{models:[s,a,r].filter(Boolean),topModel:r,sideModel:s,wireframeModel:a}}calculateIndices(e){const{polygonTesselator:i}=this.state;e.startIndices=i.indexStarts,e.value=i.get("indices")}calculatePositions(e){const{polygonTesselator:i}=this.state;e.startIndices=i.vertexStarts,e.value=i.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}e0.defaultProps=Pgt;e0.layerName="SolidPolygonLayer";function xgt({data:t,getIndex:e,dataRange:i,replace:n}){const{startRow:r=0,endRow:s=1/0}=i,a=t.length;let o=a,l=a;for(let m=0;m<a;m++){const b=e(t[m]);if(o>m&&b>=r&&(o=m),b>=s){l=m;break}}let c=o;const A=l-o!==n.length?t.slice(l):void 0;for(let m=0;m<n.length;m++)t[c++]=n[m];if(A){for(let m=0;m<A.length;m++)t[c++]=A[m];t.length=c}return{startRow:o,endRow:o+n.length}}const O$=[0,0,0,255],Ngt=[0,0,0,255],Fgt={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:Ngt},getLineColor:{type:"accessor",value:O$},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class s1 extends Gu{initializeState(){this.state={paths:[],pathsDiff:null},this.props.getLineDashArray&&Ji.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(i&&Array.isArray(e.dataChanged)){const n=this.state.paths.slice(),r=e.dataChanged.map(s=>xgt({data:n,getIndex:a=>a.__source.index,dataRange:s,replace:this._getPaths(s)}));this.setState({paths:n,pathsDiff:r})}else i&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:i,getPolygon:n,positionFormat:r,_normalize:s}=this.props,a=[],o=r==="XY"?2:3,{startRow:l,endRow:c}=e,{iterable:h,objectInfo:A}=p0(i,l,c);for(const m of h){A.index++;let b=n(m,A);s&&(b=E$(b,o));const{holeIndices:S}=b,M=b.positions||b;if(S)for(let I=0;I<=S.length;I++){const O=M.slice(S[I-1]||0,S[I]||M.length);a.push(this.getSubLayerRow({path:O},m,A.index))}else a.push(this.getSubLayerRow({path:M},m,A.index))}return a}renderLayers(){const{data:e,_dataDiff:i,stroked:n,filled:r,extruded:s,wireframe:a,_normalize:o,_windingOrder:l,elevationScale:c,transitions:h,positionFormat:A}=this.props,{lineWidthUnits:m,lineWidthScale:b,lineWidthMinPixels:S,lineWidthMaxPixels:M,lineJointRounded:I,lineMiterLimit:O,lineDashJustified:D}=this.props,{getFillColor:B,getLineColor:P,getLineWidth:j,getLineDashArray:N,getElevation:F,getPolygon:$,updateTriggers:V,material:Z}=this.props,{paths:nt,pathsDiff:X}=this.state,bt=this.getSubLayerClass("fill",e0),Tt=this.getSubLayerClass("stroke",t0),Ot=this.shouldRenderSubLayer("fill",nt)&&new bt({_dataDiff:i,extruded:s,elevationScale:c,filled:r,wireframe:a,_normalize:o,_windingOrder:l,getElevation:F,getFillColor:B,getLineColor:s&&a?P:O$,material:Z,transitions:h},this.getSubLayerProps({id:"fill",updateTriggers:V&&{getPolygon:V.getPolygon,getElevation:V.getElevation,getFillColor:V.getFillColor,lineColors:s&&a,getLineColor:V.getLineColor}}),{data:e,positionFormat:A,getPolygon:$}),H=!s&&n&&this.shouldRenderSubLayer("stroke",nt)&&new Tt({_dataDiff:X&&(()=>X),widthUnits:m,widthScale:b,widthMinPixels:S,widthMaxPixels:M,jointRounded:I,miterLimit:O,dashJustified:D,_pathType:"loop",transitions:h&&{getWidth:h.getLineWidth,getColor:h.getLineColor,getPath:h.getPolygon},getColor:this.getSubLayerAccessor(P),getWidth:this.getSubLayerAccessor(j),getDashArray:this.getSubLayerAccessor(N)},this.getSubLayerProps({id:"stroke",updateTriggers:V&&{getWidth:V.getLineWidth,getColor:V.getLineColor,getDashArray:V.getLineDashArray}}),{data:nt,positionFormat:A,getPath:k=>k.path});return[!s&&Ot,H,s&&Ot]}}s1.layerName="PolygonLayer";s1.defaultProps=Fgt;const kL=`uniform sdfUniforms {
  float gamma;
  bool enabled;
  float buffer;
  float outlineBuffer;
  vec4 outlineColor;
} sdf;
`,Lgt={name:"sdf",vs:kL,fs:kL,uniformTypes:{gamma:"f32",enabled:"f32",buffer:"f32",outlineBuffer:"f32",outlineColor:"vec4<f32>"}},Ugt=`#version 300 es
#define SHADER_NAME multi-icon-layer-fragment-shader
precision highp float;
uniform sampler2D iconsTexture;
in vec4 vColor;
in vec2 vTextureCoords;
in vec2 uv;
out vec4 fragColor;
void main(void) {
geometry.uv = uv;
if (!bool(picking.isActive)) {
float alpha = texture(iconsTexture, vTextureCoords).a;
vec4 color = vColor;
if (sdf.enabled) {
float distance = alpha;
alpha = smoothstep(sdf.buffer - sdf.gamma, sdf.buffer + sdf.gamma, distance);
if (sdf.outlineBuffer > 0.0) {
float inFill = alpha;
float inBorder = smoothstep(sdf.outlineBuffer - sdf.gamma, sdf.outlineBuffer + sdf.gamma, distance);
color = mix(sdf.outlineColor, vColor, inFill);
alpha = inBorder;
}
}
float a = alpha * color.a;
if (a < icon.alphaCutoff) {
discard;
}
fragColor = vec4(color.rgb, a * layer.opacity);
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,K3=192/256,jL=[],kgt={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class uO extends sO{getShaders(){const e=super.getShaders();return{...e,modules:[...e.modules,Lgt],fs:Ugt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:"uint8",size:3,accessor:(i,{index:n,target:r})=>this.encodePickingColor(n,r)}})}updateState(e){super.updateState(e);const{props:i,oldProps:n}=e;let{outlineColor:r}=i;r!==n.outlineColor&&(r=r.map(s=>s/255),r[3]=Number.isFinite(r[3])?r[3]:1,this.setState({outlineColor:r})),!i.sdf&&i.outlineWidth&&Ji.warn(`${this.id}: fontSettings.sdf is required to render outline`)()}draw(e){const{sdf:i,smoothing:n,outlineWidth:r}=this.props,{outlineColor:s}=this.state,a=r?Math.max(n,K3*(1-r)):-1,o=this.state.model,l={buffer:K3,outlineBuffer:a,gamma:n,enabled:!!i,outlineColor:s};if(o.shaderInputs.setProps({sdf:l}),super.draw(e),i&&r){const{iconManager:c}=this.state;c.getTexture()&&(o.shaderInputs.setProps({sdf:{...l,outlineBuffer:K3}}),o.draw(this.context.renderPass))}}getInstanceOffset(e){return e?Array.from(e).flatMap(i=>super.getInstanceOffset(i)):jL}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(i=>super.getInstanceIconFrame(i)):jL}}uO.defaultProps=kgt;uO.layerName="MultiIconLayer";const s_=1e20;class jgt{constructor({fontSize:e=24,buffer:i=3,radius:n=8,cutoff:r=.25,fontFamily:s="sans-serif",fontWeight:a="normal",fontStyle:o="normal"}={}){this.buffer=i,this.cutoff=r,this.radius=n;const l=this.size=e+i*4,c=this._createCanvas(l),h=this.ctx=c.getContext("2d",{willReadFrequently:!0});h.font=`${o} ${a} ${e}px ${s}`,h.textBaseline="alphabetic",h.textAlign="left",h.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){const i=document.createElement("canvas");return i.width=i.height=e,i}draw(e){const{width:i,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:s,actualBoundingBoxRight:a}=this.ctx.measureText(e),o=Math.ceil(n),l=0,c=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-s))),h=Math.min(this.size-this.buffer,o+Math.ceil(r)),A=c+2*this.buffer,m=h+2*this.buffer,b=Math.max(A*m,0),S=new Uint8ClampedArray(b),M={data:S,width:A,height:m,glyphWidth:c,glyphHeight:h,glyphTop:o,glyphLeft:l,glyphAdvance:i};if(c===0||h===0)return M;const{ctx:I,buffer:O,gridInner:D,gridOuter:B}=this;I.clearRect(O,O,c,h),I.fillText(e,O,O+o);const P=I.getImageData(O,O,c,h);B.fill(s_,0,b),D.fill(0,0,b);for(let j=0;j<h;j++)for(let N=0;N<c;N++){const F=P.data[4*(j*c+N)+3]/255;if(F===0)continue;const $=(j+O)*A+N+O;if(F===1)B[$]=0,D[$]=s_;else{const V=.5-F;B[$]=V>0?V*V:0,D[$]=V<0?V*V:0}}zL(B,0,0,A,m,A,this.f,this.v,this.z),zL(D,O,O,c,h,A,this.f,this.v,this.z);for(let j=0;j<b;j++){const N=Math.sqrt(B[j])-Math.sqrt(D[j]);S[j]=Math.round(255-255*(N/this.radius+this.cutoff))}return M}}function zL(t,e,i,n,r,s,a,o,l){for(let c=e;c<e+n;c++)VL(t,i*s+c,s,r,a,o,l);for(let c=i;c<i+r;c++)VL(t,c*s+e,1,n,a,o,l)}function VL(t,e,i,n,r,s,a){s[0]=0,a[0]=-s_,a[1]=s_,r[0]=t[e];for(let o=1,l=0,c=0;o<n;o++){r[o]=t[e+o*i];const h=o*o;do{const A=s[l];c=(r[o]-r[A]+h-A*A)/(o-A)/2}while(c<=a[l]&&--l>-1);l++,s[l]=o,a[l]=c,a[l+1]=s_}for(let o=0,l=0;o<n;o++){for(;a[l+1]<o;)l++;const c=s[l],h=o-c;t[e+o*i]=r[c]+h*h}}const zgt=32,Vgt=[];function $gt(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function Wgt({characterSet:t,getFontWidth:e,fontHeight:i,buffer:n,maxCanvasWidth:r,mapping:s={},xOffset:a=0,yOffset:o=0}){let l=0,c=a;const h=i+n*2;for(const A of t)if(!s[A]){const m=e(A);c+m+n*2>r&&(c=0,l++),s[A]={x:c+n,y:o+l*h+n,width:m,height:h,layoutWidth:m,layoutHeight:i},c+=m+n*2}return{mapping:s,xOffset:c,yOffset:o+l*h,canvasHeight:$gt(o+(l+1)*h)}}function R$(t,e,i,n){var s;let r=0;for(let a=e;a<i;a++){const o=t[a];r+=((s=n[o])==null?void 0:s.layoutWidth)||0}return r}function D$(t,e,i,n,r,s){let a=e,o=0;for(let l=e;l<i;l++){const c=R$(t,l,l+1,r);o+c>n&&(a<l&&s.push(l),a=l,o=0),o+=c}return o}function Hgt(t,e,i,n,r,s){let a=e,o=e,l=e,c=0;for(let h=e;h<i;h++)if((t[h]===" "||t[h+1]===" "||h+1===i)&&(l=h+1),l>o){let A=R$(t,o,l,r);c+A>n&&(a<o&&(s.push(o),a=o,c=0),A>n&&(A=D$(t,o,l,n,r,s),a=s[s.length-1])),o=l,c+=A}return c}function qgt(t,e,i,n,r=0,s){s===void 0&&(s=t.length);const a=[];return e==="break-all"?D$(t,r,s,i,n,a):Hgt(t,r,s,i,n,a),a}function Ygt(t,e,i,n,r,s){let a=0,o=0;for(let l=e;l<i;l++){const c=t[l],h=n[c];h?(o||(o=h.layoutHeight),r[l]=a+h.layoutWidth/2,a+=h.layoutWidth):(Ji.warn(`Missing character: ${c} (${c.codePointAt(0)})`)(),r[l]=a,a+=zgt)}s[0]=a,s[1]=o}function Ggt(t,e,i,n,r){var I;const s=Array.from(t),a=s.length,o=new Array(a),l=new Array(a),c=new Array(a),h=(i==="break-word"||i==="break-all")&&isFinite(n)&&n>0,A=[0,0],m=[0,0];let b=0,S=0,M=0;for(let O=0;O<=a;O++){const D=s[O];if((D===`
`||O===a)&&(M=O),M>S){const B=h?qgt(s,i,n,r,S,M):Vgt;for(let P=0;P<=B.length;P++){const j=P===0?S:B[P-1],N=P<B.length?B[P]:M;Ygt(s,j,N,r,o,m);for(let F=j;F<N;F++){o[F]-m[0]/2;const $=s[F],V=((I=r[$])==null?void 0:I.layoutOffsetY)||0;l[F]=b+m[1]/2+V,c[F]=m[0]}b=b+m[1]*e,A[0]=Math.max(A[0],m[0])}S=M}D===`
`&&(o[S]=0,l[S]=0,c[S]=0,S++)}return A[1]=b,{x:o,y:l,rowWidth:c,size:A}}function Xgt({value:t,length:e,stride:i,offset:n,startIndices:r,characterSet:s}){const a=t.BYTES_PER_ELEMENT,o=i?i/a:1,l=n?n/a:0,c=r[e]||Math.ceil((t.length-l)/o),h=s&&new Set,A=new Array(e);let m=t;if(o>1||l>0){const b=t.constructor;m=new b(c);for(let S=0;S<c;S++)m[S]=t[S*o+l]}for(let b=0;b<e;b++){const S=r[b],M=r[b+1]||c,I=m.subarray(S,M);A[b]=String.fromCodePoint.apply(null,I),h&&I.forEach(h.add,h)}if(h)for(const b of h)s.add(String.fromCodePoint(b));return{texts:A,characterCount:c}}class C${constructor(e=5){this._cache={},this._order=[],this.limit=e}get(e){const i=this._cache[e];return i&&(this._deleteOrder(e),this._appendOrder(e)),i}set(e,i){this._cache[e]?(this.delete(e),this._cache[e]=i,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=i,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const i=this._order.indexOf(e);i>=0&&this._order.splice(i,1)}_appendOrder(e){this._order.push(e)}}function Qgt(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const BA={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:Qgt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},$L=1024,WL=.9,HL=1.2,P$=3;let T2=new C$(P$);function Kgt(t,e){let i;typeof e=="string"?i=new Set(Array.from(e)):i=new Set(e);const n=T2.get(t);if(!n)return i;for(const r in n.mapping)i.has(r)&&i.delete(r);return i}function Zgt(t,e){for(let i=0;i<t.length;i++)e.data[4*i+3]=t[i]}function qL(t,e,i,n){t.font=`${n} ${i}px ${e}`,t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function Jgt(t){Ji.assert(Number.isFinite(t)&&t>=P$,"Invalid cache limit"),T2=new C$(t)}class tyt{constructor(){this.props={...BA}}get atlas(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:i}=this.props;return(e*HL+i*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const i=Kgt(this._key,this.props.characterSet),n=T2.get(this._key);if(n&&i.size===0){this._atlas!==n&&(this._atlas=n);return}const r=this._generateFontAtlas(i,n);this._atlas=r,T2.set(this._key,r)}_generateFontAtlas(e,i){const{fontFamily:n,fontWeight:r,fontSize:s,buffer:a,sdf:o,radius:l,cutoff:c}=this.props;let h=i&&i.data;h||(h=document.createElement("canvas"),h.width=$L);const A=h.getContext("2d",{willReadFrequently:!0});qL(A,n,s,r);const{mapping:m,canvasHeight:b,xOffset:S,yOffset:M}=Wgt({getFontWidth:I=>A.measureText(I).width,fontHeight:s*HL,buffer:a,characterSet:e,maxCanvasWidth:$L,...i&&{mapping:i.mapping,xOffset:i.xOffset,yOffset:i.yOffset}});if(h.height!==b){const I=A.getImageData(0,0,h.width,h.height);h.height=b,A.putImageData(I,0,0)}if(qL(A,n,s,r),o){const I=new jgt({fontSize:s,buffer:a,radius:l,cutoff:c,fontFamily:n,fontWeight:`${r}`});for(const O of e){const{data:D,width:B,height:P,glyphTop:j}=I.draw(O);m[O].width=B,m[O].layoutOffsetY=s*WL-j;const N=A.createImageData(B,P);Zgt(D,N),A.putImageData(N,m[O].x,m[O].y)}}else for(const I of e)A.fillText(I,m[I].x,m[I].y+a+s*WL);return{xOffset:S,yOffset:M,mapping:m,data:h,width:h.width,height:h.height}}_getKey(){const{fontFamily:e,fontWeight:i,fontSize:n,buffer:r,sdf:s,radius:a,cutoff:o}=this.props;return s?`${e} ${i} ${n} ${r} ${a} ${o}`:`${e} ${i} ${n} ${r}`}}const YL=`uniform textBackgroundUniforms {
  bool billboard;
  float sizeScale;
  float sizeMinPixels;
  float sizeMaxPixels;
  vec4 borderRadius;
  vec4 padding;
  highp int sizeUnits;
  bool stroked;
} textBackground;
`,eyt={name:"textBackground",vs:YL,fs:YL,uniformTypes:{billboard:"f32",sizeScale:"f32",sizeMinPixels:"f32",sizeMaxPixels:"f32",borderRadius:"vec4<f32>",padding:"vec4<f32>",sizeUnits:"i32",stroked:"f32"}},iyt=`#version 300 es
#define SHADER_NAME text-background-layer-vertex-shader
in vec2 positions;
in vec3 instancePositions;
in vec3 instancePositions64Low;
in vec4 instanceRects;
in float instanceSizes;
in float instanceAngles;
in vec2 instancePixelOffsets;
in float instanceLineWidths;
in vec4 instanceFillColors;
in vec4 instanceLineColors;
in vec3 instancePickingColors;
out vec4 vFillColor;
out vec4 vLineColor;
out float vLineWidth;
out vec2 uv;
out vec2 dimensions;
vec2 rotate_by_angle(vec2 vertex, float angle) {
float angle_radian = radians(angle);
float cos_angle = cos(angle_radian);
float sin_angle = sin(angle_radian);
mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
return rotationMatrix * vertex;
}
void main(void) {
geometry.worldPosition = instancePositions;
geometry.uv = positions;
geometry.pickingColor = instancePickingColors;
uv = positions;
vLineWidth = instanceLineWidths;
float sizePixels = clamp(
project_size_to_pixel(instanceSizes * textBackground.sizeScale, textBackground.sizeUnits),
textBackground.sizeMinPixels, textBackground.sizeMaxPixels
);
dimensions = instanceRects.zw * sizePixels + textBackground.padding.xy + textBackground.padding.zw;
vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-textBackground.padding.xy, textBackground.padding.zw, positions);
pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
pixelOffset += instancePixelOffsets;
pixelOffset.y *= -1.0;
if (textBackground.billboard)  {
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
vec3 offset = vec3(pixelOffset, 0.0);
DECKGL_FILTER_SIZE(offset, geometry);
gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
} else {
vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
DECKGL_FILTER_SIZE(offset_common, geometry);
gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
}
vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vFillColor, geometry);
vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * layer.opacity);
DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,nyt=`#version 300 es
#define SHADER_NAME text-background-layer-fragment-shader
precision highp float;
in vec4 vFillColor;
in vec4 vLineColor;
in float vLineWidth;
in vec2 uv;
in vec2 dimensions;
out vec4 fragColor;
float round_rect(vec2 p, vec2 size, vec4 radii) {
vec2 pixelPositionCB = (p - 0.5) * size;
vec2 sizeCB = size * 0.5;
float maxBorderRadius = min(size.x, size.y) * 0.5;
vec4 borderRadius = vec4(min(radii, maxBorderRadius));
borderRadius.xy =
(pixelPositionCB.x > 0.0) ? borderRadius.xy : borderRadius.zw;
borderRadius.x = (pixelPositionCB.y > 0.0) ? borderRadius.x : borderRadius.y;
vec2 q = abs(pixelPositionCB) - sizeCB + borderRadius.x;
return -(min(max(q.x, q.y), 0.0) + length(max(q, 0.0)) - borderRadius.x);
}
float rect(vec2 p, vec2 size) {
vec2 pixelPosition = p * size;
return min(min(pixelPosition.x, size.x - pixelPosition.x),
min(pixelPosition.y, size.y - pixelPosition.y));
}
vec4 get_stroked_fragColor(float dist) {
float isBorder = smoothedge(dist, vLineWidth);
return mix(vFillColor, vLineColor, isBorder);
}
void main(void) {
geometry.uv = uv;
if (textBackground.borderRadius != vec4(0.0)) {
float distToEdge = round_rect(uv, dimensions, textBackground.borderRadius);
if (textBackground.stroked) {
fragColor = get_stroked_fragColor(distToEdge);
} else {
fragColor = vFillColor;
}
float shapeAlpha = smoothedge(-distToEdge, 0.0);
fragColor.a *= shapeAlpha;
} else {
if (textBackground.stroked) {
float distToEdge = rect(uv, dimensions);
fragColor = get_stroked_fragColor(distToEdge);
} else {
fragColor = vFillColor;
}
}
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,ryt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,borderRadius:{type:"object",value:0},padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class hO extends Za{getShaders(){return super.getShaders({vs:iyt,fs:nyt,modules:[ml,Yu,eyt]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:"float64",fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,type:"unorm8",accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,type:"unorm8",accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){var n;super.updateState(e);const{changeFlags:i}=e;i.extensionsChanged&&((n=this.state.model)==null||n.destroy(),this.state.model=this._getModel(),this.getAttributeManager().invalidateAll())}draw({uniforms:e}){const{billboard:i,sizeScale:n,sizeUnits:r,sizeMinPixels:s,sizeMaxPixels:a,getLineWidth:o}=this.props;let{padding:l,borderRadius:c}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),Array.isArray(c)||(c=[c,c,c,c]);const h=this.state.model,A={billboard:i,stroked:!!o,borderRadius:c,padding:l,sizeUnits:ba[r],sizeScale:n,sizeMinPixels:s,sizeMaxPixels:a};h.shaderInputs.setProps({textBackground:A}),h.draw(this.context.renderPass)}_getModel(){const e=[0,0,1,0,0,1,1,1];return new Yr(this.context.device,{...this.getShaders(),id:this.props.id,bufferLayout:this.getAttributeManager().getBufferLayouts(),geometry:new Uu({topology:"triangle-strip",vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(e)}}}),isInstanced:!0})}}hO.defaultProps=ryt;hO.layerName="TextBackgroundLayer";const GL={start:1,middle:0,end:-1},XL={top:1,center:0,bottom:-1},Z3=[0,0,0,255],syt=1,ayt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Z3},getBorderWidth:{type:"accessor",value:0},backgroundBorderRadius:{type:"object",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:BA.characterSet},fontFamily:BA.fontFamily,fontWeight:BA.fontWeight,lineHeight:syt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Z3},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:Z3},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class fO extends Gu{constructor(){super(...arguments),this.getBoundingRect=(e,i)=>{let{size:[n,r]}=this.transformParagraph(e,i);const{fontSize:s}=this.state.fontAtlasManager.props;n/=s,r/=s;const{getTextAnchor:a,getAlignmentBaseline:o}=this.props,l=GL[typeof a=="function"?a(e,i):a],c=XL[typeof o=="function"?o(e,i):o];return[(l-1)*n/2,(c-1)*r/2,n,r]},this.getIconOffsets=(e,i)=>{const{getTextAnchor:n,getAlignmentBaseline:r}=this.props,{x:s,y:a,rowWidth:o,size:[l,c]}=this.transformParagraph(e,i),h=GL[typeof n=="function"?n(e,i):n],A=XL[typeof r=="function"?r(e,i):r],m=s.length,b=new Array(m*2);let S=0;for(let M=0;M<m;M++){const I=(1-h)*(l-o[M])/2;b[S++]=(h-1)*l/2+I+s[M],b[S++]=(A-1)*c/2+a[M]}return b}}initializeState(){this.state={styleVersion:0,fontAtlasManager:new tyt},this.props.maxWidth>0&&Ji.once(1,"v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:i,oldProps:n,changeFlags:r}=e;(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||i.lineHeight!==n.lineHeight||i.wordBreak!==n.wordBreak||i.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:i,fontWeight:n}=this.props,{fontAtlasManager:r,characterSet:s}=this.state,a={...e,characterSet:s,fontFamily:i,fontWeight:n};if(!r.mapping)return r.setProps(a),!0;for(const o in a)if(a[o]!==r.props[o])return r.setProps(a),!0;return!1}_updateText(){var l;const{data:e,characterSet:i}=this.props,n=(l=e.attributes)==null?void 0:l.getText;let{getText:r}=this.props,s=e.startIndices,a;const o=i==="auto"&&new Set;if(n&&s){const{texts:c,characterCount:h}=Xgt({...ArrayBuffer.isView(n)?{value:n}:n,length:e.length,startIndices:s,characterSet:o});a=h,r=(A,{index:m})=>c[m]}else{const{iterable:c,objectInfo:h}=p0(e);s=[0],a=0;for(const A of c){h.index++;const m=Array.from(r(A,h)||"");o&&m.forEach(o.add,o),a+=m.length,s.push(a)}}this.setState({getText:r,startIndices:s,numInstances:a,characterSet:o||i})}transformParagraph(e,i){const{fontAtlasManager:n}=this.state,r=n.mapping,s=this.state.getText,{wordBreak:a,lineHeight:o,maxWidth:l}=this.props,c=s(e,i)||"";return Ggt(c,o,a,l*n.props.fontSize,r)}renderLayers(){const{startIndices:e,numInstances:i,getText:n,fontAtlasManager:{scale:r,atlas:s,mapping:a},styleVersion:o}=this.state,{data:l,_dataDiff:c,getPosition:h,getColor:A,getSize:m,getAngle:b,getPixelOffset:S,getBackgroundColor:M,getBorderColor:I,getBorderWidth:O,backgroundBorderRadius:D,backgroundPadding:B,background:P,billboard:j,fontSettings:N,outlineWidth:F,outlineColor:$,sizeScale:V,sizeUnits:Z,sizeMinPixels:nt,sizeMaxPixels:X,transitions:bt,updateTriggers:Tt}=this.props,Ot=this.getSubLayerClass("characters",uO),H=this.getSubLayerClass("background",hO);return[P&&new H({getFillColor:M,getLineColor:I,getLineWidth:O,borderRadius:D,padding:B,getPosition:h,getSize:m,getAngle:b,getPixelOffset:S,billboard:j,sizeScale:V,sizeUnits:Z,sizeMinPixels:nt,sizeMaxPixels:X,transitions:bt&&{getPosition:bt.getPosition,getAngle:bt.getAngle,getSize:bt.getSize,getFillColor:bt.getBackgroundColor,getLineColor:bt.getBorderColor,getLineWidth:bt.getBorderWidth,getPixelOffset:bt.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:Tt.getPosition,getAngle:Tt.getAngle,getSize:Tt.getSize,getFillColor:Tt.getBackgroundColor,getLineColor:Tt.getBorderColor,getLineWidth:Tt.getBorderWidth,getPixelOffset:Tt.getPixelOffset,getBoundingRect:{getText:Tt.getText,getTextAnchor:Tt.getTextAnchor,getAlignmentBaseline:Tt.getAlignmentBaseline,styleVersion:o}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new Ot({sdf:N.sdf,smoothing:Number.isFinite(N.smoothing)?N.smoothing:BA.smoothing,outlineWidth:F/(N.radius||BA.radius),outlineColor:$,iconAtlas:s,iconMapping:a,getPosition:h,getColor:A,getSize:m,getAngle:b,getPixelOffset:S,billboard:j,sizeScale:V*r,sizeUnits:Z,sizeMinPixels:nt*r,sizeMaxPixels:X*r,transitions:bt&&{getPosition:bt.getPosition,getAngle:bt.getAngle,getColor:bt.getColor,getSize:bt.getSize,getPixelOffset:bt.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:Tt.getText,getPosition:Tt.getPosition,getAngle:Tt.getAngle,getColor:Tt.getColor,getSize:Tt.getSize,getPixelOffset:Tt.getPixelOffset,getIconOffsets:{getTextAnchor:Tt.getTextAnchor,getAlignmentBaseline:Tt.getAlignmentBaseline,styleVersion:o}}}),{data:l,_dataDiff:c,startIndices:e,numInstances:i,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(e){Jgt(e)}}fO.defaultProps=ayt;fO.layerName="TextLayer";function E_(t){"@babel/helpers - typeof";return E_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E_(t)}function oyt(t,e){if(E_(t)!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e);if(E_(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lyt(t){var e=oyt(t,"string");return E_(e)=="symbol"?e:String(e)}function ja(t,e,i){return e=lyt(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const cyt={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...cyt}};const J3=globalThis.mathgl.config;function SI(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function S2(t,e,i){const n=J3.EPSILON;try{if(t===e)return!0;if(SI(t)&&SI(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!S2(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=J3.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{J3.EPSILON=n}}const QL={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function uyt(t,e,i={}){return hyt(t,i)!==e?(dyt(t,i),!0):!1}function hyt(t,e={}){return Math.sign(dO(t,e))}const i0={x:0,y:1,z:2};function dO(t,e={}){const{start:i=0,end:n=t.length,plane:r="xy"}=e,s=e.size||2;let a=0;const o=i0[r[0]],l=i0[r[1]];for(let c=i,h=n-s;c<n;c+=s)a+=(t[c+o]-t[h+o])*(t[c+l]+t[h+l]),h=c;return a/2}function fyt(t,e,i={}){const{start:n=0,end:r=t.length,size:s=2,isClosed:a}=i,o=(r-n)/s;for(let h=0;h<o-1;++h)e(t[n+h*s],t[n+h*s+1],t[n+(h+1)*s],t[n+(h+1)*s+1],h,h+1);const l=n+(o-1)*s;a||S2(t[n],t[l])&&S2(t[n+1],t[l+1])||e(t[l],t[l+1],t[n],t[n+1],o-1,0)}function dyt(t,e){const{start:i=0,end:n=t.length,size:r=2}=e,s=(n-i)/r,a=Math.floor(s/2);for(let o=0;o<a;++o){const l=i+o*r,c=i+(s-1-o)*r;for(let h=0;h<r;++h){const A=t[l+h];t[l+h]=t[c+h],t[c+h]=A}}}function Ayt(t,e,i={}){return gyt(t,i)!==e?(t.reverse(),!0):!1}function gyt(t,e={}){return Math.sign(x$(t,e))}function x$(t,e={}){const{start:i=0,end:n=t.length,plane:r="xy"}=e;let s=0;const a=i0[r[0]],o=i0[r[1]];for(let l=i,c=n-1;l<n;++l)s+=(t[l][a]-t[c][a])*(t[l][o]+t[c][o]),c=l;return s/2}function yyt(t,e,i={}){const{start:n=0,end:r=t.length,isClosed:s}=i;for(let o=n;o<r-1;++o)e(t[o],t[o+1],o,o+1);s||S2(t[r-1],t[0])||e(t[r-1],t[0],r-1,0)}class pyt{constructor(e,i={}){ja(this,"points",void 0),ja(this,"isFlatArray",void 0),ja(this,"options",void 0),this.points=e,this.isFlatArray=!SI(e[0]),this.options={start:i.start||0,end:i.end||e.length,size:i.size||2,isClosed:i.isClosed},Object.freeze(this)}getSignedArea(){return this.isFlatArray?dO(this.points,this.options):x$(this.points,this.options)}getArea(){return Math.abs(this.getSignedArea())}getWindingDirection(){return Math.sign(this.getSignedArea())}forEachSegment(e){this.isFlatArray?fyt(this.points,(i,n,r,s,a,o)=>{e([i,n],[r,s],a,o)},this.options):yyt(this.points,e,this.options)}modifyWindingDirection(e){return this.isFlatArray?uyt(this.points,e,this.options):Ayt(this.points,e,this.options)}}function myt(t,e,i=2,n,r="xy"){const s=e&&e.length,a=s?e[0]*i:t.length;let o=N$(t,0,a,i,!0,n,r);const l=[];if(!o||o.next===o.prev)return l;let c,h,A,m,b,S,M;if(s&&(o=Syt(t,e,o,i,n,r)),t.length>80*i){m=h=t[0],b=A=t[1];for(let I=i;I<a;I+=i)S=t[I],M=t[I+1],S<m&&(m=S),M<b&&(b=M),S>h&&(h=S),M>A&&(A=M);c=Math.max(h-m,A-b),c=c!==0?32767/c:0}return B_(o,l,i,m,b,c,0),l}function N$(t,e,i,n,r,s,a){let o,l;s===void 0&&(s=dO(t,{start:e,end:i,size:n,plane:a}));let c=i0[a[0]],h=i0[a[1]];if(r===s<0)for(o=e;o<i;o+=n)l=KL(o,t[o+c],t[o+h],l);else for(o=i-n;o>=e;o-=n)l=KL(o,t[o+c],t[o+h],l);return l&&NT(l,l.next)&&(R_(l),l=l.next),l}function vf(t,e){if(!t)return t;e||(e=t);let i=t,n;do if(n=!1,!i.steiner&&(NT(i,i.next)||Hn(i.prev,i,i.next)===0)){if(R_(i),i=e=i.prev,i===i.next)break;n=!0}else i=i.next;while(n||i!==e);return e}function B_(t,e,i,n,r,s,a){if(!t)return;!a&&s&&Byt(t,n,r,s);let o=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?byt(t,n,r,s):_yt(t)){e.push(l.i/i|0),e.push(t.i/i|0),e.push(c.i/i|0),R_(t),t=c.next,o=c.next;continue}if(t=c,t===o){a?a===1?(t=vyt(vf(t),e,i),B_(t,e,i,n,r,s,2)):a===2&&Tyt(t,e,i,n,r,s):B_(vf(t),e,i,n,r,s,1);break}}}function _yt(t){const e=t.prev,i=t,n=t.next;if(Hn(e,i,n)>=0)return!1;const r=e.x,s=i.x,a=n.x,o=e.y,l=i.y,c=n.y,h=r<s?r<a?r:a:s<a?s:a,A=o<l?o<c?o:c:l<c?l:c,m=r>s?r>a?r:a:s>a?s:a,b=o>l?o>c?o:c:l>c?l:c;let S=n.next;for(;S!==e;){if(S.x>=h&&S.x<=m&&S.y>=A&&S.y<=b&&dA(r,o,s,l,a,c,S.x,S.y)&&Hn(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function byt(t,e,i,n){const r=t.prev,s=t,a=t.next;if(Hn(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,h=r.y,A=s.y,m=a.y,b=o<l?o<c?o:c:l<c?l:c,S=h<A?h<m?h:m:A<m?A:m,M=o>l?o>c?o:c:l>c?l:c,I=h>A?h>m?h:m:A>m?A:m,O=wI(b,S,e,i,n),D=wI(M,I,e,i,n);let B=t.prevZ,P=t.nextZ;for(;B&&B.z>=O&&P&&P.z<=D;){if(B.x>=b&&B.x<=M&&B.y>=S&&B.y<=I&&B!==r&&B!==a&&dA(o,h,l,A,c,m,B.x,B.y)&&Hn(B.prev,B,B.next)>=0||(B=B.prevZ,P.x>=b&&P.x<=M&&P.y>=S&&P.y<=I&&P!==r&&P!==a&&dA(o,h,l,A,c,m,P.x,P.y)&&Hn(P.prev,P,P.next)>=0))return!1;P=P.nextZ}for(;B&&B.z>=O;){if(B.x>=b&&B.x<=M&&B.y>=S&&B.y<=I&&B!==r&&B!==a&&dA(o,h,l,A,c,m,B.x,B.y)&&Hn(B.prev,B,B.next)>=0)return!1;B=B.prevZ}for(;P&&P.z<=D;){if(P.x>=b&&P.x<=M&&P.y>=S&&P.y<=I&&P!==r&&P!==a&&dA(o,h,l,A,c,m,P.x,P.y)&&Hn(P.prev,P,P.next)>=0)return!1;P=P.nextZ}return!0}function vyt(t,e,i){let n=t;do{const r=n.prev,s=n.next.next;!NT(r,s)&&F$(r,n,n.next,s)&&O_(r,s)&&O_(s,r)&&(e.push(r.i/i|0),e.push(n.i/i|0),e.push(s.i/i|0),R_(n),R_(n.next),n=t=s),n=n.next}while(n!==t);return vf(n)}function Tyt(t,e,i,n,r,s){let a=t;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Dyt(a,o)){let l=L$(a,o);a=vf(a,a.next),l=vf(l,l.next),B_(a,e,i,n,r,s,0),B_(l,e,i,n,r,s,0);return}o=o.next}a=a.next}while(a!==t)}function Syt(t,e,i,n,r,s){const a=[];let o,l,c,h,A;for(o=0,l=e.length;o<l;o++)c=e[o]*n,h=o<l-1?e[o+1]*n:t.length,A=N$(t,c,h,n,!1,r,s),A===A.next&&(A.steiner=!0),a.push(Ryt(A));for(a.sort(wyt),o=0;o<a.length;o++)i=Myt(a[o],i);return i}function wyt(t,e){return t.x-e.x}function Myt(t,e){const i=Iyt(t,e);if(!i)return e;const n=L$(i,t);return vf(n,n.next),vf(i,i.next)}function Iyt(t,e){let i=e;const n=t.x,r=t.y;let s=-1/0,a;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){const m=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(m<=n&&m>s&&(s=m,a=i.x<i.next.x?i:i.next,m===n))return a}i=i.next}while(i!==e);if(!a)return null;const o=a,l=a.x,c=a.y;let h=1/0,A;i=a;do n>=i.x&&i.x>=l&&n!==i.x&&dA(r<c?n:s,r,l,c,r<c?s:n,r,i.x,i.y)&&(A=Math.abs(r-i.y)/(n-i.x),O_(i,t)&&(A<h||A===h&&(i.x>a.x||i.x===a.x&&Eyt(a,i)))&&(a=i,h=A)),i=i.next;while(i!==o);return a}function Eyt(t,e){return Hn(t.prev,t,e.prev)<0&&Hn(e.next,t,t.next)<0}function Byt(t,e,i,n){let r=t;do r.z===0&&(r.z=wI(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Oyt(r)}function Oyt(t){let e,i,n=1,r,s,a,o,l,c;do{for(s=t,t=null,c=null,r=0;s;){for(r++,o=s,a=0,i=0;i<n&&(a++,o=o.nextZ,!!o);i++);for(l=n;a>0||l>0&&o;)a!==0&&(l===0||!o||s.z<=o.z)?(e=s,s=s.nextZ,a--):(e=o,o=o.nextZ,l--),c?c.nextZ=e:t=e,e.prevZ=c,c=e;s=o}c.nextZ=null,n*=2}while(r>1);return t}function wI(t,e,i,n,r){return t=(t-i)*r|0,e=(e-n)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Ryt(t){let e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t);return i}function dA(t,e,i,n,r,s,a,o){return(r-a)*(e-o)>=(t-a)*(s-o)&&(t-a)*(n-o)>=(i-a)*(e-o)&&(i-a)*(s-o)>=(r-a)*(n-o)}function Dyt(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Cyt(t,e)&&(O_(t,e)&&O_(e,t)&&Pyt(t,e)&&(Hn(t.prev,t,e.prev)||Hn(t,e.prev,e))||NT(t,e)&&Hn(t.prev,t,t.next)>0&&Hn(e.prev,e,e.next)>0)}function Hn(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function NT(t,e){return t.x===e.x&&t.y===e.y}function F$(t,e,i,n){const r=sv(Hn(t,e,i)),s=sv(Hn(t,e,n)),a=sv(Hn(i,n,t)),o=sv(Hn(i,n,e));return!!(r!==s&&a!==o||r===0&&rv(t,i,e)||s===0&&rv(t,n,e)||a===0&&rv(i,t,n)||o===0&&rv(i,e,n))}function rv(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function sv(t){return t>0?1:t<0?-1:0}function Cyt(t,e){let i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&F$(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}function O_(t,e){return Hn(t.prev,t,t.next)<0?Hn(t,e,t.next)>=0&&Hn(t,t.prev,e)>=0:Hn(t,e,t.prev)<0||Hn(t,t.next,e)<0}function Pyt(t,e){let i=t,n=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==t);return n}function L$(t,e){const i=new MI(t.i,t.x,t.y),n=new MI(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function KL(t,e,i,n){const r=new MI(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function R_(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}class MI{constructor(e,i,n){ja(this,"i",void 0),ja(this,"x",void 0),ja(this,"y",void 0),ja(this,"prev",null),ja(this,"next",null),ja(this,"z",0),ja(this,"prevZ",null),ja(this,"nextZ",null),ja(this,"steiner",!1),this.i=e,this.x=i,this.y=n}}function a1(t){return"data"in t?t.getChildAt(0):t.children[0]}function o1(t){return"data"in t?t.getChildAt(0):t.children[0]}function m0(t){return"data"in t?t.getChildAt(0):t.children[0]}function xyt(t){return"data"in t?t.getChildAt(0):t.children[0]}function Nyt(t){return"data"in t?t.getChildAt(0):t.children[0]}function FT(t){return"data"in t?t.getChildAt(0):t.children[0]}var tr=Object.freeze({__proto__:null,getLineStringChild:o1,getMultiLineStringChild:Nyt,getMultiPointChild:xyt,getMultiPolygonChild:FT,getPointChild:a1,getPolygonChild:m0});function LT(t,e){const i=t.valueOffsets,n=m0(t),r=n.valueOffsets,s=o1(n),a=s.type.listSize,o=a1(s),l=i[e],c=i[e+1],h=r[l],A=r[c],m=o.values.subarray(h*a,A*a);return new pyt(m,{size:a,isClosed:!0})}function U$(t){if("data"in t)return new Pi(t.data.map(i=>U$(i)));const e=new Float64Array(t.length);for(let i=0;i<t.length;i++){let n=LT(t,i);e[i]=n.getArea()}return Ri({type:new FA(qr.DOUBLE),length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,data:e})}function k$(t){if("data"in t)return new Pi(t.data.map(i=>k$(i)));const e=new Float64Array(t.length);for(let i=0;i<t.length;i++){let n=LT(t,i);e[i]=n.getSignedArea()}return Ri({type:new FA(qr.DOUBLE),length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,data:e})}function j$(t){if("data"in t)return t.data.map(s=>j$(s));const e=[];let i=0;for(let s=0;s<t.length;s++){const a=Fyt(t,s);e.push(a),i+=a.length}const n=new Uint32Array(i);let r=0;for(const s of e)for(const a of s)n[r]=a,r+=1;return n}function Fyt(t,e){const i=t.valueOffsets,n=m0(t),r=n.valueOffsets,s=o1(n),a=s.type.listSize,o=a1(s),l=i[e],c=i[e+1],h=r[l],A=r[c],m=o.values.subarray(h*a,A*a),b=r[l],S=[];for(let I=l+1;I<c;I++)S.push(r[I]-b);const M=myt(m,S,a);for(let I=0;I<M.length;I++)M[I]+=b;return M}function z$(t){return"data"in t?new Pi(t.data.map(e=>z$(e))):m0(t)}function V$(t){return"data"in t?new Pi(t.data.map(e=>V$(e))):FT(t)}function D_(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}var gl;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(gl||(gl={}));var _a;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(_a||(_a={}));var Tf;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(Tf||(Tf={}));var Vi;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(Vi||(Vi={}));var Sf;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Sf||(Sf={}));var Rt;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"})(Rt||(Rt={}));var sn;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(sn||(sn={}));var $$,W$,H$,q$,Y$,G$,X$,Q$,K$,Z$,J$,tW,eW,iW,nW,rW,sW,aW,oW,lW,cW,uW;class xi{static isNull(e){return(e==null?void 0:e.typeId)===Rt.Null}static isInt(e){return(e==null?void 0:e.typeId)===Rt.Int}static isFloat(e){return(e==null?void 0:e.typeId)===Rt.Float}static isBinary(e){return(e==null?void 0:e.typeId)===Rt.Binary}static isLargeBinary(e){return(e==null?void 0:e.typeId)===Rt.LargeBinary}static isUtf8(e){return(e==null?void 0:e.typeId)===Rt.Utf8}static isLargeUtf8(e){return(e==null?void 0:e.typeId)===Rt.LargeUtf8}static isBool(e){return(e==null?void 0:e.typeId)===Rt.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===Rt.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===Rt.Date}static isTime(e){return(e==null?void 0:e.typeId)===Rt.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===Rt.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===Rt.Interval}static isDuration(e){return(e==null?void 0:e.typeId)===Rt.Duration}static isList(e){return(e==null?void 0:e.typeId)===Rt.List}static isStruct(e){return(e==null?void 0:e.typeId)===Rt.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===Rt.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===Rt.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===Rt.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===Rt.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===Rt.Dictionary}static isDenseUnion(e){return xi.isUnion(e)&&e.mode===gl.Dense}static isSparseUnion(e){return xi.isUnion(e)&&e.mode===gl.Sparse}constructor(e){this.typeId=e}}$$=Symbol.toStringTag;xi[$$]=(t=>(t.children=null,t.ArrayType=Array,t.OffsetArrayType=Int32Array,t[Symbol.toStringTag]="DataType"))(xi.prototype);class II extends xi{constructor(){super(Rt.Null)}toString(){return"Null"}}W$=Symbol.toStringTag;II[W$]=(t=>t[Symbol.toStringTag]="Null")(II.prototype);class w2 extends xi{constructor(e,i){super(Rt.Int),this.isSigned=e,this.bitWidth=i}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}H$=Symbol.toStringTag;w2[H$]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(w2.prototype);class M2 extends xi{constructor(e){super(Rt.Float),this.precision=e}get ArrayType(){switch(this.precision){case _a.HALF:return Uint16Array;case _a.SINGLE:return Float32Array;case _a.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}q$=Symbol.toStringTag;M2[q$]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(M2.prototype);class EI extends xi{constructor(){super(Rt.Binary)}toString(){return"Binary"}}Y$=Symbol.toStringTag;EI[Y$]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(EI.prototype);class ZL extends xi{constructor(){super(Rt.LargeBinary)}toString(){return"LargeBinary"}}G$=Symbol.toStringTag;ZL[G$]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(ZL.prototype);class BI extends xi{constructor(){super(Rt.Utf8)}toString(){return"Utf8"}}X$=Symbol.toStringTag;BI[X$]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(BI.prototype);class JL extends xi{constructor(){super(Rt.LargeUtf8)}toString(){return"LargeUtf8"}}Q$=Symbol.toStringTag;JL[Q$]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(JL.prototype);class OI extends xi{constructor(){super(Rt.Bool)}toString(){return"Bool"}}K$=Symbol.toStringTag;OI[K$]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(OI.prototype);class RI extends xi{constructor(e,i,n=128){super(Rt.Decimal),this.scale=e,this.precision=i,this.bitWidth=n}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Z$=Symbol.toStringTag;RI[Z$]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(RI.prototype);class DI extends xi{constructor(e){super(Rt.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${Tf[this.unit]}>`}}J$=Symbol.toStringTag;DI[J$]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(DI.prototype);class I2 extends xi{constructor(e,i){super(Rt.Time),this.unit=e,this.bitWidth=i}toString(){return`Time${this.bitWidth}<${Vi[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}tW=Symbol.toStringTag;I2[tW]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(I2.prototype);class CI extends xi{constructor(e,i){super(Rt.Timestamp),this.unit=e,this.timezone=i}toString(){return`Timestamp<${Vi[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}eW=Symbol.toStringTag;CI[eW]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(CI.prototype);class PI extends xi{constructor(e){super(Rt.Interval),this.unit=e}toString(){return`Interval<${Sf[this.unit]}>`}}iW=Symbol.toStringTag;PI[iW]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(PI.prototype);class xI extends xi{constructor(e){super(Rt.Duration),this.unit=e}toString(){return`Duration<${Vi[this.unit]}>`}}nW=Symbol.toStringTag;xI[nW]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(xI.prototype);class NI extends xi{constructor(e){super(Rt.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}rW=Symbol.toStringTag;NI[rW]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(NI.prototype);class FI extends xi{constructor(e){super(Rt.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}sW=Symbol.toStringTag;FI[sW]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(FI.prototype);class LI extends xi{constructor(e,i,n){super(Rt.Union),this.mode=e,this.children=n,this.typeIds=i=Int32Array.from(i),this.typeIdToChildIndex=i.reduce((r,s,a)=>(r[s]=a)&&r||r,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}aW=Symbol.toStringTag;LI[aW]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(LI.prototype);class UI extends xi{constructor(e){super(Rt.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}oW=Symbol.toStringTag;UI[oW]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(UI.prototype);class kI extends xi{constructor(e,i){super(Rt.FixedSizeList),this.listSize=e,this.children=[i]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}lW=Symbol.toStringTag;kI[lW]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(kI.prototype);class jI extends xi{constructor(e,i=!1){var n,r,s;if(super(Rt.Map),this.children=[e],this.keysSorted=i,e&&(e.name="entries",!((n=e==null?void 0:e.type)===null||n===void 0)&&n.children)){const a=(r=e==null?void 0:e.type)===null||r===void 0?void 0:r.children[0];a&&(a.name="key");const o=(s=e==null?void 0:e.type)===null||s===void 0?void 0:s.children[1];o&&(o.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}cW=Symbol.toStringTag;jI[cW]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(jI.prototype);const Lyt=(t=>()=>++t)(-1);class tU extends xi{constructor(e,i,n,r){super(Rt.Dictionary),this.indices=i,this.dictionary=e,this.isOrdered=r||!1,this.id=n==null?Lyt():D_(n)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}uW=Symbol.toStringTag;tU[uW]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(tU.prototype);function hW(t){const e=t;switch(t.typeId){case Rt.Decimal:return t.bitWidth/32;case Rt.Timestamp:return 2;case Rt.Date:return 1+e.unit;case Rt.Interval:return 1+e.unit;case Rt.FixedSizeList:return e.listSize;case Rt.FixedSizeBinary:return e.byteWidth;default:return 1}}function UT(t){return xi.isFixedSizeList(t)?!(![2,3,4].includes(t.listSize)||!xi.isFloat(t.children[0])):xi.isStruct(t)?!(![2,3,4].includes(t.children.length)||!t.children.every(e=>["x","y","z","m"].includes(e.name))||!t.children.every(e=>xi.isFloat(e))):!1}function kT(t){return!(!xi.isList(t)||!UT(t.children[0].type))}function AO(t){return!(!xi.isList(t)||!kT(t.children[0].type))}function fW(t){return!(!xi.isList(t)||!UT(t.children[0].type))}function dW(t){return!(!xi.isList(t)||!kT(t.children[0].type))}function AW(t){return!(!xi.isList(t)||!AO(t.children[0].type))}function Uyt(t){return UT(t.type)}function kyt(t){return kT(t.type)}function jyt(t){return AO(t.type)}function zyt(t){return fW(t.type)}function Vyt(t){return dW(t.type)}function $yt(t){return AW(t.type)}function Wyt(t,e){if(!t)throw new Error(`assertion failed ${e}`)}function Hyt(){throw new Error("assertion failed")}function gW(t,e){if(Uyt(t))return yW(t,e);if(kyt(t))return zI(t,e);if(jyt(t))return VI(t,e);if(zyt(t))return zI(t,e);if(Vyt(t))return VI(t,e);if($yt(t))return qyt(t,e);Hyt()}function yW(t,e){Wyt(t.type.listSize===2,"expected 2D");const i=a1(t),n=i.values,r=new Float64Array(n.length);for(let a=0;a<t.length;a++){const o=n[a*2],l=n[a*2+1],[c,h]=e(o,l);r[a*2]=c,r[a*2+1]=h}const s=Ri({type:i.type,length:i.length,nullCount:i.nullCount,nullBitmap:i.nullBitmap,data:r});return Ri({type:t.type,length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,child:s})}function zI(t,e){const i=o1(t),n=yW(i,e);return Ri({type:t.type,length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,child:n,valueOffsets:t.valueOffsets})}function VI(t,e){const i=m0(t),n=zI(i,e);return Ri({type:t.type,length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,child:n,valueOffsets:t.valueOffsets})}function qyt(t,e){const i=FT(t),n=VI(i,e);return Ri({type:t.type,length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,child:n,valueOffsets:t.valueOffsets})}function Yyt(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var wf=1,Mf=2,OA=3,Gyt=4,$I=5,eU=6378137,Xyt=6356752314e-3,iU=.0066943799901413165,a_=484813681109536e-20,Se=Math.PI/2,Qyt=.16666666666666666,Kyt=.04722222222222222,Zyt=.022156084656084655,Ue=1e-10,Wr=.017453292519943295,ol=57.29577951308232,fn=Math.PI/4,C_=Math.PI*2,ur=3.14159265359,Vs={};Vs.greenwich=0;Vs.lisbon=-9.131906111111;Vs.paris=2.337229166667;Vs.bogota=-74.080916666667;Vs.madrid=-3.687938888889;Vs.rome=12.452333333333;Vs.bern=7.439583333333;Vs.jakarta=106.807719444444;Vs.ferro=-17.666666666667;Vs.brussels=4.367975;Vs.stockholm=18.058277777778;Vs.athens=23.7163375;Vs.oslo=10.722916666667;var Jyt={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},nU=/[\s_\-\/\(\)]/g;function ku(t,e){if(t[e])return t[e];for(var i=Object.keys(t),n=e.toLowerCase().replace(nU,""),r=-1,s,a;++r<i.length;)if(s=i[r],a=s.toLowerCase().replace(nU,""),a===n)return t[s]}function WI(t){var e={},i=t.split("+").map(function(o){return o.trim()}).filter(function(o){return o}).reduce(function(o,l){var c=l.split("=");return c.push(!0),o[c[0].toLowerCase()]=c[1],o},{}),n,r,s,a={proj:"projName",datum:"datumCode",rf:function(o){e.rf=parseFloat(o)},lat_0:function(o){e.lat0=o*Wr},lat_1:function(o){e.lat1=o*Wr},lat_2:function(o){e.lat2=o*Wr},lat_ts:function(o){e.lat_ts=o*Wr},lon_0:function(o){e.long0=o*Wr},lon_1:function(o){e.long1=o*Wr},lon_2:function(o){e.long2=o*Wr},alpha:function(o){e.alpha=parseFloat(o)*Wr},gamma:function(o){e.rectified_grid_angle=parseFloat(o)},lonc:function(o){e.longc=o*Wr},x_0:function(o){e.x0=parseFloat(o)},y_0:function(o){e.y0=parseFloat(o)},k_0:function(o){e.k0=parseFloat(o)},k:function(o){e.k0=parseFloat(o)},a:function(o){e.a=parseFloat(o)},b:function(o){e.b=parseFloat(o)},r_a:function(){e.R_A=!0},zone:function(o){e.zone=parseInt(o,10)},south:function(){e.utmSouth=!0},towgs84:function(o){e.datum_params=o.split(",").map(function(l){return parseFloat(l)})},to_meter:function(o){e.to_meter=parseFloat(o)},units:function(o){e.units=o;var l=ku(Jyt,o);l&&(e.to_meter=l.to_meter)},from_greenwich:function(o){e.from_greenwich=o*Wr},pm:function(o){var l=ku(Vs,o);e.from_greenwich=(l||parseFloat(o))*Wr},nadgrids:function(o){o==="@null"?e.datumCode="none":e.nadgrids=o},axis:function(o){var l="ewnsud";o.length===3&&l.indexOf(o.substr(0,1))!==-1&&l.indexOf(o.substr(1,1))!==-1&&l.indexOf(o.substr(2,1))!==-1&&(e.axis=o)},approx:function(){e.approx=!0}};for(n in i)r=i[n],n in a?(s=a[n],typeof s=="function"?s(r):e[s]=r):e[n]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var P_=1,pW=2,mW=3,E2=4,_W=5,gO=-1,tpt=/\s/,ept=/[A-Za-z]/,ipt=/[A-Za-z84_]/,jT=/[,\]]/,bW=/[\d\.E\-\+]/;function Pc(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=P_}Pc.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==E2)for(;tpt.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case P_:return this.neutral(t);case pW:return this.keyword(t);case E2:return this.quoted(t);case _W:return this.afterquote(t);case mW:return this.number(t);case gO:return}};Pc.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=E2;return}if(jT.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Pc.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=P_;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=P_,this.currentObject=this.stack.pop(),this.currentObject||(this.state=gO);return}};Pc.prototype.number=function(t){if(bW.test(t)){this.word+=t;return}if(jT.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Pc.prototype.quoted=function(t){if(t==='"'){this.state=_W;return}this.word+=t};Pc.prototype.keyword=function(t){if(ipt.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=P_;return}if(jT.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Pc.prototype.neutral=function(t){if(ept.test(t)){this.word=t,this.state=pW;return}if(t==='"'){this.word="",this.state=E2;return}if(bW.test(t)){this.word=t,this.state=mW;return}if(jT.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Pc.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===gO)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function npt(t){var e=new Pc(t);return e.output()}function rU(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,r=i.reduce(function(s,a){return AA(a,s),s},n);e&&(t[e]=r)}function AA(t,e){if(!Array.isArray(t)){e[t]=!0;return}var i=t.shift();if(i==="PARAMETER"&&(i=t.shift()),t.length===1){if(Array.isArray(t[0])){e[i]={},AA(t[0],e[i]);return}e[i]=t[0];return}if(!t.length){e[i]=!0;return}if(i==="TOWGS84"){e[i]=t;return}if(i==="AXIS"){i in e||(e[i]=[]),e[i].push(t);return}Array.isArray(i)||(e[i]={});var n;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[i]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&AA(t[2],e[i]);return;case"SPHEROID":case"ELLIPSOID":e[i]={name:t[0],a:t[1],rf:t[2]},t.length===4&&AA(t[3],e[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],rU(e,i,t);return;default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return AA(t,e[i]);return rU(e,i,t)}}var rpt=.017453292519943295;function spt(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],e.length===3&&(t[i]=e[2](t[i])))}function Qo(t){return t*rpt}function apt(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,n=t.AXIS.length;i<n;++i){var r=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;t.type==="GEOGCS"&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function a(c){var h=t.to_meter||1;return c*h}var o=function(c){return spt(t,c)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Qo],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Qo],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",Qo],["lat0","latitude_of_origin",Qo],["lat0","standard_parallel_1",Qo],["lat1","standard_parallel_1",Qo],["lat2","standard_parallel_2",Qo],["azimuth","Azimuth"],["alpha","azimuth",Qo],["srsCode","name"]];l.forEach(o),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=Qo(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=Qo(t.lat0>0?90:-90))}function vW(t){var e=npt(t),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var r={};return AA(e,r),apt(r),r}function ys(t){var e=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?ys[t]=WI(arguments[1]):ys[t]=vW(arguments[1]):ys[t]=i}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(n){Array.isArray(n)?ys.apply(e,n):ys(n)});if(typeof t=="string"){if(t in ys)return ys[t]}else"EPSG"in t?ys["EPSG:"+t.EPSG]=t:"ESRI"in t?ys["ESRI:"+t.ESRI]=t:"IAU2000"in t?ys["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Yyt(ys);function opt(t){return typeof t=="string"}function lpt(t){return t in ys}var cpt=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function upt(t){return cpt.some(function(e){return t.indexOf(e)>-1})}var hpt=["3857","900913","3785","102113"];function fpt(t){var e=ku(t,"authority");if(e){var i=ku(e,"epsg");return i&&hpt.indexOf(i)>-1}}function dpt(t){var e=ku(t,"extension");if(e)return ku(e,"proj4")}function Apt(t){return t[0]==="+"}function gpt(t){if(opt(t)){if(lpt(t))return ys[t];if(upt(t)){var e=vW(t);if(fpt(e))return ys["EPSG:3857"];var i=dpt(e);return i?WI(i):e}if(Apt(t))return WI(t)}else return t}function sU(t,e){t=t||{};var i,n;if(!e)return t;for(n in e)i=e[n],i!==void 0&&(t[n]=i);return t}function yl(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function l1(t){return t<0?-1:1}function He(t){return Math.abs(t)<=ur?t:t-l1(t)*C_}function Co(t,e,i){var n=t*i,r=.5*t;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(Se-e))/n}function x_(t,e){for(var i=.5*t,n,r,s=Se-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(s),r=Se-2*Math.atan(e*Math.pow((1-n)/(1+n),i))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999}function ypt(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=yl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function ppt(t){var e=t.x,i=t.y;if(i*ol>90&&i*ol<-90&&e*ol>180&&e*ol<-180)return null;var n,r;if(Math.abs(Math.abs(i)-Se)<=Ue)return null;if(this.sphere)n=this.x0+this.a*this.k0*He(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(fn+.5*i));else{var s=Math.sin(i),a=Co(this.e,i,s);n=this.x0+this.a*this.k0*He(e-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=n,t.y=r,t}function mpt(t){var e=t.x-this.x0,i=t.y-this.y0,n,r;if(this.sphere)r=Se-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var s=Math.exp(-i/(this.a*this.k0));if(r=x_(this.e,s),r===-9999)return null}return n=He(this.long0+e/(this.a*this.k0)),t.x=n,t.y=r,t}var _pt=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],bpt={init:ypt,forward:ppt,inverse:mpt,names:_pt};function vpt(){}function aU(t){return t}var Tpt=["longlat","identity"],Spt={init:vpt,forward:aU,inverse:aU,names:Tpt},wpt=[bpt,Spt],Bv={},B2=[];function TW(t,e){var i=B2.length;return t.names?(B2[i]=t,t.names.forEach(function(n){Bv[n.toLowerCase()]=i}),this):(console.log(e),!0)}function Mpt(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Bv[e]<"u"&&B2[Bv[e]])return B2[Bv[e]]}function Ipt(){wpt.forEach(TW)}var Ept={start:Ipt,add:TW,get:Mpt},Li={};Li.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Li.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Li.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Li.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Li.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Li.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Li.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Li.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Li.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Li.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Li.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Li.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Li.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Li.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Li.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Li.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Li.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Li.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Li.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Li.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Li.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Li.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Li.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Li.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Li.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Li.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Li.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Li.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Li.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Li.hough={a:6378270,rf:297,ellipseName:"Hough"};Li.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Li.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Li.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Li.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Li.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Li.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Li.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Li.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Li.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Li.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Li.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Li.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Bpt=Li.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Li.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function Opt(t,e,i,n){var r=t*t,s=e*e,a=(r-s)/r,o=0;n?(t*=1-a*(Qyt+a*(Kyt+a*Zyt)),r=t*t,a=0):o=Math.sqrt(a);var l=(r-s)/s;return{es:a,e:o,ep2:l}}function Rpt(t,e,i,n,r){if(!t){var s=ku(Li,n);s||(s=Bpt),t=s.a,e=s.b,i=s.rf}return i&&!e&&(e=(1-1/i)*t),(i===0||Math.abs(t-e)<Ue)&&(r=!0,e=t),{a:t,b:e,rf:i,sphere:r}}var Tr={};Tr.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};Tr.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};Tr.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};Tr.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};Tr.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};Tr.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};Tr.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};Tr.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};Tr.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};Tr.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};Tr.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};Tr.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};Tr.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};Tr.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};Tr.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};Tr.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};Tr.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};Tr.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function Dpt(t,e,i,n,r,s,a){var o={};return t===void 0||t==="none"?o.datum_type=$I:o.datum_type=Gyt,e&&(o.datum_params=e.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=wf),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=Mf,o.datum_params[3]*=a_,o.datum_params[4]*=a_,o.datum_params[5]*=a_,o.datum_params[6]=o.datum_params[6]/1e6+1)),a&&(o.datum_type=OA,o.grids=a),o.a=i,o.b=n,o.es=r,o.ep2=s,o}var SW={};function Cpt(t,e){var i=new DataView(e),n=Npt(i),r=Fpt(i,n),s=Lpt(i,r,n),a={header:r,subgrids:s};return SW[t]=a,a}function Ppt(t){if(t===void 0)return null;var e=t.split(",");return e.map(xpt)}function xpt(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:SW[t]||null,isNull:!1}}function gA(t){return t/3600*Math.PI/180}function Npt(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function Fpt(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:HI(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function HI(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function Lpt(t,e,i){for(var n=176,r=[],s=0;s<e.nSubgrids;s++){var a=kpt(t,n,i),o=jpt(t,n,a,i),l=Math.round(1+(a.upperLongitude-a.lowerLongitude)/a.longitudeInterval),c=Math.round(1+(a.upperLatitude-a.lowerLatitude)/a.latitudeInterval);r.push({ll:[gA(a.lowerLongitude),gA(a.lowerLatitude)],del:[gA(a.longitudeInterval),gA(a.latitudeInterval)],lim:[l,c],count:a.gridNodeCount,cvs:Upt(o)}),n+=176+a.gridNodeCount*16}return r}function Upt(t){return t.map(function(e){return[gA(e.longitudeShift),gA(e.latitudeShift)]})}function kpt(t,e,i){return{name:HI(t,e+8,e+16).trim(),parent:HI(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function jpt(t,e,i,n){for(var r=e+176,s=16,a=[],o=0;o<i.gridNodeCount;o++){var l={latitudeShift:t.getFloat32(r+o*s,n),longitudeShift:t.getFloat32(r+o*s+4,n),latitudeAccuracy:t.getFloat32(r+o*s+8,n),longitudeAccuracy:t.getFloat32(r+o*s+12,n)};a.push(l)}return a}function ul(t,e){if(!(this instanceof ul))return new ul(t);e=e||function(c){if(c)throw c};var i=gpt(t);if(typeof i!="object"){e(t);return}var n=ul.projections.get(i.projName);if(!n){e(t);return}if(i.datumCode&&i.datumCode!=="none"){var r=ku(Tr,i.datumCode);r&&(i.datum_params=i.datum_params||(r.towgs84?r.towgs84.split(","):null),i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var s=Rpt(i.a,i.b,i.rf,i.ellps,i.sphere),a=Opt(s.a,s.b,s.rf,i.R_A),o=Ppt(i.nadgrids),l=i.datum||Dpt(i.datumCode,i.datum_params,s.a,s.b,a.es,a.ep2,o);sU(this,i),sU(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),e(null,this)}ul.projections=Ept;ul.projections.start();function zpt(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===wf?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===Mf?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function wW(t,e,i){var n=t.x,r=t.y,s=t.z?t.z:0,a,o,l,c;if(r<-Se&&r>-1.001*Se)r=-Se;else if(r>Se&&r<1.001*Se)r=Se;else{if(r<-Se)return{x:-1/0,y:-1/0,z:t.z};if(r>Se)return{x:1/0,y:1/0,z:t.z}}return n>Math.PI&&(n-=2*Math.PI),o=Math.sin(r),c=Math.cos(r),l=o*o,a=i/Math.sqrt(1-e*l),{x:(a+s)*c*Math.cos(n),y:(a+s)*c*Math.sin(n),z:(a*(1-e)+s)*o}}function MW(t,e,i,n){var r=1e-12,s=r*r,a=30,o,l,c,h,A,m,b,S,M,I,O,D,B,P=t.x,j=t.y,N=t.z?t.z:0,F,$,V;if(o=Math.sqrt(P*P+j*j),l=Math.sqrt(P*P+j*j+N*N),o/i<r){if(F=0,l/i<r)return $=Se,V=-n,{x:t.x,y:t.y,z:t.z}}else F=Math.atan2(j,P);c=N/l,h=o/l,A=1/Math.sqrt(1-e*(2-e)*h*h),S=h*(1-e)*A,M=c*A,B=0;do B++,b=i/Math.sqrt(1-e*M*M),V=o*S+N*M-b*(1-e*M*M),m=e*b/(b+V),A=1/Math.sqrt(1-m*(2-m)*h*h),I=h*(1-m)*A,O=c*A,D=O*S-I*M,S=I,M=O;while(D*D>s&&B<a);return $=Math.atan(O/Math.abs(I)),{x:F,y:$,z:V}}function Vpt(t,e,i){if(e===wf)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===Mf){var n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5],c=i[6];return{x:c*(t.x-l*t.y+o*t.z)+n,y:c*(l*t.x+t.y-a*t.z)+r,z:c*(-o*t.x+a*t.y+t.z)+s}}}function $pt(t,e,i){if(e===wf)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===Mf){var n=i[0],r=i[1],s=i[2],a=i[3],o=i[4],l=i[5],c=i[6],h=(t.x-n)/c,A=(t.y-r)/c,m=(t.z-s)/c;return{x:h+l*A-o*m,y:-l*h+A+a*m,z:o*h-a*A+m}}}function av(t){return t===wf||t===Mf}function Wpt(t,e,i){if(zpt(t,e)||t.datum_type===$I||e.datum_type===$I)return i;var n=t.a,r=t.es;if(t.datum_type===OA){var s=oU(t,!1,i);if(s!==0)return;n=eU,r=iU}var a=e.a,o=e.b,l=e.es;if(e.datum_type===OA&&(a=eU,o=Xyt,l=iU),r===l&&n===a&&!av(t.datum_type)&&!av(e.datum_type))return i;if(i=wW(i,r,n),av(t.datum_type)&&(i=Vpt(i,t.datum_type,t.datum_params)),av(e.datum_type)&&(i=$pt(i,e.datum_type,e.datum_params)),i=MW(i,l,a,o),e.datum_type===OA){var c=oU(e,!0,i);if(c!==0)return}return i}function oU(t,e,i){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-i.x,y:i.y},r={x:Number.NaN,y:Number.NaN},s=[];t:for(var a=0;a<t.grids.length;a++){var o=t.grids[a];if(s.push(o.name),o.isNull){r=n;break}if(o.mandatory,o.grid===null){if(o.mandatory)return console.log("Unable to find mandatory grid '"+o.name+"'"),-1;continue}for(var l=o.grid.subgrids,c=0,h=l.length;c<h;c++){var A=l[c],m=(Math.abs(A.del[1])+Math.abs(A.del[0]))/1e4,b=A.ll[0]-m,S=A.ll[1]-m,M=A.ll[0]+(A.lim[0]-1)*A.del[0]+m,I=A.ll[1]+(A.lim[1]-1)*A.del[1]+m;if(!(S>n.y||b>n.x||I<n.y||M<n.x)&&(r=Hpt(n,e,A),!isNaN(r.x)))break t}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*ol+" "+n.y*ol+" tried: '"+s+"'"),-1):(i.x=-r.x,i.y=r.y,0)}function Hpt(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var r={x:t.x,y:t.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=He(r.x-Math.PI)+Math.PI;var s=lU(r,i);if(e){if(isNaN(s.x))return n;s.x=r.x-s.x,s.y=r.y-s.y;var a=9,o=1e-12,l,c;do{if(c=lU(s,i),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:r.x-(c.x+s.x),y:r.y-(c.y+s.y)},s.x+=l.x,s.y+=l.y}while(a--&&Math.abs(l.x)>o&&Math.abs(l.y)>o);if(a<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=He(s.x+i.ll[0]),n.y=s.y+i.ll[1]}else isNaN(s.x)||(n.x=t.x+s.x,n.y=t.y+s.y);return n}function lU(t,e){var i={x:t.x/e.del[0],y:t.y/e.del[1]},n={x:Math.floor(i.x),y:Math.floor(i.y)},r={x:i.x-1*n.x,y:i.y-1*n.y},s={x:Number.NaN,y:Number.NaN},a;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return s;a=n.y*e.lim[0]+n.x;var o={x:e.cvs[a][0],y:e.cvs[a][1]};a++;var l={x:e.cvs[a][0],y:e.cvs[a][1]};a+=e.lim[0];var c={x:e.cvs[a][0],y:e.cvs[a][1]};a--;var h={x:e.cvs[a][0],y:e.cvs[a][1]},A=r.x*r.y,m=r.x*(1-r.y),b=(1-r.x)*(1-r.y),S=(1-r.x)*r.y;return s.x=b*o.x+m*l.x+S*h.x+A*c.x,s.y=b*o.y+m*l.y+S*h.y+A*c.y,s}function cU(t,e,i){var n=i.x,r=i.y,s=i.z||0,a,o,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&i.z===void 0))switch(l===0?(a=n,"ew".indexOf(t.axis[l])!==-1?o="x":o="y"):l===1?(a=r,"ns".indexOf(t.axis[l])!==-1?o="y":o="x"):(a=s,o="z"),t.axis[l]){case"e":c[o]=a;break;case"w":c[o]=-a;break;case"n":c[o]=a;break;case"s":c[o]=-a;break;case"u":i[o]!==void 0&&(c.z=a);break;case"d":i[o]!==void 0&&(c.z=-a);break;default:return null}return c}function IW(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function qpt(t){uU(t.x),uU(t.y)}function uU(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Ypt(t,e){return(t.datum.datum_type===wf||t.datum.datum_type===Mf||t.datum.datum_type===OA)&&e.datumCode!=="WGS84"||(e.datum.datum_type===wf||e.datum.datum_type===Mf||e.datum.datum_type===OA)&&t.datumCode!=="WGS84"}function O2(t,e,i,n){var r;Array.isArray(i)?i=IW(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var s=i.z!==void 0;if(qpt(i),t.datum&&e.datum&&Ypt(t,e)&&(r=new ul("WGS84"),i=O2(t,r,i,n),t=r),n&&t.axis!=="enu"&&(i=cU(t,!1,i)),t.projName==="longlat")i={x:i.x*Wr,y:i.y*Wr,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),i=t.inverse(i),!i)return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=Wpt(t.datum,e.datum,i),!!i)return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),e.projName==="longlat"?i={x:i.x*ol,y:i.y*ol,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&e.axis!=="enu"?cU(e,!0,i):(i&&!s&&delete i.z,i)}var hU=ul("WGS84");function tM(t,e,i,n){var r,s,a;return Array.isArray(i)?(r=O2(t,e,i,n)||{x:NaN,y:NaN},i.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(i.splice(3)):[r.x,r.y,i[2]].concat(i.splice(3)):[r.x,r.y].concat(i.splice(2)):[r.x,r.y]):(s=O2(t,e,i,n),a=Object.keys(i),a.length===2||a.forEach(function(o){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;s[o]=i[o]}),s)}function fU(t){return t instanceof ul?t:t.oProj?t.oProj:ul(t)}function va(t,e,i){t=fU(t);var n=!1,r;return typeof e>"u"?(e=t,t=hU,n=!0):(typeof e.x<"u"||Array.isArray(e))&&(i=e,e=t,t=hU,n=!0),e=fU(e),i?tM(t,e,i):(r={forward:function(s,a){return tM(t,e,s,a)},inverse:function(s,a){return tM(e,t,s,a)}},n&&(r.oProj=e),r)}var dU=6,EW="AJSAJS",BW="AFAFAF",yA=65,xs=73,ka=79,Vm=86,$m=90,Gpt={forward:OW,inverse:Xpt,toPoint:RW};function OW(t,e){return e=e||5,Zpt(Qpt({lat:t[1],lon:t[0]}),e)}function Xpt(t){var e=yO(CW(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function RW(t){var e=yO(CW(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function eM(t){return t*(Math.PI/180)}function AU(t){return 180*(t/Math.PI)}function Qpt(t){var e=t.lat,i=t.lon,n=6378137,r=.00669438,s=.9996,a,o,l,c,h,A,m,b=eM(e),S=eM(i),M,I;I=Math.floor((i+180)/6)+1,i===180&&(I=60),e>=56&&e<64&&i>=3&&i<12&&(I=32),e>=72&&e<84&&(i>=0&&i<9?I=31:i>=9&&i<21?I=33:i>=21&&i<33?I=35:i>=33&&i<42&&(I=37)),a=(I-1)*6-180+3,M=eM(a),o=r/(1-r),l=n/Math.sqrt(1-r*Math.sin(b)*Math.sin(b)),c=Math.tan(b)*Math.tan(b),h=o*Math.cos(b)*Math.cos(b),A=Math.cos(b)*(S-M),m=n*((1-r/4-3*r*r/64-5*r*r*r/256)*b-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*b)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*b)-35*r*r*r/3072*Math.sin(6*b));var O=s*l*(A+(1-c+h)*A*A*A/6+(5-18*c+c*c+72*h-58*o)*A*A*A*A*A/120)+5e5,D=s*(m+l*Math.tan(b)*(A*A/2+(5-c+9*h+4*h*h)*A*A*A*A/24+(61-58*c+c*c+600*h-330*o)*A*A*A*A*A*A/720));return e<0&&(D+=1e7),{northing:Math.round(D),easting:Math.round(O),zoneNumber:I,zoneLetter:Kpt(e)}}function yO(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s=.9996,a=6378137,o=.00669438,l,c=(1-Math.sqrt(1-o))/(1+Math.sqrt(1-o)),h,A,m,b,S,M,I,O,D,B=i-5e5,P=e;n<"N"&&(P-=1e7),I=(r-1)*6-180+3,l=o/(1-o),M=P/s,O=M/(a*(1-o/4-3*o*o/64-5*o*o*o/256)),D=O+(3*c/2-27*c*c*c/32)*Math.sin(2*O)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*O)+151*c*c*c/96*Math.sin(6*O),h=a/Math.sqrt(1-o*Math.sin(D)*Math.sin(D)),A=Math.tan(D)*Math.tan(D),m=l*Math.cos(D)*Math.cos(D),b=a*(1-o)/Math.pow(1-o*Math.sin(D)*Math.sin(D),1.5),S=B/(h*s);var j=D-h*Math.tan(D)/b*(S*S/2-(5+3*A+10*m-4*m*m-9*l)*S*S*S*S/24+(61+90*A+298*m+45*A*A-252*l-3*m*m)*S*S*S*S*S*S/720);j=AU(j);var N=(S-(1+2*A+m)*S*S*S/6+(5-2*m+28*A-3*m*m+8*l+24*A*A)*S*S*S*S*S/120)/Math.cos(D);N=I+AU(N);var F;if(t.accuracy){var $=yO({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});F={top:$.lat,right:$.lon,bottom:j,left:N}}else F={lat:j,lon:N};return F}function Kpt(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Zpt(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Jpt(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+n.substr(n.length-5,e)}function Jpt(t,e,i){var n=DW(i),r=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return tmt(r,s,n)}function DW(t){var e=t%dU;return e===0&&(e=dU),e}function tmt(t,e,i){var n=i-1,r=EW.charCodeAt(n),s=BW.charCodeAt(n),a=r+t-1,o=s+e,l=!1;a>$m&&(a=a-$m+yA-1,l=!0),(a===xs||r<xs&&a>xs||(a>xs||r<xs)&&l)&&a++,(a===ka||r<ka&&a>ka||(a>ka||r<ka)&&l)&&(a++,a===xs&&a++),a>$m&&(a=a-$m+yA-1),o>Vm?(o=o-Vm+yA-1,l=!0):l=!1,(o===xs||s<xs&&o>xs||(o>xs||s<xs)&&l)&&o++,(o===ka||s<ka&&o>ka||(o>ka||s<ka)&&l)&&(o++,o===xs&&o++),o>Vm&&(o=o-Vm+yA-1);var c=String.fromCharCode(a)+String.fromCharCode(o);return c}function CW(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,i=null,n="",r,s=0;!/[A-Z]/.test(r=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;n+=r,s++}var a=parseInt(n,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+t;var o=t.charAt(s++);if(o<="A"||o==="B"||o==="Y"||o>="Z"||o==="I"||o==="O")throw"MGRSPoint zone letter "+o+" not handled: "+t;i=t.substring(s,s+=2);for(var l=DW(a),c=emt(i.charAt(0),l),h=imt(i.charAt(1),l);h<nmt(o);)h+=2e6;var A=e-s;if(A%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var m=A/2,b=0,S=0,M,I,O,D,B;return m>0&&(M=1e5/Math.pow(10,m),I=t.substring(s,s+m),b=parseFloat(I)*M,O=t.substring(s+m),S=parseFloat(O)*M),D=b+c,B=S+h,{easting:D,northing:B,zoneLetter:o,zoneNumber:a,accuracy:M}}function emt(t,e){for(var i=EW.charCodeAt(e-1),n=1e5,r=!1;i!==t.charCodeAt(0);){if(i++,i===xs&&i++,i===ka&&i++,i>$m){if(r)throw"Bad character: "+t;i=yA,r=!0}n+=1e5}return n}function imt(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=BW.charCodeAt(e-1),n=0,r=!1;i!==t.charCodeAt(0);){if(i++,i===xs&&i++,i===ka&&i++,i>Vm){if(r)throw"Bad character: "+t;i=yA,r=!0}n+=1e5}return n}function nmt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function n0(t,e,i){if(!(this instanceof n0))return new n0(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}n0.fromMGRS=function(t){return new n0(RW(t))};n0.prototype.toMGRS=function(t){return OW([this.x,this.y],t)};var rmt=1,smt=.25,gU=.046875,yU=.01953125,pU=.01068115234375,amt=.75,omt=.46875,lmt=.013020833333333334,cmt=.007120768229166667,umt=.3645833333333333,hmt=.005696614583333333,fmt=.3076171875;function PW(t){var e=[];e[0]=rmt-t*(smt+t*(gU+t*(yU+t*pU))),e[1]=t*(amt-t*(gU+t*(yU+t*pU)));var i=t*t;return e[2]=i*(omt-t*(lmt+t*cmt)),i*=t,e[3]=i*(umt-t*hmt),e[4]=i*t*fmt,e}function zT(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var dmt=20;function xW(t,e,i){for(var n=1/(1-e),r=t,s=dmt;s;--s){var a=Math.sin(r),o=1-e*a*a;if(o=(zT(r,a,Math.cos(r),i)-t)*(o*Math.sqrt(o))*n,r-=o,Math.abs(o)<Ue)return r}return r}function Amt(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=PW(this.es),this.ml0=zT(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function gmt(t){var e=t.x,i=t.y,n=He(e-this.long0),r,s,a,o=Math.sin(i),l=Math.cos(i);if(this.es){var h=l*n,A=Math.pow(h,2),m=this.ep2*Math.pow(l,2),b=Math.pow(m,2),S=Math.abs(l)>Ue?Math.tan(i):0,M=Math.pow(S,2),I=Math.pow(M,2);r=1-this.es*Math.pow(o,2),h=h/Math.sqrt(r);var O=zT(i,o,l,this.en);s=this.a*(this.k0*h*(1+A/6*(1-M+m+A/20*(5-18*M+I+14*m-58*M*m+A/42*(61+179*I-I*M-479*M)))))+this.x0,a=this.a*(this.k0*(O-this.ml0+o*n*h/2*(1+A/12*(5-M+9*m+4*b+A/30*(61+I-58*M+270*m-330*M*m+A/56*(1385+543*I-I*M-3111*M))))))+this.y0}else{var c=l*Math.sin(n);if(Math.abs(Math.abs(c)-1)<Ue)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,a=l*Math.cos(n)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(a),c>=1){if(c-1>Ue)return 93;a=0}else a=Math.acos(a);i<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return t.x=s,t.y=a,t}function ymt(t){var e,i,n,r,s=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+a/this.k0,i=xW(e,this.es,this.en),Math.abs(i)<Se){var A=Math.sin(i),m=Math.cos(i),b=Math.abs(m)>Ue?Math.tan(i):0,S=this.ep2*Math.pow(m,2),M=Math.pow(S,2),I=Math.pow(b,2),O=Math.pow(I,2);e=1-this.es*Math.pow(A,2);var D=s*Math.sqrt(e)/this.k0,B=Math.pow(D,2);e=e*b,n=i-e*B/(1-this.es)*.5*(1-B/12*(5+3*I-9*S*I+S-4*M-B/30*(61+90*I-252*S*I+45*O+46*S-B/56*(1385+3633*I+4095*O+1574*O*I)))),r=He(this.long0+D*(1-B/6*(1+2*I+S-B/20*(5+28*I+24*O+8*S*I+6*S-B/42*(61+662*I+1320*O+720*O*I))))/m)}else n=Se*l1(a),r=0;else{var o=Math.exp(s/this.k0),l=.5*(o-1/o),c=this.lat0+a/this.k0,h=Math.cos(c);e=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),n=Math.asin(e),a<0&&(n=-n),l===0&&h===0?r=0:r=He(Math.atan2(l,h)+this.long0)}return t.x=r,t.y=n,t}var pmt=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Ov={init:Amt,forward:gmt,inverse:ymt,names:pmt};function NW(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function za(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function mmt(t){var e=1+t,i=e-1;return i===0?t:t*Math.log(e)/i}function _mt(t){var e=Math.abs(t);return e=mmt(e*(1+e/(za(1,e)+1))),t<0?-e:e}function pO(t,e){for(var i=2*Math.cos(2*e),n=t.length-1,r=t[n],s=0,a;--n>=0;)a=-s+i*r+t[n],s=r,r=a;return e+a*Math.sin(2*e)}function bmt(t,e){for(var i=2*Math.cos(e),n=t.length-1,r=t[n],s=0,a;--n>=0;)a=-s+i*r+t[n],s=r,r=a;return Math.sin(e)*a}function vmt(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function FW(t,e,i){for(var n=Math.sin(e),r=Math.cos(e),s=NW(i),a=vmt(i),o=2*r*a,l=-2*n*s,c=t.length-1,h=t[c],A=0,m=0,b=0,S,M;--c>=0;)S=m,M=A,m=h,A=b,h=-S+o*m-l*A+t[c],b=-M+l*m+o*A;return o=n*a,l=r*s,[o*h-l*b,o*b+l*h]}function Tmt(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Ov.init.apply(this),this.forward=Ov.forward,this.inverse=Ov.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),i=i*e,this.cgb[1]=i*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i=i*e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),i=i*e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(-12/5+e*(-24832/14175))),i=i*e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i=i*e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),i=i*e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i=i*e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i=i*e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i=i*e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var n=pO(this.cbg,this.lat0);this.Zb=-this.Qn*(n+bmt(this.gtu,2*n))}function Smt(t){var e=He(t.x-this.long0),i=t.y;i=pO(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),s=Math.sin(e),a=Math.cos(e);i=Math.atan2(n,a*r),e=Math.atan2(s*r,za(n,r*a)),e=_mt(Math.tan(e));var o=FW(this.gtu,2*i,2*e);i=i+o[0],e=e+o[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*i+this.Zb)+this.y0):(l=1/0,c=1/0),t.x=l,t.y=c,t}function wmt(t){var e=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,e=e/this.Qn;var n,r;if(Math.abs(e)<=2.623395162778){var s=FW(this.utg,2*i,2*e);i=i+s[0],e=e+s[1],e=Math.atan(NW(e));var a=Math.sin(i),o=Math.cos(i),l=Math.sin(e),c=Math.cos(e);i=Math.atan2(a*c,za(l,c*o)),e=Math.atan2(l,c*o),n=He(e+this.long0),r=pO(this.cgb,i)}else n=1/0,r=1/0;return t.x=n,t.y=r,t}var Mmt=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"],Rv={init:Tmt,forward:Smt,inverse:wmt,names:Mmt};function Imt(t,e){if(t===void 0){if(t=Math.floor((He(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var Emt="etmerc";function Bmt(){var t=Imt(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Wr,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Rv.init.apply(this),this.forward=Rv.forward,this.inverse=Rv.inverse}var Omt=["Universal Transverse Mercator System","utm"],Rmt={init:Bmt,names:Omt,dependsOn:Emt};function mO(t,e){return Math.pow((1-t)/(1+t),e)}var Dmt=20;function Cmt(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+fn)/(Math.pow(Math.tan(.5*this.lat0+fn),this.C)*mO(this.e*t,this.ratexp))}function Pmt(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+fn),this.C)*mO(this.e*Math.sin(i),this.ratexp))-Se,t.x=this.C*e,t}function xmt(t){for(var e=1e-14,i=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+fn)/this.K,1/this.C),s=Dmt;s>0&&(n=2*Math.atan(r*mO(this.e*Math.sin(t.y),-.5*this.e))-Se,!(Math.abs(n-t.y)<e));--s)t.y=n;return s?(t.x=i,t.y=n,t):null}var _O={init:Cmt,forward:Pmt,inverse:xmt};function Nmt(){_O.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function Fmt(t){var e,i,n,r;return t.x=He(t.x-this.long0),_O.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function Lmt(t){var e,i,n,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=za(t.x,t.y)){var a=2*Math.atan2(s,this.R2);e=Math.sin(a),i=Math.cos(a),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,n=0;return t.x=n,t.y=r,_O.inverse.apply(this,[t]),t.x=He(t.x+this.long0),t}var Umt=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],kmt={init:Nmt,forward:Fmt,inverse:Lmt,names:Umt};function jmt(t,e,i){return e*=i,Math.tan(.5*(Se+t))*Math.pow((1-e)/(1+e),.5*i)}function zmt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ue&&(this.k0=.5*(1+l1(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ue&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ue&&Math.abs(Math.cos(this.lat_ts))>Ue&&(this.k0=.5*this.cons*yl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Co(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=yl(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Se,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function Vmt(t){var e=t.x,i=t.y,n=Math.sin(i),r=Math.cos(i),s,a,o,l,c,h,A=He(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=Ue&&Math.abs(i+this.lat0)<=Ue?(t.x=NaN,t.y=NaN,t):this.sphere?(s=2*this.k0/(1+this.sinlat0*n+this.coslat0*r*Math.cos(A)),t.x=this.a*s*r*Math.sin(A)+this.x0,t.y=this.a*s*(this.coslat0*n-this.sinlat0*r*Math.cos(A))+this.y0,t):(a=2*Math.atan(this.ssfn_(i,n,this.e))-Se,l=Math.cos(a),o=Math.sin(a),Math.abs(this.coslat0)<=Ue?(c=Co(this.e,i*this.con,this.con*n),h=2*this.a*this.k0*c/this.cons,t.x=this.x0+h*Math.sin(e-this.long0),t.y=this.y0-this.con*h*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<Ue?(s=2*this.a*this.k0/(1+l*Math.cos(A)),t.y=s*o):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*l*Math.cos(A))),t.y=s*(this.cosX0*o-this.sinX0*l*Math.cos(A))+this.y0),t.x=s*l*Math.sin(A)+this.x0,t))}function $mt(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,s,a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var o=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,i=this.lat0,a<=Ue?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(o)*this.sinlat0+t.y*Math.sin(o)*this.coslat0/a),Math.abs(this.coslat0)<Ue?this.lat0>0?e=He(this.long0+Math.atan2(t.x,-1*t.y)):e=He(this.long0+Math.atan2(t.x,t.y)):e=He(this.long0+Math.atan2(t.x*Math.sin(o),a*this.coslat0*Math.cos(o)-t.y*this.sinlat0*Math.sin(o))),t.x=e,t.y=i,t)}else if(Math.abs(this.coslat0)<=Ue){if(a<=Ue)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),i=this.con*x_(this.e,n),e=this.con*He(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=Ue?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/a),e=He(this.long0+Math.atan2(t.x*Math.sin(r),a*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*x_(this.e,Math.tan(.5*(Se+s)));return t.x=e,t.y=i,t}var Wmt=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],Hmt={init:zmt,forward:Vmt,inverse:$mt,names:Wmt,ssfn_:jmt};function qmt(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=this.rf,r=1/n,s=2*r-Math.pow(r,2),a=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+a*e)/(1-a*e));this.K=o-this.alpha*l+this.alpha*a/2*c}function Ymt(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*a+this.x0,t}function Gmt(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),o=this.lambda0+a/this.alpha,l=0,c=s,h=-1e3,A=0;Math.abs(c-h)>1e-7;){if(++A>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),h=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=o,t.y=c,t}var Xmt=["somerc"],Qmt={init:qmt,forward:Ymt,inverse:Gmt,names:Xmt},tA=1e-7;function Kmt(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(i)!==-1}function Zmt(){var t,e,i,n,r,s,a,o,l,c,h=0,A,m=0,b=0,S=0,M=0,I=0,O=0;this.no_off=Kmt(this),this.no_rot="no_rot"in this;var D=!1;"alpha"in this&&(D=!0);var B=!1;if("rectified_grid_angle"in this&&(B=!0),D&&(O=this.alpha),B&&(h=this.rectified_grid_angle*Wr),D||B)m=this.longc;else if(b=this.long1,M=this.lat1,S=this.long2,I=this.lat2,Math.abs(M-I)<=tA||(t=Math.abs(M))<=tA||Math.abs(t-Se)<=tA||Math.abs(Math.abs(this.lat0)-Se)<=tA||Math.abs(Math.abs(I)-Se)<=tA)throw new Error;var P=1-this.es;e=Math.sqrt(P),Math.abs(this.lat0)>Ue?(o=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*o*o,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/P),this.A=this.B*this.k0*e/t,n=this.B*e/(i*Math.sqrt(t)),r=n*n-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(Co(this.e,this.lat0,o),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),D||B?(D?(A=Math.asin(Math.sin(O)/n),B||(h=O)):(A=h,O=Math.asin(n*Math.sin(A))),this.lam0=m-Math.asin(.5*(r-1/r)*Math.tan(A))/this.B):(s=Math.pow(Co(this.e,M,Math.sin(M)),this.B),a=Math.pow(Co(this.e,I,Math.sin(I)),this.B),r=this.E/s,l=(a-s)/(a+s),c=this.E*this.E,c=(c-a*s)/(c+a*s),t=b-S,t<-Math.pi?S-=C_:t>Math.pi&&(S+=C_),this.lam0=He(.5*(b+S)-Math.atan(c*Math.tan(.5*this.B*(b-S))/l)/this.B),A=Math.atan(2*Math.sin(this.B*He(b-this.lam0))/(r-1/r)),h=O=Math.asin(n*Math.sin(A))),this.singam=Math.sin(A),this.cosgam=Math.cos(A),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(O))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*A,this.v_pole_n=this.ArB*Math.log(Math.tan(fn-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(fn+r))}function Jmt(t){var e={},i,n,r,s,a,o,l,c;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-Se)>Ue){if(a=this.E/Math.pow(Co(this.e,t.y,Math.sin(t.y)),this.B),o=1/a,i=.5*(a-o),n=.5*(a+o),s=Math.sin(this.B*t.x),r=(i*this.singam-s*this.cosgam)/n,Math.abs(Math.abs(r)-1)<Ue)throw new Error;c=.5*this.ArB*Math.log((1-r)/(1+r)),o=Math.cos(this.B*t.x),Math.abs(o)<tA?l=this.A*t.x:l=this.ArB*Math.atan2(i*this.cosgam+s*this.singam,o)}else c=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function t_t(t){var e,i,n,r,s,a,o,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*i),r=.5*(n-1/n),s=.5*(n+1/n),a=Math.sin(this.BrA*e),o=(a*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(o)-1)<Ue)l.x=0,l.y=o<0?-Se:Se;else{if(l.y=this.E/Math.sqrt((1+o)/(1-o)),l.y=x_(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var e_t=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],i_t={init:Zmt,forward:Jmt,inverse:t_t,names:e_t};function n_t(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ue)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=yl(this.e,e,i),r=Co(this.e,this.lat1,e),s=Math.sin(this.lat2),a=Math.cos(this.lat2),o=yl(this.e,s,a),l=Co(this.e,this.lat2,s),c=Co(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ue?this.ns=Math.log(n/o)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function r_t(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=Ue&&(i=l1(i)*(Se-2*Ue));var n=Math.abs(Math.abs(i)-Se),r,s;if(n>Ue)r=Co(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(r,this.ns);else{if(n=i*this.ns,n<=0)return null;s=0}var a=this.ns*He(e-this.long0);return t.x=this.k0*(s*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-s*Math.cos(a))+this.y0,t}function s_t(t){var e,i,n,r,s,a=(t.x-this.x0)/this.k0,o=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+o*o),i=1):(e=-Math.sqrt(a*a+o*o),i=-1);var l=0;if(e!==0&&(l=Math.atan2(i*a,i*o)),e!==0||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),r=x_(this.e,n),r===-9999)return null}else r=-Se;return s=He(l/this.ns+this.long0),t.x=s,t.y=r,t}var a_t=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],o_t={init:n_t,forward:r_t,inverse:s_t,names:a_t};function l_t(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function c_t(t){var e,i,n,r,s,a,o,l=t.x,c=t.y,h=He(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),n=-h*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),s=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),a=this.n*s,o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=o*Math.cos(a)/1,t.x=o*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t}function u_t(t){var e,i,n,r,s,a,o,l,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),a=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),r=s/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,l=0;var h=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(l=1),o=t.y,h+=1;while(l===0&&h<15);return h>=15?null:t}var h_t=["Krovak","krovak"],f_t={init:l_t,forward:c_t,inverse:u_t,names:h_t};function _s(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}function c1(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function u1(t){return .375*t*(1+.25*t*(1+.46875*t))}function h1(t){return .05859375*t*t*(1+.75*t)}function f1(t){return t*t*t*(35/3072)}function r0(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function _0(t){return Math.abs(t)<Se?t:t-l1(t)*Math.PI}function R2(t,e,i,n,r){var s,a;s=t/e;for(var o=0;o<15;o++)if(a=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=a,Math.abs(a)<=1e-10)return s;return NaN}function d_t(){this.sphere||(this.e0=c1(this.es),this.e1=u1(this.es),this.e2=h1(this.es),this.e3=f1(this.es),this.ml0=this.a*_s(this.e0,this.e1,this.e2,this.e3,this.lat0))}function A_t(t){var e,i,n=t.x,r=t.y;if(n=He(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var s=Math.sin(r),a=Math.cos(r),o=r0(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),c=n*Math.cos(r),h=c*c,A=this.es*a*a/(1-this.es),m=this.a*_s(this.e0,this.e1,this.e2,this.e3,r);e=o*c*(1-h*l*(1/6-(8-l+8*A)*h/120)),i=m-this.ml0+o*s/a*h*(.5+(5-l+6*A)*h/24)}return t.x=e+this.x0,t.y=i+this.y0,t}function g_t(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,n,r;if(this.sphere){var s=i+this.lat0;n=Math.asin(Math.sin(s)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(s))}else{var a=this.ml0/this.a+i,o=R2(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-Se)<=Ue)return t.x=this.long0,t.y=Se,i<0&&(t.y*=-1),t;var l=r0(this.a,this.e,Math.sin(o)),c=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(o),2),A=e*this.a/l,m=A*A;n=o-l*Math.tan(o)/c*A*A*(.5-(1+3*h)*A*A/24),r=A*(1-m*(h/3+(1+3*h)*h*m/15))/Math.cos(o)}return t.x=He(r+this.long0),t.y=_0(n),t}var y_t=["Cassini","Cassini_Soldner","cass"],p_t={init:d_t,forward:A_t,inverse:g_t,names:y_t};function Du(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e}var m_t=1,__t=2,b_t=3,v_t=4;function T_t(){var t=Math.abs(this.lat0);if(Math.abs(t-Se)<Ue?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<Ue?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Du(this.e,1),this.mmf=.5/(1-this.es),this.apa=D_t(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Du(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function S_t(t){var e,i,n,r,s,a,o,l,c,h,A=t.x,m=t.y;if(A=He(A-this.long0),this.sphere){if(s=Math.sin(m),h=Math.cos(m),n=Math.cos(A),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+h*n:1+this.sinph0*s+this.cosph0*h*n,i<=Ue)return null;i=Math.sqrt(2/i),e=i*h*Math.sin(A),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(m+this.lat0)<Ue)return null;i=fn-m*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),e=i*Math.sin(A),i*=n}}else{switch(o=0,l=0,c=0,n=Math.cos(A),r=Math.sin(A),s=Math.sin(m),a=Du(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(o=a/this.qp,l=Math.sqrt(1-o*o)),this.mode){case this.OBLIQ:c=1+this.sinb1*o+this.cosb1*l*n;break;case this.EQUIT:c=1+l*n;break;case this.N_POLE:c=Se+m,a=this.qp-a;break;case this.S_POLE:c=m-Se,a=this.qp+a;break}if(Math.abs(c)<Ue)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?i=this.ymf*c*(this.cosb1*o-this.sinb1*l*n):i=(c=Math.sqrt(2/(1+l*n)))*o*this.ymf,e=this.xmf*c*l*r;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(c=Math.sqrt(a))*r,i=n*(this.mode===this.S_POLE?c:-c)):e=i=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t}function w_t(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,i=t.y/this.a,n,r,s,a,o,l,c;if(this.sphere){var h=0,A,m=0;if(A=Math.sqrt(e*e+i*i),r=A*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=Math.sin(r),h=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(A)<=Ue?0:Math.asin(i*m/A),e*=m,i=h*A;break;case this.OBLIQ:r=Math.abs(A)<=Ue?this.lat0:Math.asin(h*this.sinph0+i*m*this.cosph0/A),e*=m*this.cosph0,i=(h-Math.sin(r)*this.sinph0)*A;break;case this.N_POLE:i=-i,r=Se-r;break;case this.S_POLE:r-=Se;break}n=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,i)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,i*=this.dd,l=Math.sqrt(e*e+i*i),l<Ue)return t.x=this.long0,t.y=this.lat0,t;a=2*Math.asin(.5*l/this.rq),s=Math.cos(a),e*=a=Math.sin(a),this.mode===this.OBLIQ?(c=s*this.sinb1+i*a*this.cosb1/l,o=this.qp*c,i=l*this.cosb1*s-i*this.sinb1*a):(c=i*a/l,o=this.qp*c,i=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),o=e*e+i*i,!o)return t.x=this.long0,t.y=this.lat0,t;c=1-o/this.qp,this.mode===this.S_POLE&&(c=-c)}n=Math.atan2(e,i),r=C_t(Math.asin(c),this.apa)}return t.x=He(this.long0+n),t.y=r,t}var M_t=.3333333333333333,I_t=.17222222222222222,E_t=.10257936507936508,B_t=.06388888888888888,O_t=.0664021164021164,R_t=.016415012942191543;function D_t(t){var e,i=[];return i[0]=t*M_t,e=t*t,i[0]+=e*I_t,i[1]=e*B_t,e*=t,i[0]+=e*E_t,i[1]+=e*O_t,i[2]=e*R_t,i}function C_t(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var P_t=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],x_t={init:T_t,forward:S_t,inverse:w_t,names:P_t,S_POLE:m_t,N_POLE:__t,EQUIT:b_t,OBLIQ:v_t};function ju(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function N_t(){Math.abs(this.lat1+this.lat2)<Ue||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=yl(this.e3,this.sin_po,this.cos_po),this.qs1=Du(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=yl(this.e3,this.sin_po,this.cos_po),this.qs2=Du(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Du(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ue?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function F_t(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=Du(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*He(e-this.long0),a=r*Math.sin(s)+this.x0,o=this.rh-r*Math.cos(s)+this.y0;return t.x=a,t.y=o,t}function L_t(t){var e,i,n,r,s,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,e!==0&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,i)),s=He(r/this.ns0+this.long0),t.x=s,t.y=a,t}function U_t(t,e){var i,n,r,s,a,o=ju(.5*e);if(t<Ue)return o;for(var l=t*t,c=1;c<=25;c++)if(i=Math.sin(o),n=Math.cos(o),r=t*i,s=1-r*r,a=.5*s*s/n*(e/(1-l)-i/s+.5/t*Math.log((1-r)/(1+r))),o=o+a,Math.abs(a)<=1e-7)return o;return null}var k_t=["Albers_Conic_Equal_Area","Albers","aea"],j_t={init:N_t,forward:F_t,inverse:L_t,names:k_t,phi1z:U_t};function z_t(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function V_t(t){var e,i,n,r,s,a,o,l,c=t.x,h=t.y;return n=He(c-this.long0),e=Math.sin(h),i=Math.cos(h),r=Math.cos(n),a=this.sin_p14*e+this.cos_p14*i*r,s=1,a>0||Math.abs(a)<=Ue?(o=this.x0+this.a*s*i*Math.sin(n)/a,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*i*r)/a):(o=this.x0+this.infinity_dist*i*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=o,t.y=l,t}function $_t(t){var e,i,n,r,s,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),n=Math.cos(r),a=ju(n*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),s=He(this.long0+s)):(a=this.phic0,s=0),t.x=s,t.y=a,t}var W_t=["gnom"],H_t={init:z_t,forward:V_t,inverse:$_t,names:W_t};function q_t(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*Se:Se;for(var n=Math.asin(.5*e),r,s,a,o,l=0;l<30;l++)if(s=Math.sin(n),a=Math.cos(n),o=t*s,r=Math.pow(1-o*o,2)/(2*a)*(e/(1-t*t)-s/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),n+=r,Math.abs(r)<=1e-10)return n;return NaN}function Y_t(){this.sphere||(this.k0=yl(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function G_t(t){var e=t.x,i=t.y,n,r,s=He(e-this.long0);if(this.sphere)n=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Du(this.e,Math.sin(i));n=this.x0+this.a*this.k0*s,r=this.y0+this.a*a*.5/this.k0}return t.x=n,t.y=r,t}function X_t(t){t.x-=this.x0,t.y-=this.y0;var e,i;return this.sphere?(e=He(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=q_t(this.e,2*t.y*this.k0/this.a),e=He(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t}var Q_t=["cea"],K_t={init:Y_t,forward:G_t,inverse:X_t,names:Q_t};function Z_t(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function J_t(t){var e=t.x,i=t.y,n=He(e-this.long0),r=_0(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*r,t}function t1t(t){var e=t.x,i=t.y;return t.x=He(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=_0(this.lat0+(i-this.y0)/this.a),t}var e1t=["Equirectangular","Equidistant_Cylindrical","eqc"],i1t={init:Z_t,forward:J_t,inverse:t1t,names:e1t},mU=20;function n1t(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=c1(this.es),this.e1=u1(this.es),this.e2=h1(this.es),this.e3=f1(this.es),this.ml0=this.a*_s(this.e0,this.e1,this.e2,this.e3,this.lat0)}function r1t(t){var e=t.x,i=t.y,n,r,s,a=He(e-this.long0);if(s=a*Math.sin(i),this.sphere)Math.abs(i)<=Ue?(n=this.a*a,r=-1*this.a*this.lat0):(n=this.a*Math.sin(s)/Math.tan(i),r=this.a*(_0(i-this.lat0)+(1-Math.cos(s))/Math.tan(i)));else if(Math.abs(i)<=Ue)n=this.a*a,r=-1*this.ml0;else{var o=r0(this.a,this.e,Math.sin(i))/Math.tan(i);n=o*Math.sin(s),r=this.a*_s(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+o*(1-Math.cos(s))}return t.x=n+this.x0,t.y=r+this.y0,t}function s1t(t){var e,i,n,r,s,a,o,l,c;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Ue)e=He(n/this.a+this.long0),i=0;else{a=this.lat0+r/this.a,o=n*n/this.a/this.a+a*a,l=a;var h;for(s=mU;s;--s)if(h=Math.tan(l),c=-1*(a*(l*h+1)-l-.5*(l*l+o)*h)/((l-a)/h-1),l+=c,Math.abs(c)<=Ue){i=l;break}e=He(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=Ue)i=0,e=He(this.long0+n/this.a);else{a=(this.ml0+r)/this.a,o=n*n/this.a/this.a+a*a,l=a;var A,m,b,S,M;for(s=mU;s;--s)if(M=this.e*Math.sin(l),A=Math.sqrt(1-M*M)*Math.tan(l),m=this.a*_s(this.e0,this.e1,this.e2,this.e3,l),b=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),S=m/this.a,c=(a*(A*S+1)-S-.5*A*(S*S+o))/(this.es*Math.sin(2*l)*(S*S+o-2*a*S)/(4*A)+(a-S)*(A*b-2/Math.sin(2*l))-b),l-=c,Math.abs(c)<=Ue){i=l;break}A=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=He(this.long0+Math.asin(n*A/this.a)/Math.sin(i))}return t.x=e,t.y=i,t}var a1t=["Polyconic","poly"],o1t={init:n1t,forward:r1t,inverse:s1t,names:a1t};function l1t(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function c1t(t){var e,i=t.x,n=t.y,r=n-this.lat0,s=i-this.long0,a=r/a_*1e-5,o=s,l=1,c=0;for(e=1;e<=10;e++)l=l*a,c=c+this.A[e]*l;var h=c,A=o,m=1,b=0,S,M,I=0,O=0;for(e=1;e<=6;e++)S=m*h-b*A,M=b*h+m*A,m=S,b=M,I=I+this.B_re[e]*m-this.B_im[e]*b,O=O+this.B_im[e]*m+this.B_re[e]*b;return t.x=O*this.a+this.x0,t.y=I*this.a+this.y0,t}function u1t(t){var e,i=t.x,n=t.y,r=i-this.x0,s=n-this.y0,a=s/this.a,o=r/this.a,l=1,c=0,h,A,m=0,b=0;for(e=1;e<=6;e++)h=l*a-c*o,A=c*a+l*o,l=h,c=A,m=m+this.C_re[e]*l-this.C_im[e]*c,b=b+this.C_im[e]*l+this.C_re[e]*c;for(var S=0;S<this.iterations;S++){var M=m,I=b,O,D,B=a,P=o;for(e=2;e<=6;e++)O=M*m-I*b,D=I*m+M*b,M=O,I=D,B=B+(e-1)*(this.B_re[e]*M-this.B_im[e]*I),P=P+(e-1)*(this.B_im[e]*M+this.B_re[e]*I);M=1,I=0;var j=this.B_re[1],N=this.B_im[1];for(e=2;e<=6;e++)O=M*m-I*b,D=I*m+M*b,M=O,I=D,j=j+e*(this.B_re[e]*M-this.B_im[e]*I),N=N+e*(this.B_im[e]*M+this.B_re[e]*I);var F=j*j+N*N;m=(B*j+P*N)/F,b=(P*j-B*N)/F}var $=m,V=b,Z=1,nt=0;for(e=1;e<=9;e++)Z=Z*$,nt=nt+this.D[e]*Z;var X=this.lat0+nt*a_*1e5,bt=this.long0+V;return t.x=bt,t.y=X,t}var h1t=["New_Zealand_Map_Grid","nzmg"],f1t={init:l1t,forward:c1t,inverse:u1t,names:h1t};function d1t(){}function A1t(t){var e=t.x,i=t.y,n=He(e-this.long0),r=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=r,t.y=s,t}function g1t(t){t.x-=this.x0,t.y-=this.y0;var e=He(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t}var y1t=["Miller_Cylindrical","mill"],p1t={init:d1t,forward:A1t,inverse:g1t,names:y1t},m1t=20;function _1t(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=PW(this.es)}function b1t(t){var e,i,n=t.x,r=t.y;if(n=He(n-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var s=this.n*Math.sin(r),a=m1t;a;--a){var o=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=o,Math.abs(o)<Ue)break}e=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var l=Math.sin(r),c=Math.cos(r);i=this.a*zT(r,l,c,this.en),e=this.a*n*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t}function v1t(t){var e,i,n,r;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(e))),this.m?e=ju((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=ju(Math.sin(e)/this.n)),n=He(n+this.long0),e=_0(e)):(e=xW(t.y/this.a,this.es,this.en),r=Math.abs(e),r<Se?(r=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),n=He(i)):r-Ue<Se&&(n=this.long0)),t.x=n,t.y=e,t}var T1t=["Sinusoidal","sinu"],S1t={init:_1t,forward:b1t,inverse:v1t,names:T1t};function w1t(){}function M1t(t){for(var e=t.x,i=t.y,n=He(e-this.long0),r=i,s=Math.PI*Math.sin(i);;){var a=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=a,Math.abs(a)<Ue)break}r/=2,Math.PI/2-Math.abs(i)<Ue&&(n=0);var o=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=o,t.y=l,t}function I1t(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=He(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=n,t.y=r,t}var E1t=["Mollweide","moll"],B1t={init:w1t,forward:M1t,inverse:I1t,names:E1t};function O1t(){Math.abs(this.lat1+this.lat2)<Ue||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=c1(this.es),this.e1=u1(this.es),this.e2=h1(this.es),this.e3=f1(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=yl(this.e,this.sinphi,this.cosphi),this.ml1=_s(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ue?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=yl(this.e,this.sinphi,this.cosphi),this.ml2=_s(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=_s(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function R1t(t){var e=t.x,i=t.y,n;if(this.sphere)n=this.a*(this.g-i);else{var r=_s(this.e0,this.e1,this.e2,this.e3,i);n=this.a*(this.g-r)}var s=this.ns*He(e-this.long0),a=this.x0+n*Math.sin(s),o=this.y0+this.rh-n*Math.cos(s);return t.x=a,t.y=o,t}function D1t(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,i,n,r;this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(i!==0&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=He(this.long0+s/this.ns),n=_0(this.g-i/this.a),t.x=r,t.y=n,t;var a=this.g-i/this.a;return n=R2(a,this.e0,this.e1,this.e2,this.e3),r=He(this.long0+s/this.ns),t.x=r,t.y=n,t}var C1t=["Equidistant_Conic","eqdc"],P1t={init:O1t,forward:R1t,inverse:D1t,names:C1t};function x1t(){this.R=this.a}function N1t(t){var e=t.x,i=t.y,n=He(e-this.long0),r,s;Math.abs(i)<=Ue&&(r=this.x0+this.R*n,s=this.y0);var a=ju(2*Math.abs(i/Math.PI));(Math.abs(n)<=Ue||Math.abs(Math.abs(i)-Se)<=Ue)&&(r=this.x0,i>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*a):s=this.y0+Math.PI*this.R*-Math.tan(.5*a));var o=.5*Math.abs(Math.PI/n-n/Math.PI),l=o*o,c=Math.sin(a),h=Math.cos(a),A=h/(c+h-1),m=A*A,b=A*(2/c-1),S=b*b,M=Math.PI*this.R*(o*(A-S)+Math.sqrt(l*(A-S)*(A-S)-(S+l)*(m-S)))/(S+l);n<0&&(M=-M),r=this.x0+M;var I=l+A;return M=Math.PI*this.R*(b*I-o*Math.sqrt((S+l)*(l+1)-I*I))/(S+l),i>=0?s=this.y0+M:s=this.y0-M,t.x=r,t.y=s,t}function F1t(t){var e,i,n,r,s,a,o,l,c,h,A,m,b;return t.x-=this.x0,t.y-=this.y0,A=Math.PI*this.R,n=t.x/A,r=t.y/A,s=n*n+r*r,a=-Math.abs(r)*(1+s),o=a-2*r*r+n*n,l=-2*a+1+2*r*r+s*s,b=r*r/l+(2*o*o*o/l/l/l-9*a*o/l/l)/27,c=(a-o*o/3/l)/l,h=2*Math.sqrt(-c/3),A=3*b/c/h,Math.abs(A)>1&&(A>=0?A=1:A=-1),m=Math.acos(A)/3,t.y>=0?i=(-h*Math.cos(m+Math.PI/3)-o/3/l)*Math.PI:i=-(-h*Math.cos(m+Math.PI/3)-o/3/l)*Math.PI,Math.abs(n)<Ue?e=this.long0:e=He(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-r*r)+s*s))/2/n),t.x=e,t.y=i,t}var L1t=["Van_der_Grinten_I","VanDerGrinten","vandg"],U1t={init:x1t,forward:N1t,inverse:F1t,names:L1t};function k1t(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function j1t(t){var e=t.x,i=t.y,n=Math.sin(t.y),r=Math.cos(t.y),s=He(e-this.long0),a,o,l,c,h,A,m,b,S,M,I,O,D,B,P,j,N,F,$,V,Z,nt,X;return this.sphere?Math.abs(this.sin_p12-1)<=Ue?(t.x=this.x0+this.a*(Se-i)*Math.sin(s),t.y=this.y0-this.a*(Se-i)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=Ue?(t.x=this.x0+this.a*(Se+i)*Math.sin(s),t.y=this.y0+this.a*(Se+i)*Math.cos(s),t):(F=this.sin_p12*n+this.cos_p12*r*Math.cos(s),j=Math.acos(F),N=j?j/Math.sin(j):1,t.x=this.x0+this.a*N*r*Math.sin(s),t.y=this.y0+this.a*N*(this.cos_p12*n-this.sin_p12*r*Math.cos(s)),t):(a=c1(this.es),o=u1(this.es),l=h1(this.es),c=f1(this.es),Math.abs(this.sin_p12-1)<=Ue?(h=this.a*_s(a,o,l,c,Se),A=this.a*_s(a,o,l,c,i),t.x=this.x0+(h-A)*Math.sin(s),t.y=this.y0-(h-A)*Math.cos(s),t):Math.abs(this.sin_p12+1)<=Ue?(h=this.a*_s(a,o,l,c,Se),A=this.a*_s(a,o,l,c,i),t.x=this.x0+(h+A)*Math.sin(s),t.y=this.y0+(h+A)*Math.cos(s),t):(m=n/r,b=r0(this.a,this.e,this.sin_p12),S=r0(this.a,this.e,n),M=Math.atan((1-this.es)*m+this.es*b*this.sin_p12/(S*r)),I=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(M)-this.sin_p12*Math.cos(s)),I===0?$=Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.abs(Math.abs(I)-Math.PI)<=Ue?$=-Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):$=Math.asin(Math.sin(s)*Math.cos(M)/Math.sin(I)),O=this.e*this.sin_p12/Math.sqrt(1-this.es),D=this.e*this.cos_p12*Math.cos(I)/Math.sqrt(1-this.es),B=O*D,P=D*D,V=$*$,Z=V*$,nt=Z*$,X=nt*$,j=b*$*(1-V*P*(1-P)/6+Z/8*B*(1-2*P)+nt/120*(P*(4-7*P)-3*O*O*(1-7*P))-X/48*B),t.x=this.x0+j*Math.sin(I),t.y=this.y0+j*Math.cos(I),t))}function z1t(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,s,a,o,l,c,h,A,m,b,S,M,I,O,D,B,P,j,N,F,$;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*Se*this.a?void 0:(i=e/this.a,n=Math.sin(i),r=Math.cos(i),s=this.long0,Math.abs(e)<=Ue?a=this.lat0:(a=ju(r*this.sin_p12+t.y*n*this.cos_p12/e),o=Math.abs(this.lat0)-Se,Math.abs(o)<=Ue?this.lat0>=0?s=He(this.long0+Math.atan2(t.x,-t.y)):s=He(this.long0-Math.atan2(-t.x,t.y)):s=He(this.long0+Math.atan2(t.x*n,e*this.cos_p12*r-t.y*this.sin_p12*n))),t.x=s,t.y=a,t)):(l=c1(this.es),c=u1(this.es),h=h1(this.es),A=f1(this.es),Math.abs(this.sin_p12-1)<=Ue?(m=this.a*_s(l,c,h,A,Se),e=Math.sqrt(t.x*t.x+t.y*t.y),b=m-e,a=R2(b/this.a,l,c,h,A),s=He(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=a,t):Math.abs(this.sin_p12+1)<=Ue?(m=this.a*_s(l,c,h,A,Se),e=Math.sqrt(t.x*t.x+t.y*t.y),b=e-m,a=R2(b/this.a,l,c,h,A),s=He(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),I=Math.atan2(t.x,t.y),S=r0(this.a,this.e,this.sin_p12),O=Math.cos(I),D=this.e*this.cos_p12*O,B=-D*D/(1-this.es),P=3*this.es*(1-B)*this.sin_p12*this.cos_p12*O/(1-this.es),j=e/S,N=j-B*(1+B)*Math.pow(j,3)/6-P*(1+3*B)*Math.pow(j,4)/24,F=1-B*N*N/2-j*N*N*N/6,M=Math.asin(this.sin_p12*Math.cos(N)+this.cos_p12*Math.sin(N)*O),s=He(this.long0+Math.asin(Math.sin(I)*Math.sin(N)/Math.cos(M))),$=Math.sin(M),a=Math.atan2(($-this.es*F*this.sin_p12)*Math.tan(M),$*(1-this.es)),t.x=s,t.y=a,t))}var V1t=["Azimuthal_Equidistant","aeqd"],$1t={init:k1t,forward:j1t,inverse:z1t,names:V1t};function W1t(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function H1t(t){var e,i,n,r,s,a,o,l,c=t.x,h=t.y;return n=He(c-this.long0),e=Math.sin(h),i=Math.cos(h),r=Math.cos(n),a=this.sin_p14*e+this.cos_p14*i*r,s=1,(a>0||Math.abs(a)<=Ue)&&(o=this.a*s*i*Math.sin(n),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*i*r)),t.x=o,t.y=l,t}function q1t(t){var e,i,n,r,s,a,o;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=ju(e/this.a),n=Math.sin(i),r=Math.cos(i),a=this.long0,Math.abs(e)<=Ue?(o=this.lat0,t.x=a,t.y=o,t):(o=ju(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-Se,Math.abs(s)<=Ue?(this.lat0>=0?a=He(this.long0+Math.atan2(t.x,-t.y)):a=He(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=o,t):(a=He(this.long0+Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n)),t.x=a,t.y=o,t))}var Y1t=["ortho"],G1t={init:W1t,forward:H1t,inverse:q1t,names:Y1t},Wn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},dn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function X1t(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Se-fn/2?this.face=Wn.TOP:this.lat0<=-(Se-fn/2)?this.face=Wn.BOTTOM:Math.abs(this.long0)<=fn?this.face=Wn.FRONT:Math.abs(this.long0)<=Se+fn?this.face=this.long0>0?Wn.RIGHT:Wn.LEFT:this.face=Wn.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Q1t(t){var e={x:0,y:0},i,n,r,s,a,o,l={value:0};if(t.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):i=t.y,n=t.x,this.face===Wn.TOP)s=Se-i,n>=fn&&n<=Se+fn?(l.value=dn.AREA_0,r=n-Se):n>Se+fn||n<=-(Se+fn)?(l.value=dn.AREA_1,r=n>0?n-ur:n+ur):n>-(Se+fn)&&n<=-fn?(l.value=dn.AREA_2,r=n+Se):(l.value=dn.AREA_3,r=n);else if(this.face===Wn.BOTTOM)s=Se+i,n>=fn&&n<=Se+fn?(l.value=dn.AREA_0,r=-n+Se):n<fn&&n>=-fn?(l.value=dn.AREA_1,r=-n):n<-fn&&n>=-(Se+fn)?(l.value=dn.AREA_2,r=-n-Se):(l.value=dn.AREA_3,r=n>0?-n+ur:-n-ur);else{var c,h,A,m,b,S,M;this.face===Wn.RIGHT?n=RA(n,+Se):this.face===Wn.BACK?n=RA(n,+ur):this.face===Wn.LEFT&&(n=RA(n,-Se)),m=Math.sin(i),b=Math.cos(i),S=Math.sin(n),M=Math.cos(n),c=b*M,h=b*S,A=m,this.face===Wn.FRONT?(s=Math.acos(c),r=ov(s,A,h,l)):this.face===Wn.RIGHT?(s=Math.acos(h),r=ov(s,A,-c,l)):this.face===Wn.BACK?(s=Math.acos(-c),r=ov(s,A,-h,l)):this.face===Wn.LEFT?(s=Math.acos(-h),r=ov(s,A,c,l)):(s=r=0,l.value=dn.AREA_0)}return o=Math.atan(12/ur*(r+Math.acos(Math.sin(r)*Math.cos(fn))-Se)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===dn.AREA_1?o+=Se:l.value===dn.AREA_2?o+=ur:l.value===dn.AREA_3&&(o+=1.5*ur),e.x=a*Math.cos(o),e.y=a*Math.sin(o),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function K1t(t){var e={lam:0,phi:0},i,n,r,s,a,o,l,c,h,A={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),i=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?A.value=dn.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(A.value=dn.AREA_1,i-=Se):t.x<0&&-t.x>=Math.abs(t.y)?(A.value=dn.AREA_2,i=i<0?i+ur:i-ur):(A.value=dn.AREA_3,i+=Se),h=ur/12*Math.tan(i),a=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),o=Math.atan(a),r=Math.cos(i),s=Math.tan(n),l=1-r*r*s*s*(1-Math.cos(Math.atan(1/Math.cos(o)))),l<-1?l=-1:l>1&&(l=1),this.face===Wn.TOP)c=Math.acos(l),e.phi=Se-c,A.value===dn.AREA_0?e.lam=o+Se:A.value===dn.AREA_1?e.lam=o<0?o+ur:o-ur:A.value===dn.AREA_2?e.lam=o-Se:e.lam=o;else if(this.face===Wn.BOTTOM)c=Math.acos(l),e.phi=c-Se,A.value===dn.AREA_0?e.lam=-o+Se:A.value===dn.AREA_1?e.lam=-o:A.value===dn.AREA_2?e.lam=-o-Se:e.lam=o<0?-o-ur:-o+ur;else{var m,b,S;m=l,h=m*m,h>=1?S=0:S=Math.sqrt(1-h)*Math.sin(o),h+=S*S,h>=1?b=0:b=Math.sqrt(1-h),A.value===dn.AREA_1?(h=b,b=-S,S=h):A.value===dn.AREA_2?(b=-b,S=-S):A.value===dn.AREA_3&&(h=b,b=S,S=-h),this.face===Wn.RIGHT?(h=m,m=-b,b=h):this.face===Wn.BACK?(m=-m,b=-b):this.face===Wn.LEFT&&(h=m,m=b,b=-h),e.phi=Math.acos(-S)-Se,e.lam=Math.atan2(b,m),this.face===Wn.RIGHT?e.lam=RA(e.lam,-Se):this.face===Wn.BACK?e.lam=RA(e.lam,-ur):this.face===Wn.LEFT&&(e.lam=RA(e.lam,+Se))}if(this.es!==0){var M,I,O;M=e.phi<0?1:0,I=Math.tan(e.phi),O=this.b/Math.sqrt(I*I+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-O*O)/(this.one_minus_f*O)),M&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function ov(t,e,i,n){var r;return t<Ue?(n.value=dn.AREA_0,r=0):(r=Math.atan2(e,i),Math.abs(r)<=fn?n.value=dn.AREA_0:r>fn&&r<=Se+fn?(n.value=dn.AREA_1,r-=Se):r>Se+fn||r<=-(Se+fn)?(n.value=dn.AREA_2,r=r>=0?r-ur:r+ur):(n.value=dn.AREA_3,r+=Se)),r}function RA(t,e){var i=t+e;return i<-ur?i+=C_:i>+ur&&(i-=C_),i}var Z1t=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],J1t={init:X1t,forward:Q1t,inverse:K1t,names:Z1t},qI=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Wm=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],LW=.8487,UW=1.3523,kW=ol/5,tbt=1/kW,pA=18,D2=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},ebt=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function ibt(t,e,i,n){for(var r=e;n;--n){var s=t(r);if(r-=s,Math.abs(s)<i)break}return r}function nbt(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function rbt(t){var e=He(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*kW);n<0?n=0:n>=pA&&(n=pA-1),i=ol*(i-tbt*n);var r={x:D2(qI[n],i)*e,y:D2(Wm[n],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*LW+this.x0,r.y=r.y*this.a*UW+this.y0,r}function sbt(t){var e={x:(t.x-this.x0)/(this.a*LW),y:Math.abs(t.y-this.y0)/(this.a*UW)};if(e.y>=1)e.x/=qI[pA][0],e.y=t.y<0?-Se:Se;else{var i=Math.floor(e.y*pA);for(i<0?i=0:i>=pA&&(i=pA-1);;)if(Wm[i][0]>e.y)--i;else if(Wm[i+1][0]<=e.y)++i;else break;var n=Wm[i],r=5*(e.y-n[0])/(Wm[i+1][0]-n[0]);r=ibt(function(s){return(D2(n,s)-e.y)/ebt(n,s)},r,Ue,100),e.x/=D2(qI[i],r),e.y=(5*i+r)*Wr,t.y<0&&(e.y=-e.y)}return e.x=He(e.x+this.long0),e}var abt=["Robinson","robin"],obt={init:nbt,forward:rbt,inverse:sbt,names:abt};function lbt(){this.name="geocent"}function cbt(t){var e=wW(t,this.es,this.a);return e}function ubt(t){var e=MW(t,this.es,this.a,this.b);return e}var hbt=["Geocentric","geocentric","geocent","Geocent"],fbt={init:lbt,forward:cbt,inverse:ubt,names:hbt},ss={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},wm={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function dbt(){if(Object.keys(wm).forEach((function(i){if(typeof this[i]>"u")this[i]=wm[i].def;else{if(wm[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);wm[i].num&&(this[i]=parseFloat(this[i]))}wm[i].degrees&&(this[i]=this[i]*Wr)}).bind(this)),Math.abs(Math.abs(this.lat0)-Se)<Ue?this.mode=this.lat0<0?ss.S_POLE:ss.N_POLE:Math.abs(this.lat0)<Ue?this.mode=ss.EQUIT:(this.mode=ss.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function Abt(t){t.x-=this.long0;var e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r,s;switch(this.mode){case ss.OBLIQ:s=this.sinph0*e+this.cosph0*i*n;break;case ss.EQUIT:s=i*n;break;case ss.S_POLE:s=-e;break;case ss.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),r=s*i*Math.sin(t.x),this.mode){case ss.OBLIQ:s*=this.cosph0*e-this.sinph0*i*n;break;case ss.EQUIT:s*=e;break;case ss.N_POLE:s*=-(i*n);break;case ss.S_POLE:s*=i*n;break}var a,o;return a=s*this.cg+r*this.sg,o=1/(a*this.sw*this.h1+this.cw),r=(r*this.cg-s*this.sg)*this.cw*o,s=a*o,t.x=r*this.a,t.y=s*this.a,t}function gbt(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},i,n,r;r=1/(this.pn1-t.y*this.sw),i=this.pn1*t.x*r,n=this.pn1*t.y*this.cw*r,t.x=i*this.cg+n*this.sg,t.y=n*this.cg-i*this.sg;var s=za(t.x,t.y);if(Math.abs(s)<Ue)e.x=0,e.y=t.y;else{var a,o;switch(o=1-s*s*this.pfact,o=(this.p-Math.sqrt(o))/(this.pn1/s+s/this.pn1),a=Math.sqrt(1-o*o),this.mode){case ss.OBLIQ:e.y=Math.asin(a*this.sinph0+t.y*o*this.cosph0/s),t.y=(a-this.sinph0*Math.sin(e.y))*s,t.x*=o*this.cosph0;break;case ss.EQUIT:e.y=Math.asin(t.y*o/s),t.y=a*s,t.x*=o;break;case ss.N_POLE:e.y=Math.asin(a),t.y=-t.y;break;case ss.S_POLE:e.y=-Math.asin(a);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var ybt=["Tilted_Perspective","tpers"],pbt={init:dbt,forward:Abt,inverse:gbt,names:ybt};function mbt(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function _bt(t){var e=t.x,i=t.y,n,r,s,a;if(e=e-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var o=this.radius_p/za(this.radius_p*Math.cos(i),Math.sin(i));if(r=o*Math.cos(e)*Math.cos(i),s=o*Math.sin(e)*Math.cos(i),a=o*Math.sin(i),(this.radius_g-r)*r-s*s-a*a*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/za(a,n)),t.y=this.radius_g_1*Math.atan(a/n)):(t.x=this.radius_g_1*Math.atan(s/n),t.y=this.radius_g_1*Math.atan(a/za(s,n)))}else this.shape==="sphere"&&(n=Math.cos(i),r=Math.cos(e)*n,s=Math.sin(e)*n,a=Math.sin(i),n=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(s/za(a,n)),t.y=this.radius_g_1*Math.atan(a/n)):(t.x=this.radius_g_1*Math.atan(s/n),t.y=this.radius_g_1*Math.atan(a/za(s,n))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function bbt(t){var e=-1,i=0,n=0,r,s,a,o;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*za(1,n)):(i=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*za(1,i));var l=n/this.radius_p;if(r=i*i+l*l+e*e,s=2*this.radius_g*e,a=s*s-4*r*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-s-Math.sqrt(a))/(2*r),e=this.radius_g+o*e,i*=o,n*=o,t.x=Math.atan2(i,e),t.y=Math.atan(n*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(t.y/this.radius_g_1),i=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+n*n)):(i=Math.tan(t.x/this.radius_g_1),n=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+i*i)),r=i*i+n*n+e*e,s=2*this.radius_g*e,a=s*s-4*r*this.C,a<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-s-Math.sqrt(a))/(2*r),e=this.radius_g+o*e,i*=o,n*=o,t.x=Math.atan2(i,e),t.y=Math.atan(n*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var vbt=["Geostationary Satellite View","Geostationary_Satellite","geos"],Tbt={init:mbt,forward:_bt,inverse:bbt,names:vbt};function Sbt(t){t.Proj.projections.add(Ov),t.Proj.projections.add(Rv),t.Proj.projections.add(Rmt),t.Proj.projections.add(kmt),t.Proj.projections.add(Hmt),t.Proj.projections.add(Qmt),t.Proj.projections.add(i_t),t.Proj.projections.add(o_t),t.Proj.projections.add(f_t),t.Proj.projections.add(p_t),t.Proj.projections.add(x_t),t.Proj.projections.add(j_t),t.Proj.projections.add(H_t),t.Proj.projections.add(K_t),t.Proj.projections.add(i1t),t.Proj.projections.add(o1t),t.Proj.projections.add(f1t),t.Proj.projections.add(p1t),t.Proj.projections.add(S1t),t.Proj.projections.add(B1t),t.Proj.projections.add(P1t),t.Proj.projections.add(U1t),t.Proj.projections.add($1t),t.Proj.projections.add(G1t),t.Proj.projections.add(J1t),t.Proj.projections.add(obt),t.Proj.projections.add(fbt),t.Proj.projections.add(pbt),t.Proj.projections.add(Tbt)}va.defaultDatum="WGS84";va.Proj=ul;va.WGS84=new va.Proj("WGS84");va.Point=n0;va.toPoint=IW;va.defs=ys;va.nadgrid=Cpt;va.transform=O2;va.mgrs=Gpt;va.version="__VERSION__";Sbt(va);function wbt(t,e,i){const n=va(e,i);return"data"in t?new Pi(t.data.map(r=>_U(r,n))):_U(t,n)}function _U(t,e){const i=[0,0];return gW(t,(r,s)=>(i[0]=r,i[1]=s,e.forward(i)))}var _u;(function(t){t.POINT="geoarrow.point",t.LINESTRING="geoarrow.linestring",t.POLYGON="geoarrow.polygon",t.MULTIPOINT="geoarrow.multipoint",t.MULTILINESTRING="geoarrow.multilinestring",t.MULTIPOLYGON="geoarrow.multipolygon"})(_u||(_u={}));class jW{constructor(){rt(this,"minX");rt(this,"minY");rt(this,"maxX");rt(this,"maxY");this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}updateBbox(e){e.minX<this.minX&&(this.minX=e.minX),e.minY<this.minY&&(this.minY=e.minY),e.maxX>this.maxX&&(this.maxX=e.maxX),e.maxY>this.maxY&&(this.maxY=e.maxY)}updateCoord(e,i){e<this.minX&&(this.minX=e),i<this.minY&&(this.minY=i),e>this.maxX&&(this.maxX=e),i>this.maxY&&(this.maxY=i)}}function Mbt(t,e){switch(e.metadata.get("ARROW:extension:name")){case _u.POINT:return zW(t);case _u.LINESTRING:case _u.MULTIPOINT:return VW(t);case _u.POLYGON:case _u.MULTILINESTRING:return $W(t);case _u.MULTIPOLYGON:return Ebt(t);default:throw new Error("Unknown ext type name")}}function Ibt(t){const i=a1(t).values,n=new jW;for(let r=0;r<t.length;r++){const s=i[r*2],a=i[r*2+1];n.updateCoord(s,a)}return n}function zW(t){const e=new jW;for(const i of t.data)e.updateBbox(Ibt(i));return e}function VW(t){const e=o1(t);return zW(e)}function $W(t){const e=m0(t);return VW(e)}function Ebt(t){const e=FT(t);return $W(e)}var YI;(function(t){t[t.CLOCKWISE=QL.CLOCKWISE]="CLOCKWISE",t[t.COUNTER_CLOCKWISE=QL.COUNTER_CLOCKWISE]="COUNTER_CLOCKWISE"})(YI||(YI={}));function WW(t){if("data"in t)return new Pi(t.data.map(i=>WW(i)));let e=new SX({type:new vM,nullValues:[null]});e.set(t.length-1,null);for(let i=0;i<t.length;i++){if(!t.getValid(i)){e.setValid(i,!1);continue}let r=LT(t,i).getWindingDirection();e.set(i,r===YI.CLOCKWISE)}return e.finish().flush()}function HW(t,e){if("data"in t){t.data.forEach(i=>HW(i,e));return}for(let i=0;i<t.length;i++)LT(t,i).modifyWindingDirection(e)}var bU=Object.freeze({__proto__:null,area:U$,earcut:j$,getMultiPolygonExterior:V$,getPolygonExterior:z$,mapCoords:gW,modifyWindingDirection:HW,reproject:wbt,signedArea:k$,totalBounds:Mbt,windingDirection:WW});function Bbt(t){return UT(t.type)}function Obt(t){return kT(t.type)}function Rbt(t){return AO(t.type)}function Dbt(t){return fW(t.type)}function Cbt(t){return dW(t.type)}function Pbt(t){return AW(t.type)}var Fs=Object.freeze({__proto__:null,isLineStringVector:Obt,isMultiLineStringVector:Cbt,isMultiPointVector:Dbt,isMultiPolygonVector:Pbt,isPointVector:Bbt,isPolygonVector:Rbt});const xbt=void 0;function N_(t){if(t===null)return"null";if(t===xbt)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>N_(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,i)=>typeof i=="bigint"?`${i}`:i)}const Nbt=new TextDecoder("utf-8"),Fbt=t=>Nbt.decode(t),Lbt=new TextEncoder,qW=t=>Lbt.encode(t),Kh=t=>typeof t=="function",YW=t=>t!=null&&Object(t)===t,Ubt=t=>YW(t)&&"done"in t&&"value"in t,kbt=t=>YW(t)&&Kh(t.clear)&&Kh(t.bytes)&&Kh(t.position)&&Kh(t.setPosition)&&Kh(t.capacity)&&Kh(t.getBufferIdentifier)&&Kh(t.createLong),jbt=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function GW(t,e){let i=Ubt(e)?e.value:e;return i instanceof t?t===Uint8Array?new t(i.buffer,i.byteOffset,i.byteLength):i:i?(typeof i=="string"&&(i=qW(i)),i instanceof ArrayBuffer?new t(i):i instanceof jbt?new t(i):kbt(i)?GW(t,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new t(0):new t(i.buffer,i.byteOffset,i.byteLength/t.BYTES_PER_ELEMENT):t.from(i)):new t(0)}function zbt(t,e){let i=0;const n=t.length;if(n!==e.length)return!1;if(n>0)do if(t[i]!==e[i])return!1;while(++i<n);return!0}const Vbt=Symbol.for("isArrowBigNum");function Fo(t,...e){return e.length===0?Object.setPrototypeOf(GW(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}Fo.prototype[Vbt]=!0;Fo.prototype.toJSON=function(){return`"${L_(this)}"`};Fo.prototype.valueOf=function(){return XW(this)};Fo.prototype.toString=function(){return L_(this)};Fo.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return XW(this);case"string":return L_(this);case"default":return $bt(this)}return L_(this)};function DA(...t){return Fo.apply(this,t)}function CA(...t){return Fo.apply(this,t)}function F_(...t){return Fo.apply(this,t)}Object.setPrototypeOf(DA.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(CA.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(F_.prototype,Object.create(Uint32Array.prototype));Object.assign(DA.prototype,Fo.prototype,{constructor:DA,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(CA.prototype,Fo.prototype,{constructor:CA,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(F_.prototype,Fo.prototype,{constructor:F_,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function XW(t){const{buffer:e,byteOffset:i,length:n,signed:r}=t,s=new BigUint64Array(e,i,n),a=r&&s.at(-1)&BigInt(1)<<BigInt(63);let o=BigInt(a?1:0),l=BigInt(0);if(a){for(const c of s)o+=~c*(BigInt(1)<<BigInt(32)*l++);o*=BigInt(-1)}else for(const c of s)o+=c*(BigInt(1)<<BigInt(32)*l++);return o}const L_=t=>{if(t.byteLength===8)return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`;if(!t.signed)return iM(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return iM(t);e=e.slice();let n=1;for(let s=0;s<e.length;s++){const a=e[s],o=~a+n;e[s]=o,n&=a===0?1:0}return`-${iM(e)}`},$bt=t=>t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:L_(t);function iM(t){let e="";const i=new Uint32Array(2);let n=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let s=-1;const a=n.length-1;do{for(i[0]=n[s=0];s<a;)n[s++]=i[1]=i[0]/10,i[0]=(i[0]-i[1]*10<<16)+n[s];n[s]=i[1]=i[0]/10,i[0]=i[0]-i[1]*10,e=`${i[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e??"0"}class bO{static new(e,i){switch(i){case!0:return new DA(e);case!1:return new CA(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new DA(e)}return e.byteLength===16?new F_(e):new CA(e)}static signed(e){return new DA(e)}static unsigned(e){return new CA(e)}static decimal(e){return new F_(e)}constructor(e,i){return bO.new(e,i)}}class nn{visitMany(e,...i){return e.map((n,r)=>this.visit(n,...i.map(s=>s[r])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,i=!0){return Wbt(this,e,i)}getVisitFnByTypeId(e,i=!0){return eA(this,e,i)}visitNull(e,...i){return null}visitBool(e,...i){return null}visitInt(e,...i){return null}visitFloat(e,...i){return null}visitUtf8(e,...i){return null}visitLargeUtf8(e,...i){return null}visitBinary(e,...i){return null}visitLargeBinary(e,...i){return null}visitFixedSizeBinary(e,...i){return null}visitDate(e,...i){return null}visitTimestamp(e,...i){return null}visitTime(e,...i){return null}visitDecimal(e,...i){return null}visitList(e,...i){return null}visitStruct(e,...i){return null}visitUnion(e,...i){return null}visitDictionary(e,...i){return null}visitInterval(e,...i){return null}visitDuration(e,...i){return null}visitFixedSizeList(e,...i){return null}visitMap(e,...i){return null}}function Wbt(t,e,i=!0){return typeof e=="number"?eA(t,e,i):typeof e=="string"&&e in Rt?eA(t,Rt[e],i):e&&e instanceof xi?eA(t,vU(e),i):e!=null&&e.type&&e.type instanceof xi?eA(t,vU(e.type),i):eA(t,Rt.NONE,i)}function eA(t,e,i=!0){let n=null;switch(e){case Rt.Null:n=t.visitNull;break;case Rt.Bool:n=t.visitBool;break;case Rt.Int:n=t.visitInt;break;case Rt.Int8:n=t.visitInt8||t.visitInt;break;case Rt.Int16:n=t.visitInt16||t.visitInt;break;case Rt.Int32:n=t.visitInt32||t.visitInt;break;case Rt.Int64:n=t.visitInt64||t.visitInt;break;case Rt.Uint8:n=t.visitUint8||t.visitInt;break;case Rt.Uint16:n=t.visitUint16||t.visitInt;break;case Rt.Uint32:n=t.visitUint32||t.visitInt;break;case Rt.Uint64:n=t.visitUint64||t.visitInt;break;case Rt.Float:n=t.visitFloat;break;case Rt.Float16:n=t.visitFloat16||t.visitFloat;break;case Rt.Float32:n=t.visitFloat32||t.visitFloat;break;case Rt.Float64:n=t.visitFloat64||t.visitFloat;break;case Rt.Utf8:n=t.visitUtf8;break;case Rt.LargeUtf8:n=t.visitLargeUtf8;break;case Rt.Binary:n=t.visitBinary;break;case Rt.LargeBinary:n=t.visitLargeBinary;break;case Rt.FixedSizeBinary:n=t.visitFixedSizeBinary;break;case Rt.Date:n=t.visitDate;break;case Rt.DateDay:n=t.visitDateDay||t.visitDate;break;case Rt.DateMillisecond:n=t.visitDateMillisecond||t.visitDate;break;case Rt.Timestamp:n=t.visitTimestamp;break;case Rt.TimestampSecond:n=t.visitTimestampSecond||t.visitTimestamp;break;case Rt.TimestampMillisecond:n=t.visitTimestampMillisecond||t.visitTimestamp;break;case Rt.TimestampMicrosecond:n=t.visitTimestampMicrosecond||t.visitTimestamp;break;case Rt.TimestampNanosecond:n=t.visitTimestampNanosecond||t.visitTimestamp;break;case Rt.Time:n=t.visitTime;break;case Rt.TimeSecond:n=t.visitTimeSecond||t.visitTime;break;case Rt.TimeMillisecond:n=t.visitTimeMillisecond||t.visitTime;break;case Rt.TimeMicrosecond:n=t.visitTimeMicrosecond||t.visitTime;break;case Rt.TimeNanosecond:n=t.visitTimeNanosecond||t.visitTime;break;case Rt.Decimal:n=t.visitDecimal;break;case Rt.List:n=t.visitList;break;case Rt.Struct:n=t.visitStruct;break;case Rt.Union:n=t.visitUnion;break;case Rt.DenseUnion:n=t.visitDenseUnion||t.visitUnion;break;case Rt.SparseUnion:n=t.visitSparseUnion||t.visitUnion;break;case Rt.Dictionary:n=t.visitDictionary;break;case Rt.Interval:n=t.visitInterval;break;case Rt.IntervalDayTime:n=t.visitIntervalDayTime||t.visitInterval;break;case Rt.IntervalYearMonth:n=t.visitIntervalYearMonth||t.visitInterval;break;case Rt.Duration:n=t.visitDuration;break;case Rt.DurationSecond:n=t.visitDurationSecond||t.visitDuration;break;case Rt.DurationMillisecond:n=t.visitDurationMillisecond||t.visitDuration;break;case Rt.DurationMicrosecond:n=t.visitDurationMicrosecond||t.visitDuration;break;case Rt.DurationNanosecond:n=t.visitDurationNanosecond||t.visitDuration;break;case Rt.FixedSizeList:n=t.visitFixedSizeList;break;case Rt.Map:n=t.visitMap;break}if(typeof n=="function")return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${Rt[e]}'`)}function vU(t){switch(t.typeId){case Rt.Null:return Rt.Null;case Rt.Int:{const{bitWidth:e,isSigned:i}=t;switch(e){case 8:return i?Rt.Int8:Rt.Uint8;case 16:return i?Rt.Int16:Rt.Uint16;case 32:return i?Rt.Int32:Rt.Uint32;case 64:return i?Rt.Int64:Rt.Uint64}return Rt.Int}case Rt.Float:switch(t.precision){case _a.HALF:return Rt.Float16;case _a.SINGLE:return Rt.Float32;case _a.DOUBLE:return Rt.Float64}return Rt.Float;case Rt.Binary:return Rt.Binary;case Rt.LargeBinary:return Rt.LargeBinary;case Rt.Utf8:return Rt.Utf8;case Rt.LargeUtf8:return Rt.LargeUtf8;case Rt.Bool:return Rt.Bool;case Rt.Decimal:return Rt.Decimal;case Rt.Time:switch(t.unit){case Vi.SECOND:return Rt.TimeSecond;case Vi.MILLISECOND:return Rt.TimeMillisecond;case Vi.MICROSECOND:return Rt.TimeMicrosecond;case Vi.NANOSECOND:return Rt.TimeNanosecond}return Rt.Time;case Rt.Timestamp:switch(t.unit){case Vi.SECOND:return Rt.TimestampSecond;case Vi.MILLISECOND:return Rt.TimestampMillisecond;case Vi.MICROSECOND:return Rt.TimestampMicrosecond;case Vi.NANOSECOND:return Rt.TimestampNanosecond}return Rt.Timestamp;case Rt.Date:switch(t.unit){case Tf.DAY:return Rt.DateDay;case Tf.MILLISECOND:return Rt.DateMillisecond}return Rt.Date;case Rt.Interval:switch(t.unit){case Sf.DAY_TIME:return Rt.IntervalDayTime;case Sf.YEAR_MONTH:return Rt.IntervalYearMonth}return Rt.Interval;case Rt.Duration:switch(t.unit){case Vi.SECOND:return Rt.DurationSecond;case Vi.MILLISECOND:return Rt.DurationMillisecond;case Vi.MICROSECOND:return Rt.DurationMicrosecond;case Vi.NANOSECOND:return Rt.DurationNanosecond}return Rt.Duration;case Rt.Map:return Rt.Map;case Rt.List:return Rt.List;case Rt.Struct:return Rt.Struct;case Rt.Union:switch(t.mode){case gl.Dense:return Rt.DenseUnion;case gl.Sparse:return Rt.SparseUnion}return Rt.Union;case Rt.FixedSizeBinary:return Rt.FixedSizeBinary;case Rt.FixedSizeList:return Rt.FixedSizeList;case Rt.Dictionary:return Rt.Dictionary}throw new Error(`Unrecognized type '${Rt[t.typeId]}'`)}nn.prototype.visitInt8=null;nn.prototype.visitInt16=null;nn.prototype.visitInt32=null;nn.prototype.visitInt64=null;nn.prototype.visitUint8=null;nn.prototype.visitUint16=null;nn.prototype.visitUint32=null;nn.prototype.visitUint64=null;nn.prototype.visitFloat16=null;nn.prototype.visitFloat32=null;nn.prototype.visitFloat64=null;nn.prototype.visitDateDay=null;nn.prototype.visitDateMillisecond=null;nn.prototype.visitTimestampSecond=null;nn.prototype.visitTimestampMillisecond=null;nn.prototype.visitTimestampMicrosecond=null;nn.prototype.visitTimestampNanosecond=null;nn.prototype.visitTimeSecond=null;nn.prototype.visitTimeMillisecond=null;nn.prototype.visitTimeMicrosecond=null;nn.prototype.visitTimeNanosecond=null;nn.prototype.visitDenseUnion=null;nn.prototype.visitSparseUnion=null;nn.prototype.visitIntervalDayTime=null;nn.prototype.visitIntervalYearMonth=null;nn.prototype.visitDuration=null;nn.prototype.visitDurationSecond=null;nn.prototype.visitDurationMillisecond=null;nn.prototype.visitDurationMicrosecond=null;nn.prototype.visitDurationNanosecond=null;const QW=new Float64Array(1),Yd=new Uint32Array(QW.buffer);function KW(t){const e=(t&31744)>>10,i=(t&1023)/1024,n=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,e-15)*(1+i)}function Hbt(t){if(t!==t)return 32256;QW[0]=t;const e=(Yd[1]&2147483648)>>16&65535;let i=Yd[1]&2146435072,n=0;return i>=1089470464?Yd[0]>0?i=31744:(i=(i&2080374784)>>16,n=(Yd[1]&1048575)>>10):i<=1056964608?(n=1048576+(Yd[1]&1048575),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=(Yd[1]&1048575)+512>>10),e|i|n&65535}class pi extends nn{}function Si(t){return(e,i,n)=>{if(e.setValid(i,n!=null))return t(e,i,n)}}const qbt=(t,e,i)=>{t[e]=Math.trunc(i/864e5)},vO=(t,e,i)=>{t[e]=Math.trunc(i%4294967296),t[e+1]=Math.trunc(i/4294967296)},Ybt=(t,e,i)=>{t[e]=Math.trunc(i*1e3%4294967296),t[e+1]=Math.trunc(i*1e3/4294967296)},Gbt=(t,e,i)=>{t[e]=Math.trunc(i*1e6%4294967296),t[e+1]=Math.trunc(i*1e6/4294967296)},ZW=(t,e,i,n)=>{if(i+1<e.length){const r=D_(e[i]),s=D_(e[i+1]);t.set(n.subarray(0,s-r),r)}},Xbt=({offset:t,values:e},i,n)=>{const r=t+i;n?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)},xc=({values:t},e,i)=>{t[e]=i},TO=({values:t},e,i)=>{t[e]=i},JW=({values:t},e,i)=>{t[e]=Hbt(i)},Qbt=(t,e,i)=>{switch(t.type.precision){case _a.HALF:return JW(t,e,i);case _a.SINGLE:case _a.DOUBLE:return TO(t,e,i)}},tH=({values:t},e,i)=>{qbt(t,e,i.valueOf())},eH=({values:t},e,i)=>{vO(t,e*2,i.valueOf())},Kbt=({stride:t,values:e},i,n)=>{e.set(n.subarray(0,t),t*i)},iH=({values:t,valueOffsets:e},i,n)=>ZW(t,e,i,n),nH=({values:t,valueOffsets:e},i,n)=>ZW(t,e,i,qW(n)),Zbt=(t,e,i)=>{t.type.unit===Tf.DAY?tH(t,e,i):eH(t,e,i)},rH=({values:t},e,i)=>vO(t,e*2,i/1e3),sH=({values:t},e,i)=>vO(t,e*2,i),aH=({values:t},e,i)=>Ybt(t,e*2,i),oH=({values:t},e,i)=>Gbt(t,e*2,i),Jbt=(t,e,i)=>{switch(t.type.unit){case Vi.SECOND:return rH(t,e,i);case Vi.MILLISECOND:return sH(t,e,i);case Vi.MICROSECOND:return aH(t,e,i);case Vi.NANOSECOND:return oH(t,e,i)}},lH=({values:t},e,i)=>{t[e]=i},cH=({values:t},e,i)=>{t[e]=i},uH=({values:t},e,i)=>{t[e]=i},hH=({values:t},e,i)=>{t[e]=i},tvt=(t,e,i)=>{switch(t.type.unit){case Vi.SECOND:return lH(t,e,i);case Vi.MILLISECOND:return cH(t,e,i);case Vi.MICROSECOND:return uH(t,e,i);case Vi.NANOSECOND:return hH(t,e,i)}},evt=({values:t,stride:e},i,n)=>{t.set(n.subarray(0,e),e*i)},ivt=(t,e,i)=>{const n=t.children[0],r=t.valueOffsets,s=pl.getVisitFn(n);if(Array.isArray(i))for(let a=-1,o=r[e],l=r[e+1];o<l;)s(n,o++,i[++a]);else for(let a=-1,o=r[e],l=r[e+1];o<l;)s(n,o++,i.get(++a))},nvt=(t,e,i)=>{const n=t.children[0],{valueOffsets:r}=t,s=pl.getVisitFn(n);let{[e]:a,[e+1]:o}=r;const l=i instanceof Map?i.entries():Object.entries(i);for(const c of l)if(s(n,a,c),++a>=o)break},rvt=(t,e)=>(i,n,r,s)=>n&&i(n,t,e[s]),svt=(t,e)=>(i,n,r,s)=>n&&i(n,t,e.get(s)),avt=(t,e)=>(i,n,r,s)=>n&&i(n,t,e.get(r.name)),ovt=(t,e)=>(i,n,r,s)=>n&&i(n,t,e[r.name]),lvt=(t,e,i)=>{const n=t.type.children.map(s=>pl.getVisitFn(s.type)),r=i instanceof Map?avt(e,i):i instanceof Ar?svt(e,i):Array.isArray(i)?rvt(e,i):ovt(e,i);t.type.children.forEach((s,a)=>r(n[a],t.children[a],s,a))},cvt=(t,e,i)=>{t.type.mode===gl.Dense?fH(t,e,i):dH(t,e,i)},fH=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];pl.visit(r,t.valueOffsets[e],i)},dH=(t,e,i)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[n];pl.visit(r,e,i)},uvt=(t,e,i)=>{var n;(n=t.dictionary)===null||n===void 0||n.set(t.values[e],i)},hvt=(t,e,i)=>{t.type.unit===Sf.DAY_TIME?AH(t,e,i):gH(t,e,i)},AH=({values:t},e,i)=>{t.set(i.subarray(0,2),2*e)},gH=({values:t},e,i)=>{t[e]=i[0]*12+i[1]%12},yH=({values:t},e,i)=>{t[e]=i},pH=({values:t},e,i)=>{t[e]=i},mH=({values:t},e,i)=>{t[e]=i},_H=({values:t},e,i)=>{t[e]=i},fvt=(t,e,i)=>{switch(t.type.unit){case Vi.SECOND:return yH(t,e,i);case Vi.MILLISECOND:return pH(t,e,i);case Vi.MICROSECOND:return mH(t,e,i);case Vi.NANOSECOND:return _H(t,e,i)}},dvt=(t,e,i)=>{const{stride:n}=t,r=t.children[0],s=pl.getVisitFn(r);if(Array.isArray(i))for(let a=-1,o=e*n;++a<n;)s(r,o+a,i[a]);else for(let a=-1,o=e*n;++a<n;)s(r,o+a,i.get(a))};pi.prototype.visitBool=Si(Xbt);pi.prototype.visitInt=Si(xc);pi.prototype.visitInt8=Si(xc);pi.prototype.visitInt16=Si(xc);pi.prototype.visitInt32=Si(xc);pi.prototype.visitInt64=Si(xc);pi.prototype.visitUint8=Si(xc);pi.prototype.visitUint16=Si(xc);pi.prototype.visitUint32=Si(xc);pi.prototype.visitUint64=Si(xc);pi.prototype.visitFloat=Si(Qbt);pi.prototype.visitFloat16=Si(JW);pi.prototype.visitFloat32=Si(TO);pi.prototype.visitFloat64=Si(TO);pi.prototype.visitUtf8=Si(nH);pi.prototype.visitLargeUtf8=Si(nH);pi.prototype.visitBinary=Si(iH);pi.prototype.visitLargeBinary=Si(iH);pi.prototype.visitFixedSizeBinary=Si(Kbt);pi.prototype.visitDate=Si(Zbt);pi.prototype.visitDateDay=Si(tH);pi.prototype.visitDateMillisecond=Si(eH);pi.prototype.visitTimestamp=Si(Jbt);pi.prototype.visitTimestampSecond=Si(rH);pi.prototype.visitTimestampMillisecond=Si(sH);pi.prototype.visitTimestampMicrosecond=Si(aH);pi.prototype.visitTimestampNanosecond=Si(oH);pi.prototype.visitTime=Si(tvt);pi.prototype.visitTimeSecond=Si(lH);pi.prototype.visitTimeMillisecond=Si(cH);pi.prototype.visitTimeMicrosecond=Si(uH);pi.prototype.visitTimeNanosecond=Si(hH);pi.prototype.visitDecimal=Si(evt);pi.prototype.visitList=Si(ivt);pi.prototype.visitStruct=Si(lvt);pi.prototype.visitUnion=Si(cvt);pi.prototype.visitDenseUnion=Si(fH);pi.prototype.visitSparseUnion=Si(dH);pi.prototype.visitDictionary=Si(uvt);pi.prototype.visitInterval=Si(hvt);pi.prototype.visitIntervalDayTime=Si(AH);pi.prototype.visitIntervalYearMonth=Si(gH);pi.prototype.visitDuration=Si(fvt);pi.prototype.visitDurationSecond=Si(yH);pi.prototype.visitDurationMillisecond=Si(pH);pi.prototype.visitDurationMicrosecond=Si(mH);pi.prototype.visitDurationNanosecond=Si(_H);pi.prototype.visitFixedSizeList=Si(dvt);pi.prototype.visitMap=Si(nvt);const pl=new pi,Mo=Symbol.for("parent"),PA=Symbol.for("rowIndex");class SO{constructor(e,i){return this[Mo]=e,this[PA]=i,new Proxy(this,new gvt)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[PA],i=this[Mo],n=i.type.children,r={};for(let s=-1,a=n.length;++s<a;)r[n[s].name]=Ga.visit(i.children[s],e);return r}toString(){return`{${[...this].map(([e,i])=>`${N_(e)}: ${N_(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Avt(this[Mo],this[PA])}}class Avt{constructor(e,i){this.childIndex=0,this.children=e.children,this.rowIndex=i,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Ga.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(SO.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Mo]:{writable:!0,enumerable:!1,configurable:!1,value:null},[PA]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class gvt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Mo].type.children.map(i=>i.name)}has(e,i){return e[Mo].type.children.findIndex(n=>n.name===i)!==-1}getOwnPropertyDescriptor(e,i){if(e[Mo].type.children.findIndex(n=>n.name===i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,i){if(Reflect.has(e,i))return e[i];const n=e[Mo].type.children.findIndex(r=>r.name===i);if(n!==-1){const r=Ga.visit(e[Mo].children[n],e[PA]);return Reflect.set(e,i,r),r}}set(e,i,n){const r=e[Mo].type.children.findIndex(s=>s.name===i);return r!==-1?(pl.visit(e[Mo].children[r],e[PA],n),Reflect.set(e,i,n)):Reflect.has(e,i)||typeof i=="symbol"?Reflect.set(e,i,n):!1}}class li extends nn{}function mi(t){return(e,i)=>e.getValid(i)?t(e,i):null}const yvt=(t,e)=>864e5*t[e],wO=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),pvt=(t,e)=>4294967296*(t[e+1]/1e3)+(t[e]>>>0)/1e3,mvt=(t,e)=>4294967296*(t[e+1]/1e6)+(t[e]>>>0)/1e6,bH=t=>new Date(t),_vt=(t,e)=>bH(yvt(t,e)),bvt=(t,e)=>bH(wO(t,e)),vvt=(t,e)=>null,vH=(t,e,i)=>{if(i+1>=e.length)return null;const n=D_(e[i]),r=D_(e[i+1]);return t.subarray(n,r)},Tvt=({offset:t,values:e},i)=>{const n=t+i;return(e[n>>3]&1<<n%8)!==0},TH=({values:t},e)=>_vt(t,e),SH=({values:t},e)=>bvt(t,e*2),Xu=({stride:t,values:e},i)=>e[t*i],Svt=({stride:t,values:e},i)=>KW(e[t*i]),wH=({values:t},e)=>t[e],wvt=({stride:t,values:e},i)=>e.subarray(t*i,t*(i+1)),MH=({values:t,valueOffsets:e},i)=>vH(t,e,i),IH=({values:t,valueOffsets:e},i)=>{const n=vH(t,e,i);return n!==null?Fbt(n):null},Mvt=({values:t},e)=>t[e],Ivt=({type:t,values:e},i)=>t.precision!==_a.HALF?e[i]:KW(e[i]),Evt=(t,e)=>t.type.unit===Tf.DAY?TH(t,e):SH(t,e),EH=({values:t},e)=>1e3*wO(t,e*2),BH=({values:t},e)=>wO(t,e*2),OH=({values:t},e)=>pvt(t,e*2),RH=({values:t},e)=>mvt(t,e*2),Bvt=(t,e)=>{switch(t.type.unit){case Vi.SECOND:return EH(t,e);case Vi.MILLISECOND:return BH(t,e);case Vi.MICROSECOND:return OH(t,e);case Vi.NANOSECOND:return RH(t,e)}},DH=({values:t},e)=>t[e],CH=({values:t},e)=>t[e],PH=({values:t},e)=>t[e],xH=({values:t},e)=>t[e],Ovt=(t,e)=>{switch(t.type.unit){case Vi.SECOND:return DH(t,e);case Vi.MILLISECOND:return CH(t,e);case Vi.MICROSECOND:return PH(t,e);case Vi.NANOSECOND:return xH(t,e)}},Rvt=({values:t,stride:e},i)=>bO.decimal(t.subarray(e*i,e*(i+1))),Dvt=(t,e)=>{const{valueOffsets:i,stride:n,children:r}=t,{[e*n]:s,[e*n+1]:a}=i,l=r[0].slice(s,a-s);return new Ar([l])},Cvt=(t,e)=>{const{valueOffsets:i,children:n}=t,{[e]:r,[e+1]:s}=i,a=n[0];return new MO(a.slice(r,s-r))},Pvt=(t,e)=>new SO(t,e),xvt=(t,e)=>t.type.mode===gl.Dense?NH(t,e):FH(t,e),NH=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return Ga.visit(n,t.valueOffsets[e])},FH=(t,e)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],n=t.children[i];return Ga.visit(n,e)},Nvt=(t,e)=>{var i;return(i=t.dictionary)===null||i===void 0?void 0:i.get(t.values[e])},Fvt=(t,e)=>t.type.unit===Sf.DAY_TIME?LH(t,e):UH(t,e),LH=({values:t},e)=>t.subarray(2*e,2*(e+1)),UH=({values:t},e)=>{const i=t[e],n=new Int32Array(2);return n[0]=Math.trunc(i/12),n[1]=Math.trunc(i%12),n},kH=({values:t},e)=>t[e],jH=({values:t},e)=>t[e],zH=({values:t},e)=>t[e],VH=({values:t},e)=>t[e],Lvt=(t,e)=>{switch(t.type.unit){case Vi.SECOND:return kH(t,e);case Vi.MILLISECOND:return jH(t,e);case Vi.MICROSECOND:return zH(t,e);case Vi.NANOSECOND:return VH(t,e)}},Uvt=(t,e)=>{const{stride:i,children:n}=t,s=n[0].slice(e*i,i);return new Ar([s])};li.prototype.visitNull=mi(vvt);li.prototype.visitBool=mi(Tvt);li.prototype.visitInt=mi(Mvt);li.prototype.visitInt8=mi(Xu);li.prototype.visitInt16=mi(Xu);li.prototype.visitInt32=mi(Xu);li.prototype.visitInt64=mi(wH);li.prototype.visitUint8=mi(Xu);li.prototype.visitUint16=mi(Xu);li.prototype.visitUint32=mi(Xu);li.prototype.visitUint64=mi(wH);li.prototype.visitFloat=mi(Ivt);li.prototype.visitFloat16=mi(Svt);li.prototype.visitFloat32=mi(Xu);li.prototype.visitFloat64=mi(Xu);li.prototype.visitUtf8=mi(IH);li.prototype.visitLargeUtf8=mi(IH);li.prototype.visitBinary=mi(MH);li.prototype.visitLargeBinary=mi(MH);li.prototype.visitFixedSizeBinary=mi(wvt);li.prototype.visitDate=mi(Evt);li.prototype.visitDateDay=mi(TH);li.prototype.visitDateMillisecond=mi(SH);li.prototype.visitTimestamp=mi(Bvt);li.prototype.visitTimestampSecond=mi(EH);li.prototype.visitTimestampMillisecond=mi(BH);li.prototype.visitTimestampMicrosecond=mi(OH);li.prototype.visitTimestampNanosecond=mi(RH);li.prototype.visitTime=mi(Ovt);li.prototype.visitTimeSecond=mi(DH);li.prototype.visitTimeMillisecond=mi(CH);li.prototype.visitTimeMicrosecond=mi(PH);li.prototype.visitTimeNanosecond=mi(xH);li.prototype.visitDecimal=mi(Rvt);li.prototype.visitList=mi(Dvt);li.prototype.visitStruct=mi(Pvt);li.prototype.visitUnion=mi(xvt);li.prototype.visitDenseUnion=mi(NH);li.prototype.visitSparseUnion=mi(FH);li.prototype.visitDictionary=mi(Nvt);li.prototype.visitInterval=mi(Fvt);li.prototype.visitIntervalDayTime=mi(LH);li.prototype.visitIntervalYearMonth=mi(UH);li.prototype.visitDuration=mi(Lvt);li.prototype.visitDurationSecond=mi(kH);li.prototype.visitDurationMillisecond=mi(jH);li.prototype.visitDurationMicrosecond=mi(zH);li.prototype.visitDurationNanosecond=mi(VH);li.prototype.visitFixedSizeList=mi(Uvt);li.prototype.visitMap=mi(Cvt);const Ga=new li,nl=Symbol.for("keys"),xA=Symbol.for("vals");class MO{constructor(e){return this[nl]=new Ar([e.children[0]]).memoize(),this[xA]=e.children[1],new Proxy(this,new jvt)}[Symbol.iterator](){return new kvt(this[nl],this[xA])}get size(){return this[nl].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[nl],i=this[xA],n={};for(let r=-1,s=e.length;++r<s;)n[e.get(r)]=Ga.visit(i,r);return n}toString(){return`{${[...this].map(([e,i])=>`${N_(e)}: ${N_(i)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class kvt{constructor(e,i){this.keys=e,this.vals=i,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Ga.visit(this.vals,e)]})}}class jvt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[nl].toArray().map(String)}has(e,i){return e[nl].includes(i)}getOwnPropertyDescriptor(e,i){if(e[nl].indexOf(i)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,i){if(Reflect.has(e,i))return e[i];const n=e[nl].indexOf(i);if(n!==-1){const r=Ga.visit(Reflect.get(e,xA),n);return Reflect.set(e,i,r),r}}set(e,i,n){const r=e[nl].indexOf(i);return r!==-1?(pl.visit(Reflect.get(e,xA),r,n),Reflect.set(e,i,n)):Reflect.has(e,i)?Reflect.set(e,i,n):!1}}Object.defineProperties(MO.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[nl]:{writable:!0,enumerable:!1,configurable:!1,value:null},[xA]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let TU;function zvt(t,e,i,n){const{length:r=0}=t;let s=typeof e!="number"?0:e,a=typeof i!="number"?r:i;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(TU=s,s=a,a=TU),a>r&&(a=r),n?n(t,s,a):[s,a]}const SU=t=>t!==t;function b0(t){if(typeof t!=="object"||t===null)return SU(t)?SU:i=>i===t;if(t instanceof Date){const i=t.valueOf();return n=>n instanceof Date?n.valueOf()===i:!1}return ArrayBuffer.isView(t)?i=>i?zbt(t,i):!1:t instanceof Map?$vt(t):Array.isArray(t)?Vvt(t):t instanceof Ar?Wvt(t):Hvt(t,!0)}function Vvt(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=b0(t[i]);return VT(e)}function $vt(t){let e=-1;const i=[];for(const n of t.values())i[++e]=b0(n);return VT(i)}function Wvt(t){const e=[];for(let i=-1,n=t.length;++i<n;)e[i]=b0(t.get(i));return VT(e)}function Hvt(t,e=!1){const i=Object.keys(t);if(!e&&i.length===0)return()=>!1;const n=[];for(let r=-1,s=i.length;++r<s;)n[r]=b0(t[i[r]]);return VT(n,i)}function VT(t,e){return i=>{if(!i||typeof i!="object")return!1;switch(i.constructor){case Array:return qvt(t,i);case Map:return wU(t,i,i.keys());case MO:case SO:case Object:case void 0:return wU(t,i,e||Object.keys(i))}return i instanceof Ar?Yvt(t,i):!1}}function qvt(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e[n]))return!1;return!0}function Yvt(t,e){const i=t.length;if(e.length!==i)return!1;for(let n=-1;++n<i;)if(!t[n](e.get(n)))return!1;return!0}function wU(t,e,i){const n=i[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const o=t.length;let l=s.next(),c=n.next(),h=r.next();for(;a<o&&!c.done&&!h.done&&!l.done&&!(c.value!==h.value||!t[a](l.value));++a,c=n.next(),h=r.next(),l=s.next());return a===o&&c.done&&h.done&&l.done?!0:(n.return&&n.return(),r.return&&r.return(),s.return&&s.return(),!1)}class MU{constructor(e=0,i){this.numChunks=e,this.getChunkIterator=i,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Gvt(t){return t.some(e=>e.nullable)}function Xvt(t){return t.reduce((e,i)=>e+i.nullCount,0)}function Qvt(t){return t.reduce((e,i,n)=>(e[n+1]=e[n]+i.length,e),new Uint32Array(t.length+1))}function Kvt(t,e,i,n){const r=[];for(let s=-1,a=t.length;++s<a;){const o=t[s],l=e[s],{length:c}=o;if(l>=n)break;if(i>=l+c)continue;if(l>=i&&l+c<=n){r.push(o);continue}const h=Math.max(0,i-l),A=Math.min(n-l,c);r.push(o.slice(h,A-h))}return r.length===0&&r.push(t[0].slice(0,0)),r}function IO(t,e,i,n){let r=0,s=0,a=e.length-1;do{if(r>=a-1)return i<e[a]?n(t,r,i-e[r]):null;s=r+Math.trunc((a-r)*.5),i<e[s]?a=s:r=s}while(r<a)}function $H(t,e){return t.getValid(e)}function IU(t){function e(i,n,r){return t(i[n],r)}return function(i){const n=this.data;return IO(n,this._offsets,i,e)}}function Zvt(t){let e;function i(n,r,s){return t(n[r],s,e)}return function(n,r){const s=this.data;e=r;const a=IO(s,this._offsets,n,i);return e=void 0,a}}function Jvt(t){let e;function i(n,r,s){let a=s,o=0,l=0;for(let c=r-1,h=n.length;++c<h;){const A=n[c];if(~(o=t(A,e,a)))return l+o;a=0,l+=A.length}return-1}return function(n,r){e=n;const s=this.data,a=typeof r!="number"?i(s,0,0):IO(s,this._offsets,r,i);return e=void 0,a}}function WH(t,e,i,n){return(i&1<<n)!==0}function t2t(t,e,i,n){return(i&1<<n)>>n}function EU(t,e,i){const n=i.byteLength+7&-8;if(t>0||i.byteLength<n){const r=new Uint8Array(n);return r.set(t%8===0?i.subarray(t>>3):e2t(new EO(i,t,e,null,WH)).subarray(0,n)),r}return i}function e2t(t){const e=[];let i=0,n=0,r=0;for(const a of t)a&&(r|=1<<n),++n===8&&(e[i++]=r,r=n=0);(i===0||n>0)&&(e[i++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class EO{constructor(e,i,n,r,s){this.bytes=e,this.length=n,this.context=r,this.get=s,this.bit=i%8,this.byteIndex=i>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function GI(t,e,i){if(i-e<=0)return 0;if(i-e<8){let s=0;for(const a of new EO(t,e,i-e,t,t2t))s+=a;return s}const n=i>>3<<3,r=e+(e%8===0?0:8-e%8);return GI(t,e,r)+GI(t,n,i)+i2t(t,r>>3,n-r>>3)}function i2t(t,e,i){let n=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=i===void 0?t.byteLength:r+i;for(;a-r>=4;)n+=nM(s.getUint32(r)),r+=4;for(;a-r>=2;)n+=nM(s.getUint16(r)),r+=2;for(;a-r>=1;)n+=nM(s.getUint8(r)),r+=1;return n}function nM(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}class ci extends nn{}function n2t(t,e){return e===null&&t.length>0?0:-1}function r2t(t,e){const{nullBitmap:i}=t;if(!i||t.nullCount<=0)return-1;let n=0;for(const r of new EO(i,t.offset+(e||0),t.length,i,WH)){if(!r)return n;++n}return-1}function Ci(t,e,i){if(e===void 0)return-1;if(e===null)switch(t.typeId){case Rt.Union:break;case Rt.Dictionary:break;default:return r2t(t,i)}const n=Ga.getVisitFn(t),r=b0(e);for(let s=(i||0)-1,a=t.length;++s<a;)if(r(n(t,s)))return s;return-1}function HH(t,e,i){const n=Ga.getVisitFn(t),r=b0(e);for(let s=(i||0)-1,a=t.length;++s<a;)if(r(n(t,s)))return s;return-1}ci.prototype.visitNull=n2t;ci.prototype.visitBool=Ci;ci.prototype.visitInt=Ci;ci.prototype.visitInt8=Ci;ci.prototype.visitInt16=Ci;ci.prototype.visitInt32=Ci;ci.prototype.visitInt64=Ci;ci.prototype.visitUint8=Ci;ci.prototype.visitUint16=Ci;ci.prototype.visitUint32=Ci;ci.prototype.visitUint64=Ci;ci.prototype.visitFloat=Ci;ci.prototype.visitFloat16=Ci;ci.prototype.visitFloat32=Ci;ci.prototype.visitFloat64=Ci;ci.prototype.visitUtf8=Ci;ci.prototype.visitLargeUtf8=Ci;ci.prototype.visitBinary=Ci;ci.prototype.visitLargeBinary=Ci;ci.prototype.visitFixedSizeBinary=Ci;ci.prototype.visitDate=Ci;ci.prototype.visitDateDay=Ci;ci.prototype.visitDateMillisecond=Ci;ci.prototype.visitTimestamp=Ci;ci.prototype.visitTimestampSecond=Ci;ci.prototype.visitTimestampMillisecond=Ci;ci.prototype.visitTimestampMicrosecond=Ci;ci.prototype.visitTimestampNanosecond=Ci;ci.prototype.visitTime=Ci;ci.prototype.visitTimeSecond=Ci;ci.prototype.visitTimeMillisecond=Ci;ci.prototype.visitTimeMicrosecond=Ci;ci.prototype.visitTimeNanosecond=Ci;ci.prototype.visitDecimal=Ci;ci.prototype.visitList=Ci;ci.prototype.visitStruct=Ci;ci.prototype.visitUnion=Ci;ci.prototype.visitDenseUnion=HH;ci.prototype.visitSparseUnion=HH;ci.prototype.visitDictionary=Ci;ci.prototype.visitInterval=Ci;ci.prototype.visitIntervalDayTime=Ci;ci.prototype.visitIntervalYearMonth=Ci;ci.prototype.visitDuration=Ci;ci.prototype.visitDurationSecond=Ci;ci.prototype.visitDurationMillisecond=Ci;ci.prototype.visitDurationMicrosecond=Ci;ci.prototype.visitDurationNanosecond=Ci;ci.prototype.visitFixedSizeList=Ci;ci.prototype.visitMap=Ci;const BU=new ci;class ui extends nn{}function _i(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(e.typeId===Rt.Timestamp||e instanceof w2&&e.bitWidth!==64||e instanceof I2&&e.bitWidth!==64||e instanceof M2&&e.precision!==_a.HALF))return new MU(t.data.length,n=>{const r=t.data[n];return r.values.subarray(0,r.length)[Symbol.iterator]()});let i=0;return new MU(t.data.length,n=>{const s=t.data[n].length,a=t.slice(i,i+s);return i+=s,new s2t(a)})}class s2t{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}ui.prototype.visitNull=_i;ui.prototype.visitBool=_i;ui.prototype.visitInt=_i;ui.prototype.visitInt8=_i;ui.prototype.visitInt16=_i;ui.prototype.visitInt32=_i;ui.prototype.visitInt64=_i;ui.prototype.visitUint8=_i;ui.prototype.visitUint16=_i;ui.prototype.visitUint32=_i;ui.prototype.visitUint64=_i;ui.prototype.visitFloat=_i;ui.prototype.visitFloat16=_i;ui.prototype.visitFloat32=_i;ui.prototype.visitFloat64=_i;ui.prototype.visitUtf8=_i;ui.prototype.visitLargeUtf8=_i;ui.prototype.visitBinary=_i;ui.prototype.visitLargeBinary=_i;ui.prototype.visitFixedSizeBinary=_i;ui.prototype.visitDate=_i;ui.prototype.visitDateDay=_i;ui.prototype.visitDateMillisecond=_i;ui.prototype.visitTimestamp=_i;ui.prototype.visitTimestampSecond=_i;ui.prototype.visitTimestampMillisecond=_i;ui.prototype.visitTimestampMicrosecond=_i;ui.prototype.visitTimestampNanosecond=_i;ui.prototype.visitTime=_i;ui.prototype.visitTimeSecond=_i;ui.prototype.visitTimeMillisecond=_i;ui.prototype.visitTimeMicrosecond=_i;ui.prototype.visitTimeNanosecond=_i;ui.prototype.visitDecimal=_i;ui.prototype.visitList=_i;ui.prototype.visitStruct=_i;ui.prototype.visitUnion=_i;ui.prototype.visitDenseUnion=_i;ui.prototype.visitSparseUnion=_i;ui.prototype.visitDictionary=_i;ui.prototype.visitInterval=_i;ui.prototype.visitIntervalDayTime=_i;ui.prototype.visitIntervalYearMonth=_i;ui.prototype.visitDuration=_i;ui.prototype.visitDurationSecond=_i;ui.prototype.visitDurationMillisecond=_i;ui.prototype.visitDurationMicrosecond=_i;ui.prototype.visitDurationNanosecond=_i;ui.prototype.visitFixedSizeList=_i;ui.prototype.visitMap=_i;const a2t=new ui;var qH;const YH={},GH={};class Ar{constructor(e){var i,n,r;const s=e[0]instanceof Ar?e.flatMap(o=>o.data):e;if(s.length===0||s.some(o=>!(o instanceof If)))throw new TypeError("Vector constructor expects an Array of Data instances.");const a=(i=s[0])===null||i===void 0?void 0:i.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:o,set:l,indexOf:c}=YH[a.typeId],h=s[0];this.isValid=A=>$H(h,A),this.get=A=>o(h,A),this.set=(A,m)=>l(h,A,m),this.indexOf=A=>c(h,A),this._offsets=[0,h.length];break}default:Object.setPrototypeOf(this,GH[a.typeId]),this._offsets=Qvt(s);break}this.data=s,this.type=a,this.stride=hW(a),this.numChildren=(r=(n=a.children)===null||n===void 0?void 0:n.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,i)=>e+i.byteLength,0)}get nullable(){return Gvt(this.data)}get nullCount(){return Xvt(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${Rt[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,i){}indexOf(e,i){return-1}includes(e,i){return this.indexOf(e,i)>-1}[Symbol.iterator](){return a2t.visit(this)}concat(...e){return new Ar(this.data.concat(e.flatMap(i=>i.data).flat(Number.POSITIVE_INFINITY)))}slice(e,i){return new Ar(zvt(this,e,i,({data:n,_offsets:r},s,a)=>Kvt(n,r,s,a)))}toJSON(){return[...this]}toArray(){const{type:e,data:i,length:n,stride:r,ArrayType:s}=this;switch(e.typeId){case Rt.Int:case Rt.Float:case Rt.Decimal:case Rt.Time:case Rt.Timestamp:switch(i.length){case 0:return new s;case 1:return i[0].values.subarray(0,n*r);default:return i.reduce((a,{values:o,length:l})=>(a.array.set(o.subarray(0,l*r),a.offset),a.offset+=l*r,a),{array:new s(n*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var i;return this.getChildAt((i=this.type.children)===null||i===void 0?void 0:i.findIndex(n=>n.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Ar(this.data.map(({children:i})=>i[e])):null}get isMemoized(){return xi.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(xi.isDictionary(this.type)){const e=new C2(this.data[0].dictionary),i=this.data.map(n=>{const r=n.clone();return r.dictionary=e,r});return new Ar(i)}return new C2(this)}unmemoize(){if(xi.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),i=this.data.map(n=>{const r=n.clone();return r.dictionary=e,r});return new Ar(i)}return this}}qH=Symbol.toStringTag;Ar[qH]=(t=>{t.type=xi.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(Rt).map(i=>Rt[i]).filter(i=>typeof i=="number"&&i!==Rt.NONE);for(const i of e){const n=Ga.getVisitFnByTypeId(i),r=pl.getVisitFnByTypeId(i),s=BU.getVisitFnByTypeId(i);YH[i]={get:n,set:r,indexOf:s},GH[i]=Object.create(t,{isValid:{value:IU($H)},get:{value:IU(Ga.getVisitFnByTypeId(i))},set:{value:Zvt(pl.getVisitFnByTypeId(i))},indexOf:{value:Jvt(BU.getVisitFnByTypeId(i))}})}return"Vector"})(Ar.prototype);class C2 extends Ar{constructor(e){super(e.data);const i=this.get,n=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(a){const o=s[a];if(o!==void 0)return o;const l=i.call(this,a);return s[a]=l,l}}),Object.defineProperty(this,"set",{value(a,o){n.call(this,a,o),s[a]=o}}),Object.defineProperty(this,"slice",{value:(a,o)=>new C2(r.call(this,a,o))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Ar(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}const o2t=-1;class If{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return xi.isSparseUnion(e)?this.children.some(i=>i.nullable):xi.isDenseUnion(e)?this.children.some(i=>i.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:i,values:n,nullBitmap:r,typeIds:s}=this;return i&&(e+=i.byteLength),n&&(e+=n.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),this.children.reduce((a,o)=>a+o.byteLength,e)}get nullCount(){if(xi.isUnion(this.type))return this.children.reduce((n,r)=>n+r.nullCount,0);let e=this._nullCount,i;return e<=o2t&&(i=this.nullBitmap)&&(this._nullCount=e=this.length-GI(i,this.offset,this.offset+this.length)),e}constructor(e,i,n,r,s,a=[],o){this.type=e,this.children=a,this.dictionary=o,this.offset=Math.floor(Math.max(i||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let l;s instanceof If?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=hW(e),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(e){const{type:i}=this;if(xi.isUnion(i)){const n=i,r=this.children[n.typeIdToChildIndex[this.typeIds[e]]],s=n.mode===gl.Dense?this.valueOffsets[e]:e;return r.getValid(s)}if(this.nullable&&this.nullCount>0){const n=this.offset+e;return(this.nullBitmap[n>>3]&1<<n%8)!==0}return!0}setValid(e,i){let n;const{type:r}=this;if(xi.isUnion(r)){const s=r,a=this.children[s.typeIdToChildIndex[this.typeIds[e]]],o=s.mode===gl.Dense?this.valueOffsets[e]:e;n=a.getValid(o),a.setValid(o,i)}else{let{nullBitmap:s}=this;const{offset:a,length:o}=this,l=a+e,c=1<<l%8,h=l>>3;(!s||s.byteLength<=h)&&(s=new Uint8Array((a+o+63&-64)>>3).fill(255),this.nullCount>0&&s.set(EU(a,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const A=s[h];n=(A&c)!==0,i?s[h]=A|c:s[h]=A&~c}return n!==!!i&&(this._nullCount=this.nullCount+(i?-1:1)),i}clone(e=this.type,i=this.offset,n=this.length,r=this._nullCount,s=this,a=this.children){return new If(e,i,n,r,s,a,this.dictionary)}slice(e,i){const{stride:n,typeId:r,children:s}=this,a=+(this._nullCount===0)-1,o=r===16?n:1,l=this._sliceBuffers(e,i,n,r);return this.clone(this.type,this.offset+e,i,a,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,o*e,o*i))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===Rt.Null)return this.clone(this.type,0,e,0);const{length:i,nullCount:n}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,i>>3);r[i>>3]=(1<<i-(i&-8))-1,n>0&&r.set(EU(this.offset,i,this.nullBitmap),0);const s=this.buffers;return s[sn.VALIDITY]=r,this.clone(this.type,0,e,n+(e-i),s)}_sliceBuffers(e,i,n,r){let s;const{buffers:a}=this;return(s=a[sn.TYPE])&&(a[sn.TYPE]=s.subarray(e,e+i)),(s=a[sn.OFFSET])&&(a[sn.OFFSET]=s.subarray(e,e+i+1))||(s=a[sn.DATA])&&(a[sn.DATA]=r===6?s:s.subarray(n*e,n*(e+i))),a}_sliceChildren(e,i,n){return e.map(r=>r.slice(i,n))}}If.prototype.children=Object.freeze([]);function o_(t,e=!1){if("data"in t)return new Ar(t.data.map(s=>o_(s,e)));const i=[];for(const s of t.children)i.push(o_(s,e));let n;t.dictionary!==void 0&&(n=o_(t.dictionary,e));const r={[sn.OFFSET]:lv(t.buffers[sn.OFFSET],e),[sn.DATA]:lv(t.buffers[sn.DATA],e),[sn.VALIDITY]:lv(t.buffers[sn.VALIDITY],e),[sn.TYPE]:lv(t.buffers[sn.TYPE],e)};return new If(t.type,t.offset,t.length,t._nullCount,r,i,n)}function Dv(t){if("data"in t)return t.data.some(i=>Dv(i));for(const i of t.children)if(Dv(i))return!0;if(t.dictionary!==void 0&&Dv(t.dictionary))return!0;const e=[sn.OFFSET,sn.DATA,sn.VALIDITY,sn.TYPE];for(const i of e)if(t.buffers[i]!==void 0&&XH(t.buffers[i]))return!0;return!1}function XH(t){return!(t.byteOffset===0&&t.byteLength===t.buffer.byteLength)}function lv(t,e){return t===void 0||!e&&!XH(t)?t:t.slice()}function Cv(t,e=!1){if("data"in t){const n=[],r=[];for(const a of t.data){const[o,l]=Cv(a);n.push(o),r.push(...l)}return[new Ar(n),r]}t=o_(t,e);const i=[];for(let n=0;n<t.children.length;n++){const r=t.children[n],[s,a]=Cv(r);t.children[n]=s,i.push(...a)}if(t.dictionary!==void 0){const[n,r]=Cv(t.dictionary);t.dictionary=n,i.push(...r)}return t.buffers[sn.OFFSET]!==void 0&&i.push(t.buffers[sn.OFFSET].buffer),t.buffers[sn.DATA]!==void 0&&i.push(t.buffers[sn.DATA].buffer),t.buffers[sn.VALIDITY]!==void 0&&i.push(t.buffers[sn.VALIDITY].buffer),t.buffers[sn.TYPE]!==void 0&&i.push(t.buffers[sn.TYPE].buffer),[t,i]}class zu{static new(...e){let[i,n,r,s]=e;return e[0]&&typeof e[0]=="object"&&({name:i}=e[0],n===void 0&&(n=e[0].type),r===void 0&&(r=e[0].nullable),s===void 0&&(s=e[0].metadata)),new zu(`${i}`,n,r,s)}constructor(e,i,n=!1,r){this.name=e,this.type=i,this.nullable=n,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[i,n,r,s]=e;return!e[0]||typeof e[0]!="object"?[i=this.name,n=this.type,r=this.nullable,s=this.metadata]=e:{name:i=this.name,type:n=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=e[0],zu.new(i,n,r,s)}}zu.prototype.type=null;zu.prototype.name=null;zu.prototype.nullable=null;zu.prototype.metadata=null;function QH(t){switch(t.typeId){case Rt.Null:return new II;case Rt.Int:return new w2(t.isSigned,t.bitWidth);case Rt.Float:return new M2(t.precision);case Rt.Binary:return new EI;case Rt.Utf8:return new BI;case Rt.Bool:return new OI;case Rt.Decimal:return new RI(t.scale,t.precision,t.bitWidth);case Rt.Date:return new DI(t.unit);case Rt.Time:return new I2(t.unit,t.bitWidth);case Rt.Timestamp:return new CI(t.unit,t.timezone);case Rt.Interval:return new PI(t.unit);case Rt.List:{const e=t.children.map(Mm);if(e.length>1)throw new Error("expected 1 field");return new NI(e[0])}case Rt.Struct:{const e=t.children.map(Mm);return new FI(e)}case Rt.Union:{const e=t.children.map(Mm);return new LI(t.mode,t.typeIds,e)}case Rt.FixedSizeBinary:return new UI(t.byteWidth);case Rt.FixedSizeList:{const e=t.children.map(Mm);if(e.length>1)throw new Error("expected 1 field");return new kI(t.listSize,e[0])}case Rt.Map:{const e=t.children.map(Mm);if(e.length>1)throw new Error("expected 1 field");const i=e[0];return new jI(i,t.keysSorted)}case Rt.Duration:return new xI(t.unit);default:throw new Error(`unknown type ${t}`)}}function Mm(t){const e=QH(t.type);return new zu(t.name,e,t.nullable,t.metadata)}function BO(t){const e=t.children.map(r=>BO(r)),i=t.dictionary?KH(t.dictionary):void 0,n={[sn.OFFSET]:t.valueOffsets,[sn.DATA]:t.values,[sn.VALIDITY]:t.nullBitmap,[sn.TYPE]:t.typeIds};return new If(QH(t.type),t.offset,t.length,t._nullCount,n,e,i)}function KH(t){return new Ar(t.data.map(e=>BO(e)))}var OU=Object.freeze({__proto__:null,hardClone:o_,isShared:Dv,preparePostMessage:Cv,rehydrateData:BO,rehydrateVector:KH});function l2t(t,e,i){const n=t.fields.findIndex(r=>r.name===i||r.metadata.get("ARROW:extension:name")===e);return n!==-1?n:null}function c2t(t){return di.isFixedSizeList(t.type)}function u2t(t){return di.isStruct(t.type)}function Sc(t){if(di.isList(t.type))return Sc(t.children[0]);if(di.isStruct(t.type))return!0;if(di.isFixedSizeList(t.type))return!1;throw new Error(`Unsupported geometry data type: ${t.type}`)}function h2t(t){if(c2t(t))return t;if(u2t(t)){const e=t.children.length,i=new Float64Array(t.length*e);for(let o=0;o<t.length;o++)for(let l=0;l<e;l++)i[o*e+l]=t.children[l].values[o];const n=new Af,r=new LA(e,new bs("coords",n)),s=Ri({type:n,length:i.length,data:i});return Ri({type:r,length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,child:s})}throw new Error(`Unsupported coordinate data type: ${t.type}`)}function XI(t){const e=tr.getLineStringChild(t),i=h2t(e);return Ri({type:new Pu(new bs("element",i.type)),length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,valueOffsets:t.valueOffsets,offset:t.offset,child:i})}function Gd(t){const e=tr.getPolygonChild(t),i=XI(e);return Ri({type:new Pu(new bs("element",i.type)),length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,valueOffsets:t.valueOffsets,offset:t.offset,child:i})}function f2t(t,e){const{index:i,data:n}=t;let r=i;n.invertedGeomOffsets!==void 0&&(r=n.invertedGeomOffsets[i]);const s={data:n.data,length:n.length,attributes:n.attributes},a={index:r,data:s,target:t.target};return e(a)}function P2(t){const{props:e,propName:i,propInput:n,chunkIdx:r,geomCoordOffsets:s}=t;if(n!==void 0)if(n instanceof Pi){const a=n.data[r];if(di.isFixedSizeList(a)){on(a.children.length===1);let o=a.children[0].values;s&&(o=RU(o,a.type.listSize,s)),e.data.attributes[i]={value:o,size:a.type.listSize,normalized:!0}}else if(di.isFloat(a)){let o=a.values;s&&(o=RU(o,1,s)),e.data.attributes[i]={value:o,size:1}}}else typeof n=="function"?e[i]=(a,o)=>i==="getPolygonOffset"?n(a,o):f2t(o,n):e[i]=n}function RU(t,e,i){const n=i[i.length-1],r=new t.constructor(n*e);for(let s=0;s<i.length-1;s++){const a=i[s],o=i[s+1];for(let l=a;l<o;l++)for(let c=0;c<e;c++)r[l*e+c]=t[s*e+c]}return r}function Iu(t,e){const i=l2t(t.schema,e);return i===null?null:t.getChildAt(i)}function d2t(t){const e=t.valueOffsets,n=tr.getMultiLineStringChild(t).valueOffsets,r=new Int32Array(e.length);for(let s=0;s<r.length;++s)r[s]=n[e[s]];return r}function DU(t){const e=t.valueOffsets,n=tr.getPolygonChild(t).valueOffsets,r=new Int32Array(e.length);for(let s=0;s<r.length;++s)r[s]=n[e[s]];return r}function A2t(t){const e=tr.getMultiPolygonChild(t),i=tr.getPolygonChild(e),n=t.valueOffsets,r=e.valueOffsets,s=i.valueOffsets,a=new Int32Array(n.length);for(let o=0;o<a.length;++o)a[o]=s[r[n[o]]];return a}function ZH(t){const e=t[t.length-1],i=t.length<Math.pow(2,8)?Uint8Array:t.length<Math.pow(2,16)?Uint16Array:Uint32Array,n=new i(e);for(let r=0;r<t.length-1;r++){const s=t[r],a=t[r+1];for(let o=s;o<a;o++)n[o]=r}return n}function x2(t,e){const i={},n={};for(const[r,s]of Object.entries(t))e.includes(r)||(r.startsWith("get")?i[r]=s:n[r]=s);return[i,n]}function JH({info:t,sourceLayer:e},i){let n=t.index;e.props.data.invertedGeomOffsets&&(n=e.props.data.invertedGeomOffsets[n]);const r=e.props.recordBatchIdx,s=e.props.tableOffsets,o=i.batches[r].get(n);if(o===null)return t;const l=s[r];return n+=l,{...t,index:n,object:o}}function QI(t){return t.reduce((e,i,n)=>(e[n+1]=e[n]+i.length,e),new Uint32Array(t.length+1))}function N2(t,e){const i=[],n=[];for(const[r,s]of Object.entries(t))r.startsWith("get")&&s instanceof Pi&&(i.push(s),r.endsWith("Color")&&n.push(s));g2t(e,i);for(const r of n)y2t(r)}function g2t(t,e){for(const i of e)on(t.batches.length===i.data.length);for(const i of e)for(let n=0;n<t.batches.length;n++)on(t.batches[n].numRows===i.data[n].length)}function y2t(t){on(di.isFixedSizeList(t.type)),on(t.type.listSize===3||t.type.listSize===4),on(di.isInt(t.type.children[0])),on(t.type.children[0].type.bitWidth===8)}const{data:a3t,getSourcePosition:o3t,getTargetPosition:l3t,...p2t}=rO.defaultProps;({...p2t});var ll;(function(t){t.POINT="geoarrow.point",t.LINESTRING="geoarrow.linestring",t.POLYGON="geoarrow.polygon",t.MULTIPOINT="geoarrow.multipoint",t.MULTILINESTRING="geoarrow.multilinestring",t.MULTIPOLYGON="geoarrow.multipolygon"})(ll||(ll={}));const{data:c3t,getPosition:u3t,...m2t}=xT.defaultProps;({...m2t});var er=function(t){t=t||{};var e=typeof t<"u"?t:{},i={},n;for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);var r="";function s(Gt){return e.locateFile?e.locateFile(Gt,r):r+Gt}var a;typeof document<"u"&&document.currentScript&&(r=document.currentScript.src),r.indexOf("blob:")!==0?r=r.substr(0,r.lastIndexOf("/")+1):r="",a=function(ne,Ie,ce){var g=new XMLHttpRequest;g.open("GET",ne,!0),g.responseType="arraybuffer",g.onload=function(){if(g.status==200||g.status==0&&g.response){Ie(g.response);return}var Yi=xn(ne);if(Yi){Ie(Yi.buffer);return}ce()},g.onerror=ce,g.send(null)};var o=e.print||console.log.bind(console),l=e.printErr||console.warn.bind(console);for(n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);i=null,e.arguments&&e.arguments;var c=0,h=function(Gt){c=Gt},A=function(){return c},m=8;function b(Gt,ne,Ie,ce){switch(Ie=Ie||"i8",Ie.charAt(Ie.length-1)==="*"&&(Ie="i32"),Ie){case"i1":X[Gt>>0]=ne;break;case"i8":X[Gt>>0]=ne;break;case"i16":Tt[Gt>>1]=ne;break;case"i32":Ot[Gt>>2]=ne;break;case"i64":vt=[ne>>>0,(ut=ne,+Oe(ut)>=1?ut>0?(qe(+Ee(ut/4294967296),4294967295)|0)>>>0:~~+Ye((ut-+(~~ut>>>0))/4294967296)>>>0:0)],Ot[Gt>>2]=vt[0],Ot[Gt+4>>2]=vt[1];break;case"float":H[Gt>>2]=ne;break;case"double":k[Gt>>3]=ne;break;default:ls("invalid type for setValue: "+Ie)}}function S(Gt,ne,Ie){switch(ne=ne||"i8",ne.charAt(ne.length-1)==="*"&&(ne="i32"),ne){case"i1":return X[Gt>>0];case"i8":return X[Gt>>0];case"i16":return Tt[Gt>>1];case"i32":return Ot[Gt>>2];case"i64":return Ot[Gt>>2];case"float":return H[Gt>>2];case"double":return k[Gt>>3];default:ls("invalid type for getValue: "+ne)}return null}var M=!1;function I(Gt,ne){Gt||ls("Assertion failed: "+ne)}function O(Gt){var ne=e["_"+Gt];return I(ne,"Cannot call unknown function "+Gt+", make sure it is exported"),ne}function D(Gt,ne,Ie,ce,g){var et={string:function(Xe){var cs=0;if(Xe!=null&&Xe!==0){var Zu=(Xe.length<<2)+1;cs=yt(Zu),$(Xe,cs,Zu)}return cs},array:function(Xe){var cs=yt(Xe.length);return V(Xe,cs),cs}};function Yi(Xe){return ne==="string"?N(Xe):ne==="boolean"?!!Xe:Xe}var Qi=O(Gt),Gn=[],bi=0;if(ce)for(var ki=0;ki<ce.length;ki++){var Ts=et[Ie[ki]];Ts?(bi===0&&(bi=Mi()),Gn[ki]=Ts(ce[ki])):Gn[ki]=ce[ki]}var $i=Qi.apply(null,Gn);return $i=Yi($i),bi!==0&&ct(bi),$i}function B(Gt,ne,Ie,ce){Ie=Ie||[];var g=Ie.every(function(Yi){return Yi==="number"}),et=ne!=="string";return et&&g&&!ce?O(Gt):function(){return D(Gt,ne,Ie,arguments)}}var P=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function j(Gt,ne,Ie){for(var ce=ne+Ie,g=ne;Gt[g]&&!(g>=ce);)++g;if(g-ne>16&&Gt.subarray&&P)return P.decode(Gt.subarray(ne,g));for(var et="";ne<g;){var Yi=Gt[ne++];if(!(Yi&128)){et+=String.fromCharCode(Yi);continue}var Qi=Gt[ne++]&63;if((Yi&224)==192){et+=String.fromCharCode((Yi&31)<<6|Qi);continue}var Gn=Gt[ne++]&63;if((Yi&240)==224?Yi=(Yi&15)<<12|Qi<<6|Gn:Yi=(Yi&7)<<18|Qi<<12|Gn<<6|Gt[ne++]&63,Yi<65536)et+=String.fromCharCode(Yi);else{var bi=Yi-65536;et+=String.fromCharCode(55296|bi>>10,56320|bi&1023)}}return et}function N(Gt,ne){return Gt?j(bt,Gt,ne):""}function F(Gt,ne,Ie,ce){if(!(ce>0))return 0;for(var g=Ie,et=Ie+ce-1,Yi=0;Yi<Gt.length;++Yi){var Qi=Gt.charCodeAt(Yi);if(Qi>=55296&&Qi<=57343){var Gn=Gt.charCodeAt(++Yi);Qi=65536+((Qi&1023)<<10)|Gn&1023}if(Qi<=127){if(Ie>=et)break;ne[Ie++]=Qi}else if(Qi<=2047){if(Ie+1>=et)break;ne[Ie++]=192|Qi>>6,ne[Ie++]=128|Qi&63}else if(Qi<=65535){if(Ie+2>=et)break;ne[Ie++]=224|Qi>>12,ne[Ie++]=128|Qi>>6&63,ne[Ie++]=128|Qi&63}else{if(Ie+3>=et)break;ne[Ie++]=240|Qi>>18,ne[Ie++]=128|Qi>>12&63,ne[Ie++]=128|Qi>>6&63,ne[Ie++]=128|Qi&63}}return ne[Ie]=0,Ie-g}function $(Gt,ne,Ie){return F(Gt,bt,ne,Ie)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function V(Gt,ne){X.set(Gt,ne)}function Z(Gt,ne){return Gt%ne>0&&(Gt+=ne-Gt%ne),Gt}var nt,X,bt,Tt,Ot,H,k;function G(Gt){nt=Gt,e.HEAP8=X=new Int8Array(Gt),e.HEAP16=Tt=new Int16Array(Gt),e.HEAP32=Ot=new Int32Array(Gt),e.HEAPU8=bt=new Uint8Array(Gt),e.HEAPU16=new Uint16Array(Gt),e.HEAPU32=new Uint32Array(Gt),e.HEAPF32=H=new Float32Array(Gt),e.HEAPF64=k=new Float64Array(Gt)}var lt=5271520,Q=28608,mt=e.TOTAL_MEMORY||33554432;e.buffer?nt=e.buffer:nt=new ArrayBuffer(mt),mt=nt.byteLength,G(nt),Ot[Q>>2]=lt;function wt(Gt){for(;Gt.length>0;){var ne=Gt.shift();if(typeof ne=="function"){ne();continue}var Ie=ne.func;typeof Ie=="number"?ne.arg===void 0?e.dynCall_v(Ie):e.dynCall_vi(Ie,ne.arg):Ie(ne.arg===void 0?null:ne.arg)}}var Dt=[],te=[],ie=[],ft=[];function Ht(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)Me(e.preRun.shift());wt(Dt)}function Nt(){wt(te)}function he(){wt(ie)}function me(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)pe(e.postRun.shift());wt(ft)}function Me(Gt){Dt.unshift(Gt)}function pe(Gt){ft.unshift(Gt)}var Oe=Math.abs,Ye=Math.ceil,Ee=Math.floor,qe=Math.min,dt=0,Y=null;function K(Gt){dt++,e.monitorRunDependencies&&e.monitorRunDependencies(dt)}function Ct(Gt){if(dt--,e.monitorRunDependencies&&e.monitorRunDependencies(dt),dt==0&&Y){var ne=Y;Y=null,ne()}}e.preloadedImages={},e.preloadedAudios={};var ee=null,Ft="data:application/octet-stream;base64,";function J(Gt){return String.prototype.startsWith?Gt.startsWith(Ft):Gt.indexOf(Ft)===0}var ut,vt;ee="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var Mt=28624;function re(Gt,ne,Ie,ce){ls("Assertion failed: "+N(Gt)+", at: "+[ne?N(ne):"unknown filename",Ie,ce?N(ce):"unknown function"])}function be(){return X.length}function Be(Gt,ne,Ie){bt.set(bt.subarray(ne,ne+Ie),Gt)}function q(Gt){return e.___errno_location&&(Ot[e.___errno_location()>>2]=Gt),Gt}function Bt(Gt){ls("OOM")}function Xt(Gt){try{var ne=new ArrayBuffer(Gt);return ne.byteLength!=Gt?void 0:(new Int8Array(ne).set(X),Nc(ne),G(ne),1)}catch{}}function ke(Gt){var ne=be(),Ie=16777216,ce=2147483648-Ie;if(Gt>ce)return!1;for(var g=16777216,et=Math.max(ne,g);et<Gt;)et<=536870912?et=Z(2*et,Ie):et=Math.min(Z((3*et+2147483648)/4,Ie),ce);var Yi=Xt(et);return!!Yi}var qi=typeof atob=="function"?atob:function(Gt){var ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ie="",ce,g,et,Yi,Qi,Gn,bi,ki=0;Gt=Gt.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Yi=ne.indexOf(Gt.charAt(ki++)),Qi=ne.indexOf(Gt.charAt(ki++)),Gn=ne.indexOf(Gt.charAt(ki++)),bi=ne.indexOf(Gt.charAt(ki++)),ce=Yi<<2|Qi>>4,g=(Qi&15)<<4|Gn>>2,et=(Gn&3)<<6|bi,Ie=Ie+String.fromCharCode(ce),Gn!==64&&(Ie=Ie+String.fromCharCode(g)),bi!==64&&(Ie=Ie+String.fromCharCode(et));while(ki<Gt.length);return Ie};function Tn(Gt){try{for(var ne=qi(Gt),Ie=new Uint8Array(ne.length),ce=0;ce<ne.length;++ce)Ie[ce]=ne.charCodeAt(ce);return Ie}catch{throw new Error("Converting base64 string to bytes failed.")}}function xn(Gt){if(J(Gt))return Tn(Gt.slice(Ft.length))}var os={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},Ku={b:h,c:A,d:re,e:q,f:be,g:Be,h:ke,i:Bt,o:Mt,p:Q},de=function(Gt,ne,Ie){"almost asm";var ce=new Gt.Int8Array(Ie),g=new Gt.Int32Array(Ie);new Gt.Uint8Array(Ie),new Gt.Float32Array(Ie);var et=new Gt.Float64Array(Ie),Yi=ne.o|0,Qi=ne.p|0,Gn=Gt.Math.floor,bi=Gt.Math.abs,ki=Gt.Math.sqrt,Ts=Gt.Math.pow,$i=Gt.Math.cos,Xe=Gt.Math.sin,cs=Gt.Math.tan,Zu=Gt.Math.acos,_l=Gt.Math.asin,Lo=Gt.Math.atan,Ss=Gt.Math.atan2,bl=Gt.Math.ceil,Ws=Gt.Math.imul,S0=Gt.Math.min,Gf=Gt.Math.max,ws=Gt.Math.clz32,Ze=ne.b,ot=ne.c,ti=ne.d,vl=ne.e,w0=ne.f,M0=ne.g,qT=ne.h,A1=ne.i,it=28640;function g1(d){return ce=new Int8Array(d),g=new Int32Array(d),et=new Float64Array(d),Ie=d,!0}function YT(d){d=d|0;var y=0;return y=it,it=it+d|0,it=it+15&-16,y|0}function Xf(){return it|0}function y1(d){d=d|0,it=d}function Qf(d,y){d=d|0,it=d}function GT(d,y){d=d|0,y=y|0;var p=0,v=0,T=0;return(d|0)<0?(y=2,y|0):(d|0)>13780509?(y=ud(15,y)|0,y|0):(p=((d|0)<0)<<31>>31,T=Un(d|0,p|0,3,0)|0,v=ot()|0,p=Pe(d|0,p|0,1,0)|0,p=Un(T|0,v|0,p|0,ot()|0)|0,p=Pe(p|0,ot()|0,1,0)|0,d=ot()|0,g[y>>2]=p,g[y+4>>2]=d,y=0,y|0)}function us(d,y,p,v){return d=d|0,y=y|0,p=p|0,v=v|0,Kf(d,y,p,v,0)|0}function Kf(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0;if(L=it,it=it+16|0,R=L,!(I0(d,y,p,v,T)|0))return v=0,it=L,v|0;do if((p|0)>=0){if((p|0)>13780509){if(E=ud(15,R)|0,E|0)break;C=R,R=g[C>>2]|0,C=g[C+4>>2]|0}else E=((p|0)<0)<<31>>31,z=Un(p|0,E|0,3,0)|0,C=ot()|0,E=Pe(p|0,E|0,1,0)|0,E=Un(z|0,C|0,E|0,ot()|0)|0,E=Pe(E|0,ot()|0,1,0)|0,C=ot()|0,g[R>>2]=E,g[R+4>>2]=C,R=E;if(xa(v|0,0,R<<3|0)|0,T|0){xa(T|0,0,R<<2|0)|0,E=Hs(d,y,p,v,T,R,C,0)|0;break}E=Os(R,4)|0,E?(z=Hs(d,y,p,v,E,R,C,0)|0,Je(E),E=z):E=13}else E=2;while(!1);return z=E,it=L,z|0}function I0(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0;if(It=it,it=it+16|0,At=It,gt=It+8|0,pt=At,g[pt>>2]=d,g[pt+4>>2]=y,(p|0)<0)return gt=2,it=It,gt|0;if(E=v,g[E>>2]=d,g[E+4>>2]=y,E=(T|0)!=0,E&&(g[T>>2]=0),tn(d,y)|0)return gt=9,it=It,gt|0;g[gt>>2]=0;t:do if((p|0)>=1)if(E)for(W=1,z=0,st=0,pt=1,E=d;;){if(!(z|st)){if(E=Rn(E,y,4,gt,At)|0,E|0)break t;if(y=At,E=g[y>>2]|0,y=g[y+4>>2]|0,tn(E,y)|0){E=9;break t}}if(E=Rn(E,y,g[26800+(st<<2)>>2]|0,gt,At)|0,E|0)break t;if(y=At,E=g[y>>2]|0,y=g[y+4>>2]|0,d=v+(W<<3)|0,g[d>>2]=E,g[d+4>>2]=y,g[T+(W<<2)>>2]=pt,d=z+1|0,R=(d|0)==(pt|0),C=st+1|0,L=(C|0)==6,tn(E,y)|0){E=9;break t}if(pt=pt+(L&R&1)|0,(pt|0)>(p|0)){E=0;break}else W=W+1|0,z=R?0:d,st=R?L?0:C:st}else for(W=1,z=0,st=0,pt=1,E=d;;){if(!(z|st)){if(E=Rn(E,y,4,gt,At)|0,E|0)break t;if(y=At,E=g[y>>2]|0,y=g[y+4>>2]|0,tn(E,y)|0){E=9;break t}}if(E=Rn(E,y,g[26800+(st<<2)>>2]|0,gt,At)|0,E|0)break t;if(y=At,E=g[y>>2]|0,y=g[y+4>>2]|0,d=v+(W<<3)|0,g[d>>2]=E,g[d+4>>2]=y,d=z+1|0,R=(d|0)==(pt|0),C=st+1|0,L=(C|0)==6,tn(E,y)|0){E=9;break t}if(pt=pt+(L&R&1)|0,(pt|0)>(p|0)){E=0;break}else W=W+1|0,z=R?0:d,st=R?L?0:C:st}else E=0;while(!1);return gt=E,it=It,gt|0}function Hs(d,y,p,v,T,E,R,C){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0,E=E|0,R=R|0,C=C|0;var L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0;if(It=it,it=it+16|0,At=It+8|0,gt=It,L=kl(d|0,y|0,E|0,R|0)|0,W=ot()|0,st=v+(L<<3)|0,xt=st,Qt=g[xt>>2]|0,xt=g[xt+4>>2]|0,z=(Qt|0)==(d|0)&(xt|0)==(y|0),!((Qt|0)==0&(xt|0)==0|z))do L=Pe(L|0,W|0,1,0)|0,L=Qc(L|0,ot()|0,E|0,R|0)|0,W=ot()|0,st=v+(L<<3)|0,Qt=st,xt=g[Qt>>2]|0,Qt=g[Qt+4>>2]|0,z=(xt|0)==(d|0)&(Qt|0)==(y|0);while(!((xt|0)==0&(Qt|0)==0|z));if(L=T+(L<<2)|0,z&&(g[L>>2]|0)<=(C|0)||(Qt=st,g[Qt>>2]=d,g[Qt+4>>2]=y,g[L>>2]=C,(C|0)>=(p|0)))return Qt=0,it=It,Qt|0;switch(z=C+1|0,g[At>>2]=0,L=Rn(d,y,2,At,gt)|0,L|0){case 9:{pt=9;break}case 0:{L=gt,L=Hs(g[L>>2]|0,g[L+4>>2]|0,p,v,T,E,R,z)|0,L||(pt=9);break}}t:do if((pt|0)==9){switch(g[At>>2]=0,L=Rn(d,y,3,At,gt)|0,L|0){case 9:break;case 0:{if(L=gt,L=Hs(g[L>>2]|0,g[L+4>>2]|0,p,v,T,E,R,z)|0,L|0)break t;break}default:break t}switch(g[At>>2]=0,L=Rn(d,y,1,At,gt)|0,L|0){case 9:break;case 0:{if(L=gt,L=Hs(g[L>>2]|0,g[L+4>>2]|0,p,v,T,E,R,z)|0,L|0)break t;break}default:break t}switch(g[At>>2]=0,L=Rn(d,y,5,At,gt)|0,L|0){case 9:break;case 0:{if(L=gt,L=Hs(g[L>>2]|0,g[L+4>>2]|0,p,v,T,E,R,z)|0,L|0)break t;break}default:break t}switch(g[At>>2]=0,L=Rn(d,y,4,At,gt)|0,L|0){case 9:break;case 0:{if(L=gt,L=Hs(g[L>>2]|0,g[L+4>>2]|0,p,v,T,E,R,z)|0,L|0)break t;break}default:break t}switch(g[At>>2]=0,L=Rn(d,y,6,At,gt)|0,L|0){case 9:break;case 0:{if(L=gt,L=Hs(g[L>>2]|0,g[L+4>>2]|0,p,v,T,E,R,z)|0,L|0)break t;break}default:break t}return Qt=0,it=It,Qt|0}while(!1);return Qt=L,it=It,Qt|0}function Rn(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0;if(p>>>0>6)return T=1,T|0;if(st=(g[v>>2]|0)%6|0,g[v>>2]=st,(st|0)>0){E=0;do p=El(p)|0,E=E+1|0;while((E|0)<(g[v>>2]|0))}if(st=ue(d|0,y|0,45)|0,ot()|0,W=st&127,W>>>0>121)return T=5,T|0;L=Pr(d,y)|0,E=ue(d|0,y|0,52)|0,ot()|0,E=E&15;t:do if(!E)z=8;else{for(;;){if(R=(15-E|0)*3|0,C=ue(d|0,y|0,R|0)|0,ot()|0,C=C&7,(C|0)==7){y=5;break}if(gt=(Ms(E)|0)==0,E=E+-1|0,pt=_e(7,0,R|0)|0,y=y&~(ot()|0),At=_e(g[(gt?432:16)+(C*28|0)+(p<<2)>>2]|0,0,R|0)|0,R=ot()|0,p=g[(gt?640:224)+(C*28|0)+(p<<2)>>2]|0,d=At|d&~pt,y=R|y,!p){p=0;break t}if(!E){z=8;break t}}return y|0}while(!1);(z|0)==8&&(gt=g[848+(W*28|0)+(p<<2)>>2]|0,At=_e(gt|0,0,45)|0,d=At|d,y=ot()|0|y&-1040385,p=g[4272+(W*28|0)+(p<<2)>>2]|0,(gt&127|0)==127&&(gt=_e(g[848+(W*28|0)+20>>2]|0,0,45)|0,y=ot()|0|y&-1040385,p=g[4272+(W*28|0)+20>>2]|0,d=Uo(gt|d,y)|0,y=ot()|0,g[v>>2]=(g[v>>2]|0)+1)),C=ue(d|0,y|0,45)|0,ot()|0,C=C&127;t:do if(Sn(C)|0){e:do if((Pr(d,y)|0)==1){if((W|0)!=(C|0))if(Tl(C,g[7696+(W*28|0)>>2]|0)|0){d=z0(d,y)|0,R=1,y=ot()|0;break}else ti(27795,26864,436,26872);switch(L|0){case 3:{d=Uo(d,y)|0,y=ot()|0,g[v>>2]=(g[v>>2]|0)+1,R=0;break e}case 5:{d=z0(d,y)|0,y=ot()|0,g[v>>2]=(g[v>>2]|0)+5,R=0;break e}case 0:return gt=9,gt|0;default:return gt=1,gt|0}}else R=0;while(!1);if((p|0)>0){E=0;do d=od(d,y)|0,y=ot()|0,E=E+1|0;while((E|0)!=(p|0))}if((W|0)!=(C|0)){if(!(B0(C)|0)){if((R|0)!=0|(Pr(d,y)|0)!=5)break;g[v>>2]=(g[v>>2]|0)+1;break}switch(st&127){case 8:case 118:break t}(Pr(d,y)|0)!=3&&(g[v>>2]=(g[v>>2]|0)+1)}}else if((p|0)>0){E=0;do d=Uo(d,y)|0,y=ot()|0,E=E+1|0;while((E|0)!=(p|0))}while(!1);return g[v>>2]=((g[v>>2]|0)+p|0)%6|0,gt=T,g[gt>>2]=d,g[gt+4>>2]=y,gt=0,gt|0}function Zf(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0;for(C=it,it=it+16|0,E=C,R=C+8|0,T=(tn(d,y)|0)==0,T=T?1:2;;){if(g[R>>2]=0,z=(Rn(d,y,T,R,E)|0)==0,L=E,z&((g[L>>2]|0)==(p|0)?(g[L+4>>2]|0)==(v|0):0)){d=4;break}if(T=T+1|0,T>>>0>=7){T=7,d=4;break}}return(d|0)==4?(it=C,T|0):0}function p1(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0;if(gt=it,it=it+16|0,pt=gt,At=gt+8|0,st=pt,g[st>>2]=d,g[st+4>>2]=y,!p)return At=v,g[At>>2]=d,g[At+4>>2]=y,At=0,it=gt,At|0;g[At>>2]=0;t:do if(tn(d,y)|0)d=9;else{if(E=(p|0)>0,E){T=0,st=d;do{if(d=Rn(st,y,4,At,pt)|0,d|0)break t;if(y=pt,st=g[y>>2]|0,y=g[y+4>>2]|0,T=T+1|0,tn(st,y)|0){d=9;break t}}while((T|0)<(p|0));if(W=v,g[W>>2]=st,g[W+4>>2]=y,W=p+-1|0,E){z=0,d=1;do{if(T=26800+(z<<2)|0,(z|0)==5)for(R=g[T>>2]|0,E=0,T=d;;){if(d=pt,d=Rn(g[d>>2]|0,g[d+4>>2]|0,R,At,pt)|0,d|0)break t;if((E|0)!=(W|0))if(L=pt,C=g[L>>2]|0,L=g[L+4>>2]|0,d=v+(T<<3)|0,g[d>>2]=C,g[d+4>>2]=L,!(tn(C,L)|0))d=T+1|0;else{d=9;break t}else d=T;if(E=E+1|0,(E|0)>=(p|0))break;T=d}else for(R=pt,L=g[T>>2]|0,C=0,T=d,E=g[R>>2]|0,R=g[R+4>>2]|0;;){if(d=Rn(E,R,L,At,pt)|0,d|0)break t;if(R=pt,E=g[R>>2]|0,R=g[R+4>>2]|0,d=v+(T<<3)|0,g[d>>2]=E,g[d+4>>2]=R,d=T+1|0,tn(E,R)|0){d=9;break t}if(C=C+1|0,(C|0)>=(p|0))break;T=d}z=z+1|0}while(z>>>0<6);d=pt,R=st,T=g[d>>2]|0,E=y,d=g[d+4>>2]|0}else R=st,T=st,E=y,d=y}else R=v,g[R>>2]=d,g[R+4>>2]=y,R=d,T=d,E=y,d=y;d=(R|0)==(T|0)&(E|0)==(d|0)?0:9}while(!1);return At=d,it=gt,At|0}function Fc(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0;if(C=it,it=it+48|0,T=C+16|0,E=C+8|0,R=C,p=wr(p)|0,p|0)return R=p,it=C,R|0;if(z=d,L=g[z+4>>2]|0,p=E,g[p>>2]=g[z>>2],g[p+4>>2]=L,ds(E,T),p=sh(T,y,R)|0,!p){if(y=g[E>>2]|0,E=g[d+8>>2]|0,(E|0)>0){T=g[d+12>>2]|0,p=0;do y=(g[T+(p<<3)>>2]|0)+y|0,p=p+1|0;while((p|0)<(E|0))}p=R,T=g[p>>2]|0,p=g[p+4>>2]|0,E=((y|0)<0)<<31>>31,(p|0)<(E|0)|(p|0)==(E|0)&T>>>0<y>>>0?(p=R,g[p>>2]=y,g[p+4>>2]=E,p=E):y=T,L=Pe(y|0,p|0,12,0)|0,z=ot()|0,p=R,g[p>>2]=L,g[p+4>>2]=z,p=v,g[p>>2]=L,g[p+4>>2]=z,p=0}return z=p,it=C,z|0}function m1(d,y,p,v,T,E,R){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0,E=E|0,R=R|0;var C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0,Ce=0,We=0,Ni=0,Qe=0,Ve=0,ye=0,vi=0,Ki=0,Ii=0,ei=0,pr=0,Td=0;if(Ki=it,it=it+64|0,Qe=Ki+48|0,Ve=Ki+32|0,ye=Ki+24|0,ve=Ki+8|0,ze=Ki,L=g[d>>2]|0,(L|0)<=0)return vi=0,it=Ki,vi|0;for(fe=d+4|0,Ce=Qe+8|0,We=Ve+8|0,Ni=ve+8|0,C=0,zt=0;;){z=g[fe>>2]|0,$t=z+(zt<<4)|0,g[Qe>>2]=g[$t>>2],g[Qe+4>>2]=g[$t+4>>2],g[Qe+8>>2]=g[$t+8>>2],g[Qe+12>>2]=g[$t+12>>2],(zt|0)==(L+-1|0)?(g[Ve>>2]=g[z>>2],g[Ve+4>>2]=g[z+4>>2],g[Ve+8>>2]=g[z+8>>2],g[Ve+12>>2]=g[z+12>>2]):($t=z+(zt+1<<4)|0,g[Ve>>2]=g[$t>>2],g[Ve+4>>2]=g[$t+4>>2],g[Ve+8>>2]=g[$t+8>>2],g[Ve+12>>2]=g[$t+12>>2]),L=T1(Qe,Ve,v,ye)|0;t:do if(L)z=0,C=L;else if(L=ye,z=g[L>>2]|0,L=g[L+4>>2]|0,(L|0)>0|(L|0)==0&z>>>0>0){Qt=0,$t=0;e:for(;;){if(ei=1/(+(z>>>0)+4294967296*+(L|0)),Td=+et[Qe>>3],L=rr(z|0,L|0,Qt|0,$t|0)|0,pr=+(L>>>0)+4294967296*+(ot()|0),Ii=+(Qt>>>0)+4294967296*+($t|0),et[ve>>3]=ei*(Td*pr)+ei*(+et[Ve>>3]*Ii),et[Ni>>3]=ei*(+et[Ce>>3]*pr)+ei*(+et[We>>3]*Ii),L=V0(ve,v,ze)|0,L|0){C=L;break}xt=ze,It=g[xt>>2]|0,xt=g[xt+4>>2]|0,pt=kl(It|0,xt|0,y|0,p|0)|0,W=ot()|0,L=R+(pt<<3)|0,st=L,z=g[st>>2]|0,st=g[st+4>>2]|0;i:do if((z|0)==0&(st|0)==0)Et=L,vi=16;else for(At=0,gt=0;;){if((At|0)>(p|0)|(At|0)==(p|0)&gt>>>0>y>>>0){C=1;break e}if((z|0)==(It|0)&(st|0)==(xt|0))break i;if(L=Pe(pt|0,W|0,1,0)|0,pt=Qc(L|0,ot()|0,y|0,p|0)|0,W=ot()|0,gt=Pe(gt|0,At|0,1,0)|0,At=ot()|0,L=R+(pt<<3)|0,st=L,z=g[st>>2]|0,st=g[st+4>>2]|0,(z|0)==0&(st|0)==0){Et=L,vi=16;break}}while(!1);if((vi|0)==16&&(vi=0,!((It|0)==0&(xt|0)==0))&&(gt=Et,g[gt>>2]=It,g[gt+4>>2]=xt,gt=E+(g[T>>2]<<3)|0,g[gt>>2]=It,g[gt+4>>2]=xt,gt=T,gt=Pe(g[gt>>2]|0,g[gt+4>>2]|0,1,0)|0,It=ot()|0,xt=T,g[xt>>2]=gt,g[xt+4>>2]=It),Qt=Pe(Qt|0,$t|0,1,0)|0,$t=ot()|0,L=ye,z=g[L>>2]|0,L=g[L+4>>2]|0,!((L|0)>($t|0)|(L|0)==($t|0)&z>>>0>Qt>>>0)){z=1;break t}}z=0}else z=1;while(!1);if(zt=zt+1|0,!z){vi=21;break}if(L=g[d>>2]|0,(zt|0)>=(L|0)){C=0,vi=21;break}}return(vi|0)==21?(it=Ki,C|0):0}function _1(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0,Ce=0,We=0,Ni=0,Qe=0,Ve=0,ye=0,vi=0,Ki=0,Ii=0,ei=0,pr=0;if(pr=it,it=it+112|0,vi=pr+80|0,L=pr+72|0,Ki=pr,Ii=pr+56|0,T=wr(p)|0,T|0)return ei=T,it=pr,ei|0;if(z=d+8|0,ei=Ca((g[z>>2]<<5)+32|0)|0,!ei)return ei=13,it=pr,ei|0;if(no(d,ei),T=wr(p)|0,!T){if(Ve=d,ye=g[Ve+4>>2]|0,T=L,g[T>>2]=g[Ve>>2],g[T+4>>2]=ye,ds(L,vi),T=sh(vi,y,Ki)|0,T)Ve=0,ye=0;else{if(T=g[L>>2]|0,E=g[z>>2]|0,(E|0)>0){R=g[d+12>>2]|0,p=0;do T=(g[R+(p<<3)>>2]|0)+T|0,p=p+1|0;while((p|0)!=(E|0));p=T}else p=T;T=Ki,E=g[T>>2]|0,T=g[T+4>>2]|0,R=((p|0)<0)<<31>>31,(T|0)<(R|0)|(T|0)==(R|0)&E>>>0<p>>>0?(T=Ki,g[T>>2]=p,g[T+4>>2]=R,T=R):p=E,Ve=Pe(p|0,T|0,12,0)|0,ye=ot()|0,T=Ki,g[T>>2]=Ve,g[T+4>>2]=ye,T=0}if(!T){if(p=Os(Ve,8)|0,!p)return Je(ei),ei=13,it=pr,ei|0;if(C=Os(Ve,8)|0,!C)return Je(ei),Je(p),ei=13,it=pr,ei|0;Ni=vi,g[Ni>>2]=0,g[Ni+4>>2]=0,Ni=d,Qe=g[Ni+4>>2]|0,T=L,g[T>>2]=g[Ni>>2],g[T+4>>2]=Qe,T=m1(L,Ve,ye,y,vi,p,C)|0;t:do if(T)Je(p),Je(C),Je(ei);else{e:do if((g[z>>2]|0)>0){for(R=d+12|0,E=0;T=m1((g[R>>2]|0)+(E<<3)|0,Ve,ye,y,vi,p,C)|0,E=E+1|0,!(T|0);)if((E|0)>=(g[z>>2]|0))break e;Je(p),Je(C),Je(ei);break t}while(!1);(ye|0)>0|(ye|0)==0&Ve>>>0>0&&xa(C|0,0,Ve<<3|0)|0,Qe=vi,Ni=g[Qe+4>>2]|0;e:do if((Ni|0)>0|(Ni|0)==0&(g[Qe>>2]|0)>>>0>0){fe=p,Ce=C,We=p,Ni=C,Qe=p,T=p,Et=p,ve=C,ze=C,p=C;i:for(;;){for(xt=0,Qt=0,$t=0,zt=0,E=0,R=0;;){C=Ki,L=C+56|0;do g[C>>2]=0,C=C+4|0;while((C|0)<(L|0));if(y=fe+(xt<<3)|0,z=g[y>>2]|0,y=g[y+4>>2]|0,I0(z,y,1,Ki,0)|0){C=Ki,L=C+56|0;do g[C>>2]=0,C=C+4|0;while((C|0)<(L|0));C=Os(7,4)|0,C|0&&(Hs(z,y,1,Ki,C,7,0,0)|0,Je(C))}for(It=0;;){gt=Ki+(It<<3)|0,At=g[gt>>2]|0,gt=g[gt+4>>2]|0;n:do if((At|0)==0&(gt|0)==0)C=E,L=R;else{if(W=kl(At|0,gt|0,Ve|0,ye|0)|0,z=ot()|0,C=v+(W<<3)|0,y=C,L=g[y>>2]|0,y=g[y+4>>2]|0,!((L|0)==0&(y|0)==0)){st=0,pt=0;do{if((st|0)>(ye|0)|(st|0)==(ye|0)&pt>>>0>Ve>>>0)break i;if((L|0)==(At|0)&(y|0)==(gt|0)){C=E,L=R;break n}C=Pe(W|0,z|0,1,0)|0,W=Qc(C|0,ot()|0,Ve|0,ye|0)|0,z=ot()|0,pt=Pe(pt|0,st|0,1,0)|0,st=ot()|0,C=v+(W<<3)|0,y=C,L=g[y>>2]|0,y=g[y+4>>2]|0}while(!((L|0)==0&(y|0)==0))}if((At|0)==0&(gt|0)==0){C=E,L=R;break}ko(At,gt,Ii)|0,Qs(d,ei,Ii)|0&&(pt=Pe(E|0,R|0,1,0)|0,R=ot()|0,st=C,g[st>>2]=At,g[st+4>>2]=gt,E=Ce+(E<<3)|0,g[E>>2]=At,g[E+4>>2]=gt,E=pt),C=E,L=R}while(!1);if(It=It+1|0,It>>>0>=7)break;E=C,R=L}if(xt=Pe(xt|0,Qt|0,1,0)|0,Qt=ot()|0,$t=Pe($t|0,zt|0,1,0)|0,zt=ot()|0,R=vi,E=g[R>>2]|0,R=g[R+4>>2]|0,(zt|0)<(R|0)|(zt|0)==(R|0)&$t>>>0<E>>>0)E=C,R=L;else break}if((R|0)>0|(R|0)==0&E>>>0>0){E=0,R=0;do zt=fe+(E<<3)|0,g[zt>>2]=0,g[zt+4>>2]=0,E=Pe(E|0,R|0,1,0)|0,R=ot()|0,zt=vi,$t=g[zt+4>>2]|0;while((R|0)<($t|0)|((R|0)==($t|0)?E>>>0<(g[zt>>2]|0)>>>0:0))}if(zt=vi,g[zt>>2]=C,g[zt+4>>2]=L,(L|0)>0|(L|0)==0&C>>>0>0)It=p,xt=ze,Qt=Qe,$t=ve,zt=Ce,p=Et,ze=T,ve=We,Et=It,T=xt,Qe=Ni,Ni=Qt,We=$t,Ce=fe,fe=zt;else break e}Je(We),Je(Ni),Je(ei),T=1;break t}else T=C;while(!1);Je(ei),Je(p),Je(T),T=0}while(!1);return ei=T,it=pr,ei|0}}return Je(ei),ei=T,it=pr,ei|0}function b1(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;if(W=it,it=it+176|0,L=W,(y|0)<1)return Da(p,0,0),z=0,it=W,z|0;for(C=d,C=ue(g[C>>2]|0,g[C+4>>2]|0,52)|0,ot()|0,Da(p,(y|0)>6?y:6,C&15),C=0;v=d+(C<<3)|0,v=Rl(g[v>>2]|0,g[v+4>>2]|0,L)|0,!(v|0);){if(v=g[L>>2]|0,(v|0)>0){R=0;do E=L+8+(R<<4)|0,R=R+1|0,v=L+8+(((R|0)%(v|0)|0)<<4)|0,T=Ll(p,v,E)|0,T?Yc(p,T)|0:md(p,E,v)|0,v=g[L>>2]|0;while((R|0)<(v|0))}if(C=C+1|0,(C|0)>=(y|0)){v=0,z=13;break}}return(z|0)==13?(it=W,v|0):(yd(p),z=v,it=W,z|0)}function E0(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0;if(E=it,it=it+32|0,v=E,T=E+16|0,d=b1(d,y,T)|0,d|0)return p=d,it=E,p|0;if(g[p>>2]=0,g[p+4>>2]=0,g[p+8>>2]=0,d=pd(T)|0,d|0)do{y=fd(p)|0;do dd(y,d)|0,R=d+16|0,g[v>>2]=g[R>>2],g[v+4>>2]=g[R+4>>2],g[v+8>>2]=g[R+8>>2],g[v+12>>2]=g[R+12>>2],Yc(T,d)|0,d=Mr(T,v)|0;while((d|0)!=0);d=pd(T)|0}while((d|0)!=0);return yd(T),d=Wc(p)|0,d?(Ad(p),R=d,it=E,R|0):(R=0,it=E,R|0)}function Sn(d){return d=d|0,d>>>0>121?(d=0,d|0):(d=g[7696+(d*28|0)+16>>2]|0,d|0)}function B0(d){return d=d|0,(d|0)==4|(d|0)==117|0}function Ju(d){return d=d|0,g[11120+((g[d>>2]|0)*216|0)+((g[d+4>>2]|0)*72|0)+((g[d+8>>2]|0)*24|0)+(g[d+12>>2]<<3)>>2]|0}function O0(d){return d=d|0,g[11120+((g[d>>2]|0)*216|0)+((g[d+4>>2]|0)*72|0)+((g[d+8>>2]|0)*24|0)+(g[d+12>>2]<<3)+4>>2]|0}function R0(d,y){d=d|0,y=y|0,d=7696+(d*28|0)|0,g[y>>2]=g[d>>2],g[y+4>>2]=g[d+4>>2],g[y+8>>2]=g[d+8>>2],g[y+12>>2]=g[d+12>>2]}function Lc(d,y){d=d|0,y=y|0;var p=0,v=0;if(y>>>0>20)return y=-1,y|0;do if((g[11120+(y*216|0)>>2]|0)!=(d|0))if((g[11120+(y*216|0)+8>>2]|0)!=(d|0))if((g[11120+(y*216|0)+16>>2]|0)!=(d|0))if((g[11120+(y*216|0)+24>>2]|0)!=(d|0))if((g[11120+(y*216|0)+32>>2]|0)!=(d|0))if((g[11120+(y*216|0)+40>>2]|0)!=(d|0))if((g[11120+(y*216|0)+48>>2]|0)!=(d|0))if((g[11120+(y*216|0)+56>>2]|0)!=(d|0))if((g[11120+(y*216|0)+64>>2]|0)!=(d|0))if((g[11120+(y*216|0)+72>>2]|0)!=(d|0))if((g[11120+(y*216|0)+80>>2]|0)!=(d|0))if((g[11120+(y*216|0)+88>>2]|0)!=(d|0))if((g[11120+(y*216|0)+96>>2]|0)!=(d|0))if((g[11120+(y*216|0)+104>>2]|0)!=(d|0))if((g[11120+(y*216|0)+112>>2]|0)!=(d|0))if((g[11120+(y*216|0)+120>>2]|0)!=(d|0))if((g[11120+(y*216|0)+128>>2]|0)!=(d|0))if((g[11120+(y*216|0)+136>>2]|0)==(d|0))d=2,p=1,v=2;else{if((g[11120+(y*216|0)+144>>2]|0)==(d|0)){d=0,p=2,v=0;break}if((g[11120+(y*216|0)+152>>2]|0)==(d|0)){d=0,p=2,v=1;break}if((g[11120+(y*216|0)+160>>2]|0)==(d|0)){d=0,p=2,v=2;break}if((g[11120+(y*216|0)+168>>2]|0)==(d|0)){d=1,p=2,v=0;break}if((g[11120+(y*216|0)+176>>2]|0)==(d|0)){d=1,p=2,v=1;break}if((g[11120+(y*216|0)+184>>2]|0)==(d|0)){d=1,p=2,v=2;break}if((g[11120+(y*216|0)+192>>2]|0)==(d|0)){d=2,p=2,v=0;break}if((g[11120+(y*216|0)+200>>2]|0)==(d|0)){d=2,p=2,v=1;break}if((g[11120+(y*216|0)+208>>2]|0)==(d|0)){d=2,p=2,v=2;break}else d=-1;return d|0}else d=2,p=1,v=1;else d=2,p=1,v=0;else d=1,p=1,v=2;else d=1,p=1,v=1;else d=1,p=1,v=0;else d=0,p=1,v=2;else d=0,p=1,v=1;else d=0,p=1,v=0;else d=2,p=0,v=2;else d=2,p=0,v=1;else d=2,p=0,v=0;else d=1,p=0,v=2;else d=1,p=0,v=1;else d=1,p=0,v=0;else d=0,p=0,v=2;else d=0,p=0,v=1;else d=0,p=0,v=0;while(!1);return y=g[11120+(y*216|0)+(p*72|0)+(d*24|0)+(v<<3)+4>>2]|0,y|0}function Tl(d,y){return d=d|0,y=y|0,(g[7696+(d*28|0)+20>>2]|0)==(y|0)?(y=1,y|0):(y=(g[7696+(d*28|0)+24>>2]|0)==(y|0),y|0)}function Jf(d,y){return d=d|0,y=y|0,g[848+(d*28|0)+(y<<2)>>2]|0}function th(d,y){return d=d|0,y=y|0,(g[848+(d*28|0)>>2]|0)==(y|0)?(y=0,y|0):(g[848+(d*28|0)+4>>2]|0)==(y|0)?(y=1,y|0):(g[848+(d*28|0)+8>>2]|0)==(y|0)?(y=2,y|0):(g[848+(d*28|0)+12>>2]|0)==(y|0)?(y=3,y|0):(g[848+(d*28|0)+16>>2]|0)==(y|0)?(y=4,y|0):(g[848+(d*28|0)+20>>2]|0)==(y|0)?(y=5,y|0):((g[848+(d*28|0)+24>>2]|0)==(y|0)?6:7)|0}function v1(){return 122}function eh(d){d=d|0;var y=0,p=0,v=0;y=0;do _e(y|0,0,45)|0,v=ot()|0|134225919,p=d+(y<<3)|0,g[p>>2]=-1,g[p+4>>2]=v,y=y+1|0;while((y|0)!=122);return 0}function Ja(d){d=d|0;var y=0,p=0,v=0;return v=+et[d+16>>3],p=+et[d+24>>3],y=v-p,+(v<p?y+6.283185307179586:y)}function td(d){return d=d|0,+et[d+16>>3]<+et[d+24>>3]|0}function ih(d){return d=d|0,+(+et[d>>3]-+et[d+8>>3])}function Ia(d,y){d=d|0,y=y|0;var p=0,v=0,T=0;return p=+et[y>>3],!(p>=+et[d+8>>3])||!(p<=+et[d>>3])?(y=0,y|0):(v=+et[d+16>>3],p=+et[d+24>>3],T=+et[y+8>>3],y=T>=p,d=T<=v&1,v<p?y&&(d=1):y||(d=0),y=(d|0)!=0,y|0)}function nh(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;return+et[d>>3]<+et[y+8>>3]||+et[d+8>>3]>+et[y>>3]?(v=0,v|0):(E=+et[d+16>>3],p=d+24|0,W=+et[p>>3],R=E<W,v=y+16|0,z=+et[v>>3],T=y+24|0,L=+et[T>>3],C=z<L,y=W-z<L-E,d=R?C|y?1:2:0,y=C?R?1:y?2:1:0,E=+Nr(E,d),E<+Nr(+et[T>>3],y)||(W=+Nr(+et[p>>3],d),W>+Nr(+et[v>>3],y))?(C=0,C|0):(C=1,C|0))}function ed(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0;E=+et[d+16>>3],L=+et[d+24>>3],d=E<L,C=+et[y+16>>3],R=+et[y+24>>3],T=C<R,y=L-C<R-E,g[p>>2]=d?T|y?1:2:0,g[v>>2]=T?d?1:y?2:1:0}function D0(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;return+et[d>>3]<+et[y>>3]||+et[d+8>>3]>+et[y+8>>3]?(v=0,v|0):(v=d+16|0,L=+et[v>>3],E=+et[d+24>>3],R=L<E,p=y+16|0,W=+et[p>>3],T=y+24|0,z=+et[T>>3],C=W<z,y=E-W<z-L,d=R?C|y?1:2:0,y=C?R?1:y?2:1:0,E=+Nr(E,d),E<=+Nr(+et[T>>3],y)?(W=+Nr(+et[v>>3],d),C=W>=+Nr(+et[p>>3],y),C|0):(C=0,C|0))}function rh(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0;T=it,it=it+176|0,v=T,g[v>>2]=4,C=+et[y>>3],et[v+8>>3]=C,E=+et[y+16>>3],et[v+16>>3]=E,et[v+24>>3]=C,C=+et[y+24>>3],et[v+32>>3]=C,R=+et[y+8>>3],et[v+40>>3]=R,et[v+48>>3]=C,et[v+56>>3]=R,et[v+64>>3]=E,y=v+72|0,p=y+96|0;do g[y>>2]=0,y=y+4|0;while((y|0)<(p|0));jl(d|0,v|0,168)|0,it=T}function sh(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0;gt=it,it=it+288|0,W=gt+264|0,st=gt+96|0,z=gt,C=z,L=C+96|0;do g[C>>2]=0,C=C+4|0;while((C|0)<(L|0));return y=H0(y,z)|0,y|0?(At=y,it=gt,At|0):(L=z,z=g[L>>2]|0,L=g[L+4>>2]|0,ko(z,L,W)|0,Rl(z,L,st)|0,R=+Gs(W,st+8|0),et[W>>3]=+et[d>>3],L=W+8|0,et[L>>3]=+et[d+16>>3],et[st>>3]=+et[d+8>>3],z=st+8|0,et[z>>3]=+et[d+24>>3],T=+Gs(W,st),xt=+et[L>>3]-+et[z>>3],E=+bi(+xt),It=+et[W>>3]-+et[st>>3],v=+bi(+It),!(xt==0|It==0)&&(xt=+hh(+E,+v),xt=+bl(+(T*T/+fh(+(xt/+fh(+E,+v)),3)/(R*(R*2.59807621135)*.8))),et[Yi>>3]=xt,pt=~~xt>>>0,At=+bi(xt)>=1?xt>0?~~+S0(+Gn(xt/4294967296),4294967295)>>>0:~~+bl((xt-+(~~xt>>>0))/4294967296)>>>0:0,(g[Yi+4>>2]&2146435072|0)!=2146435072)?(st=(pt|0)==0&(At|0)==0,y=p,g[y>>2]=st?1:pt,g[y+4>>2]=st?0:At,y=0):y=1,At=y,it=gt,At|0)}function T1(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0;z=it,it=it+288|0,R=z+264|0,C=z+96|0,L=z,T=L,E=T+96|0;do g[T>>2]=0,T=T+4|0;while((T|0)<(E|0));return p=H0(p,L)|0,p|0?(v=p,it=z,v|0):(p=L,T=g[p>>2]|0,p=g[p+4>>2]|0,ko(T,p,R)|0,Rl(T,p,C)|0,W=+Gs(R,C+8|0),W=+bl(+(+Gs(d,y)/(W*2))),et[Yi>>3]=W,p=~~W>>>0,T=+bi(W)>=1?W>0?~~+S0(+Gn(W/4294967296),4294967295)>>>0:~~+bl((W-+(~~W>>>0))/4294967296)>>>0:0,(g[Yi+4>>2]&2146435072|0)==2146435072?(v=1,it=z,v|0):(L=(p|0)==0&(T|0)==0,g[v>>2]=L?1:p,g[v+4>>2]=L?0:T,v=0,it=z,v|0))}function Zr(d,y){d=d|0,y=+y;var p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;E=d+16|0,R=+et[E>>3],p=d+24|0,T=+et[p>>3],v=R-T,v=R<T?v+6.283185307179586:v,z=+et[d>>3],C=d+8|0,L=+et[C>>3],W=z-L,v=(v*y-v)*.5,y=(W*y-W)*.5,z=z+y,et[d>>3]=z>1.5707963267948966?1.5707963267948966:z,y=L-y,et[C>>3]=y<-1.5707963267948966?-1.5707963267948966:y,y=R+v,y=y>3.141592653589793?y+-6.283185307179586:y,et[E>>3]=y<-3.141592653589793?y+6.283185307179586:y,y=T-v,y=y>3.141592653589793?y+-6.283185307179586:y,et[p>>3]=y<-3.141592653589793?y+6.283185307179586:y}function Sl(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0,g[d>>2]=y,g[d+4>>2]=p,g[d+8>>2]=v}function id(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0;st=y+8|0,g[st>>2]=0,L=+et[d>>3],R=+bi(+L),z=+et[d+8>>3],C=+bi(+z)*1.1547005383792515,R=R+C*.5,p=~~R,d=~~C,R=R-+(p|0),C=C-+(d|0);do if(R<.5)if(R<.3333333333333333)if(g[y>>2]=p,C<(R+1)*.5){g[y+4>>2]=d;break}else{d=d+1|0,g[y+4>>2]=d;break}else if(pt=1-R,d=(!(C<pt)&1)+d|0,g[y+4>>2]=d,pt<=C&C<R*2){p=p+1|0,g[y>>2]=p;break}else{g[y>>2]=p;break}else{if(!(R<.6666666666666666))if(p=p+1|0,g[y>>2]=p,C<R*.5){g[y+4>>2]=d;break}else{d=d+1|0,g[y+4>>2]=d;break}if(C<1-R){if(g[y+4>>2]=d,R*2+-1<C){g[y>>2]=p;break}}else d=d+1|0,g[y+4>>2]=d;p=p+1|0,g[y>>2]=p}while(!1);do if(L<0)if(d&1){W=(d+1|0)/2|0,W=rr(p|0,((p|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0,p=~~(+(p|0)-((+(W>>>0)+4294967296*+(ot()|0))*2+1)),g[y>>2]=p;break}else{W=(d|0)/2|0,W=rr(p|0,((p|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0,p=~~(+(p|0)-(+(W>>>0)+4294967296*+(ot()|0))*2),g[y>>2]=p;break}while(!1);W=y+4|0,z<0&&(p=p-((d<<1|1|0)/2|0)|0,g[y>>2]=p,d=0-d|0,g[W>>2]=d),v=d-p|0,(p|0)<0?(T=0-p|0,g[W>>2]=v,g[st>>2]=T,g[y>>2]=0,d=v,p=0):T=0,(d|0)<0&&(p=p-d|0,g[y>>2]=p,T=T-d|0,g[st>>2]=T,g[W>>2]=0,d=0),E=p-T|0,v=d-T|0,(T|0)<0&&(g[y>>2]=E,g[W>>2]=v,g[st>>2]=0,d=v,p=E,T=0),v=(d|0)<(p|0)?d:p,v=(T|0)<(v|0)?T:v,!((v|0)<=0)&&(g[y>>2]=p-v,g[W>>2]=d-v,g[st>>2]=T-v)}function Xn(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0;y=g[d>>2]|0,R=d+4|0,p=g[R>>2]|0,(y|0)<0&&(p=p-y|0,g[R>>2]=p,E=d+8|0,g[E>>2]=(g[E>>2]|0)-y,g[d>>2]=0,y=0),(p|0)<0?(y=y-p|0,g[d>>2]=y,E=d+8|0,T=(g[E>>2]|0)-p|0,g[E>>2]=T,g[R>>2]=0,p=0):(T=d+8|0,E=T,T=g[T>>2]|0),(T|0)<0&&(y=y-T|0,g[d>>2]=y,p=p-T|0,g[R>>2]=p,g[E>>2]=0,T=0),v=(p|0)<(y|0)?p:y,v=(T|0)<(v|0)?T:v,!((v|0)<=0)&&(g[d>>2]=y-v,g[R>>2]=p-v,g[E>>2]=T-v)}function wl(d,y){d=d|0,y=y|0;var p=0,v=0;v=g[d+8>>2]|0,p=+((g[d+4>>2]|0)-v|0),et[y>>3]=+((g[d>>2]|0)-v|0)-p*.5,et[y+8>>3]=p*.8660254037844386}function yr(d,y,p){d=d|0,y=y|0,p=p|0,g[p>>2]=(g[y>>2]|0)+(g[d>>2]|0),g[p+4>>2]=(g[y+4>>2]|0)+(g[d+4>>2]|0),g[p+8>>2]=(g[y+8>>2]|0)+(g[d+8>>2]|0)}function ah(d,y,p){d=d|0,y=y|0,p=p|0,g[p>>2]=(g[d>>2]|0)-(g[y>>2]|0),g[p+4>>2]=(g[d+4>>2]|0)-(g[y+4>>2]|0),g[p+8>>2]=(g[d+8>>2]|0)-(g[y+8>>2]|0)}function Uc(d,y){d=d|0,y=y|0;var p=0,v=0;p=Ws(g[d>>2]|0,y)|0,g[d>>2]=p,p=d+4|0,v=Ws(g[p>>2]|0,y)|0,g[p>>2]=v,d=d+8|0,y=Ws(g[d>>2]|0,y)|0,g[d>>2]=y}function Ml(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;R=g[d>>2]|0,C=(R|0)<0,v=(g[d+4>>2]|0)-(C?R:0)|0,E=(v|0)<0,T=(E?0-v|0:0)+((g[d+8>>2]|0)-(C?R:0))|0,p=(T|0)<0,d=p?0:T,y=(E?0:v)-(p?T:0)|0,T=(C?0:R)-(E?v:0)-(p?T:0)|0,p=(y|0)<(T|0)?y:T,p=(d|0)<(p|0)?d:p,v=(p|0)>0,d=d-(v?p:0)|0,y=y-(v?p:0)|0;t:do switch(T-(v?p:0)|0){case 0:switch(y|0){case 0:return C=(d|0)==0?0:(d|0)==1?1:7,C|0;case 1:return C=(d|0)==0?2:(d|0)==1?3:7,C|0;default:break t}case 1:switch(y|0){case 0:return C=(d|0)==0?4:(d|0)==1?5:7,C|0;case 1:{if(!d)d=6;else break t;return d|0}default:break t}}while(!1);return C=7,C|0}function S1(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0;if(L=d+8|0,R=g[L>>2]|0,C=(g[d>>2]|0)-R|0,z=d+4|0,R=(g[z>>2]|0)-R|0,C>>>0>715827881|R>>>0>715827881){if(v=(C|0)>0,T=2147483647-C|0,E=-2147483648-C|0,(v?(T|0)<(C|0):(E|0)>(C|0))||(p=C<<1,v?(2147483647-p|0)<(C|0):(-2147483648-p|0)>(C|0))||((R|0)>0?(2147483647-R|0)<(R|0):(-2147483648-R|0)>(R|0))||(y=C*3|0,p=R<<1,(v?(T|0)<(p|0):(E|0)>(p|0))||((C|0)>-1?(y|-2147483648|0)>=(R|0):(y^-2147483648|0)<(R|0))))return z=1,z|0}else p=R<<1,y=C*3|0;return v=ao(+(y-R|0)*.14285714285714285)|0,g[d>>2]=v,T=ao(+(p+C|0)*.14285714285714285)|0,g[z>>2]=T,g[L>>2]=0,p=(T|0)<(v|0),y=p?v:T,p=p?T:v,(p|0)<0&&(((p|0)==-2147483648||((y|0)>0?(2147483647-y|0)<(p|0):(-2147483648-y|0)>(p|0)))&&ti(27795,26892,354,26903),((y|0)>-1?(y|-2147483648|0)>=(p|0):(y^-2147483648|0)<(p|0))&&ti(27795,26892,354,26903)),y=T-v|0,(v|0)<0?(p=0-v|0,g[z>>2]=y,g[L>>2]=p,g[d>>2]=0,v=0):(y=T,p=0),(y|0)<0&&(v=v-y|0,g[d>>2]=v,p=p-y|0,g[L>>2]=p,g[z>>2]=0,y=0),E=v-p|0,T=y-p|0,(p|0)<0?(g[d>>2]=E,g[z>>2]=T,g[L>>2]=0,y=T,T=E,p=0):T=v,v=(y|0)<(T|0)?y:T,v=(p|0)<(v|0)?p:v,(v|0)<=0?(z=0,z|0):(g[d>>2]=T-v,g[z>>2]=y-v,g[L>>2]=p-v,z=0,z|0)}function XT(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0,L=0;if(R=d+8|0,T=g[R>>2]|0,E=(g[d>>2]|0)-T|0,C=d+4|0,T=(g[C>>2]|0)-T|0,E>>>0>715827881|T>>>0>715827881){if(p=(E|0)>0,(p?(2147483647-E|0)<(E|0):(-2147483648-E|0)>(E|0))||(y=E<<1,v=(T|0)>0,v?(2147483647-T|0)<(T|0):(-2147483648-T|0)>(T|0)))return C=1,C|0;if(L=T<<1,(v?(2147483647-L|0)<(T|0):(-2147483648-L|0)>(T|0))||(p?(2147483647-y|0)<(T|0):(-2147483648-y|0)>(T|0))||(p=T*3|0,(T|0)>-1?(p|-2147483648|0)>=(E|0):(p^-2147483648|0)<(E|0)))return L=1,L|0}else p=T*3|0,y=E<<1;return v=ao(+(y+T|0)*.14285714285714285)|0,g[d>>2]=v,T=ao(+(p-E|0)*.14285714285714285)|0,g[C>>2]=T,g[R>>2]=0,p=(T|0)<(v|0),y=p?v:T,p=p?T:v,(p|0)<0&&(((p|0)==-2147483648||((y|0)>0?(2147483647-y|0)<(p|0):(-2147483648-y|0)>(p|0)))&&ti(27795,26892,402,26917),((y|0)>-1?(y|-2147483648|0)>=(p|0):(y^-2147483648|0)<(p|0))&&ti(27795,26892,402,26917)),y=T-v|0,(v|0)<0?(p=0-v|0,g[C>>2]=y,g[R>>2]=p,g[d>>2]=0,v=0):(y=T,p=0),(y|0)<0&&(v=v-y|0,g[d>>2]=v,p=p-y|0,g[R>>2]=p,g[C>>2]=0,y=0),E=v-p|0,T=y-p|0,(p|0)<0?(g[d>>2]=E,g[C>>2]=T,g[R>>2]=0,y=T,T=E,p=0):T=v,v=(y|0)<(T|0)?y:T,v=(p|0)<(v|0)?p:v,(v|0)<=0?(L=0,L|0):(g[d>>2]=T-v,g[C>>2]=y-v,g[R>>2]=p-v,L=0,L|0)}function QT(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;R=d+8|0,p=g[R>>2]|0,y=(g[d>>2]|0)-p|0,C=d+4|0,p=(g[C>>2]|0)-p|0,v=ao(+((y*3|0)-p|0)*.14285714285714285)|0,g[d>>2]=v,y=ao(+((p<<1)+y|0)*.14285714285714285)|0,g[C>>2]=y,g[R>>2]=0,p=y-v|0,(v|0)<0?(E=0-v|0,g[C>>2]=p,g[R>>2]=E,g[d>>2]=0,y=p,v=0,p=E):p=0,(y|0)<0&&(v=v-y|0,g[d>>2]=v,p=p-y|0,g[R>>2]=p,g[C>>2]=0,y=0),E=v-p|0,T=y-p|0,(p|0)<0?(g[d>>2]=E,g[C>>2]=T,g[R>>2]=0,y=T,T=E,p=0):T=v,v=(y|0)<(T|0)?y:T,v=(p|0)<(v|0)?p:v,!((v|0)<=0)&&(g[d>>2]=T-v,g[C>>2]=y-v,g[R>>2]=p-v)}function w1(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;R=d+8|0,p=g[R>>2]|0,y=(g[d>>2]|0)-p|0,C=d+4|0,p=(g[C>>2]|0)-p|0,v=ao(+((y<<1)+p|0)*.14285714285714285)|0,g[d>>2]=v,y=ao(+((p*3|0)-y|0)*.14285714285714285)|0,g[C>>2]=y,g[R>>2]=0,p=y-v|0,(v|0)<0?(E=0-v|0,g[C>>2]=p,g[R>>2]=E,g[d>>2]=0,y=p,v=0,p=E):p=0,(y|0)<0&&(v=v-y|0,g[d>>2]=v,p=p-y|0,g[R>>2]=p,g[C>>2]=0,y=0),E=v-p|0,T=y-p|0,(p|0)<0?(g[d>>2]=E,g[C>>2]=T,g[R>>2]=0,y=T,T=E,p=0):T=v,v=(y|0)<(T|0)?y:T,v=(p|0)<(v|0)?p:v,!((v|0)<=0)&&(g[d>>2]=T-v,g[C>>2]=y-v,g[R>>2]=p-v)}function kc(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;y=g[d>>2]|0,R=d+4|0,p=g[R>>2]|0,C=d+8|0,v=g[C>>2]|0,T=p+(y*3|0)|0,g[d>>2]=T,p=v+(p*3|0)|0,g[R>>2]=p,y=(v*3|0)+y|0,g[C>>2]=y,v=p-T|0,(T|0)<0?(y=y-T|0,g[R>>2]=v,g[C>>2]=y,g[d>>2]=0,p=v,v=0):v=T,(p|0)<0&&(v=v-p|0,g[d>>2]=v,y=y-p|0,g[C>>2]=y,g[R>>2]=0,p=0),E=v-y|0,T=p-y|0,(y|0)<0?(g[d>>2]=E,g[R>>2]=T,g[C>>2]=0,v=E,y=0):T=p,p=(T|0)<(v|0)?T:v,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(g[d>>2]=v-p,g[R>>2]=T-p,g[C>>2]=y-p)}function Il(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;T=g[d>>2]|0,R=d+4|0,y=g[R>>2]|0,C=d+8|0,p=g[C>>2]|0,v=(y*3|0)+T|0,T=p+(T*3|0)|0,g[d>>2]=T,g[R>>2]=v,y=(p*3|0)+y|0,g[C>>2]=y,p=v-T|0,(T|0)<0?(y=y-T|0,g[R>>2]=p,g[C>>2]=y,g[d>>2]=0,T=0):p=v,(p|0)<0&&(T=T-p|0,g[d>>2]=T,y=y-p|0,g[C>>2]=y,g[R>>2]=0,p=0),E=T-y|0,v=p-y|0,(y|0)<0?(g[d>>2]=E,g[R>>2]=v,g[C>>2]=0,T=E,y=0):v=p,p=(v|0)<(T|0)?v:T,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(g[d>>2]=T-p,g[R>>2]=v-p,g[C>>2]=y-p)}function M1(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0;(y+-1|0)>>>0>=6||(T=(g[15440+(y*12|0)>>2]|0)+(g[d>>2]|0)|0,g[d>>2]=T,C=d+4|0,v=(g[15440+(y*12|0)+4>>2]|0)+(g[C>>2]|0)|0,g[C>>2]=v,R=d+8|0,y=(g[15440+(y*12|0)+8>>2]|0)+(g[R>>2]|0)|0,g[R>>2]=y,p=v-T|0,(T|0)<0?(y=y-T|0,g[C>>2]=p,g[R>>2]=y,g[d>>2]=0,v=0):(p=v,v=T),(p|0)<0&&(v=v-p|0,g[d>>2]=v,y=y-p|0,g[R>>2]=y,g[C>>2]=0,p=0),E=v-y|0,T=p-y|0,(y|0)<0?(g[d>>2]=E,g[C>>2]=T,g[R>>2]=0,v=E,y=0):T=p,p=(T|0)<(v|0)?T:v,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(g[d>>2]=v-p,g[C>>2]=T-p,g[R>>2]=y-p))}function I1(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;T=g[d>>2]|0,R=d+4|0,y=g[R>>2]|0,C=d+8|0,p=g[C>>2]|0,v=y+T|0,T=p+T|0,g[d>>2]=T,g[R>>2]=v,y=p+y|0,g[C>>2]=y,p=v-T|0,(T|0)<0?(y=y-T|0,g[R>>2]=p,g[C>>2]=y,g[d>>2]=0,v=0):(p=v,v=T),(p|0)<0&&(v=v-p|0,g[d>>2]=v,y=y-p|0,g[C>>2]=y,g[R>>2]=0,p=0),E=v-y|0,T=p-y|0,(y|0)<0?(g[d>>2]=E,g[R>>2]=T,g[C>>2]=0,v=E,y=0):T=p,p=(T|0)<(v|0)?T:v,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(g[d>>2]=v-p,g[R>>2]=T-p,g[C>>2]=y-p)}function nd(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;y=g[d>>2]|0,R=d+4|0,v=g[R>>2]|0,C=d+8|0,p=g[C>>2]|0,T=v+y|0,g[d>>2]=T,v=p+v|0,g[R>>2]=v,y=p+y|0,g[C>>2]=y,p=v-T|0,(T|0)<0?(y=y-T|0,g[R>>2]=p,g[C>>2]=y,g[d>>2]=0,v=0):(p=v,v=T),(p|0)<0&&(v=v-p|0,g[d>>2]=v,y=y-p|0,g[C>>2]=y,g[R>>2]=0,p=0),E=v-y|0,T=p-y|0,(y|0)<0?(g[d>>2]=E,g[R>>2]=T,g[C>>2]=0,v=E,y=0):T=p,p=(T|0)<(v|0)?T:v,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(g[d>>2]=v-p,g[R>>2]=T-p,g[C>>2]=y-p)}function El(d){switch(d=d|0,d|0){case 1:{d=5;break}case 5:{d=4;break}case 4:{d=6;break}case 6:{d=2;break}case 2:{d=3;break}case 3:{d=1;break}}return d|0}function to(d){switch(d=d|0,d|0){case 1:{d=3;break}case 3:{d=2;break}case 2:{d=6;break}case 6:{d=4;break}case 4:{d=5;break}case 5:{d=1;break}}return d|0}function E1(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;y=g[d>>2]|0,R=d+4|0,p=g[R>>2]|0,C=d+8|0,v=g[C>>2]|0,T=p+(y<<1)|0,g[d>>2]=T,p=v+(p<<1)|0,g[R>>2]=p,y=(v<<1)+y|0,g[C>>2]=y,v=p-T|0,(T|0)<0?(y=y-T|0,g[R>>2]=v,g[C>>2]=y,g[d>>2]=0,p=v,v=0):v=T,(p|0)<0&&(v=v-p|0,g[d>>2]=v,y=y-p|0,g[C>>2]=y,g[R>>2]=0,p=0),E=v-y|0,T=p-y|0,(y|0)<0?(g[d>>2]=E,g[R>>2]=T,g[C>>2]=0,v=E,y=0):T=p,p=(T|0)<(v|0)?T:v,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(g[d>>2]=v-p,g[R>>2]=T-p,g[C>>2]=y-p)}function B1(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;T=g[d>>2]|0,R=d+4|0,y=g[R>>2]|0,C=d+8|0,p=g[C>>2]|0,v=(y<<1)+T|0,T=p+(T<<1)|0,g[d>>2]=T,g[R>>2]=v,y=(p<<1)+y|0,g[C>>2]=y,p=v-T|0,(T|0)<0?(y=y-T|0,g[R>>2]=p,g[C>>2]=y,g[d>>2]=0,T=0):p=v,(p|0)<0&&(T=T-p|0,g[d>>2]=T,y=y-p|0,g[C>>2]=y,g[R>>2]=0,p=0),E=T-y|0,v=p-y|0,(y|0)<0?(g[d>>2]=E,g[R>>2]=v,g[C>>2]=0,T=E,y=0):v=p,p=(v|0)<(T|0)?v:T,p=(y|0)<(p|0)?y:p,!((p|0)<=0)&&(g[d>>2]=T-p,g[R>>2]=v-p,g[C>>2]=y-p)}function C0(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0;return R=(g[d>>2]|0)-(g[y>>2]|0)|0,C=(R|0)<0,v=(g[d+4>>2]|0)-(g[y+4>>2]|0)-(C?R:0)|0,E=(v|0)<0,T=(C?0-R|0:0)+(g[d+8>>2]|0)-(g[y+8>>2]|0)+(E?0-v|0:0)|0,d=(T|0)<0,y=d?0:T,p=(E?0:v)-(d?T:0)|0,T=(C?0:R)-(E?v:0)-(d?T:0)|0,d=(p|0)<(T|0)?p:T,d=(y|0)<(d|0)?y:d,v=(d|0)>0,y=y-(v?d:0)|0,p=p-(v?d:0)|0,d=T-(v?d:0)|0,d=(d|0)>-1?d:0-d|0,p=(p|0)>-1?p:0-p|0,y=(y|0)>-1?y:0-y|0,y=(p|0)>(y|0)?p:y,((d|0)>(y|0)?d:y)|0}function KT(d,y){d=d|0,y=y|0;var p=0;p=g[d+8>>2]|0,g[y>>2]=(g[d>>2]|0)-p,g[y+4>>2]=(g[d+4>>2]|0)-p}function P0(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0;return v=g[d>>2]|0,g[y>>2]=v,T=g[d+4>>2]|0,R=y+4|0,g[R>>2]=T,C=y+8|0,g[C>>2]=0,p=(T|0)<(v|0),d=p?v:T,p=p?T:v,(p|0)<0&&((p|0)==-2147483648||((d|0)>0?(2147483647-d|0)<(p|0):(-2147483648-d|0)>(p|0))||((d|0)>-1?(d|-2147483648|0)>=(p|0):(d^-2147483648|0)<(p|0)))?(y=1,y|0):(d=T-v|0,(v|0)<0?(p=0-v|0,g[R>>2]=d,g[C>>2]=p,g[y>>2]=0,v=0):(d=T,p=0),(d|0)<0&&(v=v-d|0,g[y>>2]=v,p=p-d|0,g[C>>2]=p,g[R>>2]=0,d=0),E=v-p|0,T=d-p|0,(p|0)<0?(g[y>>2]=E,g[R>>2]=T,g[C>>2]=0,d=T,T=E,p=0):T=v,v=(d|0)<(T|0)?d:T,v=(p|0)<(v|0)?p:v,(v|0)<=0?(y=0,y|0):(g[y>>2]=T-v,g[R>>2]=d-v,g[C>>2]=p-v,y=0,y|0))}function O1(d){d=d|0;var y=0,p=0,v=0,T=0;y=d+8|0,T=g[y>>2]|0,p=T-(g[d>>2]|0)|0,g[d>>2]=p,v=d+4|0,d=(g[v>>2]|0)-T|0,g[v>>2]=d,g[y>>2]=0-(d+p)}function ZT(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;p=g[d>>2]|0,y=0-p|0,g[d>>2]=y,R=d+8|0,g[R>>2]=0,C=d+4|0,v=g[C>>2]|0,T=v+p|0,(p|0)>0?(g[C>>2]=T,g[R>>2]=p,g[d>>2]=0,y=0,v=T):p=0,(v|0)<0?(E=y-v|0,g[d>>2]=E,p=p-v|0,g[R>>2]=p,g[C>>2]=0,T=E-p|0,y=0-p|0,(p|0)<0?(g[d>>2]=T,g[C>>2]=y,g[R>>2]=0,v=y,p=0):(v=0,T=E)):T=y,y=(v|0)<(T|0)?v:T,y=(p|0)<(y|0)?p:y,!((y|0)<=0)&&(g[d>>2]=T-y,g[C>>2]=v-y,g[R>>2]=p-y)}function JT(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0;if(st=it,it=it+64|0,W=st,C=st+56|0,!(!0&(y&2013265920|0)==134217728&(!0&(v&2013265920|0)==134217728)))return T=5,it=st,T|0;if((d|0)==(p|0)&(y|0)==(v|0))return g[T>>2]=0,T=0,it=st,T|0;if(R=ue(d|0,y|0,52)|0,ot()|0,R=R&15,z=ue(p|0,v|0,52)|0,ot()|0,(R|0)!=(z&15|0))return T=12,it=st,T|0;if(E=R+-1|0,R>>>0>1){ad(d,y,E,W)|0,ad(p,v,E,C)|0,z=W,L=g[z>>2]|0,z=g[z+4>>2]|0;t:do if((L|0)==(g[C>>2]|0)&&(z|0)==(g[C+4>>2]|0)){R=(R^15)*3|0,E=ue(d|0,y|0,R|0)|0,ot()|0,E=E&7,R=ue(p|0,v|0,R|0)|0,ot()|0,R=R&7;do if((E|0)==0|(R|0)==0)g[T>>2]=1,E=0;else if((E|0)==7)E=5;else{if((E|0)==1|(R|0)==1&&tn(L,z)|0){E=5;break}if((g[15536+(E<<2)>>2]|0)!=(R|0)&&(g[15568+(E<<2)>>2]|0)!=(R|0))break t;g[T>>2]=1,E=0}while(!1);return T=E,it=st,T|0}while(!1)}E=W,R=E+56|0;do g[E>>2]=0,E=E+4|0;while((E|0)<(R|0));return us(d,y,1,W)|0,y=W,!((g[y>>2]|0)==(p|0)&&(g[y+4>>2]|0)==(v|0))&&(y=W+8|0,!((g[y>>2]|0)==(p|0)&&(g[y+4>>2]|0)==(v|0)))&&(y=W+16|0,!((g[y>>2]|0)==(p|0)&&(g[y+4>>2]|0)==(v|0)))&&(y=W+24|0,!((g[y>>2]|0)==(p|0)&&(g[y+4>>2]|0)==(v|0)))&&(y=W+32|0,!((g[y>>2]|0)==(p|0)&&(g[y+4>>2]|0)==(v|0)))&&(y=W+40|0,!((g[y>>2]|0)==(p|0)&&(g[y+4>>2]|0)==(v|0)))?(E=W+48|0,E=((g[E>>2]|0)==(p|0)?(g[E+4>>2]|0)==(v|0):0)&1):E=1,g[T>>2]=E,T=0,it=st,T|0}function R1(d,y,p,v,T){return d=d|0,y=y|0,p=p|0,v=v|0,T=T|0,p=Zf(d,y,p,v)|0,(p|0)==7?(T=11,T|0):(v=_e(p|0,0,56)|0,y=y&-2130706433|(ot()|0)|268435456,g[T>>2]=d|v,g[T+4>>2]=y,T=0,T|0)}function tS(d,y,p){return d=d|0,y=y|0,p=p|0,!0&(y&2013265920|0)==268435456?(g[p>>2]=d,g[p+4>>2]=y&-2130706433|134217728,p=0,p|0):(p=6,p|0)}function eS(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0;return T=it,it=it+16|0,v=T,g[v>>2]=0,!0&(y&2013265920|0)==268435456?(E=ue(d|0,y|0,56)|0,ot()|0,v=Rn(d,y&-2130706433|134217728,E&7,v,p)|0,it=T,v|0):(v=6,it=T,v|0)}function iS(d,y){d=d|0,y=y|0;var p=0;switch(p=ue(d|0,y|0,56)|0,ot()|0,p&7){case 0:case 7:return p=0,p|0}return p=y&-2130706433|134217728,!(!0&(y&2013265920|0)==268435456)||!0&(y&117440512|0)==16777216&(tn(d,p)|0)!=0?(p=0,p|0):(p=L0(d,p)|0,p|0)}function nS(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0;return T=it,it=it+16|0,v=T,!0&(y&2013265920|0)==268435456?(E=y&-2130706433|134217728,R=p,g[R>>2]=d,g[R+4>>2]=E,g[v>>2]=0,y=ue(d|0,y|0,56)|0,ot()|0,v=Rn(d,E,y&7,v,p+8|0)|0,it=T,v|0):(v=6,it=T,v|0)}function rS(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0;return T=(tn(d,y)|0)==0,y=y&-2130706433,v=p,g[v>>2]=T?d:0,g[v+4>>2]=T?y|285212672:0,v=p+8|0,g[v>>2]=d,g[v+4>>2]=y|301989888,v=p+16|0,g[v>>2]=d,g[v+4>>2]=y|318767104,v=p+24|0,g[v>>2]=d,g[v+4>>2]=y|335544320,v=p+32|0,g[v>>2]=d,g[v+4>>2]=y|352321536,p=p+40|0,g[p>>2]=d,g[p+4>>2]=y|369098752,0}function rd(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0;return R=it,it=it+16|0,T=R,E=y&-2130706433|134217728,!0&(y&2013265920|0)==268435456?(v=ue(d|0,y|0,56)|0,ot()|0,v=H1(d,E,v&7)|0,(v|0)==-1?(g[p>>2]=0,E=6,it=R,E|0):(Ea(d,E,T)|0&&ti(27795,26932,282,26947),y=ue(d|0,y|0,52)|0,ot()|0,y=y&15,tn(d,E)|0?x0(T,y,v,2,p):sd(T,y,v,2,p),E=0,it=R,E|0)):(E=6,it=R,E|0)}function sS(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0;v=it,it=it+16|0,T=v,aS(d,y,p,T),id(T,p+4|0),it=v}function aS(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0;if(C=it,it=it+16|0,L=C,oS(d,p,L),E=+Zu(+(1-+et[L>>3]*.5)),E<1e-16){g[v>>2]=0,g[v+4>>2]=0,g[v+8>>2]=0,g[v+12>>2]=0,it=C;return}if(L=g[p>>2]|0,T=+et[15920+(L*24|0)>>3],T=+qs(T-+qs(+k1(15600+(L<<4)|0,d))),Ms(y)|0?R=+qs(T+-.3334731722518321):R=T,T=+cs(+E)*2.618033988749896,(y|0)>0){d=0;do T=T*2.6457513110645907,d=d+1|0;while((d|0)!=(y|0))}E=+$i(+R)*T,et[v>>3]=E,R=+Xe(+R)*T,et[v+8>>3]=R,it=C}function oS(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0;if(E=it,it=it+32|0,T=E,uh(d,T),g[y>>2]=0,et[p>>3]=5,v=+In(16400,T),v<+et[p>>3]&&(g[y>>2]=0,et[p>>3]=v),v=+In(16424,T),v<+et[p>>3]&&(g[y>>2]=1,et[p>>3]=v),v=+In(16448,T),v<+et[p>>3]&&(g[y>>2]=2,et[p>>3]=v),v=+In(16472,T),v<+et[p>>3]&&(g[y>>2]=3,et[p>>3]=v),v=+In(16496,T),v<+et[p>>3]&&(g[y>>2]=4,et[p>>3]=v),v=+In(16520,T),v<+et[p>>3]&&(g[y>>2]=5,et[p>>3]=v),v=+In(16544,T),v<+et[p>>3]&&(g[y>>2]=6,et[p>>3]=v),v=+In(16568,T),v<+et[p>>3]&&(g[y>>2]=7,et[p>>3]=v),v=+In(16592,T),v<+et[p>>3]&&(g[y>>2]=8,et[p>>3]=v),v=+In(16616,T),v<+et[p>>3]&&(g[y>>2]=9,et[p>>3]=v),v=+In(16640,T),v<+et[p>>3]&&(g[y>>2]=10,et[p>>3]=v),v=+In(16664,T),v<+et[p>>3]&&(g[y>>2]=11,et[p>>3]=v),v=+In(16688,T),v<+et[p>>3]&&(g[y>>2]=12,et[p>>3]=v),v=+In(16712,T),v<+et[p>>3]&&(g[y>>2]=13,et[p>>3]=v),v=+In(16736,T),v<+et[p>>3]&&(g[y>>2]=14,et[p>>3]=v),v=+In(16760,T),v<+et[p>>3]&&(g[y>>2]=15,et[p>>3]=v),v=+In(16784,T),v<+et[p>>3]&&(g[y>>2]=16,et[p>>3]=v),v=+In(16808,T),v<+et[p>>3]&&(g[y>>2]=17,et[p>>3]=v),v=+In(16832,T),v<+et[p>>3]&&(g[y>>2]=18,et[p>>3]=v),v=+In(16856,T),!(v<+et[p>>3])){it=E;return}g[y>>2]=19,et[p>>3]=v,it=E}function Bl(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0;if(E=+Nl(d),E<1e-16){y=15600+(y<<4)|0,g[T>>2]=g[y>>2],g[T+4>>2]=g[y+4>>2],g[T+8>>2]=g[y+8>>2],g[T+12>>2]=g[y+12>>2];return}if(R=+Ss(+ +et[d+8>>3],+ +et[d>>3]),(p|0)>0){d=0;do E=E*.37796447300922725,d=d+1|0;while((d|0)!=(p|0))}C=E*.3333333333333333,v?(p=(Ms(p)|0)==0,E=+Lo(+((p?C:C*.37796447300922725)*.381966011250105))):(E=+Lo(+(E*.381966011250105)),Ms(p)|0&&(R=+qs(R+.3334731722518321))),j1(15600+(y<<4)|0,+qs(+et[15920+(y*24|0)>>3]-R),E,T)}function oh(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0;v=it,it=it+16|0,T=v,wl(d+4|0,T),Bl(T,g[d>>2]|0,y,0,p),it=v}function x0(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0,Ce=0,We=0,Ni=0,Qe=0,Ve=0,ye=0,vi=0,Ki=0,Ii=0;if(vi=it,it=it+272|0,E=vi+256|0,$t=vi+240|0,Qe=vi,Ve=vi+224|0,ye=vi+208|0,zt=vi+176|0,Et=vi+160|0,ve=vi+192|0,ze=vi+144|0,fe=vi+128|0,Ce=vi+112|0,We=vi+96|0,Ni=vi+80|0,g[E>>2]=y,g[$t>>2]=g[d>>2],g[$t+4>>2]=g[d+4>>2],g[$t+8>>2]=g[d+8>>2],g[$t+12>>2]=g[d+12>>2],N0($t,E,Qe),g[T>>2]=0,$t=v+p+((v|0)==5&1)|0,($t|0)<=(p|0)){it=vi;return}L=g[E>>2]|0,z=Ve+4|0,W=zt+4|0,st=p+5|0,pt=16880+(L<<2)|0,At=16960+(L<<2)|0,gt=fe+8|0,It=Ce+8|0,xt=We+8|0,Qt=ye+4|0,C=p;t:for(;;){R=Qe+(((C|0)%5|0)<<4)|0,g[ye>>2]=g[R>>2],g[ye+4>>2]=g[R+4>>2],g[ye+8>>2]=g[R+8>>2],g[ye+12>>2]=g[R+12>>2];do;while((Ol(ye,L,0,1)|0)==2);if((C|0)>(p|0)&(Ms(y)|0)!=0){if(g[zt>>2]=g[ye>>2],g[zt+4>>2]=g[ye+4>>2],g[zt+8>>2]=g[ye+8>>2],g[zt+12>>2]=g[ye+12>>2],wl(z,Et),v=g[zt>>2]|0,E=g[17040+(v*80|0)+(g[Ve>>2]<<2)>>2]|0,g[zt>>2]=g[18640+(v*80|0)+(E*20|0)>>2],R=g[18640+(v*80|0)+(E*20|0)+16>>2]|0,(R|0)>0){d=0;do I1(W),d=d+1|0;while((d|0)<(R|0))}switch(R=18640+(v*80|0)+(E*20|0)+4|0,g[ve>>2]=g[R>>2],g[ve+4>>2]=g[R+4>>2],g[ve+8>>2]=g[R+8>>2],Uc(ve,(g[pt>>2]|0)*3|0),yr(W,ve,W),Xn(W),wl(W,ze),Ki=+(g[At>>2]|0),et[fe>>3]=Ki*3,et[gt>>3]=0,Ii=Ki*-1.5,et[Ce>>3]=Ii,et[It>>3]=Ki*2.598076211353316,et[We>>3]=Ii,et[xt>>3]=Ki*-2.598076211353316,g[17040+((g[zt>>2]|0)*80|0)+(g[ye>>2]<<2)>>2]|0){case 1:{d=Ce,v=fe;break}case 3:{d=We,v=Ce;break}case 2:{d=fe,v=We;break}default:{d=12;break t}}eg(Et,ze,v,d,Ni),Bl(Ni,g[zt>>2]|0,L,1,T+8+(g[T>>2]<<4)|0),g[T>>2]=(g[T>>2]|0)+1}if((C|0)<(st|0)&&(wl(Qt,zt),Bl(zt,g[ye>>2]|0,L,1,T+8+(g[T>>2]<<4)|0),g[T>>2]=(g[T>>2]|0)+1),g[Ve>>2]=g[ye>>2],g[Ve+4>>2]=g[ye+4>>2],g[Ve+8>>2]=g[ye+8>>2],g[Ve+12>>2]=g[ye+12>>2],C=C+1|0,(C|0)>=($t|0)){d=3;break}}if((d|0)==3){it=vi;return}else(d|0)==12&&ti(26970,27017,572,27027)}function N0(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0;L=it,it=it+128|0,v=L+64|0,T=L,E=v,R=20240,C=E+60|0;do g[E>>2]=g[R>>2],E=E+4|0,R=R+4|0;while((E|0)<(C|0));E=T,R=20304,C=E+60|0;do g[E>>2]=g[R>>2],E=E+4|0,R=R+4|0;while((E|0)<(C|0));C=(Ms(g[y>>2]|0)|0)==0,v=C?v:T,T=d+4|0,E1(T),B1(T),Ms(g[y>>2]|0)|0&&(Il(T),g[y>>2]=(g[y>>2]|0)+1),g[p>>2]=g[d>>2],y=p+4|0,yr(T,v,y),Xn(y),g[p+16>>2]=g[d>>2],y=p+20|0,yr(T,v+12|0,y),Xn(y),g[p+32>>2]=g[d>>2],y=p+36|0,yr(T,v+24|0,y),Xn(y),g[p+48>>2]=g[d>>2],y=p+52|0,yr(T,v+36|0,y),Xn(y),g[p+64>>2]=g[d>>2],p=p+68|0,yr(T,v+48|0,p),Xn(p),it=L}function Ol(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0;if(gt=it,it=it+32|0,pt=gt+12|0,C=gt,At=d+4|0,st=g[16960+(y<<2)>>2]|0,W=(v|0)!=0,st=W?st*3|0:st,T=g[At>>2]|0,z=d+8|0,R=g[z>>2]|0,W){if(E=d+12|0,v=g[E>>2]|0,T=R+T+v|0,(T|0)==(st|0))return At=1,it=gt,At|0;L=E}else L=d+12|0,v=g[L>>2]|0,T=R+T+v|0;if((T|0)<=(st|0))return At=0,it=gt,At|0;do if((v|0)>0){if(v=g[d>>2]|0,(R|0)>0){E=18640+(v*80|0)+60|0,v=d;break}v=18640+(v*80|0)+40|0,p?(Sl(pt,st,0,0),ah(At,pt,C),nd(C),yr(C,pt,At),E=v,v=d):(E=v,v=d)}else E=18640+((g[d>>2]|0)*80|0)+20|0,v=d;while(!1);if(g[v>>2]=g[E>>2],T=E+16|0,(g[T>>2]|0)>0){v=0;do I1(At),v=v+1|0;while((v|0)<(g[T>>2]|0))}return d=E+4|0,g[pt>>2]=g[d>>2],g[pt+4>>2]=g[d+4>>2],g[pt+8>>2]=g[d+8>>2],y=g[16880+(y<<2)>>2]|0,Uc(pt,W?y*3|0:y),yr(At,pt,At),Xn(At),W?v=((g[z>>2]|0)+(g[At>>2]|0)+(g[L>>2]|0)|0)==(st|0)?1:2:v=2,At=v,it=gt,At|0}function D1(d,y){d=d|0,y=y|0;var p=0;do p=Ol(d,y,0,1)|0;while((p|0)==2);return p|0}function sd(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0,Ce=0,We=0,Ni=0,Qe=0;if(We=it,it=it+240|0,E=We+224|0,ve=We+208|0,ze=We,fe=We+192|0,Ce=We+176|0,xt=We+160|0,Qt=We+144|0,$t=We+128|0,zt=We+112|0,Et=We+96|0,g[E>>2]=y,g[ve>>2]=g[d>>2],g[ve+4>>2]=g[d+4>>2],g[ve+8>>2]=g[d+8>>2],g[ve+12>>2]=g[d+12>>2],F0(ve,E,ze),g[T>>2]=0,It=v+p+((v|0)==6&1)|0,(It|0)<=(p|0)){it=We;return}L=g[E>>2]|0,z=p+6|0,W=16960+(L<<2)|0,st=Qt+8|0,pt=$t+8|0,At=zt+8|0,gt=fe+4|0,R=0,C=p,v=-1;t:for(;;){if(E=(C|0)%6|0,d=ze+(E<<4)|0,g[fe>>2]=g[d>>2],g[fe+4>>2]=g[d+4>>2],g[fe+8>>2]=g[d+8>>2],g[fe+12>>2]=g[d+12>>2],d=R,R=Ol(fe,L,0,1)|0,(C|0)>(p|0)&(Ms(y)|0)!=0&&(d|0)!=1&&(g[fe>>2]|0)!=(v|0)){switch(wl(ze+(((E+5|0)%6|0)<<4)+4|0,Ce),wl(ze+(E<<4)+4|0,xt),Ni=+(g[W>>2]|0),et[Qt>>3]=Ni*3,et[st>>3]=0,Qe=Ni*-1.5,et[$t>>3]=Qe,et[pt>>3]=Ni*2.598076211353316,et[zt>>3]=Qe,et[At>>3]=Ni*-2.598076211353316,E=g[ve>>2]|0,g[17040+(E*80|0)+(((v|0)==(E|0)?g[fe>>2]|0:v)<<2)>>2]|0){case 1:{d=$t,v=Qt;break}case 3:{d=zt,v=$t;break}case 2:{d=Qt,v=zt;break}default:{d=8;break t}}eg(Ce,xt,v,d,Et),!(ig(Ce,Et)|0)&&!(ig(xt,Et)|0)&&(Bl(Et,g[ve>>2]|0,L,1,T+8+(g[T>>2]<<4)|0),g[T>>2]=(g[T>>2]|0)+1)}if((C|0)<(z|0)&&(wl(gt,Ce),Bl(Ce,g[fe>>2]|0,L,1,T+8+(g[T>>2]<<4)|0),g[T>>2]=(g[T>>2]|0)+1),C=C+1|0,(C|0)>=(It|0)){d=3;break}else v=g[fe>>2]|0}if((d|0)==3){it=We;return}else(d|0)==8&&ti(27054,27017,737,27099)}function F0(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0;L=it,it=it+160|0,v=L+80|0,T=L,E=v,R=20368,C=E+72|0;do g[E>>2]=g[R>>2],E=E+4|0,R=R+4|0;while((E|0)<(C|0));E=T,R=20448,C=E+72|0;do g[E>>2]=g[R>>2],E=E+4|0,R=R+4|0;while((E|0)<(C|0));C=(Ms(g[y>>2]|0)|0)==0,v=C?v:T,T=d+4|0,E1(T),B1(T),Ms(g[y>>2]|0)|0&&(Il(T),g[y>>2]=(g[y>>2]|0)+1),g[p>>2]=g[d>>2],y=p+4|0,yr(T,v,y),Xn(y),g[p+16>>2]=g[d>>2],y=p+20|0,yr(T,v+12|0,y),Xn(y),g[p+32>>2]=g[d>>2],y=p+36|0,yr(T,v+24|0,y),Xn(y),g[p+48>>2]=g[d>>2],y=p+52|0,yr(T,v+36|0,y),Xn(y),g[p+64>>2]=g[d>>2],y=p+68|0,yr(T,v+48|0,y),Xn(y),g[p+80>>2]=g[d>>2],p=p+84|0,yr(T,v+60|0,p),Xn(p),it=L}function jc(d,y){return d=d|0,y=y|0,y=ue(d|0,y|0,52)|0,ot()|0,y&15|0}function C1(d,y){return d=d|0,y=y|0,y=ue(d|0,y|0,45)|0,ot()|0,y&127|0}function L0(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0;return!(!0&(y&-16777216|0)==134217728)||(v=ue(d|0,y|0,52)|0,ot()|0,v=v&15,p=ue(d|0,y|0,45)|0,ot()|0,p=p&127,p>>>0>121)?(d=0,d|0):(R=(v^15)*3|0,T=ue(d|0,y|0,R|0)|0,R=_e(T|0,ot()|0,R|0)|0,T=ot()|0,E=rr(-1227133514,-1171,R|0,T|0)|0,!((R&613566756&E|0)==0&(T&4681&(ot()|0)|0)==0)||(R=(v*3|0)+19|0,E=_e(~d|0,~y|0,R|0)|0,R=ue(E|0,ot()|0,R|0)|0,!((v|0)==15|(R|0)==0&(ot()|0)==0))?(R=0,R|0):!(ce[20528+p>>0]|0)||(y=y&8191,(d|0)==0&(y|0)==0)?(R=1,R|0):(R=bd(d|0,y|0)|0,ot()|0,((63-R|0)%3|0|0)!=0|0))}function U0(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0;if(T=_e(y|0,0,52)|0,E=ot()|0,p=_e(p|0,0,45)|0,p=E|(ot()|0)|134225919,(y|0)<1){E=-1,v=p,y=d,g[y>>2]=E,d=d+4|0,g[d>>2]=v;return}for(E=1,T=-1;R=(15-E|0)*3|0,C=_e(7,0,R|0)|0,p=p&~(ot()|0),R=_e(v|0,0,R|0)|0,T=T&~C|R,p=p|(ot()|0),(E|0)!=(y|0);)E=E+1|0;C=d,R=C,g[R>>2]=T,C=C+4|0,g[C>>2]=p}function ad(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0;if(E=ue(d|0,y|0,52)|0,ot()|0,E=E&15,p>>>0>15)return v=4,v|0;if((E|0)<(p|0))return v=12,v|0;if((E|0)==(p|0))return g[v>>2]=d,g[v+4>>2]=y,v=0,v|0;if(T=_e(p|0,0,52)|0,T=T|d,d=ot()|0|y&-15728641,(E|0)>(p|0))do y=_e(7,0,(14-p|0)*3|0)|0,p=p+1|0,T=y|T,d=ot()|0|d;while((p|0)<(E|0));return g[v>>2]=T,g[v+4>>2]=d,v=0,v|0}function zc(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0;if(E=ue(d|0,y|0,52)|0,ot()|0,E=E&15,!((p|0)<16&(E|0)<=(p|0)))return v=4,v|0;T=p-E|0,p=ue(d|0,y|0,45)|0,ot()|0;t:do if(!(Sn(p&127)|0))p=Xs(7,0,T,((T|0)<0)<<31>>31)|0,T=ot()|0;else{e:do if(E|0){for(p=1;R=_e(7,0,(15-p|0)*3|0)|0,!!((R&d|0)==0&((ot()|0)&y|0)==0);)if(p>>>0<E>>>0)p=p+1|0;else break e;p=Xs(7,0,T,((T|0)<0)<<31>>31)|0,T=ot()|0;break t}while(!1);p=Xs(7,0,T,((T|0)<0)<<31>>31)|0,p=Un(p|0,ot()|0,5,0)|0,p=Pe(p|0,ot()|0,-5,-1)|0,p=Pa(p|0,ot()|0,6,0)|0,p=Pe(p|0,ot()|0,1,0)|0,T=ot()|0}while(!1);return R=v,g[R>>2]=p,g[R+4>>2]=T,R=0,R|0}function tn(d,y){d=d|0,y=y|0;var p=0,v=0,T=0;if(T=ue(d|0,y|0,45)|0,ot()|0,!(Sn(T&127)|0))return T=0,T|0;T=ue(d|0,y|0,52)|0,ot()|0,T=T&15;t:do if(!T)p=0;else for(v=1;;){if(p=ue(d|0,y|0,(15-v|0)*3|0)|0,ot()|0,p=p&7,p|0)break t;if(v>>>0<T>>>0)v=v+1|0;else{p=0;break}}while(!1);return T=(p|0)==0&1,T|0}function lh(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0;if(R=it,it=it+16|0,E=R,Dl(E,d,y,p),y=E,d=g[y>>2]|0,y=g[y+4>>2]|0,(d|0)==0&(y|0)==0)return it=R,0;T=0,p=0;do C=v+(T<<3)|0,g[C>>2]=d,g[C+4>>2]=y,T=Pe(T|0,p|0,1,0)|0,p=ot()|0,cd(E),C=E,d=g[C>>2]|0,y=g[C+4>>2]|0;while(!((d|0)==0&(y|0)==0));return it=R,0}function P1(d,y,p,v){return d=d|0,y=y|0,p=p|0,v=v|0,(v|0)<(p|0)?(p=y,v=d,Ze(p|0),v|0):(p=_e(-1,-1,((v-p|0)*3|0)+3|0)|0,v=_e(~p|0,~(ot()|0)|0,(15-v|0)*3|0)|0,p=~(ot()|0)&y,v=~v&d,Ze(p|0),v|0)}function ch(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0;return T=ue(d|0,y|0,52)|0,ot()|0,T=T&15,(p|0)<16&(T|0)<=(p|0)?((T|0)<(p|0)&&(T=_e(-1,-1,((p+-1-T|0)*3|0)+3|0)|0,T=_e(~T|0,~(ot()|0)|0,(15-p|0)*3|0)|0,y=~(ot()|0)&y,d=~T&d),T=_e(p|0,0,52)|0,p=y&-15728641|(ot()|0),g[v>>2]=d|T,g[v+4>>2]=p,v=0,v|0):(v=4,v|0)}function x1(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0,Ce=0,We=0,Ni=0,Qe=0,Ve=0,ye=0;if((p|0)==0&(v|0)==0)return ye=0,ye|0;if(T=d,E=g[T>>2]|0,T=g[T+4>>2]|0,!0&(T&15728640|0)==0){if(!((v|0)>0|(v|0)==0&p>>>0>0)||(ye=y,g[ye>>2]=E,g[ye+4>>2]=T,(p|0)==1&(v|0)==0))return ye=0,ye|0;T=1,E=0;do Qe=d+(T<<3)|0,Ve=g[Qe+4>>2]|0,ye=y+(T<<3)|0,g[ye>>2]=g[Qe>>2],g[ye+4>>2]=Ve,T=Pe(T|0,E|0,1,0)|0,E=ot()|0;while((E|0)<(v|0)|(E|0)==(v|0)&T>>>0<p>>>0);return T=0,T|0}if(Ni=p<<3,Ve=Ca(Ni)|0,!Ve)return ye=13,ye|0;if(jl(Ve|0,d|0,Ni|0)|0,Qe=Os(p,8)|0,!Qe)return Je(Ve),ye=13,ye|0;t:for(;;){T=Ve,z=g[T>>2]|0,T=g[T+4>>2]|0,Ce=ue(z|0,T|0,52)|0,ot()|0,Ce=Ce&15,We=Ce+-1|0,fe=(Ce|0)!=0,ze=(v|0)>0|(v|0)==0&p>>>0>0;e:do if(fe&ze){if($t=_e(We|0,0,52)|0,zt=ot()|0,We>>>0>15){if(!((z|0)==0&(T|0)==0)){ye=16;break t}for(E=0,d=0;;){if(E=Pe(E|0,d|0,1,0)|0,d=ot()|0,!((d|0)<(v|0)|(d|0)==(v|0)&E>>>0<p>>>0))break e;if(R=Ve+(E<<3)|0,ve=g[R>>2]|0,R=g[R+4>>2]|0,!((ve|0)==0&(R|0)==0)){T=R,ye=16;break t}}}for(C=z,d=T,E=0,R=0;;){if(!((C|0)==0&(d|0)==0)){if(!(!0&(d&117440512|0)==0)){ye=21;break t}if(W=ue(C|0,d|0,52)|0,ot()|0,W=W&15,(W|0)<(We|0)){T=12,ye=27;break t}if((W|0)!=(We|0)&&(C=C|$t,d=d&-15728641|zt,W>>>0>=Ce>>>0)){L=We;do ve=_e(7,0,(14-L|0)*3|0)|0,L=L+1|0,C=ve|C,d=ot()|0|d;while(L>>>0<W>>>0)}if(pt=kl(C|0,d|0,p|0,v|0)|0,At=ot()|0,L=Qe+(pt<<3)|0,W=L,st=g[W>>2]|0,W=g[W+4>>2]|0,!((st|0)==0&(W|0)==0)){xt=0,Qt=0;do{if((xt|0)>(v|0)|(xt|0)==(v|0)&Qt>>>0>p>>>0){ye=31;break t}if((st|0)==(C|0)&(W&-117440513|0)==(d|0)){gt=ue(st|0,W|0,56)|0,ot()|0,gt=gt&7,It=gt+1|0,ve=ue(st|0,W|0,45)|0,ot()|0;i:do if(!(Sn(ve&127)|0))W=7;else{if(st=ue(st|0,W|0,52)|0,ot()|0,st=st&15,!st){W=6;break}for(W=1;;){if(ve=_e(7,0,(15-W|0)*3|0)|0,!((ve&C|0)==0&((ot()|0)&d|0)==0)){W=7;break i}if(W>>>0<st>>>0)W=W+1|0;else{W=6;break}}}while(!1);if((gt+2|0)>>>0>W>>>0){ye=41;break t}ve=_e(It|0,0,56)|0,d=ot()|0|d&-117440513,Et=L,g[Et>>2]=0,g[Et+4>>2]=0,C=ve|C}else pt=Pe(pt|0,At|0,1,0)|0,pt=Qc(pt|0,ot()|0,p|0,v|0)|0,At=ot()|0;Qt=Pe(Qt|0,xt|0,1,0)|0,xt=ot()|0,L=Qe+(pt<<3)|0,W=L,st=g[W>>2]|0,W=g[W+4>>2]|0}while(!((st|0)==0&(W|0)==0))}ve=L,g[ve>>2]=C,g[ve+4>>2]=d}if(E=Pe(E|0,R|0,1,0)|0,R=ot()|0,!((R|0)<(v|0)|(R|0)==(v|0)&E>>>0<p>>>0))break e;d=Ve+(E<<3)|0,C=g[d>>2]|0,d=g[d+4>>2]|0}}while(!1);if(ve=Pe(p|0,v|0,5,0)|0,Et=ot()|0,Et>>>0<0|(Et|0)==0&ve>>>0<11){ye=85;break}if(ve=Pa(p|0,v|0,6,0)|0,ot()|0,ve=Os(ve,8)|0,!ve){ye=48;break}do if(ze){for(It=0,d=0,gt=0,xt=0;;){if(W=Qe+(It<<3)|0,R=W,E=g[R>>2]|0,R=g[R+4>>2]|0,(E|0)==0&(R|0)==0)Et=gt;else{st=ue(E|0,R|0,56)|0,ot()|0,st=st&7,C=st+1|0,pt=R&-117440513,Et=ue(E|0,R|0,45)|0,ot()|0;e:do if(Sn(Et&127)|0){if(At=ue(E|0,R|0,52)|0,ot()|0,At=At&15,At|0)for(L=1;;){if(Et=_e(7,0,(15-L|0)*3|0)|0,!((E&Et|0)==0&(pt&(ot()|0)|0)==0))break e;if(L>>>0<At>>>0)L=L+1|0;else break}R=_e(C|0,0,56)|0,E=R|E,R=ot()|0|pt,C=W,g[C>>2]=E,g[C+4>>2]=R,C=st+2|0}while(!1);(C|0)==7?(Et=ve+(d<<3)|0,g[Et>>2]=E,g[Et+4>>2]=R&-117440513,d=Pe(d|0,gt|0,1,0)|0,Et=ot()|0):Et=gt}if(It=Pe(It|0,xt|0,1,0)|0,xt=ot()|0,(xt|0)<(v|0)|(xt|0)==(v|0)&It>>>0<p>>>0)gt=Et;else break}if(ze){if(Qt=We>>>0>15,$t=_e(We|0,0,52)|0,zt=ot()|0,!fe){for(E=0,L=0,C=0,R=0;(z|0)==0&(T|0)==0||(We=y+(E<<3)|0,g[We>>2]=z,g[We+4>>2]=T,E=Pe(E|0,L|0,1,0)|0,L=ot()|0),C=Pe(C|0,R|0,1,0)|0,R=ot()|0,!!((R|0)<(v|0)|(R|0)==(v|0)&C>>>0<p>>>0);)T=Ve+(C<<3)|0,z=g[T>>2]|0,T=g[T+4>>2]|0;T=Et;break}for(E=0,L=0,R=0,C=0;;){do if(!((z|0)==0&(T|0)==0)){if(At=ue(z|0,T|0,52)|0,ot()|0,At=At&15,Qt|(At|0)<(We|0)){ye=80;break t}if((At|0)!=(We|0)){if(W=z|$t,st=T&-15728641|zt,At>>>0>=Ce>>>0){pt=We;do fe=_e(7,0,(14-pt|0)*3|0)|0,pt=pt+1|0,W=fe|W,st=ot()|0|st;while(pt>>>0<At>>>0)}}else W=z,st=T;gt=kl(W|0,st|0,p|0,v|0)|0,pt=0,At=0,xt=ot()|0;do{if((pt|0)>(v|0)|(pt|0)==(v|0)&At>>>0>p>>>0){ye=81;break t}if(fe=Qe+(gt<<3)|0,It=g[fe+4>>2]|0,(It&-117440513|0)==(st|0)&&(g[fe>>2]|0)==(W|0)){ye=65;break}fe=Pe(gt|0,xt|0,1,0)|0,gt=Qc(fe|0,ot()|0,p|0,v|0)|0,xt=ot()|0,At=Pe(At|0,pt|0,1,0)|0,pt=ot()|0,fe=Qe+(gt<<3)|0}while(!((g[fe>>2]|0)==(W|0)&&(g[fe+4>>2]|0)==(st|0)));if((ye|0)==65&&(ye=0,!0&(It&117440512|0)==100663296))break;fe=y+(E<<3)|0,g[fe>>2]=z,g[fe+4>>2]=T,E=Pe(E|0,L|0,1,0)|0,L=ot()|0}while(!1);if(R=Pe(R|0,C|0,1,0)|0,C=ot()|0,!((C|0)<(v|0)|(C|0)==(v|0)&R>>>0<p>>>0))break;T=Ve+(R<<3)|0,z=g[T>>2]|0,T=g[T+4>>2]|0}T=Et}else E=0,T=Et}else E=0,d=0,T=0;while(!1);if(xa(Qe|0,0,Ni|0)|0,jl(Ve|0,ve|0,d<<3|0)|0,Je(ve),(d|0)==0&(T|0)==0){ye=89;break}else y=y+(E<<3)|0,v=T,p=d}if((ye|0)==16)!0&(T&117440512|0)==0?(T=4,ye=27):ye=21;else if((ye|0)==31)ti(27795,27122,529,27132);else{if((ye|0)==41)return Je(Ve),Je(Qe),ye=10,ye|0;if((ye|0)==48)return Je(Ve),Je(Qe),ye=13,ye|0;(ye|0)==80?ti(27795,27122,620,27132):(ye|0)==81?ti(27795,27122,632,27132):(ye|0)==85&&(jl(y|0,Ve|0,p<<3|0)|0,ye=89)}return(ye|0)==21?(Je(Ve),Je(Qe),ye=5,ye|0):(ye|0)==27?(Je(Ve),Je(Qe),ye=T,ye|0):(ye|0)==89?(Je(Ve),Je(Qe),ye=0,ye|0):0}function N1(d,y,p,v,T,E,R){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0,E=E|0,R=R|0;var C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0;if(It=it,it=it+16|0,gt=It,!((p|0)>0|(p|0)==0&y>>>0>0))return gt=0,it=It,gt|0;if((R|0)>=16)return gt=12,it=It,gt|0;pt=0,At=0,st=0,C=0;t:for(;;){if(z=d+(pt<<3)|0,L=g[z>>2]|0,z=g[z+4>>2]|0,W=ue(L|0,z|0,52)|0,ot()|0,(W&15|0)>(R|0)){C=12,L=11;break}if(Dl(gt,L,z,R),W=gt,z=g[W>>2]|0,W=g[W+4>>2]|0,(z|0)==0&(W|0)==0)L=st;else{L=st;do{if(!((C|0)<(E|0)|(C|0)==(E|0)&L>>>0<T>>>0)){L=10;break t}st=v+(L<<3)|0,g[st>>2]=z,g[st+4>>2]=W,L=Pe(L|0,C|0,1,0)|0,C=ot()|0,cd(gt),st=gt,z=g[st>>2]|0,W=g[st+4>>2]|0}while(!((z|0)==0&(W|0)==0))}if(pt=Pe(pt|0,At|0,1,0)|0,At=ot()|0,(At|0)<(p|0)|(At|0)==(p|0)&pt>>>0<y>>>0)st=L;else{C=0,L=11;break}}return(L|0)==10?(gt=14,it=It,gt|0):(L|0)==11?(it=It,C|0):0}function k0(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0;pt=it,it=it+16|0,st=pt;t:do if((p|0)>0|(p|0)==0&y>>>0>0){for(z=0,R=0,E=0,W=0;;){if(L=d+(z<<3)|0,C=g[L>>2]|0,L=g[L+4>>2]|0,!((C|0)==0&(L|0)==0)&&(L=(zc(C,L,v,st)|0)==0,C=st,R=Pe(g[C>>2]|0,g[C+4>>2]|0,R|0,E|0)|0,E=ot()|0,!L)){E=12;break}if(z=Pe(z|0,W|0,1,0)|0,W=ot()|0,!((W|0)<(p|0)|(W|0)==(p|0)&z>>>0<y>>>0))break t}return it=pt,E|0}else R=0,E=0;while(!1);return g[T>>2]=R,g[T+4>>2]=E,T=0,it=pt,T|0}function j0(d,y){return d=d|0,y=y|0,y=ue(d|0,y|0,52)|0,ot()|0,y&1|0}function Pr(d,y){d=d|0,y=y|0;var p=0,v=0,T=0;if(T=ue(d|0,y|0,52)|0,ot()|0,T=T&15,!T)return T=0,T|0;for(v=1;;){if(p=ue(d|0,y|0,(15-v|0)*3|0)|0,ot()|0,p=p&7,p|0){v=5;break}if(v>>>0<T>>>0)v=v+1|0;else{p=0,v=5;break}}return(v|0)==5?p|0:0}function od(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0;if(L=ue(d|0,y|0,52)|0,ot()|0,L=L&15,!L)return C=y,L=d,Ze(C|0),L|0;for(C=1,p=0;;){E=(15-C|0)*3|0,v=_e(7,0,E|0)|0,T=ot()|0,R=ue(d|0,y|0,E|0)|0,ot()|0,E=_e(El(R&7)|0,0,E|0)|0,R=ot()|0,d=E|d&~v,y=R|y&~T;t:do if(!p)if((E&v|0)==0&(R&T|0)==0)p=0;else if(v=ue(d|0,y|0,52)|0,ot()|0,v=v&15,!v)p=1;else{p=1;e:for(;;){switch(R=ue(d|0,y|0,(15-p|0)*3|0)|0,ot()|0,R&7){case 1:break e;case 0:break;default:{p=1;break t}}if(p>>>0<v>>>0)p=p+1|0;else{p=1;break t}}for(p=1;;)if(R=(15-p|0)*3|0,T=ue(d|0,y|0,R|0)|0,ot()|0,E=_e(7,0,R|0)|0,y=y&~(ot()|0),R=_e(El(T&7)|0,0,R|0)|0,d=d&~E|R,y=y|(ot()|0),p>>>0<v>>>0)p=p+1|0;else{p=1;break}}while(!1);if(C>>>0<L>>>0)C=C+1|0;else break}return Ze(y|0),d|0}function Uo(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0;if(v=ue(d|0,y|0,52)|0,ot()|0,v=v&15,!v)return p=y,v=d,Ze(p|0),v|0;for(p=1;E=(15-p|0)*3|0,R=ue(d|0,y|0,E|0)|0,ot()|0,T=_e(7,0,E|0)|0,y=y&~(ot()|0),E=_e(El(R&7)|0,0,E|0)|0,d=E|d&~T,y=ot()|0|y,p>>>0<v>>>0;)p=p+1|0;return Ze(y|0),d|0}function lS(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0;if(L=ue(d|0,y|0,52)|0,ot()|0,L=L&15,!L)return C=y,L=d,Ze(C|0),L|0;for(C=1,p=0;;){E=(15-C|0)*3|0,v=_e(7,0,E|0)|0,T=ot()|0,R=ue(d|0,y|0,E|0)|0,ot()|0,E=_e(to(R&7)|0,0,E|0)|0,R=ot()|0,d=E|d&~v,y=R|y&~T;t:do if(!p)if((E&v|0)==0&(R&T|0)==0)p=0;else if(v=ue(d|0,y|0,52)|0,ot()|0,v=v&15,!v)p=1;else{p=1;e:for(;;){switch(R=ue(d|0,y|0,(15-p|0)*3|0)|0,ot()|0,R&7){case 1:break e;case 0:break;default:{p=1;break t}}if(p>>>0<v>>>0)p=p+1|0;else{p=1;break t}}for(p=1;;)if(T=(15-p|0)*3|0,E=_e(7,0,T|0)|0,R=y&~(ot()|0),y=ue(d|0,y|0,T|0)|0,ot()|0,y=_e(to(y&7)|0,0,T|0)|0,d=d&~E|y,y=R|(ot()|0),p>>>0<v>>>0)p=p+1|0;else{p=1;break}}while(!1);if(C>>>0<L>>>0)C=C+1|0;else break}return Ze(y|0),d|0}function z0(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0;if(v=ue(d|0,y|0,52)|0,ot()|0,v=v&15,!v)return p=y,v=d,Ze(p|0),v|0;for(p=1;R=(15-p|0)*3|0,E=_e(7,0,R|0)|0,T=y&~(ot()|0),y=ue(d|0,y|0,R|0)|0,ot()|0,y=_e(to(y&7)|0,0,R|0)|0,d=y|d&~E,y=ot()|0|T,p>>>0<v>>>0;)p=p+1|0;return Ze(y|0),d|0}function cS(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;if(L=it,it=it+64|0,C=L+40|0,v=L+24|0,T=L+12|0,E=L,_e(y|0,0,52)|0,p=ot()|0|134225919,!y)return(g[d+4>>2]|0)>2||(g[d+8>>2]|0)>2||(g[d+12>>2]|0)>2?(R=0,C=0,Ze(R|0),it=L,C|0):(_e(Ju(d)|0,0,45)|0,R=ot()|0|p,C=-1,Ze(R|0),it=L,C|0);if(g[C>>2]=g[d>>2],g[C+4>>2]=g[d+4>>2],g[C+8>>2]=g[d+8>>2],g[C+12>>2]=g[d+12>>2],R=C+4|0,(y|0)>0)for(d=-1;g[v>>2]=g[R>>2],g[v+4>>2]=g[R+4>>2],g[v+8>>2]=g[R+8>>2],y&1?(QT(R),g[T>>2]=g[R>>2],g[T+4>>2]=g[R+4>>2],g[T+8>>2]=g[R+8>>2],kc(T)):(w1(R),g[T>>2]=g[R>>2],g[T+4>>2]=g[R+4>>2],g[T+8>>2]=g[R+8>>2],Il(T)),ah(v,T,E),Xn(E),W=(15-y|0)*3|0,z=_e(7,0,W|0)|0,p=p&~(ot()|0),W=_e(Ml(E)|0,0,W|0)|0,d=W|d&~z,p=ot()|0|p,(y|0)>1;)y=y+-1|0;else d=-1;t:do if((g[R>>2]|0)<=2&&(g[C+8>>2]|0)<=2&&(g[C+12>>2]|0)<=2){if(v=Ju(C)|0,y=_e(v|0,0,45)|0,y=y|d,d=ot()|0|p&-1040385,E=O0(C)|0,!(Sn(v)|0)){if((E|0)<=0)break;for(T=0;;){if(v=ue(y|0,d|0,52)|0,ot()|0,v=v&15,v)for(p=1;W=(15-p|0)*3|0,C=ue(y|0,d|0,W|0)|0,ot()|0,z=_e(7,0,W|0)|0,d=d&~(ot()|0),W=_e(El(C&7)|0,0,W|0)|0,y=y&~z|W,d=d|(ot()|0),p>>>0<v>>>0;)p=p+1|0;if(T=T+1|0,(T|0)==(E|0))break t}}T=ue(y|0,d|0,52)|0,ot()|0,T=T&15;e:do if(T){p=1;i:for(;;){switch(W=ue(y|0,d|0,(15-p|0)*3|0)|0,ot()|0,W&7){case 1:break i;case 0:break;default:break e}if(p>>>0<T>>>0)p=p+1|0;else break e}if(Tl(v,g[C>>2]|0)|0)for(p=1;C=(15-p|0)*3|0,z=_e(7,0,C|0)|0,W=d&~(ot()|0),d=ue(y|0,d|0,C|0)|0,ot()|0,d=_e(to(d&7)|0,0,C|0)|0,y=y&~z|d,d=W|(ot()|0),p>>>0<T>>>0;)p=p+1|0;else for(p=1;W=(15-p|0)*3|0,C=ue(y|0,d|0,W|0)|0,ot()|0,z=_e(7,0,W|0)|0,d=d&~(ot()|0),W=_e(El(C&7)|0,0,W|0)|0,y=y&~z|W,d=d|(ot()|0),p>>>0<T>>>0;)p=p+1|0}while(!1);if((E|0)>0){p=0;do y=od(y,d)|0,d=ot()|0,p=p+1|0;while((p|0)!=(E|0))}}else y=0,d=0;while(!1);return z=d,W=y,Ze(z|0),it=L,W|0}function Ms(d){return d=d|0,(d|0)%2|0|0}function V0(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0;return T=it,it=it+16|0,v=T,y>>>0>15?(v=4,it=T,v|0):(g[d+4>>2]&2146435072|0)==2146435072||(g[d+8+4>>2]&2146435072|0)==2146435072?(v=3,it=T,v|0):(sS(d,y,v),y=cS(v,y)|0,v=ot()|0,g[p>>2]=y,g[p+4>>2]=v,(y|0)==0&(v|0)==0&&ti(27795,27122,959,27145),v=0,it=T,v|0)}function xr(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0;if(T=p+4|0,E=ue(d|0,y|0,52)|0,ot()|0,E=E&15,R=ue(d|0,y|0,45)|0,ot()|0,v=(E|0)==0,Sn(R&127)|0){if(v)return R=1,R|0;v=1}else{if(v)return R=0,R|0;(g[T>>2]|0)==0&&(g[p+8>>2]|0)==0?v=(g[p+12>>2]|0)!=0&1:v=1}for(p=1;p&1?kc(T):Il(T),R=ue(d|0,y|0,(15-p|0)*3|0)|0,ot()|0,M1(T,R&7),p>>>0<E>>>0;)p=p+1|0;return v|0}function Ea(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;if(W=it,it=it+16|0,L=W,z=ue(d|0,y|0,45)|0,ot()|0,z=z&127,z>>>0>121)return g[p>>2]=0,g[p+4>>2]=0,g[p+8>>2]=0,g[p+12>>2]=0,z=5,it=W,z|0;t:do if((Sn(z)|0)!=0&&(E=ue(d|0,y|0,52)|0,ot()|0,E=E&15,(E|0)!=0)){v=1;e:for(;;){switch(C=ue(d|0,y|0,(15-v|0)*3|0)|0,ot()|0,C&7){case 5:break e;case 0:break;default:{v=y;break t}}if(v>>>0<E>>>0)v=v+1|0;else{v=y;break t}}for(T=1,v=y;y=(15-T|0)*3|0,R=_e(7,0,y|0)|0,C=v&~(ot()|0),v=ue(d|0,v|0,y|0)|0,ot()|0,v=_e(to(v&7)|0,0,y|0)|0,d=d&~R|v,v=C|(ot()|0),T>>>0<E>>>0;)T=T+1|0}else v=y;while(!1);if(C=7696+(z*28|0)|0,g[p>>2]=g[C>>2],g[p+4>>2]=g[C+4>>2],g[p+8>>2]=g[C+8>>2],g[p+12>>2]=g[C+12>>2],!(xr(d,v,p)|0))return z=0,it=W,z|0;if(R=p+4|0,g[L>>2]=g[R>>2],g[L+4>>2]=g[R+4>>2],g[L+8>>2]=g[R+8>>2],E=ue(d|0,v|0,52)|0,ot()|0,C=E&15,E&1?(Il(R),E=C+1|0):E=C,!(Sn(z)|0))v=0;else{t:do if(!C)v=0;else for(y=1;;){if(T=ue(d|0,v|0,(15-y|0)*3|0)|0,ot()|0,T=T&7,T|0){v=T;break t}if(y>>>0<C>>>0)y=y+1|0;else{v=0;break}}while(!1);v=(v|0)==4&1}if(!(Ol(p,E,v,0)|0))(E|0)!=(C|0)&&(g[R>>2]=g[L>>2],g[R+4>>2]=g[L+4>>2],g[R+8>>2]=g[L+8>>2]);else{if(Sn(z)|0)do;while((Ol(p,E,0,0)|0)!=0);(E|0)!=(C|0)&&w1(R)}return z=0,it=W,z|0}function ko(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0;return E=it,it=it+16|0,v=E,T=Ea(d,y,v)|0,T|0?(it=E,T|0):(T=ue(d|0,y|0,52)|0,ot()|0,oh(v,T&15,p),T=0,it=E,T|0)}function Rl(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0;if(R=it,it=it+16|0,E=R,v=Ea(d,y,E)|0,v|0)return E=v,it=R,E|0;v=ue(d|0,y|0,45)|0,ot()|0,v=(Sn(v&127)|0)==0,T=ue(d|0,y|0,52)|0,ot()|0,T=T&15;t:do if(!v){if(T|0)for(v=1;;){if(C=_e(7,0,(15-v|0)*3|0)|0,!((C&d|0)==0&((ot()|0)&y|0)==0))break t;if(v>>>0<T>>>0)v=v+1|0;else break}return x0(E,T,0,5,p),C=0,it=R,C|0}while(!1);return sd(E,T,0,6,p),C=0,it=R,C|0}function F1(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0;if(T=ue(d|0,y|0,45)|0,ot()|0,!(Sn(T&127)|0))return T=2,g[p>>2]=T,0;if(T=ue(d|0,y|0,52)|0,ot()|0,T=T&15,!T)return T=5,g[p>>2]=T,0;for(v=1;;){if(E=_e(7,0,(15-v|0)*3|0)|0,!((E&d|0)==0&((ot()|0)&y|0)==0)){v=2,d=6;break}if(v>>>0<T>>>0)v=v+1|0;else{v=5,d=6;break}}return(d|0)==6&&(g[p>>2]=v),0}function $0(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0;st=it,it=it+128|0,z=st+112|0,E=st+96|0,W=st,T=ue(d|0,y|0,52)|0,ot()|0,C=T&15,g[z>>2]=C,R=ue(d|0,y|0,45)|0,ot()|0,R=R&127;t:do if(Sn(R)|0){if(C|0)for(v=1;;){if(L=_e(7,0,(15-v|0)*3|0)|0,!((L&d|0)==0&((ot()|0)&y|0)==0)){T=0;break t}if(v>>>0<C>>>0)v=v+1|0;else break}if(T&1)T=1;else return L=_e(C+1|0,0,52)|0,W=ot()|0|y&-15728641,z=_e(7,0,(14-C|0)*3|0)|0,W=$0((L|d)&~z,W&~(ot()|0),p)|0,it=st,W|0}else T=0;while(!1);if(v=Ea(d,y,E)|0,!v){T?(N0(E,z,W),L=5):(F0(E,z,W),L=6);t:do if(Sn(R)|0)if(!C)d=5;else for(v=1;;){if(R=_e(7,0,(15-v|0)*3|0)|0,!((R&d|0)==0&((ot()|0)&y|0)==0)){d=2;break t}if(v>>>0<C>>>0)v=v+1|0;else{d=5;break}}else d=2;while(!1);xa(p|0,-1,d<<2|0)|0;t:do if(T)for(E=0;;){if(R=W+(E<<4)|0,D1(R,g[z>>2]|0)|0,R=g[R>>2]|0,C=g[p>>2]|0,(C|0)==-1|(C|0)==(R|0))v=p;else{T=0;do{if(T=T+1|0,T>>>0>=d>>>0){v=1;break t}v=p+(T<<2)|0,C=g[v>>2]|0}while(!((C|0)==-1|(C|0)==(R|0)))}if(g[v>>2]=R,E=E+1|0,E>>>0>=L>>>0){v=0;break}}else for(E=0;;){if(R=W+(E<<4)|0,Ol(R,g[z>>2]|0,0,1)|0,R=g[R>>2]|0,C=g[p>>2]|0,(C|0)==-1|(C|0)==(R|0))v=p;else{T=0;do{if(T=T+1|0,T>>>0>=d>>>0){v=1;break t}v=p+(T<<2)|0,C=g[v>>2]|0}while(!((C|0)==-1|(C|0)==(R|0)))}if(g[v>>2]=R,E=E+1|0,E>>>0>=L>>>0){v=0;break}}while(!1)}return W=v,it=st,W|0}function W0(){return 12}function H0(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0;if(d>>>0>15)return C=4,C|0;if(_e(d|0,0,52)|0,C=ot()|0|134225919,!d){p=0,v=0;do Sn(v)|0&&(_e(v|0,0,45)|0,R=C|(ot()|0),d=y+(p<<3)|0,g[d>>2]=-1,g[d+4>>2]=R,p=p+1|0),v=v+1|0;while((v|0)!=122);return p=0,p|0}p=0,R=0;do{if(Sn(R)|0){for(_e(R|0,0,45)|0,v=1,T=-1,E=C|(ot()|0);L=_e(7,0,(15-v|0)*3|0)|0,T=T&~L,E=E&~(ot()|0),(v|0)!=(d|0);)v=v+1|0;L=y+(p<<3)|0,g[L>>2]=T,g[L+4>>2]=E,p=p+1|0}R=R+1|0}while((R|0)!=122);return p=0,p|0}function Vc(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0;if($t=it,it=it+16|0,xt=$t,Qt=ue(d|0,y|0,52)|0,ot()|0,Qt=Qt&15,p>>>0>15)return Qt=4,it=$t,Qt|0;if((Qt|0)<(p|0))return Qt=12,it=$t,Qt|0;if((Qt|0)!=(p|0))if(E=_e(p|0,0,52)|0,E=E|d,C=ot()|0|y&-15728641,(Qt|0)>(p|0)){L=p;do It=_e(7,0,(14-L|0)*3|0)|0,L=L+1|0,E=It|E,C=ot()|0|C;while((L|0)<(Qt|0));It=E}else It=E;else It=d,C=y;gt=ue(It|0,C|0,45)|0,ot()|0;t:do if(Sn(gt&127)|0){if(L=ue(It|0,C|0,52)|0,ot()|0,L=L&15,L|0)for(E=1;;){if(gt=_e(7,0,(15-E|0)*3|0)|0,!((gt&It|0)==0&((ot()|0)&C|0)==0)){z=33;break t}if(E>>>0<L>>>0)E=E+1|0;else break}if(gt=v,g[gt>>2]=0,g[gt+4>>2]=0,(Qt|0)>(p|0)){for(gt=y&-15728641,At=Qt;;){if(pt=At,At=At+-1|0,At>>>0>15|(Qt|0)<(At|0)){z=19;break}if((Qt|0)!=(At|0))if(E=_e(At|0,0,52)|0,E=E|d,L=ot()|0|gt,(Qt|0)<(pt|0))st=E;else{z=At;do st=_e(7,0,(14-z|0)*3|0)|0,z=z+1|0,E=st|E,L=ot()|0|L;while((z|0)<(Qt|0));st=E}else st=d,L=y;if(W=ue(st|0,L|0,45)|0,ot()|0,!(Sn(W&127)|0))E=0;else{W=ue(st|0,L|0,52)|0,ot()|0,W=W&15;e:do if(!W)E=0;else for(z=1;;){if(E=ue(st|0,L|0,(15-z|0)*3|0)|0,ot()|0,E=E&7,E|0)break e;if(z>>>0<W>>>0)z=z+1|0;else{E=0;break}}while(!1);E=(E|0)==0&1}if(L=ue(d|0,y|0,(15-pt|0)*3|0)|0,ot()|0,L=L&7,(L|0)==7){T=5,z=42;break}if(E=(E|0)!=0,(L|0)==1&E){T=5,z=42;break}if(st=L+(((L|0)!=0&E)<<31>>31)|0,st|0&&(z=Qt-pt|0,z=Xs(7,0,z,((z|0)<0)<<31>>31)|0,W=ot()|0,E?(E=Un(z|0,W|0,5,0)|0,E=Pe(E|0,ot()|0,-5,-1)|0,E=Pa(E|0,ot()|0,6,0)|0,E=Pe(E|0,ot()|0,1,0)|0,L=ot()|0):(E=z,L=W),pt=st+-1|0,pt=Un(z|0,W|0,pt|0,((pt|0)<0)<<31>>31|0)|0,pt=Pe(E|0,L|0,pt|0,ot()|0)|0,st=ot()|0,W=v,W=Pe(pt|0,st|0,g[W>>2]|0,g[W+4>>2]|0)|0,st=ot()|0,pt=v,g[pt>>2]=W,g[pt+4>>2]=st),(At|0)<=(p|0)){z=37;break}}if((z|0)==19)ti(27795,27122,1276,27158);else if((z|0)==37){R=v,T=g[R+4>>2]|0,R=g[R>>2]|0;break}else if((z|0)==42)return it=$t,T|0}else T=0,R=0}else z=33;while(!1);t:do if((z|0)==33)if(gt=v,g[gt>>2]=0,g[gt+4>>2]=0,(Qt|0)>(p|0)){for(E=Qt;;){if(T=ue(d|0,y|0,(15-E|0)*3|0)|0,ot()|0,T=T&7,(T|0)==7){T=5;break}if(R=Qt-E|0,R=Xs(7,0,R,((R|0)<0)<<31>>31)|0,T=Un(R|0,ot()|0,T|0,0)|0,R=ot()|0,gt=v,R=Pe(g[gt>>2]|0,g[gt+4>>2]|0,T|0,R|0)|0,T=ot()|0,gt=v,g[gt>>2]=R,g[gt+4>>2]=T,E=E+-1|0,(E|0)<=(p|0))break t}return it=$t,T|0}else T=0,R=0;while(!1);return zc(It,C,Qt,xt)|0&&ti(27795,27122,1236,27173),Qt=xt,xt=g[Qt+4>>2]|0,((T|0)>-1|(T|0)==-1&R>>>0>4294967295)&((xt|0)>(T|0)|((xt|0)==(T|0)?(g[Qt>>2]|0)>>>0>R>>>0:0))?(Qt=0,it=$t,Qt|0):(ti(27795,27122,1316,27158),0)}function q0(d,y,p,v,T,E){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0,E=E|0;var R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0;if(st=it,it=it+16|0,R=st,T>>>0>15)return E=4,it=st,E|0;if(C=ue(p|0,v|0,52)|0,ot()|0,C=C&15,(C|0)>(T|0))return E=12,it=st,E|0;if(zc(p,v,T,R)|0&&ti(27795,27122,1236,27173),W=R,z=g[W+4>>2]|0,!(((y|0)>-1|(y|0)==-1&d>>>0>4294967295)&((z|0)>(y|0)|((z|0)==(y|0)?(g[W>>2]|0)>>>0>d>>>0:0))))return E=2,it=st,E|0;W=T-C|0,T=_e(T|0,0,52)|0,L=ot()|0|v&-15728641,z=E,g[z>>2]=T|p,g[z+4>>2]=L,z=ue(p|0,v|0,45)|0,ot()|0;t:do if(Sn(z&127)|0){if(C|0)for(R=1;;){if(z=_e(7,0,(15-R|0)*3|0)|0,!((z&p|0)==0&((ot()|0)&v|0)==0))break t;if(R>>>0<C>>>0)R=R+1|0;else break}if((W|0)<1)return E=0,it=st,E|0;for(z=C^15,v=-1,L=1,R=1;;){C=W-L|0,C=Xs(7,0,C,((C|0)<0)<<31>>31)|0,p=ot()|0;do if(R)if(R=Un(C|0,p|0,5,0)|0,R=Pe(R|0,ot()|0,-5,-1)|0,R=Pa(R|0,ot()|0,6,0)|0,T=ot()|0,(y|0)>(T|0)|(y|0)==(T|0)&d>>>0>R>>>0){y=Pe(d|0,y|0,-1,-1)|0,y=rr(y|0,ot()|0,R|0,T|0)|0,R=ot()|0,pt=E,gt=g[pt>>2]|0,pt=g[pt+4>>2]|0,It=(z+v|0)*3|0,At=_e(7,0,It|0)|0,pt=pt&~(ot()|0),v=Pa(y|0,R|0,C|0,p|0)|0,d=ot()|0,T=Pe(v|0,d|0,2,0)|0,It=_e(T|0,ot()|0,It|0)|0,pt=ot()|0|pt,T=E,g[T>>2]=It|gt&~At,g[T+4>>2]=pt,d=Un(v|0,d|0,C|0,p|0)|0,d=rr(y|0,R|0,d|0,ot()|0)|0,R=0,y=ot()|0;break}else{It=E,At=g[It>>2]|0,It=g[It+4>>2]|0,gt=_e(7,0,(z+v|0)*3|0)|0,It=It&~(ot()|0),R=E,g[R>>2]=At&~gt,g[R+4>>2]=It,R=1;break}else At=E,T=g[At>>2]|0,At=g[At+4>>2]|0,v=(z+v|0)*3|0,pt=_e(7,0,v|0)|0,At=At&~(ot()|0),It=Pa(d|0,y|0,C|0,p|0)|0,R=ot()|0,v=_e(It|0,R|0,v|0)|0,At=ot()|0|At,gt=E,g[gt>>2]=v|T&~pt,g[gt+4>>2]=At,R=Un(It|0,R|0,C|0,p|0)|0,d=rr(d|0,y|0,R|0,ot()|0)|0,R=0,y=ot()|0;while(!1);if((W|0)>(L|0))v=~L,L=L+1|0;else{y=0;break}}return it=st,y|0}while(!1);if((W|0)<1)return It=0,it=st,It|0;for(T=C^15,R=1;;)if(gt=W-R|0,gt=Xs(7,0,gt,((gt|0)<0)<<31>>31)|0,It=ot()|0,L=E,p=g[L>>2]|0,L=g[L+4>>2]|0,C=(T-R|0)*3|0,v=_e(7,0,C|0)|0,L=L&~(ot()|0),pt=Pa(d|0,y|0,gt|0,It|0)|0,At=ot()|0,C=_e(pt|0,At|0,C|0)|0,L=ot()|0|L,z=E,g[z>>2]=C|p&~v,g[z+4>>2]=L,It=Un(pt|0,At|0,gt|0,It|0)|0,d=rr(d|0,y|0,It|0,ot()|0)|0,y=ot()|0,(W|0)<=(R|0)){y=0;break}else R=R+1|0;return it=st,y|0}function Dl(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0;T=ue(y|0,p|0,52)|0,ot()|0,T=T&15,(y|0)==0&(p|0)==0|((v|0)>15|(T|0)>(v|0))?(E=-1,y=-1,p=0,T=0):(y=P1(y,p,T+1|0,v)|0,R=(ot()|0)&-15728641,p=_e(v|0,0,52)|0,p=y|p,R=R|(ot()|0),y=(tn(p,R)|0)==0,E=T,y=y?-1:v,T=R),R=d,g[R>>2]=p,g[R+4>>2]=T,g[d+8>>2]=E,g[d+12>>2]=y}function ld(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0;if(T=ue(d|0,y|0,52)|0,ot()|0,T=T&15,E=v+8|0,g[E>>2]=T,(d|0)==0&(y|0)==0|((p|0)>15|(T|0)>(p|0))){p=v,g[p>>2]=0,g[p+4>>2]=0,g[E>>2]=-1,g[v+12>>2]=-1;return}if(d=P1(d,y,T+1|0,p)|0,E=(ot()|0)&-15728641,T=_e(p|0,0,52)|0,T=d|T,E=E|(ot()|0),d=v,g[d>>2]=T,g[d+4>>2]=E,d=v+12|0,tn(T,E)|0){g[d>>2]=p;return}else{g[d>>2]=-1;return}}function cd(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0;if(p=d,y=g[p>>2]|0,p=g[p+4>>2]|0,!((y|0)==0&(p|0)==0)&&(v=ue(y|0,p|0,52)|0,ot()|0,v=v&15,C=_e(1,0,(v^15)*3|0)|0,y=Pe(C|0,ot()|0,y|0,p|0)|0,p=ot()|0,C=d,g[C>>2]=y,g[C+4>>2]=p,C=d+8|0,R=g[C>>2]|0,!((v|0)<(R|0)))){for(L=d+12|0,E=v;;){if((E|0)==(R|0)){v=5;break}if(z=(E|0)==(g[L>>2]|0),T=(15-E|0)*3|0,v=ue(y|0,p|0,T|0)|0,ot()|0,v=v&7,z&((v|0)==1&!0)){v=7;break}if(!((v|0)==7&!0)){v=10;break}if(z=_e(1,0,T|0)|0,y=Pe(y|0,p|0,z|0,ot()|0)|0,p=ot()|0,z=d,g[z>>2]=y,g[z+4>>2]=p,(E|0)>(R|0))E=E+-1|0;else{v=10;break}}if((v|0)==5){z=d,g[z>>2]=0,g[z+4>>2]=0,g[C>>2]=-1,g[L>>2]=-1;return}else if((v|0)==7){R=_e(1,0,T|0)|0,R=Pe(y|0,p|0,R|0,ot()|0)|0,C=ot()|0,z=d,g[z>>2]=R,g[z+4>>2]=C,g[L>>2]=E+-1;return}else if((v|0)==10)return}}function qs(d){d=+d;var y=0;return y=d<0?d+6.283185307179586:d,+(d>=6.283185307179586?y+-6.283185307179586:y)}function Ys(d,y){return d=d|0,y=y|0,+bi(+(+et[d>>3]-+et[y>>3]))<17453292519943298e-27?(y=+bi(+(+et[d+8>>3]-+et[y+8>>3]))<17453292519943298e-27,y|0):(y=0,y|0)}function Nr(d,y){switch(d=+d,y=y|0,y|0){case 1:{d=d<0?d+6.283185307179586:d;break}case 2:{d=d>0?d+-6.283185307179586:d;break}}return+d}function L1(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0;return T=+et[y>>3],v=+et[d>>3],E=+Xe(+((T-v)*.5)),p=+Xe(+((+et[y+8>>3]-+et[d+8>>3])*.5)),p=E*E+p*(+$i(+T)*+$i(+v)*p),+(+Ss(+ +ki(+p),+ +ki(+(1-p)))*2)}function Gs(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0;return T=+et[y>>3],v=+et[d>>3],E=+Xe(+((T-v)*.5)),p=+Xe(+((+et[y+8>>3]-+et[d+8>>3])*.5)),p=E*E+p*(+$i(+T)*+$i(+v)*p),+(+Ss(+ +ki(+p),+ +ki(+(1-p)))*2*6371.007180918475)}function U1(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0;return T=+et[y>>3],v=+et[d>>3],E=+Xe(+((T-v)*.5)),p=+Xe(+((+et[y+8>>3]-+et[d+8>>3])*.5)),p=E*E+p*(+$i(+T)*+$i(+v)*p),+(+Ss(+ +ki(+p),+ +ki(+(1-p)))*2*6371.007180918475*1e3)}function k1(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0;return E=+et[y>>3],v=+$i(+E),T=+et[y+8>>3]-+et[d+8>>3],R=v*+Xe(+T),p=+et[d>>3],+ +Ss(+R,+(+Xe(+E)*+$i(+p)-+$i(+T)*(v*+Xe(+p))))}function j1(d,y,p,v){d=d|0,y=+y,p=+p,v=v|0;var T=0,E=0,R=0,C=0;if(p<1e-16){g[v>>2]=g[d>>2],g[v+4>>2]=g[d+4>>2],g[v+8>>2]=g[d+8>>2],g[v+12>>2]=g[d+12>>2];return}E=y<0?y+6.283185307179586:y,E=y>=6.283185307179586?E+-6.283185307179586:E;do if(E<1e-16)y=+et[d>>3]+p,et[v>>3]=y,T=v;else{if(T=+bi(+(E+-3.141592653589793))<1e-16,y=+et[d>>3],T){y=y-p,et[v>>3]=y,T=v;break}if(R=+$i(+p),p=+Xe(+p),y=R*+Xe(+y)+ +$i(+E)*(p*+$i(+y)),y=y>1?1:y,y=+_l(+(y<-1?-1:y)),et[v>>3]=y,+bi(+(y+-1.5707963267948966))<1e-16){et[v>>3]=1.5707963267948966,et[v+8>>3]=0;return}if(+bi(+(y+1.5707963267948966))<1e-16){et[v>>3]=-1.5707963267948966,et[v+8>>3]=0;return}if(C=1/+$i(+y),E=p*+Xe(+E)*C,p=+et[d>>3],y=C*((R-+Xe(+y)*+Xe(+p))/+$i(+p)),R=E>1?1:E,y=y>1?1:y,y=+et[d+8>>3]+ +Ss(+(R<-1?-1:R),+(y<-1?-1:y)),y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);et[v+8>>3]=y;return}while(!1);if(+bi(+(y+-1.5707963267948966))<1e-16){et[T>>3]=1.5707963267948966,et[v+8>>3]=0;return}if(+bi(+(y+1.5707963267948966))<1e-16){et[T>>3]=-1.5707963267948966,et[v+8>>3]=0;return}if(y=+et[d+8>>3],y>3.141592653589793)do y=y+-6.283185307179586;while(y>3.141592653589793);if(y<-3.141592653589793)do y=y+6.283185307179586;while(y<-3.141592653589793);et[v+8>>3]=y}function z1(d,y){return d=d|0,y=y|0,d>>>0>15?(y=4,y|0):(et[y>>3]=+et[20656+(d<<3)>>3],y=0,y|0)}function uS(d,y){return d=d|0,y=y|0,d>>>0>15?(y=4,y|0):(et[y>>3]=+et[20784+(d<<3)>>3],y=0,y|0)}function hS(d,y){return d=d|0,y=y|0,d>>>0>15?(y=4,y|0):(et[y>>3]=+et[20912+(d<<3)>>3],y=0,y|0)}function V1(d,y){return d=d|0,y=y|0,d>>>0>15?(y=4,y|0):(et[y>>3]=+et[21040+(d<<3)>>3],y=0,y|0)}function ud(d,y){d=d|0,y=y|0;var p=0;return d>>>0>15?(y=4,y|0):(p=Xs(7,0,d,((d|0)<0)<<31>>31)|0,p=Un(p|0,ot()|0,120,0)|0,d=ot()|0,g[y>>2]=p|2,g[y+4>>2]=d,y=0,y|0)}function hd(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0;return pt=+et[y>>3],W=+et[d>>3],L=+Xe(+((pt-W)*.5)),E=+et[y+8>>3],z=+et[d+8>>3],R=+Xe(+((E-z)*.5)),C=+$i(+W),st=+$i(+pt),R=L*L+R*(st*C*R),R=+Ss(+ +ki(+R),+ +ki(+(1-R)))*2,L=+et[p>>3],pt=+Xe(+((L-pt)*.5)),v=+et[p+8>>3],E=+Xe(+((v-E)*.5)),T=+$i(+L),E=pt*pt+E*(st*T*E),E=+Ss(+ +ki(+E),+ +ki(+(1-E)))*2,L=+Xe(+((W-L)*.5)),v=+Xe(+((z-v)*.5)),v=L*L+v*(C*T*v),v=+Ss(+ +ki(+v),+ +ki(+(1-v)))*2,T=(R+E+v)*.5,+(+Lo(+ +ki(+(+cs(+(T*.5))*+cs(+((T-R)*.5))*+cs(+((T-E)*.5))*+cs(+((T-v)*.5)))))*4)}function hs(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0;if(C=it,it=it+192|0,E=C+168|0,R=C,T=ko(d,y,E)|0,T|0)return p=T,it=C,p|0;if(Rl(d,y,R)|0&&ti(27795,27190,415,27199),y=g[R>>2]|0,(y|0)>0){if(v=+hd(R+8|0,R+8+(((y|0)!=1&1)<<4)|0,E)+0,(y|0)!=1){d=1;do T=d,d=d+1|0,v=v+ +hd(R+8+(T<<4)|0,R+8+(((d|0)%(y|0)|0)<<4)|0,E);while((d|0)<(y|0))}}else v=0;return et[p>>3]=v,p=0,it=C,p|0}function $1(d,y,p){return d=d|0,y=y|0,p=p|0,d=hs(d,y,p)|0,d|0||(et[p>>3]=+et[p>>3]*6371.007180918475*6371.007180918475),d|0}function Is(d,y,p){return d=d|0,y=y|0,p=p|0,d=hs(d,y,p)|0,d|0||(et[p>>3]=+et[p>>3]*6371.007180918475*6371.007180918475*1e3*1e3),d|0}function Es(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;if(C=it,it=it+176|0,R=C,d=rd(d,y,R)|0,d|0)return R=d,it=C,R|0;if(et[p>>3]=0,d=g[R>>2]|0,(d|0)<=1)return R=0,it=C,R|0;y=d+-1|0,d=0,v=+et[R+8>>3],T=+et[R+16>>3],E=0;do d=d+1|0,z=v,v=+et[R+8+(d<<4)>>3],W=+Xe(+((v-z)*.5)),L=T,T=+et[R+8+(d<<4)+8>>3],L=+Xe(+((T-L)*.5)),L=W*W+L*(+$i(+v)*+$i(+z)*L),E=E+ +Ss(+ +ki(+L),+ +ki(+(1-L)))*2;while((d|0)<(y|0));return et[p>>3]=E,R=0,it=C,R|0}function $c(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;if(C=it,it=it+176|0,R=C,d=rd(d,y,R)|0,d|0)return R=d,E=+et[p>>3],E=E*6371.007180918475,et[p>>3]=E,it=C,R|0;if(et[p>>3]=0,d=g[R>>2]|0,(d|0)<=1)return R=0,E=0,E=E*6371.007180918475,et[p>>3]=E,it=C,R|0;y=d+-1|0,d=0,v=+et[R+8>>3],T=+et[R+16>>3],E=0;do d=d+1|0,z=v,v=+et[R+8+(d<<4)>>3],W=+Xe(+((v-z)*.5)),L=T,T=+et[R+8+(d<<4)+8>>3],L=+Xe(+((T-L)*.5)),L=W*W+L*(+$i(+z)*+$i(+v)*L),E=E+ +Ss(+ +ki(+L),+ +ki(+(1-L)))*2;while((d|0)!=(y|0));return et[p>>3]=E,R=0,W=E,W=W*6371.007180918475,et[p>>3]=W,it=C,R|0}function Y0(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;if(C=it,it=it+176|0,R=C,d=rd(d,y,R)|0,d|0)return R=d,E=+et[p>>3],E=E*6371.007180918475,E=E*1e3,et[p>>3]=E,it=C,R|0;if(et[p>>3]=0,d=g[R>>2]|0,(d|0)<=1)return R=0,E=0,E=E*6371.007180918475,E=E*1e3,et[p>>3]=E,it=C,R|0;y=d+-1|0,d=0,v=+et[R+8>>3],T=+et[R+16>>3],E=0;do d=d+1|0,z=v,v=+et[R+8+(d<<4)>>3],W=+Xe(+((v-z)*.5)),L=T,T=+et[R+8+(d<<4)+8>>3],L=+Xe(+((T-L)*.5)),L=W*W+L*(+$i(+z)*+$i(+v)*L),E=E+ +Ss(+ +ki(+L),+ +ki(+(1-L)))*2;while((d|0)!=(y|0));return et[p>>3]=E,R=0,W=E,W=W*6371.007180918475,W=W*1e3,et[p>>3]=W,it=C,R|0}function fd(d){d=d|0;var y=0,p=0,v=0;return y=Os(1,12)|0,y||ti(27280,27235,49,27293),p=d+4|0,v=g[p>>2]|0,v|0?(v=v+8|0,g[v>>2]=y,g[p>>2]=y,y|0):(g[d>>2]|0&&ti(27310,27235,61,27333),v=d,g[v>>2]=y,g[p>>2]=y,y|0)}function dd(d,y){d=d|0,y=y|0;var p=0,v=0;return v=Ca(24)|0,v||ti(27347,27235,78,27361),g[v>>2]=g[y>>2],g[v+4>>2]=g[y+4>>2],g[v+8>>2]=g[y+8>>2],g[v+12>>2]=g[y+12>>2],g[v+16>>2]=0,y=d+4|0,p=g[y>>2]|0,p|0?(g[p+16>>2]=v,g[y>>2]=v,v|0):(g[d>>2]|0&&ti(27376,27235,82,27361),g[d>>2]=v,g[y>>2]=v,v|0)}function Ad(d){d=d|0;var y=0,p=0,v=0,T=0;if(d)for(v=1;;){if(y=g[d>>2]|0,y|0)do{if(p=g[y>>2]|0,p|0)do T=p,p=g[p+16>>2]|0,Je(T);while((p|0)!=0);T=y,y=g[y+8>>2]|0,Je(T)}while((y|0)!=0);if(y=d,d=g[d+8>>2]|0,v||Je(y),d)v=0;else break}}function Wc(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0,Ce=0,We=0,Ni=0,Qe=0,Ve=0,ye=0,vi=0,Ki=0,Ii=0;if(T=d+8|0,g[T>>2]|0)return Ii=1,Ii|0;if(v=g[d>>2]|0,!v)return Ii=0,Ii|0;y=v,p=0;do p=p+1|0,y=g[y+8>>2]|0;while((y|0)!=0);if(p>>>0<2)return Ii=0,Ii|0;vi=Ca(p<<2)|0,vi||ti(27396,27235,317,27415),ye=Ca(p<<5)|0,ye||ti(27437,27235,321,27415),g[d>>2]=0,ze=d+4|0,g[ze>>2]=0,g[T>>2]=0,p=0,Ve=0,ve=0,st=0;t:for(;;){if(W=g[v>>2]|0,W){E=0,R=W;do{if(L=+et[R+8>>3],y=R,R=g[R+16>>2]|0,z=(R|0)==0,T=z?W:R,C=+et[T+8>>3],+bi(+(L-C))>3.141592653589793){Ii=14;break}E=E+(C-L)*(+et[y>>3]+ +et[T>>3])}while(!z);if((Ii|0)==14){Ii=0,E=0,y=W;do Et=+et[y+8>>3],Qe=y+16|0,Ni=g[Qe>>2]|0,Ni=(Ni|0)==0?W:Ni,zt=+et[Ni+8>>3],E=E+(+et[y>>3]+ +et[Ni>>3])*((zt<0?zt+6.283185307179586:zt)-(Et<0?Et+6.283185307179586:Et)),y=g[((y|0)==0?v:Qe)>>2]|0;while((y|0)!=0)}E>0?(g[vi+(Ve<<2)>>2]=v,Ve=Ve+1|0,T=ve,y=st):Ii=19}else Ii=19;if((Ii|0)==19){Ii=0;do if(p){if(y=p+8|0,g[y>>2]|0){Ii=21;break t}if(p=Os(1,12)|0,!p){Ii=23;break t}g[y>>2]=p,T=p+4|0,R=p,y=st}else if(st){T=ze,R=st+8|0,y=v,p=d;break}else if(g[d>>2]|0){Ii=27;break t}else{T=ze,R=d,y=v,p=d;break}while(!1);if(g[R>>2]=v,g[T>>2]=v,R=ye+(ve<<5)|0,z=g[v>>2]|0,z){for(W=ye+(ve<<5)+8|0,et[W>>3]=17976931348623157e292,st=ye+(ve<<5)+24|0,et[st>>3]=17976931348623157e292,et[R>>3]=-17976931348623157e292,pt=ye+(ve<<5)+16|0,et[pt>>3]=-17976931348623157e292,Qt=17976931348623157e292,$t=-17976931348623157e292,T=0,At=z,L=17976931348623157e292,It=17976931348623157e292,xt=-17976931348623157e292,C=-17976931348623157e292;E=+et[At>>3],Et=+et[At+8>>3],At=g[At+16>>2]|0,gt=(At|0)==0,zt=+et[(gt?z:At)+8>>3],E<L&&(et[W>>3]=E,L=E),Et<It&&(et[st>>3]=Et,It=Et),E>xt?et[R>>3]=E:E=xt,Et>C&&(et[pt>>3]=Et,C=Et),Qt=Et>0&Et<Qt?Et:Qt,$t=Et<0&Et>$t?Et:$t,T=T|+bi(+(Et-zt))>3.141592653589793,!gt;)xt=E;T&&(et[pt>>3]=$t,et[st>>3]=Qt)}else g[R>>2]=0,g[R+4>>2]=0,g[R+8>>2]=0,g[R+12>>2]=0,g[R+16>>2]=0,g[R+20>>2]=0,g[R+24>>2]=0,g[R+28>>2]=0;T=ve+1|0}if(Qe=v+8|0,v=g[Qe>>2]|0,g[Qe>>2]=0,v)ve=T,st=y;else{Ii=45;break}}if((Ii|0)==21)ti(27213,27235,35,27247);else if((Ii|0)==23)ti(27267,27235,37,27247);else if((Ii|0)==27)ti(27310,27235,61,27333);else if((Ii|0)==45){t:do if((Ve|0)>0){for(Qe=(T|0)==0,We=T<<2,Ni=(d|0)==0,Ce=0,y=0;;){if(fe=g[vi+(Ce<<2)>>2]|0,Qe)Ii=73;else{if(ve=Ca(We)|0,!ve){Ii=50;break}if(ze=Ca(We)|0,!ze){Ii=52;break}e:do if(Ni)p=0;else{for(T=0,p=0,R=d;v=ye+(T<<5)|0,G0(g[R>>2]|0,v,g[fe>>2]|0)|0?(g[ve+(p<<2)>>2]=R,g[ze+(p<<2)>>2]=v,gt=p+1|0):gt=p,R=g[R+8>>2]|0,R;)T=T+1|0,p=gt;if((gt|0)>0)if(v=g[ve>>2]|0,(gt|0)==1)p=v;else for(pt=0,At=-1,p=v,st=v;;){for(z=g[st>>2]|0,v=0,R=0;T=g[g[ve+(R<<2)>>2]>>2]|0,(T|0)==(z|0)?W=v:W=v+((G0(T,g[ze+(R<<2)>>2]|0,g[z>>2]|0)|0)&1)|0,R=R+1|0,(R|0)!=(gt|0);)v=W;if(T=(W|0)>(At|0),p=T?st:p,v=pt+1|0,(v|0)==(gt|0))break e;pt=v,At=T?W:At,st=g[ve+(v<<2)>>2]|0}else p=0}while(!1);if(Je(ve),Je(ze),p){if(T=p+4|0,v=g[T>>2]|0,v)p=v+8|0;else if(g[p>>2]|0){Ii=70;break}g[p>>2]=fe,g[T>>2]=fe}else Ii=73}if((Ii|0)==73){if(Ii=0,y=g[fe>>2]|0,y|0)do ze=y,y=g[y+16>>2]|0,Je(ze);while((y|0)!=0);Je(fe),y=1}if(Ce=Ce+1|0,(Ce|0)>=(Ve|0)){Ki=y;break t}}(Ii|0)==50?ti(27452,27235,249,27471):(Ii|0)==52?ti(27490,27235,252,27471):(Ii|0)==70&&ti(27310,27235,61,27333)}else Ki=0;while(!1);return Je(vi),Je(ye),Ii=Ki,Ii|0}return 0}function G0(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0;if(!(Ia(y,p)|0)||(y=td(y)|0,v=+et[p>>3],T=+et[p+8>>3],T=y&T<0?T+6.283185307179586:T,d=g[d>>2]|0,!d))return d=0,d|0;if(y){y=0,z=T,p=d;t:for(;;){for(;R=+et[p>>3],T=+et[p+8>>3],p=p+16|0,W=g[p>>2]|0,W=(W|0)==0?d:W,E=+et[W>>3],C=+et[W+8>>3],R>E?(L=R,R=C):(L=E,E=R,R=T,T=C),v=v==E|v==L?v+2220446049250313e-31:v,!!(v<E|v>L);)if(p=g[p>>2]|0,!p){p=22;break t}if(C=R<0?R+6.283185307179586:R,R=T<0?T+6.283185307179586:T,z=C==z|R==z?z+-2220446049250313e-31:z,L=C+(R-C)*((v-E)/(L-E)),(L<0?L+6.283185307179586:L)>z&&(y=y^1),p=g[p>>2]|0,!p){p=22;break}}if((p|0)==22)return y|0}else{y=0,z=T,p=d;t:for(;;){for(;R=+et[p>>3],T=+et[p+8>>3],p=p+16|0,W=g[p>>2]|0,W=(W|0)==0?d:W,E=+et[W>>3],C=+et[W+8>>3],R>E?(L=R,R=C):(L=E,E=R,R=T,T=C),v=v==E|v==L?v+2220446049250313e-31:v,!!(v<E|v>L);)if(p=g[p>>2]|0,!p){p=22;break t}if(z=R==z|T==z?z+-2220446049250313e-31:z,R+(T-R)*((v-E)/(L-E))>z&&(y=y^1),p=g[p>>2]|0,!p){p=22;break}}if((p|0)==22)return y|0}return 0}function Bs(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0;if($t=it,it=it+32|0,Qt=$t+16|0,xt=$t,E=ue(d|0,y|0,52)|0,ot()|0,E=E&15,At=ue(p|0,v|0,52)|0,ot()|0,(E|0)!=(At&15|0))return Qt=12,it=$t,Qt|0;if(z=ue(d|0,y|0,45)|0,ot()|0,z=z&127,W=ue(p|0,v|0,45)|0,ot()|0,W=W&127,z>>>0>121|W>>>0>121)return Qt=5,it=$t,Qt|0;if(At=(z|0)!=(W|0),At){if(C=th(z,W)|0,(C|0)==7)return Qt=1,it=$t,Qt|0;L=th(W,z)|0,(L|0)==7?ti(27514,27538,161,27548):(gt=C,R=L)}else gt=0,R=0;st=Sn(z)|0,pt=Sn(W)|0,g[Qt>>2]=0,g[Qt+4>>2]=0,g[Qt+8>>2]=0,g[Qt+12>>2]=0;do if(gt){if(W=g[4272+(z*28|0)+(gt<<2)>>2]|0,C=(W|0)>0,pt)if(C){z=0,L=p,C=v;do L=lS(L,C)|0,C=ot()|0,R=to(R)|0,(R|0)==1&&(R=to(1)|0),z=z+1|0;while((z|0)!=(W|0));W=R,z=L,L=C}else W=R,z=p,L=v;else if(C){z=0,L=p,C=v;do L=z0(L,C)|0,C=ot()|0,R=to(R)|0,z=z+1|0;while((z|0)!=(W|0));W=R,z=L,L=C}else W=R,z=p,L=v;if(xr(z,L,Qt)|0,At||ti(27563,27538,191,27548),C=(st|0)!=0,R=(pt|0)!=0,C&R&&ti(27590,27538,192,27548),C){if(R=Pr(d,y)|0,(R|0)==7){E=5;break}if(ce[22e3+(R*7|0)+gt>>0]|0){E=1;break}L=g[21168+(R*28|0)+(gt<<2)>>2]|0,z=L}else if(R){if(R=Pr(z,L)|0,(R|0)==7){E=5;break}if(ce[22e3+(R*7|0)+W>>0]|0){E=1;break}z=0,L=g[21168+(W*28|0)+(R<<2)>>2]|0}else z=0,L=0;if((z|L|0)<0)E=5;else{if((L|0)>0){C=Qt+4|0,R=0;do nd(C),R=R+1|0;while((R|0)!=(L|0))}if(g[xt>>2]=0,g[xt+4>>2]=0,g[xt+8>>2]=0,M1(xt,gt),E|0)for(;Ms(E)|0?kc(xt):Il(xt),(E|0)>1;)E=E+-1|0;if((z|0)>0){E=0;do nd(xt),E=E+1|0;while((E|0)!=(z|0))}It=Qt+4|0,yr(It,xt,It),Xn(It),It=51}}else if(xr(p,v,Qt)|0,(st|0)!=0&(pt|0)!=0)if((W|0)!=(z|0)&&ti(27621,27538,261,27548),R=Pr(d,y)|0,E=Pr(p,v)|0,(R|0)==7|(E|0)==7)E=5;else if(ce[22e3+(R*7|0)+E>>0]|0)E=1;else if(R=g[21168+(R*28|0)+(E<<2)>>2]|0,(R|0)>0){C=Qt+4|0,E=0;do nd(C),E=E+1|0;while((E|0)!=(R|0));It=51}else It=51;else It=51;while(!1);return(It|0)==51&&(E=Qt+4|0,g[T>>2]=g[E>>2],g[T+4>>2]=g[E+4>>2],g[T+8>>2]=g[E+8>>2],E=0),Qt=E,it=$t,Qt|0}function Cl(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0;if(It=it,it=it+48|0,z=It+36|0,R=It+24|0,C=It+12|0,L=It,T=ue(d|0,y|0,52)|0,ot()|0,T=T&15,pt=ue(d|0,y|0,45)|0,ot()|0,pt=pt&127,pt>>>0>121)return v=5,it=It,v|0;if(W=Sn(pt)|0,_e(T|0,0,52)|0,xt=ot()|0|134225919,E=v,g[E>>2]=-1,g[E+4>>2]=xt,!T)return T=Ml(p)|0,(T|0)==7||(T=Jf(pt,T)|0,(T|0)==127)?(xt=1,it=It,xt|0):(At=_e(T|0,0,45)|0,gt=ot()|0,pt=v,gt=g[pt+4>>2]&-1040385|gt,xt=v,g[xt>>2]=g[pt>>2]|At,g[xt+4>>2]=gt,xt=0,it=It,xt|0);for(g[z>>2]=g[p>>2],g[z+4>>2]=g[p+4>>2],g[z+8>>2]=g[p+8>>2],p=T;;){if(E=p,p=p+-1|0,g[R>>2]=g[z>>2],g[R+4>>2]=g[z+4>>2],g[R+8>>2]=g[z+8>>2],Ms(E)|0){if(T=S1(z)|0,T|0){p=13;break}g[C>>2]=g[z>>2],g[C+4>>2]=g[z+4>>2],g[C+8>>2]=g[z+8>>2],kc(C)}else{if(T=XT(z)|0,T|0){p=13;break}g[C>>2]=g[z>>2],g[C+4>>2]=g[z+4>>2],g[C+8>>2]=g[z+8>>2],Il(C)}if(ah(R,C,L),Xn(L),T=v,$t=g[T>>2]|0,T=g[T+4>>2]|0,zt=(15-E|0)*3|0,Qt=_e(7,0,zt|0)|0,T=T&~(ot()|0),zt=_e(Ml(L)|0,0,zt|0)|0,T=ot()|0|T,xt=v,g[xt>>2]=zt|$t&~Qt,g[xt+4>>2]=T,(E|0)<=1){p=14;break}}t:do if((p|0)!=13&&(p|0)==14)if((g[z>>2]|0)<=1&&(g[z+4>>2]|0)<=1&&(g[z+8>>2]|0)<=1){p=Ml(z)|0,T=Jf(pt,p)|0,(T|0)==127?L=0:L=Sn(T)|0;e:do if(p){if(W){if(T=Pr(d,y)|0,(T|0)==7){T=5;break t}if(E=g[21376+(T*28|0)+(p<<2)>>2]|0,(E|0)>0){T=p,p=0;do T=El(T)|0,p=p+1|0;while((p|0)!=(E|0))}else T=p;if((T|0)==1){T=9;break t}p=Jf(pt,T)|0,(p|0)==127&&ti(27648,27538,411,27678),Sn(p)|0?ti(27693,27538,412,27678):(gt=p,At=E,st=T)}else gt=T,At=0,st=p;if(C=g[4272+(pt*28|0)+(st<<2)>>2]|0,(C|0)<=-1&&ti(27724,27538,419,27678),!L){if((At|0)<0){T=5;break t}if(At|0){E=v,T=0,p=g[E>>2]|0,E=g[E+4>>2]|0;do p=Uo(p,E)|0,E=ot()|0,zt=v,g[zt>>2]=p,g[zt+4>>2]=E,T=T+1|0;while((T|0)<(At|0))}if((C|0)<=0){T=gt,p=58;break}for(E=v,T=0,p=g[E>>2]|0,E=g[E+4>>2]|0;;)if(p=Uo(p,E)|0,E=ot()|0,zt=v,g[zt>>2]=p,g[zt+4>>2]=E,T=T+1|0,(T|0)==(C|0)){T=gt,p=58;break e}}if(R=th(gt,pt)|0,(R|0)==7&&ti(27514,27538,428,27678),T=v,p=g[T>>2]|0,T=g[T+4>>2]|0,(C|0)>0){E=0;do p=Uo(p,T)|0,T=ot()|0,zt=v,g[zt>>2]=p,g[zt+4>>2]=T,E=E+1|0;while((E|0)!=(C|0))}if(T=Pr(p,T)|0,(T|0)==7&&ti(27795,27538,440,27678),p=B0(gt)|0,p=g[(p?21792:21584)+(R*28|0)+(T<<2)>>2]|0,(p|0)<0&&ti(27795,27538,454,27678),!p)T=gt,p=58;else{R=v,T=0,E=g[R>>2]|0,R=g[R+4>>2]|0;do E=od(E,R)|0,R=ot()|0,zt=v,g[zt>>2]=E,g[zt+4>>2]=R,T=T+1|0;while((T|0)<(p|0));T=gt,p=58}}else if((W|0)!=0&(L|0)!=0){if(p=Pr(d,y)|0,E=v,E=Pr(g[E>>2]|0,g[E+4>>2]|0)|0,(p|0)==7|(E|0)==7){T=5;break t}if(E=g[21376+(p*28|0)+(E<<2)>>2]|0,(E|0)<0){T=5;break t}if(!E)p=59;else{C=v,p=0,R=g[C>>2]|0,C=g[C+4>>2]|0;do R=Uo(R,C)|0,C=ot()|0,zt=v,g[zt>>2]=R,g[zt+4>>2]=C,p=p+1|0;while((p|0)<(E|0));p=58}}else p=58;while(!1);if((p|0)==58&&L&&(p=59),(p|0)==59&&(zt=v,(Pr(g[zt>>2]|0,g[zt+4>>2]|0)|0)==1)){T=9;break}zt=v,Qt=g[zt>>2]|0,zt=g[zt+4>>2]&-1040385,$t=_e(T|0,0,45)|0,zt=zt|(ot()|0),T=v,g[T>>2]=Qt|$t,g[T+4>>2]=zt,T=0}else T=1;while(!1);return zt=T,it=It,zt|0}function fS(d,y,p,v,T,E){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0,E=E|0;var R=0,C=0;return C=it,it=it+16|0,R=C,T?d=15:(d=Bs(d,y,p,v,R)|0,d||(KT(R,E),d=0)),it=C,d|0}function fs(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0;return R=it,it=it+16|0,E=R,v?p=15:(p=P0(p,E)|0,p||(p=Cl(d,y,E,T)|0)),it=R,p|0}function X0(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0;return L=it,it=it+32|0,R=L+12|0,C=L,E=Bs(d,y,d,y,R)|0,E|0?(C=E,it=L,C|0):(d=Bs(d,y,p,v,C)|0,d|0?(C=d,it=L,C|0):(R=C0(R,C)|0,C=T,g[C>>2]=R,g[C+4>>2]=((R|0)<0)<<31>>31,C=0,it=L,C|0))}function eo(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0;return L=it,it=it+32|0,R=L+12|0,C=L,E=Bs(d,y,d,y,R)|0,!E&&(E=Bs(d,y,p,v,C)|0,!E)?(v=C0(R,C)|0,v=Pe(v|0,((v|0)<0)<<31>>31|0,1,0)|0,R=ot()|0,C=T,g[C>>2]=v,g[C+4>>2]=R,C=0,it=L,C|0):(C=E,it=L,C|0)}function W1(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0,Ce=0;if(fe=it,it=it+48|0,ve=fe+24|0,R=fe+12|0,ze=fe,E=Bs(d,y,d,y,ve)|0,!E&&(E=Bs(d,y,p,v,R)|0,!E)){zt=C0(ve,R)|0,Et=((zt|0)<0)<<31>>31,g[ve>>2]=0,g[ve+4>>2]=0,g[ve+8>>2]=0,g[R>>2]=0,g[R+4>>2]=0,g[R+8>>2]=0,Bs(d,y,d,y,ve)|0&&ti(27795,27538,692,27747),Bs(d,y,p,v,R)|0&&ti(27795,27538,697,27747),O1(ve),O1(R),W=(zt|0)==0?0:1/+(zt|0),p=g[ve>>2]|0,It=W*+((g[R>>2]|0)-p|0),xt=ve+4|0,v=g[xt>>2]|0,Qt=W*+((g[R+4>>2]|0)-v|0),$t=ve+8|0,E=g[$t>>2]|0,W=W*+((g[R+8>>2]|0)-E|0),g[ze>>2]=p,st=ze+4|0,g[st>>2]=v,pt=ze+8|0,g[pt>>2]=E;t:do if((zt|0)<0)E=0;else for(At=0,gt=0;;){L=+(gt>>>0)+4294967296*+(At|0),Ce=It*L+ +(p|0),C=Qt*L+ +(v|0),L=W*L+ +(E|0),p=~~+Vo(+Ce),R=~~+Vo(+C),E=~~+Vo(+L),Ce=+bi(+(+(p|0)-Ce)),C=+bi(+(+(R|0)-C)),L=+bi(+(+(E|0)-L));do if(Ce>C&Ce>L)p=0-(R+E)|0,v=R;else if(z=0-p|0,C>L){v=z-E|0;break}else{v=R,E=z-R|0;break}while(!1);if(g[ze>>2]=p,g[st>>2]=v,g[pt>>2]=E,ZT(ze),E=Cl(d,y,ze,T+(gt<<3)|0)|0,E|0)break t;if(!((At|0)<(Et|0)|(At|0)==(Et|0)&gt>>>0<zt>>>0)){E=0;break t}p=Pe(gt|0,At|0,1,0)|0,v=ot()|0,At=v,gt=p,p=g[ve>>2]|0,v=g[xt>>2]|0,E=g[$t>>2]|0}while(!1);return ze=E,it=fe,ze|0}return ze=E,it=fe,ze|0}function Xs(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0;if((p|0)==0&(v|0)==0)return T=0,E=1,Ze(T|0),E|0;E=d,T=y,d=1,y=0;do R=(p&1|0)==0&!0,d=Un((R?1:E)|0,(R?0:T)|0,d|0,y|0)|0,y=ot()|0,p=q1(p|0,v|0,1)|0,v=ot()|0,E=Un(E|0,T|0,E|0,T|0)|0,T=ot()|0;while(!((p|0)==0&(v|0)==0));return Ze(y|0),d|0}function io(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0;C=it,it=it+16|0,E=C,R=ue(d|0,y|0,52)|0,ot()|0,R=R&15;do if(R){if(T=ko(d,y,E)|0,!T){z=+et[E>>3],L=1/+$i(+z),W=+et[25968+(R<<3)>>3],et[p>>3]=z+W,et[p+8>>3]=z-W,z=+et[E+8>>3],L=W*L,et[p+16>>3]=L+z,et[p+24>>3]=z-L;break}return R=T,it=C,R|0}else{if(T=ue(d|0,y|0,45)|0,ot()|0,T=T&127,T>>>0>121)return R=5,it=C,R|0;E=22064+(T<<5)|0,g[p>>2]=g[E>>2],g[p+4>>2]=g[E+4>>2],g[p+8>>2]=g[E+8>>2],g[p+12>>2]=g[E+12>>2],g[p+16>>2]=g[E+16>>2],g[p+20>>2]=g[E+20>>2],g[p+24>>2]=g[E+24>>2],g[p+28>>2]=g[E+28>>2];break}while(!1);return Zr(p,v?1.4:1.1),v=26096+(R<<3)|0,(g[v>>2]|0)==(d|0)&&(g[v+4>>2]|0)==(y|0)&&(et[p>>3]=1.5707963267948966),R=26224+(R<<3)|0,(g[R>>2]|0)==(d|0)&&(g[R+4>>2]|0)==(y|0)&&(et[p+8>>3]=-1.5707963267948966),+et[p>>3]!=1.5707963267948966&&+et[p+8>>3]!=-1.5707963267948966?(R=0,it=C,R|0):(et[p+16>>3]=3.141592653589793,et[p+24>>3]=-3.141592653589793,R=0,it=C,R|0)}function Q0(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0;z=it,it=it+48|0,R=z+32|0,E=z+40|0,C=z,U0(R,0,0,0),L=g[R>>2]|0,R=g[R+4>>2]|0;do if(p>>>0<=15){if(T=wr(v)|0,T|0){v=C,g[v>>2]=0,g[v+4>>2]=0,g[C+8>>2]=T,g[C+12>>2]=-1,v=C+16|0,L=C+29|0,g[v>>2]=0,g[v+4>>2]=0,g[v+8>>2]=0,ce[v+12>>0]=0,ce[L>>0]=ce[E>>0]|0,ce[L+1>>0]=ce[E+1>>0]|0,ce[L+2>>0]=ce[E+2>>0]|0;break}if(T=Os((g[y+8>>2]|0)+1|0,32)|0,T){no(y,T),W=C,g[W>>2]=L,g[W+4>>2]=R,g[C+8>>2]=0,g[C+12>>2]=p,g[C+16>>2]=v,g[C+20>>2]=y,g[C+24>>2]=T,ce[C+28>>0]=0,L=C+29|0,ce[L>>0]=ce[E>>0]|0,ce[L+1>>0]=ce[E+1>>0]|0,ce[L+2>>0]=ce[E+2>>0]|0;break}else{v=C,g[v>>2]=0,g[v+4>>2]=0,g[C+8>>2]=13,g[C+12>>2]=-1,v=C+16|0,L=C+29|0,g[v>>2]=0,g[v+4>>2]=0,g[v+8>>2]=0,ce[v+12>>0]=0,ce[L>>0]=ce[E>>0]|0,ce[L+1>>0]=ce[E+1>>0]|0,ce[L+2>>0]=ce[E+2>>0]|0;break}}else L=C,g[L>>2]=0,g[L+4>>2]=0,g[C+8>>2]=4,g[C+12>>2]=-1,L=C+16|0,W=C+29|0,g[L>>2]=0,g[L+4>>2]=0,g[L+8>>2]=0,ce[L+12>>0]=0,ce[W>>0]=ce[E>>0]|0,ce[W+1>>0]=ce[E+1>>0]|0,ce[W+2>>0]=ce[E+2>>0]|0;while(!1);Hc(C),g[d>>2]=g[C>>2],g[d+4>>2]=g[C+4>>2],g[d+8>>2]=g[C+8>>2],g[d+12>>2]=g[C+12>>2],g[d+16>>2]=g[C+16>>2],g[d+20>>2]=g[C+20>>2],g[d+24>>2]=g[C+24>>2],g[d+28>>2]=g[C+28>>2],it=z}function Hc(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0;if(Et=it,it=it+336|0,At=Et+168|0,gt=Et,v=d,p=g[v>>2]|0,v=g[v+4>>2]|0,(p|0)==0&(v|0)==0){it=Et;return}if(y=d+28|0,ce[y>>0]|0?(p=Pl(p,v)|0,v=ot()|0):ce[y>>0]=1,zt=d+20|0,!(g[g[zt>>2]>>2]|0)){y=d+24|0,p=g[y>>2]|0,p|0&&Je(p),$t=d,g[$t>>2]=0,g[$t+4>>2]=0,g[d+8>>2]=0,g[zt>>2]=0,g[d+12>>2]=-1,g[d+16>>2]=0,g[y>>2]=0,it=Et;return}$t=d+16|0,y=g[$t>>2]|0,T=y&15;t:do if((p|0)==0&(v|0)==0)Qt=d+24|0;else{It=d+12|0,st=(T|0)==3,W=y&255,L=(T|1|0)==3,pt=d+24|0,z=(T+-1|0)>>>0<3,R=(T|2|0)==3,C=gt+8|0;e:for(;;){if(E=ue(p|0,v|0,52)|0,ot()|0,E=E&15,(E|0)==(g[It>>2]|0)){switch(W&15){case 0:case 2:case 3:{if(T=ko(p,v,At)|0,T|0){xt=15;break e}if(Qs(g[zt>>2]|0,g[pt>>2]|0,At)|0){xt=19;break e}break}}if(L&&(T=g[(g[zt>>2]|0)+4>>2]|0,g[At>>2]=g[T>>2],g[At+4>>2]=g[T+4>>2],g[At+8>>2]=g[T+8>>2],g[At+12>>2]=g[T+12>>2],Ia(26832,At)|0)){if(V0(g[(g[zt>>2]|0)+4>>2]|0,E,gt)|0){xt=25;break}if(T=gt,(g[T>>2]|0)==(p|0)&&(g[T+4>>2]|0)==(v|0)){xt=29;break}}if(z){if(T=Rl(p,v,At)|0,T|0){xt=32;break}if(io(p,v,gt,0)|0){xt=36;break}if(R&&Ba(g[zt>>2]|0,g[pt>>2]|0,At,gt)|0){xt=42;break}if(L&&K0(g[zt>>2]|0,g[pt>>2]|0,At,gt)|0){xt=42;break}}if(st){if(y=io(p,v,At,1)|0,T=g[pt>>2]|0,y|0){xt=45;break}if(nh(T,At)|0){if(rh(gt,At),D0(At,g[pt>>2]|0)|0){xt=53;break}if(Qs(g[zt>>2]|0,g[pt>>2]|0,C)|0){xt=53;break}if(K0(g[zt>>2]|0,g[pt>>2]|0,gt,At)|0){xt=53;break}}}}do if((E|0)<(g[It>>2]|0)){if(y=io(p,v,At,1)|0,T=g[pt>>2]|0,y|0){xt=58;break e}if(!(nh(T,At)|0)){xt=73;break}if(D0(g[pt>>2]|0,At)|0&&(rh(gt,At),Ba(g[zt>>2]|0,g[pt>>2]|0,gt,At)|0)){xt=65;break e}if(p=ch(p,v,E+1|0,gt)|0,p|0){xt=67;break e}v=gt,p=g[v>>2]|0,v=g[v+4>>2]|0}else xt=73;while(!1);if((xt|0)==73&&(xt=0,p=Pl(p,v)|0,v=ot()|0),(p|0)==0&(v|0)==0){Qt=pt;break t}}switch(xt|0){case 15:{y=g[pt>>2]|0,y|0&&Je(y),xt=d,g[xt>>2]=0,g[xt+4>>2]=0,g[zt>>2]=0,g[It>>2]=-1,g[$t>>2]=0,g[pt>>2]=0,g[d+8>>2]=T,xt=20;break}case 19:{g[d>>2]=p,g[d+4>>2]=v,xt=20;break}case 25:{ti(27795,27761,470,27772);break}case 29:{g[d>>2]=p,g[d+4>>2]=v,it=Et;return}case 32:{y=g[pt>>2]|0,y|0&&Je(y),Qt=d,g[Qt>>2]=0,g[Qt+4>>2]=0,g[zt>>2]=0,g[It>>2]=-1,g[$t>>2]=0,g[pt>>2]=0,g[d+8>>2]=T,it=Et;return}case 36:{ti(27795,27761,493,27772);break}case 42:{g[d>>2]=p,g[d+4>>2]=v,it=Et;return}case 45:{T|0&&Je(T),xt=d,g[xt>>2]=0,g[xt+4>>2]=0,g[zt>>2]=0,g[It>>2]=-1,g[$t>>2]=0,g[pt>>2]=0,g[d+8>>2]=y,xt=55;break}case 53:{g[d>>2]=p,g[d+4>>2]=v,xt=55;break}case 58:{T|0&&Je(T),xt=d,g[xt>>2]=0,g[xt+4>>2]=0,g[zt>>2]=0,g[It>>2]=-1,g[$t>>2]=0,g[pt>>2]=0,g[d+8>>2]=y,xt=71;break}case 65:{g[d>>2]=p,g[d+4>>2]=v,xt=71;break}case 67:{y=g[pt>>2]|0,y|0&&Je(y),Qt=d,g[Qt>>2]=0,g[Qt+4>>2]=0,g[zt>>2]=0,g[It>>2]=-1,g[$t>>2]=0,g[pt>>2]=0,g[d+8>>2]=p,it=Et;return}}if((xt|0)==20){it=Et;return}else if((xt|0)==55){it=Et;return}else if((xt|0)==71){it=Et;return}}while(!1);y=g[Qt>>2]|0,y|0&&Je(y),xt=d,g[xt>>2]=0,g[xt+4>>2]=0,g[d+8>>2]=0,g[zt>>2]=0,g[d+12>>2]=-1,g[$t>>2]=0,g[Qt>>2]=0,it=Et}function Pl(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0;st=it,it=it+16|0,W=st,v=ue(d|0,y|0,52)|0,ot()|0,v=v&15,p=ue(d|0,y|0,45)|0,ot()|0;do if(v){for(;p=_e(v+4095|0,0,52)|0,T=ot()|0|y&-15728641,E=(15-v|0)*3|0,R=_e(7,0,E|0)|0,C=ot()|0,p=p|d|R,T=T|C,L=ue(d|0,y|0,E|0)|0,ot()|0,L=L&7,v=v+-1|0,!(L>>>0<6);)if(v)y=T,d=p;else{z=4;break}if((z|0)==4){p=ue(p|0,T|0,45)|0,ot()|0;break}return W=(L|0)==0&(tn(p,T)|0)!=0,W=_e((W?2:1)+L|0,0,E|0)|0,z=ot()|0|y&~C,W=W|d&~R,Ze(z|0),it=st,W|0}while(!1);return p=p&127,p>>>0>120?(z=0,W=0,Ze(z|0),it=st,W|0):(U0(W,0,p+1|0,0),z=g[W+4>>2]|0,W=g[W>>2]|0,Ze(z|0),it=st,W|0)}function qc(d,y,p,v,T,E){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0,E=E|0;var R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0;xt=it,it=it+160|0,st=xt+80|0,C=xt+64|0,pt=xt+112|0,It=xt,Q0(st,d,y,p),z=st,Dl(C,g[z>>2]|0,g[z+4>>2]|0,y),z=C,L=g[z>>2]|0,z=g[z+4>>2]|0,R=g[st+8>>2]|0,At=pt+4|0,g[At>>2]=g[st>>2],g[At+4>>2]=g[st+4>>2],g[At+8>>2]=g[st+8>>2],g[At+12>>2]=g[st+12>>2],g[At+16>>2]=g[st+16>>2],g[At+20>>2]=g[st+20>>2],g[At+24>>2]=g[st+24>>2],g[At+28>>2]=g[st+28>>2],At=It,g[At>>2]=L,g[At+4>>2]=z,At=It+8|0,g[At>>2]=R,d=It+12|0,y=pt,p=d+36|0;do g[d>>2]=g[y>>2],d=d+4|0,y=y+4|0;while((d|0)<(p|0));if(pt=It+48|0,g[pt>>2]=g[C>>2],g[pt+4>>2]=g[C+4>>2],g[pt+8>>2]=g[C+8>>2],g[pt+12>>2]=g[C+12>>2],(L|0)==0&(z|0)==0)return It=R,it=xt,It|0;p=It+16|0,W=It+24|0,st=It+28|0,R=0,C=0,y=L,d=z;do{if(!((R|0)<(T|0)|(R|0)==(T|0)&C>>>0<v>>>0)){gt=4;break}if(z=C,C=Pe(C|0,R|0,1,0)|0,R=ot()|0,z=E+(z<<3)|0,g[z>>2]=y,g[z+4>>2]=d,cd(pt),d=pt,y=g[d>>2]|0,d=g[d+4>>2]|0,(y|0)==0&(d|0)==0){if(Hc(p),y=p,d=g[y>>2]|0,y=g[y+4>>2]|0,(d|0)==0&(y|0)==0){gt=10;break}ld(d,y,g[st>>2]|0,pt),d=pt,y=g[d>>2]|0,d=g[d+4>>2]|0}z=It,g[z>>2]=y,g[z+4>>2]=d}while(!((y|0)==0&(d|0)==0));return(gt|0)==4?(d=It+40|0,y=g[d>>2]|0,y|0&&Je(y),gt=It+16|0,g[gt>>2]=0,g[gt+4>>2]=0,g[W>>2]=0,g[It+36>>2]=0,g[st>>2]=-1,g[It+32>>2]=0,g[d>>2]=0,ld(0,0,0,pt),g[It>>2]=0,g[It+4>>2]=0,g[At>>2]=0,It=14,it=xt,It|0):((gt|0)==10&&(g[It>>2]=0,g[It+4>>2]=0,g[At>>2]=g[W>>2]),It=g[At>>2]|0,it=xt,It|0)}function gd(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0;if(st=it,it=it+48|0,L=st+32|0,C=st+40|0,z=st,!(g[d>>2]|0))return W=v,g[W>>2]=0,g[W+4>>2]=0,W=0,it=st,W|0;U0(L,0,0,0),R=L,T=g[R>>2]|0,R=g[R+4>>2]|0;do if(y>>>0>15)W=z,g[W>>2]=0,g[W+4>>2]=0,g[z+8>>2]=4,g[z+12>>2]=-1,W=z+16|0,p=z+29|0,g[W>>2]=0,g[W+4>>2]=0,g[W+8>>2]=0,ce[W+12>>0]=0,ce[p>>0]=ce[C>>0]|0,ce[p+1>>0]=ce[C+1>>0]|0,ce[p+2>>0]=ce[C+2>>0]|0,p=4,W=9;else{if(p=wr(p)|0,p|0){L=z,g[L>>2]=0,g[L+4>>2]=0,g[z+8>>2]=p,g[z+12>>2]=-1,L=z+16|0,W=z+29|0,g[L>>2]=0,g[L+4>>2]=0,g[L+8>>2]=0,ce[L+12>>0]=0,ce[W>>0]=ce[C>>0]|0,ce[W+1>>0]=ce[C+1>>0]|0,ce[W+2>>0]=ce[C+2>>0]|0,W=9;break}if(p=Os((g[d+8>>2]|0)+1|0,32)|0,!p){W=z,g[W>>2]=0,g[W+4>>2]=0,g[z+8>>2]=13,g[z+12>>2]=-1,W=z+16|0,p=z+29|0,g[W>>2]=0,g[W+4>>2]=0,g[W+8>>2]=0,ce[W+12>>0]=0,ce[p>>0]=ce[C>>0]|0,ce[p+1>>0]=ce[C+1>>0]|0,ce[p+2>>0]=ce[C+2>>0]|0,p=13,W=9;break}no(d,p),At=z,g[At>>2]=T,g[At+4>>2]=R,R=z+8|0,g[R>>2]=0,g[z+12>>2]=y,g[z+20>>2]=d,g[z+24>>2]=p,ce[z+28>>0]=0,T=z+29|0,ce[T>>0]=ce[C>>0]|0,ce[T+1>>0]=ce[C+1>>0]|0,ce[T+2>>0]=ce[C+2>>0]|0,g[z+16>>2]=3,pt=+ih(p),pt=pt*+Ja(p),E=+bi(+ +et[p>>3]),E=pt/+$i(+ +fh(+E,+ +bi(+ +et[p+8>>3])))*6371.007180918475*6371.007180918475,T=z+12|0,p=g[T>>2]|0;t:do if((p|0)>0)do{if(z1(p+-1|0,L)|0,!(E/+et[L>>3]>10))break t;At=g[T>>2]|0,p=At+-1|0,g[T>>2]=p}while((At|0)>1);while(!1);if(Hc(z),T=v,g[T>>2]=0,g[T+4>>2]=0,T=z,p=g[T>>2]|0,T=g[T+4>>2]|0,!((p|0)==0&(T|0)==0))do zc(p,T,y,L)|0,C=L,d=v,C=Pe(g[d>>2]|0,g[d+4>>2]|0,g[C>>2]|0,g[C+4>>2]|0)|0,d=ot()|0,At=v,g[At>>2]=C,g[At+4>>2]=d,Hc(z),At=z,p=g[At>>2]|0,T=g[At+4>>2]|0;while(!((p|0)==0&(T|0)==0));p=g[R>>2]|0}while(!1);return At=p,it=st,At|0}function jo(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0;if(!(Ia(y,p)|0)||(y=td(y)|0,v=+et[p>>3],T=+et[p+8>>3],T=y&T<0?T+6.283185307179586:T,pt=g[d>>2]|0,(pt|0)<=0))return pt=0,pt|0;if(st=g[d+4>>2]|0,y){y=0,W=T,p=-1,d=0;t:for(;;){for(z=d;R=+et[st+(z<<4)>>3],T=+et[st+(z<<4)+8>>3],d=(p+2|0)%(pt|0)|0,E=+et[st+(d<<4)>>3],C=+et[st+(d<<4)+8>>3],R>E?(L=R,R=C):(L=E,E=R,R=T,T=C),v=v==E|v==L?v+2220446049250313e-31:v,!!(v<E|v>L);)if(p=z+1|0,(p|0)>=(pt|0)){p=22;break t}else d=z,z=p,p=d;if(C=R<0?R+6.283185307179586:R,R=T<0?T+6.283185307179586:T,W=C==W|R==W?W+-2220446049250313e-31:W,L=C+(R-C)*((v-E)/(L-E)),(L<0?L+6.283185307179586:L)>W&&(y=y^1),d=z+1|0,(d|0)>=(pt|0)){p=22;break}else p=z}if((p|0)==22)return y|0}else{y=0,W=T,p=-1,d=0;t:for(;;){for(z=d;R=+et[st+(z<<4)>>3],T=+et[st+(z<<4)+8>>3],d=(p+2|0)%(pt|0)|0,E=+et[st+(d<<4)>>3],C=+et[st+(d<<4)+8>>3],R>E?(L=R,R=C):(L=E,E=R,R=T,T=C),v=v==E|v==L?v+2220446049250313e-31:v,!!(v<E|v>L);)if(p=z+1|0,(p|0)>=(pt|0)){p=22;break t}else d=z,z=p,p=d;if(W=R==W|T==W?W+-2220446049250313e-31:W,R+(T-R)*((v-E)/(L-E))>W&&(y=y^1),d=z+1|0,(d|0)>=(pt|0)){p=22;break}else p=z}if((p|0)==22)return y|0}return 0}function ds(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0;if(gt=g[d>>2]|0,!gt){g[y>>2]=0,g[y+4>>2]=0,g[y+8>>2]=0,g[y+12>>2]=0,g[y+16>>2]=0,g[y+20>>2]=0,g[y+24>>2]=0,g[y+28>>2]=0;return}if(It=y+8|0,et[It>>3]=17976931348623157e292,xt=y+24|0,et[xt>>3]=17976931348623157e292,et[y>>3]=-17976931348623157e292,Qt=y+16|0,et[Qt>>3]=-17976931348623157e292,!((gt|0)<=0)){for(pt=g[d+4>>2]|0,z=17976931348623157e292,W=-17976931348623157e292,st=0,d=-1,E=17976931348623157e292,R=17976931348623157e292,L=-17976931348623157e292,v=-17976931348623157e292,At=0;p=+et[pt+(At<<4)>>3],C=+et[pt+(At<<4)+8>>3],d=d+2|0,T=+et[pt+(((d|0)==(gt|0)?0:d)<<4)+8>>3],p<E&&(et[It>>3]=p,E=p),C<R&&(et[xt>>3]=C,R=C),p>L?et[y>>3]=p:p=L,C>v&&(et[Qt>>3]=C,v=C),z=C>0&C<z?C:z,W=C<0&C>W?C:W,st=st|+bi(+(C-T))>3.141592653589793,d=At+1|0,(d|0)!=(gt|0);)$t=At,L=p,At=d,d=$t;st&&(et[Qt>>3]=W,et[xt>>3]=z)}}function wr(d){return d=d|0,(d>>>0<4?0:15)|0}function no(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0;if(gt=g[d>>2]|0,gt){if(It=y+8|0,et[It>>3]=17976931348623157e292,xt=y+24|0,et[xt>>3]=17976931348623157e292,et[y>>3]=-17976931348623157e292,Qt=y+16|0,et[Qt>>3]=-17976931348623157e292,(gt|0)>0){for(T=g[d+4>>2]|0,pt=17976931348623157e292,At=-17976931348623157e292,v=0,p=-1,L=17976931348623157e292,z=17976931348623157e292,st=-17976931348623157e292,R=-17976931348623157e292,$t=0;E=+et[T+($t<<4)>>3],W=+et[T+($t<<4)+8>>3],ze=p+2|0,C=+et[T+(((ze|0)==(gt|0)?0:ze)<<4)+8>>3],E<L&&(et[It>>3]=E,L=E),W<z&&(et[xt>>3]=W,z=W),E>st?et[y>>3]=E:E=st,W>R&&(et[Qt>>3]=W,R=W),pt=W>0&W<pt?W:pt,At=W<0&W>At?W:At,v=v|+bi(+(W-C))>3.141592653589793,p=$t+1|0,(p|0)!=(gt|0);)ze=$t,st=E,$t=p,p=ze;v&&(et[Qt>>3]=At,et[xt>>3]=pt)}}else g[y>>2]=0,g[y+4>>2]=0,g[y+8>>2]=0,g[y+12>>2]=0,g[y+16>>2]=0,g[y+20>>2]=0,g[y+24>>2]=0,g[y+28>>2]=0;if(ze=d+8|0,p=g[ze>>2]|0,!((p|0)<=0)){ve=d+12|0,Et=0;do if(T=g[ve>>2]|0,v=Et,Et=Et+1|0,xt=y+(Et<<5)|0,Qt=g[T+(v<<3)>>2]|0,Qt){if($t=y+(Et<<5)+8|0,et[$t>>3]=17976931348623157e292,d=y+(Et<<5)+24|0,et[d>>3]=17976931348623157e292,et[xt>>3]=-17976931348623157e292,zt=y+(Et<<5)+16|0,et[zt>>3]=-17976931348623157e292,(Qt|0)>0){for(gt=g[T+(v<<3)+4>>2]|0,pt=17976931348623157e292,At=-17976931348623157e292,T=0,v=-1,It=0,L=17976931348623157e292,z=17976931348623157e292,W=-17976931348623157e292,R=-17976931348623157e292;E=+et[gt+(It<<4)>>3],st=+et[gt+(It<<4)+8>>3],v=v+2|0,C=+et[gt+(((v|0)==(Qt|0)?0:v)<<4)+8>>3],E<L&&(et[$t>>3]=E,L=E),st<z&&(et[d>>3]=st,z=st),E>W?et[xt>>3]=E:E=W,st>R&&(et[zt>>3]=st,R=st),pt=st>0&st<pt?st:pt,At=st<0&st>At?st:At,T=T|+bi(+(st-C))>3.141592653589793,v=It+1|0,(v|0)!=(Qt|0);)fe=It,It=v,W=E,v=fe;T&&(et[zt>>3]=At,et[d>>3]=pt)}}else g[xt>>2]=0,g[xt+4>>2]=0,g[xt+8>>2]=0,g[xt+12>>2]=0,g[xt+16>>2]=0,g[xt+20>>2]=0,g[xt+24>>2]=0,g[xt+28>>2]=0,p=g[ze>>2]|0;while((Et|0)<(p|0))}}function Qs(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0;if(!(jo(d,y,p)|0))return T=0,T|0;if(T=d+8|0,(g[T>>2]|0)<=0)return T=1,T|0;for(v=d+12|0,d=0;;){if(E=d,d=d+1|0,jo((g[v>>2]|0)+(E<<3)|0,y+(d<<5)|0,p)|0){d=0,v=6;break}if((d|0)>=(g[T>>2]|0)){d=1,v=6;break}}return(v|0)==6?d|0:0}function Ba(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0;if(z=it,it=it+16|0,C=z,R=p+8|0,!(jo(d,y,R)|0))return L=0,it=z,L|0;L=d+8|0;t:do if((g[L>>2]|0)>0){for(E=d+12|0,T=0;;){if(W=T,T=T+1|0,jo((g[E>>2]|0)+(W<<3)|0,y+(T<<5)|0,R)|0){T=0;break}if((T|0)>=(g[L>>2]|0))break t}return it=z,T|0}while(!1);if(Oa(d,y,p,v)|0)return W=0,it=z,W|0;g[C>>2]=g[p>>2],g[C+4>>2]=R,T=g[L>>2]|0;t:do if((T|0)>0)for(d=d+12|0,R=0,E=T;;){if(T=g[d>>2]|0,(g[T+(R<<3)>>2]|0)>0){if(jo(C,v,g[T+(R<<3)+4>>2]|0)|0){T=0;break t}if(T=R+1|0,Oa((g[d>>2]|0)+(R<<3)|0,y+(T<<5)|0,p,v)|0){T=0;break t}E=g[L>>2]|0}else T=R+1|0;if((T|0)<(E|0))R=T;else{T=1;break}}else T=1;while(!1);return W=T,it=z,W|0}function Oa(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0,ze=0,fe=0,Ce=0;if(ze=it,it=it+176|0,$t=ze+172|0,T=ze+168|0,zt=ze,!(nh(y,v)|0))return d=0,it=ze,d|0;if(ed(y,v,$t,T),jl(zt|0,p|0,168)|0,(g[p>>2]|0)>0){y=0;do fe=zt+8+(y<<4)+8|0,Qt=+Nr(+et[fe>>3],g[T>>2]|0),et[fe>>3]=Qt,y=y+1|0;while((y|0)<(g[p>>2]|0))}It=+et[v>>3],xt=+et[v+8>>3],Qt=+Nr(+et[v+16>>3],g[T>>2]|0),At=+Nr(+et[v+24>>3],g[T>>2]|0);t:do if((g[d>>2]|0)>0){if(v=d+4|0,T=g[zt>>2]|0,(T|0)<=0){for(y=0;;)if(y=y+1|0,(y|0)>=(g[d>>2]|0)){y=0;break t}}for(p=0;;){if(y=g[v>>2]|0,pt=+et[y+(p<<4)>>3],gt=+Nr(+et[y+(p<<4)+8>>3],g[$t>>2]|0),y=g[v>>2]|0,p=p+1|0,fe=(p|0)%(g[d>>2]|0)|0,E=+et[y+(fe<<4)>>3],R=+Nr(+et[y+(fe<<4)+8>>3],g[$t>>2]|0),!(pt>=It)|!(E>=It)&&!(pt<=xt)|!(E<=xt)&&!(gt<=At)|!(R<=At)&&!(gt>=Qt)|!(R>=Qt)){st=E-pt,z=R-gt,y=0;do if(Ce=y,y=y+1|0,fe=(y|0)==(T|0)?0:y,E=+et[zt+8+(Ce<<4)+8>>3],R=+et[zt+8+(fe<<4)+8>>3]-E,C=+et[zt+8+(Ce<<4)>>3],L=+et[zt+8+(fe<<4)>>3]-C,W=st*R-z*L,W!=0&&(Et=gt-E,ve=pt-C,L=(Et*L-R*ve)/W,!(L<0|L>1))&&(W=(st*Et-z*ve)/W,W>=0&W<=1)){y=1;break t}while((y|0)<(T|0))}if((p|0)>=(g[d>>2]|0)){y=0;break}}}else y=0;while(!1);return Ce=y,it=ze,Ce|0}function K0(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0;if(Oa(d,y,p,v)|0)return E=1,E|0;if(E=d+8|0,(g[E>>2]|0)<=0)return E=0,E|0;for(T=d+12|0,d=0;;){if(R=d,d=d+1|0,Oa((g[T>>2]|0)+(R<<3)|0,y+(d<<5)|0,p,v)|0){d=1,T=6;break}if((d|0)>=(g[E>>2]|0)){d=0,T=6;break}}return(T|0)==6?d|0:0}function Z0(){return 8}function J0(){return 16}function Fr(){return 168}function Nn(){return 8}function rn(){return 16}function xl(){return 12}function Ra(){return 8}function tg(d){return d=d|0,+(+((g[d>>2]|0)>>>0)+4294967296*+(g[d+4>>2]|0))}function Nl(d){d=d|0;var y=0,p=0;return p=+et[d>>3],y=+et[d+8>>3],+ +ki(+(p*p+y*y))}function eg(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0;z=+et[d>>3],L=+et[y>>3]-z,C=+et[d+8>>3],R=+et[y+8>>3]-C,st=+et[p>>3],E=+et[v>>3]-st,pt=+et[p+8>>3],W=+et[v+8>>3]-pt,E=(E*(C-pt)-(z-st)*W)/(L*W-R*E),et[T>>3]=z+L*E,et[T+8>>3]=C+R*E}function ig(d,y){return d=d|0,y=y|0,+bi(+(+et[d>>3]-+et[y>>3]))<11920928955078125e-23?(y=+bi(+(+et[d+8>>3]-+et[y+8>>3]))<11920928955078125e-23,y|0):(y=0,y|0)}function In(d,y){d=d|0,y=y|0;var p=0,v=0,T=0;return T=+et[d>>3]-+et[y>>3],v=+et[d+8>>3]-+et[y+8>>3],p=+et[d+16>>3]-+et[y+16>>3],+(T*T+v*v+p*p)}function uh(d,y){d=d|0,y=y|0;var p=0,v=0,T=0;p=+et[d>>3],v=+$i(+p),p=+Xe(+p),et[y+16>>3]=p,p=+et[d+8>>3],T=v*+$i(+p),et[y>>3]=T,p=v*+Xe(+p),et[y+8>>3]=p}function H1(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0;if(E=it,it=it+16|0,T=E,v=tn(d,y)|0,(p+-1|0)>>>0>5||(v=(v|0)!=0,(p|0)==1&v))return T=-1,it=E,T|0;do if(ro(d,y,T)|0)v=-1;else if(v){v=((g[26352+(p<<2)>>2]|0)+5-(g[T>>2]|0)|0)%5|0;break}else{v=((g[26384+(p<<2)>>2]|0)+6-(g[T>>2]|0)|0)%6|0;break}while(!1);return T=v,it=E,T|0}function ro(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0,z=0;if(z=it,it=it+32|0,R=z+16|0,C=z,v=Ea(d,y,R)|0,v|0)return p=v,it=z,p|0;E=C1(d,y)|0,L=Pr(d,y)|0,R0(E,C),v=Lc(E,g[R>>2]|0)|0;t:do if(Sn(E)|0){do switch(E|0){case 4:{d=0;break}case 14:{d=1;break}case 24:{d=2;break}case 38:{d=3;break}case 49:{d=4;break}case 58:{d=5;break}case 63:{d=6;break}case 72:{d=7;break}case 83:{d=8;break}case 97:{d=9;break}case 107:{d=10;break}case 117:{d=11;break}default:{v=1;break t}}while(!1);if(T=g[26416+(d*24|0)+8>>2]|0,y=g[26416+(d*24|0)+16>>2]|0,d=g[R>>2]|0,(d|0)!=(g[C>>2]|0)&&(C=B0(E)|0,d=g[R>>2]|0,C|(d|0)==(y|0)&&(v=(v+1|0)%6|0)),(L|0)==3&(d|0)==(y|0)){v=(v+5|0)%6|0,T=22;break}(L|0)==5&(d|0)==(T|0)&&(v=(v+1|0)%6|0),T=22}else T=22;while(!1);return(T|0)==22&&(g[p>>2]=v,v=0),p=v,it=z,p|0}function Jr(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0;if(zt=it,it=it+32|0,$t=zt+24|0,xt=zt+20|0,gt=zt+8|0,At=zt+16|0,pt=zt,L=(tn(d,y)|0)==0,L=L?6:5,W=ue(d|0,y|0,52)|0,ot()|0,W=W&15,L>>>0<=p>>>0)return v=2,it=zt,v|0;st=(W|0)==0,!st&&(It=_e(7,0,(W^15)*3|0)|0,(It&d|0)==0&((ot()|0)&y|0)==0)?T=p:E=4;t:do if((E|0)==4){if(T=(tn(d,y)|0)!=0,((T?4:5)|0)<(p|0)||ro(d,y,$t)|0||(E=(g[$t>>2]|0)+p|0,T?T=26704+(((E|0)%5|0)<<2)|0:T=26736+(((E|0)%6|0)<<2)|0,It=g[T>>2]|0,(It|0)==7))return v=1,it=zt,v|0;g[xt>>2]=0,T=Rn(d,y,It,xt,gt)|0;do if(!T){if(C=gt,z=g[C>>2]|0,C=g[C+4>>2]|0,R=C>>>0<y>>>0|(C|0)==(y|0)&z>>>0<d>>>0,E=R?z:d,R=R?C:y,!st&&(st=_e(7,0,(W^15)*3|0)|0,(z&st|0)==0&(C&(ot()|0)|0)==0))T=p;else{if(C=(p+-1+L|0)%(L|0)|0,T=tn(d,y)|0,(C|0)<0&&ti(27795,27797,246,27806),L=(T|0)!=0,((L?4:5)|0)<(C|0)&&ti(27795,27797,246,27806),ro(d,y,$t)|0&&ti(27795,27797,246,27806),T=(g[$t>>2]|0)+C|0,L?T=26704+(((T|0)%5|0)<<2)|0:T=26736+(((T|0)%6|0)<<2)|0,C=g[T>>2]|0,(C|0)==7&&ti(27795,27797,246,27806),g[At>>2]=0,T=Rn(d,y,C,At,pt)|0,T|0)break;z=pt,L=g[z>>2]|0,z=g[z+4>>2]|0;do if(z>>>0<R>>>0|(z|0)==(R|0)&L>>>0<E>>>0){if(tn(L,z)|0?E=Zf(L,z,d,y)|0:E=g[26800+((((g[At>>2]|0)+(g[26768+(C<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,T=tn(L,z)|0,(E+-1|0)>>>0>5){T=-1,E=L,R=z;break}if(T=(T|0)!=0,(E|0)==1&T){T=-1,E=L,R=z;break}do if(ro(L,z,$t)|0)T=-1;else if(T){T=((g[26352+(E<<2)>>2]|0)+5-(g[$t>>2]|0)|0)%5|0;break}else{T=((g[26384+(E<<2)>>2]|0)+6-(g[$t>>2]|0)|0)%6|0;break}while(!1);E=L,R=z}else T=p;while(!1);C=gt,z=g[C>>2]|0,C=g[C+4>>2]|0}if((E|0)==(z|0)&(R|0)==(C|0)){if(L=(tn(z,C)|0)!=0,L?d=Zf(z,C,d,y)|0:d=g[26800+((((g[xt>>2]|0)+(g[26768+(It<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,T=tn(z,C)|0,(d+-1|0)>>>0<=5&&(Qt=(T|0)!=0,!((d|0)==1&Qt)))do if(ro(z,C,$t)|0)T=-1;else if(Qt){T=((g[26352+(d<<2)>>2]|0)+5-(g[$t>>2]|0)|0)%5|0;break}else{T=((g[26384+(d<<2)>>2]|0)+6-(g[$t>>2]|0)|0)%6|0;break}while(!1);else T=-1;T=T+1|0,T=(T|0)==6|L&(T|0)==5?0:T}y=R,d=E;break t}while(!1);return v=T,it=zt,v|0}while(!1);return Qt=_e(T|0,0,56)|0,$t=ot()|0|y&-2130706433|536870912,g[v>>2]=Qt|d,g[v+4>>2]=$t,v=0,it=zt,v|0}function Fl(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0;return E=(tn(d,y)|0)==0,v=Jr(d,y,0,p)|0,T=(v|0)==0,E?!T||(v=Jr(d,y,1,p+8|0)|0,v|0)||(v=Jr(d,y,2,p+16|0)|0,v|0)||(v=Jr(d,y,3,p+24|0)|0,v|0)||(v=Jr(d,y,4,p+32|0)|0,v)?(E=v,E|0):Jr(d,y,5,p+40|0)|0:!T||(v=Jr(d,y,1,p+8|0)|0,v|0)||(v=Jr(d,y,2,p+16|0)|0,v|0)||(v=Jr(d,y,3,p+24|0)|0,v|0)||(v=Jr(d,y,4,p+32|0)|0,v|0)?(E=v,E|0):(E=p+40|0,g[E>>2]=0,g[E+4>>2]=0,E=0,E|0)}function so(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0,C=0,L=0;return L=it,it=it+192|0,T=L,E=L+168|0,R=ue(d|0,y|0,56)|0,ot()|0,R=R&7,C=y&-2130706433|134217728,v=Ea(d,C,E)|0,v|0?(C=v,it=L,C|0):(y=ue(d|0,y|0,52)|0,ot()|0,y=y&15,tn(d,C)|0?x0(E,y,R,1,T):sd(E,y,R,1,T),C=T+8|0,g[p>>2]=g[C>>2],g[p+4>>2]=g[C+4>>2],g[p+8>>2]=g[C+8>>2],g[p+12>>2]=g[C+12>>2],C=0,it=L,C|0)}function zo(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0;return T=it,it=it+16|0,p=T,!(!0&(y&2013265920|0)==536870912)||(v=y&-2130706433|134217728,!(L0(d,v)|0))?(v=0,it=T,v|0):(E=ue(d|0,y|0,56)|0,ot()|0,E=(Jr(d,v,E&7,p)|0)==0,v=p,v=E&((g[v>>2]|0)==(d|0)?(g[v+4>>2]|0)==(y|0):0)&1,it=T,v|0)}function Da(d,y,p){d=d|0,y=y|0,p=p|0;var v=0;(y|0)>0?(v=Os(y,4)|0,g[d>>2]=v,v||ti(27819,27842,40,27856)):g[d>>2]=0,g[d+4>>2]=y,g[d+8>>2]=0,g[d+12>>2]=p}function yd(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0;T=d+4|0,E=d+12|0,R=d+8|0;t:for(;;){for(p=g[T>>2]|0,y=0;;){if((y|0)>=(p|0))break t;if(v=g[d>>2]|0,C=g[v+(y<<2)>>2]|0,!C)y=y+1|0;else break}y=v+(~~(+bi(+(+Ts(10,+ +(15-(g[E>>2]|0)|0))*(+et[C>>3]+ +et[C+8>>3])))%+(p|0))>>>0<<2)|0,p=g[y>>2]|0;e:do if(p|0){if(v=C+32|0,(p|0)==(C|0))g[y>>2]=g[v>>2];else{if(p=p+32|0,y=g[p>>2]|0,!y)break;for(;(y|0)!=(C|0);)if(p=y+32|0,y=g[p>>2]|0,!y)break e;g[p>>2]=g[v>>2]}Je(C),g[R>>2]=(g[R>>2]|0)+-1}while(!1)}Je(g[d>>2]|0)}function pd(d){d=d|0;var y=0,p=0,v=0;for(v=g[d+4>>2]|0,p=0;;){if((p|0)>=(v|0)){y=0,p=4;break}if(y=g[(g[d>>2]|0)+(p<<2)>>2]|0,!y)p=p+1|0;else{p=4;break}}return(p|0)==4?y|0:0}function Yc(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0;if(p=~~(+bi(+(+Ts(10,+ +(15-(g[d+12>>2]|0)|0))*(+et[y>>3]+ +et[y+8>>3])))%+(g[d+4>>2]|0))>>>0,p=(g[d>>2]|0)+(p<<2)|0,v=g[p>>2]|0,!v)return E=1,E|0;E=y+32|0;do if((v|0)!=(y|0)){if(p=g[v+32>>2]|0,!p)return E=1,E|0;for(T=p;;){if((T|0)==(y|0)){T=8;break}if(p=g[T+32>>2]|0,p)v=T,T=p;else{p=1,T=10;break}}if((T|0)==8){g[v+32>>2]=g[E>>2];break}else if((T|0)==10)return p|0}else g[p>>2]=g[E>>2];while(!1);return Je(y),E=d+8|0,g[E>>2]=(g[E>>2]|0)+-1,E=0,E|0}function md(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0;E=Ca(40)|0,E||ti(27872,27842,98,27885),g[E>>2]=g[y>>2],g[E+4>>2]=g[y+4>>2],g[E+8>>2]=g[y+8>>2],g[E+12>>2]=g[y+12>>2],T=E+16|0,g[T>>2]=g[p>>2],g[T+4>>2]=g[p+4>>2],g[T+8>>2]=g[p+8>>2],g[T+12>>2]=g[p+12>>2],g[E+32>>2]=0,T=~~(+bi(+(+Ts(10,+ +(15-(g[d+12>>2]|0)|0))*(+et[y>>3]+ +et[y+8>>3])))%+(g[d+4>>2]|0))>>>0,T=(g[d>>2]|0)+(T<<2)|0,v=g[T>>2]|0;do if(!v)g[T>>2]=E;else{for(;!(Ys(v,y)|0&&Ys(v+16|0,p)|0);)if(T=g[v+32>>2]|0,v=(T|0)==0?v:T,!(g[v+32>>2]|0)){R=10;break}if((R|0)==10){g[v+32>>2]=E;break}return Je(E),R=v,R|0}while(!1);return R=d+8|0,g[R>>2]=(g[R>>2]|0)+1,R=E,R|0}function Ll(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0;if(T=~~(+bi(+(+Ts(10,+ +(15-(g[d+12>>2]|0)|0))*(+et[y>>3]+ +et[y+8>>3])))%+(g[d+4>>2]|0))>>>0,T=g[(g[d>>2]|0)+(T<<2)>>2]|0,!T)return p=0,p|0;if(!p){for(d=T;;){if(Ys(d,y)|0){v=10;break}if(d=g[d+32>>2]|0,!d){d=0,v=10;break}}if((v|0)==10)return d|0}for(d=T;;){if(Ys(d,y)|0&&Ys(d+16|0,p)|0){v=10;break}if(d=g[d+32>>2]|0,!d){d=0,v=10;break}}return(v|0)==10?d|0:0}function Mr(d,y){d=d|0,y=y|0;var p=0;if(p=~~(+bi(+(+Ts(10,+ +(15-(g[d+12>>2]|0)|0))*(+et[y>>3]+ +et[y+8>>3])))%+(g[d+4>>2]|0))>>>0,d=g[(g[d>>2]|0)+(p<<2)>>2]|0,!d)return p=0,p|0;for(;;){if(Ys(d,y)|0){y=5;break}if(d=g[d+32>>2]|0,!d){d=0,y=5;break}}return(y|0)==5?d|0:0}function _d(){return 27904}function ao(d){return d=+d,~~+vd(+d)|0}function Ca(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0,It=0,xt=0,Qt=0,$t=0,zt=0,Et=0,ve=0;ve=it,it=it+16|0,pt=ve;do if(d>>>0<245){if(z=d>>>0<11?16:d+11&-8,d=z>>>3,st=g[6977]|0,p=st>>>d,p&3|0)return y=(p&1^1)+d|0,d=27948+(y<<1<<2)|0,p=d+8|0,v=g[p>>2]|0,T=v+8|0,E=g[T>>2]|0,(E|0)==(d|0)?g[6977]=st&~(1<<y):(g[E+12>>2]=d,g[p>>2]=E),Et=y<<3,g[v+4>>2]=Et|3,Et=v+Et+4|0,g[Et>>2]=g[Et>>2]|1,Et=T,it=ve,Et|0;if(W=g[6979]|0,z>>>0>W>>>0){if(p|0)return y=2<<d,y=p<<d&(y|0-y),y=(y&0-y)+-1|0,C=y>>>12&16,y=y>>>C,p=y>>>5&8,y=y>>>p,E=y>>>2&4,y=y>>>E,d=y>>>1&2,y=y>>>d,v=y>>>1&1,v=(p|C|E|d|v)+(y>>>v)|0,y=27948+(v<<1<<2)|0,d=y+8|0,E=g[d>>2]|0,C=E+8|0,p=g[C>>2]|0,(p|0)==(y|0)?(d=st&~(1<<v),g[6977]=d):(g[p+12>>2]=y,g[d>>2]=p,d=st),Et=v<<3,R=Et-z|0,g[E+4>>2]=z|3,T=E+z|0,g[T+4>>2]=R|1,g[E+Et>>2]=R,W|0&&(v=g[6982]|0,y=W>>>3,p=27948+(y<<1<<2)|0,y=1<<y,d&y?(d=p+8|0,y=g[d>>2]|0):(g[6977]=d|y,y=p,d=p+8|0),g[d>>2]=v,g[y+12>>2]=v,g[v+8>>2]=y,g[v+12>>2]=p),g[6979]=R,g[6982]=T,Et=C,it=ve,Et|0;if(E=g[6978]|0,E){for(p=(E&0-E)+-1|0,T=p>>>12&16,p=p>>>T,v=p>>>5&8,p=p>>>v,R=p>>>2&4,p=p>>>R,C=p>>>1&2,p=p>>>C,L=p>>>1&1,L=g[28212+((v|T|R|C|L)+(p>>>L)<<2)>>2]|0,p=L,C=L,L=(g[L+4>>2]&-8)-z|0;d=g[p+16>>2]|0,!(!d&&(d=g[p+20>>2]|0,!d));)R=(g[d+4>>2]&-8)-z|0,T=R>>>0<L>>>0,p=d,C=T?d:C,L=T?R:L;if(R=C+z|0,R>>>0>C>>>0){T=g[C+24>>2]|0,y=g[C+12>>2]|0;do if((y|0)==(C|0)){if(d=C+20|0,y=g[d>>2]|0,!y&&(d=C+16|0,y=g[d>>2]|0,!y)){p=0;break}for(;;)if(v=y+20|0,p=g[v>>2]|0,p)y=p,d=v;else if(v=y+16|0,p=g[v>>2]|0,p)y=p,d=v;else break;g[d>>2]=0,p=y}else p=g[C+8>>2]|0,g[p+12>>2]=y,g[y+8>>2]=p,p=y;while(!1);do if(T|0){if(y=g[C+28>>2]|0,d=28212+(y<<2)|0,(C|0)==(g[d>>2]|0)){if(g[d>>2]=p,!p){g[6978]=E&~(1<<y);break}}else if(Et=T+16|0,g[((g[Et>>2]|0)==(C|0)?Et:T+20|0)>>2]=p,!p)break;g[p+24>>2]=T,y=g[C+16>>2]|0,y|0&&(g[p+16>>2]=y,g[y+24>>2]=p),y=g[C+20>>2]|0,y|0&&(g[p+20>>2]=y,g[y+24>>2]=p)}while(!1);return L>>>0<16?(Et=L+z|0,g[C+4>>2]=Et|3,Et=C+Et+4|0,g[Et>>2]=g[Et>>2]|1):(g[C+4>>2]=z|3,g[R+4>>2]=L|1,g[R+L>>2]=L,W|0&&(v=g[6982]|0,y=W>>>3,p=27948+(y<<1<<2)|0,y=1<<y,y&st?(d=p+8|0,y=g[d>>2]|0):(g[6977]=y|st,y=p,d=p+8|0),g[d>>2]=v,g[y+12>>2]=v,g[v+8>>2]=y,g[v+12>>2]=p),g[6979]=L,g[6982]=R),Et=C+8|0,it=ve,Et|0}else st=z}else st=z}else st=z}else if(d>>>0<=4294967231)if(d=d+11|0,z=d&-8,v=g[6978]|0,v){T=0-z|0,d=d>>>8,d?z>>>0>16777215?L=31:(st=(d+1048320|0)>>>16&8,It=d<<st,C=(It+520192|0)>>>16&4,It=It<<C,L=(It+245760|0)>>>16&2,L=14-(C|st|L)+(It<<L>>>15)|0,L=z>>>(L+7|0)&1|L<<1):L=0,p=g[28212+(L<<2)>>2]|0;t:do if(!p)p=0,d=0,It=61;else for(d=0,C=z<<((L|0)==31?0:25-(L>>>1)|0),E=0;;){if(R=(g[p+4>>2]&-8)-z|0,R>>>0<T>>>0)if(R)d=p,T=R;else{d=p,T=0,It=65;break t}if(It=g[p+20>>2]|0,p=g[p+16+(C>>>31<<2)>>2]|0,E=(It|0)==0|(It|0)==(p|0)?E:It,p)C=C<<1;else{p=E,It=61;break}}while(!1);if((It|0)==61){if((p|0)==0&(d|0)==0){if(d=2<<L,d=(d|0-d)&v,!d){st=z;break}st=(d&0-d)+-1|0,R=st>>>12&16,st=st>>>R,E=st>>>5&8,st=st>>>E,C=st>>>2&4,st=st>>>C,L=st>>>1&2,st=st>>>L,p=st>>>1&1,d=0,p=g[28212+((E|R|C|L|p)+(st>>>p)<<2)>>2]|0}p?It=65:(C=d,R=T)}if((It|0)==65)for(E=p;;)if(st=(g[E+4>>2]&-8)-z|0,p=st>>>0<T>>>0,T=p?st:T,d=p?E:d,p=g[E+16>>2]|0,p||(p=g[E+20>>2]|0),p)E=p;else{C=d,R=T;break}if((C|0)!=0&&R>>>0<((g[6979]|0)-z|0)>>>0&&(W=C+z|0,W>>>0>C>>>0)){E=g[C+24>>2]|0,y=g[C+12>>2]|0;do if((y|0)==(C|0)){if(d=C+20|0,y=g[d>>2]|0,!y&&(d=C+16|0,y=g[d>>2]|0,!y)){y=0;break}for(;;)if(T=y+20|0,p=g[T>>2]|0,p)y=p,d=T;else if(T=y+16|0,p=g[T>>2]|0,p)y=p,d=T;else break;g[d>>2]=0}else Et=g[C+8>>2]|0,g[Et+12>>2]=y,g[y+8>>2]=Et;while(!1);do if(E){if(d=g[C+28>>2]|0,p=28212+(d<<2)|0,(C|0)==(g[p>>2]|0)){if(g[p>>2]=y,!y){v=v&~(1<<d),g[6978]=v;break}}else if(Et=E+16|0,g[((g[Et>>2]|0)==(C|0)?Et:E+20|0)>>2]=y,!y)break;g[y+24>>2]=E,d=g[C+16>>2]|0,d|0&&(g[y+16>>2]=d,g[d+24>>2]=y),d=g[C+20>>2]|0,d&&(g[y+20>>2]=d,g[d+24>>2]=y)}while(!1);t:do if(R>>>0<16)Et=R+z|0,g[C+4>>2]=Et|3,Et=C+Et+4|0,g[Et>>2]=g[Et>>2]|1;else{if(g[C+4>>2]=z|3,g[W+4>>2]=R|1,g[W+R>>2]=R,y=R>>>3,R>>>0<256){p=27948+(y<<1<<2)|0,d=g[6977]|0,y=1<<y,d&y?(d=p+8|0,y=g[d>>2]|0):(g[6977]=d|y,y=p,d=p+8|0),g[d>>2]=W,g[y+12>>2]=W,g[W+8>>2]=y,g[W+12>>2]=p;break}if(y=R>>>8,y?R>>>0>16777215?p=31:(zt=(y+1048320|0)>>>16&8,Et=y<<zt,$t=(Et+520192|0)>>>16&4,Et=Et<<$t,p=(Et+245760|0)>>>16&2,p=14-($t|zt|p)+(Et<<p>>>15)|0,p=R>>>(p+7|0)&1|p<<1):p=0,y=28212+(p<<2)|0,g[W+28>>2]=p,d=W+16|0,g[d+4>>2]=0,g[d>>2]=0,d=1<<p,!(v&d)){g[6978]=v|d,g[y>>2]=W,g[W+24>>2]=y,g[W+12>>2]=W,g[W+8>>2]=W;break}y=g[y>>2]|0;e:do if((g[y+4>>2]&-8|0)!=(R|0)){for(v=R<<((p|0)==31?0:25-(p>>>1)|0);p=y+16+(v>>>31<<2)|0,d=g[p>>2]|0,!!d;)if((g[d+4>>2]&-8|0)==(R|0)){y=d;break e}else v=v<<1,y=d;g[p>>2]=W,g[W+24>>2]=y,g[W+12>>2]=W,g[W+8>>2]=W;break t}while(!1);zt=y+8|0,Et=g[zt>>2]|0,g[Et+12>>2]=W,g[zt>>2]=W,g[W+8>>2]=Et,g[W+12>>2]=y,g[W+24>>2]=0}while(!1);return Et=C+8|0,it=ve,Et|0}else st=z}else st=z;else st=-1;while(!1);if(p=g[6979]|0,p>>>0>=st>>>0)return y=p-st|0,d=g[6982]|0,y>>>0>15?(Et=d+st|0,g[6982]=Et,g[6979]=y,g[Et+4>>2]=y|1,g[d+p>>2]=y,g[d+4>>2]=st|3):(g[6979]=0,g[6982]=0,g[d+4>>2]=p|3,Et=d+p+4|0,g[Et>>2]=g[Et>>2]|1),Et=d+8|0,it=ve,Et|0;if(R=g[6980]|0,R>>>0>st>>>0)return $t=R-st|0,g[6980]=$t,Et=g[6983]|0,zt=Et+st|0,g[6983]=zt,g[zt+4>>2]=$t|1,g[Et+4>>2]=st|3,Et=Et+8|0,it=ve,Et|0;if(g[7095]|0?d=g[7097]|0:(g[7097]=4096,g[7096]=4096,g[7098]=-1,g[7099]=-1,g[7100]=0,g[7088]=0,g[7095]=pt&-16^1431655768,d=4096),C=st+48|0,L=st+47|0,E=d+L|0,T=0-d|0,z=E&T,z>>>0<=st>>>0||(d=g[7087]|0,d|0&&(W=g[7085]|0,pt=W+z|0,pt>>>0<=W>>>0|pt>>>0>d>>>0)))return Et=0,it=ve,Et|0;t:do if(g[7088]&4)y=0,It=143;else{p=g[6983]|0;e:do if(p){for(v=28356;pt=g[v>>2]|0,!(pt>>>0<=p>>>0&&(pt+(g[v+4>>2]|0)|0)>>>0>p>>>0);)if(d=g[v+8>>2]|0,d)v=d;else{It=128;break e}if(y=E-R&T,y>>>0<2147483647)if(d=oo(y|0)|0,(d|0)==((g[v>>2]|0)+(g[v+4>>2]|0)|0)){if((d|0)!=-1){R=y,E=d,It=145;break t}}else v=d,It=136;else y=0}else It=128;while(!1);do if((It|0)==128)if(p=oo(0)|0,(p|0)!=-1&&(y=p,At=g[7096]|0,gt=At+-1|0,y=((gt&y|0)==0?0:(gt+y&0-At)-y|0)+z|0,At=g[7085]|0,gt=y+At|0,y>>>0>st>>>0&y>>>0<2147483647)){if(pt=g[7087]|0,pt|0&&gt>>>0<=At>>>0|gt>>>0>pt>>>0){y=0;break}if(d=oo(y|0)|0,(d|0)==(p|0)){R=y,E=p,It=145;break t}else v=d,It=136}else y=0;while(!1);do if((It|0)==136){if(p=0-y|0,!(C>>>0>y>>>0&(y>>>0<2147483647&(v|0)!=-1)))if((v|0)==-1){y=0;break}else{R=y,E=v,It=145;break t}if(d=g[7097]|0,d=L-y+d&0-d,d>>>0>=2147483647){R=y,E=v,It=145;break t}if((oo(d|0)|0)==-1){oo(p|0)|0,y=0;break}else{R=d+y|0,E=v,It=145;break t}}while(!1);g[7088]=g[7088]|4,It=143}while(!1);if((It|0)==143&&z>>>0<2147483647&&($t=oo(z|0)|0,gt=oo(0)|0,xt=gt-$t|0,Qt=xt>>>0>(st+40|0)>>>0,!(($t|0)==-1|Qt^1|$t>>>0<gt>>>0&(($t|0)!=-1&(gt|0)!=-1)^1))&&(R=Qt?xt:y,E=$t,It=145),(It|0)==145){y=(g[7085]|0)+R|0,g[7085]=y,y>>>0>(g[7086]|0)>>>0&&(g[7086]=y),L=g[6983]|0;t:do if(L){for(y=28356;;){if(d=g[y>>2]|0,p=g[y+4>>2]|0,(E|0)==(d+p|0)){It=154;break}if(v=g[y+8>>2]|0,v)y=v;else break}if((It|0)==154&&(zt=y+4|0,(g[y+12>>2]&8|0)==0)&&E>>>0>L>>>0&d>>>0<=L>>>0){g[zt>>2]=p+R,Et=(g[6980]|0)+R|0,$t=L+8|0,$t=($t&7|0)==0?0:0-$t&7,zt=L+$t|0,$t=Et-$t|0,g[6983]=zt,g[6980]=$t,g[zt+4>>2]=$t|1,g[L+Et+4>>2]=40,g[6984]=g[7099];break}for(E>>>0<(g[6981]|0)>>>0&&(g[6981]=E),p=E+R|0,y=28356;;){if((g[y>>2]|0)==(p|0)){It=162;break}if(d=g[y+8>>2]|0,d)y=d;else break}if((It|0)==162&&(g[y+12>>2]&8|0)==0){g[y>>2]=E,W=y+4|0,g[W>>2]=(g[W>>2]|0)+R,W=E+8|0,W=E+((W&7|0)==0?0:0-W&7)|0,y=p+8|0,y=p+((y&7|0)==0?0:0-y&7)|0,z=W+st|0,C=y-W-st|0,g[W+4>>2]=st|3;e:do if((L|0)==(y|0))Et=(g[6980]|0)+C|0,g[6980]=Et,g[6983]=z,g[z+4>>2]=Et|1;else{if((g[6982]|0)==(y|0)){Et=(g[6979]|0)+C|0,g[6979]=Et,g[6982]=z,g[z+4>>2]=Et|1,g[z+Et>>2]=Et;break}if(d=g[y+4>>2]|0,(d&3|0)==1){R=d&-8,v=d>>>3;i:do if(d>>>0<256)if(d=g[y+8>>2]|0,p=g[y+12>>2]|0,(p|0)==(d|0)){g[6977]=g[6977]&~(1<<v);break}else{g[d+12>>2]=p,g[p+8>>2]=d;break}else{E=g[y+24>>2]|0,d=g[y+12>>2]|0;do if((d|0)==(y|0)){if(p=y+16|0,v=p+4|0,d=g[v>>2]|0,d)p=v;else if(d=g[p>>2]|0,!d){d=0;break}for(;;)if(T=d+20|0,v=g[T>>2]|0,v)d=v,p=T;else if(T=d+16|0,v=g[T>>2]|0,v)d=v,p=T;else break;g[p>>2]=0}else Et=g[y+8>>2]|0,g[Et+12>>2]=d,g[d+8>>2]=Et;while(!1);if(!E)break;p=g[y+28>>2]|0,v=28212+(p<<2)|0;do if((g[v>>2]|0)!=(y|0)){if(Et=E+16|0,g[((g[Et>>2]|0)==(y|0)?Et:E+20|0)>>2]=d,!d)break i}else{if(g[v>>2]=d,d|0)break;g[6978]=g[6978]&~(1<<p);break i}while(!1);if(g[d+24>>2]=E,p=y+16|0,v=g[p>>2]|0,v|0&&(g[d+16>>2]=v,g[v+24>>2]=d),p=g[p+4>>2]|0,!p)break;g[d+20>>2]=p,g[p+24>>2]=d}while(!1);y=y+R|0,T=R+C|0}else T=C;if(y=y+4|0,g[y>>2]=g[y>>2]&-2,g[z+4>>2]=T|1,g[z+T>>2]=T,y=T>>>3,T>>>0<256){p=27948+(y<<1<<2)|0,d=g[6977]|0,y=1<<y,d&y?(d=p+8|0,y=g[d>>2]|0):(g[6977]=d|y,y=p,d=p+8|0),g[d>>2]=z,g[y+12>>2]=z,g[z+8>>2]=y,g[z+12>>2]=p;break}y=T>>>8;do if(!y)v=0;else{if(T>>>0>16777215){v=31;break}zt=(y+1048320|0)>>>16&8,Et=y<<zt,$t=(Et+520192|0)>>>16&4,Et=Et<<$t,v=(Et+245760|0)>>>16&2,v=14-($t|zt|v)+(Et<<v>>>15)|0,v=T>>>(v+7|0)&1|v<<1}while(!1);if(y=28212+(v<<2)|0,g[z+28>>2]=v,d=z+16|0,g[d+4>>2]=0,g[d>>2]=0,d=g[6978]|0,p=1<<v,!(d&p)){g[6978]=d|p,g[y>>2]=z,g[z+24>>2]=y,g[z+12>>2]=z,g[z+8>>2]=z;break}y=g[y>>2]|0;i:do if((g[y+4>>2]&-8|0)!=(T|0)){for(v=T<<((v|0)==31?0:25-(v>>>1)|0);p=y+16+(v>>>31<<2)|0,d=g[p>>2]|0,!!d;)if((g[d+4>>2]&-8|0)==(T|0)){y=d;break i}else v=v<<1,y=d;g[p>>2]=z,g[z+24>>2]=y,g[z+12>>2]=z,g[z+8>>2]=z;break e}while(!1);zt=y+8|0,Et=g[zt>>2]|0,g[Et+12>>2]=z,g[zt>>2]=z,g[z+8>>2]=Et,g[z+12>>2]=y,g[z+24>>2]=0}while(!1);return Et=W+8|0,it=ve,Et|0}for(y=28356;d=g[y>>2]|0,!(d>>>0<=L>>>0&&(Et=d+(g[y+4>>2]|0)|0,Et>>>0>L>>>0));)y=g[y+8>>2]|0;T=Et+-47|0,d=T+8|0,d=T+((d&7|0)==0?0:0-d&7)|0,T=L+16|0,d=d>>>0<T>>>0?L:d,y=d+8|0,p=R+-40|0,$t=E+8|0,$t=($t&7|0)==0?0:0-$t&7,zt=E+$t|0,$t=p-$t|0,g[6983]=zt,g[6980]=$t,g[zt+4>>2]=$t|1,g[E+p+4>>2]=40,g[6984]=g[7099],p=d+4|0,g[p>>2]=27,g[y>>2]=g[7089],g[y+4>>2]=g[7090],g[y+8>>2]=g[7091],g[y+12>>2]=g[7092],g[7089]=E,g[7090]=R,g[7092]=0,g[7091]=y,y=d+24|0;do zt=y,y=y+4|0,g[y>>2]=7;while((zt+8|0)>>>0<Et>>>0);if((d|0)!=(L|0)){if(E=d-L|0,g[p>>2]=g[p>>2]&-2,g[L+4>>2]=E|1,g[d>>2]=E,y=E>>>3,E>>>0<256){p=27948+(y<<1<<2)|0,d=g[6977]|0,y=1<<y,d&y?(d=p+8|0,y=g[d>>2]|0):(g[6977]=d|y,y=p,d=p+8|0),g[d>>2]=L,g[y+12>>2]=L,g[L+8>>2]=y,g[L+12>>2]=p;break}if(y=E>>>8,y?E>>>0>16777215?v=31:(zt=(y+1048320|0)>>>16&8,Et=y<<zt,$t=(Et+520192|0)>>>16&4,Et=Et<<$t,v=(Et+245760|0)>>>16&2,v=14-($t|zt|v)+(Et<<v>>>15)|0,v=E>>>(v+7|0)&1|v<<1):v=0,p=28212+(v<<2)|0,g[L+28>>2]=v,g[L+20>>2]=0,g[T>>2]=0,y=g[6978]|0,d=1<<v,!(y&d)){g[6978]=y|d,g[p>>2]=L,g[L+24>>2]=p,g[L+12>>2]=L,g[L+8>>2]=L;break}y=g[p>>2]|0;e:do if((g[y+4>>2]&-8|0)!=(E|0)){for(v=E<<((v|0)==31?0:25-(v>>>1)|0);p=y+16+(v>>>31<<2)|0,d=g[p>>2]|0,!!d;)if((g[d+4>>2]&-8|0)==(E|0)){y=d;break e}else v=v<<1,y=d;g[p>>2]=L,g[L+24>>2]=y,g[L+12>>2]=L,g[L+8>>2]=L;break t}while(!1);zt=y+8|0,Et=g[zt>>2]|0,g[Et+12>>2]=L,g[zt>>2]=L,g[L+8>>2]=Et,g[L+12>>2]=y,g[L+24>>2]=0}}else Et=g[6981]|0,(Et|0)==0|E>>>0<Et>>>0&&(g[6981]=E),g[7089]=E,g[7090]=R,g[7092]=0,g[6986]=g[7095],g[6985]=-1,g[6990]=27948,g[6989]=27948,g[6992]=27956,g[6991]=27956,g[6994]=27964,g[6993]=27964,g[6996]=27972,g[6995]=27972,g[6998]=27980,g[6997]=27980,g[7e3]=27988,g[6999]=27988,g[7002]=27996,g[7001]=27996,g[7004]=28004,g[7003]=28004,g[7006]=28012,g[7005]=28012,g[7008]=28020,g[7007]=28020,g[7010]=28028,g[7009]=28028,g[7012]=28036,g[7011]=28036,g[7014]=28044,g[7013]=28044,g[7016]=28052,g[7015]=28052,g[7018]=28060,g[7017]=28060,g[7020]=28068,g[7019]=28068,g[7022]=28076,g[7021]=28076,g[7024]=28084,g[7023]=28084,g[7026]=28092,g[7025]=28092,g[7028]=28100,g[7027]=28100,g[7030]=28108,g[7029]=28108,g[7032]=28116,g[7031]=28116,g[7034]=28124,g[7033]=28124,g[7036]=28132,g[7035]=28132,g[7038]=28140,g[7037]=28140,g[7040]=28148,g[7039]=28148,g[7042]=28156,g[7041]=28156,g[7044]=28164,g[7043]=28164,g[7046]=28172,g[7045]=28172,g[7048]=28180,g[7047]=28180,g[7050]=28188,g[7049]=28188,g[7052]=28196,g[7051]=28196,Et=R+-40|0,$t=E+8|0,$t=($t&7|0)==0?0:0-$t&7,zt=E+$t|0,$t=Et-$t|0,g[6983]=zt,g[6980]=$t,g[zt+4>>2]=$t|1,g[E+Et+4>>2]=40,g[6984]=g[7099];while(!1);if(y=g[6980]|0,y>>>0>st>>>0)return $t=y-st|0,g[6980]=$t,Et=g[6983]|0,zt=Et+st|0,g[6983]=zt,g[zt+4>>2]=$t|1,g[Et+4>>2]=st|3,Et=Et+8|0,it=ve,Et|0}return Et=_d()|0,g[Et>>2]=12,Et=0,it=ve,Et|0}function Je(d){d=d|0;var y=0,p=0,v=0,T=0,E=0,R=0,C=0,L=0;if(d){p=d+-8|0,T=g[6981]|0,d=g[d+-4>>2]|0,y=d&-8,L=p+y|0;do if(d&1)C=p,R=p;else{if(v=g[p>>2]|0,!(d&3)||(R=p+(0-v)|0,E=v+y|0,R>>>0<T>>>0))return;if((g[6982]|0)==(R|0)){if(d=L+4|0,y=g[d>>2]|0,(y&3|0)!=3){C=R,y=E;break}g[6979]=E,g[d>>2]=y&-2,g[R+4>>2]=E|1,g[R+E>>2]=E;return}if(p=v>>>3,v>>>0<256)if(d=g[R+8>>2]|0,y=g[R+12>>2]|0,(y|0)==(d|0)){g[6977]=g[6977]&~(1<<p),C=R,y=E;break}else{g[d+12>>2]=y,g[y+8>>2]=d,C=R,y=E;break}T=g[R+24>>2]|0,d=g[R+12>>2]|0;do if((d|0)==(R|0)){if(y=R+16|0,p=y+4|0,d=g[p>>2]|0,d)y=p;else if(d=g[y>>2]|0,!d){d=0;break}for(;;)if(v=d+20|0,p=g[v>>2]|0,p)d=p,y=v;else if(v=d+16|0,p=g[v>>2]|0,p)d=p,y=v;else break;g[y>>2]=0}else C=g[R+8>>2]|0,g[C+12>>2]=d,g[d+8>>2]=C;while(!1);if(T){if(y=g[R+28>>2]|0,p=28212+(y<<2)|0,(g[p>>2]|0)==(R|0)){if(g[p>>2]=d,!d){g[6978]=g[6978]&~(1<<y),C=R,y=E;break}}else if(C=T+16|0,g[((g[C>>2]|0)==(R|0)?C:T+20|0)>>2]=d,!d){C=R,y=E;break}g[d+24>>2]=T,y=R+16|0,p=g[y>>2]|0,p|0&&(g[d+16>>2]=p,g[p+24>>2]=d),y=g[y+4>>2]|0,y?(g[d+20>>2]=y,g[y+24>>2]=d,C=R,y=E):(C=R,y=E)}else C=R,y=E}while(!1);if(!(R>>>0>=L>>>0)&&(d=L+4|0,v=g[d>>2]|0,!!(v&1))){if(v&2)g[d>>2]=v&-2,g[C+4>>2]=y|1,g[R+y>>2]=y,T=y;else{if((g[6983]|0)==(L|0)){if(L=(g[6980]|0)+y|0,g[6980]=L,g[6983]=C,g[C+4>>2]=L|1,(C|0)!=(g[6982]|0))return;g[6982]=0,g[6979]=0;return}if((g[6982]|0)==(L|0)){L=(g[6979]|0)+y|0,g[6979]=L,g[6982]=R,g[C+4>>2]=L|1,g[R+L>>2]=L;return}T=(v&-8)+y|0,p=v>>>3;do if(v>>>0<256)if(y=g[L+8>>2]|0,d=g[L+12>>2]|0,(d|0)==(y|0)){g[6977]=g[6977]&~(1<<p);break}else{g[y+12>>2]=d,g[d+8>>2]=y;break}else{E=g[L+24>>2]|0,d=g[L+12>>2]|0;do if((d|0)==(L|0)){if(y=L+16|0,p=y+4|0,d=g[p>>2]|0,d)y=p;else if(d=g[y>>2]|0,!d){p=0;break}for(;;)if(v=d+20|0,p=g[v>>2]|0,p)d=p,y=v;else if(v=d+16|0,p=g[v>>2]|0,p)d=p,y=v;else break;g[y>>2]=0,p=d}else p=g[L+8>>2]|0,g[p+12>>2]=d,g[d+8>>2]=p,p=d;while(!1);if(E|0){if(d=g[L+28>>2]|0,y=28212+(d<<2)|0,(g[y>>2]|0)==(L|0)){if(g[y>>2]=p,!p){g[6978]=g[6978]&~(1<<d);break}}else if(v=E+16|0,g[((g[v>>2]|0)==(L|0)?v:E+20|0)>>2]=p,!p)break;g[p+24>>2]=E,d=L+16|0,y=g[d>>2]|0,y|0&&(g[p+16>>2]=y,g[y+24>>2]=p),d=g[d+4>>2]|0,d|0&&(g[p+20>>2]=d,g[d+24>>2]=p)}}while(!1);if(g[C+4>>2]=T|1,g[R+T>>2]=T,(C|0)==(g[6982]|0)){g[6979]=T;return}}if(d=T>>>3,T>>>0<256){p=27948+(d<<1<<2)|0,y=g[6977]|0,d=1<<d,y&d?(y=p+8|0,d=g[y>>2]|0):(g[6977]=y|d,d=p,y=p+8|0),g[y>>2]=C,g[d+12>>2]=C,g[C+8>>2]=d,g[C+12>>2]=p;return}d=T>>>8,d?T>>>0>16777215?v=31:(R=(d+1048320|0)>>>16&8,L=d<<R,E=(L+520192|0)>>>16&4,L=L<<E,v=(L+245760|0)>>>16&2,v=14-(E|R|v)+(L<<v>>>15)|0,v=T>>>(v+7|0)&1|v<<1):v=0,d=28212+(v<<2)|0,g[C+28>>2]=v,g[C+20>>2]=0,g[C+16>>2]=0,y=g[6978]|0,p=1<<v;t:do if(!(y&p))g[6978]=y|p,g[d>>2]=C,g[C+24>>2]=d,g[C+12>>2]=C,g[C+8>>2]=C;else{d=g[d>>2]|0;e:do if((g[d+4>>2]&-8|0)!=(T|0)){for(v=T<<((v|0)==31?0:25-(v>>>1)|0);p=d+16+(v>>>31<<2)|0,y=g[p>>2]|0,!!y;)if((g[y+4>>2]&-8|0)==(T|0)){d=y;break e}else v=v<<1,d=y;g[p>>2]=C,g[C+24>>2]=d,g[C+12>>2]=C,g[C+8>>2]=C;break t}while(!1);R=d+8|0,L=g[R>>2]|0,g[L+12>>2]=C,g[R>>2]=C,g[C+8>>2]=L,g[C+12>>2]=d,g[C+24>>2]=0}while(!1);if(L=(g[6985]|0)+-1|0,g[6985]=L,!(L|0)){for(d=28364;d=g[d>>2]|0,d;)d=d+8|0;g[6985]=-1}}}}function Os(d,y){d=d|0,y=y|0;var p=0;return d?(p=Ws(y,d)|0,(y|d)>>>0>65535&&(p=((p>>>0)/(d>>>0)|0|0)==(y|0)?p:-1)):p=0,d=Ca(p)|0,!d||!(g[d+-4>>2]&3)||xa(d|0,0,p|0)|0,d|0}function Pe(d,y,p,v){return d=d|0,y=y|0,p=p|0,v=v|0,p=d+p>>>0,Ze(y+v+(p>>>0<d>>>0|0)>>>0|0),p|0|0}function rr(d,y,p,v){return d=d|0,y=y|0,p=p|0,v=v|0,v=y-v-(p>>>0>d>>>0|0)>>>0,Ze(v|0),d-p>>>0|0|0}function Gc(d){return d=d|0,(d?31-(ws(d^d-1)|0)|0:32)|0}function Ul(d,y,p,v,T){d=d|0,y=y|0,p=p|0,v=v|0,T=T|0;var E=0,R=0,C=0,L=0,z=0,W=0,st=0,pt=0,At=0,gt=0;if(W=d,L=y,z=L,R=p,pt=v,C=pt,!z)return E=(T|0)!=0,C?E?(g[T>>2]=d|0,g[T+4>>2]=y&0,pt=0,T=0,Ze(pt|0),T|0):(pt=0,T=0,Ze(pt|0),T|0):(E&&(g[T>>2]=(W>>>0)%(R>>>0),g[T+4>>2]=0),pt=0,T=(W>>>0)/(R>>>0)>>>0,Ze(pt|0),T|0);E=(C|0)==0;do if(R){if(!E){if(E=(ws(C|0)|0)-(ws(z|0)|0)|0,E>>>0<=31){st=E+1|0,C=31-E|0,y=E-31>>31,R=st,d=W>>>(st>>>0)&y|z<<C,y=z>>>(st>>>0)&y,E=0,C=W<<C;break}return T?(g[T>>2]=d|0,g[T+4>>2]=L|y&0,pt=0,T=0,Ze(pt|0),T|0):(pt=0,T=0,Ze(pt|0),T|0)}if(E=R-1|0,E&R|0){C=(ws(R|0)|0)+33-(ws(z|0)|0)|0,gt=64-C|0,st=32-C|0,L=st>>31,At=C-32|0,y=At>>31,R=C,d=st-1>>31&z>>>(At>>>0)|(z<<st|W>>>(C>>>0))&y,y=y&z>>>(C>>>0),E=W<<gt&L,C=(z<<gt|W>>>(At>>>0))&L|W<<st&C-33>>31;break}return T|0&&(g[T>>2]=E&W,g[T+4>>2]=0),(R|0)==1?(At=L|y&0,gt=d|0|0,Ze(At|0),gt|0):(gt=Gc(R|0)|0,At=z>>>(gt>>>0)|0,gt=z<<32-gt|W>>>(gt>>>0)|0,Ze(At|0),gt|0)}else{if(E)return T|0&&(g[T>>2]=(z>>>0)%(R>>>0),g[T+4>>2]=0),At=0,gt=(z>>>0)/(R>>>0)>>>0,Ze(At|0),gt|0;if(!W)return T|0&&(g[T>>2]=0,g[T+4>>2]=(z>>>0)%(C>>>0)),At=0,gt=(z>>>0)/(C>>>0)>>>0,Ze(At|0),gt|0;if(E=C-1|0,!(E&C))return T|0&&(g[T>>2]=d|0,g[T+4>>2]=E&z|y&0),At=0,gt=z>>>((Gc(C|0)|0)>>>0),Ze(At|0),gt|0;if(E=(ws(C|0)|0)-(ws(z|0)|0)|0,E>>>0<=30){y=E+1|0,C=31-E|0,R=y,d=z<<C|W>>>(y>>>0),y=z>>>(y>>>0),E=0,C=W<<C;break}return T?(g[T>>2]=d|0,g[T+4>>2]=L|y&0,At=0,gt=0,Ze(At|0),gt|0):(At=0,gt=0,Ze(At|0),gt|0)}while(!1);if(!R)z=C,L=0,C=0;else{st=p|0|0,W=pt|v&0,z=Pe(st|0,W|0,-1,-1)|0,p=ot()|0,L=C,C=0;do v=L,L=E>>>31|L<<1,E=C|E<<1,v=d<<1|v>>>31|0,pt=d>>>31|y<<1|0,rr(z|0,p|0,v|0,pt|0)|0,gt=ot()|0,At=gt>>31|((gt|0)<0?-1:0)<<1,C=At&1,d=rr(v|0,pt|0,At&st|0,(((gt|0)<0?-1:0)>>31|((gt|0)<0?-1:0)<<1)&W|0)|0,y=ot()|0,R=R-1|0;while((R|0)!=0);z=L,L=0}return R=0,T|0&&(g[T>>2]=d,g[T+4>>2]=y),At=(E|0)>>>31|(z|R)<<1|(R<<1|E>>>31)&0|L,gt=(E<<1|0)&-2|C,Ze(At|0),gt|0}function Pa(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0;return z=y>>31|((y|0)<0?-1:0)<<1,L=((y|0)<0?-1:0)>>31|((y|0)<0?-1:0)<<1,E=v>>31|((v|0)<0?-1:0)<<1,T=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,C=rr(z^d|0,L^y|0,z|0,L|0)|0,R=ot()|0,d=E^z,y=T^L,rr((Ul(C,R,rr(E^p|0,T^v|0,E|0,T|0)|0,ot()|0,0)|0)^d|0,(ot()|0)^y|0,d|0,y|0)|0}function Xc(d,y){d=d|0,y=y|0;var p=0,v=0,T=0,E=0;return E=d&65535,T=y&65535,p=Ws(T,E)|0,v=d>>>16,d=(p>>>16)+(Ws(T,v)|0)|0,T=y>>>16,y=Ws(T,E)|0,Ze((d>>>16)+(Ws(T,v)|0)+(((d&65535)+y|0)>>>16)|0),d+y<<16|p&65535|0|0}function Un(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0;return T=d,E=p,p=Xc(T,E)|0,d=ot()|0,Ze((Ws(y,E)|0)+(Ws(v,T)|0)+d|d&0|0),p|0|0|0}function Qc(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0,R=0,C=0,L=0,z=0;return T=it,it=it+16|0,C=T|0,R=y>>31|((y|0)<0?-1:0)<<1,E=((y|0)<0?-1:0)>>31|((y|0)<0?-1:0)<<1,z=v>>31|((v|0)<0?-1:0)<<1,L=((v|0)<0?-1:0)>>31|((v|0)<0?-1:0)<<1,d=rr(R^d|0,E^y|0,R|0,E|0)|0,y=ot()|0,Ul(d,y,rr(z^p|0,L^v|0,z|0,L|0)|0,ot()|0,C)|0,v=rr(g[C>>2]^R|0,g[C+4>>2]^E|0,R|0,E|0)|0,p=ot()|0,it=T,Ze(p|0),v|0}function kl(d,y,p,v){d=d|0,y=y|0,p=p|0,v=v|0;var T=0,E=0;return E=it,it=it+16|0,T=E|0,Ul(d,y,p,v,T)|0,it=E,Ze(g[T+4>>2]|0),g[T>>2]|0|0}function q1(d,y,p){return d=d|0,y=y|0,p=p|0,(p|0)<32?(Ze(y>>p|0),d>>>p|(y&(1<<p)-1)<<32-p):(Ze(((y|0)<0?-1:0)|0),y>>p-32|0)}function ue(d,y,p){return d=d|0,y=y|0,p=p|0,(p|0)<32?(Ze(y>>>p|0),d>>>p|(y&(1<<p)-1)<<32-p):(Ze(0),y>>>p-32|0)}function _e(d,y,p){return d=d|0,y=y|0,p=p|0,(p|0)<32?(Ze(y<<p|(d&(1<<p)-1<<32-p)>>>32-p|0),d<<p):(Ze(d<<p-32|0),0)}function bd(d,y,p){return d=d|0,y=y|0,y=ws(y)|0,(y|0)==32&&(y=y+(ws(d)|0)|0),Ze(0),y|0}function hh(d,y){return d=+d,y=+y,d!=d?+y:y!=y?+d:+Gf(+d,+y)}function fh(d,y){return d=+d,y=+y,d!=d?+y:y!=y?+d:+S0(+d,+y)}function Vo(d){return d=+d,d>=0?+Gn(d+.5):+bl(d-.5)}function jl(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0;if((p|0)>=8192)return M0(d|0,y|0,p|0)|0,d|0;if(E=d|0,T=d+p|0,(d&3)==(y&3)){for(;d&3;){if(!p)return E|0;ce[d>>0]=ce[y>>0]|0,d=d+1|0,y=y+1|0,p=p-1|0}for(p=T&-4|0,v=p-64|0;(d|0)<=(v|0);)g[d>>2]=g[y>>2],g[d+4>>2]=g[y+4>>2],g[d+8>>2]=g[y+8>>2],g[d+12>>2]=g[y+12>>2],g[d+16>>2]=g[y+16>>2],g[d+20>>2]=g[y+20>>2],g[d+24>>2]=g[y+24>>2],g[d+28>>2]=g[y+28>>2],g[d+32>>2]=g[y+32>>2],g[d+36>>2]=g[y+36>>2],g[d+40>>2]=g[y+40>>2],g[d+44>>2]=g[y+44>>2],g[d+48>>2]=g[y+48>>2],g[d+52>>2]=g[y+52>>2],g[d+56>>2]=g[y+56>>2],g[d+60>>2]=g[y+60>>2],d=d+64|0,y=y+64|0;for(;(d|0)<(p|0);)g[d>>2]=g[y>>2],d=d+4|0,y=y+4|0}else for(p=T-4|0;(d|0)<(p|0);)ce[d>>0]=ce[y>>0]|0,ce[d+1>>0]=ce[y+1>>0]|0,ce[d+2>>0]=ce[y+2>>0]|0,ce[d+3>>0]=ce[y+3>>0]|0,d=d+4|0,y=y+4|0;for(;(d|0)<(T|0);)ce[d>>0]=ce[y>>0]|0,d=d+1|0,y=y+1|0;return E|0}function xa(d,y,p){d=d|0,y=y|0,p=p|0;var v=0,T=0,E=0,R=0;if(E=d+p|0,y=y&255,(p|0)>=67){for(;d&3;)ce[d>>0]=y,d=d+1|0;for(v=E&-4|0,R=y|y<<8|y<<16|y<<24,T=v-64|0;(d|0)<=(T|0);)g[d>>2]=R,g[d+4>>2]=R,g[d+8>>2]=R,g[d+12>>2]=R,g[d+16>>2]=R,g[d+20>>2]=R,g[d+24>>2]=R,g[d+28>>2]=R,g[d+32>>2]=R,g[d+36>>2]=R,g[d+40>>2]=R,g[d+44>>2]=R,g[d+48>>2]=R,g[d+52>>2]=R,g[d+56>>2]=R,g[d+60>>2]=R,d=d+64|0;for(;(d|0)<(v|0);)g[d>>2]=R,d=d+4|0}for(;(d|0)<(E|0);)ce[d>>0]=y,d=d+1|0;return E-p|0}function vd(d){return d=+d,d>=0?+Gn(d+.5):+bl(d-.5)}function oo(d){d=d|0;var y=0,p=0,v=0;return v=w0()|0,p=g[Qi>>2]|0,y=p+d|0,(d|0)>0&(y|0)<(p|0)|(y|0)<0?(A1(y|0)|0,vl(12),-1):(y|0)>(v|0)&&!(qT(y|0)|0)?(vl(12),-1):(g[Qi>>2]=y,p|0)}return{___divdi3:Pa,___muldi3:Un,___remdi3:Qc,___uremdi3:kl,_areNeighborCells:JT,_bitshift64Ashr:q1,_bitshift64Lshr:ue,_bitshift64Shl:_e,_calloc:Os,_cellAreaKm2:$1,_cellAreaM2:Is,_cellAreaRads2:hs,_cellToBoundary:Rl,_cellToCenterChild:ch,_cellToChildPos:Vc,_cellToChildren:lh,_cellToChildrenSize:zc,_cellToLatLng:ko,_cellToLocalIj:fS,_cellToParent:ad,_cellToVertex:Jr,_cellToVertexes:Fl,_cellsToDirectedEdge:R1,_cellsToLinkedMultiPolygon:E0,_childPosToCell:q0,_compactCells:x1,_destroyLinkedMultiPolygon:Ad,_directedEdgeToBoundary:rd,_directedEdgeToCells:nS,_edgeLengthKm:$c,_edgeLengthM:Y0,_edgeLengthRads:Es,_emscripten_replace_memory:g1,_free:Je,_getBaseCellNumber:C1,_getDirectedEdgeDestination:eS,_getDirectedEdgeOrigin:tS,_getHexagonAreaAvgKm2:z1,_getHexagonAreaAvgM2:uS,_getHexagonEdgeLengthAvgKm:hS,_getHexagonEdgeLengthAvgM:V1,_getIcosahedronFaces:$0,_getNumCells:ud,_getPentagons:H0,_getRes0Cells:eh,_getResolution:jc,_greatCircleDistanceKm:Gs,_greatCircleDistanceM:U1,_greatCircleDistanceRads:L1,_gridDisk:us,_gridDiskDistances:Kf,_gridDistance:X0,_gridPathCells:W1,_gridPathCellsSize:eo,_gridRingUnsafe:p1,_i64Add:Pe,_i64Subtract:rr,_isPentagon:tn,_isResClassIII:j0,_isValidCell:L0,_isValidDirectedEdge:iS,_isValidVertex:zo,_latLngToCell:V0,_llvm_ctlz_i64:bd,_llvm_maxnum_f64:hh,_llvm_minnum_f64:fh,_llvm_round_f64:Vo,_localIjToCell:fs,_malloc:Ca,_maxFaceCount:F1,_maxGridDiskSize:GT,_maxPolygonToCellsSize:Fc,_maxPolygonToCellsSizeExperimental:gd,_memcpy:jl,_memset:xa,_originToDirectedEdges:rS,_pentagonCount:W0,_polygonToCells:_1,_polygonToCellsExperimental:qc,_readInt64AsDoubleFromPointer:tg,_res0CellCount:v1,_round:vd,_sbrk:oo,_sizeOfCellBoundary:Fr,_sizeOfCoordIJ:Ra,_sizeOfGeoLoop:Nn,_sizeOfGeoPolygon:rn,_sizeOfH3Index:Z0,_sizeOfLatLng:J0,_sizeOfLinkedGeoPolygon:xl,_uncompactCells:N1,_uncompactCellsSize:k0,_vertexToLatLng:so,establishStackSpace:Qf,stackAlloc:YT,stackRestore:y1,stackSave:Xf}}(os,Ku,nt);e.___divdi3=de.___divdi3,e.___muldi3=de.___muldi3,e.___remdi3=de.___remdi3,e.___uremdi3=de.___uremdi3,e._areNeighborCells=de._areNeighborCells,e._bitshift64Ashr=de._bitshift64Ashr,e._bitshift64Lshr=de._bitshift64Lshr,e._bitshift64Shl=de._bitshift64Shl,e._calloc=de._calloc,e._cellAreaKm2=de._cellAreaKm2,e._cellAreaM2=de._cellAreaM2,e._cellAreaRads2=de._cellAreaRads2,e._cellToBoundary=de._cellToBoundary,e._cellToCenterChild=de._cellToCenterChild,e._cellToChildPos=de._cellToChildPos,e._cellToChildren=de._cellToChildren,e._cellToChildrenSize=de._cellToChildrenSize,e._cellToLatLng=de._cellToLatLng,e._cellToLocalIj=de._cellToLocalIj,e._cellToParent=de._cellToParent,e._cellToVertex=de._cellToVertex,e._cellToVertexes=de._cellToVertexes,e._cellsToDirectedEdge=de._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=de._cellsToLinkedMultiPolygon,e._childPosToCell=de._childPosToCell,e._compactCells=de._compactCells,e._destroyLinkedMultiPolygon=de._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=de._directedEdgeToBoundary,e._directedEdgeToCells=de._directedEdgeToCells,e._edgeLengthKm=de._edgeLengthKm,e._edgeLengthM=de._edgeLengthM,e._edgeLengthRads=de._edgeLengthRads;var Nc=e._emscripten_replace_memory=de._emscripten_replace_memory;e._free=de._free,e._getBaseCellNumber=de._getBaseCellNumber,e._getDirectedEdgeDestination=de._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=de._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=de._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=de._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=de._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=de._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=de._getIcosahedronFaces,e._getNumCells=de._getNumCells,e._getPentagons=de._getPentagons,e._getRes0Cells=de._getRes0Cells,e._getResolution=de._getResolution,e._greatCircleDistanceKm=de._greatCircleDistanceKm,e._greatCircleDistanceM=de._greatCircleDistanceM,e._greatCircleDistanceRads=de._greatCircleDistanceRads,e._gridDisk=de._gridDisk,e._gridDiskDistances=de._gridDiskDistances,e._gridDistance=de._gridDistance,e._gridPathCells=de._gridPathCells,e._gridPathCellsSize=de._gridPathCellsSize,e._gridRingUnsafe=de._gridRingUnsafe,e._i64Add=de._i64Add,e._i64Subtract=de._i64Subtract,e._isPentagon=de._isPentagon,e._isResClassIII=de._isResClassIII,e._isValidCell=de._isValidCell,e._isValidDirectedEdge=de._isValidDirectedEdge,e._isValidVertex=de._isValidVertex,e._latLngToCell=de._latLngToCell,e._llvm_ctlz_i64=de._llvm_ctlz_i64,e._llvm_maxnum_f64=de._llvm_maxnum_f64,e._llvm_minnum_f64=de._llvm_minnum_f64,e._llvm_round_f64=de._llvm_round_f64,e._localIjToCell=de._localIjToCell,e._malloc=de._malloc,e._maxFaceCount=de._maxFaceCount,e._maxGridDiskSize=de._maxGridDiskSize,e._maxPolygonToCellsSize=de._maxPolygonToCellsSize,e._maxPolygonToCellsSizeExperimental=de._maxPolygonToCellsSizeExperimental,e._memcpy=de._memcpy,e._memset=de._memset,e._originToDirectedEdges=de._originToDirectedEdges,e._pentagonCount=de._pentagonCount,e._polygonToCells=de._polygonToCells,e._polygonToCellsExperimental=de._polygonToCellsExperimental,e._readInt64AsDoubleFromPointer=de._readInt64AsDoubleFromPointer,e._res0CellCount=de._res0CellCount,e._round=de._round,e._sbrk=de._sbrk,e._sizeOfCellBoundary=de._sizeOfCellBoundary,e._sizeOfCoordIJ=de._sizeOfCoordIJ,e._sizeOfGeoLoop=de._sizeOfGeoLoop,e._sizeOfGeoPolygon=de._sizeOfGeoPolygon,e._sizeOfH3Index=de._sizeOfH3Index,e._sizeOfLatLng=de._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=de._sizeOfLinkedGeoPolygon,e._uncompactCells=de._uncompactCells,e._uncompactCellsSize=de._uncompactCellsSize,e._vertexToLatLng=de._vertexToLatLng,e.establishStackSpace=de.establishStackSpace;var yt=e.stackAlloc=de.stackAlloc,ct=e.stackRestore=de.stackRestore,Mi=e.stackSave=de.stackSave;if(e.asm=de,e.cwrap=B,e.setValue=b,e.getValue=S,ee){J(ee)||(ee=s(ee));{K();var yn=function(Gt){Gt.byteLength&&(Gt=new Uint8Array(Gt)),bt.set(Gt,m),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Ct()},On=function(){a(ee,yn,function(){throw"could not load memory initializer "+ee})},Sr=xn(ee);if(Sr)yn(Sr.buffer);else if(e.memoryInitializerRequest){var Kr=function(){var Gt=e.memoryInitializerRequest,ne=Gt.response;if(Gt.status!==200&&Gt.status!==0){var Ie=xn(e.memoryInitializerRequestURL);if(Ie)ne=Ie.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+Gt.status+", retrying "+ee),On();return}}yn(ne)};e.memoryInitializerRequest.response?setTimeout(Kr,0):e.memoryInitializerRequest.addEventListener("load",Kr)}else On()}}var $s;Y=function Gt(){$s||T0(),$s||(Y=Gt)};function T0(Gt){if(dt>0||(Ht(),dt>0))return;function ne(){$s||($s=!0,!M&&(Nt(),he(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),me()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),ne()},1)):ne()}e.run=T0;function ls(Gt){throw e.onAbort&&e.onAbort(Gt),Gt+="",o(Gt),l(Gt),M=!0,"abort("+Gt+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=ls,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return T0(),t}(typeof er=="object"?er:{}),Oi="number",ni=Oi,Im=Oi,Ei=Oi,Bi=Oi,Rr=Oi,$e=Oi,_2t=[["sizeOfH3Index",Oi],["sizeOfLatLng",Oi],["sizeOfCellBoundary",Oi],["sizeOfGeoLoop",Oi],["sizeOfGeoPolygon",Oi],["sizeOfLinkedGeoPolygon",Oi],["sizeOfCoordIJ",Oi],["readInt64AsDoubleFromPointer",Oi],["isValidCell",Im,[Ei,Bi]],["latLngToCell",ni,[Oi,Oi,Rr,$e]],["cellToLatLng",ni,[Ei,Bi,$e]],["cellToBoundary",ni,[Ei,Bi,$e]],["maxGridDiskSize",ni,[Oi,$e]],["gridDisk",ni,[Ei,Bi,Oi,$e]],["gridDiskDistances",ni,[Ei,Bi,Oi,$e,$e]],["gridRingUnsafe",ni,[Ei,Bi,Oi,$e]],["maxPolygonToCellsSize",ni,[$e,Rr,Oi,$e]],["polygonToCells",ni,[$e,Rr,Oi,$e]],["maxPolygonToCellsSizeExperimental",ni,[$e,Rr,Oi,$e]],["polygonToCellsExperimental",ni,[$e,Rr,Oi,Oi,Oi,$e]],["cellsToLinkedMultiPolygon",ni,[$e,Oi,$e]],["destroyLinkedMultiPolygon",null,[$e]],["compactCells",ni,[$e,$e,Oi,Oi]],["uncompactCells",ni,[$e,Oi,Oi,$e,Oi,Rr]],["uncompactCellsSize",ni,[$e,Oi,Oi,Rr,$e]],["isPentagon",Im,[Ei,Bi]],["isResClassIII",Im,[Ei,Bi]],["getBaseCellNumber",Oi,[Ei,Bi]],["getResolution",Oi,[Ei,Bi]],["maxFaceCount",ni,[Ei,Bi,$e]],["getIcosahedronFaces",ni,[Ei,Bi,$e]],["cellToParent",ni,[Ei,Bi,Rr,$e]],["cellToChildren",ni,[Ei,Bi,Rr,$e]],["cellToCenterChild",ni,[Ei,Bi,Rr,$e]],["cellToChildrenSize",ni,[Ei,Bi,Rr,$e]],["cellToChildPos",ni,[Ei,Bi,Rr,$e]],["childPosToCell",ni,[Oi,Oi,Ei,Bi,Rr,$e]],["areNeighborCells",ni,[Ei,Bi,Ei,Bi,$e]],["cellsToDirectedEdge",ni,[Ei,Bi,Ei,Bi,$e]],["getDirectedEdgeOrigin",ni,[Ei,Bi,$e]],["getDirectedEdgeDestination",ni,[Ei,Bi,$e]],["isValidDirectedEdge",Im,[Ei,Bi]],["directedEdgeToCells",ni,[Ei,Bi,$e]],["originToDirectedEdges",ni,[Ei,Bi,$e]],["directedEdgeToBoundary",ni,[Ei,Bi,$e]],["gridDistance",ni,[Ei,Bi,Ei,Bi,$e]],["gridPathCells",ni,[Ei,Bi,Ei,Bi,$e]],["gridPathCellsSize",ni,[Ei,Bi,Ei,Bi,$e]],["cellToLocalIj",ni,[Ei,Bi,Ei,Bi,Oi,$e]],["localIjToCell",ni,[Ei,Bi,$e,Oi,$e]],["getHexagonAreaAvgM2",ni,[Rr,$e]],["getHexagonAreaAvgKm2",ni,[Rr,$e]],["getHexagonEdgeLengthAvgM",ni,[Rr,$e]],["getHexagonEdgeLengthAvgKm",ni,[Rr,$e]],["greatCircleDistanceM",Oi,[$e,$e]],["greatCircleDistanceKm",Oi,[$e,$e]],["greatCircleDistanceRads",Oi,[$e,$e]],["cellAreaM2",ni,[Ei,Bi,$e]],["cellAreaKm2",ni,[Ei,Bi,$e]],["cellAreaRads2",ni,[Ei,Bi,$e]],["edgeLengthM",ni,[Ei,Bi,$e]],["edgeLengthKm",ni,[Ei,Bi,$e]],["edgeLengthRads",ni,[Ei,Bi,$e]],["getNumCells",ni,[Rr,$e]],["getRes0Cells",ni,[$e]],["res0CellCount",Oi],["getPentagons",ni,[Oi,$e]],["pentagonCount",Oi],["cellToVertex",ni,[Ei,Bi,Oi,$e]],["cellToVertexes",ni,[Ei,Bi,$e]],["vertexToLatLng",ni,[Ei,Bi,$e]],["isValidVertex",Im,[Ei,Bi]]],b2t=0,v2t=1,T2t=2,S2t=3,tq=4,w2t=5,M2t=6,I2t=7,E2t=8,B2t=9,O2t=10,R2t=11,D2t=12,C2t=13,P2t=14,x2t=15,Qr={};Qr[b2t]="Success";Qr[v2t]="The operation failed but a more specific error is not available";Qr[T2t]="Argument was outside of acceptable range";Qr[S2t]="Latitude or longitude arguments were outside of acceptable range";Qr[tq]="Resolution argument was outside of acceptable range";Qr[w2t]="Cell argument was not valid";Qr[M2t]="Directed edge argument was not valid";Qr[I2t]="Undirected edge argument was not valid";Qr[E2t]="Vertex argument was not valid";Qr[B2t]="Pentagon distortion was encountered";Qr[O2t]="Duplicate input";Qr[R2t]="Cell arguments were not neighbors";Qr[D2t]="Cell arguments had incompatible resolutions";Qr[C2t]="Memory allocation failed";Qr[P2t]="Bounds of provided memory were insufficient";Qr[x2t]="Mode or flags argument was not valid";var eq=1e3,N2t=1001,iq=1002,$T={};$T[eq]="Unknown unit";$T[N2t]="Array length out of bounds";$T[iq]="Got unexpected null value for H3 index";var F2t="Unknown error";function nq(t,e,i){var n=i&&"value"in i,r=new Error((t[e]||F2t)+" (code: "+e+(n?", value: "+i.value:"")+")");return r.code=e,r}function rq(t,e){var i=arguments.length===2?{value:e}:{};return nq(Qr,t,i)}function sq(t,e){var i=arguments.length===2?{value:e}:{};return nq($T,t,i)}function s0(t){if(t!==0)throw rq(t)}var Cr={};_2t.forEach(function(e){Cr[e[0]]=er.cwrap.apply(er,e)});var mA=16,L2t=4,Ef=8,U2t=8,KI=Cr.sizeOfH3Index(),aq=Cr.sizeOfLatLng(),k2t=Cr.sizeOfCellBoundary();Cr.sizeOfGeoPolygon();Cr.sizeOfGeoLoop();Cr.sizeOfLinkedGeoPolygon();Cr.sizeOfCoordIJ();var CU={m:"m",m2:"m2",km:"km",km2:"km2",rads:"rads",rads2:"rads2"};function j2t(t){if(typeof t!="number"||t<0||t>15||Math.floor(t)!==t)throw rq(tq,t);return t}function z2t(t){if(!t)throw sq(iq);return t}var V2t=/[^0-9a-fA-F]/;function a0(t){if(Array.isArray(t)&&t.length===2&&Number.isInteger(t[0])&&Number.isInteger(t[1]))return t;if(typeof t!="string"||V2t.test(t))return[0,0];var e=parseInt(t.substring(0,t.length-8),mA),i=parseInt(t.substring(t.length-8),mA);return[i,e]}function PU(t){if(t>=0)return t.toString(mA);t=t&2147483647;var e=oq(8,t.toString(mA)),i=(parseInt(e[0],mA)+8).toString(mA);return e=i+e.substring(1),e}function $2t(t,e){return PU(e)+oq(8,PU(t))}function oq(t,e){for(var i=t-e.length,n="",r=0;r<i;r++)n+="0";return n=n+e,n}function W2t(t,e){e===void 0&&(e=0);var i=er.getValue(t+KI*e,"i32"),n=er.getValue(t+KI*e+L2t,"i32");return n?$2t(i,n):null}function H2t(t,e){return e===void 0&&(e=0),er.getValue(t+Ef*e,"double")}function q2t(t){return Cr.readInt64AsDoubleFromPointer(t)}function F2(t){return nTt(er.getValue(t,"double"))}function Y2t(t){return[F2(t),F2(t+Ef)]}function G2t(t){return[F2(t+Ef),F2(t)]}function X2t(t,e,i){for(var n=er.getValue(t,"i32"),r=t+Ef,s=[],a=G2t,o=0;o<n*2;o+=2)s.push(a(r+Ef*o));return s.push(s[0]),s}function Q2t(t){var e=a0(t),i=e[0],n=e[1];return!!Cr.isPentagon(i,n)}function K2t(t){var e=a0(t),i=e[0],n=e[1];return Cr.isValidCell(i,n)?Cr.getResolution(i,n):-1}function Z2t(t,e,i){var n=er._malloc(aq);er.HEAPF64.set([t,e].map(iTt),n/Ef);var r=er._malloc(KI);try{return s0(Cr.latLngToCell(n,i,r)),z2t(W2t(r))}finally{er._free(r),er._free(n)}}function OO(t){var e=er._malloc(aq),i=a0(t),n=i[0],r=i[1];try{return s0(Cr.cellToLatLng(n,r,e)),Y2t(e)}finally{er._free(e)}}function J2t(t,e){var i=er._malloc(k2t),n=a0(t),r=n[0],s=n[1];try{return s0(Cr.cellToBoundary(r,s,i)),X2t(i,e,e)}finally{er._free(i)}}function tTt(t,e){var i=a0(t),n=i[0],r=i[1],s=a0(e),a=s[0],o=s[1],l=er._malloc(U2t);try{return s0(Cr.gridDistance(n,r,a,o,l)),q2t(l)}finally{er._free(l)}}function eTt(t,e){j2t(t);var i=er._malloc(Ef);try{switch(e){case CU.m:s0(Cr.getHexagonEdgeLengthAvgM(t,i));break;case CU.km:s0(Cr.getHexagonEdgeLengthAvgKm(t,i));break;default:throw sq(eq,e)}return H2t(i)}finally{er._free(i)}}function iTt(t){return t*Math.PI/180}function nTt(t){return t*180/Math.PI}function lq(t,e){e=e===void 0?t[0][0]:e;for(const i of t){const n=i[0]-e;n>180?i[0]-=360:n<-180&&(i[0]+=360)}}function rTt(t,e,i){const[n,r]=OO(t),s=e.length;lq(e,r);const a=e[0]===e[s-1]?s-1:s;for(let o=0;o<a;o++)e[o][0]=YA(r,e[o][0],i),e[o][1]=YA(n,e[o][1],i)}function sTt(t,e,i){const n=t(e,i),[r,s]=OO(n);return[s,r]}function xU(t,e=1){const i=J2t(t,!0);return e!==1?rTt(t,i,e):lq(i),i}function aTt(t){const e=new Float64Array(t.length*2);let i=0;for(const n of t)e[i++]=n[0],e[i++]=n[1];return e}const oTt=10;function lTt(t,e){let i;return t==null?i=e:typeof t=="object"?i={...t,coverage:e}:i={getHexagon:t,coverage:e},i}const cTt={...s1.defaultProps,highPrecision:"auto",coverage:{type:"number",min:0,max:1,value:1},centerHexagon:null,getHexagon:{type:"accessor",value:t=>t.hexagon},extruded:!0};class v0 extends Gu{initializeState(){v0._checkH3Lib(),this.state={edgeLengthKM:0,resolution:-1}}shouldUpdateState({changeFlags:e}){return this._shouldUseHighPrecision()?e.propsOrDataChanged:e.somethingChanged}updateState({props:e,changeFlags:i}){if(e.highPrecision!==!0&&(i.dataChanged||i.updateTriggersChanged&&i.updateTriggersChanged.getHexagon)){const n=this._calculateH3DataProps();this.setState(n)}this._updateVertices(this.context.viewport)}_calculateH3DataProps(){let e=-1,i=!1,n=!1;const{iterable:r,objectInfo:s}=p0(this.props.data);for(const a of r){s.index++;const o=this.props.getHexagon(a,s),l=K2t(o);if(e<0){if(e=l,!this.props.highPrecision)break}else if(e!==l){n=!0;break}if(Q2t(o)){i=!0;break}}return{resolution:e,edgeLengthKM:e>=0?eTt(e,"km"):0,hasMultipleRes:n,hasPentagon:i}}_shouldUseHighPrecision(){if(this.props.highPrecision==="auto"){const{resolution:e,hasPentagon:i,hasMultipleRes:n}=this.state,{viewport:r}=this.context;return!!(r!=null&&r.resolution)||n||i||e>=0&&e<=5}return this.props.highPrecision}_updateVertices(e){if(this._shouldUseHighPrecision())return;const{resolution:i,edgeLengthKM:n,centerHex:r}=this.state;if(i<0)return;const s=this.props.centerHexagon||Z2t(e.latitude,e.longitude,i);if(r===s)return;if(r)try{if(tTt(r,s)*n<oTt)return}catch{}const{unitsPerMeter:a}=e.distanceScales;let o=xU(s);const[l,c]=OO(s),[h,A]=e.projectFlat([c,l]);o=o.map(m=>{const b=e.projectFlat(m);return[(b[0]-h)/a[0],(b[1]-A)/a[1]]}),this.setState({centerHex:s,vertices:o})}renderLayers(){return this._shouldUseHighPrecision()?this._renderPolygonLayer():this._renderColumnLayer()}_getForwardProps(){const{elevationScale:e,material:i,coverage:n,extruded:r,wireframe:s,stroked:a,filled:o,lineWidthUnits:l,lineWidthScale:c,lineWidthMinPixels:h,lineWidthMaxPixels:A,getFillColor:m,getElevation:b,getLineColor:S,getLineWidth:M,transitions:I,updateTriggers:O}=this.props;return{elevationScale:e,extruded:r,coverage:n,wireframe:s,stroked:a,filled:o,lineWidthUnits:l,lineWidthScale:c,lineWidthMinPixels:h,lineWidthMaxPixels:A,material:i,getElevation:b,getFillColor:m,getLineColor:S,getLineWidth:M,transitions:I,updateTriggers:{getFillColor:O.getFillColor,getElevation:O.getElevation,getLineColor:O.getLineColor,getLineWidth:O.getLineWidth}}}_renderPolygonLayer(){const{data:e,getHexagon:i,updateTriggers:n,coverage:r}=this.props,s=this.getSubLayerClass("hexagon-cell-hifi",s1),a=this._getForwardProps();return a.updateTriggers.getPolygon=lTt(n.getHexagon,r),new s(a,this.getSubLayerProps({id:"hexagon-cell-hifi",updateTriggers:a.updateTriggers}),{data:e,_normalize:!1,_windingOrder:"CCW",positionFormat:"XY",getPolygon:(o,l)=>{const c=i(o,l);return aTt(xU(c,r))}})}_renderColumnLayer(){const{data:e,getHexagon:i,updateTriggers:n}=this.props,r=this.getSubLayerClass("hexagon-cell",xT),s=this._getForwardProps();return s.updateTriggers.getPosition=n.getHexagon,new r(s,this.getSubLayerProps({id:"hexagon-cell",flatShading:!0,updateTriggers:s.updateTriggers}),{data:e,diskResolution:6,radius:1,vertices:this.state.vertices,getPosition:sTt.bind(null,i)})}}v0.defaultProps=cTt;v0.layerName="H3HexagonLayer";v0._checkH3Lib=()=>{};const{data:h3t,getHexagon:f3t,...uTt}=v0.defaultProps;({...uTt});const hTt=[[255,255,178],[254,217,118],[254,178,76],[253,141,60],[240,59,32],[189,0,38]];function fTt(t,e=!1,i=Float32Array){let n;if(Number.isFinite(t[0]))n=new i(t);else{n=new i(t.length*4);let r=0;for(let s=0;s<t.length;s++){const a=t[s];n[r++]=a[0],n[r++]=a[1],n[r++]=a[2],n[r++]=Number.isFinite(a[3])?a[3]:255}}if(e)for(let r=0;r<n.length;r++)n[r]/=255;return n}function dTt(t){const e=t.map(o=>o[0]),i=t.map(o=>o[1]),n=Math.min.apply(null,e),r=Math.max.apply(null,e),s=Math.min.apply(null,i),a=Math.max.apply(null,i);return[n,s,r,a]}function ATt(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}const NU=new Float32Array(12);function FU(t,e=2){let i=0;for(const n of t)for(let r=0;r<e;r++)NU[i++]=n[r]||0;return NU}function gTt(t,e,i){const[n,r,s,a]=t,o=s-n,l=a-r;let c=o,h=l;o/l<e/i?c=e/i*l:h=i/e*o,c<e&&(c=e,h=i);const A=(s+n)/2,m=(a+r)/2;return[A-c/2,m-h/2,A+c/2,m+h/2]}function yTt(t,e){const[i,n,r,s]=e;return[(t[0]-i)/(r-i),(t[1]-n)/(s-n)]}const pTt=`#version 300 es
#define SHADER_NAME heatp-map-layer-vertex-shader
uniform sampler2D maxTexture;
in vec3 positions;
in vec2 texCoords;
out vec2 vTexCoords;
out float vIntensityMin;
out float vIntensityMax;
void main(void) {
gl_Position = project_position_to_clipspace(positions, vec3(0.0), vec3(0.0));
vTexCoords = texCoords;
vec4 maxTexture = texture(maxTexture, vec2(0.5));
float maxValue = triangle.aggregationMode < 0.5 ? maxTexture.r : maxTexture.g;
float minValue = maxValue * triangle.threshold;
if (triangle.colorDomain[1] > 0.) {
maxValue = triangle.colorDomain[1];
minValue = triangle.colorDomain[0];
}
vIntensityMax = triangle.intensity / maxValue;
vIntensityMin = triangle.intensity / minValue;
}
`,mTt=`#version 300 es
#define SHADER_NAME triangle-layer-fragment-shader
precision highp float;
uniform sampler2D weightsTexture;
uniform sampler2D colorTexture;
in vec2 vTexCoords;
in float vIntensityMin;
in float vIntensityMax;
out vec4 fragColor;
vec4 getLinearColor(float value) {
float factor = clamp(value * vIntensityMax, 0., 1.);
vec4 color = texture(colorTexture, vec2(factor, 0.5));
color.a *= min(value * vIntensityMin, 1.0);
return color;
}
void main(void) {
vec4 weights = texture(weightsTexture, vTexCoords);
float weight = weights.r;
if (triangle.aggregationMode > 0.5) {
weight /= max(1.0, weights.a);
}
if (weight <= 0.) {
discard;
}
vec4 linearColor = getLinearColor(weight);
linearColor.a *= layer.opacity;
fragColor = linearColor;
}
`,LU=`uniform triangleUniforms {
  float aggregationMode;
  vec2 colorDomain;
  float intensity;
  float threshold;
} triangle;
`,_Tt={name:"triangle",vs:LU,fs:LU,uniformTypes:{aggregationMode:"f32",colorDomain:"vec2<f32>",intensity:"f32",threshold:"f32"}};class cq extends Za{getShaders(){return super.getShaders({vs:pTt,fs:mTt,modules:[ml,_Tt]})}initializeState({device:e}){this.setState({model:this._getModel(e)})}_getModel(e){const{vertexCount:i,data:n}=this.props;return new Yr(e,{...this.getShaders(),id:this.props.id,attributes:n.attributes,bufferLayout:[{name:"positions",format:"float32x3"},{name:"texCoords",format:"float32x2"}],topology:"triangle-strip",vertexCount:i})}draw(){const{model:e}=this.state,{aggregationMode:i,colorDomain:n,intensity:r,threshold:s,colorTexture:a,maxTexture:o,weightsTexture:l}=this.props,c={aggregationMode:i,colorDomain:n,intensity:r,threshold:s,colorTexture:a,maxTexture:o,weightsTexture:l};e.shaderInputs.setProps({triangle:c}),e.draw(this.context.renderPass)}}cq.layerName="TriangleLayer";function bTt(t,e){const i={};for(const n in t)e.includes(n)||(i[n]=t[n]);return i}class uq extends Gu{initializeAggregationLayer(e){super.initializeState(this.context),this.setState({ignoreProps:bTt(this.constructor._propTypes,e.data.props),dimensions:e})}updateState(e){super.updateState(e);const{changeFlags:i}=e;if(i.extensionsChanged){const n=this.getShaders({});n&&n.defines&&(n.defines.NON_INSTANCED_MODEL=1),this.updateShaders(n)}this._updateAttributes()}updateAttributes(e){this.setState({changedAttributes:e})}getAttributes(){return this.getAttributeManager().getAttributes()}getModuleSettings(){const{viewport:e,mousePosition:i,device:n}=this.context;return Object.assign(Object.create(this.props),{viewport:e,mousePosition:i,picking:{isActive:0},devicePixelRatio:n.canvasContext.cssToDeviceRatio()})}updateShaders(e){}isAggregationDirty(e,i={}){const{props:n,oldProps:r,changeFlags:s}=e,{compareAll:a=!1,dimension:o}=i,{ignoreProps:l}=this.state,{props:c,accessors:h=[]}=o,{updateTriggersChanged:A}=s;if(s.dataChanged)return!0;if(A){if(A.all)return!0;for(const m of h)if(A[m])return!0}if(a)return s.extensionsChanged?!0:eO({oldProps:r,newProps:n,ignoreProps:l,propTypes:this.constructor._propTypes});for(const m of c)if(n[m]!==r[m])return!0;return!1}isAttributeChanged(e){const{changedAttributes:i}=this.state;return e?i&&i[e]!==void 0:!vTt(i)}_getAttributeManager(){return new tO(this.context.device,{id:this.props.id,stats:this.context.stats})}}uq.layerName="AggregationLayer";function vTt(t){let e=!0;for(const i in t){e=!1;break}return e}const UU=`#version 300 es
in vec3 positions;
in vec3 positions64Low;
in float weights;
out vec4 weightsTexture;
void main()
{
weightsTexture = vec4(weights * weight.weightsScale, 0., 0., 1.);
float radiusTexels = project_pixel_size(weight.radiusPixels) * weight.textureWidth / (weight.commonBounds.z - weight.commonBounds.x);
gl_PointSize = radiusTexels * 2.;
vec3 commonPosition = project_position(positions, positions64Low);
gl_Position.xy = (commonPosition.xy - weight.commonBounds.xy) / (weight.commonBounds.zw - weight.commonBounds.xy) ;
gl_Position.xy = (gl_Position.xy * 2.) - (1.);
gl_Position.w = 1.0;
}
`,kU=`#version 300 es
in vec4 weightsTexture;
out vec4 fragColor;
float gaussianKDE(float u){
return pow(2.71828, -u*u/0.05555)/(1.77245385*0.166666);
}
void main()
{
float dist = length(gl_PointCoord - vec2(0.5, 0.5));
if (dist > 0.5) {
discard;
}
fragColor = weightsTexture * gaussianKDE(2. * dist);
DECKGL_FILTER_COLOR(fragColor, geometry);
}
`,TTt=`#version 300 es
uniform sampler2D inTexture;
out vec4 outTexture;
void main()
{
int yIndex = gl_VertexID / int(maxWeight.textureSize);
int xIndex = gl_VertexID - (yIndex * int(maxWeight.textureSize));
vec2 uv = (0.5 + vec2(float(xIndex), float(yIndex))) / maxWeight.textureSize;
outTexture = texture(inTexture, uv);
gl_Position = vec4(0.0, 0.0, 0.0, 1.0);
gl_PointSize = 1.0;
}
`,STt=`#version 300 es
in vec4 outTexture;
out vec4 fragColor;
void main() {
fragColor = outTexture;
fragColor.g = outTexture.r / max(1.0, outTexture.a);
}
`,wTt=`uniform weightUniforms {
  vec4 commonBounds;
  float radiusPixels;
  float textureWidth;
  float weightsScale;
} weight;
`,MTt={name:"weight",vs:wTt,uniformTypes:{commonBounds:"vec4<f32>",radiusPixels:"f32",textureWidth:"f32",weightsScale:"f32"}},ITt={name:"maxWeight",vs:`uniform maxWeightUniforms {
  float textureSize;
} maxWeight;
`,uniformTypes:{textureSize:"f32"}},ETt=2,rM={format:"rgba8unorm",mipmaps:!1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}},jU=[0,0],BTt={SUM:0,MEAN:1},OTt={getPosition:{type:"accessor",value:t=>t.position},getWeight:{type:"accessor",value:1},intensity:{type:"number",min:0,value:1},radiusPixels:{type:"number",min:1,max:100,value:50},colorRange:hTt,threshold:{type:"number",min:0,max:1,value:.05},colorDomain:{type:"array",value:null,optional:!0},aggregation:"SUM",weightsTextureSize:{type:"number",min:128,max:2048,value:2048},debounceTimeout:{type:"number",min:0,max:1e3,value:500}},RTt=["float32-renderable-webgl","texture-blend-float-webgl"],DTt={data:{props:["radiusPixels"]}};class RO extends uq{getShaders(e){let i=[ml];return e.modules&&(i=[...i,...e.modules]),super.getShaders({...e,modules:i})}initializeState(){super.initializeAggregationLayer(DTt),this.setState({colorDomain:jU}),this._setupTextureParams(),this._setupAttributes(),this._setupResources()}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState(e){super.updateState(e),this._updateHeatmapState(e)}_updateHeatmapState(e){const{props:i,oldProps:n}=e,r=this._getChangeFlags(e);(r.dataChanged||r.viewportChanged)&&(r.boundsChanged=this._updateBounds(r.dataChanged),this._updateTextureRenderingBounds()),r.dataChanged||r.boundsChanged?(clearTimeout(this.state.updateTimer),this.setState({isWeightMapDirty:!0})):r.viewportZoomChanged&&this._debouncedUpdateWeightmap(),i.colorRange!==n.colorRange&&this._updateColorTexture(e),this.state.isWeightMapDirty&&this._updateWeightmap(),this.setState({zoom:e.context.viewport.zoom})}renderLayers(){const{weightsTexture:e,triPositionBuffer:i,triTexCoordBuffer:n,maxWeightsTexture:r,colorTexture:s,colorDomain:a}=this.state,{updateTriggers:o,intensity:l,threshold:c,aggregation:h}=this.props,A=this.getSubLayerClass("triangle",cq);return new A(this.getSubLayerProps({id:"triangle-layer",updateTriggers:o}),{coordinateSystem:Hi.DEFAULT,data:{attributes:{positions:i,texCoords:n}},vertexCount:4,maxTexture:r,colorTexture:s,aggregationMode:BTt[h]||0,weightsTexture:e,intensity:l,threshold:c,colorDomain:a})}finalizeState(e){super.finalizeState(e);const{weightsTransform:i,weightsTexture:n,maxWeightTransform:r,maxWeightsTexture:s,triPositionBuffer:a,triTexCoordBuffer:o,colorTexture:l,updateTimer:c}=this.state;i==null||i.destroy(),n==null||n.destroy(),r==null||r.destroy(),s==null||s.destroy(),a==null||a.destroy(),o==null||o.destroy(),l==null||l.destroy(),c&&clearTimeout(c)}_getAttributeManager(){return new tO(this.context.device,{id:this.props.id,stats:this.context.stats})}_getChangeFlags(e){const i={},{dimensions:n}=this.state;i.dataChanged=this.isAttributeChanged()&&"attribute changed"||this.isAggregationDirty(e,{compareAll:!0,dimension:n.data})&&"aggregation is dirty",i.viewportChanged=e.changeFlags.viewportChanged;const{zoom:r}=this.state;return(!e.context.viewport||e.context.viewport.zoom!==r)&&(i.viewportZoomChanged=!0),i}_createTextures(){const{textureSize:e,format:i}=this.state;this.setState({weightsTexture:this.context.device.createTexture({...rM,width:e,height:e,format:i}),maxWeightsTexture:this.context.device.createTexture({...rM,width:1,height:1,format:i})})}_setupAttributes(){this.getAttributeManager().add({positions:{size:3,type:"float64",accessor:"getPosition"},weights:{size:1,accessor:"getWeight"}}),this.setState({positionAttributeName:"positions"})}_setupTextureParams(){const{device:e}=this.context,{weightsTextureSize:i}=this.props,n=Math.min(i,e.limits.maxTextureDimension2D),r=RTt.every(o=>e.features.has(o)),s=r?"rgba32float":"rgba8unorm",a=r?1:1/255;this.setState({textureSize:n,format:s,weightsScale:a}),r||Ji.warn(`HeatmapLayer: ${this.id} rendering to float texture not supported, falling back to low precision format`)()}_createWeightsTransform(e){let{weightsTransform:i}=this.state;const{weightsTexture:n}=this.state,r=this.getAttributeManager();i==null||i.destroy(),i=new kF(this.context.device,{id:`${this.id}-weights-transform`,bufferLayout:r.getBufferLayouts(),vertexCount:1,targetTexture:n,parameters:{depthWriteEnabled:!1,blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"},topology:"point-list",...e,modules:[...e.modules,MTt]}),this.setState({weightsTransform:i})}_setupResources(){this._createTextures();const{device:e}=this.context,{textureSize:i,weightsTexture:n,maxWeightsTexture:r}=this.state,s=this.getShaders({vs:UU,fs:kU});this._createWeightsTransform(s);const a=this.getShaders({vs:TTt,fs:STt,modules:[ITt]}),o=new kF(e,{id:`${this.id}-max-weights-transform`,targetTexture:r,...a,vertexCount:i*i,topology:"point-list",parameters:{depthWriteEnabled:!1,blendColorOperation:"max",blendAlphaOperation:"max",blendColorSrcFactor:"one",blendColorDstFactor:"one",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one"}}),l={inTexture:n,textureSize:i};o.model.shaderInputs.setProps({maxWeight:l}),this.setState({weightsTexture:n,maxWeightsTexture:r,maxWeightTransform:o,zoom:null,triPositionBuffer:e.createBuffer({byteLength:48}),triTexCoordBuffer:e.createBuffer({byteLength:48})})}updateShaders(e){this._createWeightsTransform({vs:UU,fs:kU,...e})}_updateMaxWeightValue(){const{maxWeightTransform:e}=this.state;e.run({parameters:{viewport:[0,0,1,1]},clearColor:[0,0,0,0]})}_updateBounds(e=!1){const{viewport:i}=this.context,n=[i.unproject([0,0]),i.unproject([i.width,0]),i.unproject([0,i.height]),i.unproject([i.width,i.height])].map(o=>o.map(Math.fround)),r=dTt(n),s={visibleWorldBounds:r,viewportCorners:n};let a=!1;if(e||!this.state.worldBounds||!ATt(this.state.worldBounds,r)){const o=this._worldToCommonBounds(r),l=this._commonToWorldBounds(o);this.props.coordinateSystem===Hi.LNGLAT&&(l[1]=Math.max(l[1],-85.051129),l[3]=Math.min(l[3],85.051129),l[0]=Math.max(l[0],-360),l[2]=Math.min(l[2],360));const c=this._worldToCommonBounds(l);s.worldBounds=l,s.normalizedCommonBounds=c,a=!0}return this.setState(s),a}_updateTextureRenderingBounds(){const{triPositionBuffer:e,triTexCoordBuffer:i,normalizedCommonBounds:n,viewportCorners:r}=this.state,{viewport:s}=this.context;e.write(FU(r,3));const a=r.map(o=>yTt(s.projectPosition(o),n));i.write(FU(a,2))}_updateColorTexture(e){const{colorRange:i}=e.props;let{colorTexture:n}=this.state;const r=fTt(i,!1,Uint8Array);n&&(n==null?void 0:n.width)===i.length?n.setTexture2DData({data:r}):(n==null||n.destroy(),n=this.context.device.createTexture({...rM,data:r,width:i.length,height:1})),this.setState({colorTexture:n})}_updateWeightmap(){const{radiusPixels:e,colorDomain:i,aggregation:n}=this.props,{worldBounds:r,textureSize:s,weightsScale:a,weightsTexture:o}=this.state,l=this.state.weightsTransform;this.state.isWeightMapDirty=!1;const c=this._worldToCommonBounds(r,{useLayerCoordinateSystem:!0});if(i&&n==="SUM"){const{viewport:B}=this.context,P=B.distanceScales.metersPerUnit[2]*(c[2]-c[0])/s;this.state.colorDomain=i.map(j=>j*P*a)}else this.state.colorDomain=i||jU;const A=this.getAttributeManager().getAttributes(),m=this.getModuleSettings();this._setModelAttributes(l.model,A),l.model.setVertexCount(this.getNumInstances());const b={radiusPixels:e,commonBounds:c,textureWidth:s,weightsScale:a,weightsTexture:o},{viewport:S,devicePixelRatio:M,coordinateSystem:I,coordinateOrigin:O}=m,{modelMatrix:D}=this.props;l.model.shaderInputs.setProps({project:{viewport:S,devicePixelRatio:M,modelMatrix:D,coordinateSystem:I,coordinateOrigin:O},weight:b}),l.run({parameters:{viewport:[0,0,s,s]},clearColor:[0,0,0,0]}),this._updateMaxWeightValue()}_debouncedUpdateWeightmap(e=!1){let{updateTimer:i}=this.state;const{debounceTimeout:n}=this.props;e?(i=null,this._updateBounds(!0),this._updateTextureRenderingBounds(),this.setState({isWeightMapDirty:!0})):(this.setState({isWeightMapDirty:!1}),clearTimeout(i),i=setTimeout(this._debouncedUpdateWeightmap.bind(this,!0),n)),this.setState({updateTimer:i})}_worldToCommonBounds(e,i={}){const{useLayerCoordinateSystem:n=!1}=i,[r,s,a,o]=e,{viewport:l}=this.context,{textureSize:c}=this.state,{coordinateSystem:h}=this.props,A=n&&(h===Hi.LNGLAT_OFFSETS||h===Hi.METER_OFFSETS),m=A?l.projectPosition(this.props.coordinateOrigin):[0,0],b=c*ETt/l.scale;let S,M;return n&&!A?(S=this.projectPosition([r,s,0]),M=this.projectPosition([a,o,0])):(S=l.projectPosition([r,s,0]),M=l.projectPosition([a,o,0])),gTt([S[0]-m[0],S[1]-m[1],M[0]-m[0],M[1]-m[1]],b,b)}_commonToWorldBounds(e){const[i,n,r,s]=e,{viewport:a}=this.context,o=a.unprojectPosition([i,n]),l=a.unprojectPosition([r,s]);return o.slice(0,2).concat(l.slice(0,2))}}RO.layerName="HeatmapLayer";RO.defaultProps=OTt;const{data:d3t,getPosition:A3t,...CTt}=RO.defaultProps;({...CTt});const{data:g3t,getPath:y3t,...PTt}=t0.defaultProps,ZI={_pathType:"open",_validate:!0},hq={...PTt,...ZI};class JI extends Gu{getPickingInfo(e){return JH(e,this.props.data)}renderLayers(){const{data:e}=this.props;if(this.props.getPath!==void 0){const i=this.props.getPath;if(i!==void 0&&Fs.isLineStringVector(i))return this._renderLayersLineString(i);if(i!==void 0&&Fs.isMultiLineStringVector(i))return this._renderLayersMultiLineString(i);throw new Error("getPath should be an arrow Vector of LineString or MultiLineString type")}else{const i=Iu(e,ll.LINESTRING);if(i!==null)return this._renderLayersLineString(i);const n=Iu(e,ll.MULTILINESTRING);if(n!==null)return this._renderLayersMultiLineString(n)}throw new Error("getPath not GeoArrow LineString or MultiLineString")}_renderLayersLineString(e){const{data:i}=this.props;this.props._validate&&(on(Fs.isLineStringVector(e)),N2(this.props,i));const[n,r]=x2(this.props,["getPath"]),s=QI(i.data),a=[];for(let o=0;o<i.batches.length;o++){let l=e.data[o];Sc(l)&&(l=XI(l));const c=l.valueOffsets,h=tr.getLineStringChild(l),A=h.type.listSize,b=tr.getPointChild(h).values,S={...ZI,...r,recordBatchIdx:o,tableOffsets:s,id:`${this.props.id}-geoarrow-path-${o}`,data:{data:i.batches[o],length:l.length,startIndices:c,attributes:{getPath:{value:b,size:A}}}};for(const[I,O]of Object.entries(n))P2({props:S,propName:I,propInput:O,chunkIdx:o,geomCoordOffsets:c});const M=new t0(this.getSubLayerProps(S));a.push(M)}return a}_renderLayersMultiLineString(e){const{data:i}=this.props;this.props._validate&&(on(Fs.isMultiLineStringVector(e)),N2(this.props,i));const[n,r]=x2(this.props,["getPath"]),s=QI(i.data),a=[];for(let o=0;o<i.batches.length;o++){const l=e.data[o];let c=tr.getMultiLineStringChild(l);Sc(c)&&(c=XI(c));const h=tr.getLineStringChild(c),A=tr.getPointChild(h),m=l.valueOffsets,b=c.valueOffsets,S=h.type.listSize,M=A.values,I=d2t(l),O={...ZI,...r,recordBatchIdx:o,tableOffsets:s,id:`${this.props.id}-geoarrow-path-${o}`,data:{data:i.batches[o],invertedGeomOffsets:ZH(m),length:c.length,startIndices:b,attributes:{getPath:{value:M,size:S}}}};for(const[B,P]of Object.entries(n))P2({props:O,propName:B,propInput:P,chunkIdx:o,geomCoordOffsets:I});const D=new t0(this.getSubLayerProps(O));a.push(D)}return a}}rt(JI,"defaultProps",hq),rt(JI,"layerName","GeoArrowPathLayer");const{data:p3t,getPosition:m3t,...xTt}=aO.defaultProps;({...xTt});var Zh={},gc={},Jh={},zU;function fq(){if(zU)return Jh;zU=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.DefaultSerializer=Jh.extendSerializer=void 0;function t(n,r){const s=n.deserialize.bind(n),a=n.serialize.bind(n);return{deserialize(o){return r.deserialize(o,s)},serialize(o){return r.serialize(o,a)}}}Jh.extendSerializer=t;const e={deserialize(n){return Object.assign(Error(n.message),{name:n.name,stack:n.stack})},serialize(n){return{__error_marker:"$$error",message:n.message,name:n.name,stack:n.stack}}},i=n=>n&&typeof n=="object"&&"__error_marker"in n&&n.__error_marker==="$$error";return Jh.DefaultSerializer={deserialize(n){return i(n)?e.deserialize(n):n},serialize(n){return n instanceof Error?e.serialize(n):n}},Jh}var VU;function U_(){if(VU)return gc;VU=1,Object.defineProperty(gc,"__esModule",{value:!0}),gc.serialize=gc.deserialize=gc.registerSerializer=void 0;const t=fq();let e=t.DefaultSerializer;function i(s){e=t.extendSerializer(e,s)}gc.registerSerializer=i;function n(s){return e.deserialize(s)}gc.deserialize=n;function r(s){return e.serialize(s)}return gc.serialize=r,gc}var sM={},yc={},tf={},$U;function NTt(){if($U)return tf;$U=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.getBundleURL=tf.getBaseURL=void 0;let t;function e(){return t||(t=i()),t}tf.getBundleURL=e;function i(){try{throw new Error}catch(r){const s=(""+r.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(s)return n(s[0])}return"/"}function n(r){return(""+r).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}return tf.getBaseURL=n,tf}var WU;function dq(){if(WU)return yc;WU=1,Object.defineProperty(yc,"__esModule",{value:!0}),yc.isWorkerRuntime=yc.getWorkerImplementation=yc.defaultPoolSize=void 0;const t=NTt();yc.defaultPoolSize=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;const e=o=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(o);function i(o){const l=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(l)}function n(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class o extends Worker{constructor(h,A){var m,b;typeof h=="string"&&A&&A._baseURL?h=new URL(h,A._baseURL):typeof h=="string"&&!e(h)&&t.getBundleURL().match(/^file:\/\//i)&&(h=new URL(h,t.getBundleURL().replace(/\/[^\/]+$/,"/")),(!((m=A==null?void 0:A.CORSWorkaround)!==null&&m!==void 0)||m)&&(h=i(`importScripts(${JSON.stringify(h)});`))),typeof h=="string"&&e(h)&&(!((b=A==null?void 0:A.CORSWorkaround)!==null&&b!==void 0)||b)&&(h=i(`importScripts(${JSON.stringify(h)});`)),super(h,A)}}class l extends o{constructor(h,A){const m=window.URL.createObjectURL(h);super(m,A)}static fromText(h,A){const m=new window.Blob([h],{type:"text/javascript"});return new l(m,A)}}return{blob:l,default:o}}let r;function s(){return r||(r=n()),r}yc.getWorkerImplementation=s;function a(){const o=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!o)}return yc.isWorkerRuntime=a,yc}var ef={},cv={exports:{}},aM,HU;function FTt(){if(HU)return aM;HU=1;var t=1e3,e=t*60,i=e*60,n=i*24,r=n*7,s=n*365.25;aM=function(h,A){A=A||{};var m=typeof h;if(m==="string"&&h.length>0)return a(h);if(m==="number"&&isFinite(h))return A.long?l(h):o(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function a(h){if(h=String(h),!(h.length>100)){var A=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(A){var m=parseFloat(A[1]),b=(A[2]||"ms").toLowerCase();switch(b){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"weeks":case"week":case"w":return m*r;case"days":case"day":case"d":return m*n;case"hours":case"hour":case"hrs":case"hr":case"h":return m*i;case"minutes":case"minute":case"mins":case"min":case"m":return m*e;case"seconds":case"second":case"secs":case"sec":case"s":return m*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function o(h){var A=Math.abs(h);return A>=n?Math.round(h/n)+"d":A>=i?Math.round(h/i)+"h":A>=e?Math.round(h/e)+"m":A>=t?Math.round(h/t)+"s":h+"ms"}function l(h){var A=Math.abs(h);return A>=n?c(h,A,n,"day"):A>=i?c(h,A,i,"hour"):A>=e?c(h,A,e,"minute"):A>=t?c(h,A,t,"second"):h+" ms"}function c(h,A,m,b){var S=A>=m*1.5;return Math.round(h/m)+" "+b+(S?"s":"")}return aM}var oM,qU;function LTt(){if(qU)return oM;qU=1;function t(e){n.debug=n,n.default=n,n.coerce=c,n.disable=o,n.enable=s,n.enabled=l,n.humanize=FTt(),n.destroy=h,Object.keys(e).forEach(A=>{n[A]=e[A]}),n.names=[],n.skips=[],n.formatters={};function i(A){let m=0;for(let b=0;b<A.length;b++)m=(m<<5)-m+A.charCodeAt(b),m|=0;return n.colors[Math.abs(m)%n.colors.length]}n.selectColor=i;function n(A){let m,b=null,S,M;function I(...O){if(!I.enabled)return;const D=I,B=Number(new Date),P=B-(m||B);D.diff=P,D.prev=m,D.curr=B,m=B,O[0]=n.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let j=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(F,$)=>{if(F==="%%")return"%";j++;const V=n.formatters[$];if(typeof V=="function"){const Z=O[j];F=V.call(D,Z),O.splice(j,1),j--}return F}),n.formatArgs.call(D,O),(D.log||n.log).apply(D,O)}return I.namespace=A,I.useColors=n.useColors(),I.color=n.selectColor(A),I.extend=r,I.destroy=n.destroy,Object.defineProperty(I,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(S!==n.namespaces&&(S=n.namespaces,M=n.enabled(A)),M),set:O=>{b=O}}),typeof n.init=="function"&&n.init(I),I}function r(A,m){const b=n(this.namespace+(typeof m>"u"?":":m)+A);return b.log=this.log,b}function s(A){n.save(A),n.namespaces=A,n.names=[],n.skips=[];const m=(typeof A=="string"?A:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const b of m)b[0]==="-"?n.skips.push(b.slice(1)):n.names.push(b)}function a(A,m){let b=0,S=0,M=-1,I=0;for(;b<A.length;)if(S<m.length&&(m[S]===A[b]||m[S]==="*"))m[S]==="*"?(M=S,I=b,S++):(b++,S++);else if(M!==-1)S=M+1,I++,b=I;else return!1;for(;S<m.length&&m[S]==="*";)S++;return S===m.length}function o(){const A=[...n.names,...n.skips.map(m=>"-"+m)].join(",");return n.enable(""),A}function l(A){for(const m of n.skips)if(a(A,m))return!1;for(const m of n.names)if(a(A,m))return!0;return!1}function c(A){return A instanceof Error?A.stack||A.message:A}function h(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return oM=t,oM}var YU;function DO(){return YU||(YU=1,function(t,e){var i={};e.formatArgs=r,e.save=s,e.load=a,e.useColors=n,e.storage=o(),e.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;c.splice(1,0,h,"color: inherit");let A=0,m=0;c[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(A++,b==="%c"&&(m=A))}),c.splice(m,0,h)}e.log=console.debug||console.log||(()=>{});function s(c){try{c?e.storage.setItem("debug",c):e.storage.removeItem("debug")}catch{}}function a(){let c;try{c=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=i.DEBUG),c}function o(){try{return localStorage}catch{}}t.exports=LTt()(e);const{formatters:l}=t.exports;l.j=function(c){try{return JSON.stringify(c)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}}(cv,cv.exports)),cv.exports}var UTt=function(t,e,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(n.next(h))}catch(A){a(A)}}function l(h){try{c(n.throw(h))}catch(A){a(A)}}function c(h){h.done?s(h.value):r(h.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};class WT{constructor(e){this._baseObserver=e,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(e=>this._baseObserver.error(e))}error(e){this._baseObserver.error(e)}schedule(e){const i=Promise.all(this._pendingPromises),n=[],r=a=>n.push(a),s=Promise.resolve().then(()=>UTt(this,void 0,void 0,function*(){yield i,yield e(r),this._pendingPromises.delete(s);for(const a of n)this._baseObserver.next(a)})).catch(a=>{this._pendingPromises.delete(s),this._baseObserver.error(a)});this._pendingPromises.add(s)}}const Aq=()=>typeof Symbol=="function",d1=t=>Aq()&&!!Symbol[t],CO=t=>d1(t)?Symbol[t]:"@@"+t;d1("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const kTt=CO("iterator"),tE=CO("observable"),gq=CO("species");function L2(t,e){const i=t[e];if(i!=null){if(typeof i!="function")throw new TypeError(i+" is not a function");return i}}function Em(t){let e=t.constructor;return e!==void 0&&(e=e[gq],e===null&&(e=void 0)),e!==void 0?e:Dr}function jTt(t){return t instanceof Dr}function o0(t){o0.log?o0.log(t):setTimeout(()=>{throw t},0)}function Pv(t){Promise.resolve().then(()=>{try{t()}catch(e){o0(e)}})}function yq(t){const e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{const i=L2(e,"unsubscribe");i&&i.call(e)}}catch(i){o0(i)}}function eE(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function zTt(t){const e=t._queue;if(e){t._queue=void 0,t._state="ready";for(const i of e)if(pq(t,i.type,i.value),t._state==="closed")break}}function pq(t,e,i){t._state="running";const n=t._observer;try{const r=n?L2(n,e):void 0;switch(e){case"next":r&&r.call(n,i);break;case"error":if(eE(t),r)r.call(n,i);else throw i;break;case"complete":eE(t),r&&r.call(n);break}}catch(r){o0(r)}t._state==="closed"?yq(t):t._state==="running"&&(t._state="ready")}function lM(t,e,i){if(t._state!=="closed"){if(t._state==="buffering"){t._queue=t._queue||[],t._queue.push({type:e,value:i});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:i}],Pv(()=>zTt(t));return}pq(t,e,i)}}class VTt{constructor(e,i){this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";const n=new $Tt(this);try{this._cleanup=i.call(void 0,n)}catch(r){n.error(r)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(eE(this),yq(this))}}class $Tt{constructor(e){this._subscription=e}get closed(){return this._subscription._state==="closed"}next(e){lM(this._subscription,"next",e)}error(e){lM(this._subscription,"error",e)}complete(){lM(this._subscription,"complete")}}class Dr{constructor(e){if(!(this instanceof Dr))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}subscribe(e,i,n){return(typeof e!="object"||e===null)&&(e={next:e,error:i,complete:n}),new VTt(e,this._subscriber)}pipe(e,...i){let n=this;for(const r of[e,...i])n=r(n);return n}tap(e,i,n){const r=typeof e!="object"||e===null?{next:e,error:i,complete:n}:e;return new Dr(s=>this.subscribe({next(a){r.next&&r.next(a),s.next(a)},error(a){r.error&&r.error(a),s.error(a)},complete(){r.complete&&r.complete(),s.complete()},start(a){r.start&&r.start(a)}}))}forEach(e){return new Promise((i,n)=>{if(typeof e!="function"){n(new TypeError(e+" is not a function"));return}function r(){s.unsubscribe(),i(void 0)}const s=this.subscribe({next(a){try{e(a,r)}catch(o){n(o),s.unsubscribe()}},error(a){n(a)},complete(){i(void 0)}})})}map(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const i=Em(this);return new i(n=>this.subscribe({next(r){let s=r;try{s=e(r)}catch(a){return n.error(a)}n.next(s)},error(r){n.error(r)},complete(){n.complete()}}))}filter(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const i=Em(this);return new i(n=>this.subscribe({next(r){try{if(!e(r))return}catch(s){return n.error(s)}n.next(r)},error(r){n.error(r)},complete(){n.complete()}}))}reduce(e,i){if(typeof e!="function")throw new TypeError(e+" is not a function");const n=Em(this),r=arguments.length>1;let s=!1,a=i;return new n(o=>this.subscribe({next(l){const c=!s;if(s=!0,!c||r)try{a=e(a,l)}catch(h){return o.error(h)}else a=l},error(l){o.error(l)},complete(){if(!s&&!r)return o.error(new TypeError("Cannot reduce an empty sequence"));o.next(a),o.complete()}}))}concat(...e){const i=Em(this);return new i(n=>{let r,s=0;function a(o){r=o.subscribe({next(l){n.next(l)},error(l){n.error(l)},complete(){s===e.length?(r=void 0,n.complete()):a(i.from(e[s++]))}})}return a(this),()=>{r&&(r.unsubscribe(),r=void 0)}})}flatMap(e){if(typeof e!="function")throw new TypeError(e+" is not a function");const i=Em(this);return new i(n=>{const r=[],s=this.subscribe({next(o){let l;if(e)try{l=e(o)}catch(h){return n.error(h)}else l=o;const c=i.from(l).subscribe({next(h){n.next(h)},error(h){n.error(h)},complete(){const h=r.indexOf(c);h>=0&&r.splice(h,1),a()}});r.push(c)},error(o){n.error(o)},complete(){a()}});function a(){s.closed&&r.length===0&&n.complete()}return()=>{r.forEach(o=>o.unsubscribe()),s.unsubscribe()}})}[tE](){return this}static from(e){const i=typeof this=="function"?this:Dr;if(e==null)throw new TypeError(e+" is not an object");const n=L2(e,tE);if(n){const r=n.call(e);if(Object(r)!==r)throw new TypeError(r+" is not an object");return jTt(r)&&r.constructor===i?r:new i(s=>r.subscribe(s))}if(d1("iterator")){const r=L2(e,kTt);if(r)return new i(s=>{Pv(()=>{if(!s.closed){for(const a of r.call(e))if(s.next(a),s.closed)return;s.complete()}})})}if(Array.isArray(e))return new i(r=>{Pv(()=>{if(!r.closed){for(const s of e)if(r.next(s),r.closed)return;r.complete()}})});throw new TypeError(e+" is not observable")}static of(...e){const i=typeof this=="function"?this:Dr;return new i(n=>{Pv(()=>{if(!n.closed){for(const r of e)if(n.next(r),n.closed)return;n.complete()}})})}static get[gq](){return this}}Aq()&&Object.defineProperty(Dr,Symbol("extensions"),{value:{symbol:tE,hostReportError:o0},configurable:!0});function Yf(t){typeof t=="function"?t():t&&typeof t.unsubscribe=="function"&&t.unsubscribe()}var WTt=function(t,e,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(n.next(h))}catch(A){a(A)}}function l(h){try{c(n.throw(h))}catch(A){a(A)}}function c(h){h.done?s(h.value):r(h.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};function HTt(t){return e=>new Dr(i=>{const n=new WT(i),r=e.subscribe({complete(){n.complete()},error(s){n.error(s)},next(s){n.schedule(a=>WTt(this,void 0,void 0,function*(){(yield t(s))&&a(s)}))}});return()=>Yf(r)})}function qTt(t){return t&&d1("asyncIterator")&&t[Symbol.asyncIterator]}function YTt(t){return t&&d1("iterator")&&t[Symbol.iterator]}var GTt=function(t,e,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(n.next(h))}catch(A){a(A)}}function l(h){try{c(n.throw(h))}catch(A){a(A)}}function c(h){h.done?s(h.value):r(h.value).then(o,l)}c((n=n.apply(t,e||[])).next())})},XTt=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],i;return e?e.call(t):(t=typeof __values=="function"?__values(t):t[Symbol.iterator](),i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i);function n(s){i[s]=t[s]&&function(a){return new Promise(function(o,l){a=t[s](a),r(o,l,a.done,a.value)})}}function r(s,a,o,l){Promise.resolve(l).then(function(c){s({value:c,done:o})},a)}};function QTt(t){return e=>new Dr(i=>{const n=new WT(i),r=e.subscribe({complete(){n.complete()},error(s){n.error(s)},next(s){n.schedule(a=>GTt(this,void 0,void 0,function*(){var o,l;const c=yield t(s);if(YTt(c)||qTt(c))try{for(var h=XTt(c),A;A=yield h.next(),!A.done;){const m=A.value;a(m)}}catch(m){o={error:m}}finally{try{A&&!A.done&&(l=h.return)&&(yield l.call(h))}finally{if(o)throw o.error}}else c.map(m=>a(m))}))}});return()=>Yf(r)})}function KTt(t){return new Dr(e=>{let i=0;const n=setInterval(()=>{e.next(i++)},t);return()=>clearInterval(n)})}var ZTt=function(t,e,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(n.next(h))}catch(A){a(A)}}function l(h){try{c(n.throw(h))}catch(A){a(A)}}function c(h){h.done?s(h.value):r(h.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};function JTt(t){return e=>new Dr(i=>{const n=new WT(i),r=e.subscribe({complete(){n.complete()},error(s){n.error(s)},next(s){n.schedule(a=>ZTt(this,void 0,void 0,function*(){const o=yield t(s);a(o)}))}});return()=>Yf(r)})}function tSt(...t){return t.length===0?Dr.from([]):new Dr(e=>{let i=0;const n=t.map(s=>s.subscribe({error(a){e.error(a),r()},next(a){e.next(a)},complete(){++i===t.length&&(e.complete(),r())}})),r=()=>{n.forEach(s=>Yf(s))};return r})}class mq extends Dr{constructor(){super(e=>(this._observers.add(e),()=>this._observers.delete(e))),this._observers=new Set}next(e){for(const i of this._observers)i.next(e)}error(e){for(const i of this._observers)i.error(e)}complete(){for(const e of this._observers)e.complete()}}function eSt(t){const e=new mq;let i,n=0;return new Dr(r=>{i||(i=t.subscribe(e));const s=e.subscribe(r);return n++,()=>{n--,s.unsubscribe(),n===0&&(Yf(i),i=void 0)}})}var iSt=function(t,e,i,n){function r(s){return s instanceof i?s:new i(function(a){a(s)})}return new(i||(i=Promise))(function(s,a){function o(h){try{c(n.next(h))}catch(A){a(A)}}function l(h){try{c(n.throw(h))}catch(A){a(A)}}function c(h){h.done?s(h.value):r(h.value).then(o,l)}c((n=n.apply(t,e||[])).next())})};function nSt(t,e){return i=>new Dr(n=>{let r,s=0;const a=new WT(n),o=i.subscribe({complete(){a.complete()},error(l){a.error(l)},next(l){a.schedule(c=>iSt(this,void 0,void 0,function*(){r=yield t(s===0?typeof e>"u"?l:e:r,l,s++),c(r)}))}});return()=>Yf(o)})}const rSt=Object.freeze(Object.defineProperty({__proto__:null,Observable:Dr,Subject:mq,filter:HTt,flatMap:QTt,interval:KTt,map:JTt,merge:tSt,multicast:eSt,scan:nSt,unsubscribe:Yf},Symbol.toStringTag,{value:"Module"})),HT=tT(rSt);var Bm={},GU;function sSt(){if(GU)return Bm;GU=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.allSettled=void 0;function t(e){return Promise.all(e.map(i=>{const n=a=>({status:"fulfilled",value:a}),r=a=>({status:"rejected",reason:a}),s=Promise.resolve(i);try{return s.then(n,r)}catch(a){return Promise.reject(a)}}))}return Bm.allSettled=t,Bm}var cM={},XU;function aSt(){return XU||(XU=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PoolEventType=void 0,function(e){e.initialized="initialized",e.taskCanceled="taskCanceled",e.taskCompleted="taskCompleted",e.taskFailed="taskFailed",e.taskQueued="taskQueued",e.taskQueueDrained="taskQueueDrained",e.taskStart="taskStart",e.terminated="terminated"}(t.PoolEventType||(t.PoolEventType={}))}(cM)),cM}var Om={},ga={},QU;function PO(){return QU||(QU=1,Object.defineProperty(ga,"__esModule",{value:!0}),ga.$worker=ga.$transferable=ga.$terminate=ga.$events=ga.$errors=void 0,ga.$errors=Symbol("thread.errors"),ga.$events=Symbol("thread.events"),ga.$terminate=Symbol("thread.terminate"),ga.$transferable=Symbol("thread.transferable"),ga.$worker=Symbol("thread.worker")),ga}var KU;function _q(){if(KU)return Om;KU=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.Thread=void 0;const t=PO();function e(i){throw Error(i)}return Om.Thread={errors(i){return i[t.$errors]||e("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(i){return i[t.$events]||e("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(i){return i[t.$terminate]()}},Om}var ZU;function oSt(){return ZU||(ZU=1,function(t){var e=ef&&ef.__awaiter||function(O,D,B,P){function j(N){return N instanceof B?N:new B(function(F){F(N)})}return new(B||(B=Promise))(function(N,F){function $(nt){try{Z(P.next(nt))}catch(X){F(X)}}function V(nt){try{Z(P.throw(nt))}catch(X){F(X)}}function Z(nt){nt.done?N(nt.value):j(nt.value).then($,V)}Z((P=P.apply(O,D||[])).next())})},i=ef&&ef.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(t,"__esModule",{value:!0}),t.Pool=t.Thread=t.PoolEventType=void 0;const n=i(DO()),r=HT,s=sSt(),a=dq(),o=aSt();Object.defineProperty(t,"PoolEventType",{enumerable:!0,get:function(){return o.PoolEventType}});const l=_q();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return l.Thread}});let c=1;function h(O){const D=[];for(let B=0;B<O;B++)D.push(B);return D}function A(O){return new Promise(D=>setTimeout(D,O))}function m(O,D){return O.reduce((B,P)=>[...B,...D(P)],[])}function b(O){return O.replace(/\W/g," ").trim().replace(/\s+/g,"-")}function S(O,D){return h(D).map(()=>({init:O(),runningTasks:[]}))}class M{constructor(D,B){this.eventSubject=new r.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const P=typeof B=="number"?{size:B}:B||{},{size:j=a.defaultPoolSize}=P;this.debug=n.default(`threads:pool:${b(P.name||String(c++))}`),this.options=P,this.workers=S(D,j),this.eventObservable=r.multicast(r.Observable.from(this.eventSubject)),Promise.all(this.workers.map(N=>N.init)).then(()=>this.eventSubject.next({type:o.PoolEventType.initialized,size:this.workers.length}),N=>{this.debug("Error while initializing pool worker:",N),this.eventSubject.error(N),this.initErrors.push(N)})}findIdlingWorker(){const{concurrency:D=1}=this.options;return this.workers.find(B=>B.runningTasks.length<D)}runPoolTask(D,B){return e(this,void 0,void 0,function*(){const P=this.workers.indexOf(D)+1;this.debug(`Running task #${B.id} on worker #${P}...`),this.eventSubject.next({type:o.PoolEventType.taskStart,taskID:B.id,workerID:P});try{const j=yield B.run(yield D.init);this.debug(`Task #${B.id} completed successfully`),this.eventSubject.next({type:o.PoolEventType.taskCompleted,returnValue:j,taskID:B.id,workerID:P})}catch(j){this.debug(`Task #${B.id} failed`),this.eventSubject.next({type:o.PoolEventType.taskFailed,taskID:B.id,error:j,workerID:P})}})}run(D,B){return e(this,void 0,void 0,function*(){const P=e(this,void 0,void 0,function*(){const j=()=>{D.runningTasks=D.runningTasks.filter(N=>N!==P)};yield A(0);try{yield this.runPoolTask(D,B)}finally{j(),this.isClosing||this.scheduleWork()}});D.runningTasks.push(P)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const D=this.findIdlingWorker();if(!D)return;const B=this.taskQueue.shift();if(!B){this.debug("Task queue is empty"),this.eventSubject.next({type:o.PoolEventType.taskQueueDrained});return}this.run(D,B)}taskCompletion(D){return new Promise((B,P)=>{const j=this.events().subscribe(N=>{N.type===o.PoolEventType.taskCompleted&&N.taskID===D?(j.unsubscribe(),B(N.returnValue)):N.type===o.PoolEventType.taskFailed&&N.taskID===D?(j.unsubscribe(),P(N.error)):N.type===o.PoolEventType.terminated&&(j.unsubscribe(),P(Error("Pool has been terminated before task was run.")))})})}settled(D=!1){return e(this,void 0,void 0,function*(){const B=()=>m(this.workers,N=>N.runningTasks),P=[],j=this.eventObservable.subscribe(N=>{N.type===o.PoolEventType.taskFailed&&P.push(N.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):D&&this.taskQueue.length===0?(yield s.allSettled(B()),P):(yield new Promise((N,F)=>{const $=this.eventObservable.subscribe({next(V){V.type===o.PoolEventType.taskQueueDrained&&($.unsubscribe(),N(void 0))},error:F})}),yield s.allSettled(B()),j.unsubscribe(),P)})}completed(D=!1){return e(this,void 0,void 0,function*(){const B=this.settled(D),P=new Promise((N,F)=>{const $=this.eventObservable.subscribe({next(V){V.type===o.PoolEventType.taskQueueDrained?($.unsubscribe(),N(B)):V.type===o.PoolEventType.taskFailed&&($.unsubscribe(),F(V.error))},error:F})}),j=yield Promise.race([B,P]);if(j.length>0)throw j[0]})}events(){return this.eventObservable}queue(D){const{maxQueuedJobs:B=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const P=this.nextTaskID++,j=this.taskCompletion(P);j.catch(F=>{this.debug(`Task #${P} errored:`,F)});const N={id:P,run:D,cancel:()=>{this.taskQueue.indexOf(N)!==-1&&(this.taskQueue=this.taskQueue.filter(F=>F!==N),this.eventSubject.next({type:o.PoolEventType.taskCanceled,taskID:N.id}))},then:j.then.bind(j)};if(this.taskQueue.length>=B)throw Error(`Maximum number of pool tasks queued. Refusing to queue another one.
This usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.`);return this.debug(`Queueing task #${N.id}...`),this.taskQueue.push(N),this.eventSubject.next({type:o.PoolEventType.taskQueued,taskID:N.id}),this.scheduleWork(),N}terminate(D){return e(this,void 0,void 0,function*(){this.isClosing=!0,D||(yield this.completed(!0)),this.eventSubject.next({type:o.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(B=>e(this,void 0,void 0,function*(){return l.Thread.terminate(yield B.init)})))})}}M.EventType=o.PoolEventType;function I(O,D){return new M(O,D)}I.EventType=o.PoolEventType,t.Pool=I}(ef)),ef}var pc={},Rm={},JU;function lSt(){if(JU)return Rm;JU=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.createPromiseWithResolver=void 0;const t=()=>{};function e(){let i=!1,n,r=t;return[new Promise(o=>{i?o(n):r=o}),o=>{i=!0,n=o,r(n)}]}return Rm.createPromiseWithResolver=e,Rm}var uM={},tk;function cSt(){return tk||(tk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerEventType=void 0,function(e){e.internalError="internalError",e.message="message",e.termination="termination"}(t.WorkerEventType||(t.WorkerEventType={}))}(uM)),uM}var mc={},Dm={},ek;function uSt(){if(ek)return Dm;ek=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.ObservablePromise=void 0;const t=HT,e=()=>{},i=o=>o,n=o=>Promise.resolve().then(o);function r(o){throw o}function s(o){return o&&typeof o.then=="function"}class a extends t.Observable{constructor(l){super(c=>{const h=this,A=Object.assign(Object.assign({},c),{complete(){c.complete(),h.onCompletion()},error(m){c.error(m),h.onError(m)},next(m){c.next(m),h.onNext(m)}});try{return this.initHasRun=!0,l(A)}catch(m){A.error(m)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(l){this.firstValueSet||(this.firstValue=l,this.firstValueSet=!0)}onError(l){this.state="rejected",this.rejection=l;for(const c of this.rejectionCallbacks)n(()=>c(l))}onCompletion(){this.state="fulfilled";for(const l of this.fulfillmentCallbacks)n(()=>l(this.firstValue))}then(l,c){const h=l||i,A=c||r;let m=!1;return new Promise((b,S)=>{const M=O=>{if(!m){m=!0;try{b(A(O))}catch(D){S(D)}}},I=O=>{try{b(h(O))}catch(D){M(D)}};if(this.initHasRun||this.subscribe({error:M}),this.state==="fulfilled")return b(h(this.firstValue));if(this.state==="rejected")return m=!0,b(A(this.rejection));this.fulfillmentCallbacks.push(I),this.rejectionCallbacks.push(M)})}catch(l){return this.then(void 0,l)}finally(l){const c=l||e;return this.then(h=>(c(),h),()=>c())}static from(l){return s(l)?new a(c=>{const h=m=>{c.next(m),c.complete()},A=m=>{c.error(m)};l.then(h,A)}):super.from(l)}}return Dm.ObservablePromise=a,Dm}var nf={},ik;function U2(){if(ik)return nf;ik=1,Object.defineProperty(nf,"__esModule",{value:!0}),nf.Transfer=nf.isTransferDescriptor=void 0;const t=PO();function e(r){return!(!r||typeof r!="object")}function i(r){return r&&typeof r=="object"&&r[t.$transferable]}nf.isTransferDescriptor=i;function n(r,s){if(!s){if(!e(r))throw Error();s=[r]}return{[t.$transferable]:!0,send:r,transferables:s}}return nf.Transfer=n,nf}var hM={},nk;function bq(){return nk||(nk=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerMessageType=t.MasterMessageType=void 0,function(e){e.cancel="cancel",e.run="run"}(t.MasterMessageType||(t.MasterMessageType={})),function(e){e.error="error",e.init="init",e.result="result",e.running="running",e.uncaughtError="uncaughtError"}(t.WorkerMessageType||(t.WorkerMessageType={}))}(hM)),hM}var rk;function hSt(){if(rk)return mc;rk=1;var t=mc&&mc.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(mc,"__esModule",{value:!0}),mc.createProxyModule=mc.createProxyFunction=void 0;const e=t(DO()),i=HT,n=U_(),r=uSt(),s=U2(),a=bq(),o=e.default("threads:master:messages");let l=1;const c=O=>Array.from(new Set(O)),h=O=>O&&O.type===a.WorkerMessageType.error,A=O=>O&&O.type===a.WorkerMessageType.result,m=O=>O&&O.type===a.WorkerMessageType.running;function b(O,D){return new i.Observable(B=>{let P;const j=N=>{if(o("Message from worker:",N.data),!(!N.data||N.data.uid!==D)){if(m(N.data))P=N.data.resultType;else if(A(N.data))P==="promise"?(typeof N.data.payload<"u"&&B.next(n.deserialize(N.data.payload)),B.complete(),O.removeEventListener("message",j)):(N.data.payload&&B.next(n.deserialize(N.data.payload)),N.data.complete&&(B.complete(),O.removeEventListener("message",j)));else if(h(N.data)){const F=n.deserialize(N.data.error);B.error(F),O.removeEventListener("message",j)}}};return O.addEventListener("message",j),()=>{if(P==="observable"||!P){const N={type:a.MasterMessageType.cancel,uid:D};O.postMessage(N)}O.removeEventListener("message",j)}})}function S(O){if(O.length===0)return{args:[],transferables:[]};const D=[],B=[];for(const P of O)s.isTransferDescriptor(P)?(D.push(n.serialize(P.send)),B.push(...P.transferables)):D.push(n.serialize(P));return{args:D,transferables:B.length===0?B:c(B)}}function M(O,D){return(...B)=>{const P=l++,{args:j,transferables:N}=S(B),F={type:a.MasterMessageType.run,uid:P,method:D,args:j};o("Sending command to run function to worker:",F);try{O.postMessage(F,N)}catch($){return r.ObservablePromise.from(Promise.reject($))}return r.ObservablePromise.from(i.multicast(b(O,P)))}}mc.createProxyFunction=M;function I(O,D){const B={};for(const P of D)B[P]=M(O,P);return B}return mc.createProxyModule=I,mc}var sk;function fSt(){if(sk)return pc;sk=1;var t={},e=pc&&pc.__awaiter||function(N,F,$,V){function Z(nt){return nt instanceof $?nt:new $(function(X){X(nt)})}return new($||($=Promise))(function(nt,X){function bt(H){try{Ot(V.next(H))}catch(k){X(k)}}function Tt(H){try{Ot(V.throw(H))}catch(k){X(k)}}function Ot(H){H.done?nt(H.value):Z(H.value).then(bt,Tt)}Ot((V=V.apply(N,F||[])).next())})},i=pc&&pc.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(pc,"__esModule",{value:!0}),pc.spawn=void 0;const n=i(DO()),r=HT,s=U_(),a=lSt(),o=PO(),l=cSt(),c=hSt(),h=n.default("threads:master:messages"),A=n.default("threads:master:spawn"),m=n.default("threads:master:thread-utils"),b=N=>N&&N.type==="init",S=N=>N&&N.type==="uncaughtError",M=typeof process<"u"&&t.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(t.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function I(N,F,$){return e(this,void 0,void 0,function*(){let V;const Z=new Promise((X,bt)=>{V=setTimeout(()=>bt(Error($)),F)}),nt=yield Promise.race([N,Z]);return clearTimeout(V),nt})}function O(N){return new Promise((F,$)=>{const V=Z=>{h("Message from worker before finishing initialization:",Z.data),b(Z.data)?(N.removeEventListener("message",V),F(Z.data)):S(Z.data)&&(N.removeEventListener("message",V),$(s.deserialize(Z.data.error)))};N.addEventListener("message",V)})}function D(N,F){return new r.Observable($=>{const V=nt=>{const X={type:l.WorkerEventType.message,data:nt.data};$.next(X)},Z=nt=>{m("Unhandled promise rejection event in thread:",nt);const X={type:l.WorkerEventType.internalError,error:Error(nt.reason)};$.next(X)};N.addEventListener("message",V),N.addEventListener("unhandledrejection",Z),F.then(()=>{const nt={type:l.WorkerEventType.termination};N.removeEventListener("message",V),N.removeEventListener("unhandledrejection",Z),$.next(nt),$.complete()})})}function B(N){const[F,$]=a.createPromiseWithResolver();return{terminate:()=>e(this,void 0,void 0,function*(){m("Terminating worker"),yield N.terminate(),$()}),termination:F}}function P(N,F,$,V){const Z=$.filter(nt=>nt.type===l.WorkerEventType.internalError).map(nt=>nt.error);return Object.assign(N,{[o.$errors]:Z,[o.$events]:$,[o.$terminate]:V,[o.$worker]:F})}function j(N,F){return e(this,void 0,void 0,function*(){A("Initializing new thread");const $=F&&F.timeout?F.timeout:M,Z=(yield I(O(N),$,`Timeout: Did not receive an init message from worker after ${$}ms. Make sure the worker calls expose().`)).exposed,{termination:nt,terminate:X}=B(N),bt=D(N,nt);if(Z.type==="function"){const Tt=c.createProxyFunction(N);return P(Tt,N,bt,X)}else if(Z.type==="module"){const Tt=c.createProxyModule(N,Z.methods);return P(Tt,N,bt,X)}else{const Tt=Z.type;throw Error(`Worker init message states unexpected type of expose(): ${Tt}`)}})}return pc.spawn=j,pc}var ak;function dSt(){return ak||(ak=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Worker=t.BlobWorker=t.isWorkerRuntime=t.Thread=t.spawn=t.Pool=void 0;const e=dq();Object.defineProperty(t,"isWorkerRuntime",{enumerable:!0,get:function(){return e.isWorkerRuntime}});var i=oSt();Object.defineProperty(t,"Pool",{enumerable:!0,get:function(){return i.Pool}});var n=fSt();Object.defineProperty(t,"spawn",{enumerable:!0,get:function(){return n.spawn}});var r=_q();Object.defineProperty(t,"Thread",{enumerable:!0,get:function(){return r.Thread}}),t.BlobWorker=e.getWorkerImplementation().blob,t.Worker=e.getWorkerImplementation().default}(sM)),sM}var rf={},fM,ok;function ASt(){return ok||(ok=1,fM=t=>t?typeof Symbol.observable=="symbol"&&typeof t[Symbol.observable]=="function"?t===t[Symbol.observable]():typeof t["@@observable"]=="function"?t===t["@@observable"]():!1:!1),fM}var uv={},lk;function gSt(){if(lk)return uv;lk=1,Object.defineProperty(uv,"__esModule",{value:!0});const t=function(){const r=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!r)},e=function(r,s){self.postMessage(r,s)},i=function(r){const s=o=>{r(o.data)},a=()=>{self.removeEventListener("message",s)};return self.addEventListener("message",s),a};return uv.default={isWorkerRuntime:t,postMessageToMaster:e,subscribeToMasterMessages:i},uv}var ck;function ySt(){return ck||(ck=1,function(t){var e=rf&&rf.__awaiter||function(V,Z,nt,X){function bt(Tt){return Tt instanceof nt?Tt:new nt(function(Ot){Ot(Tt)})}return new(nt||(nt=Promise))(function(Tt,Ot){function H(lt){try{G(X.next(lt))}catch(Q){Ot(Q)}}function k(lt){try{G(X.throw(lt))}catch(Q){Ot(Q)}}function G(lt){lt.done?Tt(lt.value):bt(lt.value).then(H,k)}G((X=X.apply(V,Z||[])).next())})},i=rf&&rf.__importDefault||function(V){return V&&V.__esModule?V:{default:V}};Object.defineProperty(t,"__esModule",{value:!0}),t.expose=t.isWorkerRuntime=t.Transfer=t.registerSerializer=void 0;const n=i(ASt()),r=U_(),s=U2(),a=bq(),o=i(gSt());var l=U_();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return l.registerSerializer}});var c=U2();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return c.Transfer}}),t.isWorkerRuntime=o.default.isWorkerRuntime;let h=!1;const A=new Map,m=V=>V&&V.type===a.MasterMessageType.cancel,b=V=>V&&V.type===a.MasterMessageType.run,S=V=>n.default(V)||M(V);function M(V){return V&&typeof V=="object"&&typeof V.subscribe=="function"}function I(V){return s.isTransferDescriptor(V)?{payload:V.send,transferables:V.transferables}:{payload:V,transferables:void 0}}function O(){const V={type:a.WorkerMessageType.init,exposed:{type:"function"}};o.default.postMessageToMaster(V)}function D(V){const Z={type:a.WorkerMessageType.init,exposed:{type:"module",methods:V}};o.default.postMessageToMaster(Z)}function B(V,Z){const{payload:nt,transferables:X}=I(Z),bt={type:a.WorkerMessageType.error,uid:V,error:r.serialize(nt)};o.default.postMessageToMaster(bt,X)}function P(V,Z,nt){const{payload:X,transferables:bt}=I(nt),Tt={type:a.WorkerMessageType.result,uid:V,complete:Z?!0:void 0,payload:X};o.default.postMessageToMaster(Tt,bt)}function j(V,Z){const nt={type:a.WorkerMessageType.running,uid:V,resultType:Z};o.default.postMessageToMaster(nt)}function N(V){try{const Z={type:a.WorkerMessageType.uncaughtError,error:r.serialize(V)};o.default.postMessageToMaster(Z)}catch(Z){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,Z,`
Original error:`,V)}}function F(V,Z,nt){return e(this,void 0,void 0,function*(){let X;try{X=Z(...nt)}catch(Tt){return B(V,Tt)}const bt=S(X)?"observable":"promise";if(j(V,bt),S(X)){const Tt=X.subscribe(Ot=>P(V,!1,r.serialize(Ot)),Ot=>{B(V,r.serialize(Ot)),A.delete(V)},()=>{P(V,!0),A.delete(V)});A.set(V,Tt)}else try{const Tt=yield X;P(V,!0,r.serialize(Tt))}catch(Tt){B(V,r.serialize(Tt))}})}function $(V){if(!o.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(h)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(h=!0,typeof V=="function")o.default.subscribeToMasterMessages(Z=>{b(Z)&&!Z.method&&F(Z.uid,V,Z.args.map(r.deserialize))}),O();else if(typeof V=="object"&&V){o.default.subscribeToMasterMessages(nt=>{b(nt)&&nt.method&&F(nt.uid,V[nt.method],nt.args.map(r.deserialize))});const Z=Object.keys(V).filter(nt=>typeof V[nt]=="function");D(Z)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${V}`);o.default.subscribeToMasterMessages(Z=>{if(m(Z)){const nt=Z.uid,X=A.get(nt);X&&(X.unsubscribe(),A.delete(nt))}})}t.expose=$,typeof self<"u"&&typeof self.addEventListener=="function"&&o.default.isWorkerRuntime()&&(self.addEventListener("error",V=>{setTimeout(()=>N(V.error||V),250)}),self.addEventListener("unhandledrejection",V=>{const Z=V.reason;Z&&typeof Z.message=="string"&&setTimeout(()=>N(Z),250)})),typeof process<"u"&&typeof process.on=="function"&&o.default.isWorkerRuntime()&&(process.on("uncaughtException",V=>{setTimeout(()=>N(V),250)}),process.on("unhandledRejection",V=>{V&&typeof V.message=="string"&&setTimeout(()=>N(V),250)}))}(rf)),rf}var uk;function pSt(){return uk||(uk=1,function(t){var e=Zh&&Zh.__createBinding||(Object.create?function(o,l,c,h){h===void 0&&(h=c),Object.defineProperty(o,h,{enumerable:!0,get:function(){return l[c]}})}:function(o,l,c,h){h===void 0&&(h=c),o[h]=l[c]}),i=Zh&&Zh.__exportStar||function(o,l){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,o,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.Transfer=t.DefaultSerializer=t.expose=t.registerSerializer=void 0;var n=U_();Object.defineProperty(t,"registerSerializer",{enumerable:!0,get:function(){return n.registerSerializer}}),i(dSt(),t);var r=ySt();Object.defineProperty(t,"expose",{enumerable:!0,get:function(){return r.expose}});var s=fq();Object.defineProperty(t,"DefaultSerializer",{enumerable:!0,get:function(){return s.DefaultSerializer}});var a=U2();Object.defineProperty(t,"Transfer",{enumerable:!0,get:function(){return a.Transfer}})}(Zh)),Zh}var mSt=pSt();const Qu=dk(mSt);Qu.registerSerializer;const _St=Qu.spawn,bSt=Qu.BlobWorker;Qu.DefaultSerializer;const vSt=Qu.Pool;Qu.Thread;const hk=Qu.Transfer;Qu.Worker;const{data:b3t,getPolygon:v3t,...TSt}=e0.defaultProps,iE={_normalize:!1,_windingOrder:"CCW",_validate:!0,earcutWorkerUrl:"https://cdn.jsdelivr.net/npm/@geoarrow/geoarrow-js@0.3.0/dist/earcut-worker.min.js",earcutWorkerPoolSize:8},SSt={...TSt,...iE};class nE extends Gu{initializeState(e){this.state={table:null,tableOffsets:null,triangles:null,earcutWorkerRequest:this.props.earcutWorkerUrl===null||this.props.earcutWorkerUrl===void 0?null:fetch(this.props.earcutWorkerUrl).then(i=>i.text()),earcutWorkerPool:null}}async initEarcutPool(){var i;if(this.state.earcutWorkerPool)return this.state.earcutWorkerPool;const e=await this.state.earcutWorkerRequest;if(!e||(i=window==null?void 0:window.location)!=null&&i.href.startsWith("file://"))return null;try{const n=vSt(()=>_St(bSt.fromText(e)),8);return this.state.earcutWorkerPool=n,this.state.earcutWorkerPool}catch{return null}}async finalizeState(e){var i,n;await((n=(i=this.state)==null?void 0:i.earcutWorkerPool)==null?void 0:n.terminate()),console.log("terminated")}async updateData(){const{data:e}=this.props,i=await this._updateEarcut(e),n=QI(e.data);this.setState({table:this.props.data,triangles:i,tableOffsets:n})}async _updateEarcut(e){const i=Iu(e,ll.POLYGON);if(i!==null)return this._earcutPolygonVector(i);const n=Iu(e,ll.MULTIPOLYGON);if(n!==null)return this._earcutMultiPolygonVector(n);const r=this.props.getPolygon;if(r!==void 0&&Fs.isPolygonVector(r))return this._earcutPolygonVector(r);if(r!==void 0&&Fs.isMultiPolygonVector(r))return this._earcutMultiPolygonVector(r);throw new Error("geometryColumn not Polygon or MultiPolygon")}async _earcutPolygonVector(e){const i=await this.initEarcutPool();if(!i)return this._earcutPolygonVectorMainThread(e);const n=new Array(e.data.length);console.time("earcut");for(let r=0;r<e.data.length;r++){let s=e.data[r];Sc(s)&&(s=Gd(s));const[a,o]=OU.preparePostMessage(s,!0);i.queue(async l=>{const c=await l(hk(a,o));n[r]=c})}return await i.completed(),console.timeEnd("earcut"),n}_earcutPolygonVectorMainThread(e){const i=new Array(e.data.length);for(let n=0;n<e.data.length;n++){let r=e.data[n];Sc(r)&&(r=Gd(r)),i[n]=bU.earcut(r)}return i}async _earcutMultiPolygonVector(e){const i=await this.initEarcutPool();if(!i)return this._earcutMultiPolygonVectorMainThread(e);const n=new Array(e.data.length);console.time("earcut");for(let r=0;r<e.data.length;r++){const s=e.data[r];let a=tr.getMultiPolygonChild(s);Sc(a)&&(a=Gd(a));const[o,l]=OU.preparePostMessage(a,!0);i.queue(async c=>{const h=await c(hk(o,l));n[r]=h})}return await i.completed(),console.timeEnd("earcut"),n}_earcutMultiPolygonVectorMainThread(e){const i=new Array(e.data.length);for(let n=0;n<e.data.length;n++){const r=e.data[n];let s=tr.getMultiPolygonChild(r);Sc(s)&&(s=Gd(s)),i[n]=bU.earcut(s)}return i}updateState({props:e,changeFlags:i}){i.dataChanged&&this.updateData()}getPickingInfo(e){return JH(e,this.props.data)}renderLayers(){const{table:e}=this.state;if(!e)return null;if(this.props.getPolygon!==void 0){const i=this.props.getPolygon;if(i!==void 0&&Fs.isPolygonVector(i))return this._renderLayersPolygon(i);if(i!==void 0&&Fs.isMultiPolygonVector(i))return this._renderLayersMultiPolygon(i);throw new Error("getPolygon should be an arrow Vector of Polygon or MultiPolygon type")}else{const i=Iu(e,ll.POLYGON);if(i!==null)return this._renderLayersPolygon(i);const n=Iu(e,ll.MULTIPOLYGON);if(n!==null)return this._renderLayersMultiPolygon(n)}throw new Error("getPolygon not GeoArrow Polygon or MultiPolygon")}_renderLayersPolygon(e){const{table:i}=this.state;if(!i)return null;this.props._validate&&(on(Fs.isPolygonVector(e)),N2(this.props,i));const[n,r]=x2(this.props,["getPolygon"]),s=[];for(let a=0;a<i.batches.length;a++){let o=e.data[a];Sc(o)&&(o=Gd(o));const l=tr.getPolygonChild(o),c=tr.getLineStringChild(l),h=tr.getPointChild(c),A=c.type.listSize,m=h.values,b=DU(o);if(!this.state.triangles)return null;const S=this.state.triangles[a],M={...iE,...r,recordBatchIdx:a,tableOffsets:this.state.tableOffsets,id:`${this.props.id}-geoarrow-point-${a}`,data:{data:i.batches[a],length:o.length,startIndices:b,attributes:{getPolygon:{value:m,size:A},indices:{value:S,size:1}}}};for(const[O,D]of Object.entries(n))P2({props:M,propName:O,propInput:D,chunkIdx:a,geomCoordOffsets:b});const I=new e0(this.getSubLayerProps(M));s.push(I)}return s}_renderLayersMultiPolygon(e){const{table:i}=this.state;if(!i)return null;this.props._validate&&(on(Fs.isMultiPolygonVector(e)),N2(this.props,i));const[n,r]=x2(this.props,["getPolygon"]),s=[];for(let a=0;a<i.batches.length;a++){const o=e.data[a];let l=tr.getMultiPolygonChild(o);Sc(l)&&(l=Gd(l));const c=tr.getPolygonChild(l),h=tr.getLineStringChild(c),A=tr.getPointChild(h),m=h.type.listSize,b=o.valueOffsets,S=A.values;if(!this.state.triangles)return null;const M=this.state.triangles[a],I=DU(l),O=A2t(o),D={...iE,...r,recordBatchIdx:a,tableOffsets:this.state.tableOffsets,id:`${this.props.id}-geoarrow-solid-polygon-multi-${a}`,data:{data:i.batches[a],invertedGeomOffsets:ZH(b),length:l.length,startIndices:I,attributes:{getPolygon:{value:S,size:m},indices:{value:M,size:1}}}};for(const[j,N]of Object.entries(n))P2({props:D,propName:j,propInput:N,chunkIdx:a,geomCoordOffsets:O});const B=this.getSubLayerProps(D),P=new e0(B);s.push(P)}return s}}rt(nE,"defaultProps",SSt),rt(nE,"layerName","GeoArrowSolidPolygonLayer");function vq(t){return"data"in t?new Pi(t.data.map(e=>vq(e))):t}function Tq(t){if("data"in t)return new Pi(t.data.map(a=>Tq(a)));const e=t.valueOffsets,i=tr.getMultiPolygonChild(t),n=i.valueOffsets,r=tr.getPolygonChild(i),s=new Int32Array(e.length);for(let a=0;a<s.length;++a)s[a]=n[e[a]];return Ri({type:new Pu(i.type.children[0]),length:t.length,nullCount:t.nullCount,nullBitmap:t.nullBitmap,child:r,valueOffsets:s})}const{data:T3t,getPolygon:S3t,...wSt}=s1.defaultProps,MSt={_normalize:!1,_windingOrder:"CCW",_validate:!0},ISt={...wSt,...MSt},ESt=[0,0,0,255];class rE extends Gu{getPickingInfo(e){return e.info}renderLayers(){const{data:e}=this.props;if(this.props.getPolygon!==void 0){const i=this.props.getPolygon;if(Fs.isPolygonVector(i))return this._renderLayers(i);if(Fs.isMultiPolygonVector(i))return this._renderLayers(i);throw new Error("getPolygon should be an arrow Vector of Polygon or MultiPolygon type")}else{const i=Iu(e,ll.POLYGON);if(i!==null)return this._renderLayers(i);const n=Iu(e,ll.MULTIPOLYGON);if(n!==null)return this._renderLayers(n)}throw new Error("geometryColumn not Polygon or MultiPolygon")}_renderLayers(e){const{data:i}=this.props;let n;Fs.isPolygonVector(e)?n=vq(e):Fs.isMultiPolygonVector(e)?n=Tq(e):on(!1);const{data:r,_dataDiff:s,stroked:a,filled:o,extruded:l,wireframe:c,_normalize:h,_windingOrder:A,elevationScale:m,transitions:b,positionFormat:S}=this.props,{lineWidthUnits:M,lineWidthScale:I,lineWidthMinPixels:O,lineWidthMaxPixels:D,lineJointRounded:B,lineMiterLimit:P,lineDashJustified:j}=this.props,{getFillColor:N,getLineColor:F,getLineWidth:$,getElevation:V,getPolygon:Z,updateTriggers:nt,material:X}=this.props,bt=this.getSubLayerClass("fill",nE),Tt=this.getSubLayerClass("stroke",JI),Ot=new bt({extruded:l,elevationScale:m,filled:o,wireframe:c,_normalize:h,_windingOrder:A,getElevation:V,getFillColor:N,getLineColor:l&&c?F:ESt,material:X,transitions:b},this.getSubLayerProps({id:"fill",updateTriggers:nt&&{getPolygon:nt.getPolygon,getElevation:nt.getElevation,getFillColor:nt.getFillColor,getLineColor:nt.getLineColor}}),{data:r,positionFormat:S,getPolygon:Z}),H=!l&&a&&new Tt({widthUnits:M,widthScale:I,widthMinPixels:O,widthMaxPixels:D,jointRounded:B,miterLimit:P,dashJustified:j,_pathType:"loop",transitions:b&&{getWidth:b.getLineWidth,getColor:b.getLineColor,getPath:b.getPolygon},getColor:this.getSubLayerAccessor(F),getWidth:this.getSubLayerAccessor($)},this.getSubLayerProps({id:"stroke",updateTriggers:nt&&{getWidth:nt.getLineWidth,getColor:nt.getLineColor,getDashArray:nt.getLineDashArray}}),{data:i,positionFormat:S,getPath:n,pickable:!1});return[!l&&Ot,H,l&&Ot]}}rt(rE,"defaultProps",ISt),rt(rE,"layerName","GeoArrowPolygonLayer");const{data:w3t,getPosition:M3t,...BSt}=oO.defaultProps;({...BSt});const{data:I3t,getPosition:E3t,getText:B3t,getTextAnchor:O3t,getAlignmentBaseline:R3t,getPixelOffset:D3t,...OSt}=fO.defaultProps;({...OSt});const{data:C3t,getPath:P3t,...RSt}=hq;({...RSt});function DSt(t){return qu(()=>new b0t(t)).setProps(t),null}function CSt({data:t}){const e=Fe.useRef(null),i=Fe.useMemo(()=>[t&&new rE({id:"geoarrow-polygons",stroked:!1,filled:!0,data:t,getFillColor:[255,0,0,160],getLineColor:[0,255,0],lineWidthMinPixels:1})],[t]);return wc.jsx("div",{children:wc.jsx(Pit,{ref:e,initialViewState:{longitude:-123.113889,latitude:49.261111,zoom:2},style:{position:"absolute",top:0,left:0,bottom:0,right:0},mapStyle:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",children:wc.jsx(DSt,{layers:i})})})}var PSt=Object.create,Sq=Object.defineProperty,xSt=Object.getOwnPropertyDescriptor,NSt=Object.getOwnPropertyNames,FSt=Object.getPrototypeOf,LSt=Object.prototype.hasOwnProperty,USt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),kSt=(t,e,i,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of NSt(e))!LSt.call(t,r)&&r!==i&&Sq(t,r,{get:()=>e[r],enumerable:!(n=xSt(e,r))||n.enumerable});return t},jSt=(t,e,i)=>(i=t!=null?PSt(FSt(t)):{},kSt(!t||!t.__esModule?Sq(i,"default",{value:t,enumerable:!0}):i,t)),zSt=USt((t,e)=>{e.exports=Worker}),VSt=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOMATIC=1]="AUTOMATIC",t[t.READ_ONLY=2]="READ_ONLY",t[t.READ_WRITE=3]="READ_WRITE",t))(VSt||{}),$St=(t=>(t[t.IDENTIFIER=0]="IDENTIFIER",t[t.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",t[t.STRING_CONSTANT=2]="STRING_CONSTANT",t[t.OPERATOR=3]="OPERATOR",t[t.KEYWORD=4]="KEYWORD",t[t.COMMENT=5]="COMMENT",t))($St||{}),WSt=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(WSt||{}),HSt=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(HSt||{}),qSt=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(qSt||{}),YSt=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(YSt||{}),GSt=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(GSt||{}),XSt=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(XSt||{}),QSt=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(QSt||{});new TextEncoder;var KSt={version:"1.29.0"},xO=KSt.version.split(".");xO[0];xO[1];xO[2];jSt(zSt());function ZSt(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}ZSt();var wq=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(wq||{});async function JSt(){const t={query:{castBigIntToDouble:!0}},e=await U9.initializeDuckDb({config:t,debug:!0}),i="fire_perimeter.parquet";await e.registerFileURL(i,"https://gtfs-parquet.s3.us-west-2.amazonaws.com/lf_perimeter_nrt_all.parquet",wq.HTTP,!0);const r=await e.connect();await r.query("INSTALL spatial; LOAD spatial;"),console.log("create view"),await r.query(`CREATE VIEW IF NOT EXISTS '${i}' AS SELECT * FROM '${i}'`)}function twt(){Fe.useEffect(()=>{console.log("setting up db"),JSt().catch(n=>console.error(n.message))},[]);const{arrow:t,loading:e}=U9.useDuckDbQuery(`
  SELECT st_aswkb(geometry), farea
  FROM (
      SELECT geometry, farea
      FROM 'fire_perimeter.parquet'
      QUALIFY ROW_NUMBER() OVER (PARTITION BY fireid ORDER BY t DESC) = 1
  );
  `),i=Fe.useMemo(()=>{var c,h;if(!t)return;const n=(c=t.getChildAt(0))==null?void 0:c.toArray(),r=new Uint8Array(n.flatMap(A=>[...A])),s=new Int32Array(n.length+1);for(let A=0,m=n.length;A<m;A++){const b=s[A];s[A+1]=b+n[A].length}const a=Ri({type:new bM,data:r,valueOffsets:s}),o=fC.parseWkb(a,fC.WKBType.Polygon,2),l=new Io({geometry:MM(o),farea:MM((h=t.getChild("farea"))==null?void 0:h.toArray())});return console.log(l),l.schema.fields[0].metadata.set("ARROW:extension:name","geoarrow.polygon"),{table:l}},[t]);return wc.jsxs(wc.Fragment,{children:[e&&wc.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100vw",height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(255,255,255,0.7)",zIndex:1e3},children:wc.jsx("div",{children:"Loading..."})}),wc.jsx(CSt,{data:i==null?void 0:i.table})]})}$Y.createRoot(document.getElementById("root")).render(wc.jsx(twt,{}));export{dk as g};
